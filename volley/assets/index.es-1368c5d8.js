import{aP as Ee,aS as ei,b9 as sr,cr as Cn,aO as ns,aQ as vu,cs as gu,aR as e5,b8 as sn,aU as Bv,ct as r5}from"./index-cdd2c3b9.js";import{a as Te,r as Nv,e as ri,b as i5,c as n5,d as s5,_ as a5,f as o5,g as f5,p as h5,h as u5,s as mu,D as bu}from"./readable-browser-7eaf159c.js";import{b as qv}from"./index-5c01dcb3.js";import{B as ke}from"./_polyfill-node.buffer-a478a291.js";import{r as Si,s as yu,a as wu,d as _u,f as Io,g as Mu,c as c5,b as Ro,e as Uv,h as xu}from"./index-3dd3417d.js";import{c as Eu,g as kv,a as l5,b as d5}from"./index-fe16ceb5.js";import"./tslib.es6-c2094241.js";let p5=class{};class v5 extends p5{constructor(){super()}}class g5 extends v5{constructor(i){super()}}const m5="^https?:",b5="^wss?:";function y5(c){const i=c.match(new RegExp(/^\w+:/,"gi"));if(!(!i||!i.length))return i[0]}function Lv(c,i){const a=y5(c);return typeof a>"u"?!1:new RegExp(i).test(a)}function sd(c){return Lv(c,m5)}function ad(c){return Lv(c,b5)}function w5(c){return new RegExp("wss?://localhost(:d{2,5})?").test(c)}function Fv(c){return typeof c=="object"&&"id"in c&&"jsonrpc"in c&&c.jsonrpc==="2.0"}function Su(c){return Fv(c)&&"method"in c}function Po(c){return Fv(c)&&(Ki(c)||Ei(c))}function Ki(c){return"result"in c}function Ei(c){return"error"in c}var Au={},Oo={},ve={},$v={};(function(c){Object.defineProperty(c,"__esModule",{value:!0});function i(w,_){var M=w>>>16&65535,b=w&65535,S=_>>>16&65535,E=_&65535;return b*E+(M*E+b*S<<16>>>0)|0}c.mul=Math.imul||i;function a(w,_){return w+_|0}c.add=a;function h(w,_){return w-_|0}c.sub=h;function g(w,_){return w<<_|w>>>32-_}c.rotl=g;function s(w,_){return w<<32-_|w>>>_}c.rotr=s;function x(w){return typeof w=="number"&&isFinite(w)&&Math.floor(w)===w}c.isInteger=Number.isInteger||x,c.MAX_SAFE_INTEGER=9007199254740991,c.isSafeInteger=function(w){return c.isInteger(w)&&w>=-c.MAX_SAFE_INTEGER&&w<=c.MAX_SAFE_INTEGER}})($v);Object.defineProperty(ve,"__esModule",{value:!0});var zv=$v;function _5(c,i){return i===void 0&&(i=0),(c[i+0]<<8|c[i+1])<<16>>16}ve.readInt16BE=_5;function M5(c,i){return i===void 0&&(i=0),(c[i+0]<<8|c[i+1])>>>0}ve.readUint16BE=M5;function x5(c,i){return i===void 0&&(i=0),(c[i+1]<<8|c[i])<<16>>16}ve.readInt16LE=x5;function E5(c,i){return i===void 0&&(i=0),(c[i+1]<<8|c[i])>>>0}ve.readUint16LE=E5;function jv(c,i,a){return i===void 0&&(i=new Uint8Array(2)),a===void 0&&(a=0),i[a+0]=c>>>8,i[a+1]=c>>>0,i}ve.writeUint16BE=jv;ve.writeInt16BE=jv;function Hv(c,i,a){return i===void 0&&(i=new Uint8Array(2)),a===void 0&&(a=0),i[a+0]=c>>>0,i[a+1]=c>>>8,i}ve.writeUint16LE=Hv;ve.writeInt16LE=Hv;function J0(c,i){return i===void 0&&(i=0),c[i]<<24|c[i+1]<<16|c[i+2]<<8|c[i+3]}ve.readInt32BE=J0;function Y0(c,i){return i===void 0&&(i=0),(c[i]<<24|c[i+1]<<16|c[i+2]<<8|c[i+3])>>>0}ve.readUint32BE=Y0;function X0(c,i){return i===void 0&&(i=0),c[i+3]<<24|c[i+2]<<16|c[i+1]<<8|c[i]}ve.readInt32LE=X0;function Q0(c,i){return i===void 0&&(i=0),(c[i+3]<<24|c[i+2]<<16|c[i+1]<<8|c[i])>>>0}ve.readUint32LE=Q0;function Mo(c,i,a){return i===void 0&&(i=new Uint8Array(4)),a===void 0&&(a=0),i[a+0]=c>>>24,i[a+1]=c>>>16,i[a+2]=c>>>8,i[a+3]=c>>>0,i}ve.writeUint32BE=Mo;ve.writeInt32BE=Mo;function xo(c,i,a){return i===void 0&&(i=new Uint8Array(4)),a===void 0&&(a=0),i[a+0]=c>>>0,i[a+1]=c>>>8,i[a+2]=c>>>16,i[a+3]=c>>>24,i}ve.writeUint32LE=xo;ve.writeInt32LE=xo;function S5(c,i){i===void 0&&(i=0);var a=J0(c,i),h=J0(c,i+4);return a*4294967296+h-(h>>31)*4294967296}ve.readInt64BE=S5;function A5(c,i){i===void 0&&(i=0);var a=Y0(c,i),h=Y0(c,i+4);return a*4294967296+h}ve.readUint64BE=A5;function D5(c,i){i===void 0&&(i=0);var a=X0(c,i),h=X0(c,i+4);return h*4294967296+a-(a>>31)*4294967296}ve.readInt64LE=D5;function I5(c,i){i===void 0&&(i=0);var a=Q0(c,i),h=Q0(c,i+4);return h*4294967296+a}ve.readUint64LE=I5;function Kv(c,i,a){return i===void 0&&(i=new Uint8Array(8)),a===void 0&&(a=0),Mo(c/4294967296>>>0,i,a),Mo(c>>>0,i,a+4),i}ve.writeUint64BE=Kv;ve.writeInt64BE=Kv;function Vv(c,i,a){return i===void 0&&(i=new Uint8Array(8)),a===void 0&&(a=0),xo(c>>>0,i,a),xo(c/4294967296>>>0,i,a+4),i}ve.writeUint64LE=Vv;ve.writeInt64LE=Vv;function R5(c,i,a){if(a===void 0&&(a=0),c%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(c/8>i.length-a)throw new Error("readUintBE: array is too short for the given bitLength");for(var h=0,g=1,s=c/8+a-1;s>=a;s--)h+=i[s]*g,g*=256;return h}ve.readUintBE=R5;function P5(c,i,a){if(a===void 0&&(a=0),c%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(c/8>i.length-a)throw new Error("readUintLE: array is too short for the given bitLength");for(var h=0,g=1,s=a;s<a+c/8;s++)h+=i[s]*g,g*=256;return h}ve.readUintLE=P5;function O5(c,i,a,h){if(a===void 0&&(a=new Uint8Array(c/8)),h===void 0&&(h=0),c%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!zv.isSafeInteger(i))throw new Error("writeUintBE value must be an integer");for(var g=1,s=c/8+h-1;s>=h;s--)a[s]=i/g&255,g*=256;return a}ve.writeUintBE=O5;function C5(c,i,a,h){if(a===void 0&&(a=new Uint8Array(c/8)),h===void 0&&(h=0),c%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!zv.isSafeInteger(i))throw new Error("writeUintLE value must be an integer");for(var g=1,s=h;s<h+c/8;s++)a[s]=i/g&255,g*=256;return a}ve.writeUintLE=C5;function T5(c,i){i===void 0&&(i=0);var a=new DataView(c.buffer,c.byteOffset,c.byteLength);return a.getFloat32(i)}ve.readFloat32BE=T5;function B5(c,i){i===void 0&&(i=0);var a=new DataView(c.buffer,c.byteOffset,c.byteLength);return a.getFloat32(i,!0)}ve.readFloat32LE=B5;function N5(c,i){i===void 0&&(i=0);var a=new DataView(c.buffer,c.byteOffset,c.byteLength);return a.getFloat64(i)}ve.readFloat64BE=N5;function q5(c,i){i===void 0&&(i=0);var a=new DataView(c.buffer,c.byteOffset,c.byteLength);return a.getFloat64(i,!0)}ve.readFloat64LE=q5;function U5(c,i,a){i===void 0&&(i=new Uint8Array(4)),a===void 0&&(a=0);var h=new DataView(i.buffer,i.byteOffset,i.byteLength);return h.setFloat32(a,c),i}ve.writeFloat32BE=U5;function k5(c,i,a){i===void 0&&(i=new Uint8Array(4)),a===void 0&&(a=0);var h=new DataView(i.buffer,i.byteOffset,i.byteLength);return h.setFloat32(a,c,!0),i}ve.writeFloat32LE=k5;function L5(c,i,a){i===void 0&&(i=new Uint8Array(8)),a===void 0&&(a=0);var h=new DataView(i.buffer,i.byteOffset,i.byteLength);return h.setFloat64(a,c),i}ve.writeFloat64BE=L5;function F5(c,i,a){i===void 0&&(i=new Uint8Array(8)),a===void 0&&(a=0);var h=new DataView(i.buffer,i.byteOffset,i.byteLength);return h.setFloat64(a,c,!0),i}ve.writeFloat64LE=F5;var ii={};Object.defineProperty(ii,"__esModule",{value:!0});function $5(c){for(var i=0;i<c.length;i++)c[i]=0;return c}ii.wipe=$5;Object.defineProperty(Oo,"__esModule",{value:!0});var Cr=ve,tu=ii,z5=20;function j5(c,i,a){for(var h=1634760805,g=857760878,s=2036477234,x=1797285236,w=a[3]<<24|a[2]<<16|a[1]<<8|a[0],_=a[7]<<24|a[6]<<16|a[5]<<8|a[4],M=a[11]<<24|a[10]<<16|a[9]<<8|a[8],b=a[15]<<24|a[14]<<16|a[13]<<8|a[12],S=a[19]<<24|a[18]<<16|a[17]<<8|a[16],E=a[23]<<24|a[22]<<16|a[21]<<8|a[20],D=a[27]<<24|a[26]<<16|a[25]<<8|a[24],I=a[31]<<24|a[30]<<16|a[29]<<8|a[28],O=i[3]<<24|i[2]<<16|i[1]<<8|i[0],N=i[7]<<24|i[6]<<16|i[5]<<8|i[4],L=i[11]<<24|i[10]<<16|i[9]<<8|i[8],R=i[15]<<24|i[14]<<16|i[13]<<8|i[12],B=h,T=g,U=s,k=x,P=w,F=_,G=M,nt=b,v=S,t=E,r=D,n=I,o=O,d=N,m=L,y=R,u=0;u<z5;u+=2)B=B+P|0,o^=B,o=o>>>32-16|o<<16,v=v+o|0,P^=v,P=P>>>32-12|P<<12,T=T+F|0,d^=T,d=d>>>32-16|d<<16,t=t+d|0,F^=t,F=F>>>32-12|F<<12,U=U+G|0,m^=U,m=m>>>32-16|m<<16,r=r+m|0,G^=r,G=G>>>32-12|G<<12,k=k+nt|0,y^=k,y=y>>>32-16|y<<16,n=n+y|0,nt^=n,nt=nt>>>32-12|nt<<12,U=U+G|0,m^=U,m=m>>>32-8|m<<8,r=r+m|0,G^=r,G=G>>>32-7|G<<7,k=k+nt|0,y^=k,y=y>>>32-8|y<<8,n=n+y|0,nt^=n,nt=nt>>>32-7|nt<<7,T=T+F|0,d^=T,d=d>>>32-8|d<<8,t=t+d|0,F^=t,F=F>>>32-7|F<<7,B=B+P|0,o^=B,o=o>>>32-8|o<<8,v=v+o|0,P^=v,P=P>>>32-7|P<<7,B=B+F|0,y^=B,y=y>>>32-16|y<<16,r=r+y|0,F^=r,F=F>>>32-12|F<<12,T=T+G|0,o^=T,o=o>>>32-16|o<<16,n=n+o|0,G^=n,G=G>>>32-12|G<<12,U=U+nt|0,d^=U,d=d>>>32-16|d<<16,v=v+d|0,nt^=v,nt=nt>>>32-12|nt<<12,k=k+P|0,m^=k,m=m>>>32-16|m<<16,t=t+m|0,P^=t,P=P>>>32-12|P<<12,U=U+nt|0,d^=U,d=d>>>32-8|d<<8,v=v+d|0,nt^=v,nt=nt>>>32-7|nt<<7,k=k+P|0,m^=k,m=m>>>32-8|m<<8,t=t+m|0,P^=t,P=P>>>32-7|P<<7,T=T+G|0,o^=T,o=o>>>32-8|o<<8,n=n+o|0,G^=n,G=G>>>32-7|G<<7,B=B+F|0,y^=B,y=y>>>32-8|y<<8,r=r+y|0,F^=r,F=F>>>32-7|F<<7;Cr.writeUint32LE(B+h|0,c,0),Cr.writeUint32LE(T+g|0,c,4),Cr.writeUint32LE(U+s|0,c,8),Cr.writeUint32LE(k+x|0,c,12),Cr.writeUint32LE(P+w|0,c,16),Cr.writeUint32LE(F+_|0,c,20),Cr.writeUint32LE(G+M|0,c,24),Cr.writeUint32LE(nt+b|0,c,28),Cr.writeUint32LE(v+S|0,c,32),Cr.writeUint32LE(t+E|0,c,36),Cr.writeUint32LE(r+D|0,c,40),Cr.writeUint32LE(n+I|0,c,44),Cr.writeUint32LE(o+O|0,c,48),Cr.writeUint32LE(d+N|0,c,52),Cr.writeUint32LE(m+L|0,c,56),Cr.writeUint32LE(y+R|0,c,60)}function Gv(c,i,a,h,g){if(g===void 0&&(g=0),c.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(h.length<a.length)throw new Error("ChaCha: destination is shorter than source");var s,x;if(g===0){if(i.length!==8&&i.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),x=s.length-i.length,s.set(i,x)}else{if(i.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=i,x=g}for(var w=new Uint8Array(64),_=0;_<a.length;_+=64){j5(w,s,c);for(var M=_;M<_+64&&M<a.length;M++)h[M]=a[M]^w[M-_];K5(s,0,x)}return tu.wipe(w),g===0&&tu.wipe(s),h}Oo.streamXOR=Gv;function H5(c,i,a,h){return h===void 0&&(h=0),tu.wipe(a),Gv(c,i,a,a,h)}Oo.stream=H5;function K5(c,i,a){for(var h=1;a--;)h=h+(c[i]&255)|0,c[i]=h&255,h>>>=8,i++;if(h>0)throw new Error("ChaCha: counter overflow")}var Wv={},on={};Object.defineProperty(on,"__esModule",{value:!0});function V5(c,i,a){return~(c-1)&i|c-1&a}on.select=V5;function G5(c,i){return(c|0)-(i|0)-1>>>31&1}on.lessOrEqual=G5;function Zv(c,i){if(c.length!==i.length)return 0;for(var a=0,h=0;h<c.length;h++)a|=c[h]^i[h];return 1&a-1>>>8}on.compare=Zv;function W5(c,i){return c.length===0||i.length===0?!1:Zv(c,i)!==0}on.equal=W5;(function(c){Object.defineProperty(c,"__esModule",{value:!0});var i=on,a=ii;c.DIGEST_LENGTH=16;var h=function(){function x(w){this.digestLength=c.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var _=w[0]|w[1]<<8;this._r[0]=_&8191;var M=w[2]|w[3]<<8;this._r[1]=(_>>>13|M<<3)&8191;var b=w[4]|w[5]<<8;this._r[2]=(M>>>10|b<<6)&7939;var S=w[6]|w[7]<<8;this._r[3]=(b>>>7|S<<9)&8191;var E=w[8]|w[9]<<8;this._r[4]=(S>>>4|E<<12)&255,this._r[5]=E>>>1&8190;var D=w[10]|w[11]<<8;this._r[6]=(E>>>14|D<<2)&8191;var I=w[12]|w[13]<<8;this._r[7]=(D>>>11|I<<5)&8065;var O=w[14]|w[15]<<8;this._r[8]=(I>>>8|O<<8)&8191,this._r[9]=O>>>5&127,this._pad[0]=w[16]|w[17]<<8,this._pad[1]=w[18]|w[19]<<8,this._pad[2]=w[20]|w[21]<<8,this._pad[3]=w[22]|w[23]<<8,this._pad[4]=w[24]|w[25]<<8,this._pad[5]=w[26]|w[27]<<8,this._pad[6]=w[28]|w[29]<<8,this._pad[7]=w[30]|w[31]<<8}return x.prototype._blocks=function(w,_,M){for(var b=this._fin?0:2048,S=this._h[0],E=this._h[1],D=this._h[2],I=this._h[3],O=this._h[4],N=this._h[5],L=this._h[6],R=this._h[7],B=this._h[8],T=this._h[9],U=this._r[0],k=this._r[1],P=this._r[2],F=this._r[3],G=this._r[4],nt=this._r[5],v=this._r[6],t=this._r[7],r=this._r[8],n=this._r[9];M>=16;){var o=w[_+0]|w[_+1]<<8;S+=o&8191;var d=w[_+2]|w[_+3]<<8;E+=(o>>>13|d<<3)&8191;var m=w[_+4]|w[_+5]<<8;D+=(d>>>10|m<<6)&8191;var y=w[_+6]|w[_+7]<<8;I+=(m>>>7|y<<9)&8191;var u=w[_+8]|w[_+9]<<8;O+=(y>>>4|u<<12)&8191,N+=u>>>1&8191;var e=w[_+10]|w[_+11]<<8;L+=(u>>>14|e<<2)&8191;var l=w[_+12]|w[_+13]<<8;R+=(e>>>11|l<<5)&8191;var z=w[_+14]|w[_+15]<<8;B+=(l>>>8|z<<8)&8191,T+=z>>>5|b;var $=0,H=$;H+=S*U,H+=E*(5*n),H+=D*(5*r),H+=I*(5*t),H+=O*(5*v),$=H>>>13,H&=8191,H+=N*(5*nt),H+=L*(5*G),H+=R*(5*F),H+=B*(5*P),H+=T*(5*k),$+=H>>>13,H&=8191;var W=$;W+=S*k,W+=E*U,W+=D*(5*n),W+=I*(5*r),W+=O*(5*t),$=W>>>13,W&=8191,W+=N*(5*v),W+=L*(5*nt),W+=R*(5*G),W+=B*(5*F),W+=T*(5*P),$+=W>>>13,W&=8191;var tt=$;tt+=S*P,tt+=E*k,tt+=D*U,tt+=I*(5*n),tt+=O*(5*r),$=tt>>>13,tt&=8191,tt+=N*(5*t),tt+=L*(5*v),tt+=R*(5*nt),tt+=B*(5*G),tt+=T*(5*F),$+=tt>>>13,tt&=8191;var Z=$;Z+=S*F,Z+=E*P,Z+=D*k,Z+=I*U,Z+=O*(5*n),$=Z>>>13,Z&=8191,Z+=N*(5*r),Z+=L*(5*t),Z+=R*(5*v),Z+=B*(5*nt),Z+=T*(5*G),$+=Z>>>13,Z&=8191;var et=$;et+=S*G,et+=E*F,et+=D*P,et+=I*k,et+=O*U,$=et>>>13,et&=8191,et+=N*(5*n),et+=L*(5*r),et+=R*(5*t),et+=B*(5*v),et+=T*(5*nt),$+=et>>>13,et&=8191;var K=$;K+=S*nt,K+=E*G,K+=D*F,K+=I*P,K+=O*k,$=K>>>13,K&=8191,K+=N*U,K+=L*(5*n),K+=R*(5*r),K+=B*(5*t),K+=T*(5*v),$+=K>>>13,K&=8191;var C=$;C+=S*v,C+=E*nt,C+=D*G,C+=I*F,C+=O*P,$=C>>>13,C&=8191,C+=N*k,C+=L*U,C+=R*(5*n),C+=B*(5*r),C+=T*(5*t),$+=C>>>13,C&=8191;var Q=$;Q+=S*t,Q+=E*v,Q+=D*nt,Q+=I*G,Q+=O*F,$=Q>>>13,Q&=8191,Q+=N*P,Q+=L*k,Q+=R*U,Q+=B*(5*n),Q+=T*(5*r),$+=Q>>>13,Q&=8191;var rt=$;rt+=S*r,rt+=E*t,rt+=D*v,rt+=I*nt,rt+=O*G,$=rt>>>13,rt&=8191,rt+=N*F,rt+=L*P,rt+=R*k,rt+=B*U,rt+=T*(5*n),$+=rt>>>13,rt&=8191;var st=$;st+=S*n,st+=E*r,st+=D*t,st+=I*v,st+=O*nt,$=st>>>13,st&=8191,st+=N*G,st+=L*F,st+=R*P,st+=B*k,st+=T*U,$+=st>>>13,st&=8191,$=($<<2)+$|0,$=$+H|0,H=$&8191,$=$>>>13,W+=$,S=H,E=W,D=tt,I=Z,O=et,N=K,L=C,R=Q,B=rt,T=st,_+=16,M-=16}this._h[0]=S,this._h[1]=E,this._h[2]=D,this._h[3]=I,this._h[4]=O,this._h[5]=N,this._h[6]=L,this._h[7]=R,this._h[8]=B,this._h[9]=T},x.prototype.finish=function(w,_){_===void 0&&(_=0);var M=new Uint16Array(10),b,S,E,D;if(this._leftover){for(D=this._leftover,this._buffer[D++]=1;D<16;D++)this._buffer[D]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(b=this._h[1]>>>13,this._h[1]&=8191,D=2;D<10;D++)this._h[D]+=b,b=this._h[D]>>>13,this._h[D]&=8191;for(this._h[0]+=b*5,b=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=b,b=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=b,M[0]=this._h[0]+5,b=M[0]>>>13,M[0]&=8191,D=1;D<10;D++)M[D]=this._h[D]+b,b=M[D]>>>13,M[D]&=8191;for(M[9]-=8192,S=(b^1)-1,D=0;D<10;D++)M[D]&=S;for(S=~S,D=0;D<10;D++)this._h[D]=this._h[D]&S|M[D];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,E=this._h[0]+this._pad[0],this._h[0]=E&65535,D=1;D<8;D++)E=(this._h[D]+this._pad[D]|0)+(E>>>16)|0,this._h[D]=E&65535;return w[_+0]=this._h[0]>>>0,w[_+1]=this._h[0]>>>8,w[_+2]=this._h[1]>>>0,w[_+3]=this._h[1]>>>8,w[_+4]=this._h[2]>>>0,w[_+5]=this._h[2]>>>8,w[_+6]=this._h[3]>>>0,w[_+7]=this._h[3]>>>8,w[_+8]=this._h[4]>>>0,w[_+9]=this._h[4]>>>8,w[_+10]=this._h[5]>>>0,w[_+11]=this._h[5]>>>8,w[_+12]=this._h[6]>>>0,w[_+13]=this._h[6]>>>8,w[_+14]=this._h[7]>>>0,w[_+15]=this._h[7]>>>8,this._finished=!0,this},x.prototype.update=function(w){var _=0,M=w.length,b;if(this._leftover){b=16-this._leftover,b>M&&(b=M);for(var S=0;S<b;S++)this._buffer[this._leftover+S]=w[_+S];if(M-=b,_+=b,this._leftover+=b,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(M>=16&&(b=M-M%16,this._blocks(w,_,b),_+=b,M-=b),M){for(var S=0;S<M;S++)this._buffer[this._leftover+S]=w[_+S];this._leftover+=M}return this},x.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var w=new Uint8Array(16);return this.finish(w),w},x.prototype.clean=function(){return a.wipe(this._buffer),a.wipe(this._r),a.wipe(this._h),a.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},x}();c.Poly1305=h;function g(x,w){var _=new h(x);_.update(w);var M=_.digest();return _.clean(),M}c.oneTimeAuth=g;function s(x,w){return x.length!==c.DIGEST_LENGTH||w.length!==c.DIGEST_LENGTH?!1:i.equal(x,w)}c.equal=s})(Wv);(function(c){Object.defineProperty(c,"__esModule",{value:!0});var i=Oo,a=Wv,h=ii,g=ve,s=on;c.KEY_LENGTH=32,c.NONCE_LENGTH=12,c.TAG_LENGTH=16;var x=new Uint8Array(16),w=function(){function _(M){if(this.nonceLength=c.NONCE_LENGTH,this.tagLength=c.TAG_LENGTH,M.length!==c.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(M)}return _.prototype.seal=function(M,b,S,E){if(M.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var D=new Uint8Array(16);D.set(M,D.length-M.length);var I=new Uint8Array(32);i.stream(this._key,D,I,4);var O=b.length+this.tagLength,N;if(E){if(E.length!==O)throw new Error("ChaCha20Poly1305: incorrect destination length");N=E}else N=new Uint8Array(O);return i.streamXOR(this._key,D,b,N,4),this._authenticate(N.subarray(N.length-this.tagLength,N.length),I,N.subarray(0,N.length-this.tagLength),S),h.wipe(D),N},_.prototype.open=function(M,b,S,E){if(M.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(b.length<this.tagLength)return null;var D=new Uint8Array(16);D.set(M,D.length-M.length);var I=new Uint8Array(32);i.stream(this._key,D,I,4);var O=new Uint8Array(this.tagLength);if(this._authenticate(O,I,b.subarray(0,b.length-this.tagLength),S),!s.equal(O,b.subarray(b.length-this.tagLength,b.length)))return null;var N=b.length-this.tagLength,L;if(E){if(E.length!==N)throw new Error("ChaCha20Poly1305: incorrect destination length");L=E}else L=new Uint8Array(N);return i.streamXOR(this._key,D,b.subarray(0,b.length-this.tagLength),L,4),h.wipe(D),L},_.prototype.clean=function(){return h.wipe(this._key),this},_.prototype._authenticate=function(M,b,S,E){var D=new a.Poly1305(b);E&&(D.update(E),E.length%16>0&&D.update(x.subarray(E.length%16))),D.update(S),S.length%16>0&&D.update(x.subarray(S.length%16));var I=new Uint8Array(8);E&&g.writeUint64LE(E.length,I),D.update(I),g.writeUint64LE(S.length,I),D.update(I);for(var O=D.digest(),N=0;N<O.length;N++)M[N]=O[N];D.clean(),h.wipe(O),h.wipe(I)},_}();c.ChaCha20Poly1305=w})(Au);var Jv={},Hs={},Du={};Object.defineProperty(Du,"__esModule",{value:!0});function Z5(c){return typeof c.saveState<"u"&&typeof c.restoreState<"u"&&typeof c.cleanSavedState<"u"}Du.isSerializableHash=Z5;Object.defineProperty(Hs,"__esModule",{value:!0});var Oi=Du,J5=on,Y5=ii,Yv=function(){function c(i,a){this._finished=!1,this._inner=new i,this._outer=new i,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var h=new Uint8Array(this.blockSize);a.length>this.blockSize?this._inner.update(a).finish(h).clean():h.set(a);for(var g=0;g<h.length;g++)h[g]^=54;this._inner.update(h);for(var g=0;g<h.length;g++)h[g]^=106;this._outer.update(h),Oi.isSerializableHash(this._inner)&&Oi.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Y5.wipe(h)}return c.prototype.reset=function(){if(!Oi.isSerializableHash(this._inner)||!Oi.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},c.prototype.clean=function(){Oi.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Oi.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},c.prototype.update=function(i){return this._inner.update(i),this},c.prototype.finish=function(i){return this._finished?(this._outer.finish(i),this):(this._inner.finish(i),this._outer.update(i.subarray(0,this.digestLength)).finish(i),this._finished=!0,this)},c.prototype.digest=function(){var i=new Uint8Array(this.digestLength);return this.finish(i),i},c.prototype.saveState=function(){if(!Oi.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},c.prototype.restoreState=function(i){if(!Oi.isSerializableHash(this._inner)||!Oi.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(i),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},c.prototype.cleanSavedState=function(i){if(!Oi.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(i)},c}();Hs.HMAC=Yv;function X5(c,i,a){var h=new Yv(c,i);h.update(a);var g=h.digest();return h.clean(),g}Hs.hmac=X5;Hs.equal=J5.equal;Object.defineProperty(Jv,"__esModule",{value:!0});var od=Hs,fd=ii,Q5=function(){function c(i,a,h,g){h===void 0&&(h=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=i,this._info=g;var s=od.hmac(this._hash,h,a);this._hmac=new od.HMAC(i,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return c.prototype._fillBuffer=function(){this._counter[0]++;var i=this._counter[0];if(i===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),i>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},c.prototype.expand=function(i){for(var a=new Uint8Array(i),h=0;h<a.length;h++)this._bufpos===this._buffer.length&&this._fillBuffer(),a[h]=this._buffer[this._bufpos++];return a},c.prototype.clean=function(){this._hmac.clean(),fd.wipe(this._buffer),fd.wipe(this._counter),this._bufpos=0},c}(),t4=Jv.HKDF=Q5,ss={},Co={},To={};Object.defineProperty(To,"__esModule",{value:!0});To.BrowserRandomSource=void 0;const hd=65536;class e4{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const i=typeof self<"u"?self.crypto||self.msCrypto:null;i&&i.getRandomValues!==void 0&&(this._crypto=i,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(i){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const a=new Uint8Array(i);for(let h=0;h<a.length;h+=hd)this._crypto.getRandomValues(a.subarray(h,h+Math.min(a.length-h,hd)));return a}}To.BrowserRandomSource=e4;function r4(c){throw new Error('Could not dynamically require "'+c+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Bo={},be={},eo={exports:{}},ud;function as(){if(ud)return eo.exports;ud=1;var c=65536,i=4294967295;function a(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var h=Te.Buffer,g=Ee.crypto||Ee.msCrypto;g&&g.getRandomValues?eo.exports=s:eo.exports=a;function s(x,w){if(x>i)throw new RangeError("requested too many random bytes");var _=h.allocUnsafe(x);if(x>0)if(x>c)for(var M=0;M<x;M+=c)g.getRandomValues(_.slice(M,M+c));else g.getRandomValues(_);return typeof w=="function"?ei.nextTick(function(){w(null,_)}):_}return eo.exports}var eh,cd;function Xv(){if(cd)return eh;cd=1;var c=Te.Buffer,i=Nv.Transform,a=sr;function h(s,x){if(!c.isBuffer(s)&&typeof s!="string")throw new TypeError(x+" must be a string or a buffer")}function g(s){i.call(this),this._block=c.allocUnsafe(s),this._blockSize=s,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return a(g,i),g.prototype._transform=function(s,x,w){var _=null;try{this.update(s,x)}catch(M){_=M}w(_)},g.prototype._flush=function(s){var x=null;try{this.push(this.digest())}catch(w){x=w}s(x)},g.prototype.update=function(s,x){if(h(s,"Data"),this._finalized)throw new Error("Digest already called");c.isBuffer(s)||(s=c.from(s,x));for(var w=this._block,_=0;this._blockOffset+s.length-_>=this._blockSize;){for(var M=this._blockOffset;M<this._blockSize;)w[M++]=s[_++];this._update(),this._blockOffset=0}for(;_<s.length;)w[this._blockOffset++]=s[_++];for(var b=0,S=s.length*8;S>0;++b)this._length[b]+=S,S=this._length[b]/4294967296|0,S>0&&(this._length[b]-=4294967296*S);return this},g.prototype._update=function(){throw new Error("_update is not implemented")},g.prototype.digest=function(s){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var x=this._digest();s!==void 0&&(x=x.toString(s)),this._block.fill(0),this._blockOffset=0;for(var w=0;w<4;++w)this._length[w]=0;return x},g.prototype._digest=function(){throw new Error("_digest is not implemented")},eh=g,eh}var rh,ld;function Iu(){if(ld)return rh;ld=1;var c=sr,i=Xv(),a=Te.Buffer,h=new Array(16);function g(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}c(g,i),g.prototype._update=function(){for(var b=h,S=0;S<16;++S)b[S]=this._block.readInt32LE(S*4);var E=this._a,D=this._b,I=this._c,O=this._d;E=x(E,D,I,O,b[0],3614090360,7),O=x(O,E,D,I,b[1],3905402710,12),I=x(I,O,E,D,b[2],606105819,17),D=x(D,I,O,E,b[3],3250441966,22),E=x(E,D,I,O,b[4],4118548399,7),O=x(O,E,D,I,b[5],1200080426,12),I=x(I,O,E,D,b[6],2821735955,17),D=x(D,I,O,E,b[7],4249261313,22),E=x(E,D,I,O,b[8],1770035416,7),O=x(O,E,D,I,b[9],2336552879,12),I=x(I,O,E,D,b[10],4294925233,17),D=x(D,I,O,E,b[11],2304563134,22),E=x(E,D,I,O,b[12],1804603682,7),O=x(O,E,D,I,b[13],4254626195,12),I=x(I,O,E,D,b[14],2792965006,17),D=x(D,I,O,E,b[15],1236535329,22),E=w(E,D,I,O,b[1],4129170786,5),O=w(O,E,D,I,b[6],3225465664,9),I=w(I,O,E,D,b[11],643717713,14),D=w(D,I,O,E,b[0],3921069994,20),E=w(E,D,I,O,b[5],3593408605,5),O=w(O,E,D,I,b[10],38016083,9),I=w(I,O,E,D,b[15],3634488961,14),D=w(D,I,O,E,b[4],3889429448,20),E=w(E,D,I,O,b[9],568446438,5),O=w(O,E,D,I,b[14],3275163606,9),I=w(I,O,E,D,b[3],4107603335,14),D=w(D,I,O,E,b[8],1163531501,20),E=w(E,D,I,O,b[13],2850285829,5),O=w(O,E,D,I,b[2],4243563512,9),I=w(I,O,E,D,b[7],1735328473,14),D=w(D,I,O,E,b[12],2368359562,20),E=_(E,D,I,O,b[5],4294588738,4),O=_(O,E,D,I,b[8],2272392833,11),I=_(I,O,E,D,b[11],1839030562,16),D=_(D,I,O,E,b[14],4259657740,23),E=_(E,D,I,O,b[1],2763975236,4),O=_(O,E,D,I,b[4],1272893353,11),I=_(I,O,E,D,b[7],4139469664,16),D=_(D,I,O,E,b[10],3200236656,23),E=_(E,D,I,O,b[13],681279174,4),O=_(O,E,D,I,b[0],3936430074,11),I=_(I,O,E,D,b[3],3572445317,16),D=_(D,I,O,E,b[6],76029189,23),E=_(E,D,I,O,b[9],3654602809,4),O=_(O,E,D,I,b[12],3873151461,11),I=_(I,O,E,D,b[15],530742520,16),D=_(D,I,O,E,b[2],3299628645,23),E=M(E,D,I,O,b[0],4096336452,6),O=M(O,E,D,I,b[7],1126891415,10),I=M(I,O,E,D,b[14],2878612391,15),D=M(D,I,O,E,b[5],4237533241,21),E=M(E,D,I,O,b[12],1700485571,6),O=M(O,E,D,I,b[3],2399980690,10),I=M(I,O,E,D,b[10],4293915773,15),D=M(D,I,O,E,b[1],2240044497,21),E=M(E,D,I,O,b[8],1873313359,6),O=M(O,E,D,I,b[15],4264355552,10),I=M(I,O,E,D,b[6],2734768916,15),D=M(D,I,O,E,b[13],1309151649,21),E=M(E,D,I,O,b[4],4149444226,6),O=M(O,E,D,I,b[11],3174756917,10),I=M(I,O,E,D,b[2],718787259,15),D=M(D,I,O,E,b[9],3951481745,21),this._a=this._a+E|0,this._b=this._b+D|0,this._c=this._c+I|0,this._d=this._d+O|0},g.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var b=a.allocUnsafe(16);return b.writeInt32LE(this._a,0),b.writeInt32LE(this._b,4),b.writeInt32LE(this._c,8),b.writeInt32LE(this._d,12),b};function s(b,S){return b<<S|b>>>32-S}function x(b,S,E,D,I,O,N){return s(b+(S&E|~S&D)+I+O|0,N)+S|0}function w(b,S,E,D,I,O,N){return s(b+(S&D|E&~D)+I+O|0,N)+S|0}function _(b,S,E,D,I,O,N){return s(b+(S^E^D)+I+O|0,N)+S|0}function M(b,S,E,D,I,O,N){return s(b+(E^(S|~D))+I+O|0,N)+S|0}return rh=g,rh}var ih,dd;function Ru(){if(dd)return ih;dd=1;var c=qv.Buffer,i=sr,a=Xv(),h=new Array(16),g=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],s=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],x=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],w=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],_=[0,1518500249,1859775393,2400959708,2840853838],M=[1352829926,1548603684,1836072691,2053994217,0];function b(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}i(b,a),b.prototype._update=function(){for(var L=h,R=0;R<16;++R)L[R]=this._block.readInt32LE(R*4);for(var B=this._a|0,T=this._b|0,U=this._c|0,k=this._d|0,P=this._e|0,F=this._a|0,G=this._b|0,nt=this._c|0,v=this._d|0,t=this._e|0,r=0;r<80;r+=1){var n,o;r<16?(n=E(B,T,U,k,P,L[g[r]],_[0],x[r]),o=N(F,G,nt,v,t,L[s[r]],M[0],w[r])):r<32?(n=D(B,T,U,k,P,L[g[r]],_[1],x[r]),o=O(F,G,nt,v,t,L[s[r]],M[1],w[r])):r<48?(n=I(B,T,U,k,P,L[g[r]],_[2],x[r]),o=I(F,G,nt,v,t,L[s[r]],M[2],w[r])):r<64?(n=O(B,T,U,k,P,L[g[r]],_[3],x[r]),o=D(F,G,nt,v,t,L[s[r]],M[3],w[r])):(n=N(B,T,U,k,P,L[g[r]],_[4],x[r]),o=E(F,G,nt,v,t,L[s[r]],M[4],w[r])),B=P,P=k,k=S(U,10),U=T,T=n,F=t,t=v,v=S(nt,10),nt=G,G=o}var d=this._b+U+v|0;this._b=this._c+k+t|0,this._c=this._d+P+F|0,this._d=this._e+B+G|0,this._e=this._a+T+nt|0,this._a=d},b.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var L=c.alloc?c.alloc(20):new c(20);return L.writeInt32LE(this._a,0),L.writeInt32LE(this._b,4),L.writeInt32LE(this._c,8),L.writeInt32LE(this._d,12),L.writeInt32LE(this._e,16),L};function S(L,R){return L<<R|L>>>32-R}function E(L,R,B,T,U,k,P,F){return S(L+(R^B^T)+k+P|0,F)+U|0}function D(L,R,B,T,U,k,P,F){return S(L+(R&B|~R&T)+k+P|0,F)+U|0}function I(L,R,B,T,U,k,P,F){return S(L+((R|~B)^T)+k+P|0,F)+U|0}function O(L,R,B,T,U,k,P,F){return S(L+(R&T|B&~T)+k+P|0,F)+U|0}function N(L,R,B,T,U,k,P,F){return S(L+(R^(B|~T))+k+P|0,F)+U|0}return ih=b,ih}var nh,pd;function i4(){if(pd)return nh;pd=1,nh=a;var c=ri.EventEmitter,i=sr;i(a,c),a.Readable=i5(),a.Writable=n5(),a.Duplex=s5(),a.Transform=a5,a.PassThrough=o5,a.finished=f5,a.pipeline=h5,a.Stream=a;function a(){c.call(this)}return a.prototype.pipe=function(h,g){var s=this;function x(D){h.writable&&h.write(D)===!1&&s.pause&&s.pause()}s.on("data",x);function w(){s.readable&&s.resume&&s.resume()}h.on("drain",w),!h._isStdio&&(!g||g.end!==!1)&&(s.on("end",M),s.on("close",b));var _=!1;function M(){_||(_=!0,h.end())}function b(){_||(_=!0,typeof h.destroy=="function"&&h.destroy())}function S(D){if(E(),c.listenerCount(this,"error")===0)throw D}s.on("error",S),h.on("error",S);function E(){s.removeListener("data",x),h.removeListener("drain",w),s.removeListener("end",M),s.removeListener("close",b),s.removeListener("error",S),h.removeListener("error",S),s.removeListener("end",E),s.removeListener("close",E),h.removeListener("close",E)}return s.on("end",E),s.on("close",E),h.on("close",E),h.emit("pipe",s),h},nh}var sh,vd;function fn(){if(vd)return sh;vd=1;var c=Te.Buffer,i=i4().Transform,a=u5().StringDecoder,h=sr;function g(s){i.call(this),this.hashMode=typeof s=="string",this.hashMode?this[s]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}return h(g,i),g.prototype.update=function(s,x,w){typeof s=="string"&&(s=c.from(s,x));var _=this._update(s);return this.hashMode?this:(w&&(_=this._toString(_,w)),_)},g.prototype.setAutoPadding=function(){},g.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},g.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},g.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},g.prototype._transform=function(s,x,w){var _;try{this.hashMode?this._update(s):this.push(this._update(s))}catch(M){_=M}finally{w(_)}},g.prototype._flush=function(s){var x;try{this.push(this.__final())}catch(w){x=w}s(x)},g.prototype._finalOrDigest=function(s){var x=this.__final()||c.alloc(0);return s&&(x=this._toString(x,s,!0)),x},g.prototype._toString=function(s,x,w){if(this._decoder||(this._decoder=new a(x),this._encoding=x),this._encoding!==x)throw new Error("can't switch encodings");var _=this._decoder.write(s);return w&&(_+=this._decoder.end()),_},sh=g,sh}var ah,gd;function Ks(){if(gd)return ah;gd=1;var c=sr,i=Iu(),a=Ru(),h=mu,g=fn();function s(x){g.call(this,"digest"),this._hash=x}return c(s,g),s.prototype._update=function(x){this._hash.update(x)},s.prototype._final=function(){return this._hash.digest()},ah=function(w){return w=w.toLowerCase(),w==="md5"?new i:w==="rmd160"||w==="ripemd160"?new a:new s(h(w))},ah}var oh,md;function n4(){if(md)return oh;md=1;var c=sr,i=Te.Buffer,a=fn(),h=i.alloc(128),g=64;function s(x,w){a.call(this,"digest"),typeof w=="string"&&(w=i.from(w)),this._alg=x,this._key=w,w.length>g?w=x(w):w.length<g&&(w=i.concat([w,h],g));for(var _=this._ipad=i.allocUnsafe(g),M=this._opad=i.allocUnsafe(g),b=0;b<g;b++)_[b]=w[b]^54,M[b]=w[b]^92;this._hash=[_]}return c(s,a),s.prototype._update=function(x){this._hash.push(x)},s.prototype._final=function(){var x=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,x]))},oh=s,oh}var fh,bd;function Qv(){if(bd)return fh;bd=1;var c=Iu();return fh=function(i){return new c().update(i).digest()},fh}var hh,yd;function tg(){if(yd)return hh;yd=1;var c=sr,i=n4(),a=fn(),h=Te.Buffer,g=Qv(),s=Ru(),x=mu,w=h.alloc(128);function _(M,b){a.call(this,"digest"),typeof b=="string"&&(b=h.from(b));var S=M==="sha512"||M==="sha384"?128:64;if(this._alg=M,this._key=b,b.length>S){var E=M==="rmd160"?new s:x(M);b=E.update(b).digest()}else b.length<S&&(b=h.concat([b,w],S));for(var D=this._ipad=h.allocUnsafe(S),I=this._opad=h.allocUnsafe(S),O=0;O<S;O++)D[O]=b[O]^54,I[O]=b[O]^92;this._hash=M==="rmd160"?new s:x(M),this._hash.update(D)}return c(_,a),_.prototype._update=function(M){this._hash.update(M)},_.prototype._final=function(){var M=this._hash.digest(),b=this._alg==="rmd160"?new s:x(this._alg);return b.update(this._opad).update(M).digest()},hh=function(b,S){return b=b.toLowerCase(),b==="rmd160"||b==="ripemd160"?new _("rmd160",S):b==="md5"?new i(g,S):new _(b,S)},hh}const s4={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},a4={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},o4={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},f4={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},h4={sign:"ecdsa",hash:"sha256",id:""},u4={sign:"ecdsa",hash:"sha224",id:""},c4={sign:"ecdsa",hash:"sha384",id:""},l4={sign:"ecdsa",hash:"sha512",id:""},d4={sign:"dsa",hash:"sha1",id:""},p4={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},v4={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},eg={sha224WithRSAEncryption:s4,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:a4,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:o4,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:f4,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:h4,sha224:u4,sha384:c4,sha512:l4,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:d4,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:p4,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:v4,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var uh,wd;function g4(){return wd||(wd=1,uh=eg),uh}var ro={},ch,_d;function rg(){if(_d)return ch;_d=1;var c=Math.pow(2,30)-1;return ch=function(i,a){if(typeof i!="number")throw new TypeError("Iterations not a number");if(i<0)throw new TypeError("Bad iterations");if(typeof a!="number")throw new TypeError("Key length not a number");if(a<0||a>c||a!==a)throw new TypeError("Bad key length")},ch}var lh,Md;function ig(){if(Md)return lh;Md=1;var c;if(Ee.process&&Ee.process.browser)c="utf-8";else if(Ee.process&&Ee.process.version){var i=parseInt(ei.version.split(".")[0].slice(1),10);c=i>=6?"utf-8":"binary"}else c="utf-8";return lh=c,lh}var dh,xd;function ng(){if(xd)return dh;xd=1;var c=Te.Buffer;return dh=function(i,a,h){if(c.isBuffer(i))return i;if(typeof i=="string")return c.from(i,a);if(ArrayBuffer.isView(i))return c.from(i.buffer);throw new TypeError(h+" must be a string, a Buffer, a typed array or a DataView")},dh}var ph,Ed;function sg(){if(Ed)return ph;Ed=1;var c=Qv(),i=Ru(),a=mu,h=Te.Buffer,g=rg(),s=ig(),x=ng(),w=h.alloc(128),_={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function M(E,D,I){var O=b(E),N=E==="sha512"||E==="sha384"?128:64;D.length>N?D=O(D):D.length<N&&(D=h.concat([D,w],N));for(var L=h.allocUnsafe(N+_[E]),R=h.allocUnsafe(N+_[E]),B=0;B<N;B++)L[B]=D[B]^54,R[B]=D[B]^92;var T=h.allocUnsafe(N+I+4);L.copy(T,0,0,N),this.ipad1=T,this.ipad2=L,this.opad=R,this.alg=E,this.blocksize=N,this.hash=O,this.size=_[E]}M.prototype.run=function(E,D){E.copy(D,this.blocksize);var I=this.hash(D);return I.copy(this.opad,this.blocksize),this.hash(this.opad)};function b(E){function D(O){return a(E).update(O).digest()}function I(O){return new i().update(O).digest()}return E==="rmd160"||E==="ripemd160"?I:E==="md5"?c:D}function S(E,D,I,O,N){g(I,O),E=x(E,s,"Password"),D=x(D,s,"Salt"),N=N||"sha1";var L=new M(N,E,D.length),R=h.allocUnsafe(O),B=h.allocUnsafe(D.length+4);D.copy(B,0,0,D.length);for(var T=0,U=_[N],k=Math.ceil(O/U),P=1;P<=k;P++){B.writeUInt32BE(P,D.length);for(var F=L.run(B,L.ipad1),G=F,nt=1;nt<I;nt++){G=L.run(G,L.ipad2);for(var v=0;v<U;v++)F[v]^=G[v]}F.copy(R,T),T+=U}return R}return ph=S,ph}var vh,Sd;function m4(){if(Sd)return vh;Sd=1;var c=Te.Buffer,i=rg(),a=ig(),h=sg(),g=ng(),s,x=Ee.crypto&&Ee.crypto.subtle,w={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},_=[];function M(I){if(Ee.process&&!Ee.process.browser||!x||!x.importKey||!x.deriveBits)return Promise.resolve(!1);if(_[I]!==void 0)return _[I];s=s||c.alloc(8);var O=E(s,s,10,128,I).then(function(){return!0}).catch(function(){return!1});return _[I]=O,O}var b;function S(){return b||(Ee.process&&Ee.process.nextTick?b=Ee.process.nextTick:Ee.queueMicrotask?b=Ee.queueMicrotask:Ee.setImmediate?b=Ee.setImmediate:b=Ee.setTimeout,b)}function E(I,O,N,L,R){return x.importKey("raw",I,{name:"PBKDF2"},!1,["deriveBits"]).then(function(B){return x.deriveBits({name:"PBKDF2",salt:O,iterations:N,hash:{name:R}},B,L<<3)}).then(function(B){return c.from(B)})}function D(I,O){I.then(function(N){S()(function(){O(null,N)})},function(N){S()(function(){O(N)})})}return vh=function(I,O,N,L,R,B){typeof R=="function"&&(B=R,R=void 0),R=R||"sha1";var T=w[R.toLowerCase()];if(!T||typeof Ee.Promise!="function"){S()(function(){var U;try{U=h(I,O,N,L,R)}catch(k){return B(k)}B(null,U)});return}if(i(N,L),I=g(I,a,"Password"),O=g(O,a,"Salt"),typeof B!="function")throw new Error("No callback provided to pbkdf2");D(M(T).then(function(U){return U?E(I,O,N,L,T):h(I,O,N,L,R)}),B)},vh}var Ad;function ag(){return Ad||(Ad=1,ro.pbkdf2=m4(),ro.pbkdf2Sync=sg()),ro}var li={},En={},ti={},Dd;function og(){if(Dd)return ti;Dd=1,ti.readUInt32BE=function(g,s){var x=g[0+s]<<24|g[1+s]<<16|g[2+s]<<8|g[3+s];return x>>>0},ti.writeUInt32BE=function(g,s,x){g[0+x]=s>>>24,g[1+x]=s>>>16&255,g[2+x]=s>>>8&255,g[3+x]=s&255},ti.ip=function(g,s,x,w){for(var _=0,M=0,b=6;b>=0;b-=2){for(var S=0;S<=24;S+=8)_<<=1,_|=s>>>S+b&1;for(var S=0;S<=24;S+=8)_<<=1,_|=g>>>S+b&1}for(var b=6;b>=0;b-=2){for(var S=1;S<=25;S+=8)M<<=1,M|=s>>>S+b&1;for(var S=1;S<=25;S+=8)M<<=1,M|=g>>>S+b&1}x[w+0]=_>>>0,x[w+1]=M>>>0},ti.rip=function(g,s,x,w){for(var _=0,M=0,b=0;b<4;b++)for(var S=24;S>=0;S-=8)_<<=1,_|=s>>>S+b&1,_<<=1,_|=g>>>S+b&1;for(var b=4;b<8;b++)for(var S=24;S>=0;S-=8)M<<=1,M|=s>>>S+b&1,M<<=1,M|=g>>>S+b&1;x[w+0]=_>>>0,x[w+1]=M>>>0},ti.pc1=function(g,s,x,w){for(var _=0,M=0,b=7;b>=5;b--){for(var S=0;S<=24;S+=8)_<<=1,_|=s>>S+b&1;for(var S=0;S<=24;S+=8)_<<=1,_|=g>>S+b&1}for(var S=0;S<=24;S+=8)_<<=1,_|=s>>S+b&1;for(var b=1;b<=3;b++){for(var S=0;S<=24;S+=8)M<<=1,M|=s>>S+b&1;for(var S=0;S<=24;S+=8)M<<=1,M|=g>>S+b&1}for(var S=0;S<=24;S+=8)M<<=1,M|=g>>S+b&1;x[w+0]=_>>>0,x[w+1]=M>>>0},ti.r28shl=function(g,s){return g<<s&268435455|g>>>28-s};var c=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];ti.pc2=function(g,s,x,w){for(var _=0,M=0,b=c.length>>>1,S=0;S<b;S++)_<<=1,_|=g>>>c[S]&1;for(var S=b;S<c.length;S++)M<<=1,M|=s>>>c[S]&1;x[w+0]=_>>>0,x[w+1]=M>>>0},ti.expand=function(g,s,x){var w=0,_=0;w=(g&1)<<5|g>>>27;for(var M=23;M>=15;M-=4)w<<=6,w|=g>>>M&63;for(var M=11;M>=3;M-=4)_|=g>>>M&63,_<<=6;_|=(g&31)<<1|g>>>31,s[x+0]=w>>>0,s[x+1]=_>>>0};var i=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];ti.substitute=function(g,s){for(var x=0,w=0;w<4;w++){var _=g>>>18-w*6&63,M=i[w*64+_];x<<=4,x|=M}for(var w=0;w<4;w++){var _=s>>>18-w*6&63,M=i[4*64+w*64+_];x<<=4,x|=M}return x>>>0};var a=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return ti.permute=function(g){for(var s=0,x=0;x<a.length;x++)s<<=1,s|=g>>>a[x]&1;return s>>>0},ti.padSplit=function(g,s,x){for(var w=g.toString(2);w.length<s;)w="0"+w;for(var _=[],M=0;M<s;M+=x)_.push(w.slice(M,M+x));return _.join(" ")},ti}var gh,Id;function Pu(){if(Id)return gh;Id=1;var c=Cn;function i(a){this.options=a,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=a.padding!==!1}return gh=i,i.prototype._init=function(){},i.prototype.update=function(h){return h.length===0?[]:this.type==="decrypt"?this._updateDecrypt(h):this._updateEncrypt(h)},i.prototype._buffer=function(h,g){for(var s=Math.min(this.buffer.length-this.bufferOff,h.length-g),x=0;x<s;x++)this.buffer[this.bufferOff+x]=h[g+x];return this.bufferOff+=s,s},i.prototype._flushBuffer=function(h,g){return this._update(this.buffer,0,h,g),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(h){var g=0,s=0,x=(this.bufferOff+h.length)/this.blockSize|0,w=new Array(x*this.blockSize);this.bufferOff!==0&&(g+=this._buffer(h,g),this.bufferOff===this.buffer.length&&(s+=this._flushBuffer(w,s)));for(var _=h.length-(h.length-g)%this.blockSize;g<_;g+=this.blockSize)this._update(h,g,w,s),s+=this.blockSize;for(;g<h.length;g++,this.bufferOff++)this.buffer[this.bufferOff]=h[g];return w},i.prototype._updateDecrypt=function(h){for(var g=0,s=0,x=Math.ceil((this.bufferOff+h.length)/this.blockSize)-1,w=new Array(x*this.blockSize);x>0;x--)g+=this._buffer(h,g),s+=this._flushBuffer(w,s);return g+=this._buffer(h,g),w},i.prototype.final=function(h){var g;h&&(g=this.update(h));var s;return this.type==="encrypt"?s=this._finalEncrypt():s=this._finalDecrypt(),g?g.concat(s):s},i.prototype._pad=function(h,g){if(g===0)return!1;for(;g<h.length;)h[g++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var h=new Array(this.blockSize);return this._update(this.buffer,0,h,0),h},i.prototype._unpad=function(h){return h},i.prototype._finalDecrypt=function(){c.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var h=new Array(this.blockSize);return this._flushBuffer(h,0),this._unpad(h)},gh}var mh,Rd;function fg(){if(Rd)return mh;Rd=1;var c=Cn,i=sr,a=og(),h=Pu();function g(){this.tmp=new Array(2),this.keys=null}function s(w){h.call(this,w);var _=new g;this._desState=_,this.deriveKeys(_,w.key)}i(s,h),mh=s,s.create=function(_){return new s(_)};var x=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return s.prototype.deriveKeys=function(_,M){_.keys=new Array(16*2),c.equal(M.length,this.blockSize,"Invalid key length");var b=a.readUInt32BE(M,0),S=a.readUInt32BE(M,4);a.pc1(b,S,_.tmp,0),b=_.tmp[0],S=_.tmp[1];for(var E=0;E<_.keys.length;E+=2){var D=x[E>>>1];b=a.r28shl(b,D),S=a.r28shl(S,D),a.pc2(b,S,_.keys,E)}},s.prototype._update=function(_,M,b,S){var E=this._desState,D=a.readUInt32BE(_,M),I=a.readUInt32BE(_,M+4);a.ip(D,I,E.tmp,0),D=E.tmp[0],I=E.tmp[1],this.type==="encrypt"?this._encrypt(E,D,I,E.tmp,0):this._decrypt(E,D,I,E.tmp,0),D=E.tmp[0],I=E.tmp[1],a.writeUInt32BE(b,D,S),a.writeUInt32BE(b,I,S+4)},s.prototype._pad=function(_,M){if(this.padding===!1)return!1;for(var b=_.length-M,S=M;S<_.length;S++)_[S]=b;return!0},s.prototype._unpad=function(_){if(this.padding===!1)return _;for(var M=_[_.length-1],b=_.length-M;b<_.length;b++)c.equal(_[b],M);return _.slice(0,_.length-M)},s.prototype._encrypt=function(_,M,b,S,E){for(var D=M,I=b,O=0;O<_.keys.length;O+=2){var N=_.keys[O],L=_.keys[O+1];a.expand(I,_.tmp,0),N^=_.tmp[0],L^=_.tmp[1];var R=a.substitute(N,L),B=a.permute(R),T=I;I=(D^B)>>>0,D=T}a.rip(I,D,S,E)},s.prototype._decrypt=function(_,M,b,S,E){for(var D=b,I=M,O=_.keys.length-2;O>=0;O-=2){var N=_.keys[O],L=_.keys[O+1];a.expand(D,_.tmp,0),N^=_.tmp[0],L^=_.tmp[1];var R=a.substitute(N,L),B=a.permute(R),T=D;D=(I^B)>>>0,I=T}a.rip(D,I,S,E)},mh}var bh={},Pd;function b4(){if(Pd)return bh;Pd=1;var c=Cn,i=sr,a={};function h(s){c.equal(s.length,8,"Invalid IV length"),this.iv=new Array(8);for(var x=0;x<this.iv.length;x++)this.iv[x]=s[x]}function g(s){function x(b){s.call(this,b),this._cbcInit()}i(x,s);for(var w=Object.keys(a),_=0;_<w.length;_++){var M=w[_];x.prototype[M]=a[M]}return x.create=function(S){return new x(S)},x}return bh.instantiate=g,a._cbcInit=function(){var x=new h(this.options.iv);this._cbcState=x},a._update=function(x,w,_,M){var b=this._cbcState,S=this.constructor.super_.prototype,E=b.iv;if(this.type==="encrypt"){for(var D=0;D<this.blockSize;D++)E[D]^=x[w+D];S._update.call(this,E,0,_,M);for(var D=0;D<this.blockSize;D++)E[D]=_[M+D]}else{S._update.call(this,x,w,_,M);for(var D=0;D<this.blockSize;D++)_[M+D]^=E[D];for(var D=0;D<this.blockSize;D++)E[D]=x[w+D]}},bh}var yh,Od;function y4(){if(Od)return yh;Od=1;var c=Cn,i=sr,a=Pu(),h=fg();function g(x,w){c.equal(w.length,24,"Invalid key length");var _=w.slice(0,8),M=w.slice(8,16),b=w.slice(16,24);x==="encrypt"?this.ciphers=[h.create({type:"encrypt",key:_}),h.create({type:"decrypt",key:M}),h.create({type:"encrypt",key:b})]:this.ciphers=[h.create({type:"decrypt",key:b}),h.create({type:"encrypt",key:M}),h.create({type:"decrypt",key:_})]}function s(x){a.call(this,x);var w=new g(this.type,this.options.key);this._edeState=w}return i(s,a),yh=s,s.create=function(w){return new s(w)},s.prototype._update=function(w,_,M,b){var S=this._edeState;S.ciphers[0]._update(w,_,M,b),S.ciphers[1]._update(M,b,M,b),S.ciphers[2]._update(M,b,M,b)},s.prototype._pad=h.prototype._pad,s.prototype._unpad=h.prototype._unpad,yh}var Cd;function w4(){return Cd||(Cd=1,En.utils=og(),En.Cipher=Pu(),En.DES=fg(),En.CBC=b4(),En.EDE=y4()),En}var wh,Td;function _4(){if(Td)return wh;Td=1;var c=fn(),i=w4(),a=sr,h=Te.Buffer,g={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};g.des=g["des-cbc"],g.des3=g["des-ede3-cbc"],wh=s,a(s,c);function s(x){c.call(this);var w=x.mode.toLowerCase(),_=g[w],M;x.decrypt?M="decrypt":M="encrypt";var b=x.key;h.isBuffer(b)||(b=h.from(b)),(w==="des-ede"||w==="des-ede-cbc")&&(b=h.concat([b,b.slice(0,8)]));var S=x.iv;h.isBuffer(S)||(S=h.from(S)),this._des=_.create({key:b,iv:S,type:M})}return s.prototype._update=function(x){return h.from(this._des.update(x))},s.prototype._final=function(){return h.from(this._des.final())},wh}var di={},io={},no={},Bd;function M4(){return Bd||(Bd=1,no.encrypt=function(c,i){return c._cipher.encryptBlock(i)},no.decrypt=function(c,i){return c._cipher.decryptBlock(i)}),no}var so={},_h,Nd;function Vs(){return Nd||(Nd=1,_h=function(i,a){for(var h=Math.min(i.length,a.length),g=new ke(h),s=0;s<h;++s)g[s]=i[s]^a[s];return g}),_h}var qd;function x4(){if(qd)return so;qd=1;var c=Vs();return so.encrypt=function(i,a){var h=c(a,i._prev);return i._prev=i._cipher.encryptBlock(h),i._prev},so.decrypt=function(i,a){var h=i._prev;i._prev=a;var g=i._cipher.decryptBlock(a);return c(g,h)},so}var Mh={},Ud;function E4(){if(Ud)return Mh;Ud=1;var c=Te.Buffer,i=Vs();function a(h,g,s){var x=g.length,w=i(g,h._cache);return h._cache=h._cache.slice(x),h._prev=c.concat([h._prev,s?g:w]),w}return Mh.encrypt=function(h,g,s){for(var x=c.allocUnsafe(0),w;g.length;)if(h._cache.length===0&&(h._cache=h._cipher.encryptBlock(h._prev),h._prev=c.allocUnsafe(0)),h._cache.length<=g.length)w=h._cache.length,x=c.concat([x,a(h,g.slice(0,w),s)]),g=g.slice(w);else{x=c.concat([x,a(h,g,s)]);break}return x},Mh}var xh={},kd;function S4(){if(kd)return xh;kd=1;var c=Te.Buffer;function i(a,h,g){var s=a._cipher.encryptBlock(a._prev),x=s[0]^h;return a._prev=c.concat([a._prev.slice(1),c.from([g?h:x])]),x}return xh.encrypt=function(a,h,g){for(var s=h.length,x=c.allocUnsafe(s),w=-1;++w<s;)x[w]=i(a,h[w],g);return x},xh}var Eh={},Ld;function A4(){if(Ld)return Eh;Ld=1;var c=Te.Buffer;function i(h,g,s){for(var x,w=-1,_=8,M=0,b,S;++w<_;)x=h._cipher.encryptBlock(h._prev),b=g&1<<7-w?128:0,S=x[0]^b,M+=(S&128)>>w%8,h._prev=a(h._prev,s?b:S);return M}function a(h,g){var s=h.length,x=-1,w=c.allocUnsafe(h.length);for(h=c.concat([h,c.from([g])]);++x<s;)w[x]=h[x]<<1|h[x+1]>>7;return w}return Eh.encrypt=function(h,g,s){for(var x=g.length,w=c.allocUnsafe(x),_=-1;++_<x;)w[_]=i(h,g[_],s);return w},Eh}var Sh={},Fd;function D4(){if(Fd)return Sh;Fd=1;var c=Vs();function i(a){return a._prev=a._cipher.encryptBlock(a._prev),a._prev}return Sh.encrypt=function(a,h){for(;a._cache.length<h.length;)a._cache=ke.concat([a._cache,i(a)]);var g=a._cache.slice(0,h.length);return a._cache=a._cache.slice(h.length),c(h,g)},Sh}var Ah={},Dh,$d;function hg(){if($d)return Dh;$d=1;function c(i){for(var a=i.length,h;a--;)if(h=i.readUInt8(a),h===255)i.writeUInt8(0,a);else{h++,i.writeUInt8(h,a);break}}return Dh=c,Dh}var zd;function jd(){if(zd)return Ah;zd=1;var c=Vs(),i=Te.Buffer,a=hg();function h(s){var x=s._cipher.encryptBlockRaw(s._prev);return a(s._prev),x}var g=16;return Ah.encrypt=function(s,x){var w=Math.ceil(x.length/g),_=s._cache.length;s._cache=i.concat([s._cache,i.allocUnsafe(w*g)]);for(var M=0;M<w;M++){var b=h(s),S=_+M*g;s._cache.writeUInt32BE(b[0],S+0),s._cache.writeUInt32BE(b[1],S+4),s._cache.writeUInt32BE(b[2],S+8),s._cache.writeUInt32BE(b[3],S+12)}var E=s._cache.slice(0,x.length);return s._cache=s._cache.slice(x.length),c(x,E)},Ah}const I4={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},R4={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},P4={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},ug={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:I4,aes192:R4,aes256:P4,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var Ih,Hd;function Ou(){if(Hd)return Ih;Hd=1;var c={ECB:M4(),CBC:x4(),CFB:E4(),CFB8:S4(),CFB1:A4(),OFB:D4(),CTR:jd(),GCM:jd()},i=ug;for(var a in i)i[a].module=c[i[a].mode];return Ih=i,Ih}var Rh={},Kd;function No(){if(Kd)return Rh;Kd=1;var c=Te.Buffer;function i(w){c.isBuffer(w)||(w=c.from(w));for(var _=w.length/4|0,M=new Array(_),b=0;b<_;b++)M[b]=w.readUInt32BE(b*4);return M}function a(w){for(var _=0;_<w.length;w++)w[_]=0}function h(w,_,M,b,S){for(var E=M[0],D=M[1],I=M[2],O=M[3],N=w[0]^_[0],L=w[1]^_[1],R=w[2]^_[2],B=w[3]^_[3],T,U,k,P,F=4,G=1;G<S;G++)T=E[N>>>24]^D[L>>>16&255]^I[R>>>8&255]^O[B&255]^_[F++],U=E[L>>>24]^D[R>>>16&255]^I[B>>>8&255]^O[N&255]^_[F++],k=E[R>>>24]^D[B>>>16&255]^I[N>>>8&255]^O[L&255]^_[F++],P=E[B>>>24]^D[N>>>16&255]^I[L>>>8&255]^O[R&255]^_[F++],N=T,L=U,R=k,B=P;return T=(b[N>>>24]<<24|b[L>>>16&255]<<16|b[R>>>8&255]<<8|b[B&255])^_[F++],U=(b[L>>>24]<<24|b[R>>>16&255]<<16|b[B>>>8&255]<<8|b[N&255])^_[F++],k=(b[R>>>24]<<24|b[B>>>16&255]<<16|b[N>>>8&255]<<8|b[L&255])^_[F++],P=(b[B>>>24]<<24|b[N>>>16&255]<<16|b[L>>>8&255]<<8|b[R&255])^_[F++],T=T>>>0,U=U>>>0,k=k>>>0,P=P>>>0,[T,U,k,P]}var g=[0,1,2,4,8,16,32,64,128,27,54],s=function(){for(var w=new Array(256),_=0;_<256;_++)_<128?w[_]=_<<1:w[_]=_<<1^283;for(var M=[],b=[],S=[[],[],[],[]],E=[[],[],[],[]],D=0,I=0,O=0;O<256;++O){var N=I^I<<1^I<<2^I<<3^I<<4;N=N>>>8^N&255^99,M[D]=N,b[N]=D;var L=w[D],R=w[L],B=w[R],T=w[N]*257^N*16843008;S[0][D]=T<<24|T>>>8,S[1][D]=T<<16|T>>>16,S[2][D]=T<<8|T>>>24,S[3][D]=T,T=B*16843009^R*65537^L*257^D*16843008,E[0][N]=T<<24|T>>>8,E[1][N]=T<<16|T>>>16,E[2][N]=T<<8|T>>>24,E[3][N]=T,D===0?D=I=1:(D=L^w[w[w[B^L]]],I^=w[w[I]])}return{SBOX:M,INV_SBOX:b,SUB_MIX:S,INV_SUB_MIX:E}}();function x(w){this._key=i(w),this._reset()}return x.blockSize=4*4,x.keySize=256/8,x.prototype.blockSize=x.blockSize,x.prototype.keySize=x.keySize,x.prototype._reset=function(){for(var w=this._key,_=w.length,M=_+6,b=(M+1)*4,S=[],E=0;E<_;E++)S[E]=w[E];for(E=_;E<b;E++){var D=S[E-1];E%_===0?(D=D<<8|D>>>24,D=s.SBOX[D>>>24]<<24|s.SBOX[D>>>16&255]<<16|s.SBOX[D>>>8&255]<<8|s.SBOX[D&255],D^=g[E/_|0]<<24):_>6&&E%_===4&&(D=s.SBOX[D>>>24]<<24|s.SBOX[D>>>16&255]<<16|s.SBOX[D>>>8&255]<<8|s.SBOX[D&255]),S[E]=S[E-_]^D}for(var I=[],O=0;O<b;O++){var N=b-O,L=S[N-(O%4?0:4)];O<4||N<=4?I[O]=L:I[O]=s.INV_SUB_MIX[0][s.SBOX[L>>>24]]^s.INV_SUB_MIX[1][s.SBOX[L>>>16&255]]^s.INV_SUB_MIX[2][s.SBOX[L>>>8&255]]^s.INV_SUB_MIX[3][s.SBOX[L&255]]}this._nRounds=M,this._keySchedule=S,this._invKeySchedule=I},x.prototype.encryptBlockRaw=function(w){return w=i(w),h(w,this._keySchedule,s.SUB_MIX,s.SBOX,this._nRounds)},x.prototype.encryptBlock=function(w){var _=this.encryptBlockRaw(w),M=c.allocUnsafe(16);return M.writeUInt32BE(_[0],0),M.writeUInt32BE(_[1],4),M.writeUInt32BE(_[2],8),M.writeUInt32BE(_[3],12),M},x.prototype.decryptBlock=function(w){w=i(w);var _=w[1];w[1]=w[3],w[3]=_;var M=h(w,this._invKeySchedule,s.INV_SUB_MIX,s.INV_SBOX,this._nRounds),b=c.allocUnsafe(16);return b.writeUInt32BE(M[0],0),b.writeUInt32BE(M[3],4),b.writeUInt32BE(M[2],8),b.writeUInt32BE(M[1],12),b},x.prototype.scrub=function(){a(this._keySchedule),a(this._invKeySchedule),a(this._key)},Rh.AES=x,Rh}var Ph,Vd;function O4(){if(Vd)return Ph;Vd=1;var c=Te.Buffer,i=c.alloc(16,0);function a(s){return[s.readUInt32BE(0),s.readUInt32BE(4),s.readUInt32BE(8),s.readUInt32BE(12)]}function h(s){var x=c.allocUnsafe(16);return x.writeUInt32BE(s[0]>>>0,0),x.writeUInt32BE(s[1]>>>0,4),x.writeUInt32BE(s[2]>>>0,8),x.writeUInt32BE(s[3]>>>0,12),x}function g(s){this.h=s,this.state=c.alloc(16,0),this.cache=c.allocUnsafe(0)}return g.prototype.ghash=function(s){for(var x=-1;++x<s.length;)this.state[x]^=s[x];this._multiply()},g.prototype._multiply=function(){for(var s=a(this.h),x=[0,0,0,0],w,_,M,b=-1;++b<128;){for(_=(this.state[~~(b/8)]&1<<7-b%8)!==0,_&&(x[0]^=s[0],x[1]^=s[1],x[2]^=s[2],x[3]^=s[3]),M=(s[3]&1)!==0,w=3;w>0;w--)s[w]=s[w]>>>1|(s[w-1]&1)<<31;s[0]=s[0]>>>1,M&&(s[0]=s[0]^225<<24)}this.state=h(x)},g.prototype.update=function(s){this.cache=c.concat([this.cache,s]);for(var x;this.cache.length>=16;)x=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(x)},g.prototype.final=function(s,x){return this.cache.length&&this.ghash(c.concat([this.cache,i],16)),this.ghash(h([0,s,0,x])),this.state},Ph=g,Ph}var Oh,Gd;function cg(){if(Gd)return Oh;Gd=1;var c=No(),i=Te.Buffer,a=fn(),h=sr,g=O4(),s=Vs(),x=hg();function w(b,S){var E=0;b.length!==S.length&&E++;for(var D=Math.min(b.length,S.length),I=0;I<D;++I)E+=b[I]^S[I];return E}function _(b,S,E){if(S.length===12)return b._finID=i.concat([S,i.from([0,0,0,1])]),i.concat([S,i.from([0,0,0,2])]);var D=new g(E),I=S.length,O=I%16;D.update(S),O&&(O=16-O,D.update(i.alloc(O,0))),D.update(i.alloc(8,0));var N=I*8,L=i.alloc(8);L.writeUIntBE(N,0,8),D.update(L),b._finID=D.state;var R=i.from(b._finID);return x(R),R}function M(b,S,E,D){a.call(this);var I=i.alloc(4,0);this._cipher=new c.AES(S);var O=this._cipher.encryptBlock(I);this._ghash=new g(O),E=_(this,E,O),this._prev=i.from(E),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=D,this._alen=0,this._len=0,this._mode=b,this._authTag=null,this._called=!1}return h(M,a),M.prototype._update=function(b){if(!this._called&&this._alen){var S=16-this._alen%16;S<16&&(S=i.alloc(S,0),this._ghash.update(S))}this._called=!0;var E=this._mode.encrypt(this,b);return this._decrypt?this._ghash.update(b):this._ghash.update(E),this._len+=b.length,E},M.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var b=s(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&w(b,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=b,this._cipher.scrub()},M.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},M.prototype.setAuthTag=function(S){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=S},M.prototype.setAAD=function(S){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(S),this._alen+=S.length},Oh=M,Oh}var Ch,Wd;function lg(){if(Wd)return Ch;Wd=1;var c=No(),i=Te.Buffer,a=fn(),h=sr;function g(s,x,w,_){a.call(this),this._cipher=new c.AES(x),this._prev=i.from(w),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=_,this._mode=s}return h(g,a),g.prototype._update=function(s){return this._mode.encrypt(this,s,this._decrypt)},g.prototype._final=function(){this._cipher.scrub()},Ch=g,Ch}var Th,Zd;function qo(){if(Zd)return Th;Zd=1;var c=Te.Buffer,i=Iu();function a(h,g,s,x){if(c.isBuffer(h)||(h=c.from(h,"binary")),g&&(c.isBuffer(g)||(g=c.from(g,"binary")),g.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var w=s/8,_=c.alloc(w),M=c.alloc(x||0),b=c.alloc(0);w>0||x>0;){var S=new i;S.update(b),S.update(h),g&&S.update(g),b=S.digest();var E=0;if(w>0){var D=_.length-w;E=Math.min(w,b.length),b.copy(_,D,0,E),w-=E}if(E<b.length&&x>0){var I=M.length-x,O=Math.min(x,b.length-E);b.copy(M,I,E,E+O),x-=O}}return b.fill(0),{key:_,iv:M}}return Th=a,Th}var Jd;function C4(){if(Jd)return io;Jd=1;var c=Ou(),i=cg(),a=Te.Buffer,h=lg(),g=fn(),s=No(),x=qo(),w=sr;function _(D,I,O){g.call(this),this._cache=new b,this._cipher=new s.AES(I),this._prev=a.from(O),this._mode=D,this._autopadding=!0}w(_,g),_.prototype._update=function(D){this._cache.add(D);for(var I,O,N=[];I=this._cache.get();)O=this._mode.encrypt(this,I),N.push(O);return a.concat(N)};var M=a.alloc(16,16);_.prototype._final=function(){var D=this._cache.flush();if(this._autopadding)return D=this._mode.encrypt(this,D),this._cipher.scrub(),D;if(!D.equals(M))throw this._cipher.scrub(),new Error("data not multiple of block length")},_.prototype.setAutoPadding=function(D){return this._autopadding=!!D,this};function b(){this.cache=a.allocUnsafe(0)}b.prototype.add=function(D){this.cache=a.concat([this.cache,D])},b.prototype.get=function(){if(this.cache.length>15){var D=this.cache.slice(0,16);return this.cache=this.cache.slice(16),D}return null},b.prototype.flush=function(){for(var D=16-this.cache.length,I=a.allocUnsafe(D),O=-1;++O<D;)I.writeUInt8(D,O);return a.concat([this.cache,I])};function S(D,I,O){var N=c[D.toLowerCase()];if(!N)throw new TypeError("invalid suite type");if(typeof I=="string"&&(I=a.from(I)),I.length!==N.key/8)throw new TypeError("invalid key length "+I.length);if(typeof O=="string"&&(O=a.from(O)),N.mode!=="GCM"&&O.length!==N.iv)throw new TypeError("invalid iv length "+O.length);return N.type==="stream"?new h(N.module,I,O):N.type==="auth"?new i(N.module,I,O):new _(N.module,I,O)}function E(D,I){var O=c[D.toLowerCase()];if(!O)throw new TypeError("invalid suite type");var N=x(I,!1,O.key,O.iv);return S(D,N.key,N.iv)}return io.createCipheriv=S,io.createCipher=E,io}var ao={},Yd;function T4(){if(Yd)return ao;Yd=1;var c=cg(),i=Te.Buffer,a=Ou(),h=lg(),g=fn(),s=No(),x=qo(),w=sr;function _(D,I,O){g.call(this),this._cache=new M,this._last=void 0,this._cipher=new s.AES(I),this._prev=i.from(O),this._mode=D,this._autopadding=!0}w(_,g),_.prototype._update=function(D){this._cache.add(D);for(var I,O,N=[];I=this._cache.get(this._autopadding);)O=this._mode.decrypt(this,I),N.push(O);return i.concat(N)},_.prototype._final=function(){var D=this._cache.flush();if(this._autopadding)return b(this._mode.decrypt(this,D));if(D)throw new Error("data not multiple of block length")},_.prototype.setAutoPadding=function(D){return this._autopadding=!!D,this};function M(){this.cache=i.allocUnsafe(0)}M.prototype.add=function(D){this.cache=i.concat([this.cache,D])},M.prototype.get=function(D){var I;if(D){if(this.cache.length>16)return I=this.cache.slice(0,16),this.cache=this.cache.slice(16),I}else if(this.cache.length>=16)return I=this.cache.slice(0,16),this.cache=this.cache.slice(16),I;return null},M.prototype.flush=function(){if(this.cache.length)return this.cache};function b(D){var I=D[15];if(I<1||I>16)throw new Error("unable to decrypt data");for(var O=-1;++O<I;)if(D[O+(16-I)]!==I)throw new Error("unable to decrypt data");if(I!==16)return D.slice(0,16-I)}function S(D,I,O){var N=a[D.toLowerCase()];if(!N)throw new TypeError("invalid suite type");if(typeof O=="string"&&(O=i.from(O)),N.mode!=="GCM"&&O.length!==N.iv)throw new TypeError("invalid iv length "+O.length);if(typeof I=="string"&&(I=i.from(I)),I.length!==N.key/8)throw new TypeError("invalid key length "+I.length);return N.type==="stream"?new h(N.module,I,O,!0):N.type==="auth"?new c(N.module,I,O,!0):new _(N.module,I,O)}function E(D,I){var O=a[D.toLowerCase()];if(!O)throw new TypeError("invalid suite type");var N=x(I,!1,O.key,O.iv);return S(D,N.key,N.iv)}return ao.createDecipher=E,ao.createDecipheriv=S,ao}var Xd;function Cu(){if(Xd)return di;Xd=1;var c=C4(),i=T4(),a=ug;function h(){return Object.keys(a)}return di.createCipher=di.Cipher=c.createCipher,di.createCipheriv=di.Cipheriv=c.createCipheriv,di.createDecipher=di.Decipher=i.createDecipher,di.createDecipheriv=di.Decipheriv=i.createDecipheriv,di.listCiphers=di.getCiphers=h,di}var Bh={},Qd;function B4(){return Qd||(Qd=1,function(c){c["des-ecb"]={key:8,iv:0},c["des-cbc"]=c.des={key:8,iv:8},c["des-ede3-cbc"]=c.des3={key:24,iv:8},c["des-ede3"]={key:24,iv:0},c["des-ede-cbc"]={key:16,iv:8},c["des-ede"]={key:16,iv:0}}(Bh)),Bh}var tp;function N4(){if(tp)return li;tp=1;var c=_4(),i=Cu(),a=Ou(),h=B4(),g=qo();function s(b,S){b=b.toLowerCase();var E,D;if(a[b])E=a[b].key,D=a[b].iv;else if(h[b])E=h[b].key*8,D=h[b].iv;else throw new TypeError("invalid suite type");var I=g(S,!1,E,D);return w(b,I.key,I.iv)}function x(b,S){b=b.toLowerCase();var E,D;if(a[b])E=a[b].key,D=a[b].iv;else if(h[b])E=h[b].key*8,D=h[b].iv;else throw new TypeError("invalid suite type");var I=g(S,!1,E,D);return _(b,I.key,I.iv)}function w(b,S,E){if(b=b.toLowerCase(),a[b])return i.createCipheriv(b,S,E);if(h[b])return new c({key:S,iv:E,mode:b});throw new TypeError("invalid suite type")}function _(b,S,E){if(b=b.toLowerCase(),a[b])return i.createDecipheriv(b,S,E);if(h[b])return new c({key:S,iv:E,mode:b,decrypt:!0});throw new TypeError("invalid suite type")}function M(){return Object.keys(h).concat(i.getCiphers())}return li.createCipher=li.Cipher=s,li.createCipheriv=li.Cipheriv=w,li.createDecipher=li.Decipher=x,li.createDecipheriv=li.Decipheriv=_,li.listCiphers=li.getCiphers=M,li}var Sn={},lo={exports:{}};lo.exports;var ep;function dg(){return ep||(ep=1,function(c){(function(i,a){function h(v,t){if(!v)throw new Error(t||"Assertion failed")}function g(v,t){v.super_=t;var r=function(){};r.prototype=t.prototype,v.prototype=new r,v.prototype.constructor=v}function s(v,t,r){if(s.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((t==="le"||t==="be")&&(r=t,t=10),this._init(v||0,t||10,r||"be"))}typeof i=="object"?i.exports=s:a.BN=s,s.BN=s,s.wordSize=26;var x;try{typeof window<"u"&&typeof window.Buffer<"u"?x=window.Buffer:x=ns.Buffer}catch{}s.isBN=function(t){return t instanceof s?!0:t!==null&&typeof t=="object"&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,r){return t.cmp(r)>0?t:r},s.min=function(t,r){return t.cmp(r)<0?t:r},s.prototype._init=function(t,r,n){if(typeof t=="number")return this._initNumber(t,r,n);if(typeof t=="object")return this._initArray(t,r,n);r==="hex"&&(r=16),h(r===(r|0)&&r>=2&&r<=36),t=t.toString().replace(/\s+/g,"");var o=0;t[0]==="-"&&(o++,this.negative=1),o<t.length&&(r===16?this._parseHex(t,o,n):(this._parseBase(t,r,o),n==="le"&&this._initArray(this.toArray(),r,n)))},s.prototype._initNumber=function(t,r,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(h(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3),n==="le"&&this._initArray(this.toArray(),r,n)},s.prototype._initArray=function(t,r,n){if(h(typeof t.length=="number"),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d,m,y=0;if(n==="be")for(o=t.length-1,d=0;o>=0;o-=3)m=t[o]|t[o-1]<<8|t[o-2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(n==="le")for(o=0,d=0;o<t.length;o+=3)m=t[o]|t[o+1]<<8|t[o+2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this.strip()};function w(v,t){var r=v.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function _(v,t,r){var n=w(v,r);return r-1>=t&&(n|=w(v,r-1)<<4),n}s.prototype._parseHex=function(t,r,n){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d=0,m=0,y;if(n==="be")for(o=t.length-1;o>=r;o-=2)y=_(t,r,o)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8;else{var u=t.length-r;for(o=u%2===0?r+1:r;o<t.length;o+=2)y=_(t,r,o)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8}this.strip()};function M(v,t,r,n){for(var o=0,d=Math.min(v.length,r),m=t;m<d;m++){var y=v.charCodeAt(m)-48;o*=n,y>=49?o+=y-49+10:y>=17?o+=y-17+10:o+=y}return o}s.prototype._parseBase=function(t,r,n){this.words=[0],this.length=1;for(var o=0,d=1;d<=67108863;d*=r)o++;o--,d=d/r|0;for(var m=t.length-n,y=m%o,u=Math.min(m,m-y)+n,e=0,l=n;l<u;l+=o)e=M(t,l,l+o,r),this.imuln(d),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e);if(y!==0){var z=1;for(e=M(t,l,t.length,r),l=0;l<y;l++)z*=r;this.imuln(z),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e)}this.strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(t,r){t=t||10,r=r|0||1;var n;if(t===16||t==="hex"){n="";for(var o=0,d=0,m=0;m<this.length;m++){var y=this.words[m],u=((y<<o|d)&16777215).toString(16);d=y>>>24-o&16777215,d!==0||m!==this.length-1?n=b[6-u.length]+u+n:n=u+n,o+=2,o>=26&&(o-=26,m--)}for(d!==0&&(n=d.toString(16)+n);n.length%r!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}if(t===(t|0)&&t>=2&&t<=36){var e=S[t],l=E[t];n="";var z=this.clone();for(z.negative=0;!z.isZero();){var $=z.modn(l).toString(t);z=z.idivn(l),z.isZero()?n=$+n:n=b[e-$.length]+$+n}for(this.isZero()&&(n="0"+n);n.length%r!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}h(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return this.length===2?t+=this.words[1]*67108864:this.length===3&&this.words[2]===1?t+=4503599627370496+this.words[1]*67108864:this.length>2&&h(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-t:t},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(t,r){return h(typeof x<"u"),this.toArrayLike(x,t,r)},s.prototype.toArray=function(t,r){return this.toArrayLike(Array,t,r)},s.prototype.toArrayLike=function(t,r,n){var o=this.byteLength(),d=n||Math.max(1,o);h(o<=d,"byte array longer than desired length"),h(d>0,"Requested array length <= 0"),this.strip();var m=r==="le",y=new t(d),u,e,l=this.clone();if(m){for(e=0;!l.isZero();e++)u=l.andln(255),l.iushrn(8),y[e]=u;for(;e<d;e++)y[e]=0}else{for(e=0;e<d-o;e++)y[e]=0;for(e=0;!l.isZero();e++)u=l.andln(255),l.iushrn(8),y[d-e-1]=u}return y},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var r=t,n=0;return r>=4096&&(n+=13,r>>>=13),r>=64&&(n+=7,r>>>=7),r>=8&&(n+=4,r>>>=4),r>=2&&(n+=2,r>>>=2),n+r},s.prototype._zeroBits=function(t){if(t===0)return 26;var r=t,n=0;return r&8191||(n+=13,r>>>=13),r&127||(n+=7,r>>>=7),r&15||(n+=4,r>>>=4),r&3||(n+=2,r>>>=2),r&1||n++,n},s.prototype.bitLength=function(){var t=this.words[this.length-1],r=this._countBits(t);return(this.length-1)*26+r};function D(v){for(var t=new Array(v.bitLength()),r=0;r<t.length;r++){var n=r/26|0,o=r%26;t[r]=(v.words[n]&1<<o)>>>o}return t}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);if(t+=n,n!==26)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return this.negative!==0?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},s.prototype.ior=function(t){return h((this.negative|t.negative)===0),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var r;this.length>t.length?r=t:r=this;for(var n=0;n<r.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=r.length,this.strip()},s.prototype.iand=function(t){return h((this.negative|t.negative)===0),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var r,n;this.length>t.length?(r=this,n=t):(r=t,n=this);for(var o=0;o<n.length;o++)this.words[o]=r.words[o]^n.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},s.prototype.ixor=function(t){return h((this.negative|t.negative)===0),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){h(typeof t=="number"&&t>=0);var r=Math.ceil(t/26)|0,n=t%26;this._expand(r),n>0&&r--;for(var o=0;o<r;o++)this.words[o]=~this.words[o]&67108863;return n>0&&(this.words[o]=~this.words[o]&67108863>>26-n),this.strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,r){h(typeof t=="number"&&t>=0);var n=t/26|0,o=t%26;return this._expand(n+1),r?this.words[n]=this.words[n]|1<<o:this.words[n]=this.words[n]&~(1<<o),this.strip()},s.prototype.iadd=function(t){var r;if(this.negative!==0&&t.negative===0)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(this.negative===0&&t.negative!==0)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();var n,o;this.length>t.length?(n=this,o=t):(n=t,o=this);for(var d=0,m=0;m<o.length;m++)r=(n.words[m]|0)+(o.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;for(;d!==0&&m<n.length;m++)r=(n.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;if(this.length=n.length,d!==0)this.words[this.length]=d,this.length++;else if(n!==this)for(;m<n.length;m++)this.words[m]=n.words[m];return this},s.prototype.add=function(t){var r;return t.negative!==0&&this.negative===0?(t.negative=0,r=this.sub(t),t.negative^=1,r):t.negative===0&&this.negative!==0?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n=this.cmp(t);if(n===0)return this.negative=0,this.length=1,this.words[0]=0,this;var o,d;n>0?(o=this,d=t):(o=t,d=this);for(var m=0,y=0;y<d.length;y++)r=(o.words[y]|0)-(d.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;for(;m!==0&&y<o.length;y++)r=(o.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;if(m===0&&y<o.length&&o!==this)for(;y<o.length;y++)this.words[y]=o.words[y];return this.length=Math.max(this.length,y),o!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(t){return this.clone().isub(t)};function I(v,t,r){r.negative=t.negative^v.negative;var n=v.length+t.length|0;r.length=n,n=n-1|0;var o=v.words[0]|0,d=t.words[0]|0,m=o*d,y=m&67108863,u=m/67108864|0;r.words[0]=y;for(var e=1;e<n;e++){for(var l=u>>>26,z=u&67108863,$=Math.min(e,t.length-1),H=Math.max(0,e-v.length+1);H<=$;H++){var W=e-H|0;o=v.words[W]|0,d=t.words[H]|0,m=o*d+z,l+=m/67108864|0,z=m&67108863}r.words[e]=z|0,u=l|0}return u!==0?r.words[e]=u|0:r.length--,r.strip()}var O=function(t,r,n){var o=t.words,d=r.words,m=n.words,y=0,u,e,l,z=o[0]|0,$=z&8191,H=z>>>13,W=o[1]|0,tt=W&8191,Z=W>>>13,et=o[2]|0,K=et&8191,C=et>>>13,Q=o[3]|0,rt=Q&8191,st=Q>>>13,Yt=o[4]|0,gt=Yt&8191,mt=Yt>>>13,ee=o[5]|0,_t=ee&8191,Mt=ee>>>13,re=o[6]|0,ut=re&8191,pt=re>>>13,Xt=o[7]|0,vt=Xt&8191,lt=Xt>>>13,Qt=o[8]|0,ht=Qt&8191,dt=Qt>>>13,ie=o[9]|0,ct=ie&8191,bt=ie>>>13,ne=d[0]|0,yt=ne&8191,wt=ne>>>13,se=d[1]|0,Bt=se&8191,Ut=se>>>13,Fe=d[2]|0,Nt=Fe&8191,kt=Fe>>>13,ar=d[3]|0,Lt=ar&8191,Et=ar>>>13,pe=d[4]|0,St=pe&8191,At=pe>>>13,ge=d[5]|0,xt=ge&8191,Pt=ge>>>13,Me=d[6]|0,Dt=Me&8191,Ot=Me>>>13,ye=d[7]|0,Rt=ye&8191,It=ye>>>13,ue=d[8]|0,Ct=ue&8191,Tt=ue>>>13,dr=d[9]|0,Ft=dr&8191,$t=dr>>>13;n.negative=t.negative^r.negative,n.length=19,u=Math.imul($,yt),e=Math.imul($,wt),e=e+Math.imul(H,yt)|0,l=Math.imul(H,wt);var Se=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Se>>>26)|0,Se&=67108863,u=Math.imul(tt,yt),e=Math.imul(tt,wt),e=e+Math.imul(Z,yt)|0,l=Math.imul(Z,wt),u=u+Math.imul($,Bt)|0,e=e+Math.imul($,Ut)|0,e=e+Math.imul(H,Bt)|0,l=l+Math.imul(H,Ut)|0;var He=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(He>>>26)|0,He&=67108863,u=Math.imul(K,yt),e=Math.imul(K,wt),e=e+Math.imul(C,yt)|0,l=Math.imul(C,wt),u=u+Math.imul(tt,Bt)|0,e=e+Math.imul(tt,Ut)|0,e=e+Math.imul(Z,Bt)|0,l=l+Math.imul(Z,Ut)|0,u=u+Math.imul($,Nt)|0,e=e+Math.imul($,kt)|0,e=e+Math.imul(H,Nt)|0,l=l+Math.imul(H,kt)|0;var Ke=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,u=Math.imul(rt,yt),e=Math.imul(rt,wt),e=e+Math.imul(st,yt)|0,l=Math.imul(st,wt),u=u+Math.imul(K,Bt)|0,e=e+Math.imul(K,Ut)|0,e=e+Math.imul(C,Bt)|0,l=l+Math.imul(C,Ut)|0,u=u+Math.imul(tt,Nt)|0,e=e+Math.imul(tt,kt)|0,e=e+Math.imul(Z,Nt)|0,l=l+Math.imul(Z,kt)|0,u=u+Math.imul($,Lt)|0,e=e+Math.imul($,Et)|0,e=e+Math.imul(H,Lt)|0,l=l+Math.imul(H,Et)|0;var Ve=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,u=Math.imul(gt,yt),e=Math.imul(gt,wt),e=e+Math.imul(mt,yt)|0,l=Math.imul(mt,wt),u=u+Math.imul(rt,Bt)|0,e=e+Math.imul(rt,Ut)|0,e=e+Math.imul(st,Bt)|0,l=l+Math.imul(st,Ut)|0,u=u+Math.imul(K,Nt)|0,e=e+Math.imul(K,kt)|0,e=e+Math.imul(C,Nt)|0,l=l+Math.imul(C,kt)|0,u=u+Math.imul(tt,Lt)|0,e=e+Math.imul(tt,Et)|0,e=e+Math.imul(Z,Lt)|0,l=l+Math.imul(Z,Et)|0,u=u+Math.imul($,St)|0,e=e+Math.imul($,At)|0,e=e+Math.imul(H,St)|0,l=l+Math.imul(H,At)|0;var Ge=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,u=Math.imul(_t,yt),e=Math.imul(_t,wt),e=e+Math.imul(Mt,yt)|0,l=Math.imul(Mt,wt),u=u+Math.imul(gt,Bt)|0,e=e+Math.imul(gt,Ut)|0,e=e+Math.imul(mt,Bt)|0,l=l+Math.imul(mt,Ut)|0,u=u+Math.imul(rt,Nt)|0,e=e+Math.imul(rt,kt)|0,e=e+Math.imul(st,Nt)|0,l=l+Math.imul(st,kt)|0,u=u+Math.imul(K,Lt)|0,e=e+Math.imul(K,Et)|0,e=e+Math.imul(C,Lt)|0,l=l+Math.imul(C,Et)|0,u=u+Math.imul(tt,St)|0,e=e+Math.imul(tt,At)|0,e=e+Math.imul(Z,St)|0,l=l+Math.imul(Z,At)|0,u=u+Math.imul($,xt)|0,e=e+Math.imul($,Pt)|0,e=e+Math.imul(H,xt)|0,l=l+Math.imul(H,Pt)|0;var We=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(We>>>26)|0,We&=67108863,u=Math.imul(ut,yt),e=Math.imul(ut,wt),e=e+Math.imul(pt,yt)|0,l=Math.imul(pt,wt),u=u+Math.imul(_t,Bt)|0,e=e+Math.imul(_t,Ut)|0,e=e+Math.imul(Mt,Bt)|0,l=l+Math.imul(Mt,Ut)|0,u=u+Math.imul(gt,Nt)|0,e=e+Math.imul(gt,kt)|0,e=e+Math.imul(mt,Nt)|0,l=l+Math.imul(mt,kt)|0,u=u+Math.imul(rt,Lt)|0,e=e+Math.imul(rt,Et)|0,e=e+Math.imul(st,Lt)|0,l=l+Math.imul(st,Et)|0,u=u+Math.imul(K,St)|0,e=e+Math.imul(K,At)|0,e=e+Math.imul(C,St)|0,l=l+Math.imul(C,At)|0,u=u+Math.imul(tt,xt)|0,e=e+Math.imul(tt,Pt)|0,e=e+Math.imul(Z,xt)|0,l=l+Math.imul(Z,Pt)|0,u=u+Math.imul($,Dt)|0,e=e+Math.imul($,Ot)|0,e=e+Math.imul(H,Dt)|0,l=l+Math.imul(H,Ot)|0;var Oe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,u=Math.imul(vt,yt),e=Math.imul(vt,wt),e=e+Math.imul(lt,yt)|0,l=Math.imul(lt,wt),u=u+Math.imul(ut,Bt)|0,e=e+Math.imul(ut,Ut)|0,e=e+Math.imul(pt,Bt)|0,l=l+Math.imul(pt,Ut)|0,u=u+Math.imul(_t,Nt)|0,e=e+Math.imul(_t,kt)|0,e=e+Math.imul(Mt,Nt)|0,l=l+Math.imul(Mt,kt)|0,u=u+Math.imul(gt,Lt)|0,e=e+Math.imul(gt,Et)|0,e=e+Math.imul(mt,Lt)|0,l=l+Math.imul(mt,Et)|0,u=u+Math.imul(rt,St)|0,e=e+Math.imul(rt,At)|0,e=e+Math.imul(st,St)|0,l=l+Math.imul(st,At)|0,u=u+Math.imul(K,xt)|0,e=e+Math.imul(K,Pt)|0,e=e+Math.imul(C,xt)|0,l=l+Math.imul(C,Pt)|0,u=u+Math.imul(tt,Dt)|0,e=e+Math.imul(tt,Ot)|0,e=e+Math.imul(Z,Dt)|0,l=l+Math.imul(Z,Ot)|0,u=u+Math.imul($,Rt)|0,e=e+Math.imul($,It)|0,e=e+Math.imul(H,Rt)|0,l=l+Math.imul(H,It)|0;var Be=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Be>>>26)|0,Be&=67108863,u=Math.imul(ht,yt),e=Math.imul(ht,wt),e=e+Math.imul(dt,yt)|0,l=Math.imul(dt,wt),u=u+Math.imul(vt,Bt)|0,e=e+Math.imul(vt,Ut)|0,e=e+Math.imul(lt,Bt)|0,l=l+Math.imul(lt,Ut)|0,u=u+Math.imul(ut,Nt)|0,e=e+Math.imul(ut,kt)|0,e=e+Math.imul(pt,Nt)|0,l=l+Math.imul(pt,kt)|0,u=u+Math.imul(_t,Lt)|0,e=e+Math.imul(_t,Et)|0,e=e+Math.imul(Mt,Lt)|0,l=l+Math.imul(Mt,Et)|0,u=u+Math.imul(gt,St)|0,e=e+Math.imul(gt,At)|0,e=e+Math.imul(mt,St)|0,l=l+Math.imul(mt,At)|0,u=u+Math.imul(rt,xt)|0,e=e+Math.imul(rt,Pt)|0,e=e+Math.imul(st,xt)|0,l=l+Math.imul(st,Pt)|0,u=u+Math.imul(K,Dt)|0,e=e+Math.imul(K,Ot)|0,e=e+Math.imul(C,Dt)|0,l=l+Math.imul(C,Ot)|0,u=u+Math.imul(tt,Rt)|0,e=e+Math.imul(tt,It)|0,e=e+Math.imul(Z,Rt)|0,l=l+Math.imul(Z,It)|0,u=u+Math.imul($,Ct)|0,e=e+Math.imul($,Tt)|0,e=e+Math.imul(H,Ct)|0,l=l+Math.imul(H,Tt)|0;var Ze=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,u=Math.imul(ct,yt),e=Math.imul(ct,wt),e=e+Math.imul(bt,yt)|0,l=Math.imul(bt,wt),u=u+Math.imul(ht,Bt)|0,e=e+Math.imul(ht,Ut)|0,e=e+Math.imul(dt,Bt)|0,l=l+Math.imul(dt,Ut)|0,u=u+Math.imul(vt,Nt)|0,e=e+Math.imul(vt,kt)|0,e=e+Math.imul(lt,Nt)|0,l=l+Math.imul(lt,kt)|0,u=u+Math.imul(ut,Lt)|0,e=e+Math.imul(ut,Et)|0,e=e+Math.imul(pt,Lt)|0,l=l+Math.imul(pt,Et)|0,u=u+Math.imul(_t,St)|0,e=e+Math.imul(_t,At)|0,e=e+Math.imul(Mt,St)|0,l=l+Math.imul(Mt,At)|0,u=u+Math.imul(gt,xt)|0,e=e+Math.imul(gt,Pt)|0,e=e+Math.imul(mt,xt)|0,l=l+Math.imul(mt,Pt)|0,u=u+Math.imul(rt,Dt)|0,e=e+Math.imul(rt,Ot)|0,e=e+Math.imul(st,Dt)|0,l=l+Math.imul(st,Ot)|0,u=u+Math.imul(K,Rt)|0,e=e+Math.imul(K,It)|0,e=e+Math.imul(C,Rt)|0,l=l+Math.imul(C,It)|0,u=u+Math.imul(tt,Ct)|0,e=e+Math.imul(tt,Tt)|0,e=e+Math.imul(Z,Ct)|0,l=l+Math.imul(Z,Tt)|0,u=u+Math.imul($,Ft)|0,e=e+Math.imul($,$t)|0,e=e+Math.imul(H,Ft)|0,l=l+Math.imul(H,$t)|0;var Ne=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u=Math.imul(ct,Bt),e=Math.imul(ct,Ut),e=e+Math.imul(bt,Bt)|0,l=Math.imul(bt,Ut),u=u+Math.imul(ht,Nt)|0,e=e+Math.imul(ht,kt)|0,e=e+Math.imul(dt,Nt)|0,l=l+Math.imul(dt,kt)|0,u=u+Math.imul(vt,Lt)|0,e=e+Math.imul(vt,Et)|0,e=e+Math.imul(lt,Lt)|0,l=l+Math.imul(lt,Et)|0,u=u+Math.imul(ut,St)|0,e=e+Math.imul(ut,At)|0,e=e+Math.imul(pt,St)|0,l=l+Math.imul(pt,At)|0,u=u+Math.imul(_t,xt)|0,e=e+Math.imul(_t,Pt)|0,e=e+Math.imul(Mt,xt)|0,l=l+Math.imul(Mt,Pt)|0,u=u+Math.imul(gt,Dt)|0,e=e+Math.imul(gt,Ot)|0,e=e+Math.imul(mt,Dt)|0,l=l+Math.imul(mt,Ot)|0,u=u+Math.imul(rt,Rt)|0,e=e+Math.imul(rt,It)|0,e=e+Math.imul(st,Rt)|0,l=l+Math.imul(st,It)|0,u=u+Math.imul(K,Ct)|0,e=e+Math.imul(K,Tt)|0,e=e+Math.imul(C,Ct)|0,l=l+Math.imul(C,Tt)|0,u=u+Math.imul(tt,Ft)|0,e=e+Math.imul(tt,$t)|0,e=e+Math.imul(Z,Ft)|0,l=l+Math.imul(Z,$t)|0;var Je=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Je>>>26)|0,Je&=67108863,u=Math.imul(ct,Nt),e=Math.imul(ct,kt),e=e+Math.imul(bt,Nt)|0,l=Math.imul(bt,kt),u=u+Math.imul(ht,Lt)|0,e=e+Math.imul(ht,Et)|0,e=e+Math.imul(dt,Lt)|0,l=l+Math.imul(dt,Et)|0,u=u+Math.imul(vt,St)|0,e=e+Math.imul(vt,At)|0,e=e+Math.imul(lt,St)|0,l=l+Math.imul(lt,At)|0,u=u+Math.imul(ut,xt)|0,e=e+Math.imul(ut,Pt)|0,e=e+Math.imul(pt,xt)|0,l=l+Math.imul(pt,Pt)|0,u=u+Math.imul(_t,Dt)|0,e=e+Math.imul(_t,Ot)|0,e=e+Math.imul(Mt,Dt)|0,l=l+Math.imul(Mt,Ot)|0,u=u+Math.imul(gt,Rt)|0,e=e+Math.imul(gt,It)|0,e=e+Math.imul(mt,Rt)|0,l=l+Math.imul(mt,It)|0,u=u+Math.imul(rt,Ct)|0,e=e+Math.imul(rt,Tt)|0,e=e+Math.imul(st,Ct)|0,l=l+Math.imul(st,Tt)|0,u=u+Math.imul(K,Ft)|0,e=e+Math.imul(K,$t)|0,e=e+Math.imul(C,Ft)|0,l=l+Math.imul(C,$t)|0;var Ye=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,u=Math.imul(ct,Lt),e=Math.imul(ct,Et),e=e+Math.imul(bt,Lt)|0,l=Math.imul(bt,Et),u=u+Math.imul(ht,St)|0,e=e+Math.imul(ht,At)|0,e=e+Math.imul(dt,St)|0,l=l+Math.imul(dt,At)|0,u=u+Math.imul(vt,xt)|0,e=e+Math.imul(vt,Pt)|0,e=e+Math.imul(lt,xt)|0,l=l+Math.imul(lt,Pt)|0,u=u+Math.imul(ut,Dt)|0,e=e+Math.imul(ut,Ot)|0,e=e+Math.imul(pt,Dt)|0,l=l+Math.imul(pt,Ot)|0,u=u+Math.imul(_t,Rt)|0,e=e+Math.imul(_t,It)|0,e=e+Math.imul(Mt,Rt)|0,l=l+Math.imul(Mt,It)|0,u=u+Math.imul(gt,Ct)|0,e=e+Math.imul(gt,Tt)|0,e=e+Math.imul(mt,Ct)|0,l=l+Math.imul(mt,Tt)|0,u=u+Math.imul(rt,Ft)|0,e=e+Math.imul(rt,$t)|0,e=e+Math.imul(st,Ft)|0,l=l+Math.imul(st,$t)|0;var qe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(qe>>>26)|0,qe&=67108863,u=Math.imul(ct,St),e=Math.imul(ct,At),e=e+Math.imul(bt,St)|0,l=Math.imul(bt,At),u=u+Math.imul(ht,xt)|0,e=e+Math.imul(ht,Pt)|0,e=e+Math.imul(dt,xt)|0,l=l+Math.imul(dt,Pt)|0,u=u+Math.imul(vt,Dt)|0,e=e+Math.imul(vt,Ot)|0,e=e+Math.imul(lt,Dt)|0,l=l+Math.imul(lt,Ot)|0,u=u+Math.imul(ut,Rt)|0,e=e+Math.imul(ut,It)|0,e=e+Math.imul(pt,Rt)|0,l=l+Math.imul(pt,It)|0,u=u+Math.imul(_t,Ct)|0,e=e+Math.imul(_t,Tt)|0,e=e+Math.imul(Mt,Ct)|0,l=l+Math.imul(Mt,Tt)|0,u=u+Math.imul(gt,Ft)|0,e=e+Math.imul(gt,$t)|0,e=e+Math.imul(mt,Ft)|0,l=l+Math.imul(mt,$t)|0;var $e=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+($e>>>26)|0,$e&=67108863,u=Math.imul(ct,xt),e=Math.imul(ct,Pt),e=e+Math.imul(bt,xt)|0,l=Math.imul(bt,Pt),u=u+Math.imul(ht,Dt)|0,e=e+Math.imul(ht,Ot)|0,e=e+Math.imul(dt,Dt)|0,l=l+Math.imul(dt,Ot)|0,u=u+Math.imul(vt,Rt)|0,e=e+Math.imul(vt,It)|0,e=e+Math.imul(lt,Rt)|0,l=l+Math.imul(lt,It)|0,u=u+Math.imul(ut,Ct)|0,e=e+Math.imul(ut,Tt)|0,e=e+Math.imul(pt,Ct)|0,l=l+Math.imul(pt,Tt)|0,u=u+Math.imul(_t,Ft)|0,e=e+Math.imul(_t,$t)|0,e=e+Math.imul(Mt,Ft)|0,l=l+Math.imul(Mt,$t)|0;var ze=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(ze>>>26)|0,ze&=67108863,u=Math.imul(ct,Dt),e=Math.imul(ct,Ot),e=e+Math.imul(bt,Dt)|0,l=Math.imul(bt,Ot),u=u+Math.imul(ht,Rt)|0,e=e+Math.imul(ht,It)|0,e=e+Math.imul(dt,Rt)|0,l=l+Math.imul(dt,It)|0,u=u+Math.imul(vt,Ct)|0,e=e+Math.imul(vt,Tt)|0,e=e+Math.imul(lt,Ct)|0,l=l+Math.imul(lt,Tt)|0,u=u+Math.imul(ut,Ft)|0,e=e+Math.imul(ut,$t)|0,e=e+Math.imul(pt,Ft)|0,l=l+Math.imul(pt,$t)|0;var De=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(De>>>26)|0,De&=67108863,u=Math.imul(ct,Rt),e=Math.imul(ct,It),e=e+Math.imul(bt,Rt)|0,l=Math.imul(bt,It),u=u+Math.imul(ht,Ct)|0,e=e+Math.imul(ht,Tt)|0,e=e+Math.imul(dt,Ct)|0,l=l+Math.imul(dt,Tt)|0,u=u+Math.imul(vt,Ft)|0,e=e+Math.imul(vt,$t)|0,e=e+Math.imul(lt,Ft)|0,l=l+Math.imul(lt,$t)|0;var Xe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,u=Math.imul(ct,Ct),e=Math.imul(ct,Tt),e=e+Math.imul(bt,Ct)|0,l=Math.imul(bt,Tt),u=u+Math.imul(ht,Ft)|0,e=e+Math.imul(ht,$t)|0,e=e+Math.imul(dt,Ft)|0,l=l+Math.imul(dt,$t)|0;var Qe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,u=Math.imul(ct,Ft),e=Math.imul(ct,$t),e=e+Math.imul(bt,Ft)|0,l=Math.imul(bt,$t);var tr=(y+u|0)+((e&8191)<<13)|0;return y=(l+(e>>>13)|0)+(tr>>>26)|0,tr&=67108863,m[0]=Se,m[1]=He,m[2]=Ke,m[3]=Ve,m[4]=Ge,m[5]=We,m[6]=Oe,m[7]=Be,m[8]=Ze,m[9]=Ne,m[10]=Je,m[11]=Ye,m[12]=qe,m[13]=$e,m[14]=ze,m[15]=De,m[16]=Xe,m[17]=Qe,m[18]=tr,y!==0&&(m[19]=y,n.length++),n};Math.imul||(O=I);function N(v,t,r){r.negative=t.negative^v.negative,r.length=v.length+t.length;for(var n=0,o=0,d=0;d<r.length-1;d++){var m=o;o=0;for(var y=n&67108863,u=Math.min(d,t.length-1),e=Math.max(0,d-v.length+1);e<=u;e++){var l=d-e,z=v.words[l]|0,$=t.words[e]|0,H=z*$,W=H&67108863;m=m+(H/67108864|0)|0,W=W+y|0,y=W&67108863,m=m+(W>>>26)|0,o+=m>>>26,m&=67108863}r.words[d]=y,n=m,m=o}return n!==0?r.words[d]=n:r.length--,r.strip()}function L(v,t,r){var n=new R;return n.mulp(v,t,r)}s.prototype.mulTo=function(t,r){var n,o=this.length+t.length;return this.length===10&&t.length===10?n=O(this,t,r):o<63?n=I(this,t,r):o<1024?n=N(this,t,r):n=L(this,t,r),n};function R(v,t){this.x=v,this.y=t}R.prototype.makeRBT=function(t){for(var r=new Array(t),n=s.prototype._countBits(t)-1,o=0;o<t;o++)r[o]=this.revBin(o,n,t);return r},R.prototype.revBin=function(t,r,n){if(t===0||t===n-1)return t;for(var o=0,d=0;d<r;d++)o|=(t&1)<<r-d-1,t>>=1;return o},R.prototype.permute=function(t,r,n,o,d,m){for(var y=0;y<m;y++)o[y]=r[t[y]],d[y]=n[t[y]]},R.prototype.transform=function(t,r,n,o,d,m){this.permute(m,t,r,n,o,d);for(var y=1;y<d;y<<=1)for(var u=y<<1,e=Math.cos(2*Math.PI/u),l=Math.sin(2*Math.PI/u),z=0;z<d;z+=u)for(var $=e,H=l,W=0;W<y;W++){var tt=n[z+W],Z=o[z+W],et=n[z+W+y],K=o[z+W+y],C=$*et-H*K;K=$*K+H*et,et=C,n[z+W]=tt+et,o[z+W]=Z+K,n[z+W+y]=tt-et,o[z+W+y]=Z-K,W!==u&&(C=e*$-l*H,H=e*H+l*$,$=C)}},R.prototype.guessLen13b=function(t,r){var n=Math.max(r,t)|1,o=n&1,d=0;for(n=n/2|0;n;n=n>>>1)d++;return 1<<d+1+o},R.prototype.conjugate=function(t,r,n){if(!(n<=1))for(var o=0;o<n/2;o++){var d=t[o];t[o]=t[n-o-1],t[n-o-1]=d,d=r[o],r[o]=-r[n-o-1],r[n-o-1]=-d}},R.prototype.normalize13b=function(t,r){for(var n=0,o=0;o<r/2;o++){var d=Math.round(t[2*o+1]/r)*8192+Math.round(t[2*o]/r)+n;t[o]=d&67108863,d<67108864?n=0:n=d/67108864|0}return t},R.prototype.convert13b=function(t,r,n,o){for(var d=0,m=0;m<r;m++)d=d+(t[m]|0),n[2*m]=d&8191,d=d>>>13,n[2*m+1]=d&8191,d=d>>>13;for(m=2*r;m<o;++m)n[m]=0;h(d===0),h((d&-8192)===0)},R.prototype.stub=function(t){for(var r=new Array(t),n=0;n<t;n++)r[n]=0;return r},R.prototype.mulp=function(t,r,n){var o=2*this.guessLen13b(t.length,r.length),d=this.makeRBT(o),m=this.stub(o),y=new Array(o),u=new Array(o),e=new Array(o),l=new Array(o),z=new Array(o),$=new Array(o),H=n.words;H.length=o,this.convert13b(t.words,t.length,y,o),this.convert13b(r.words,r.length,l,o),this.transform(y,m,u,e,o,d),this.transform(l,m,z,$,o,d);for(var W=0;W<o;W++){var tt=u[W]*z[W]-e[W]*$[W];e[W]=u[W]*$[W]+e[W]*z[W],u[W]=tt}return this.conjugate(u,e,o),this.transform(u,e,H,m,o,d),this.conjugate(H,m,o),this.normalize13b(H,o),n.negative=t.negative^r.negative,n.length=t.length+r.length,n.strip()},s.prototype.mul=function(t){var r=new s(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},s.prototype.mulf=function(t){var r=new s(null);return r.words=new Array(this.length+t.length),L(this,t,r)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){h(typeof t=="number"),h(t<67108864);for(var r=0,n=0;n<this.length;n++){var o=(this.words[n]|0)*t,d=(o&67108863)+(r&67108863);r>>=26,r+=o/67108864|0,r+=d>>>26,this.words[n]=d&67108863}return r!==0&&(this.words[n]=r,this.length++),this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var r=D(t);if(r.length===0)return new s(1);for(var n=this,o=0;o<r.length&&r[o]===0;o++,n=n.sqr());if(++o<r.length)for(var d=n.sqr();o<r.length;o++,d=d.sqr())r[o]!==0&&(n=n.mul(d));return n},s.prototype.iushln=function(t){h(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r,d;if(r!==0){var m=0;for(d=0;d<this.length;d++){var y=this.words[d]&o,u=(this.words[d]|0)-y<<r;this.words[d]=u|m,m=y>>>26-r}m&&(this.words[d]=m,this.length++)}if(n!==0){for(d=this.length-1;d>=0;d--)this.words[d+n]=this.words[d];for(d=0;d<n;d++)this.words[d]=0;this.length+=n}return this.strip()},s.prototype.ishln=function(t){return h(this.negative===0),this.iushln(t)},s.prototype.iushrn=function(t,r,n){h(typeof t=="number"&&t>=0);var o;r?o=(r-r%26)/26:o=0;var d=t%26,m=Math.min((t-d)/26,this.length),y=67108863^67108863>>>d<<d,u=n;if(o-=m,o=Math.max(0,o),u){for(var e=0;e<m;e++)u.words[e]=this.words[e];u.length=m}if(m!==0)if(this.length>m)for(this.length-=m,e=0;e<this.length;e++)this.words[e]=this.words[e+m];else this.words[0]=0,this.length=1;var l=0;for(e=this.length-1;e>=0&&(l!==0||e>=o);e--){var z=this.words[e]|0;this.words[e]=l<<26-d|z>>>d,l=z&y}return u&&l!==0&&(u.words[u.length++]=l),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(t,r,n){return h(this.negative===0),this.iushrn(t,r,n)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){h(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26,o=1<<r;if(this.length<=n)return!1;var d=this.words[n];return!!(d&o)},s.prototype.imaskn=function(t){h(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26;if(h(this.negative===0,"imaskn works only with positive numbers"),this.length<=n)return this;if(r!==0&&n++,this.length=Math.min(n,this.length),r!==0){var o=67108863^67108863>>>r<<r;this.words[this.length-1]&=o}return this.strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return h(typeof t=="number"),h(t<67108864),t<0?this.isubn(-t):this.negative!==0?this.length===1&&(this.words[0]|0)<t?(this.words[0]=t-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},s.prototype.isubn=function(t){if(h(typeof t=="number"),h(t<67108864),t<0)return this.iaddn(-t);if(this.negative!==0)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,r,n){var o=t.length+n,d;this._expand(o);var m,y=0;for(d=0;d<t.length;d++){m=(this.words[d+n]|0)+y;var u=(t.words[d]|0)*r;m-=u&67108863,y=(m>>26)-(u/67108864|0),this.words[d+n]=m&67108863}for(;d<this.length-n;d++)m=(this.words[d+n]|0)+y,y=m>>26,this.words[d+n]=m&67108863;if(y===0)return this.strip();for(h(y===-1),y=0,d=0;d<this.length;d++)m=-(this.words[d]|0)+y,y=m>>26,this.words[d]=m&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(t,r){var n=this.length-t.length,o=this.clone(),d=t,m=d.words[d.length-1]|0,y=this._countBits(m);n=26-y,n!==0&&(d=d.ushln(n),o.iushln(n),m=d.words[d.length-1]|0);var u=o.length-d.length,e;if(r!=="mod"){e=new s(null),e.length=u+1,e.words=new Array(e.length);for(var l=0;l<e.length;l++)e.words[l]=0}var z=o.clone()._ishlnsubmul(d,1,u);z.negative===0&&(o=z,e&&(e.words[u]=1));for(var $=u-1;$>=0;$--){var H=(o.words[d.length+$]|0)*67108864+(o.words[d.length+$-1]|0);for(H=Math.min(H/m|0,67108863),o._ishlnsubmul(d,H,$);o.negative!==0;)H--,o.negative=0,o._ishlnsubmul(d,1,$),o.isZero()||(o.negative^=1);e&&(e.words[$]=H)}return e&&e.strip(),o.strip(),r!=="div"&&n!==0&&o.iushrn(n),{div:e||null,mod:o}},s.prototype.divmod=function(t,r,n){if(h(!t.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var o,d,m;return this.negative!==0&&t.negative===0?(m=this.neg().divmod(t,r),r!=="mod"&&(o=m.div.neg()),r!=="div"&&(d=m.mod.neg(),n&&d.negative!==0&&d.iadd(t)),{div:o,mod:d}):this.negative===0&&t.negative!==0?(m=this.divmod(t.neg(),r),r!=="mod"&&(o=m.div.neg()),{div:o,mod:m.mod}):this.negative&t.negative?(m=this.neg().divmod(t.neg(),r),r!=="div"&&(d=m.mod.neg(),n&&d.negative!==0&&d.isub(t)),{div:m.div,mod:d}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:t.length===1?r==="div"?{div:this.divn(t.words[0]),mod:null}:r==="mod"?{div:null,mod:new s(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modn(t.words[0]))}:this._wordDiv(t,r)},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=r.div.negative!==0?r.mod.isub(t):r.mod,o=t.ushrn(1),d=t.andln(1),m=n.cmp(o);return m<0||d===1&&m===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},s.prototype.modn=function(t){h(t<=67108863);for(var r=(1<<26)%t,n=0,o=this.length-1;o>=0;o--)n=(r*n+(this.words[o]|0))%t;return n},s.prototype.idivn=function(t){h(t<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var o=(this.words[n]|0)+r*67108864;this.words[n]=o/t|0,r=o%t}return this.strip()},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){h(t.negative===0),h(!t.isZero());var r=this,n=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var o=new s(1),d=new s(0),m=new s(0),y=new s(1),u=0;r.isEven()&&n.isEven();)r.iushrn(1),n.iushrn(1),++u;for(var e=n.clone(),l=r.clone();!r.isZero();){for(var z=0,$=1;!(r.words[0]&$)&&z<26;++z,$<<=1);if(z>0)for(r.iushrn(z);z-- >0;)(o.isOdd()||d.isOdd())&&(o.iadd(e),d.isub(l)),o.iushrn(1),d.iushrn(1);for(var H=0,W=1;!(n.words[0]&W)&&H<26;++H,W<<=1);if(H>0)for(n.iushrn(H);H-- >0;)(m.isOdd()||y.isOdd())&&(m.iadd(e),y.isub(l)),m.iushrn(1),y.iushrn(1);r.cmp(n)>=0?(r.isub(n),o.isub(m),d.isub(y)):(n.isub(r),m.isub(o),y.isub(d))}return{a:m,b:y,gcd:n.iushln(u)}},s.prototype._invmp=function(t){h(t.negative===0),h(!t.isZero());var r=this,n=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var o=new s(1),d=new s(0),m=n.clone();r.cmpn(1)>0&&n.cmpn(1)>0;){for(var y=0,u=1;!(r.words[0]&u)&&y<26;++y,u<<=1);if(y>0)for(r.iushrn(y);y-- >0;)o.isOdd()&&o.iadd(m),o.iushrn(1);for(var e=0,l=1;!(n.words[0]&l)&&e<26;++e,l<<=1);if(e>0)for(n.iushrn(e);e-- >0;)d.isOdd()&&d.iadd(m),d.iushrn(1);r.cmp(n)>=0?(r.isub(n),o.isub(d)):(n.isub(r),d.isub(o))}var z;return r.cmpn(1)===0?z=o:z=d,z.cmpn(0)<0&&z.iadd(t),z},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),n=t.clone();r.negative=0,n.negative=0;for(var o=0;r.isEven()&&n.isEven();o++)r.iushrn(1),n.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;n.isEven();)n.iushrn(1);var d=r.cmp(n);if(d<0){var m=r;r=n,n=m}else if(d===0||n.cmpn(1)===0)break;r.isub(n)}while(!0);return n.iushln(o)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){h(typeof t=="number");var r=t%26,n=(t-r)/26,o=1<<r;if(this.length<=n)return this._expand(n+1),this.words[n]|=o,this;for(var d=o,m=n;d!==0&&m<this.length;m++){var y=this.words[m]|0;y+=d,d=y>>>26,y&=67108863,this.words[m]=y}return d!==0&&(this.words[m]=d,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(t){var r=t<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var n;if(this.length>1)n=1;else{r&&(t=-t),h(t<=67108863,"Number is too big");var o=this.words[0]|0;n=o===t?0:o<t?-1:1}return this.negative!==0?-n|0:n},s.prototype.cmp=function(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);return this.negative!==0?-r|0:r},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,n=this.length-1;n>=0;n--){var o=this.words[n]|0,d=t.words[n]|0;if(o!==d){o<d?r=-1:o>d&&(r=1);break}}return r},s.prototype.gtn=function(t){return this.cmpn(t)===1},s.prototype.gt=function(t){return this.cmp(t)===1},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return this.cmpn(t)===-1},s.prototype.lt=function(t){return this.cmp(t)===-1},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return this.cmpn(t)===0},s.prototype.eq=function(t){return this.cmp(t)===0},s.red=function(t){return new G(t)},s.prototype.toRed=function(t){return h(!this.red,"Already a number in reduction context"),h(this.negative===0,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return h(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return h(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return h(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return h(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return h(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return h(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return h(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return h(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return h(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return h(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return h(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return h(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return h(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return h(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return h(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var B={k256:null,p224:null,p192:null,p25519:null};function T(v,t){this.name=v,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}T.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},T.prototype.ireduce=function(t){var r=t,n;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),n=r.bitLength();while(n>this.n);var o=n<this.n?-1:r.ucmp(this.p);return o===0?(r.words[0]=0,r.length=1):o>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},T.prototype.split=function(t,r){t.iushrn(this.n,0,r)},T.prototype.imulK=function(t){return t.imul(this.k)};function U(){T.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}g(U,T),U.prototype.split=function(t,r){for(var n=4194303,o=Math.min(t.length,9),d=0;d<o;d++)r.words[d]=t.words[d];if(r.length=o,t.length<=9){t.words[0]=0,t.length=1;return}var m=t.words[9];for(r.words[r.length++]=m&n,d=10;d<t.length;d++){var y=t.words[d]|0;t.words[d-10]=(y&n)<<4|m>>>22,m=y}m>>>=22,t.words[d-10]=m,m===0&&t.length>10?t.length-=10:t.length-=9},U.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,n=0;n<t.length;n++){var o=t.words[n]|0;r+=o*977,t.words[n]=r&67108863,r=o*64+(r/67108864|0)}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t};function k(){T.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}g(k,T);function P(){T.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}g(P,T);function F(){T.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}g(F,T),F.prototype.imulK=function(t){for(var r=0,n=0;n<t.length;n++){var o=(t.words[n]|0)*19+r,d=o&67108863;o>>>=26,t.words[n]=d,r=o}return r!==0&&(t.words[t.length++]=r),t},s._prime=function(t){if(B[t])return B[t];var r;if(t==="k256")r=new U;else if(t==="p224")r=new k;else if(t==="p192")r=new P;else if(t==="p25519")r=new F;else throw new Error("Unknown prime "+t);return B[t]=r,r};function G(v){if(typeof v=="string"){var t=s._prime(v);this.m=t.p,this.prime=t}else h(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}G.prototype._verify1=function(t){h(t.negative===0,"red works only with positives"),h(t.red,"red works only with red numbers")},G.prototype._verify2=function(t,r){h((t.negative|r.negative)===0,"red works only with positives"),h(t.red&&t.red===r.red,"red works only with red numbers")},G.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},G.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},G.prototype.add=function(t,r){this._verify2(t,r);var n=t.add(r);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},G.prototype.iadd=function(t,r){this._verify2(t,r);var n=t.iadd(r);return n.cmp(this.m)>=0&&n.isub(this.m),n},G.prototype.sub=function(t,r){this._verify2(t,r);var n=t.sub(r);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},G.prototype.isub=function(t,r){this._verify2(t,r);var n=t.isub(r);return n.cmpn(0)<0&&n.iadd(this.m),n},G.prototype.shl=function(t,r){return this._verify1(t),this.imod(t.ushln(r))},G.prototype.imul=function(t,r){return this._verify2(t,r),this.imod(t.imul(r))},G.prototype.mul=function(t,r){return this._verify2(t,r),this.imod(t.mul(r))},G.prototype.isqr=function(t){return this.imul(t,t.clone())},G.prototype.sqr=function(t){return this.mul(t,t)},G.prototype.sqrt=function(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(h(r%2===1),r===3){var n=this.m.add(new s(1)).iushrn(2);return this.pow(t,n)}for(var o=this.m.subn(1),d=0;!o.isZero()&&o.andln(1)===0;)d++,o.iushrn(1);h(!o.isZero());var m=new s(1).toRed(this),y=m.redNeg(),u=this.m.subn(1).iushrn(1),e=this.m.bitLength();for(e=new s(2*e*e).toRed(this);this.pow(e,u).cmp(y)!==0;)e.redIAdd(y);for(var l=this.pow(e,o),z=this.pow(t,o.addn(1).iushrn(1)),$=this.pow(t,o),H=d;$.cmp(m)!==0;){for(var W=$,tt=0;W.cmp(m)!==0;tt++)W=W.redSqr();h(tt<H);var Z=this.pow(l,new s(1).iushln(H-tt-1));z=z.redMul(Z),l=Z.redSqr(),$=$.redMul(l),H=tt}return z},G.prototype.invm=function(t){var r=t._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},G.prototype.pow=function(t,r){if(r.isZero())return new s(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var n=4,o=new Array(1<<n);o[0]=new s(1).toRed(this),o[1]=t;for(var d=2;d<o.length;d++)o[d]=this.mul(o[d-1],t);var m=o[0],y=0,u=0,e=r.bitLength()%26;for(e===0&&(e=26),d=r.length-1;d>=0;d--){for(var l=r.words[d],z=e-1;z>=0;z--){var $=l>>z&1;if(m!==o[0]&&(m=this.sqr(m)),$===0&&y===0){u=0;continue}y<<=1,y|=$,u++,!(u!==n&&(d!==0||z!==0))&&(m=this.mul(m,o[y]),u=0,y=0)}e=26}return m},G.prototype.convertTo=function(t){var r=t.umod(this.m);return r===t?r.clone():r},G.prototype.convertFrom=function(t){var r=t.clone();return r.red=null,r},s.mont=function(t){return new nt(t)};function nt(v){G.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g(nt,G),nt.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},nt.prototype.convertFrom=function(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},nt.prototype.imul=function(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(r),o=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=n.isub(o).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.mul=function(t,r){if(t.isZero()||r.isZero())return new s(0)._forceRed(this);var n=t.mul(r),o=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=n.isub(o).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.invm=function(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(c,Ee)}(lo)),lo.exports}var po={exports:{}};po.exports;var rp;function q4(){return rp||(rp=1,function(c){(function(i,a){function h(v,t){if(!v)throw new Error(t||"Assertion failed")}function g(v,t){v.super_=t;var r=function(){};r.prototype=t.prototype,v.prototype=new r,v.prototype.constructor=v}function s(v,t,r){if(s.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((t==="le"||t==="be")&&(r=t,t=10),this._init(v||0,t||10,r||"be"))}typeof i=="object"?i.exports=s:a.BN=s,s.BN=s,s.wordSize=26;var x;try{typeof window<"u"&&typeof window.Buffer<"u"?x=window.Buffer:x=ns.Buffer}catch{}s.isBN=function(t){return t instanceof s?!0:t!==null&&typeof t=="object"&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,r){return t.cmp(r)>0?t:r},s.min=function(t,r){return t.cmp(r)<0?t:r},s.prototype._init=function(t,r,n){if(typeof t=="number")return this._initNumber(t,r,n);if(typeof t=="object")return this._initArray(t,r,n);r==="hex"&&(r=16),h(r===(r|0)&&r>=2&&r<=36),t=t.toString().replace(/\s+/g,"");var o=0;t[0]==="-"&&(o++,this.negative=1),o<t.length&&(r===16?this._parseHex(t,o,n):(this._parseBase(t,r,o),n==="le"&&this._initArray(this.toArray(),r,n)))},s.prototype._initNumber=function(t,r,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(h(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3),n==="le"&&this._initArray(this.toArray(),r,n)},s.prototype._initArray=function(t,r,n){if(h(typeof t.length=="number"),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d,m,y=0;if(n==="be")for(o=t.length-1,d=0;o>=0;o-=3)m=t[o]|t[o-1]<<8|t[o-2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(n==="le")for(o=0,d=0;o<t.length;o+=3)m=t[o]|t[o+1]<<8|t[o+2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this.strip()};function w(v,t){var r=v.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function _(v,t,r){var n=w(v,r);return r-1>=t&&(n|=w(v,r-1)<<4),n}s.prototype._parseHex=function(t,r,n){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d=0,m=0,y;if(n==="be")for(o=t.length-1;o>=r;o-=2)y=_(t,r,o)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8;else{var u=t.length-r;for(o=u%2===0?r+1:r;o<t.length;o+=2)y=_(t,r,o)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8}this.strip()};function M(v,t,r,n){for(var o=0,d=Math.min(v.length,r),m=t;m<d;m++){var y=v.charCodeAt(m)-48;o*=n,y>=49?o+=y-49+10:y>=17?o+=y-17+10:o+=y}return o}s.prototype._parseBase=function(t,r,n){this.words=[0],this.length=1;for(var o=0,d=1;d<=67108863;d*=r)o++;o--,d=d/r|0;for(var m=t.length-n,y=m%o,u=Math.min(m,m-y)+n,e=0,l=n;l<u;l+=o)e=M(t,l,l+o,r),this.imuln(d),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e);if(y!==0){var z=1;for(e=M(t,l,t.length,r),l=0;l<y;l++)z*=r;this.imuln(z),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e)}this.strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(t,r){t=t||10,r=r|0||1;var n;if(t===16||t==="hex"){n="";for(var o=0,d=0,m=0;m<this.length;m++){var y=this.words[m],u=((y<<o|d)&16777215).toString(16);d=y>>>24-o&16777215,d!==0||m!==this.length-1?n=b[6-u.length]+u+n:n=u+n,o+=2,o>=26&&(o-=26,m--)}for(d!==0&&(n=d.toString(16)+n);n.length%r!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}if(t===(t|0)&&t>=2&&t<=36){var e=S[t],l=E[t];n="";var z=this.clone();for(z.negative=0;!z.isZero();){var $=z.modn(l).toString(t);z=z.idivn(l),z.isZero()?n=$+n:n=b[e-$.length]+$+n}for(this.isZero()&&(n="0"+n);n.length%r!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}h(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return this.length===2?t+=this.words[1]*67108864:this.length===3&&this.words[2]===1?t+=4503599627370496+this.words[1]*67108864:this.length>2&&h(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-t:t},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(t,r){return h(typeof x<"u"),this.toArrayLike(x,t,r)},s.prototype.toArray=function(t,r){return this.toArrayLike(Array,t,r)},s.prototype.toArrayLike=function(t,r,n){var o=this.byteLength(),d=n||Math.max(1,o);h(o<=d,"byte array longer than desired length"),h(d>0,"Requested array length <= 0"),this.strip();var m=r==="le",y=new t(d),u,e,l=this.clone();if(m){for(e=0;!l.isZero();e++)u=l.andln(255),l.iushrn(8),y[e]=u;for(;e<d;e++)y[e]=0}else{for(e=0;e<d-o;e++)y[e]=0;for(e=0;!l.isZero();e++)u=l.andln(255),l.iushrn(8),y[d-e-1]=u}return y},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var r=t,n=0;return r>=4096&&(n+=13,r>>>=13),r>=64&&(n+=7,r>>>=7),r>=8&&(n+=4,r>>>=4),r>=2&&(n+=2,r>>>=2),n+r},s.prototype._zeroBits=function(t){if(t===0)return 26;var r=t,n=0;return r&8191||(n+=13,r>>>=13),r&127||(n+=7,r>>>=7),r&15||(n+=4,r>>>=4),r&3||(n+=2,r>>>=2),r&1||n++,n},s.prototype.bitLength=function(){var t=this.words[this.length-1],r=this._countBits(t);return(this.length-1)*26+r};function D(v){for(var t=new Array(v.bitLength()),r=0;r<t.length;r++){var n=r/26|0,o=r%26;t[r]=(v.words[n]&1<<o)>>>o}return t}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);if(t+=n,n!==26)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return this.negative!==0?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},s.prototype.ior=function(t){return h((this.negative|t.negative)===0),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var r;this.length>t.length?r=t:r=this;for(var n=0;n<r.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=r.length,this.strip()},s.prototype.iand=function(t){return h((this.negative|t.negative)===0),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var r,n;this.length>t.length?(r=this,n=t):(r=t,n=this);for(var o=0;o<n.length;o++)this.words[o]=r.words[o]^n.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},s.prototype.ixor=function(t){return h((this.negative|t.negative)===0),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){h(typeof t=="number"&&t>=0);var r=Math.ceil(t/26)|0,n=t%26;this._expand(r),n>0&&r--;for(var o=0;o<r;o++)this.words[o]=~this.words[o]&67108863;return n>0&&(this.words[o]=~this.words[o]&67108863>>26-n),this.strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,r){h(typeof t=="number"&&t>=0);var n=t/26|0,o=t%26;return this._expand(n+1),r?this.words[n]=this.words[n]|1<<o:this.words[n]=this.words[n]&~(1<<o),this.strip()},s.prototype.iadd=function(t){var r;if(this.negative!==0&&t.negative===0)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(this.negative===0&&t.negative!==0)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();var n,o;this.length>t.length?(n=this,o=t):(n=t,o=this);for(var d=0,m=0;m<o.length;m++)r=(n.words[m]|0)+(o.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;for(;d!==0&&m<n.length;m++)r=(n.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;if(this.length=n.length,d!==0)this.words[this.length]=d,this.length++;else if(n!==this)for(;m<n.length;m++)this.words[m]=n.words[m];return this},s.prototype.add=function(t){var r;return t.negative!==0&&this.negative===0?(t.negative=0,r=this.sub(t),t.negative^=1,r):t.negative===0&&this.negative!==0?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n=this.cmp(t);if(n===0)return this.negative=0,this.length=1,this.words[0]=0,this;var o,d;n>0?(o=this,d=t):(o=t,d=this);for(var m=0,y=0;y<d.length;y++)r=(o.words[y]|0)-(d.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;for(;m!==0&&y<o.length;y++)r=(o.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;if(m===0&&y<o.length&&o!==this)for(;y<o.length;y++)this.words[y]=o.words[y];return this.length=Math.max(this.length,y),o!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(t){return this.clone().isub(t)};function I(v,t,r){r.negative=t.negative^v.negative;var n=v.length+t.length|0;r.length=n,n=n-1|0;var o=v.words[0]|0,d=t.words[0]|0,m=o*d,y=m&67108863,u=m/67108864|0;r.words[0]=y;for(var e=1;e<n;e++){for(var l=u>>>26,z=u&67108863,$=Math.min(e,t.length-1),H=Math.max(0,e-v.length+1);H<=$;H++){var W=e-H|0;o=v.words[W]|0,d=t.words[H]|0,m=o*d+z,l+=m/67108864|0,z=m&67108863}r.words[e]=z|0,u=l|0}return u!==0?r.words[e]=u|0:r.length--,r.strip()}var O=function(t,r,n){var o=t.words,d=r.words,m=n.words,y=0,u,e,l,z=o[0]|0,$=z&8191,H=z>>>13,W=o[1]|0,tt=W&8191,Z=W>>>13,et=o[2]|0,K=et&8191,C=et>>>13,Q=o[3]|0,rt=Q&8191,st=Q>>>13,Yt=o[4]|0,gt=Yt&8191,mt=Yt>>>13,ee=o[5]|0,_t=ee&8191,Mt=ee>>>13,re=o[6]|0,ut=re&8191,pt=re>>>13,Xt=o[7]|0,vt=Xt&8191,lt=Xt>>>13,Qt=o[8]|0,ht=Qt&8191,dt=Qt>>>13,ie=o[9]|0,ct=ie&8191,bt=ie>>>13,ne=d[0]|0,yt=ne&8191,wt=ne>>>13,se=d[1]|0,Bt=se&8191,Ut=se>>>13,Fe=d[2]|0,Nt=Fe&8191,kt=Fe>>>13,ar=d[3]|0,Lt=ar&8191,Et=ar>>>13,pe=d[4]|0,St=pe&8191,At=pe>>>13,ge=d[5]|0,xt=ge&8191,Pt=ge>>>13,Me=d[6]|0,Dt=Me&8191,Ot=Me>>>13,ye=d[7]|0,Rt=ye&8191,It=ye>>>13,ue=d[8]|0,Ct=ue&8191,Tt=ue>>>13,dr=d[9]|0,Ft=dr&8191,$t=dr>>>13;n.negative=t.negative^r.negative,n.length=19,u=Math.imul($,yt),e=Math.imul($,wt),e=e+Math.imul(H,yt)|0,l=Math.imul(H,wt);var Se=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Se>>>26)|0,Se&=67108863,u=Math.imul(tt,yt),e=Math.imul(tt,wt),e=e+Math.imul(Z,yt)|0,l=Math.imul(Z,wt),u=u+Math.imul($,Bt)|0,e=e+Math.imul($,Ut)|0,e=e+Math.imul(H,Bt)|0,l=l+Math.imul(H,Ut)|0;var He=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(He>>>26)|0,He&=67108863,u=Math.imul(K,yt),e=Math.imul(K,wt),e=e+Math.imul(C,yt)|0,l=Math.imul(C,wt),u=u+Math.imul(tt,Bt)|0,e=e+Math.imul(tt,Ut)|0,e=e+Math.imul(Z,Bt)|0,l=l+Math.imul(Z,Ut)|0,u=u+Math.imul($,Nt)|0,e=e+Math.imul($,kt)|0,e=e+Math.imul(H,Nt)|0,l=l+Math.imul(H,kt)|0;var Ke=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,u=Math.imul(rt,yt),e=Math.imul(rt,wt),e=e+Math.imul(st,yt)|0,l=Math.imul(st,wt),u=u+Math.imul(K,Bt)|0,e=e+Math.imul(K,Ut)|0,e=e+Math.imul(C,Bt)|0,l=l+Math.imul(C,Ut)|0,u=u+Math.imul(tt,Nt)|0,e=e+Math.imul(tt,kt)|0,e=e+Math.imul(Z,Nt)|0,l=l+Math.imul(Z,kt)|0,u=u+Math.imul($,Lt)|0,e=e+Math.imul($,Et)|0,e=e+Math.imul(H,Lt)|0,l=l+Math.imul(H,Et)|0;var Ve=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,u=Math.imul(gt,yt),e=Math.imul(gt,wt),e=e+Math.imul(mt,yt)|0,l=Math.imul(mt,wt),u=u+Math.imul(rt,Bt)|0,e=e+Math.imul(rt,Ut)|0,e=e+Math.imul(st,Bt)|0,l=l+Math.imul(st,Ut)|0,u=u+Math.imul(K,Nt)|0,e=e+Math.imul(K,kt)|0,e=e+Math.imul(C,Nt)|0,l=l+Math.imul(C,kt)|0,u=u+Math.imul(tt,Lt)|0,e=e+Math.imul(tt,Et)|0,e=e+Math.imul(Z,Lt)|0,l=l+Math.imul(Z,Et)|0,u=u+Math.imul($,St)|0,e=e+Math.imul($,At)|0,e=e+Math.imul(H,St)|0,l=l+Math.imul(H,At)|0;var Ge=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,u=Math.imul(_t,yt),e=Math.imul(_t,wt),e=e+Math.imul(Mt,yt)|0,l=Math.imul(Mt,wt),u=u+Math.imul(gt,Bt)|0,e=e+Math.imul(gt,Ut)|0,e=e+Math.imul(mt,Bt)|0,l=l+Math.imul(mt,Ut)|0,u=u+Math.imul(rt,Nt)|0,e=e+Math.imul(rt,kt)|0,e=e+Math.imul(st,Nt)|0,l=l+Math.imul(st,kt)|0,u=u+Math.imul(K,Lt)|0,e=e+Math.imul(K,Et)|0,e=e+Math.imul(C,Lt)|0,l=l+Math.imul(C,Et)|0,u=u+Math.imul(tt,St)|0,e=e+Math.imul(tt,At)|0,e=e+Math.imul(Z,St)|0,l=l+Math.imul(Z,At)|0,u=u+Math.imul($,xt)|0,e=e+Math.imul($,Pt)|0,e=e+Math.imul(H,xt)|0,l=l+Math.imul(H,Pt)|0;var We=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(We>>>26)|0,We&=67108863,u=Math.imul(ut,yt),e=Math.imul(ut,wt),e=e+Math.imul(pt,yt)|0,l=Math.imul(pt,wt),u=u+Math.imul(_t,Bt)|0,e=e+Math.imul(_t,Ut)|0,e=e+Math.imul(Mt,Bt)|0,l=l+Math.imul(Mt,Ut)|0,u=u+Math.imul(gt,Nt)|0,e=e+Math.imul(gt,kt)|0,e=e+Math.imul(mt,Nt)|0,l=l+Math.imul(mt,kt)|0,u=u+Math.imul(rt,Lt)|0,e=e+Math.imul(rt,Et)|0,e=e+Math.imul(st,Lt)|0,l=l+Math.imul(st,Et)|0,u=u+Math.imul(K,St)|0,e=e+Math.imul(K,At)|0,e=e+Math.imul(C,St)|0,l=l+Math.imul(C,At)|0,u=u+Math.imul(tt,xt)|0,e=e+Math.imul(tt,Pt)|0,e=e+Math.imul(Z,xt)|0,l=l+Math.imul(Z,Pt)|0,u=u+Math.imul($,Dt)|0,e=e+Math.imul($,Ot)|0,e=e+Math.imul(H,Dt)|0,l=l+Math.imul(H,Ot)|0;var Oe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,u=Math.imul(vt,yt),e=Math.imul(vt,wt),e=e+Math.imul(lt,yt)|0,l=Math.imul(lt,wt),u=u+Math.imul(ut,Bt)|0,e=e+Math.imul(ut,Ut)|0,e=e+Math.imul(pt,Bt)|0,l=l+Math.imul(pt,Ut)|0,u=u+Math.imul(_t,Nt)|0,e=e+Math.imul(_t,kt)|0,e=e+Math.imul(Mt,Nt)|0,l=l+Math.imul(Mt,kt)|0,u=u+Math.imul(gt,Lt)|0,e=e+Math.imul(gt,Et)|0,e=e+Math.imul(mt,Lt)|0,l=l+Math.imul(mt,Et)|0,u=u+Math.imul(rt,St)|0,e=e+Math.imul(rt,At)|0,e=e+Math.imul(st,St)|0,l=l+Math.imul(st,At)|0,u=u+Math.imul(K,xt)|0,e=e+Math.imul(K,Pt)|0,e=e+Math.imul(C,xt)|0,l=l+Math.imul(C,Pt)|0,u=u+Math.imul(tt,Dt)|0,e=e+Math.imul(tt,Ot)|0,e=e+Math.imul(Z,Dt)|0,l=l+Math.imul(Z,Ot)|0,u=u+Math.imul($,Rt)|0,e=e+Math.imul($,It)|0,e=e+Math.imul(H,Rt)|0,l=l+Math.imul(H,It)|0;var Be=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Be>>>26)|0,Be&=67108863,u=Math.imul(ht,yt),e=Math.imul(ht,wt),e=e+Math.imul(dt,yt)|0,l=Math.imul(dt,wt),u=u+Math.imul(vt,Bt)|0,e=e+Math.imul(vt,Ut)|0,e=e+Math.imul(lt,Bt)|0,l=l+Math.imul(lt,Ut)|0,u=u+Math.imul(ut,Nt)|0,e=e+Math.imul(ut,kt)|0,e=e+Math.imul(pt,Nt)|0,l=l+Math.imul(pt,kt)|0,u=u+Math.imul(_t,Lt)|0,e=e+Math.imul(_t,Et)|0,e=e+Math.imul(Mt,Lt)|0,l=l+Math.imul(Mt,Et)|0,u=u+Math.imul(gt,St)|0,e=e+Math.imul(gt,At)|0,e=e+Math.imul(mt,St)|0,l=l+Math.imul(mt,At)|0,u=u+Math.imul(rt,xt)|0,e=e+Math.imul(rt,Pt)|0,e=e+Math.imul(st,xt)|0,l=l+Math.imul(st,Pt)|0,u=u+Math.imul(K,Dt)|0,e=e+Math.imul(K,Ot)|0,e=e+Math.imul(C,Dt)|0,l=l+Math.imul(C,Ot)|0,u=u+Math.imul(tt,Rt)|0,e=e+Math.imul(tt,It)|0,e=e+Math.imul(Z,Rt)|0,l=l+Math.imul(Z,It)|0,u=u+Math.imul($,Ct)|0,e=e+Math.imul($,Tt)|0,e=e+Math.imul(H,Ct)|0,l=l+Math.imul(H,Tt)|0;var Ze=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,u=Math.imul(ct,yt),e=Math.imul(ct,wt),e=e+Math.imul(bt,yt)|0,l=Math.imul(bt,wt),u=u+Math.imul(ht,Bt)|0,e=e+Math.imul(ht,Ut)|0,e=e+Math.imul(dt,Bt)|0,l=l+Math.imul(dt,Ut)|0,u=u+Math.imul(vt,Nt)|0,e=e+Math.imul(vt,kt)|0,e=e+Math.imul(lt,Nt)|0,l=l+Math.imul(lt,kt)|0,u=u+Math.imul(ut,Lt)|0,e=e+Math.imul(ut,Et)|0,e=e+Math.imul(pt,Lt)|0,l=l+Math.imul(pt,Et)|0,u=u+Math.imul(_t,St)|0,e=e+Math.imul(_t,At)|0,e=e+Math.imul(Mt,St)|0,l=l+Math.imul(Mt,At)|0,u=u+Math.imul(gt,xt)|0,e=e+Math.imul(gt,Pt)|0,e=e+Math.imul(mt,xt)|0,l=l+Math.imul(mt,Pt)|0,u=u+Math.imul(rt,Dt)|0,e=e+Math.imul(rt,Ot)|0,e=e+Math.imul(st,Dt)|0,l=l+Math.imul(st,Ot)|0,u=u+Math.imul(K,Rt)|0,e=e+Math.imul(K,It)|0,e=e+Math.imul(C,Rt)|0,l=l+Math.imul(C,It)|0,u=u+Math.imul(tt,Ct)|0,e=e+Math.imul(tt,Tt)|0,e=e+Math.imul(Z,Ct)|0,l=l+Math.imul(Z,Tt)|0,u=u+Math.imul($,Ft)|0,e=e+Math.imul($,$t)|0,e=e+Math.imul(H,Ft)|0,l=l+Math.imul(H,$t)|0;var Ne=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u=Math.imul(ct,Bt),e=Math.imul(ct,Ut),e=e+Math.imul(bt,Bt)|0,l=Math.imul(bt,Ut),u=u+Math.imul(ht,Nt)|0,e=e+Math.imul(ht,kt)|0,e=e+Math.imul(dt,Nt)|0,l=l+Math.imul(dt,kt)|0,u=u+Math.imul(vt,Lt)|0,e=e+Math.imul(vt,Et)|0,e=e+Math.imul(lt,Lt)|0,l=l+Math.imul(lt,Et)|0,u=u+Math.imul(ut,St)|0,e=e+Math.imul(ut,At)|0,e=e+Math.imul(pt,St)|0,l=l+Math.imul(pt,At)|0,u=u+Math.imul(_t,xt)|0,e=e+Math.imul(_t,Pt)|0,e=e+Math.imul(Mt,xt)|0,l=l+Math.imul(Mt,Pt)|0,u=u+Math.imul(gt,Dt)|0,e=e+Math.imul(gt,Ot)|0,e=e+Math.imul(mt,Dt)|0,l=l+Math.imul(mt,Ot)|0,u=u+Math.imul(rt,Rt)|0,e=e+Math.imul(rt,It)|0,e=e+Math.imul(st,Rt)|0,l=l+Math.imul(st,It)|0,u=u+Math.imul(K,Ct)|0,e=e+Math.imul(K,Tt)|0,e=e+Math.imul(C,Ct)|0,l=l+Math.imul(C,Tt)|0,u=u+Math.imul(tt,Ft)|0,e=e+Math.imul(tt,$t)|0,e=e+Math.imul(Z,Ft)|0,l=l+Math.imul(Z,$t)|0;var Je=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Je>>>26)|0,Je&=67108863,u=Math.imul(ct,Nt),e=Math.imul(ct,kt),e=e+Math.imul(bt,Nt)|0,l=Math.imul(bt,kt),u=u+Math.imul(ht,Lt)|0,e=e+Math.imul(ht,Et)|0,e=e+Math.imul(dt,Lt)|0,l=l+Math.imul(dt,Et)|0,u=u+Math.imul(vt,St)|0,e=e+Math.imul(vt,At)|0,e=e+Math.imul(lt,St)|0,l=l+Math.imul(lt,At)|0,u=u+Math.imul(ut,xt)|0,e=e+Math.imul(ut,Pt)|0,e=e+Math.imul(pt,xt)|0,l=l+Math.imul(pt,Pt)|0,u=u+Math.imul(_t,Dt)|0,e=e+Math.imul(_t,Ot)|0,e=e+Math.imul(Mt,Dt)|0,l=l+Math.imul(Mt,Ot)|0,u=u+Math.imul(gt,Rt)|0,e=e+Math.imul(gt,It)|0,e=e+Math.imul(mt,Rt)|0,l=l+Math.imul(mt,It)|0,u=u+Math.imul(rt,Ct)|0,e=e+Math.imul(rt,Tt)|0,e=e+Math.imul(st,Ct)|0,l=l+Math.imul(st,Tt)|0,u=u+Math.imul(K,Ft)|0,e=e+Math.imul(K,$t)|0,e=e+Math.imul(C,Ft)|0,l=l+Math.imul(C,$t)|0;var Ye=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,u=Math.imul(ct,Lt),e=Math.imul(ct,Et),e=e+Math.imul(bt,Lt)|0,l=Math.imul(bt,Et),u=u+Math.imul(ht,St)|0,e=e+Math.imul(ht,At)|0,e=e+Math.imul(dt,St)|0,l=l+Math.imul(dt,At)|0,u=u+Math.imul(vt,xt)|0,e=e+Math.imul(vt,Pt)|0,e=e+Math.imul(lt,xt)|0,l=l+Math.imul(lt,Pt)|0,u=u+Math.imul(ut,Dt)|0,e=e+Math.imul(ut,Ot)|0,e=e+Math.imul(pt,Dt)|0,l=l+Math.imul(pt,Ot)|0,u=u+Math.imul(_t,Rt)|0,e=e+Math.imul(_t,It)|0,e=e+Math.imul(Mt,Rt)|0,l=l+Math.imul(Mt,It)|0,u=u+Math.imul(gt,Ct)|0,e=e+Math.imul(gt,Tt)|0,e=e+Math.imul(mt,Ct)|0,l=l+Math.imul(mt,Tt)|0,u=u+Math.imul(rt,Ft)|0,e=e+Math.imul(rt,$t)|0,e=e+Math.imul(st,Ft)|0,l=l+Math.imul(st,$t)|0;var qe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(qe>>>26)|0,qe&=67108863,u=Math.imul(ct,St),e=Math.imul(ct,At),e=e+Math.imul(bt,St)|0,l=Math.imul(bt,At),u=u+Math.imul(ht,xt)|0,e=e+Math.imul(ht,Pt)|0,e=e+Math.imul(dt,xt)|0,l=l+Math.imul(dt,Pt)|0,u=u+Math.imul(vt,Dt)|0,e=e+Math.imul(vt,Ot)|0,e=e+Math.imul(lt,Dt)|0,l=l+Math.imul(lt,Ot)|0,u=u+Math.imul(ut,Rt)|0,e=e+Math.imul(ut,It)|0,e=e+Math.imul(pt,Rt)|0,l=l+Math.imul(pt,It)|0,u=u+Math.imul(_t,Ct)|0,e=e+Math.imul(_t,Tt)|0,e=e+Math.imul(Mt,Ct)|0,l=l+Math.imul(Mt,Tt)|0,u=u+Math.imul(gt,Ft)|0,e=e+Math.imul(gt,$t)|0,e=e+Math.imul(mt,Ft)|0,l=l+Math.imul(mt,$t)|0;var $e=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+($e>>>26)|0,$e&=67108863,u=Math.imul(ct,xt),e=Math.imul(ct,Pt),e=e+Math.imul(bt,xt)|0,l=Math.imul(bt,Pt),u=u+Math.imul(ht,Dt)|0,e=e+Math.imul(ht,Ot)|0,e=e+Math.imul(dt,Dt)|0,l=l+Math.imul(dt,Ot)|0,u=u+Math.imul(vt,Rt)|0,e=e+Math.imul(vt,It)|0,e=e+Math.imul(lt,Rt)|0,l=l+Math.imul(lt,It)|0,u=u+Math.imul(ut,Ct)|0,e=e+Math.imul(ut,Tt)|0,e=e+Math.imul(pt,Ct)|0,l=l+Math.imul(pt,Tt)|0,u=u+Math.imul(_t,Ft)|0,e=e+Math.imul(_t,$t)|0,e=e+Math.imul(Mt,Ft)|0,l=l+Math.imul(Mt,$t)|0;var ze=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(ze>>>26)|0,ze&=67108863,u=Math.imul(ct,Dt),e=Math.imul(ct,Ot),e=e+Math.imul(bt,Dt)|0,l=Math.imul(bt,Ot),u=u+Math.imul(ht,Rt)|0,e=e+Math.imul(ht,It)|0,e=e+Math.imul(dt,Rt)|0,l=l+Math.imul(dt,It)|0,u=u+Math.imul(vt,Ct)|0,e=e+Math.imul(vt,Tt)|0,e=e+Math.imul(lt,Ct)|0,l=l+Math.imul(lt,Tt)|0,u=u+Math.imul(ut,Ft)|0,e=e+Math.imul(ut,$t)|0,e=e+Math.imul(pt,Ft)|0,l=l+Math.imul(pt,$t)|0;var De=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(De>>>26)|0,De&=67108863,u=Math.imul(ct,Rt),e=Math.imul(ct,It),e=e+Math.imul(bt,Rt)|0,l=Math.imul(bt,It),u=u+Math.imul(ht,Ct)|0,e=e+Math.imul(ht,Tt)|0,e=e+Math.imul(dt,Ct)|0,l=l+Math.imul(dt,Tt)|0,u=u+Math.imul(vt,Ft)|0,e=e+Math.imul(vt,$t)|0,e=e+Math.imul(lt,Ft)|0,l=l+Math.imul(lt,$t)|0;var Xe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,u=Math.imul(ct,Ct),e=Math.imul(ct,Tt),e=e+Math.imul(bt,Ct)|0,l=Math.imul(bt,Tt),u=u+Math.imul(ht,Ft)|0,e=e+Math.imul(ht,$t)|0,e=e+Math.imul(dt,Ft)|0,l=l+Math.imul(dt,$t)|0;var Qe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,u=Math.imul(ct,Ft),e=Math.imul(ct,$t),e=e+Math.imul(bt,Ft)|0,l=Math.imul(bt,$t);var tr=(y+u|0)+((e&8191)<<13)|0;return y=(l+(e>>>13)|0)+(tr>>>26)|0,tr&=67108863,m[0]=Se,m[1]=He,m[2]=Ke,m[3]=Ve,m[4]=Ge,m[5]=We,m[6]=Oe,m[7]=Be,m[8]=Ze,m[9]=Ne,m[10]=Je,m[11]=Ye,m[12]=qe,m[13]=$e,m[14]=ze,m[15]=De,m[16]=Xe,m[17]=Qe,m[18]=tr,y!==0&&(m[19]=y,n.length++),n};Math.imul||(O=I);function N(v,t,r){r.negative=t.negative^v.negative,r.length=v.length+t.length;for(var n=0,o=0,d=0;d<r.length-1;d++){var m=o;o=0;for(var y=n&67108863,u=Math.min(d,t.length-1),e=Math.max(0,d-v.length+1);e<=u;e++){var l=d-e,z=v.words[l]|0,$=t.words[e]|0,H=z*$,W=H&67108863;m=m+(H/67108864|0)|0,W=W+y|0,y=W&67108863,m=m+(W>>>26)|0,o+=m>>>26,m&=67108863}r.words[d]=y,n=m,m=o}return n!==0?r.words[d]=n:r.length--,r.strip()}function L(v,t,r){var n=new R;return n.mulp(v,t,r)}s.prototype.mulTo=function(t,r){var n,o=this.length+t.length;return this.length===10&&t.length===10?n=O(this,t,r):o<63?n=I(this,t,r):o<1024?n=N(this,t,r):n=L(this,t,r),n};function R(v,t){this.x=v,this.y=t}R.prototype.makeRBT=function(t){for(var r=new Array(t),n=s.prototype._countBits(t)-1,o=0;o<t;o++)r[o]=this.revBin(o,n,t);return r},R.prototype.revBin=function(t,r,n){if(t===0||t===n-1)return t;for(var o=0,d=0;d<r;d++)o|=(t&1)<<r-d-1,t>>=1;return o},R.prototype.permute=function(t,r,n,o,d,m){for(var y=0;y<m;y++)o[y]=r[t[y]],d[y]=n[t[y]]},R.prototype.transform=function(t,r,n,o,d,m){this.permute(m,t,r,n,o,d);for(var y=1;y<d;y<<=1)for(var u=y<<1,e=Math.cos(2*Math.PI/u),l=Math.sin(2*Math.PI/u),z=0;z<d;z+=u)for(var $=e,H=l,W=0;W<y;W++){var tt=n[z+W],Z=o[z+W],et=n[z+W+y],K=o[z+W+y],C=$*et-H*K;K=$*K+H*et,et=C,n[z+W]=tt+et,o[z+W]=Z+K,n[z+W+y]=tt-et,o[z+W+y]=Z-K,W!==u&&(C=e*$-l*H,H=e*H+l*$,$=C)}},R.prototype.guessLen13b=function(t,r){var n=Math.max(r,t)|1,o=n&1,d=0;for(n=n/2|0;n;n=n>>>1)d++;return 1<<d+1+o},R.prototype.conjugate=function(t,r,n){if(!(n<=1))for(var o=0;o<n/2;o++){var d=t[o];t[o]=t[n-o-1],t[n-o-1]=d,d=r[o],r[o]=-r[n-o-1],r[n-o-1]=-d}},R.prototype.normalize13b=function(t,r){for(var n=0,o=0;o<r/2;o++){var d=Math.round(t[2*o+1]/r)*8192+Math.round(t[2*o]/r)+n;t[o]=d&67108863,d<67108864?n=0:n=d/67108864|0}return t},R.prototype.convert13b=function(t,r,n,o){for(var d=0,m=0;m<r;m++)d=d+(t[m]|0),n[2*m]=d&8191,d=d>>>13,n[2*m+1]=d&8191,d=d>>>13;for(m=2*r;m<o;++m)n[m]=0;h(d===0),h((d&-8192)===0)},R.prototype.stub=function(t){for(var r=new Array(t),n=0;n<t;n++)r[n]=0;return r},R.prototype.mulp=function(t,r,n){var o=2*this.guessLen13b(t.length,r.length),d=this.makeRBT(o),m=this.stub(o),y=new Array(o),u=new Array(o),e=new Array(o),l=new Array(o),z=new Array(o),$=new Array(o),H=n.words;H.length=o,this.convert13b(t.words,t.length,y,o),this.convert13b(r.words,r.length,l,o),this.transform(y,m,u,e,o,d),this.transform(l,m,z,$,o,d);for(var W=0;W<o;W++){var tt=u[W]*z[W]-e[W]*$[W];e[W]=u[W]*$[W]+e[W]*z[W],u[W]=tt}return this.conjugate(u,e,o),this.transform(u,e,H,m,o,d),this.conjugate(H,m,o),this.normalize13b(H,o),n.negative=t.negative^r.negative,n.length=t.length+r.length,n.strip()},s.prototype.mul=function(t){var r=new s(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},s.prototype.mulf=function(t){var r=new s(null);return r.words=new Array(this.length+t.length),L(this,t,r)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){h(typeof t=="number"),h(t<67108864);for(var r=0,n=0;n<this.length;n++){var o=(this.words[n]|0)*t,d=(o&67108863)+(r&67108863);r>>=26,r+=o/67108864|0,r+=d>>>26,this.words[n]=d&67108863}return r!==0&&(this.words[n]=r,this.length++),this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var r=D(t);if(r.length===0)return new s(1);for(var n=this,o=0;o<r.length&&r[o]===0;o++,n=n.sqr());if(++o<r.length)for(var d=n.sqr();o<r.length;o++,d=d.sqr())r[o]!==0&&(n=n.mul(d));return n},s.prototype.iushln=function(t){h(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r,d;if(r!==0){var m=0;for(d=0;d<this.length;d++){var y=this.words[d]&o,u=(this.words[d]|0)-y<<r;this.words[d]=u|m,m=y>>>26-r}m&&(this.words[d]=m,this.length++)}if(n!==0){for(d=this.length-1;d>=0;d--)this.words[d+n]=this.words[d];for(d=0;d<n;d++)this.words[d]=0;this.length+=n}return this.strip()},s.prototype.ishln=function(t){return h(this.negative===0),this.iushln(t)},s.prototype.iushrn=function(t,r,n){h(typeof t=="number"&&t>=0);var o;r?o=(r-r%26)/26:o=0;var d=t%26,m=Math.min((t-d)/26,this.length),y=67108863^67108863>>>d<<d,u=n;if(o-=m,o=Math.max(0,o),u){for(var e=0;e<m;e++)u.words[e]=this.words[e];u.length=m}if(m!==0)if(this.length>m)for(this.length-=m,e=0;e<this.length;e++)this.words[e]=this.words[e+m];else this.words[0]=0,this.length=1;var l=0;for(e=this.length-1;e>=0&&(l!==0||e>=o);e--){var z=this.words[e]|0;this.words[e]=l<<26-d|z>>>d,l=z&y}return u&&l!==0&&(u.words[u.length++]=l),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(t,r,n){return h(this.negative===0),this.iushrn(t,r,n)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){h(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26,o=1<<r;if(this.length<=n)return!1;var d=this.words[n];return!!(d&o)},s.prototype.imaskn=function(t){h(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26;if(h(this.negative===0,"imaskn works only with positive numbers"),this.length<=n)return this;if(r!==0&&n++,this.length=Math.min(n,this.length),r!==0){var o=67108863^67108863>>>r<<r;this.words[this.length-1]&=o}return this.strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return h(typeof t=="number"),h(t<67108864),t<0?this.isubn(-t):this.negative!==0?this.length===1&&(this.words[0]|0)<t?(this.words[0]=t-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},s.prototype.isubn=function(t){if(h(typeof t=="number"),h(t<67108864),t<0)return this.iaddn(-t);if(this.negative!==0)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,r,n){var o=t.length+n,d;this._expand(o);var m,y=0;for(d=0;d<t.length;d++){m=(this.words[d+n]|0)+y;var u=(t.words[d]|0)*r;m-=u&67108863,y=(m>>26)-(u/67108864|0),this.words[d+n]=m&67108863}for(;d<this.length-n;d++)m=(this.words[d+n]|0)+y,y=m>>26,this.words[d+n]=m&67108863;if(y===0)return this.strip();for(h(y===-1),y=0,d=0;d<this.length;d++)m=-(this.words[d]|0)+y,y=m>>26,this.words[d]=m&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(t,r){var n=this.length-t.length,o=this.clone(),d=t,m=d.words[d.length-1]|0,y=this._countBits(m);n=26-y,n!==0&&(d=d.ushln(n),o.iushln(n),m=d.words[d.length-1]|0);var u=o.length-d.length,e;if(r!=="mod"){e=new s(null),e.length=u+1,e.words=new Array(e.length);for(var l=0;l<e.length;l++)e.words[l]=0}var z=o.clone()._ishlnsubmul(d,1,u);z.negative===0&&(o=z,e&&(e.words[u]=1));for(var $=u-1;$>=0;$--){var H=(o.words[d.length+$]|0)*67108864+(o.words[d.length+$-1]|0);for(H=Math.min(H/m|0,67108863),o._ishlnsubmul(d,H,$);o.negative!==0;)H--,o.negative=0,o._ishlnsubmul(d,1,$),o.isZero()||(o.negative^=1);e&&(e.words[$]=H)}return e&&e.strip(),o.strip(),r!=="div"&&n!==0&&o.iushrn(n),{div:e||null,mod:o}},s.prototype.divmod=function(t,r,n){if(h(!t.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var o,d,m;return this.negative!==0&&t.negative===0?(m=this.neg().divmod(t,r),r!=="mod"&&(o=m.div.neg()),r!=="div"&&(d=m.mod.neg(),n&&d.negative!==0&&d.iadd(t)),{div:o,mod:d}):this.negative===0&&t.negative!==0?(m=this.divmod(t.neg(),r),r!=="mod"&&(o=m.div.neg()),{div:o,mod:m.mod}):this.negative&t.negative?(m=this.neg().divmod(t.neg(),r),r!=="div"&&(d=m.mod.neg(),n&&d.negative!==0&&d.isub(t)),{div:m.div,mod:d}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:t.length===1?r==="div"?{div:this.divn(t.words[0]),mod:null}:r==="mod"?{div:null,mod:new s(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modn(t.words[0]))}:this._wordDiv(t,r)},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=r.div.negative!==0?r.mod.isub(t):r.mod,o=t.ushrn(1),d=t.andln(1),m=n.cmp(o);return m<0||d===1&&m===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},s.prototype.modn=function(t){h(t<=67108863);for(var r=(1<<26)%t,n=0,o=this.length-1;o>=0;o--)n=(r*n+(this.words[o]|0))%t;return n},s.prototype.idivn=function(t){h(t<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var o=(this.words[n]|0)+r*67108864;this.words[n]=o/t|0,r=o%t}return this.strip()},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){h(t.negative===0),h(!t.isZero());var r=this,n=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var o=new s(1),d=new s(0),m=new s(0),y=new s(1),u=0;r.isEven()&&n.isEven();)r.iushrn(1),n.iushrn(1),++u;for(var e=n.clone(),l=r.clone();!r.isZero();){for(var z=0,$=1;!(r.words[0]&$)&&z<26;++z,$<<=1);if(z>0)for(r.iushrn(z);z-- >0;)(o.isOdd()||d.isOdd())&&(o.iadd(e),d.isub(l)),o.iushrn(1),d.iushrn(1);for(var H=0,W=1;!(n.words[0]&W)&&H<26;++H,W<<=1);if(H>0)for(n.iushrn(H);H-- >0;)(m.isOdd()||y.isOdd())&&(m.iadd(e),y.isub(l)),m.iushrn(1),y.iushrn(1);r.cmp(n)>=0?(r.isub(n),o.isub(m),d.isub(y)):(n.isub(r),m.isub(o),y.isub(d))}return{a:m,b:y,gcd:n.iushln(u)}},s.prototype._invmp=function(t){h(t.negative===0),h(!t.isZero());var r=this,n=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var o=new s(1),d=new s(0),m=n.clone();r.cmpn(1)>0&&n.cmpn(1)>0;){for(var y=0,u=1;!(r.words[0]&u)&&y<26;++y,u<<=1);if(y>0)for(r.iushrn(y);y-- >0;)o.isOdd()&&o.iadd(m),o.iushrn(1);for(var e=0,l=1;!(n.words[0]&l)&&e<26;++e,l<<=1);if(e>0)for(n.iushrn(e);e-- >0;)d.isOdd()&&d.iadd(m),d.iushrn(1);r.cmp(n)>=0?(r.isub(n),o.isub(d)):(n.isub(r),d.isub(o))}var z;return r.cmpn(1)===0?z=o:z=d,z.cmpn(0)<0&&z.iadd(t),z},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),n=t.clone();r.negative=0,n.negative=0;for(var o=0;r.isEven()&&n.isEven();o++)r.iushrn(1),n.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;n.isEven();)n.iushrn(1);var d=r.cmp(n);if(d<0){var m=r;r=n,n=m}else if(d===0||n.cmpn(1)===0)break;r.isub(n)}while(!0);return n.iushln(o)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){h(typeof t=="number");var r=t%26,n=(t-r)/26,o=1<<r;if(this.length<=n)return this._expand(n+1),this.words[n]|=o,this;for(var d=o,m=n;d!==0&&m<this.length;m++){var y=this.words[m]|0;y+=d,d=y>>>26,y&=67108863,this.words[m]=y}return d!==0&&(this.words[m]=d,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(t){var r=t<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var n;if(this.length>1)n=1;else{r&&(t=-t),h(t<=67108863,"Number is too big");var o=this.words[0]|0;n=o===t?0:o<t?-1:1}return this.negative!==0?-n|0:n},s.prototype.cmp=function(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);return this.negative!==0?-r|0:r},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,n=this.length-1;n>=0;n--){var o=this.words[n]|0,d=t.words[n]|0;if(o!==d){o<d?r=-1:o>d&&(r=1);break}}return r},s.prototype.gtn=function(t){return this.cmpn(t)===1},s.prototype.gt=function(t){return this.cmp(t)===1},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return this.cmpn(t)===-1},s.prototype.lt=function(t){return this.cmp(t)===-1},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return this.cmpn(t)===0},s.prototype.eq=function(t){return this.cmp(t)===0},s.red=function(t){return new G(t)},s.prototype.toRed=function(t){return h(!this.red,"Already a number in reduction context"),h(this.negative===0,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return h(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return h(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return h(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return h(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return h(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return h(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return h(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return h(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return h(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return h(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return h(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return h(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return h(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return h(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return h(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var B={k256:null,p224:null,p192:null,p25519:null};function T(v,t){this.name=v,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}T.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},T.prototype.ireduce=function(t){var r=t,n;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),n=r.bitLength();while(n>this.n);var o=n<this.n?-1:r.ucmp(this.p);return o===0?(r.words[0]=0,r.length=1):o>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},T.prototype.split=function(t,r){t.iushrn(this.n,0,r)},T.prototype.imulK=function(t){return t.imul(this.k)};function U(){T.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}g(U,T),U.prototype.split=function(t,r){for(var n=4194303,o=Math.min(t.length,9),d=0;d<o;d++)r.words[d]=t.words[d];if(r.length=o,t.length<=9){t.words[0]=0,t.length=1;return}var m=t.words[9];for(r.words[r.length++]=m&n,d=10;d<t.length;d++){var y=t.words[d]|0;t.words[d-10]=(y&n)<<4|m>>>22,m=y}m>>>=22,t.words[d-10]=m,m===0&&t.length>10?t.length-=10:t.length-=9},U.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,n=0;n<t.length;n++){var o=t.words[n]|0;r+=o*977,t.words[n]=r&67108863,r=o*64+(r/67108864|0)}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t};function k(){T.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}g(k,T);function P(){T.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}g(P,T);function F(){T.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}g(F,T),F.prototype.imulK=function(t){for(var r=0,n=0;n<t.length;n++){var o=(t.words[n]|0)*19+r,d=o&67108863;o>>>=26,t.words[n]=d,r=o}return r!==0&&(t.words[t.length++]=r),t},s._prime=function(t){if(B[t])return B[t];var r;if(t==="k256")r=new U;else if(t==="p224")r=new k;else if(t==="p192")r=new P;else if(t==="p25519")r=new F;else throw new Error("Unknown prime "+t);return B[t]=r,r};function G(v){if(typeof v=="string"){var t=s._prime(v);this.m=t.p,this.prime=t}else h(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}G.prototype._verify1=function(t){h(t.negative===0,"red works only with positives"),h(t.red,"red works only with red numbers")},G.prototype._verify2=function(t,r){h((t.negative|r.negative)===0,"red works only with positives"),h(t.red&&t.red===r.red,"red works only with red numbers")},G.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},G.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},G.prototype.add=function(t,r){this._verify2(t,r);var n=t.add(r);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},G.prototype.iadd=function(t,r){this._verify2(t,r);var n=t.iadd(r);return n.cmp(this.m)>=0&&n.isub(this.m),n},G.prototype.sub=function(t,r){this._verify2(t,r);var n=t.sub(r);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},G.prototype.isub=function(t,r){this._verify2(t,r);var n=t.isub(r);return n.cmpn(0)<0&&n.iadd(this.m),n},G.prototype.shl=function(t,r){return this._verify1(t),this.imod(t.ushln(r))},G.prototype.imul=function(t,r){return this._verify2(t,r),this.imod(t.imul(r))},G.prototype.mul=function(t,r){return this._verify2(t,r),this.imod(t.mul(r))},G.prototype.isqr=function(t){return this.imul(t,t.clone())},G.prototype.sqr=function(t){return this.mul(t,t)},G.prototype.sqrt=function(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(h(r%2===1),r===3){var n=this.m.add(new s(1)).iushrn(2);return this.pow(t,n)}for(var o=this.m.subn(1),d=0;!o.isZero()&&o.andln(1)===0;)d++,o.iushrn(1);h(!o.isZero());var m=new s(1).toRed(this),y=m.redNeg(),u=this.m.subn(1).iushrn(1),e=this.m.bitLength();for(e=new s(2*e*e).toRed(this);this.pow(e,u).cmp(y)!==0;)e.redIAdd(y);for(var l=this.pow(e,o),z=this.pow(t,o.addn(1).iushrn(1)),$=this.pow(t,o),H=d;$.cmp(m)!==0;){for(var W=$,tt=0;W.cmp(m)!==0;tt++)W=W.redSqr();h(tt<H);var Z=this.pow(l,new s(1).iushln(H-tt-1));z=z.redMul(Z),l=Z.redSqr(),$=$.redMul(l),H=tt}return z},G.prototype.invm=function(t){var r=t._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},G.prototype.pow=function(t,r){if(r.isZero())return new s(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var n=4,o=new Array(1<<n);o[0]=new s(1).toRed(this),o[1]=t;for(var d=2;d<o.length;d++)o[d]=this.mul(o[d-1],t);var m=o[0],y=0,u=0,e=r.bitLength()%26;for(e===0&&(e=26),d=r.length-1;d>=0;d--){for(var l=r.words[d],z=e-1;z>=0;z--){var $=l>>z&1;if(m!==o[0]&&(m=this.sqr(m)),$===0&&y===0){u=0;continue}y<<=1,y|=$,u++,!(u!==n&&(d!==0||z!==0))&&(m=this.mul(m,o[y]),u=0,y=0)}e=26}return m},G.prototype.convertTo=function(t){var r=t.umod(this.m);return r===t?r.clone():r},G.prototype.convertFrom=function(t){var r=t.clone();return r.red=null,r},s.mont=function(t){return new nt(t)};function nt(v){G.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g(nt,G),nt.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},nt.prototype.convertFrom=function(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},nt.prototype.imul=function(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(r),o=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=n.isub(o).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.mul=function(t,r){if(t.isZero()||r.isZero())return new s(0)._forceRed(this);var n=t.mul(r),o=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=n.isub(o).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.invm=function(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(c,Ee)}(po)),po.exports}var oo={exports:{}},ip;function Tu(){if(ip)return oo.exports;ip=1;var c;oo.exports=function(g){return c||(c=new i(null)),c.generate(g)};function i(h){this.rand=h}if(oo.exports.Rand=i,i.prototype.generate=function(g){return this._rand(g)},i.prototype._rand=function(g){if(this.rand.getBytes)return this.rand.getBytes(g);for(var s=new Uint8Array(g),x=0;x<s.length;x++)s[x]=this.rand.getByte();return s},typeof self=="object")self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(g){var s=new Uint8Array(g);return self.crypto.getRandomValues(s),s}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(g){var s=new Uint8Array(g);return self.msCrypto.getRandomValues(s),s}:typeof window=="object"&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var a=Ig();if(typeof a.randomBytes!="function")throw new Error("Not supported");i.prototype._rand=function(g){return a.randomBytes(g)}}catch{}return oo.exports}var Nh,np;function pg(){if(np)return Nh;np=1;var c=q4(),i=Tu();function a(h){this.rand=h||new i.Rand}return Nh=a,a.create=function(g){return new a(g)},a.prototype._randbelow=function(g){var s=g.bitLength(),x=Math.ceil(s/8);do var w=new c(this.rand.generate(x));while(w.cmp(g)>=0);return w},a.prototype._randrange=function(g,s){var x=s.sub(g);return g.add(this._randbelow(x))},a.prototype.test=function(g,s,x){var w=g.bitLength(),_=c.mont(g),M=new c(1).toRed(_);s||(s=Math.max(1,w/48|0));for(var b=g.subn(1),S=0;!b.testn(S);S++);for(var E=g.shrn(S),D=b.toRed(_),I=!0;s>0;s--){var O=this._randrange(new c(2),b);x&&x(O);var N=O.toRed(_).redPow(E);if(!(N.cmp(M)===0||N.cmp(D)===0)){for(var L=1;L<S;L++){if(N=N.redSqr(),N.cmp(M)===0)return!1;if(N.cmp(D)===0)break}if(L===S)return!1}}return I},a.prototype.getDivisor=function(g,s){var x=g.bitLength(),w=c.mont(g),_=new c(1).toRed(w);s||(s=Math.max(1,x/48|0));for(var M=g.subn(1),b=0;!M.testn(b);b++);for(var S=g.shrn(b),E=M.toRed(w);s>0;s--){var D=this._randrange(new c(2),M),I=g.gcd(D);if(I.cmpn(1)!==0)return I;var O=D.toRed(w).redPow(S);if(!(O.cmp(_)===0||O.cmp(E)===0)){for(var N=1;N<b;N++){if(O=O.redSqr(),O.cmp(_)===0)return O.fromRed().subn(1).gcd(g);if(O.cmp(E)===0)break}if(N===b)return O=O.redSqr(),O.fromRed().subn(1).gcd(g)}}return!1},Nh}var qh,sp;function vg(){if(sp)return qh;sp=1;var c=as();qh=N,N.simpleSieve=I,N.fermatTest=O;var i=dg(),a=new i(24),h=pg(),g=new h,s=new i(1),x=new i(2),w=new i(5);new i(16),new i(8);var _=new i(10),M=new i(3);new i(7);var b=new i(11),S=new i(4);new i(12);var E=null;function D(){if(E!==null)return E;var L=1048576,R=[];R[0]=2;for(var B=1,T=3;T<L;T+=2){for(var U=Math.ceil(Math.sqrt(T)),k=0;k<B&&R[k]<=U&&T%R[k]!==0;k++);B!==k&&R[k]<=U||(R[B++]=T)}return E=R,R}function I(L){for(var R=D(),B=0;B<R.length;B++)if(L.modn(R[B])===0)return L.cmpn(R[B])===0;return!0}function O(L){var R=i.mont(L);return x.toRed(R).redPow(L.subn(1)).fromRed().cmpn(1)===0}function N(L,R){if(L<16)return R===2||R===5?new i([140,123]):new i([140,39]);R=new i(R);for(var B,T;;){for(B=new i(c(Math.ceil(L/8)));B.bitLength()>L;)B.ishrn(1);if(B.isEven()&&B.iadd(s),B.testn(1)||B.iadd(x),R.cmp(x)){if(!R.cmp(w))for(;B.mod(_).cmp(M);)B.iadd(S)}else for(;B.mod(a).cmp(b);)B.iadd(S);if(T=B.shrn(1),I(T)&&I(B)&&O(T)&&O(B)&&g.test(T)&&g.test(B))return B}}return qh}const U4={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},k4={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},L4={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},F4={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},$4={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},z4={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},j4={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},H4={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},K4={modp1:U4,modp2:k4,modp5:L4,modp14:F4,modp15:$4,modp16:z4,modp17:j4,modp18:H4};var Uh,ap;function V4(){if(ap)return Uh;ap=1;var c=dg(),i=pg(),a=new i,h=new c(24),g=new c(11),s=new c(10),x=new c(3),w=new c(7),_=vg(),M=as();Uh=I;function b(N,L){return L=L||"utf8",ke.isBuffer(N)||(N=new ke(N,L)),this._pub=new c(N),this}function S(N,L){return L=L||"utf8",ke.isBuffer(N)||(N=new ke(N,L)),this._priv=new c(N),this}var E={};function D(N,L){var R=L.toString("hex"),B=[R,N.toString(16)].join("_");if(B in E)return E[B];var T=0;if(N.isEven()||!_.simpleSieve||!_.fermatTest(N)||!a.test(N))return T+=1,R==="02"||R==="05"?T+=8:T+=4,E[B]=T,T;a.test(N.shrn(1))||(T+=2);var U;switch(R){case"02":N.mod(h).cmp(g)&&(T+=8);break;case"05":U=N.mod(s),U.cmp(x)&&U.cmp(w)&&(T+=8);break;default:T+=4}return E[B]=T,T}function I(N,L,R){this.setGenerator(L),this.__prime=new c(N),this._prime=c.mont(this.__prime),this._primeLen=N.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,R?(this.setPublicKey=b,this.setPrivateKey=S):this._primeCode=8}Object.defineProperty(I.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=D(this.__prime,this.__gen)),this._primeCode}}),I.prototype.generateKeys=function(){return this._priv||(this._priv=new c(M(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},I.prototype.computeSecret=function(N){N=new c(N),N=N.toRed(this._prime);var L=N.redPow(this._priv).fromRed(),R=new ke(L.toArray()),B=this.getPrime();if(R.length<B.length){var T=new ke(B.length-R.length);T.fill(0),R=ke.concat([T,R])}return R},I.prototype.getPublicKey=function(L){return O(this._pub,L)},I.prototype.getPrivateKey=function(L){return O(this._priv,L)},I.prototype.getPrime=function(N){return O(this.__prime,N)},I.prototype.getGenerator=function(N){return O(this._gen,N)},I.prototype.setGenerator=function(N,L){return L=L||"utf8",ke.isBuffer(N)||(N=new ke(N,L)),this.__gen=N,this._gen=new c(N),this};function O(N,L){var R=new ke(N.toArray());return L?R.toString(L):R}return Uh}var op;function G4(){if(op)return Sn;op=1;var c=vg(),i=K4,a=V4();function h(x){var w=new ke(i[x].prime,"hex"),_=new ke(i[x].gen,"hex");return new a(w,_)}var g={binary:!0,hex:!0,base64:!0};function s(x,w,_,M){return ke.isBuffer(w)||g[w]===void 0?s(x,"binary",w,_):(w=w||"binary",M=M||"binary",_=_||new ke([2]),ke.isBuffer(_)||(_=new ke(_,M)),typeof x=="number"?new a(c(x,_),_,!0):(ke.isBuffer(x)||(x=new ke(x,w)),new a(x,_,!0)))}return Sn.DiffieHellmanGroup=Sn.createDiffieHellmanGroup=Sn.getDiffieHellman=h,Sn.createDiffieHellman=Sn.DiffieHellman=s,Sn}var Ds={exports:{}},kh,fp;function Bu(){if(fp)return kh;fp=1;var c=vu,i=as();function a(s){var x=h(s),w=x.toRed(c.mont(s.modulus)).redPow(new c(s.publicExponent)).fromRed();return{blinder:w,unblinder:x.invm(s.modulus)}}function h(s){var x=s.modulus.byteLength(),w;do w=new c(i(x));while(w.cmp(s.modulus)>=0||!w.umod(s.prime1)||!w.umod(s.prime2));return w}function g(s,x){var w=a(x),_=x.modulus.byteLength(),M=new c(s).mul(w.blinder).umod(x.modulus),b=M.toRed(c.mont(x.prime1)),S=M.toRed(c.mont(x.prime2)),E=x.coefficient,D=x.prime1,I=x.prime2,O=b.redPow(x.exponent1).fromRed(),N=S.redPow(x.exponent2).fromRed(),L=O.isub(N).imul(E).umod(D).imul(I);return N.iadd(L).imul(w.unblinder).umod(x.modulus).toArrayLike(ke,"be",_)}return g.getr=h,kh=g,kh}var Lh={};const W4="elliptic",Z4="6.5.4",J4="EC cryptography",Y4="lib/elliptic.js",X4=["lib"],Q4={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},t_={type:"git",url:"git@github.com:indutny/elliptic"},e_=["EC","Elliptic","curve","Cryptography"],r_="Fedor Indutny <fedor@indutny.com>",i_="MIT",n_={url:"https://github.com/indutny/elliptic/issues"},s_="https://github.com/indutny/elliptic",a_={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},o_={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},f_={name:W4,version:Z4,description:J4,main:Y4,files:X4,scripts:Q4,repository:t_,keywords:e_,author:r_,license:i_,bugs:n_,homepage:s_,devDependencies:a_,dependencies:o_};var Fh={},vo={exports:{}};vo.exports;var hp;function Vi(){return hp||(hp=1,function(c){(function(i,a){function h(v,t){if(!v)throw new Error(t||"Assertion failed")}function g(v,t){v.super_=t;var r=function(){};r.prototype=t.prototype,v.prototype=new r,v.prototype.constructor=v}function s(v,t,r){if(s.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((t==="le"||t==="be")&&(r=t,t=10),this._init(v||0,t||10,r||"be"))}typeof i=="object"?i.exports=s:a.BN=s,s.BN=s,s.wordSize=26;var x;try{typeof window<"u"&&typeof window.Buffer<"u"?x=window.Buffer:x=ns.Buffer}catch{}s.isBN=function(t){return t instanceof s?!0:t!==null&&typeof t=="object"&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,r){return t.cmp(r)>0?t:r},s.min=function(t,r){return t.cmp(r)<0?t:r},s.prototype._init=function(t,r,n){if(typeof t=="number")return this._initNumber(t,r,n);if(typeof t=="object")return this._initArray(t,r,n);r==="hex"&&(r=16),h(r===(r|0)&&r>=2&&r<=36),t=t.toString().replace(/\s+/g,"");var o=0;t[0]==="-"&&(o++,this.negative=1),o<t.length&&(r===16?this._parseHex(t,o,n):(this._parseBase(t,r,o),n==="le"&&this._initArray(this.toArray(),r,n)))},s.prototype._initNumber=function(t,r,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(h(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3),n==="le"&&this._initArray(this.toArray(),r,n)},s.prototype._initArray=function(t,r,n){if(h(typeof t.length=="number"),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d,m,y=0;if(n==="be")for(o=t.length-1,d=0;o>=0;o-=3)m=t[o]|t[o-1]<<8|t[o-2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(n==="le")for(o=0,d=0;o<t.length;o+=3)m=t[o]|t[o+1]<<8|t[o+2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this.strip()};function w(v,t){var r=v.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function _(v,t,r){var n=w(v,r);return r-1>=t&&(n|=w(v,r-1)<<4),n}s.prototype._parseHex=function(t,r,n){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d=0,m=0,y;if(n==="be")for(o=t.length-1;o>=r;o-=2)y=_(t,r,o)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8;else{var u=t.length-r;for(o=u%2===0?r+1:r;o<t.length;o+=2)y=_(t,r,o)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8}this.strip()};function M(v,t,r,n){for(var o=0,d=Math.min(v.length,r),m=t;m<d;m++){var y=v.charCodeAt(m)-48;o*=n,y>=49?o+=y-49+10:y>=17?o+=y-17+10:o+=y}return o}s.prototype._parseBase=function(t,r,n){this.words=[0],this.length=1;for(var o=0,d=1;d<=67108863;d*=r)o++;o--,d=d/r|0;for(var m=t.length-n,y=m%o,u=Math.min(m,m-y)+n,e=0,l=n;l<u;l+=o)e=M(t,l,l+o,r),this.imuln(d),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e);if(y!==0){var z=1;for(e=M(t,l,t.length,r),l=0;l<y;l++)z*=r;this.imuln(z),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e)}this.strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(t,r){t=t||10,r=r|0||1;var n;if(t===16||t==="hex"){n="";for(var o=0,d=0,m=0;m<this.length;m++){var y=this.words[m],u=((y<<o|d)&16777215).toString(16);d=y>>>24-o&16777215,d!==0||m!==this.length-1?n=b[6-u.length]+u+n:n=u+n,o+=2,o>=26&&(o-=26,m--)}for(d!==0&&(n=d.toString(16)+n);n.length%r!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}if(t===(t|0)&&t>=2&&t<=36){var e=S[t],l=E[t];n="";var z=this.clone();for(z.negative=0;!z.isZero();){var $=z.modn(l).toString(t);z=z.idivn(l),z.isZero()?n=$+n:n=b[e-$.length]+$+n}for(this.isZero()&&(n="0"+n);n.length%r!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}h(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return this.length===2?t+=this.words[1]*67108864:this.length===3&&this.words[2]===1?t+=4503599627370496+this.words[1]*67108864:this.length>2&&h(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-t:t},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(t,r){return h(typeof x<"u"),this.toArrayLike(x,t,r)},s.prototype.toArray=function(t,r){return this.toArrayLike(Array,t,r)},s.prototype.toArrayLike=function(t,r,n){var o=this.byteLength(),d=n||Math.max(1,o);h(o<=d,"byte array longer than desired length"),h(d>0,"Requested array length <= 0"),this.strip();var m=r==="le",y=new t(d),u,e,l=this.clone();if(m){for(e=0;!l.isZero();e++)u=l.andln(255),l.iushrn(8),y[e]=u;for(;e<d;e++)y[e]=0}else{for(e=0;e<d-o;e++)y[e]=0;for(e=0;!l.isZero();e++)u=l.andln(255),l.iushrn(8),y[d-e-1]=u}return y},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var r=t,n=0;return r>=4096&&(n+=13,r>>>=13),r>=64&&(n+=7,r>>>=7),r>=8&&(n+=4,r>>>=4),r>=2&&(n+=2,r>>>=2),n+r},s.prototype._zeroBits=function(t){if(t===0)return 26;var r=t,n=0;return r&8191||(n+=13,r>>>=13),r&127||(n+=7,r>>>=7),r&15||(n+=4,r>>>=4),r&3||(n+=2,r>>>=2),r&1||n++,n},s.prototype.bitLength=function(){var t=this.words[this.length-1],r=this._countBits(t);return(this.length-1)*26+r};function D(v){for(var t=new Array(v.bitLength()),r=0;r<t.length;r++){var n=r/26|0,o=r%26;t[r]=(v.words[n]&1<<o)>>>o}return t}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);if(t+=n,n!==26)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return this.negative!==0?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},s.prototype.ior=function(t){return h((this.negative|t.negative)===0),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var r;this.length>t.length?r=t:r=this;for(var n=0;n<r.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=r.length,this.strip()},s.prototype.iand=function(t){return h((this.negative|t.negative)===0),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var r,n;this.length>t.length?(r=this,n=t):(r=t,n=this);for(var o=0;o<n.length;o++)this.words[o]=r.words[o]^n.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},s.prototype.ixor=function(t){return h((this.negative|t.negative)===0),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){h(typeof t=="number"&&t>=0);var r=Math.ceil(t/26)|0,n=t%26;this._expand(r),n>0&&r--;for(var o=0;o<r;o++)this.words[o]=~this.words[o]&67108863;return n>0&&(this.words[o]=~this.words[o]&67108863>>26-n),this.strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,r){h(typeof t=="number"&&t>=0);var n=t/26|0,o=t%26;return this._expand(n+1),r?this.words[n]=this.words[n]|1<<o:this.words[n]=this.words[n]&~(1<<o),this.strip()},s.prototype.iadd=function(t){var r;if(this.negative!==0&&t.negative===0)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(this.negative===0&&t.negative!==0)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();var n,o;this.length>t.length?(n=this,o=t):(n=t,o=this);for(var d=0,m=0;m<o.length;m++)r=(n.words[m]|0)+(o.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;for(;d!==0&&m<n.length;m++)r=(n.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;if(this.length=n.length,d!==0)this.words[this.length]=d,this.length++;else if(n!==this)for(;m<n.length;m++)this.words[m]=n.words[m];return this},s.prototype.add=function(t){var r;return t.negative!==0&&this.negative===0?(t.negative=0,r=this.sub(t),t.negative^=1,r):t.negative===0&&this.negative!==0?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n=this.cmp(t);if(n===0)return this.negative=0,this.length=1,this.words[0]=0,this;var o,d;n>0?(o=this,d=t):(o=t,d=this);for(var m=0,y=0;y<d.length;y++)r=(o.words[y]|0)-(d.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;for(;m!==0&&y<o.length;y++)r=(o.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;if(m===0&&y<o.length&&o!==this)for(;y<o.length;y++)this.words[y]=o.words[y];return this.length=Math.max(this.length,y),o!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(t){return this.clone().isub(t)};function I(v,t,r){r.negative=t.negative^v.negative;var n=v.length+t.length|0;r.length=n,n=n-1|0;var o=v.words[0]|0,d=t.words[0]|0,m=o*d,y=m&67108863,u=m/67108864|0;r.words[0]=y;for(var e=1;e<n;e++){for(var l=u>>>26,z=u&67108863,$=Math.min(e,t.length-1),H=Math.max(0,e-v.length+1);H<=$;H++){var W=e-H|0;o=v.words[W]|0,d=t.words[H]|0,m=o*d+z,l+=m/67108864|0,z=m&67108863}r.words[e]=z|0,u=l|0}return u!==0?r.words[e]=u|0:r.length--,r.strip()}var O=function(t,r,n){var o=t.words,d=r.words,m=n.words,y=0,u,e,l,z=o[0]|0,$=z&8191,H=z>>>13,W=o[1]|0,tt=W&8191,Z=W>>>13,et=o[2]|0,K=et&8191,C=et>>>13,Q=o[3]|0,rt=Q&8191,st=Q>>>13,Yt=o[4]|0,gt=Yt&8191,mt=Yt>>>13,ee=o[5]|0,_t=ee&8191,Mt=ee>>>13,re=o[6]|0,ut=re&8191,pt=re>>>13,Xt=o[7]|0,vt=Xt&8191,lt=Xt>>>13,Qt=o[8]|0,ht=Qt&8191,dt=Qt>>>13,ie=o[9]|0,ct=ie&8191,bt=ie>>>13,ne=d[0]|0,yt=ne&8191,wt=ne>>>13,se=d[1]|0,Bt=se&8191,Ut=se>>>13,Fe=d[2]|0,Nt=Fe&8191,kt=Fe>>>13,ar=d[3]|0,Lt=ar&8191,Et=ar>>>13,pe=d[4]|0,St=pe&8191,At=pe>>>13,ge=d[5]|0,xt=ge&8191,Pt=ge>>>13,Me=d[6]|0,Dt=Me&8191,Ot=Me>>>13,ye=d[7]|0,Rt=ye&8191,It=ye>>>13,ue=d[8]|0,Ct=ue&8191,Tt=ue>>>13,dr=d[9]|0,Ft=dr&8191,$t=dr>>>13;n.negative=t.negative^r.negative,n.length=19,u=Math.imul($,yt),e=Math.imul($,wt),e=e+Math.imul(H,yt)|0,l=Math.imul(H,wt);var Se=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Se>>>26)|0,Se&=67108863,u=Math.imul(tt,yt),e=Math.imul(tt,wt),e=e+Math.imul(Z,yt)|0,l=Math.imul(Z,wt),u=u+Math.imul($,Bt)|0,e=e+Math.imul($,Ut)|0,e=e+Math.imul(H,Bt)|0,l=l+Math.imul(H,Ut)|0;var He=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(He>>>26)|0,He&=67108863,u=Math.imul(K,yt),e=Math.imul(K,wt),e=e+Math.imul(C,yt)|0,l=Math.imul(C,wt),u=u+Math.imul(tt,Bt)|0,e=e+Math.imul(tt,Ut)|0,e=e+Math.imul(Z,Bt)|0,l=l+Math.imul(Z,Ut)|0,u=u+Math.imul($,Nt)|0,e=e+Math.imul($,kt)|0,e=e+Math.imul(H,Nt)|0,l=l+Math.imul(H,kt)|0;var Ke=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,u=Math.imul(rt,yt),e=Math.imul(rt,wt),e=e+Math.imul(st,yt)|0,l=Math.imul(st,wt),u=u+Math.imul(K,Bt)|0,e=e+Math.imul(K,Ut)|0,e=e+Math.imul(C,Bt)|0,l=l+Math.imul(C,Ut)|0,u=u+Math.imul(tt,Nt)|0,e=e+Math.imul(tt,kt)|0,e=e+Math.imul(Z,Nt)|0,l=l+Math.imul(Z,kt)|0,u=u+Math.imul($,Lt)|0,e=e+Math.imul($,Et)|0,e=e+Math.imul(H,Lt)|0,l=l+Math.imul(H,Et)|0;var Ve=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,u=Math.imul(gt,yt),e=Math.imul(gt,wt),e=e+Math.imul(mt,yt)|0,l=Math.imul(mt,wt),u=u+Math.imul(rt,Bt)|0,e=e+Math.imul(rt,Ut)|0,e=e+Math.imul(st,Bt)|0,l=l+Math.imul(st,Ut)|0,u=u+Math.imul(K,Nt)|0,e=e+Math.imul(K,kt)|0,e=e+Math.imul(C,Nt)|0,l=l+Math.imul(C,kt)|0,u=u+Math.imul(tt,Lt)|0,e=e+Math.imul(tt,Et)|0,e=e+Math.imul(Z,Lt)|0,l=l+Math.imul(Z,Et)|0,u=u+Math.imul($,St)|0,e=e+Math.imul($,At)|0,e=e+Math.imul(H,St)|0,l=l+Math.imul(H,At)|0;var Ge=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,u=Math.imul(_t,yt),e=Math.imul(_t,wt),e=e+Math.imul(Mt,yt)|0,l=Math.imul(Mt,wt),u=u+Math.imul(gt,Bt)|0,e=e+Math.imul(gt,Ut)|0,e=e+Math.imul(mt,Bt)|0,l=l+Math.imul(mt,Ut)|0,u=u+Math.imul(rt,Nt)|0,e=e+Math.imul(rt,kt)|0,e=e+Math.imul(st,Nt)|0,l=l+Math.imul(st,kt)|0,u=u+Math.imul(K,Lt)|0,e=e+Math.imul(K,Et)|0,e=e+Math.imul(C,Lt)|0,l=l+Math.imul(C,Et)|0,u=u+Math.imul(tt,St)|0,e=e+Math.imul(tt,At)|0,e=e+Math.imul(Z,St)|0,l=l+Math.imul(Z,At)|0,u=u+Math.imul($,xt)|0,e=e+Math.imul($,Pt)|0,e=e+Math.imul(H,xt)|0,l=l+Math.imul(H,Pt)|0;var We=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(We>>>26)|0,We&=67108863,u=Math.imul(ut,yt),e=Math.imul(ut,wt),e=e+Math.imul(pt,yt)|0,l=Math.imul(pt,wt),u=u+Math.imul(_t,Bt)|0,e=e+Math.imul(_t,Ut)|0,e=e+Math.imul(Mt,Bt)|0,l=l+Math.imul(Mt,Ut)|0,u=u+Math.imul(gt,Nt)|0,e=e+Math.imul(gt,kt)|0,e=e+Math.imul(mt,Nt)|0,l=l+Math.imul(mt,kt)|0,u=u+Math.imul(rt,Lt)|0,e=e+Math.imul(rt,Et)|0,e=e+Math.imul(st,Lt)|0,l=l+Math.imul(st,Et)|0,u=u+Math.imul(K,St)|0,e=e+Math.imul(K,At)|0,e=e+Math.imul(C,St)|0,l=l+Math.imul(C,At)|0,u=u+Math.imul(tt,xt)|0,e=e+Math.imul(tt,Pt)|0,e=e+Math.imul(Z,xt)|0,l=l+Math.imul(Z,Pt)|0,u=u+Math.imul($,Dt)|0,e=e+Math.imul($,Ot)|0,e=e+Math.imul(H,Dt)|0,l=l+Math.imul(H,Ot)|0;var Oe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,u=Math.imul(vt,yt),e=Math.imul(vt,wt),e=e+Math.imul(lt,yt)|0,l=Math.imul(lt,wt),u=u+Math.imul(ut,Bt)|0,e=e+Math.imul(ut,Ut)|0,e=e+Math.imul(pt,Bt)|0,l=l+Math.imul(pt,Ut)|0,u=u+Math.imul(_t,Nt)|0,e=e+Math.imul(_t,kt)|0,e=e+Math.imul(Mt,Nt)|0,l=l+Math.imul(Mt,kt)|0,u=u+Math.imul(gt,Lt)|0,e=e+Math.imul(gt,Et)|0,e=e+Math.imul(mt,Lt)|0,l=l+Math.imul(mt,Et)|0,u=u+Math.imul(rt,St)|0,e=e+Math.imul(rt,At)|0,e=e+Math.imul(st,St)|0,l=l+Math.imul(st,At)|0,u=u+Math.imul(K,xt)|0,e=e+Math.imul(K,Pt)|0,e=e+Math.imul(C,xt)|0,l=l+Math.imul(C,Pt)|0,u=u+Math.imul(tt,Dt)|0,e=e+Math.imul(tt,Ot)|0,e=e+Math.imul(Z,Dt)|0,l=l+Math.imul(Z,Ot)|0,u=u+Math.imul($,Rt)|0,e=e+Math.imul($,It)|0,e=e+Math.imul(H,Rt)|0,l=l+Math.imul(H,It)|0;var Be=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Be>>>26)|0,Be&=67108863,u=Math.imul(ht,yt),e=Math.imul(ht,wt),e=e+Math.imul(dt,yt)|0,l=Math.imul(dt,wt),u=u+Math.imul(vt,Bt)|0,e=e+Math.imul(vt,Ut)|0,e=e+Math.imul(lt,Bt)|0,l=l+Math.imul(lt,Ut)|0,u=u+Math.imul(ut,Nt)|0,e=e+Math.imul(ut,kt)|0,e=e+Math.imul(pt,Nt)|0,l=l+Math.imul(pt,kt)|0,u=u+Math.imul(_t,Lt)|0,e=e+Math.imul(_t,Et)|0,e=e+Math.imul(Mt,Lt)|0,l=l+Math.imul(Mt,Et)|0,u=u+Math.imul(gt,St)|0,e=e+Math.imul(gt,At)|0,e=e+Math.imul(mt,St)|0,l=l+Math.imul(mt,At)|0,u=u+Math.imul(rt,xt)|0,e=e+Math.imul(rt,Pt)|0,e=e+Math.imul(st,xt)|0,l=l+Math.imul(st,Pt)|0,u=u+Math.imul(K,Dt)|0,e=e+Math.imul(K,Ot)|0,e=e+Math.imul(C,Dt)|0,l=l+Math.imul(C,Ot)|0,u=u+Math.imul(tt,Rt)|0,e=e+Math.imul(tt,It)|0,e=e+Math.imul(Z,Rt)|0,l=l+Math.imul(Z,It)|0,u=u+Math.imul($,Ct)|0,e=e+Math.imul($,Tt)|0,e=e+Math.imul(H,Ct)|0,l=l+Math.imul(H,Tt)|0;var Ze=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,u=Math.imul(ct,yt),e=Math.imul(ct,wt),e=e+Math.imul(bt,yt)|0,l=Math.imul(bt,wt),u=u+Math.imul(ht,Bt)|0,e=e+Math.imul(ht,Ut)|0,e=e+Math.imul(dt,Bt)|0,l=l+Math.imul(dt,Ut)|0,u=u+Math.imul(vt,Nt)|0,e=e+Math.imul(vt,kt)|0,e=e+Math.imul(lt,Nt)|0,l=l+Math.imul(lt,kt)|0,u=u+Math.imul(ut,Lt)|0,e=e+Math.imul(ut,Et)|0,e=e+Math.imul(pt,Lt)|0,l=l+Math.imul(pt,Et)|0,u=u+Math.imul(_t,St)|0,e=e+Math.imul(_t,At)|0,e=e+Math.imul(Mt,St)|0,l=l+Math.imul(Mt,At)|0,u=u+Math.imul(gt,xt)|0,e=e+Math.imul(gt,Pt)|0,e=e+Math.imul(mt,xt)|0,l=l+Math.imul(mt,Pt)|0,u=u+Math.imul(rt,Dt)|0,e=e+Math.imul(rt,Ot)|0,e=e+Math.imul(st,Dt)|0,l=l+Math.imul(st,Ot)|0,u=u+Math.imul(K,Rt)|0,e=e+Math.imul(K,It)|0,e=e+Math.imul(C,Rt)|0,l=l+Math.imul(C,It)|0,u=u+Math.imul(tt,Ct)|0,e=e+Math.imul(tt,Tt)|0,e=e+Math.imul(Z,Ct)|0,l=l+Math.imul(Z,Tt)|0,u=u+Math.imul($,Ft)|0,e=e+Math.imul($,$t)|0,e=e+Math.imul(H,Ft)|0,l=l+Math.imul(H,$t)|0;var Ne=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u=Math.imul(ct,Bt),e=Math.imul(ct,Ut),e=e+Math.imul(bt,Bt)|0,l=Math.imul(bt,Ut),u=u+Math.imul(ht,Nt)|0,e=e+Math.imul(ht,kt)|0,e=e+Math.imul(dt,Nt)|0,l=l+Math.imul(dt,kt)|0,u=u+Math.imul(vt,Lt)|0,e=e+Math.imul(vt,Et)|0,e=e+Math.imul(lt,Lt)|0,l=l+Math.imul(lt,Et)|0,u=u+Math.imul(ut,St)|0,e=e+Math.imul(ut,At)|0,e=e+Math.imul(pt,St)|0,l=l+Math.imul(pt,At)|0,u=u+Math.imul(_t,xt)|0,e=e+Math.imul(_t,Pt)|0,e=e+Math.imul(Mt,xt)|0,l=l+Math.imul(Mt,Pt)|0,u=u+Math.imul(gt,Dt)|0,e=e+Math.imul(gt,Ot)|0,e=e+Math.imul(mt,Dt)|0,l=l+Math.imul(mt,Ot)|0,u=u+Math.imul(rt,Rt)|0,e=e+Math.imul(rt,It)|0,e=e+Math.imul(st,Rt)|0,l=l+Math.imul(st,It)|0,u=u+Math.imul(K,Ct)|0,e=e+Math.imul(K,Tt)|0,e=e+Math.imul(C,Ct)|0,l=l+Math.imul(C,Tt)|0,u=u+Math.imul(tt,Ft)|0,e=e+Math.imul(tt,$t)|0,e=e+Math.imul(Z,Ft)|0,l=l+Math.imul(Z,$t)|0;var Je=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Je>>>26)|0,Je&=67108863,u=Math.imul(ct,Nt),e=Math.imul(ct,kt),e=e+Math.imul(bt,Nt)|0,l=Math.imul(bt,kt),u=u+Math.imul(ht,Lt)|0,e=e+Math.imul(ht,Et)|0,e=e+Math.imul(dt,Lt)|0,l=l+Math.imul(dt,Et)|0,u=u+Math.imul(vt,St)|0,e=e+Math.imul(vt,At)|0,e=e+Math.imul(lt,St)|0,l=l+Math.imul(lt,At)|0,u=u+Math.imul(ut,xt)|0,e=e+Math.imul(ut,Pt)|0,e=e+Math.imul(pt,xt)|0,l=l+Math.imul(pt,Pt)|0,u=u+Math.imul(_t,Dt)|0,e=e+Math.imul(_t,Ot)|0,e=e+Math.imul(Mt,Dt)|0,l=l+Math.imul(Mt,Ot)|0,u=u+Math.imul(gt,Rt)|0,e=e+Math.imul(gt,It)|0,e=e+Math.imul(mt,Rt)|0,l=l+Math.imul(mt,It)|0,u=u+Math.imul(rt,Ct)|0,e=e+Math.imul(rt,Tt)|0,e=e+Math.imul(st,Ct)|0,l=l+Math.imul(st,Tt)|0,u=u+Math.imul(K,Ft)|0,e=e+Math.imul(K,$t)|0,e=e+Math.imul(C,Ft)|0,l=l+Math.imul(C,$t)|0;var Ye=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,u=Math.imul(ct,Lt),e=Math.imul(ct,Et),e=e+Math.imul(bt,Lt)|0,l=Math.imul(bt,Et),u=u+Math.imul(ht,St)|0,e=e+Math.imul(ht,At)|0,e=e+Math.imul(dt,St)|0,l=l+Math.imul(dt,At)|0,u=u+Math.imul(vt,xt)|0,e=e+Math.imul(vt,Pt)|0,e=e+Math.imul(lt,xt)|0,l=l+Math.imul(lt,Pt)|0,u=u+Math.imul(ut,Dt)|0,e=e+Math.imul(ut,Ot)|0,e=e+Math.imul(pt,Dt)|0,l=l+Math.imul(pt,Ot)|0,u=u+Math.imul(_t,Rt)|0,e=e+Math.imul(_t,It)|0,e=e+Math.imul(Mt,Rt)|0,l=l+Math.imul(Mt,It)|0,u=u+Math.imul(gt,Ct)|0,e=e+Math.imul(gt,Tt)|0,e=e+Math.imul(mt,Ct)|0,l=l+Math.imul(mt,Tt)|0,u=u+Math.imul(rt,Ft)|0,e=e+Math.imul(rt,$t)|0,e=e+Math.imul(st,Ft)|0,l=l+Math.imul(st,$t)|0;var qe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(qe>>>26)|0,qe&=67108863,u=Math.imul(ct,St),e=Math.imul(ct,At),e=e+Math.imul(bt,St)|0,l=Math.imul(bt,At),u=u+Math.imul(ht,xt)|0,e=e+Math.imul(ht,Pt)|0,e=e+Math.imul(dt,xt)|0,l=l+Math.imul(dt,Pt)|0,u=u+Math.imul(vt,Dt)|0,e=e+Math.imul(vt,Ot)|0,e=e+Math.imul(lt,Dt)|0,l=l+Math.imul(lt,Ot)|0,u=u+Math.imul(ut,Rt)|0,e=e+Math.imul(ut,It)|0,e=e+Math.imul(pt,Rt)|0,l=l+Math.imul(pt,It)|0,u=u+Math.imul(_t,Ct)|0,e=e+Math.imul(_t,Tt)|0,e=e+Math.imul(Mt,Ct)|0,l=l+Math.imul(Mt,Tt)|0,u=u+Math.imul(gt,Ft)|0,e=e+Math.imul(gt,$t)|0,e=e+Math.imul(mt,Ft)|0,l=l+Math.imul(mt,$t)|0;var $e=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+($e>>>26)|0,$e&=67108863,u=Math.imul(ct,xt),e=Math.imul(ct,Pt),e=e+Math.imul(bt,xt)|0,l=Math.imul(bt,Pt),u=u+Math.imul(ht,Dt)|0,e=e+Math.imul(ht,Ot)|0,e=e+Math.imul(dt,Dt)|0,l=l+Math.imul(dt,Ot)|0,u=u+Math.imul(vt,Rt)|0,e=e+Math.imul(vt,It)|0,e=e+Math.imul(lt,Rt)|0,l=l+Math.imul(lt,It)|0,u=u+Math.imul(ut,Ct)|0,e=e+Math.imul(ut,Tt)|0,e=e+Math.imul(pt,Ct)|0,l=l+Math.imul(pt,Tt)|0,u=u+Math.imul(_t,Ft)|0,e=e+Math.imul(_t,$t)|0,e=e+Math.imul(Mt,Ft)|0,l=l+Math.imul(Mt,$t)|0;var ze=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(ze>>>26)|0,ze&=67108863,u=Math.imul(ct,Dt),e=Math.imul(ct,Ot),e=e+Math.imul(bt,Dt)|0,l=Math.imul(bt,Ot),u=u+Math.imul(ht,Rt)|0,e=e+Math.imul(ht,It)|0,e=e+Math.imul(dt,Rt)|0,l=l+Math.imul(dt,It)|0,u=u+Math.imul(vt,Ct)|0,e=e+Math.imul(vt,Tt)|0,e=e+Math.imul(lt,Ct)|0,l=l+Math.imul(lt,Tt)|0,u=u+Math.imul(ut,Ft)|0,e=e+Math.imul(ut,$t)|0,e=e+Math.imul(pt,Ft)|0,l=l+Math.imul(pt,$t)|0;var De=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(De>>>26)|0,De&=67108863,u=Math.imul(ct,Rt),e=Math.imul(ct,It),e=e+Math.imul(bt,Rt)|0,l=Math.imul(bt,It),u=u+Math.imul(ht,Ct)|0,e=e+Math.imul(ht,Tt)|0,e=e+Math.imul(dt,Ct)|0,l=l+Math.imul(dt,Tt)|0,u=u+Math.imul(vt,Ft)|0,e=e+Math.imul(vt,$t)|0,e=e+Math.imul(lt,Ft)|0,l=l+Math.imul(lt,$t)|0;var Xe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,u=Math.imul(ct,Ct),e=Math.imul(ct,Tt),e=e+Math.imul(bt,Ct)|0,l=Math.imul(bt,Tt),u=u+Math.imul(ht,Ft)|0,e=e+Math.imul(ht,$t)|0,e=e+Math.imul(dt,Ft)|0,l=l+Math.imul(dt,$t)|0;var Qe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,u=Math.imul(ct,Ft),e=Math.imul(ct,$t),e=e+Math.imul(bt,Ft)|0,l=Math.imul(bt,$t);var tr=(y+u|0)+((e&8191)<<13)|0;return y=(l+(e>>>13)|0)+(tr>>>26)|0,tr&=67108863,m[0]=Se,m[1]=He,m[2]=Ke,m[3]=Ve,m[4]=Ge,m[5]=We,m[6]=Oe,m[7]=Be,m[8]=Ze,m[9]=Ne,m[10]=Je,m[11]=Ye,m[12]=qe,m[13]=$e,m[14]=ze,m[15]=De,m[16]=Xe,m[17]=Qe,m[18]=tr,y!==0&&(m[19]=y,n.length++),n};Math.imul||(O=I);function N(v,t,r){r.negative=t.negative^v.negative,r.length=v.length+t.length;for(var n=0,o=0,d=0;d<r.length-1;d++){var m=o;o=0;for(var y=n&67108863,u=Math.min(d,t.length-1),e=Math.max(0,d-v.length+1);e<=u;e++){var l=d-e,z=v.words[l]|0,$=t.words[e]|0,H=z*$,W=H&67108863;m=m+(H/67108864|0)|0,W=W+y|0,y=W&67108863,m=m+(W>>>26)|0,o+=m>>>26,m&=67108863}r.words[d]=y,n=m,m=o}return n!==0?r.words[d]=n:r.length--,r.strip()}function L(v,t,r){var n=new R;return n.mulp(v,t,r)}s.prototype.mulTo=function(t,r){var n,o=this.length+t.length;return this.length===10&&t.length===10?n=O(this,t,r):o<63?n=I(this,t,r):o<1024?n=N(this,t,r):n=L(this,t,r),n};function R(v,t){this.x=v,this.y=t}R.prototype.makeRBT=function(t){for(var r=new Array(t),n=s.prototype._countBits(t)-1,o=0;o<t;o++)r[o]=this.revBin(o,n,t);return r},R.prototype.revBin=function(t,r,n){if(t===0||t===n-1)return t;for(var o=0,d=0;d<r;d++)o|=(t&1)<<r-d-1,t>>=1;return o},R.prototype.permute=function(t,r,n,o,d,m){for(var y=0;y<m;y++)o[y]=r[t[y]],d[y]=n[t[y]]},R.prototype.transform=function(t,r,n,o,d,m){this.permute(m,t,r,n,o,d);for(var y=1;y<d;y<<=1)for(var u=y<<1,e=Math.cos(2*Math.PI/u),l=Math.sin(2*Math.PI/u),z=0;z<d;z+=u)for(var $=e,H=l,W=0;W<y;W++){var tt=n[z+W],Z=o[z+W],et=n[z+W+y],K=o[z+W+y],C=$*et-H*K;K=$*K+H*et,et=C,n[z+W]=tt+et,o[z+W]=Z+K,n[z+W+y]=tt-et,o[z+W+y]=Z-K,W!==u&&(C=e*$-l*H,H=e*H+l*$,$=C)}},R.prototype.guessLen13b=function(t,r){var n=Math.max(r,t)|1,o=n&1,d=0;for(n=n/2|0;n;n=n>>>1)d++;return 1<<d+1+o},R.prototype.conjugate=function(t,r,n){if(!(n<=1))for(var o=0;o<n/2;o++){var d=t[o];t[o]=t[n-o-1],t[n-o-1]=d,d=r[o],r[o]=-r[n-o-1],r[n-o-1]=-d}},R.prototype.normalize13b=function(t,r){for(var n=0,o=0;o<r/2;o++){var d=Math.round(t[2*o+1]/r)*8192+Math.round(t[2*o]/r)+n;t[o]=d&67108863,d<67108864?n=0:n=d/67108864|0}return t},R.prototype.convert13b=function(t,r,n,o){for(var d=0,m=0;m<r;m++)d=d+(t[m]|0),n[2*m]=d&8191,d=d>>>13,n[2*m+1]=d&8191,d=d>>>13;for(m=2*r;m<o;++m)n[m]=0;h(d===0),h((d&-8192)===0)},R.prototype.stub=function(t){for(var r=new Array(t),n=0;n<t;n++)r[n]=0;return r},R.prototype.mulp=function(t,r,n){var o=2*this.guessLen13b(t.length,r.length),d=this.makeRBT(o),m=this.stub(o),y=new Array(o),u=new Array(o),e=new Array(o),l=new Array(o),z=new Array(o),$=new Array(o),H=n.words;H.length=o,this.convert13b(t.words,t.length,y,o),this.convert13b(r.words,r.length,l,o),this.transform(y,m,u,e,o,d),this.transform(l,m,z,$,o,d);for(var W=0;W<o;W++){var tt=u[W]*z[W]-e[W]*$[W];e[W]=u[W]*$[W]+e[W]*z[W],u[W]=tt}return this.conjugate(u,e,o),this.transform(u,e,H,m,o,d),this.conjugate(H,m,o),this.normalize13b(H,o),n.negative=t.negative^r.negative,n.length=t.length+r.length,n.strip()},s.prototype.mul=function(t){var r=new s(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},s.prototype.mulf=function(t){var r=new s(null);return r.words=new Array(this.length+t.length),L(this,t,r)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){h(typeof t=="number"),h(t<67108864);for(var r=0,n=0;n<this.length;n++){var o=(this.words[n]|0)*t,d=(o&67108863)+(r&67108863);r>>=26,r+=o/67108864|0,r+=d>>>26,this.words[n]=d&67108863}return r!==0&&(this.words[n]=r,this.length++),this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var r=D(t);if(r.length===0)return new s(1);for(var n=this,o=0;o<r.length&&r[o]===0;o++,n=n.sqr());if(++o<r.length)for(var d=n.sqr();o<r.length;o++,d=d.sqr())r[o]!==0&&(n=n.mul(d));return n},s.prototype.iushln=function(t){h(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r,d;if(r!==0){var m=0;for(d=0;d<this.length;d++){var y=this.words[d]&o,u=(this.words[d]|0)-y<<r;this.words[d]=u|m,m=y>>>26-r}m&&(this.words[d]=m,this.length++)}if(n!==0){for(d=this.length-1;d>=0;d--)this.words[d+n]=this.words[d];for(d=0;d<n;d++)this.words[d]=0;this.length+=n}return this.strip()},s.prototype.ishln=function(t){return h(this.negative===0),this.iushln(t)},s.prototype.iushrn=function(t,r,n){h(typeof t=="number"&&t>=0);var o;r?o=(r-r%26)/26:o=0;var d=t%26,m=Math.min((t-d)/26,this.length),y=67108863^67108863>>>d<<d,u=n;if(o-=m,o=Math.max(0,o),u){for(var e=0;e<m;e++)u.words[e]=this.words[e];u.length=m}if(m!==0)if(this.length>m)for(this.length-=m,e=0;e<this.length;e++)this.words[e]=this.words[e+m];else this.words[0]=0,this.length=1;var l=0;for(e=this.length-1;e>=0&&(l!==0||e>=o);e--){var z=this.words[e]|0;this.words[e]=l<<26-d|z>>>d,l=z&y}return u&&l!==0&&(u.words[u.length++]=l),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(t,r,n){return h(this.negative===0),this.iushrn(t,r,n)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){h(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26,o=1<<r;if(this.length<=n)return!1;var d=this.words[n];return!!(d&o)},s.prototype.imaskn=function(t){h(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26;if(h(this.negative===0,"imaskn works only with positive numbers"),this.length<=n)return this;if(r!==0&&n++,this.length=Math.min(n,this.length),r!==0){var o=67108863^67108863>>>r<<r;this.words[this.length-1]&=o}return this.strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return h(typeof t=="number"),h(t<67108864),t<0?this.isubn(-t):this.negative!==0?this.length===1&&(this.words[0]|0)<t?(this.words[0]=t-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},s.prototype.isubn=function(t){if(h(typeof t=="number"),h(t<67108864),t<0)return this.iaddn(-t);if(this.negative!==0)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,r,n){var o=t.length+n,d;this._expand(o);var m,y=0;for(d=0;d<t.length;d++){m=(this.words[d+n]|0)+y;var u=(t.words[d]|0)*r;m-=u&67108863,y=(m>>26)-(u/67108864|0),this.words[d+n]=m&67108863}for(;d<this.length-n;d++)m=(this.words[d+n]|0)+y,y=m>>26,this.words[d+n]=m&67108863;if(y===0)return this.strip();for(h(y===-1),y=0,d=0;d<this.length;d++)m=-(this.words[d]|0)+y,y=m>>26,this.words[d]=m&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(t,r){var n=this.length-t.length,o=this.clone(),d=t,m=d.words[d.length-1]|0,y=this._countBits(m);n=26-y,n!==0&&(d=d.ushln(n),o.iushln(n),m=d.words[d.length-1]|0);var u=o.length-d.length,e;if(r!=="mod"){e=new s(null),e.length=u+1,e.words=new Array(e.length);for(var l=0;l<e.length;l++)e.words[l]=0}var z=o.clone()._ishlnsubmul(d,1,u);z.negative===0&&(o=z,e&&(e.words[u]=1));for(var $=u-1;$>=0;$--){var H=(o.words[d.length+$]|0)*67108864+(o.words[d.length+$-1]|0);for(H=Math.min(H/m|0,67108863),o._ishlnsubmul(d,H,$);o.negative!==0;)H--,o.negative=0,o._ishlnsubmul(d,1,$),o.isZero()||(o.negative^=1);e&&(e.words[$]=H)}return e&&e.strip(),o.strip(),r!=="div"&&n!==0&&o.iushrn(n),{div:e||null,mod:o}},s.prototype.divmod=function(t,r,n){if(h(!t.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var o,d,m;return this.negative!==0&&t.negative===0?(m=this.neg().divmod(t,r),r!=="mod"&&(o=m.div.neg()),r!=="div"&&(d=m.mod.neg(),n&&d.negative!==0&&d.iadd(t)),{div:o,mod:d}):this.negative===0&&t.negative!==0?(m=this.divmod(t.neg(),r),r!=="mod"&&(o=m.div.neg()),{div:o,mod:m.mod}):this.negative&t.negative?(m=this.neg().divmod(t.neg(),r),r!=="div"&&(d=m.mod.neg(),n&&d.negative!==0&&d.isub(t)),{div:m.div,mod:d}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:t.length===1?r==="div"?{div:this.divn(t.words[0]),mod:null}:r==="mod"?{div:null,mod:new s(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modn(t.words[0]))}:this._wordDiv(t,r)},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=r.div.negative!==0?r.mod.isub(t):r.mod,o=t.ushrn(1),d=t.andln(1),m=n.cmp(o);return m<0||d===1&&m===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},s.prototype.modn=function(t){h(t<=67108863);for(var r=(1<<26)%t,n=0,o=this.length-1;o>=0;o--)n=(r*n+(this.words[o]|0))%t;return n},s.prototype.idivn=function(t){h(t<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var o=(this.words[n]|0)+r*67108864;this.words[n]=o/t|0,r=o%t}return this.strip()},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){h(t.negative===0),h(!t.isZero());var r=this,n=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var o=new s(1),d=new s(0),m=new s(0),y=new s(1),u=0;r.isEven()&&n.isEven();)r.iushrn(1),n.iushrn(1),++u;for(var e=n.clone(),l=r.clone();!r.isZero();){for(var z=0,$=1;!(r.words[0]&$)&&z<26;++z,$<<=1);if(z>0)for(r.iushrn(z);z-- >0;)(o.isOdd()||d.isOdd())&&(o.iadd(e),d.isub(l)),o.iushrn(1),d.iushrn(1);for(var H=0,W=1;!(n.words[0]&W)&&H<26;++H,W<<=1);if(H>0)for(n.iushrn(H);H-- >0;)(m.isOdd()||y.isOdd())&&(m.iadd(e),y.isub(l)),m.iushrn(1),y.iushrn(1);r.cmp(n)>=0?(r.isub(n),o.isub(m),d.isub(y)):(n.isub(r),m.isub(o),y.isub(d))}return{a:m,b:y,gcd:n.iushln(u)}},s.prototype._invmp=function(t){h(t.negative===0),h(!t.isZero());var r=this,n=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var o=new s(1),d=new s(0),m=n.clone();r.cmpn(1)>0&&n.cmpn(1)>0;){for(var y=0,u=1;!(r.words[0]&u)&&y<26;++y,u<<=1);if(y>0)for(r.iushrn(y);y-- >0;)o.isOdd()&&o.iadd(m),o.iushrn(1);for(var e=0,l=1;!(n.words[0]&l)&&e<26;++e,l<<=1);if(e>0)for(n.iushrn(e);e-- >0;)d.isOdd()&&d.iadd(m),d.iushrn(1);r.cmp(n)>=0?(r.isub(n),o.isub(d)):(n.isub(r),d.isub(o))}var z;return r.cmpn(1)===0?z=o:z=d,z.cmpn(0)<0&&z.iadd(t),z},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),n=t.clone();r.negative=0,n.negative=0;for(var o=0;r.isEven()&&n.isEven();o++)r.iushrn(1),n.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;n.isEven();)n.iushrn(1);var d=r.cmp(n);if(d<0){var m=r;r=n,n=m}else if(d===0||n.cmpn(1)===0)break;r.isub(n)}while(!0);return n.iushln(o)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){h(typeof t=="number");var r=t%26,n=(t-r)/26,o=1<<r;if(this.length<=n)return this._expand(n+1),this.words[n]|=o,this;for(var d=o,m=n;d!==0&&m<this.length;m++){var y=this.words[m]|0;y+=d,d=y>>>26,y&=67108863,this.words[m]=y}return d!==0&&(this.words[m]=d,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(t){var r=t<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var n;if(this.length>1)n=1;else{r&&(t=-t),h(t<=67108863,"Number is too big");var o=this.words[0]|0;n=o===t?0:o<t?-1:1}return this.negative!==0?-n|0:n},s.prototype.cmp=function(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);return this.negative!==0?-r|0:r},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,n=this.length-1;n>=0;n--){var o=this.words[n]|0,d=t.words[n]|0;if(o!==d){o<d?r=-1:o>d&&(r=1);break}}return r},s.prototype.gtn=function(t){return this.cmpn(t)===1},s.prototype.gt=function(t){return this.cmp(t)===1},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return this.cmpn(t)===-1},s.prototype.lt=function(t){return this.cmp(t)===-1},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return this.cmpn(t)===0},s.prototype.eq=function(t){return this.cmp(t)===0},s.red=function(t){return new G(t)},s.prototype.toRed=function(t){return h(!this.red,"Already a number in reduction context"),h(this.negative===0,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return h(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return h(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return h(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return h(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return h(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return h(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return h(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return h(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return h(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return h(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return h(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return h(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return h(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return h(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return h(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var B={k256:null,p224:null,p192:null,p25519:null};function T(v,t){this.name=v,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}T.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},T.prototype.ireduce=function(t){var r=t,n;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),n=r.bitLength();while(n>this.n);var o=n<this.n?-1:r.ucmp(this.p);return o===0?(r.words[0]=0,r.length=1):o>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},T.prototype.split=function(t,r){t.iushrn(this.n,0,r)},T.prototype.imulK=function(t){return t.imul(this.k)};function U(){T.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}g(U,T),U.prototype.split=function(t,r){for(var n=4194303,o=Math.min(t.length,9),d=0;d<o;d++)r.words[d]=t.words[d];if(r.length=o,t.length<=9){t.words[0]=0,t.length=1;return}var m=t.words[9];for(r.words[r.length++]=m&n,d=10;d<t.length;d++){var y=t.words[d]|0;t.words[d-10]=(y&n)<<4|m>>>22,m=y}m>>>=22,t.words[d-10]=m,m===0&&t.length>10?t.length-=10:t.length-=9},U.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,n=0;n<t.length;n++){var o=t.words[n]|0;r+=o*977,t.words[n]=r&67108863,r=o*64+(r/67108864|0)}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t};function k(){T.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}g(k,T);function P(){T.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}g(P,T);function F(){T.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}g(F,T),F.prototype.imulK=function(t){for(var r=0,n=0;n<t.length;n++){var o=(t.words[n]|0)*19+r,d=o&67108863;o>>>=26,t.words[n]=d,r=o}return r!==0&&(t.words[t.length++]=r),t},s._prime=function(t){if(B[t])return B[t];var r;if(t==="k256")r=new U;else if(t==="p224")r=new k;else if(t==="p192")r=new P;else if(t==="p25519")r=new F;else throw new Error("Unknown prime "+t);return B[t]=r,r};function G(v){if(typeof v=="string"){var t=s._prime(v);this.m=t.p,this.prime=t}else h(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}G.prototype._verify1=function(t){h(t.negative===0,"red works only with positives"),h(t.red,"red works only with red numbers")},G.prototype._verify2=function(t,r){h((t.negative|r.negative)===0,"red works only with positives"),h(t.red&&t.red===r.red,"red works only with red numbers")},G.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},G.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},G.prototype.add=function(t,r){this._verify2(t,r);var n=t.add(r);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},G.prototype.iadd=function(t,r){this._verify2(t,r);var n=t.iadd(r);return n.cmp(this.m)>=0&&n.isub(this.m),n},G.prototype.sub=function(t,r){this._verify2(t,r);var n=t.sub(r);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},G.prototype.isub=function(t,r){this._verify2(t,r);var n=t.isub(r);return n.cmpn(0)<0&&n.iadd(this.m),n},G.prototype.shl=function(t,r){return this._verify1(t),this.imod(t.ushln(r))},G.prototype.imul=function(t,r){return this._verify2(t,r),this.imod(t.imul(r))},G.prototype.mul=function(t,r){return this._verify2(t,r),this.imod(t.mul(r))},G.prototype.isqr=function(t){return this.imul(t,t.clone())},G.prototype.sqr=function(t){return this.mul(t,t)},G.prototype.sqrt=function(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(h(r%2===1),r===3){var n=this.m.add(new s(1)).iushrn(2);return this.pow(t,n)}for(var o=this.m.subn(1),d=0;!o.isZero()&&o.andln(1)===0;)d++,o.iushrn(1);h(!o.isZero());var m=new s(1).toRed(this),y=m.redNeg(),u=this.m.subn(1).iushrn(1),e=this.m.bitLength();for(e=new s(2*e*e).toRed(this);this.pow(e,u).cmp(y)!==0;)e.redIAdd(y);for(var l=this.pow(e,o),z=this.pow(t,o.addn(1).iushrn(1)),$=this.pow(t,o),H=d;$.cmp(m)!==0;){for(var W=$,tt=0;W.cmp(m)!==0;tt++)W=W.redSqr();h(tt<H);var Z=this.pow(l,new s(1).iushln(H-tt-1));z=z.redMul(Z),l=Z.redSqr(),$=$.redMul(l),H=tt}return z},G.prototype.invm=function(t){var r=t._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},G.prototype.pow=function(t,r){if(r.isZero())return new s(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var n=4,o=new Array(1<<n);o[0]=new s(1).toRed(this),o[1]=t;for(var d=2;d<o.length;d++)o[d]=this.mul(o[d-1],t);var m=o[0],y=0,u=0,e=r.bitLength()%26;for(e===0&&(e=26),d=r.length-1;d>=0;d--){for(var l=r.words[d],z=e-1;z>=0;z--){var $=l>>z&1;if(m!==o[0]&&(m=this.sqr(m)),$===0&&y===0){u=0;continue}y<<=1,y|=$,u++,!(u!==n&&(d!==0||z!==0))&&(m=this.mul(m,o[y]),u=0,y=0)}e=26}return m},G.prototype.convertTo=function(t){var r=t.umod(this.m);return r===t?r.clone():r},G.prototype.convertFrom=function(t){var r=t.clone();return r.red=null,r},s.mont=function(t){return new nt(t)};function nt(v){G.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g(nt,G),nt.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},nt.prototype.convertFrom=function(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},nt.prototype.imul=function(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(r),o=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=n.isub(o).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.mul=function(t,r){if(t.isZero()||r.isZero())return new s(0)._forceRed(this);var n=t.mul(r),o=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=n.isub(o).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.invm=function(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(c,Ee)}(vo)),vo.exports}var $h={},up;function gg(){return up||(up=1,function(c){var i=c;function a(s,x){if(Array.isArray(s))return s.slice();if(!s)return[];var w=[];if(typeof s!="string"){for(var _=0;_<s.length;_++)w[_]=s[_]|0;return w}if(x==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var _=0;_<s.length;_+=2)w.push(parseInt(s[_]+s[_+1],16))}else for(var _=0;_<s.length;_++){var M=s.charCodeAt(_),b=M>>8,S=M&255;b?w.push(b,S):w.push(S)}return w}i.toArray=a;function h(s){return s.length===1?"0"+s:s}i.zero2=h;function g(s){for(var x="",w=0;w<s.length;w++)x+=h(s[w].toString(16));return x}i.toHex=g,i.encode=function(x,w){return w==="hex"?g(x):x}}($h)),$h}var cp;function bi(){return cp||(cp=1,function(c){var i=c,a=Vi(),h=Cn,g=gg();i.assert=h,i.toArray=g.toArray,i.zero2=g.zero2,i.toHex=g.toHex,i.encode=g.encode;function s(b,S,E){var D=new Array(Math.max(b.bitLength(),E)+1);D.fill(0);for(var I=1<<S+1,O=b.clone(),N=0;N<D.length;N++){var L,R=O.andln(I-1);O.isOdd()?(R>(I>>1)-1?L=(I>>1)-R:L=R,O.isubn(L)):L=0,D[N]=L,O.iushrn(1)}return D}i.getNAF=s;function x(b,S){var E=[[],[]];b=b.clone(),S=S.clone();for(var D=0,I=0,O;b.cmpn(-D)>0||S.cmpn(-I)>0;){var N=b.andln(3)+D&3,L=S.andln(3)+I&3;N===3&&(N=-1),L===3&&(L=-1);var R;N&1?(O=b.andln(7)+D&7,(O===3||O===5)&&L===2?R=-N:R=N):R=0,E[0].push(R);var B;L&1?(O=S.andln(7)+I&7,(O===3||O===5)&&N===2?B=-L:B=L):B=0,E[1].push(B),2*D===R+1&&(D=1-D),2*I===B+1&&(I=1-I),b.iushrn(1),S.iushrn(1)}return E}i.getJSF=x;function w(b,S,E){var D="_"+S;b.prototype[S]=function(){return this[D]!==void 0?this[D]:this[D]=E.call(this)}}i.cachedProperty=w;function _(b){return typeof b=="string"?i.toArray(b,"hex"):b}i.parseBytes=_;function M(b){return new a(b,"hex","le")}i.intFromLE=M}(Fh)),Fh}var zh={},jh,lp;function Uo(){if(lp)return jh;lp=1;var c=Vi(),i=bi(),a=i.getNAF,h=i.getJSF,g=i.assert;function s(w,_){this.type=w,this.p=new c(_.p,16),this.red=_.prime?c.red(_.prime):c.mont(this.p),this.zero=new c(0).toRed(this.red),this.one=new c(1).toRed(this.red),this.two=new c(2).toRed(this.red),this.n=_.n&&new c(_.n,16),this.g=_.g&&this.pointFromJSON(_.g,_.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var M=this.n&&this.p.div(this.n);!M||M.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}jh=s,s.prototype.point=function(){throw new Error("Not implemented")},s.prototype.validate=function(){throw new Error("Not implemented")},s.prototype._fixedNafMul=function(_,M){g(_.precomputed);var b=_._getDoubles(),S=a(M,1,this._bitLength),E=(1<<b.step+1)-(b.step%2===0?2:1);E/=3;var D=[],I,O;for(I=0;I<S.length;I+=b.step){O=0;for(var N=I+b.step-1;N>=I;N--)O=(O<<1)+S[N];D.push(O)}for(var L=this.jpoint(null,null,null),R=this.jpoint(null,null,null),B=E;B>0;B--){for(I=0;I<D.length;I++)O=D[I],O===B?R=R.mixedAdd(b.points[I]):O===-B&&(R=R.mixedAdd(b.points[I].neg()));L=L.add(R)}return L.toP()},s.prototype._wnafMul=function(_,M){var b=4,S=_._getNAFPoints(b);b=S.wnd;for(var E=S.points,D=a(M,b,this._bitLength),I=this.jpoint(null,null,null),O=D.length-1;O>=0;O--){for(var N=0;O>=0&&D[O]===0;O--)N++;if(O>=0&&N++,I=I.dblp(N),O<0)break;var L=D[O];g(L!==0),_.type==="affine"?L>0?I=I.mixedAdd(E[L-1>>1]):I=I.mixedAdd(E[-L-1>>1].neg()):L>0?I=I.add(E[L-1>>1]):I=I.add(E[-L-1>>1].neg())}return _.type==="affine"?I.toP():I},s.prototype._wnafMulAdd=function(_,M,b,S,E){var D=this._wnafT1,I=this._wnafT2,O=this._wnafT3,N=0,L,R,B;for(L=0;L<S;L++){B=M[L];var T=B._getNAFPoints(_);D[L]=T.wnd,I[L]=T.points}for(L=S-1;L>=1;L-=2){var U=L-1,k=L;if(D[U]!==1||D[k]!==1){O[U]=a(b[U],D[U],this._bitLength),O[k]=a(b[k],D[k],this._bitLength),N=Math.max(O[U].length,N),N=Math.max(O[k].length,N);continue}var P=[M[U],null,null,M[k]];M[U].y.cmp(M[k].y)===0?(P[1]=M[U].add(M[k]),P[2]=M[U].toJ().mixedAdd(M[k].neg())):M[U].y.cmp(M[k].y.redNeg())===0?(P[1]=M[U].toJ().mixedAdd(M[k]),P[2]=M[U].add(M[k].neg())):(P[1]=M[U].toJ().mixedAdd(M[k]),P[2]=M[U].toJ().mixedAdd(M[k].neg()));var F=[-3,-1,-5,-7,0,7,5,1,3],G=h(b[U],b[k]);for(N=Math.max(G[0].length,N),O[U]=new Array(N),O[k]=new Array(N),R=0;R<N;R++){var nt=G[0][R]|0,v=G[1][R]|0;O[U][R]=F[(nt+1)*3+(v+1)],O[k][R]=0,I[U]=P}}var t=this.jpoint(null,null,null),r=this._wnafT4;for(L=N;L>=0;L--){for(var n=0;L>=0;){var o=!0;for(R=0;R<S;R++)r[R]=O[R][L]|0,r[R]!==0&&(o=!1);if(!o)break;n++,L--}if(L>=0&&n++,t=t.dblp(n),L<0)break;for(R=0;R<S;R++){var d=r[R];d!==0&&(d>0?B=I[R][d-1>>1]:d<0&&(B=I[R][-d-1>>1].neg()),B.type==="affine"?t=t.mixedAdd(B):t=t.add(B))}}for(L=0;L<S;L++)I[L]=null;return E?t:t.toP()};function x(w,_){this.curve=w,this.type=_,this.precomputed=null}return s.BasePoint=x,x.prototype.eq=function(){throw new Error("Not implemented")},x.prototype.validate=function(){return this.curve.validate(this)},s.prototype.decodePoint=function(_,M){_=i.toArray(_,M);var b=this.p.byteLength();if((_[0]===4||_[0]===6||_[0]===7)&&_.length-1===2*b){_[0]===6?g(_[_.length-1]%2===0):_[0]===7&&g(_[_.length-1]%2===1);var S=this.point(_.slice(1,1+b),_.slice(1+b,1+2*b));return S}else if((_[0]===2||_[0]===3)&&_.length-1===b)return this.pointFromX(_.slice(1,1+b),_[0]===3);throw new Error("Unknown point format")},x.prototype.encodeCompressed=function(_){return this.encode(_,!0)},x.prototype._encode=function(_){var M=this.curve.p.byteLength(),b=this.getX().toArray("be",M);return _?[this.getY().isEven()?2:3].concat(b):[4].concat(b,this.getY().toArray("be",M))},x.prototype.encode=function(_,M){return i.encode(this._encode(M),_)},x.prototype.precompute=function(_){if(this.precomputed)return this;var M={doubles:null,naf:null,beta:null};return M.naf=this._getNAFPoints(8),M.doubles=this._getDoubles(4,_),M.beta=this._getBeta(),this.precomputed=M,this},x.prototype._hasDoubles=function(_){if(!this.precomputed)return!1;var M=this.precomputed.doubles;return M?M.points.length>=Math.ceil((_.bitLength()+1)/M.step):!1},x.prototype._getDoubles=function(_,M){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var b=[this],S=this,E=0;E<M;E+=_){for(var D=0;D<_;D++)S=S.dbl();b.push(S)}return{step:_,points:b}},x.prototype._getNAFPoints=function(_){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var M=[this],b=(1<<_)-1,S=b===1?null:this.dbl(),E=1;E<b;E++)M[E]=M[E-1].add(S);return{wnd:_,points:M}},x.prototype._getBeta=function(){return null},x.prototype.dblp=function(_){for(var M=this,b=0;b<_;b++)M=M.dbl();return M},jh}var Hh,dp;function h_(){if(dp)return Hh;dp=1;var c=bi(),i=Vi(),a=sr,h=Uo(),g=c.assert;function s(_){h.call(this,"short",_),this.a=new i(_.a,16).toRed(this.red),this.b=new i(_.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(_),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}a(s,h),Hh=s,s.prototype._getEndomorphism=function(M){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var b,S;if(M.beta)b=new i(M.beta,16).toRed(this.red);else{var E=this._getEndoRoots(this.p);b=E[0].cmp(E[1])<0?E[0]:E[1],b=b.toRed(this.red)}if(M.lambda)S=new i(M.lambda,16);else{var D=this._getEndoRoots(this.n);this.g.mul(D[0]).x.cmp(this.g.x.redMul(b))===0?S=D[0]:(S=D[1],g(this.g.mul(S).x.cmp(this.g.x.redMul(b))===0))}var I;return M.basis?I=M.basis.map(function(O){return{a:new i(O.a,16),b:new i(O.b,16)}}):I=this._getEndoBasis(S),{beta:b,lambda:S,basis:I}}},s.prototype._getEndoRoots=function(M){var b=M===this.p?this.red:i.mont(M),S=new i(2).toRed(b).redInvm(),E=S.redNeg(),D=new i(3).toRed(b).redNeg().redSqrt().redMul(S),I=E.redAdd(D).fromRed(),O=E.redSub(D).fromRed();return[I,O]},s.prototype._getEndoBasis=function(M){for(var b=this.n.ushrn(Math.floor(this.n.bitLength()/2)),S=M,E=this.n.clone(),D=new i(1),I=new i(0),O=new i(0),N=new i(1),L,R,B,T,U,k,P,F=0,G,nt;S.cmpn(0)!==0;){var v=E.div(S);G=E.sub(v.mul(S)),nt=O.sub(v.mul(D));var t=N.sub(v.mul(I));if(!B&&G.cmp(b)<0)L=P.neg(),R=D,B=G.neg(),T=nt;else if(B&&++F===2)break;P=G,E=S,S=G,O=D,D=nt,N=I,I=t}U=G.neg(),k=nt;var r=B.sqr().add(T.sqr()),n=U.sqr().add(k.sqr());return n.cmp(r)>=0&&(U=L,k=R),B.negative&&(B=B.neg(),T=T.neg()),U.negative&&(U=U.neg(),k=k.neg()),[{a:B,b:T},{a:U,b:k}]},s.prototype._endoSplit=function(M){var b=this.endo.basis,S=b[0],E=b[1],D=E.b.mul(M).divRound(this.n),I=S.b.neg().mul(M).divRound(this.n),O=D.mul(S.a),N=I.mul(E.a),L=D.mul(S.b),R=I.mul(E.b),B=M.sub(O).sub(N),T=L.add(R).neg();return{k1:B,k2:T}},s.prototype.pointFromX=function(M,b){M=new i(M,16),M.red||(M=M.toRed(this.red));var S=M.redSqr().redMul(M).redIAdd(M.redMul(this.a)).redIAdd(this.b),E=S.redSqrt();if(E.redSqr().redSub(S).cmp(this.zero)!==0)throw new Error("invalid point");var D=E.fromRed().isOdd();return(b&&!D||!b&&D)&&(E=E.redNeg()),this.point(M,E)},s.prototype.validate=function(M){if(M.inf)return!0;var b=M.x,S=M.y,E=this.a.redMul(b),D=b.redSqr().redMul(b).redIAdd(E).redIAdd(this.b);return S.redSqr().redISub(D).cmpn(0)===0},s.prototype._endoWnafMulAdd=function(M,b,S){for(var E=this._endoWnafT1,D=this._endoWnafT2,I=0;I<M.length;I++){var O=this._endoSplit(b[I]),N=M[I],L=N._getBeta();O.k1.negative&&(O.k1.ineg(),N=N.neg(!0)),O.k2.negative&&(O.k2.ineg(),L=L.neg(!0)),E[I*2]=N,E[I*2+1]=L,D[I*2]=O.k1,D[I*2+1]=O.k2}for(var R=this._wnafMulAdd(1,E,D,I*2,S),B=0;B<I*2;B++)E[B]=null,D[B]=null;return R};function x(_,M,b,S){h.BasePoint.call(this,_,"affine"),M===null&&b===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(M,16),this.y=new i(b,16),S&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}a(x,h.BasePoint),s.prototype.point=function(M,b,S){return new x(this,M,b,S)},s.prototype.pointFromJSON=function(M,b){return x.fromJSON(this,M,b)},x.prototype._getBeta=function(){if(this.curve.endo){var M=this.precomputed;if(M&&M.beta)return M.beta;var b=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(M){var S=this.curve,E=function(D){return S.point(D.x.redMul(S.endo.beta),D.y)};M.beta=b,b.precomputed={beta:null,naf:M.naf&&{wnd:M.naf.wnd,points:M.naf.points.map(E)},doubles:M.doubles&&{step:M.doubles.step,points:M.doubles.points.map(E)}}}return b}},x.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},x.fromJSON=function(M,b,S){typeof b=="string"&&(b=JSON.parse(b));var E=M.point(b[0],b[1],S);if(!b[2])return E;function D(O){return M.point(O[0],O[1],S)}var I=b[2];return E.precomputed={beta:null,doubles:I.doubles&&{step:I.doubles.step,points:[E].concat(I.doubles.points.map(D))},naf:I.naf&&{wnd:I.naf.wnd,points:[E].concat(I.naf.points.map(D))}},E},x.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},x.prototype.isInfinity=function(){return this.inf},x.prototype.add=function(M){if(this.inf)return M;if(M.inf)return this;if(this.eq(M))return this.dbl();if(this.neg().eq(M))return this.curve.point(null,null);if(this.x.cmp(M.x)===0)return this.curve.point(null,null);var b=this.y.redSub(M.y);b.cmpn(0)!==0&&(b=b.redMul(this.x.redSub(M.x).redInvm()));var S=b.redSqr().redISub(this.x).redISub(M.x),E=b.redMul(this.x.redSub(S)).redISub(this.y);return this.curve.point(S,E)},x.prototype.dbl=function(){if(this.inf)return this;var M=this.y.redAdd(this.y);if(M.cmpn(0)===0)return this.curve.point(null,null);var b=this.curve.a,S=this.x.redSqr(),E=M.redInvm(),D=S.redAdd(S).redIAdd(S).redIAdd(b).redMul(E),I=D.redSqr().redISub(this.x.redAdd(this.x)),O=D.redMul(this.x.redSub(I)).redISub(this.y);return this.curve.point(I,O)},x.prototype.getX=function(){return this.x.fromRed()},x.prototype.getY=function(){return this.y.fromRed()},x.prototype.mul=function(M){return M=new i(M,16),this.isInfinity()?this:this._hasDoubles(M)?this.curve._fixedNafMul(this,M):this.curve.endo?this.curve._endoWnafMulAdd([this],[M]):this.curve._wnafMul(this,M)},x.prototype.mulAdd=function(M,b,S){var E=[this,b],D=[M,S];return this.curve.endo?this.curve._endoWnafMulAdd(E,D):this.curve._wnafMulAdd(1,E,D,2)},x.prototype.jmulAdd=function(M,b,S){var E=[this,b],D=[M,S];return this.curve.endo?this.curve._endoWnafMulAdd(E,D,!0):this.curve._wnafMulAdd(1,E,D,2,!0)},x.prototype.eq=function(M){return this===M||this.inf===M.inf&&(this.inf||this.x.cmp(M.x)===0&&this.y.cmp(M.y)===0)},x.prototype.neg=function(M){if(this.inf)return this;var b=this.curve.point(this.x,this.y.redNeg());if(M&&this.precomputed){var S=this.precomputed,E=function(D){return D.neg()};b.precomputed={naf:S.naf&&{wnd:S.naf.wnd,points:S.naf.points.map(E)},doubles:S.doubles&&{step:S.doubles.step,points:S.doubles.points.map(E)}}}return b},x.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var M=this.curve.jpoint(this.x,this.y,this.curve.one);return M};function w(_,M,b,S){h.BasePoint.call(this,_,"jacobian"),M===null&&b===null&&S===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(M,16),this.y=new i(b,16),this.z=new i(S,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return a(w,h.BasePoint),s.prototype.jpoint=function(M,b,S){return new w(this,M,b,S)},w.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var M=this.z.redInvm(),b=M.redSqr(),S=this.x.redMul(b),E=this.y.redMul(b).redMul(M);return this.curve.point(S,E)},w.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},w.prototype.add=function(M){if(this.isInfinity())return M;if(M.isInfinity())return this;var b=M.z.redSqr(),S=this.z.redSqr(),E=this.x.redMul(b),D=M.x.redMul(S),I=this.y.redMul(b.redMul(M.z)),O=M.y.redMul(S.redMul(this.z)),N=E.redSub(D),L=I.redSub(O);if(N.cmpn(0)===0)return L.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var R=N.redSqr(),B=R.redMul(N),T=E.redMul(R),U=L.redSqr().redIAdd(B).redISub(T).redISub(T),k=L.redMul(T.redISub(U)).redISub(I.redMul(B)),P=this.z.redMul(M.z).redMul(N);return this.curve.jpoint(U,k,P)},w.prototype.mixedAdd=function(M){if(this.isInfinity())return M.toJ();if(M.isInfinity())return this;var b=this.z.redSqr(),S=this.x,E=M.x.redMul(b),D=this.y,I=M.y.redMul(b).redMul(this.z),O=S.redSub(E),N=D.redSub(I);if(O.cmpn(0)===0)return N.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var L=O.redSqr(),R=L.redMul(O),B=S.redMul(L),T=N.redSqr().redIAdd(R).redISub(B).redISub(B),U=N.redMul(B.redISub(T)).redISub(D.redMul(R)),k=this.z.redMul(O);return this.curve.jpoint(T,U,k)},w.prototype.dblp=function(M){if(M===0)return this;if(this.isInfinity())return this;if(!M)return this.dbl();var b;if(this.curve.zeroA||this.curve.threeA){var S=this;for(b=0;b<M;b++)S=S.dbl();return S}var E=this.curve.a,D=this.curve.tinv,I=this.x,O=this.y,N=this.z,L=N.redSqr().redSqr(),R=O.redAdd(O);for(b=0;b<M;b++){var B=I.redSqr(),T=R.redSqr(),U=T.redSqr(),k=B.redAdd(B).redIAdd(B).redIAdd(E.redMul(L)),P=I.redMul(T),F=k.redSqr().redISub(P.redAdd(P)),G=P.redISub(F),nt=k.redMul(G);nt=nt.redIAdd(nt).redISub(U);var v=R.redMul(N);b+1<M&&(L=L.redMul(U)),I=F,N=v,R=nt}return this.curve.jpoint(I,R.redMul(D),N)},w.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},w.prototype._zeroDbl=function(){var M,b,S;if(this.zOne){var E=this.x.redSqr(),D=this.y.redSqr(),I=D.redSqr(),O=this.x.redAdd(D).redSqr().redISub(E).redISub(I);O=O.redIAdd(O);var N=E.redAdd(E).redIAdd(E),L=N.redSqr().redISub(O).redISub(O),R=I.redIAdd(I);R=R.redIAdd(R),R=R.redIAdd(R),M=L,b=N.redMul(O.redISub(L)).redISub(R),S=this.y.redAdd(this.y)}else{var B=this.x.redSqr(),T=this.y.redSqr(),U=T.redSqr(),k=this.x.redAdd(T).redSqr().redISub(B).redISub(U);k=k.redIAdd(k);var P=B.redAdd(B).redIAdd(B),F=P.redSqr(),G=U.redIAdd(U);G=G.redIAdd(G),G=G.redIAdd(G),M=F.redISub(k).redISub(k),b=P.redMul(k.redISub(M)).redISub(G),S=this.y.redMul(this.z),S=S.redIAdd(S)}return this.curve.jpoint(M,b,S)},w.prototype._threeDbl=function(){var M,b,S;if(this.zOne){var E=this.x.redSqr(),D=this.y.redSqr(),I=D.redSqr(),O=this.x.redAdd(D).redSqr().redISub(E).redISub(I);O=O.redIAdd(O);var N=E.redAdd(E).redIAdd(E).redIAdd(this.curve.a),L=N.redSqr().redISub(O).redISub(O);M=L;var R=I.redIAdd(I);R=R.redIAdd(R),R=R.redIAdd(R),b=N.redMul(O.redISub(L)).redISub(R),S=this.y.redAdd(this.y)}else{var B=this.z.redSqr(),T=this.y.redSqr(),U=this.x.redMul(T),k=this.x.redSub(B).redMul(this.x.redAdd(B));k=k.redAdd(k).redIAdd(k);var P=U.redIAdd(U);P=P.redIAdd(P);var F=P.redAdd(P);M=k.redSqr().redISub(F),S=this.y.redAdd(this.z).redSqr().redISub(T).redISub(B);var G=T.redSqr();G=G.redIAdd(G),G=G.redIAdd(G),G=G.redIAdd(G),b=k.redMul(P.redISub(M)).redISub(G)}return this.curve.jpoint(M,b,S)},w.prototype._dbl=function(){var M=this.curve.a,b=this.x,S=this.y,E=this.z,D=E.redSqr().redSqr(),I=b.redSqr(),O=S.redSqr(),N=I.redAdd(I).redIAdd(I).redIAdd(M.redMul(D)),L=b.redAdd(b);L=L.redIAdd(L);var R=L.redMul(O),B=N.redSqr().redISub(R.redAdd(R)),T=R.redISub(B),U=O.redSqr();U=U.redIAdd(U),U=U.redIAdd(U),U=U.redIAdd(U);var k=N.redMul(T).redISub(U),P=S.redAdd(S).redMul(E);return this.curve.jpoint(B,k,P)},w.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var M=this.x.redSqr(),b=this.y.redSqr(),S=this.z.redSqr(),E=b.redSqr(),D=M.redAdd(M).redIAdd(M),I=D.redSqr(),O=this.x.redAdd(b).redSqr().redISub(M).redISub(E);O=O.redIAdd(O),O=O.redAdd(O).redIAdd(O),O=O.redISub(I);var N=O.redSqr(),L=E.redIAdd(E);L=L.redIAdd(L),L=L.redIAdd(L),L=L.redIAdd(L);var R=D.redIAdd(O).redSqr().redISub(I).redISub(N).redISub(L),B=b.redMul(R);B=B.redIAdd(B),B=B.redIAdd(B);var T=this.x.redMul(N).redISub(B);T=T.redIAdd(T),T=T.redIAdd(T);var U=this.y.redMul(R.redMul(L.redISub(R)).redISub(O.redMul(N)));U=U.redIAdd(U),U=U.redIAdd(U),U=U.redIAdd(U);var k=this.z.redAdd(O).redSqr().redISub(S).redISub(N);return this.curve.jpoint(T,U,k)},w.prototype.mul=function(M,b){return M=new i(M,b),this.curve._wnafMul(this,M)},w.prototype.eq=function(M){if(M.type==="affine")return this.eq(M.toJ());if(this===M)return!0;var b=this.z.redSqr(),S=M.z.redSqr();if(this.x.redMul(S).redISub(M.x.redMul(b)).cmpn(0)!==0)return!1;var E=b.redMul(this.z),D=S.redMul(M.z);return this.y.redMul(D).redISub(M.y.redMul(E)).cmpn(0)===0},w.prototype.eqXToP=function(M){var b=this.z.redSqr(),S=M.toRed(this.curve.red).redMul(b);if(this.x.cmp(S)===0)return!0;for(var E=M.clone(),D=this.curve.redN.redMul(b);;){if(E.iadd(this.curve.n),E.cmp(this.curve.p)>=0)return!1;if(S.redIAdd(D),this.x.cmp(S)===0)return!0}},w.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},w.prototype.isInfinity=function(){return this.z.cmpn(0)===0},Hh}var Kh,pp;function u_(){if(pp)return Kh;pp=1;var c=Vi(),i=sr,a=Uo(),h=bi();function g(x){a.call(this,"mont",x),this.a=new c(x.a,16).toRed(this.red),this.b=new c(x.b,16).toRed(this.red),this.i4=new c(4).toRed(this.red).redInvm(),this.two=new c(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}i(g,a),Kh=g,g.prototype.validate=function(w){var _=w.normalize().x,M=_.redSqr(),b=M.redMul(_).redAdd(M.redMul(this.a)).redAdd(_),S=b.redSqrt();return S.redSqr().cmp(b)===0};function s(x,w,_){a.BasePoint.call(this,x,"projective"),w===null&&_===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new c(w,16),this.z=new c(_,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return i(s,a.BasePoint),g.prototype.decodePoint=function(w,_){return this.point(h.toArray(w,_),1)},g.prototype.point=function(w,_){return new s(this,w,_)},g.prototype.pointFromJSON=function(w){return s.fromJSON(this,w)},s.prototype.precompute=function(){},s.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},s.fromJSON=function(w,_){return new s(w,_[0],_[1]||w.one)},s.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},s.prototype.isInfinity=function(){return this.z.cmpn(0)===0},s.prototype.dbl=function(){var w=this.x.redAdd(this.z),_=w.redSqr(),M=this.x.redSub(this.z),b=M.redSqr(),S=_.redSub(b),E=_.redMul(b),D=S.redMul(b.redAdd(this.curve.a24.redMul(S)));return this.curve.point(E,D)},s.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.diffAdd=function(w,_){var M=this.x.redAdd(this.z),b=this.x.redSub(this.z),S=w.x.redAdd(w.z),E=w.x.redSub(w.z),D=E.redMul(M),I=S.redMul(b),O=_.z.redMul(D.redAdd(I).redSqr()),N=_.x.redMul(D.redISub(I).redSqr());return this.curve.point(O,N)},s.prototype.mul=function(w){for(var _=w.clone(),M=this,b=this.curve.point(null,null),S=this,E=[];_.cmpn(0)!==0;_.iushrn(1))E.push(_.andln(1));for(var D=E.length-1;D>=0;D--)E[D]===0?(M=M.diffAdd(b,S),b=b.dbl()):(b=M.diffAdd(b,S),M=M.dbl());return b},s.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.eq=function(w){return this.getX().cmp(w.getX())===0},s.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},s.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Kh}var Vh,vp;function c_(){if(vp)return Vh;vp=1;var c=bi(),i=Vi(),a=sr,h=Uo(),g=c.assert;function s(w){this.twisted=(w.a|0)!==1,this.mOneA=this.twisted&&(w.a|0)===-1,this.extended=this.mOneA,h.call(this,"edwards",w),this.a=new i(w.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(w.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(w.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),g(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(w.c|0)===1}a(s,h),Vh=s,s.prototype._mulA=function(_){return this.mOneA?_.redNeg():this.a.redMul(_)},s.prototype._mulC=function(_){return this.oneC?_:this.c.redMul(_)},s.prototype.jpoint=function(_,M,b,S){return this.point(_,M,b,S)},s.prototype.pointFromX=function(_,M){_=new i(_,16),_.red||(_=_.toRed(this.red));var b=_.redSqr(),S=this.c2.redSub(this.a.redMul(b)),E=this.one.redSub(this.c2.redMul(this.d).redMul(b)),D=S.redMul(E.redInvm()),I=D.redSqrt();if(I.redSqr().redSub(D).cmp(this.zero)!==0)throw new Error("invalid point");var O=I.fromRed().isOdd();return(M&&!O||!M&&O)&&(I=I.redNeg()),this.point(_,I)},s.prototype.pointFromY=function(_,M){_=new i(_,16),_.red||(_=_.toRed(this.red));var b=_.redSqr(),S=b.redSub(this.c2),E=b.redMul(this.d).redMul(this.c2).redSub(this.a),D=S.redMul(E.redInvm());if(D.cmp(this.zero)===0){if(M)throw new Error("invalid point");return this.point(this.zero,_)}var I=D.redSqrt();if(I.redSqr().redSub(D).cmp(this.zero)!==0)throw new Error("invalid point");return I.fromRed().isOdd()!==M&&(I=I.redNeg()),this.point(I,_)},s.prototype.validate=function(_){if(_.isInfinity())return!0;_.normalize();var M=_.x.redSqr(),b=_.y.redSqr(),S=M.redMul(this.a).redAdd(b),E=this.c2.redMul(this.one.redAdd(this.d.redMul(M).redMul(b)));return S.cmp(E)===0};function x(w,_,M,b,S){h.BasePoint.call(this,w,"projective"),_===null&&M===null&&b===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(_,16),this.y=new i(M,16),this.z=b?new i(b,16):this.curve.one,this.t=S&&new i(S,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return a(x,h.BasePoint),s.prototype.pointFromJSON=function(_){return x.fromJSON(this,_)},s.prototype.point=function(_,M,b,S){return new x(this,_,M,b,S)},x.fromJSON=function(_,M){return new x(_,M[0],M[1],M[2])},x.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},x.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},x.prototype._extDbl=function(){var _=this.x.redSqr(),M=this.y.redSqr(),b=this.z.redSqr();b=b.redIAdd(b);var S=this.curve._mulA(_),E=this.x.redAdd(this.y).redSqr().redISub(_).redISub(M),D=S.redAdd(M),I=D.redSub(b),O=S.redSub(M),N=E.redMul(I),L=D.redMul(O),R=E.redMul(O),B=I.redMul(D);return this.curve.point(N,L,B,R)},x.prototype._projDbl=function(){var _=this.x.redAdd(this.y).redSqr(),M=this.x.redSqr(),b=this.y.redSqr(),S,E,D,I,O,N;if(this.curve.twisted){I=this.curve._mulA(M);var L=I.redAdd(b);this.zOne?(S=_.redSub(M).redSub(b).redMul(L.redSub(this.curve.two)),E=L.redMul(I.redSub(b)),D=L.redSqr().redSub(L).redSub(L)):(O=this.z.redSqr(),N=L.redSub(O).redISub(O),S=_.redSub(M).redISub(b).redMul(N),E=L.redMul(I.redSub(b)),D=L.redMul(N))}else I=M.redAdd(b),O=this.curve._mulC(this.z).redSqr(),N=I.redSub(O).redSub(O),S=this.curve._mulC(_.redISub(I)).redMul(N),E=this.curve._mulC(I).redMul(M.redISub(b)),D=I.redMul(N);return this.curve.point(S,E,D)},x.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},x.prototype._extAdd=function(_){var M=this.y.redSub(this.x).redMul(_.y.redSub(_.x)),b=this.y.redAdd(this.x).redMul(_.y.redAdd(_.x)),S=this.t.redMul(this.curve.dd).redMul(_.t),E=this.z.redMul(_.z.redAdd(_.z)),D=b.redSub(M),I=E.redSub(S),O=E.redAdd(S),N=b.redAdd(M),L=D.redMul(I),R=O.redMul(N),B=D.redMul(N),T=I.redMul(O);return this.curve.point(L,R,T,B)},x.prototype._projAdd=function(_){var M=this.z.redMul(_.z),b=M.redSqr(),S=this.x.redMul(_.x),E=this.y.redMul(_.y),D=this.curve.d.redMul(S).redMul(E),I=b.redSub(D),O=b.redAdd(D),N=this.x.redAdd(this.y).redMul(_.x.redAdd(_.y)).redISub(S).redISub(E),L=M.redMul(I).redMul(N),R,B;return this.curve.twisted?(R=M.redMul(O).redMul(E.redSub(this.curve._mulA(S))),B=I.redMul(O)):(R=M.redMul(O).redMul(E.redSub(S)),B=this.curve._mulC(I).redMul(O)),this.curve.point(L,R,B)},x.prototype.add=function(_){return this.isInfinity()?_:_.isInfinity()?this:this.curve.extended?this._extAdd(_):this._projAdd(_)},x.prototype.mul=function(_){return this._hasDoubles(_)?this.curve._fixedNafMul(this,_):this.curve._wnafMul(this,_)},x.prototype.mulAdd=function(_,M,b){return this.curve._wnafMulAdd(1,[this,M],[_,b],2,!1)},x.prototype.jmulAdd=function(_,M,b){return this.curve._wnafMulAdd(1,[this,M],[_,b],2,!0)},x.prototype.normalize=function(){if(this.zOne)return this;var _=this.z.redInvm();return this.x=this.x.redMul(_),this.y=this.y.redMul(_),this.t&&(this.t=this.t.redMul(_)),this.z=this.curve.one,this.zOne=!0,this},x.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},x.prototype.getX=function(){return this.normalize(),this.x.fromRed()},x.prototype.getY=function(){return this.normalize(),this.y.fromRed()},x.prototype.eq=function(_){return this===_||this.getX().cmp(_.getX())===0&&this.getY().cmp(_.getY())===0},x.prototype.eqXToP=function(_){var M=_.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(M)===0)return!0;for(var b=_.clone(),S=this.curve.redN.redMul(this.z);;){if(b.iadd(this.curve.n),b.cmp(this.curve.p)>=0)return!1;if(M.redIAdd(S),this.x.cmp(M)===0)return!0}},x.prototype.toP=x.prototype.normalize,x.prototype.mixedAdd=x.prototype.add,Vh}var gp;function mg(){return gp||(gp=1,function(c){var i=c;i.base=Uo(),i.short=h_(),i.mont=u_(),i.edwards=c_()}(zh)),zh}var Gh={},Wh,mp;function l_(){return mp||(mp=1,Wh={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),Wh}var bp;function Nu(){return bp||(bp=1,function(c){var i=c,a=gu,h=mg(),g=bi(),s=g.assert;function x(M){M.type==="short"?this.curve=new h.short(M):M.type==="edwards"?this.curve=new h.edwards(M):this.curve=new h.mont(M),this.g=this.curve.g,this.n=this.curve.n,this.hash=M.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}i.PresetCurve=x;function w(M,b){Object.defineProperty(i,M,{configurable:!0,enumerable:!0,get:function(){var S=new x(b);return Object.defineProperty(i,M,{configurable:!0,enumerable:!0,value:S}),S}})}w("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),w("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),w("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),w("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),w("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),w("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),w("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var _;try{_=l_()}catch{_=void 0}w("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",_]})}(Gh)),Gh}var Zh,yp;function d_(){if(yp)return Zh;yp=1;var c=gu,i=gg(),a=Cn;function h(g){if(!(this instanceof h))return new h(g);this.hash=g.hash,this.predResist=!!g.predResist,this.outLen=this.hash.outSize,this.minEntropy=g.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var s=i.toArray(g.entropy,g.entropyEnc||"hex"),x=i.toArray(g.nonce,g.nonceEnc||"hex"),w=i.toArray(g.pers,g.persEnc||"hex");a(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(s,x,w)}return Zh=h,h.prototype._init=function(s,x,w){var _=s.concat(x).concat(w);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var M=0;M<this.V.length;M++)this.K[M]=0,this.V[M]=1;this._update(_),this._reseed=1,this.reseedInterval=281474976710656},h.prototype._hmac=function(){return new c.hmac(this.hash,this.K)},h.prototype._update=function(s){var x=this._hmac().update(this.V).update([0]);s&&(x=x.update(s)),this.K=x.digest(),this.V=this._hmac().update(this.V).digest(),s&&(this.K=this._hmac().update(this.V).update([1]).update(s).digest(),this.V=this._hmac().update(this.V).digest())},h.prototype.reseed=function(s,x,w,_){typeof x!="string"&&(_=w,w=x,x=null),s=i.toArray(s,x),w=i.toArray(w,_),a(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(s.concat(w||[])),this._reseed=1},h.prototype.generate=function(s,x,w,_){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof x!="string"&&(_=w,w=x,x=null),w&&(w=i.toArray(w,_||"hex"),this._update(w));for(var M=[];M.length<s;)this.V=this._hmac().update(this.V).digest(),M=M.concat(this.V);var b=M.slice(0,s);return this._update(w),this._reseed++,i.encode(b,x)},Zh}var Jh,wp;function p_(){if(wp)return Jh;wp=1;var c=Vi(),i=bi(),a=i.assert;function h(g,s){this.ec=g,this.priv=null,this.pub=null,s.priv&&this._importPrivate(s.priv,s.privEnc),s.pub&&this._importPublic(s.pub,s.pubEnc)}return Jh=h,h.fromPublic=function(s,x,w){return x instanceof h?x:new h(s,{pub:x,pubEnc:w})},h.fromPrivate=function(s,x,w){return x instanceof h?x:new h(s,{priv:x,privEnc:w})},h.prototype.validate=function(){var s=this.getPublic();return s.isInfinity()?{result:!1,reason:"Invalid public key"}:s.validate()?s.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},h.prototype.getPublic=function(s,x){return typeof s=="string"&&(x=s,s=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),x?this.pub.encode(x,s):this.pub},h.prototype.getPrivate=function(s){return s==="hex"?this.priv.toString(16,2):this.priv},h.prototype._importPrivate=function(s,x){this.priv=new c(s,x||16),this.priv=this.priv.umod(this.ec.curve.n)},h.prototype._importPublic=function(s,x){if(s.x||s.y){this.ec.curve.type==="mont"?a(s.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&a(s.x&&s.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(s.x,s.y);return}this.pub=this.ec.curve.decodePoint(s,x)},h.prototype.derive=function(s){return s.validate()||a(s.validate(),"public point not validated"),s.mul(this.priv).getX()},h.prototype.sign=function(s,x,w){return this.ec.sign(s,this,x,w)},h.prototype.verify=function(s,x){return this.ec.verify(s,x,this)},h.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},Jh}var Yh,_p;function v_(){if(_p)return Yh;_p=1;var c=Vi(),i=bi(),a=i.assert;function h(_,M){if(_ instanceof h)return _;this._importDER(_,M)||(a(_.r&&_.s,"Signature without r or s"),this.r=new c(_.r,16),this.s=new c(_.s,16),_.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=_.recoveryParam)}Yh=h;function g(){this.place=0}function s(_,M){var b=_[M.place++];if(!(b&128))return b;var S=b&15;if(S===0||S>4)return!1;for(var E=0,D=0,I=M.place;D<S;D++,I++)E<<=8,E|=_[I],E>>>=0;return E<=127?!1:(M.place=I,E)}function x(_){for(var M=0,b=_.length-1;!_[M]&&!(_[M+1]&128)&&M<b;)M++;return M===0?_:_.slice(M)}h.prototype._importDER=function(M,b){M=i.toArray(M,b);var S=new g;if(M[S.place++]!==48)return!1;var E=s(M,S);if(E===!1||E+S.place!==M.length||M[S.place++]!==2)return!1;var D=s(M,S);if(D===!1)return!1;var I=M.slice(S.place,D+S.place);if(S.place+=D,M[S.place++]!==2)return!1;var O=s(M,S);if(O===!1||M.length!==O+S.place)return!1;var N=M.slice(S.place,O+S.place);if(I[0]===0)if(I[1]&128)I=I.slice(1);else return!1;if(N[0]===0)if(N[1]&128)N=N.slice(1);else return!1;return this.r=new c(I),this.s=new c(N),this.recoveryParam=null,!0};function w(_,M){if(M<128){_.push(M);return}var b=1+(Math.log(M)/Math.LN2>>>3);for(_.push(b|128);--b;)_.push(M>>>(b<<3)&255);_.push(M)}return h.prototype.toDER=function(M){var b=this.r.toArray(),S=this.s.toArray();for(b[0]&128&&(b=[0].concat(b)),S[0]&128&&(S=[0].concat(S)),b=x(b),S=x(S);!S[0]&&!(S[1]&128);)S=S.slice(1);var E=[2];w(E,b.length),E=E.concat(b),E.push(2),w(E,S.length);var D=E.concat(S),I=[48];return w(I,D.length),I=I.concat(D),i.encode(I,M)},Yh}var Xh,Mp;function g_(){if(Mp)return Xh;Mp=1;var c=Vi(),i=d_(),a=bi(),h=Nu(),g=Tu(),s=a.assert,x=p_(),w=v_();function _(M){if(!(this instanceof _))return new _(M);typeof M=="string"&&(s(Object.prototype.hasOwnProperty.call(h,M),"Unknown curve "+M),M=h[M]),M instanceof h.PresetCurve&&(M={curve:M}),this.curve=M.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=M.curve.g,this.g.precompute(M.curve.n.bitLength()+1),this.hash=M.hash||M.curve.hash}return Xh=_,_.prototype.keyPair=function(b){return new x(this,b)},_.prototype.keyFromPrivate=function(b,S){return x.fromPrivate(this,b,S)},_.prototype.keyFromPublic=function(b,S){return x.fromPublic(this,b,S)},_.prototype.genKeyPair=function(b){b||(b={});for(var S=new i({hash:this.hash,pers:b.pers,persEnc:b.persEnc||"utf8",entropy:b.entropy||g(this.hash.hmacStrength),entropyEnc:b.entropy&&b.entropyEnc||"utf8",nonce:this.n.toArray()}),E=this.n.byteLength(),D=this.n.sub(new c(2));;){var I=new c(S.generate(E));if(!(I.cmp(D)>0))return I.iaddn(1),this.keyFromPrivate(I)}},_.prototype._truncateToN=function(b,S){var E=b.byteLength()*8-this.n.bitLength();return E>0&&(b=b.ushrn(E)),!S&&b.cmp(this.n)>=0?b.sub(this.n):b},_.prototype.sign=function(b,S,E,D){typeof E=="object"&&(D=E,E=null),D||(D={}),S=this.keyFromPrivate(S,E),b=this._truncateToN(new c(b,16));for(var I=this.n.byteLength(),O=S.getPrivate().toArray("be",I),N=b.toArray("be",I),L=new i({hash:this.hash,entropy:O,nonce:N,pers:D.pers,persEnc:D.persEnc||"utf8"}),R=this.n.sub(new c(1)),B=0;;B++){var T=D.k?D.k(B):new c(L.generate(this.n.byteLength()));if(T=this._truncateToN(T,!0),!(T.cmpn(1)<=0||T.cmp(R)>=0)){var U=this.g.mul(T);if(!U.isInfinity()){var k=U.getX(),P=k.umod(this.n);if(P.cmpn(0)!==0){var F=T.invm(this.n).mul(P.mul(S.getPrivate()).iadd(b));if(F=F.umod(this.n),F.cmpn(0)!==0){var G=(U.getY().isOdd()?1:0)|(k.cmp(P)!==0?2:0);return D.canonical&&F.cmp(this.nh)>0&&(F=this.n.sub(F),G^=1),new w({r:P,s:F,recoveryParam:G})}}}}}},_.prototype.verify=function(b,S,E,D){b=this._truncateToN(new c(b,16)),E=this.keyFromPublic(E,D),S=new w(S,"hex");var I=S.r,O=S.s;if(I.cmpn(1)<0||I.cmp(this.n)>=0||O.cmpn(1)<0||O.cmp(this.n)>=0)return!1;var N=O.invm(this.n),L=N.mul(b).umod(this.n),R=N.mul(I).umod(this.n),B;return this.curve._maxwellTrick?(B=this.g.jmulAdd(L,E.getPublic(),R),B.isInfinity()?!1:B.eqXToP(I)):(B=this.g.mulAdd(L,E.getPublic(),R),B.isInfinity()?!1:B.getX().umod(this.n).cmp(I)===0)},_.prototype.recoverPubKey=function(M,b,S,E){s((3&S)===S,"The recovery param is more than two bits"),b=new w(b,E);var D=this.n,I=new c(M),O=b.r,N=b.s,L=S&1,R=S>>1;if(O.cmp(this.curve.p.umod(this.curve.n))>=0&&R)throw new Error("Unable to find sencond key candinate");R?O=this.curve.pointFromX(O.add(this.curve.n),L):O=this.curve.pointFromX(O,L);var B=b.r.invm(D),T=D.sub(I).mul(B).umod(D),U=N.mul(B).umod(D);return this.g.mulAdd(T,O,U)},_.prototype.getKeyRecoveryParam=function(M,b,S,E){if(b=new w(b,E),b.recoveryParam!==null)return b.recoveryParam;for(var D=0;D<4;D++){var I;try{I=this.recoverPubKey(M,b,D)}catch{continue}if(I.eq(S))return D}throw new Error("Unable to find valid recovery factor")},Xh}var Qh,xp;function m_(){if(xp)return Qh;xp=1;var c=bi(),i=c.assert,a=c.parseBytes,h=c.cachedProperty;function g(s,x){this.eddsa=s,this._secret=a(x.secret),s.isPoint(x.pub)?this._pub=x.pub:this._pubBytes=a(x.pub)}return g.fromPublic=function(x,w){return w instanceof g?w:new g(x,{pub:w})},g.fromSecret=function(x,w){return w instanceof g?w:new g(x,{secret:w})},g.prototype.secret=function(){return this._secret},h(g,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),h(g,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),h(g,"privBytes",function(){var x=this.eddsa,w=this.hash(),_=x.encodingLength-1,M=w.slice(0,x.encodingLength);return M[0]&=248,M[_]&=127,M[_]|=64,M}),h(g,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),h(g,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),h(g,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),g.prototype.sign=function(x){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(x,this)},g.prototype.verify=function(x,w){return this.eddsa.verify(x,w,this)},g.prototype.getSecret=function(x){return i(this._secret,"KeyPair is public only"),c.encode(this.secret(),x)},g.prototype.getPublic=function(x){return c.encode(this.pubBytes(),x)},Qh=g,Qh}var t0,Ep;function b_(){if(Ep)return t0;Ep=1;var c=Vi(),i=bi(),a=i.assert,h=i.cachedProperty,g=i.parseBytes;function s(x,w){this.eddsa=x,typeof w!="object"&&(w=g(w)),Array.isArray(w)&&(w={R:w.slice(0,x.encodingLength),S:w.slice(x.encodingLength)}),a(w.R&&w.S,"Signature without R or S"),x.isPoint(w.R)&&(this._R=w.R),w.S instanceof c&&(this._S=w.S),this._Rencoded=Array.isArray(w.R)?w.R:w.Rencoded,this._Sencoded=Array.isArray(w.S)?w.S:w.Sencoded}return h(s,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),h(s,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),h(s,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),h(s,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),s.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},s.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},t0=s,t0}var e0,Sp;function y_(){if(Sp)return e0;Sp=1;var c=gu,i=Nu(),a=bi(),h=a.assert,g=a.parseBytes,s=m_(),x=b_();function w(_){if(h(_==="ed25519","only tested with ed25519 so far"),!(this instanceof w))return new w(_);_=i[_].curve,this.curve=_,this.g=_.g,this.g.precompute(_.n.bitLength()+1),this.pointClass=_.point().constructor,this.encodingLength=Math.ceil(_.n.bitLength()/8),this.hash=c.sha512}return e0=w,w.prototype.sign=function(M,b){M=g(M);var S=this.keyFromSecret(b),E=this.hashInt(S.messagePrefix(),M),D=this.g.mul(E),I=this.encodePoint(D),O=this.hashInt(I,S.pubBytes(),M).mul(S.priv()),N=E.add(O).umod(this.curve.n);return this.makeSignature({R:D,S:N,Rencoded:I})},w.prototype.verify=function(M,b,S){M=g(M),b=this.makeSignature(b);var E=this.keyFromPublic(S),D=this.hashInt(b.Rencoded(),E.pubBytes(),M),I=this.g.mul(b.S()),O=b.R().add(E.pub().mul(D));return O.eq(I)},w.prototype.hashInt=function(){for(var M=this.hash(),b=0;b<arguments.length;b++)M.update(arguments[b]);return a.intFromLE(M.digest()).umod(this.curve.n)},w.prototype.keyFromPublic=function(M){return s.fromPublic(this,M)},w.prototype.keyFromSecret=function(M){return s.fromSecret(this,M)},w.prototype.makeSignature=function(M){return M instanceof x?M:new x(this,M)},w.prototype.encodePoint=function(M){var b=M.getY().toArray("le",this.encodingLength);return b[this.encodingLength-1]|=M.getX().isOdd()?128:0,b},w.prototype.decodePoint=function(M){M=a.parseBytes(M);var b=M.length-1,S=M.slice(0,b).concat(M[b]&-129),E=(M[b]&128)!==0,D=a.intFromLE(S);return this.curve.pointFromY(D,E)},w.prototype.encodeInt=function(M){return M.toArray("le",this.encodingLength)},w.prototype.decodeInt=function(M){return a.intFromLE(M)},w.prototype.isPoint=function(M){return M instanceof this.pointClass},e0}var Ap;function qu(){return Ap||(Ap=1,function(c){var i=c;i.version=f_.version,i.utils=bi(),i.rand=Tu(),i.curve=mg(),i.curves=Nu(),i.ec=g_(),i.eddsa=y_()}(Lh)),Lh}var pi={},r0={},go={exports:{}};go.exports;var Dp;function bg(){return Dp||(Dp=1,function(c){(function(i,a){function h(v,t){if(!v)throw new Error(t||"Assertion failed")}function g(v,t){v.super_=t;var r=function(){};r.prototype=t.prototype,v.prototype=new r,v.prototype.constructor=v}function s(v,t,r){if(s.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((t==="le"||t==="be")&&(r=t,t=10),this._init(v||0,t||10,r||"be"))}typeof i=="object"?i.exports=s:a.BN=s,s.BN=s,s.wordSize=26;var x;try{typeof window<"u"&&typeof window.Buffer<"u"?x=window.Buffer:x=ns.Buffer}catch{}s.isBN=function(t){return t instanceof s?!0:t!==null&&typeof t=="object"&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,r){return t.cmp(r)>0?t:r},s.min=function(t,r){return t.cmp(r)<0?t:r},s.prototype._init=function(t,r,n){if(typeof t=="number")return this._initNumber(t,r,n);if(typeof t=="object")return this._initArray(t,r,n);r==="hex"&&(r=16),h(r===(r|0)&&r>=2&&r<=36),t=t.toString().replace(/\s+/g,"");var o=0;t[0]==="-"&&(o++,this.negative=1),o<t.length&&(r===16?this._parseHex(t,o,n):(this._parseBase(t,r,o),n==="le"&&this._initArray(this.toArray(),r,n)))},s.prototype._initNumber=function(t,r,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(h(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3),n==="le"&&this._initArray(this.toArray(),r,n)},s.prototype._initArray=function(t,r,n){if(h(typeof t.length=="number"),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d,m,y=0;if(n==="be")for(o=t.length-1,d=0;o>=0;o-=3)m=t[o]|t[o-1]<<8|t[o-2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(n==="le")for(o=0,d=0;o<t.length;o+=3)m=t[o]|t[o+1]<<8|t[o+2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this.strip()};function w(v,t){var r=v.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function _(v,t,r){var n=w(v,r);return r-1>=t&&(n|=w(v,r-1)<<4),n}s.prototype._parseHex=function(t,r,n){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d=0,m=0,y;if(n==="be")for(o=t.length-1;o>=r;o-=2)y=_(t,r,o)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8;else{var u=t.length-r;for(o=u%2===0?r+1:r;o<t.length;o+=2)y=_(t,r,o)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8}this.strip()};function M(v,t,r,n){for(var o=0,d=Math.min(v.length,r),m=t;m<d;m++){var y=v.charCodeAt(m)-48;o*=n,y>=49?o+=y-49+10:y>=17?o+=y-17+10:o+=y}return o}s.prototype._parseBase=function(t,r,n){this.words=[0],this.length=1;for(var o=0,d=1;d<=67108863;d*=r)o++;o--,d=d/r|0;for(var m=t.length-n,y=m%o,u=Math.min(m,m-y)+n,e=0,l=n;l<u;l+=o)e=M(t,l,l+o,r),this.imuln(d),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e);if(y!==0){var z=1;for(e=M(t,l,t.length,r),l=0;l<y;l++)z*=r;this.imuln(z),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e)}this.strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(t,r){t=t||10,r=r|0||1;var n;if(t===16||t==="hex"){n="";for(var o=0,d=0,m=0;m<this.length;m++){var y=this.words[m],u=((y<<o|d)&16777215).toString(16);d=y>>>24-o&16777215,d!==0||m!==this.length-1?n=b[6-u.length]+u+n:n=u+n,o+=2,o>=26&&(o-=26,m--)}for(d!==0&&(n=d.toString(16)+n);n.length%r!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}if(t===(t|0)&&t>=2&&t<=36){var e=S[t],l=E[t];n="";var z=this.clone();for(z.negative=0;!z.isZero();){var $=z.modn(l).toString(t);z=z.idivn(l),z.isZero()?n=$+n:n=b[e-$.length]+$+n}for(this.isZero()&&(n="0"+n);n.length%r!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}h(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return this.length===2?t+=this.words[1]*67108864:this.length===3&&this.words[2]===1?t+=4503599627370496+this.words[1]*67108864:this.length>2&&h(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-t:t},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(t,r){return h(typeof x<"u"),this.toArrayLike(x,t,r)},s.prototype.toArray=function(t,r){return this.toArrayLike(Array,t,r)},s.prototype.toArrayLike=function(t,r,n){var o=this.byteLength(),d=n||Math.max(1,o);h(o<=d,"byte array longer than desired length"),h(d>0,"Requested array length <= 0"),this.strip();var m=r==="le",y=new t(d),u,e,l=this.clone();if(m){for(e=0;!l.isZero();e++)u=l.andln(255),l.iushrn(8),y[e]=u;for(;e<d;e++)y[e]=0}else{for(e=0;e<d-o;e++)y[e]=0;for(e=0;!l.isZero();e++)u=l.andln(255),l.iushrn(8),y[d-e-1]=u}return y},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var r=t,n=0;return r>=4096&&(n+=13,r>>>=13),r>=64&&(n+=7,r>>>=7),r>=8&&(n+=4,r>>>=4),r>=2&&(n+=2,r>>>=2),n+r},s.prototype._zeroBits=function(t){if(t===0)return 26;var r=t,n=0;return r&8191||(n+=13,r>>>=13),r&127||(n+=7,r>>>=7),r&15||(n+=4,r>>>=4),r&3||(n+=2,r>>>=2),r&1||n++,n},s.prototype.bitLength=function(){var t=this.words[this.length-1],r=this._countBits(t);return(this.length-1)*26+r};function D(v){for(var t=new Array(v.bitLength()),r=0;r<t.length;r++){var n=r/26|0,o=r%26;t[r]=(v.words[n]&1<<o)>>>o}return t}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);if(t+=n,n!==26)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return this.negative!==0?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},s.prototype.ior=function(t){return h((this.negative|t.negative)===0),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var r;this.length>t.length?r=t:r=this;for(var n=0;n<r.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=r.length,this.strip()},s.prototype.iand=function(t){return h((this.negative|t.negative)===0),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var r,n;this.length>t.length?(r=this,n=t):(r=t,n=this);for(var o=0;o<n.length;o++)this.words[o]=r.words[o]^n.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},s.prototype.ixor=function(t){return h((this.negative|t.negative)===0),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){h(typeof t=="number"&&t>=0);var r=Math.ceil(t/26)|0,n=t%26;this._expand(r),n>0&&r--;for(var o=0;o<r;o++)this.words[o]=~this.words[o]&67108863;return n>0&&(this.words[o]=~this.words[o]&67108863>>26-n),this.strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,r){h(typeof t=="number"&&t>=0);var n=t/26|0,o=t%26;return this._expand(n+1),r?this.words[n]=this.words[n]|1<<o:this.words[n]=this.words[n]&~(1<<o),this.strip()},s.prototype.iadd=function(t){var r;if(this.negative!==0&&t.negative===0)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(this.negative===0&&t.negative!==0)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();var n,o;this.length>t.length?(n=this,o=t):(n=t,o=this);for(var d=0,m=0;m<o.length;m++)r=(n.words[m]|0)+(o.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;for(;d!==0&&m<n.length;m++)r=(n.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;if(this.length=n.length,d!==0)this.words[this.length]=d,this.length++;else if(n!==this)for(;m<n.length;m++)this.words[m]=n.words[m];return this},s.prototype.add=function(t){var r;return t.negative!==0&&this.negative===0?(t.negative=0,r=this.sub(t),t.negative^=1,r):t.negative===0&&this.negative!==0?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n=this.cmp(t);if(n===0)return this.negative=0,this.length=1,this.words[0]=0,this;var o,d;n>0?(o=this,d=t):(o=t,d=this);for(var m=0,y=0;y<d.length;y++)r=(o.words[y]|0)-(d.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;for(;m!==0&&y<o.length;y++)r=(o.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;if(m===0&&y<o.length&&o!==this)for(;y<o.length;y++)this.words[y]=o.words[y];return this.length=Math.max(this.length,y),o!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(t){return this.clone().isub(t)};function I(v,t,r){r.negative=t.negative^v.negative;var n=v.length+t.length|0;r.length=n,n=n-1|0;var o=v.words[0]|0,d=t.words[0]|0,m=o*d,y=m&67108863,u=m/67108864|0;r.words[0]=y;for(var e=1;e<n;e++){for(var l=u>>>26,z=u&67108863,$=Math.min(e,t.length-1),H=Math.max(0,e-v.length+1);H<=$;H++){var W=e-H|0;o=v.words[W]|0,d=t.words[H]|0,m=o*d+z,l+=m/67108864|0,z=m&67108863}r.words[e]=z|0,u=l|0}return u!==0?r.words[e]=u|0:r.length--,r.strip()}var O=function(t,r,n){var o=t.words,d=r.words,m=n.words,y=0,u,e,l,z=o[0]|0,$=z&8191,H=z>>>13,W=o[1]|0,tt=W&8191,Z=W>>>13,et=o[2]|0,K=et&8191,C=et>>>13,Q=o[3]|0,rt=Q&8191,st=Q>>>13,Yt=o[4]|0,gt=Yt&8191,mt=Yt>>>13,ee=o[5]|0,_t=ee&8191,Mt=ee>>>13,re=o[6]|0,ut=re&8191,pt=re>>>13,Xt=o[7]|0,vt=Xt&8191,lt=Xt>>>13,Qt=o[8]|0,ht=Qt&8191,dt=Qt>>>13,ie=o[9]|0,ct=ie&8191,bt=ie>>>13,ne=d[0]|0,yt=ne&8191,wt=ne>>>13,se=d[1]|0,Bt=se&8191,Ut=se>>>13,Fe=d[2]|0,Nt=Fe&8191,kt=Fe>>>13,ar=d[3]|0,Lt=ar&8191,Et=ar>>>13,pe=d[4]|0,St=pe&8191,At=pe>>>13,ge=d[5]|0,xt=ge&8191,Pt=ge>>>13,Me=d[6]|0,Dt=Me&8191,Ot=Me>>>13,ye=d[7]|0,Rt=ye&8191,It=ye>>>13,ue=d[8]|0,Ct=ue&8191,Tt=ue>>>13,dr=d[9]|0,Ft=dr&8191,$t=dr>>>13;n.negative=t.negative^r.negative,n.length=19,u=Math.imul($,yt),e=Math.imul($,wt),e=e+Math.imul(H,yt)|0,l=Math.imul(H,wt);var Se=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Se>>>26)|0,Se&=67108863,u=Math.imul(tt,yt),e=Math.imul(tt,wt),e=e+Math.imul(Z,yt)|0,l=Math.imul(Z,wt),u=u+Math.imul($,Bt)|0,e=e+Math.imul($,Ut)|0,e=e+Math.imul(H,Bt)|0,l=l+Math.imul(H,Ut)|0;var He=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(He>>>26)|0,He&=67108863,u=Math.imul(K,yt),e=Math.imul(K,wt),e=e+Math.imul(C,yt)|0,l=Math.imul(C,wt),u=u+Math.imul(tt,Bt)|0,e=e+Math.imul(tt,Ut)|0,e=e+Math.imul(Z,Bt)|0,l=l+Math.imul(Z,Ut)|0,u=u+Math.imul($,Nt)|0,e=e+Math.imul($,kt)|0,e=e+Math.imul(H,Nt)|0,l=l+Math.imul(H,kt)|0;var Ke=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,u=Math.imul(rt,yt),e=Math.imul(rt,wt),e=e+Math.imul(st,yt)|0,l=Math.imul(st,wt),u=u+Math.imul(K,Bt)|0,e=e+Math.imul(K,Ut)|0,e=e+Math.imul(C,Bt)|0,l=l+Math.imul(C,Ut)|0,u=u+Math.imul(tt,Nt)|0,e=e+Math.imul(tt,kt)|0,e=e+Math.imul(Z,Nt)|0,l=l+Math.imul(Z,kt)|0,u=u+Math.imul($,Lt)|0,e=e+Math.imul($,Et)|0,e=e+Math.imul(H,Lt)|0,l=l+Math.imul(H,Et)|0;var Ve=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,u=Math.imul(gt,yt),e=Math.imul(gt,wt),e=e+Math.imul(mt,yt)|0,l=Math.imul(mt,wt),u=u+Math.imul(rt,Bt)|0,e=e+Math.imul(rt,Ut)|0,e=e+Math.imul(st,Bt)|0,l=l+Math.imul(st,Ut)|0,u=u+Math.imul(K,Nt)|0,e=e+Math.imul(K,kt)|0,e=e+Math.imul(C,Nt)|0,l=l+Math.imul(C,kt)|0,u=u+Math.imul(tt,Lt)|0,e=e+Math.imul(tt,Et)|0,e=e+Math.imul(Z,Lt)|0,l=l+Math.imul(Z,Et)|0,u=u+Math.imul($,St)|0,e=e+Math.imul($,At)|0,e=e+Math.imul(H,St)|0,l=l+Math.imul(H,At)|0;var Ge=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,u=Math.imul(_t,yt),e=Math.imul(_t,wt),e=e+Math.imul(Mt,yt)|0,l=Math.imul(Mt,wt),u=u+Math.imul(gt,Bt)|0,e=e+Math.imul(gt,Ut)|0,e=e+Math.imul(mt,Bt)|0,l=l+Math.imul(mt,Ut)|0,u=u+Math.imul(rt,Nt)|0,e=e+Math.imul(rt,kt)|0,e=e+Math.imul(st,Nt)|0,l=l+Math.imul(st,kt)|0,u=u+Math.imul(K,Lt)|0,e=e+Math.imul(K,Et)|0,e=e+Math.imul(C,Lt)|0,l=l+Math.imul(C,Et)|0,u=u+Math.imul(tt,St)|0,e=e+Math.imul(tt,At)|0,e=e+Math.imul(Z,St)|0,l=l+Math.imul(Z,At)|0,u=u+Math.imul($,xt)|0,e=e+Math.imul($,Pt)|0,e=e+Math.imul(H,xt)|0,l=l+Math.imul(H,Pt)|0;var We=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(We>>>26)|0,We&=67108863,u=Math.imul(ut,yt),e=Math.imul(ut,wt),e=e+Math.imul(pt,yt)|0,l=Math.imul(pt,wt),u=u+Math.imul(_t,Bt)|0,e=e+Math.imul(_t,Ut)|0,e=e+Math.imul(Mt,Bt)|0,l=l+Math.imul(Mt,Ut)|0,u=u+Math.imul(gt,Nt)|0,e=e+Math.imul(gt,kt)|0,e=e+Math.imul(mt,Nt)|0,l=l+Math.imul(mt,kt)|0,u=u+Math.imul(rt,Lt)|0,e=e+Math.imul(rt,Et)|0,e=e+Math.imul(st,Lt)|0,l=l+Math.imul(st,Et)|0,u=u+Math.imul(K,St)|0,e=e+Math.imul(K,At)|0,e=e+Math.imul(C,St)|0,l=l+Math.imul(C,At)|0,u=u+Math.imul(tt,xt)|0,e=e+Math.imul(tt,Pt)|0,e=e+Math.imul(Z,xt)|0,l=l+Math.imul(Z,Pt)|0,u=u+Math.imul($,Dt)|0,e=e+Math.imul($,Ot)|0,e=e+Math.imul(H,Dt)|0,l=l+Math.imul(H,Ot)|0;var Oe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,u=Math.imul(vt,yt),e=Math.imul(vt,wt),e=e+Math.imul(lt,yt)|0,l=Math.imul(lt,wt),u=u+Math.imul(ut,Bt)|0,e=e+Math.imul(ut,Ut)|0,e=e+Math.imul(pt,Bt)|0,l=l+Math.imul(pt,Ut)|0,u=u+Math.imul(_t,Nt)|0,e=e+Math.imul(_t,kt)|0,e=e+Math.imul(Mt,Nt)|0,l=l+Math.imul(Mt,kt)|0,u=u+Math.imul(gt,Lt)|0,e=e+Math.imul(gt,Et)|0,e=e+Math.imul(mt,Lt)|0,l=l+Math.imul(mt,Et)|0,u=u+Math.imul(rt,St)|0,e=e+Math.imul(rt,At)|0,e=e+Math.imul(st,St)|0,l=l+Math.imul(st,At)|0,u=u+Math.imul(K,xt)|0,e=e+Math.imul(K,Pt)|0,e=e+Math.imul(C,xt)|0,l=l+Math.imul(C,Pt)|0,u=u+Math.imul(tt,Dt)|0,e=e+Math.imul(tt,Ot)|0,e=e+Math.imul(Z,Dt)|0,l=l+Math.imul(Z,Ot)|0,u=u+Math.imul($,Rt)|0,e=e+Math.imul($,It)|0,e=e+Math.imul(H,Rt)|0,l=l+Math.imul(H,It)|0;var Be=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Be>>>26)|0,Be&=67108863,u=Math.imul(ht,yt),e=Math.imul(ht,wt),e=e+Math.imul(dt,yt)|0,l=Math.imul(dt,wt),u=u+Math.imul(vt,Bt)|0,e=e+Math.imul(vt,Ut)|0,e=e+Math.imul(lt,Bt)|0,l=l+Math.imul(lt,Ut)|0,u=u+Math.imul(ut,Nt)|0,e=e+Math.imul(ut,kt)|0,e=e+Math.imul(pt,Nt)|0,l=l+Math.imul(pt,kt)|0,u=u+Math.imul(_t,Lt)|0,e=e+Math.imul(_t,Et)|0,e=e+Math.imul(Mt,Lt)|0,l=l+Math.imul(Mt,Et)|0,u=u+Math.imul(gt,St)|0,e=e+Math.imul(gt,At)|0,e=e+Math.imul(mt,St)|0,l=l+Math.imul(mt,At)|0,u=u+Math.imul(rt,xt)|0,e=e+Math.imul(rt,Pt)|0,e=e+Math.imul(st,xt)|0,l=l+Math.imul(st,Pt)|0,u=u+Math.imul(K,Dt)|0,e=e+Math.imul(K,Ot)|0,e=e+Math.imul(C,Dt)|0,l=l+Math.imul(C,Ot)|0,u=u+Math.imul(tt,Rt)|0,e=e+Math.imul(tt,It)|0,e=e+Math.imul(Z,Rt)|0,l=l+Math.imul(Z,It)|0,u=u+Math.imul($,Ct)|0,e=e+Math.imul($,Tt)|0,e=e+Math.imul(H,Ct)|0,l=l+Math.imul(H,Tt)|0;var Ze=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,u=Math.imul(ct,yt),e=Math.imul(ct,wt),e=e+Math.imul(bt,yt)|0,l=Math.imul(bt,wt),u=u+Math.imul(ht,Bt)|0,e=e+Math.imul(ht,Ut)|0,e=e+Math.imul(dt,Bt)|0,l=l+Math.imul(dt,Ut)|0,u=u+Math.imul(vt,Nt)|0,e=e+Math.imul(vt,kt)|0,e=e+Math.imul(lt,Nt)|0,l=l+Math.imul(lt,kt)|0,u=u+Math.imul(ut,Lt)|0,e=e+Math.imul(ut,Et)|0,e=e+Math.imul(pt,Lt)|0,l=l+Math.imul(pt,Et)|0,u=u+Math.imul(_t,St)|0,e=e+Math.imul(_t,At)|0,e=e+Math.imul(Mt,St)|0,l=l+Math.imul(Mt,At)|0,u=u+Math.imul(gt,xt)|0,e=e+Math.imul(gt,Pt)|0,e=e+Math.imul(mt,xt)|0,l=l+Math.imul(mt,Pt)|0,u=u+Math.imul(rt,Dt)|0,e=e+Math.imul(rt,Ot)|0,e=e+Math.imul(st,Dt)|0,l=l+Math.imul(st,Ot)|0,u=u+Math.imul(K,Rt)|0,e=e+Math.imul(K,It)|0,e=e+Math.imul(C,Rt)|0,l=l+Math.imul(C,It)|0,u=u+Math.imul(tt,Ct)|0,e=e+Math.imul(tt,Tt)|0,e=e+Math.imul(Z,Ct)|0,l=l+Math.imul(Z,Tt)|0,u=u+Math.imul($,Ft)|0,e=e+Math.imul($,$t)|0,e=e+Math.imul(H,Ft)|0,l=l+Math.imul(H,$t)|0;var Ne=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u=Math.imul(ct,Bt),e=Math.imul(ct,Ut),e=e+Math.imul(bt,Bt)|0,l=Math.imul(bt,Ut),u=u+Math.imul(ht,Nt)|0,e=e+Math.imul(ht,kt)|0,e=e+Math.imul(dt,Nt)|0,l=l+Math.imul(dt,kt)|0,u=u+Math.imul(vt,Lt)|0,e=e+Math.imul(vt,Et)|0,e=e+Math.imul(lt,Lt)|0,l=l+Math.imul(lt,Et)|0,u=u+Math.imul(ut,St)|0,e=e+Math.imul(ut,At)|0,e=e+Math.imul(pt,St)|0,l=l+Math.imul(pt,At)|0,u=u+Math.imul(_t,xt)|0,e=e+Math.imul(_t,Pt)|0,e=e+Math.imul(Mt,xt)|0,l=l+Math.imul(Mt,Pt)|0,u=u+Math.imul(gt,Dt)|0,e=e+Math.imul(gt,Ot)|0,e=e+Math.imul(mt,Dt)|0,l=l+Math.imul(mt,Ot)|0,u=u+Math.imul(rt,Rt)|0,e=e+Math.imul(rt,It)|0,e=e+Math.imul(st,Rt)|0,l=l+Math.imul(st,It)|0,u=u+Math.imul(K,Ct)|0,e=e+Math.imul(K,Tt)|0,e=e+Math.imul(C,Ct)|0,l=l+Math.imul(C,Tt)|0,u=u+Math.imul(tt,Ft)|0,e=e+Math.imul(tt,$t)|0,e=e+Math.imul(Z,Ft)|0,l=l+Math.imul(Z,$t)|0;var Je=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Je>>>26)|0,Je&=67108863,u=Math.imul(ct,Nt),e=Math.imul(ct,kt),e=e+Math.imul(bt,Nt)|0,l=Math.imul(bt,kt),u=u+Math.imul(ht,Lt)|0,e=e+Math.imul(ht,Et)|0,e=e+Math.imul(dt,Lt)|0,l=l+Math.imul(dt,Et)|0,u=u+Math.imul(vt,St)|0,e=e+Math.imul(vt,At)|0,e=e+Math.imul(lt,St)|0,l=l+Math.imul(lt,At)|0,u=u+Math.imul(ut,xt)|0,e=e+Math.imul(ut,Pt)|0,e=e+Math.imul(pt,xt)|0,l=l+Math.imul(pt,Pt)|0,u=u+Math.imul(_t,Dt)|0,e=e+Math.imul(_t,Ot)|0,e=e+Math.imul(Mt,Dt)|0,l=l+Math.imul(Mt,Ot)|0,u=u+Math.imul(gt,Rt)|0,e=e+Math.imul(gt,It)|0,e=e+Math.imul(mt,Rt)|0,l=l+Math.imul(mt,It)|0,u=u+Math.imul(rt,Ct)|0,e=e+Math.imul(rt,Tt)|0,e=e+Math.imul(st,Ct)|0,l=l+Math.imul(st,Tt)|0,u=u+Math.imul(K,Ft)|0,e=e+Math.imul(K,$t)|0,e=e+Math.imul(C,Ft)|0,l=l+Math.imul(C,$t)|0;var Ye=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,u=Math.imul(ct,Lt),e=Math.imul(ct,Et),e=e+Math.imul(bt,Lt)|0,l=Math.imul(bt,Et),u=u+Math.imul(ht,St)|0,e=e+Math.imul(ht,At)|0,e=e+Math.imul(dt,St)|0,l=l+Math.imul(dt,At)|0,u=u+Math.imul(vt,xt)|0,e=e+Math.imul(vt,Pt)|0,e=e+Math.imul(lt,xt)|0,l=l+Math.imul(lt,Pt)|0,u=u+Math.imul(ut,Dt)|0,e=e+Math.imul(ut,Ot)|0,e=e+Math.imul(pt,Dt)|0,l=l+Math.imul(pt,Ot)|0,u=u+Math.imul(_t,Rt)|0,e=e+Math.imul(_t,It)|0,e=e+Math.imul(Mt,Rt)|0,l=l+Math.imul(Mt,It)|0,u=u+Math.imul(gt,Ct)|0,e=e+Math.imul(gt,Tt)|0,e=e+Math.imul(mt,Ct)|0,l=l+Math.imul(mt,Tt)|0,u=u+Math.imul(rt,Ft)|0,e=e+Math.imul(rt,$t)|0,e=e+Math.imul(st,Ft)|0,l=l+Math.imul(st,$t)|0;var qe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(qe>>>26)|0,qe&=67108863,u=Math.imul(ct,St),e=Math.imul(ct,At),e=e+Math.imul(bt,St)|0,l=Math.imul(bt,At),u=u+Math.imul(ht,xt)|0,e=e+Math.imul(ht,Pt)|0,e=e+Math.imul(dt,xt)|0,l=l+Math.imul(dt,Pt)|0,u=u+Math.imul(vt,Dt)|0,e=e+Math.imul(vt,Ot)|0,e=e+Math.imul(lt,Dt)|0,l=l+Math.imul(lt,Ot)|0,u=u+Math.imul(ut,Rt)|0,e=e+Math.imul(ut,It)|0,e=e+Math.imul(pt,Rt)|0,l=l+Math.imul(pt,It)|0,u=u+Math.imul(_t,Ct)|0,e=e+Math.imul(_t,Tt)|0,e=e+Math.imul(Mt,Ct)|0,l=l+Math.imul(Mt,Tt)|0,u=u+Math.imul(gt,Ft)|0,e=e+Math.imul(gt,$t)|0,e=e+Math.imul(mt,Ft)|0,l=l+Math.imul(mt,$t)|0;var $e=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+($e>>>26)|0,$e&=67108863,u=Math.imul(ct,xt),e=Math.imul(ct,Pt),e=e+Math.imul(bt,xt)|0,l=Math.imul(bt,Pt),u=u+Math.imul(ht,Dt)|0,e=e+Math.imul(ht,Ot)|0,e=e+Math.imul(dt,Dt)|0,l=l+Math.imul(dt,Ot)|0,u=u+Math.imul(vt,Rt)|0,e=e+Math.imul(vt,It)|0,e=e+Math.imul(lt,Rt)|0,l=l+Math.imul(lt,It)|0,u=u+Math.imul(ut,Ct)|0,e=e+Math.imul(ut,Tt)|0,e=e+Math.imul(pt,Ct)|0,l=l+Math.imul(pt,Tt)|0,u=u+Math.imul(_t,Ft)|0,e=e+Math.imul(_t,$t)|0,e=e+Math.imul(Mt,Ft)|0,l=l+Math.imul(Mt,$t)|0;var ze=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(ze>>>26)|0,ze&=67108863,u=Math.imul(ct,Dt),e=Math.imul(ct,Ot),e=e+Math.imul(bt,Dt)|0,l=Math.imul(bt,Ot),u=u+Math.imul(ht,Rt)|0,e=e+Math.imul(ht,It)|0,e=e+Math.imul(dt,Rt)|0,l=l+Math.imul(dt,It)|0,u=u+Math.imul(vt,Ct)|0,e=e+Math.imul(vt,Tt)|0,e=e+Math.imul(lt,Ct)|0,l=l+Math.imul(lt,Tt)|0,u=u+Math.imul(ut,Ft)|0,e=e+Math.imul(ut,$t)|0,e=e+Math.imul(pt,Ft)|0,l=l+Math.imul(pt,$t)|0;var De=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(De>>>26)|0,De&=67108863,u=Math.imul(ct,Rt),e=Math.imul(ct,It),e=e+Math.imul(bt,Rt)|0,l=Math.imul(bt,It),u=u+Math.imul(ht,Ct)|0,e=e+Math.imul(ht,Tt)|0,e=e+Math.imul(dt,Ct)|0,l=l+Math.imul(dt,Tt)|0,u=u+Math.imul(vt,Ft)|0,e=e+Math.imul(vt,$t)|0,e=e+Math.imul(lt,Ft)|0,l=l+Math.imul(lt,$t)|0;var Xe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,u=Math.imul(ct,Ct),e=Math.imul(ct,Tt),e=e+Math.imul(bt,Ct)|0,l=Math.imul(bt,Tt),u=u+Math.imul(ht,Ft)|0,e=e+Math.imul(ht,$t)|0,e=e+Math.imul(dt,Ft)|0,l=l+Math.imul(dt,$t)|0;var Qe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,u=Math.imul(ct,Ft),e=Math.imul(ct,$t),e=e+Math.imul(bt,Ft)|0,l=Math.imul(bt,$t);var tr=(y+u|0)+((e&8191)<<13)|0;return y=(l+(e>>>13)|0)+(tr>>>26)|0,tr&=67108863,m[0]=Se,m[1]=He,m[2]=Ke,m[3]=Ve,m[4]=Ge,m[5]=We,m[6]=Oe,m[7]=Be,m[8]=Ze,m[9]=Ne,m[10]=Je,m[11]=Ye,m[12]=qe,m[13]=$e,m[14]=ze,m[15]=De,m[16]=Xe,m[17]=Qe,m[18]=tr,y!==0&&(m[19]=y,n.length++),n};Math.imul||(O=I);function N(v,t,r){r.negative=t.negative^v.negative,r.length=v.length+t.length;for(var n=0,o=0,d=0;d<r.length-1;d++){var m=o;o=0;for(var y=n&67108863,u=Math.min(d,t.length-1),e=Math.max(0,d-v.length+1);e<=u;e++){var l=d-e,z=v.words[l]|0,$=t.words[e]|0,H=z*$,W=H&67108863;m=m+(H/67108864|0)|0,W=W+y|0,y=W&67108863,m=m+(W>>>26)|0,o+=m>>>26,m&=67108863}r.words[d]=y,n=m,m=o}return n!==0?r.words[d]=n:r.length--,r.strip()}function L(v,t,r){var n=new R;return n.mulp(v,t,r)}s.prototype.mulTo=function(t,r){var n,o=this.length+t.length;return this.length===10&&t.length===10?n=O(this,t,r):o<63?n=I(this,t,r):o<1024?n=N(this,t,r):n=L(this,t,r),n};function R(v,t){this.x=v,this.y=t}R.prototype.makeRBT=function(t){for(var r=new Array(t),n=s.prototype._countBits(t)-1,o=0;o<t;o++)r[o]=this.revBin(o,n,t);return r},R.prototype.revBin=function(t,r,n){if(t===0||t===n-1)return t;for(var o=0,d=0;d<r;d++)o|=(t&1)<<r-d-1,t>>=1;return o},R.prototype.permute=function(t,r,n,o,d,m){for(var y=0;y<m;y++)o[y]=r[t[y]],d[y]=n[t[y]]},R.prototype.transform=function(t,r,n,o,d,m){this.permute(m,t,r,n,o,d);for(var y=1;y<d;y<<=1)for(var u=y<<1,e=Math.cos(2*Math.PI/u),l=Math.sin(2*Math.PI/u),z=0;z<d;z+=u)for(var $=e,H=l,W=0;W<y;W++){var tt=n[z+W],Z=o[z+W],et=n[z+W+y],K=o[z+W+y],C=$*et-H*K;K=$*K+H*et,et=C,n[z+W]=tt+et,o[z+W]=Z+K,n[z+W+y]=tt-et,o[z+W+y]=Z-K,W!==u&&(C=e*$-l*H,H=e*H+l*$,$=C)}},R.prototype.guessLen13b=function(t,r){var n=Math.max(r,t)|1,o=n&1,d=0;for(n=n/2|0;n;n=n>>>1)d++;return 1<<d+1+o},R.prototype.conjugate=function(t,r,n){if(!(n<=1))for(var o=0;o<n/2;o++){var d=t[o];t[o]=t[n-o-1],t[n-o-1]=d,d=r[o],r[o]=-r[n-o-1],r[n-o-1]=-d}},R.prototype.normalize13b=function(t,r){for(var n=0,o=0;o<r/2;o++){var d=Math.round(t[2*o+1]/r)*8192+Math.round(t[2*o]/r)+n;t[o]=d&67108863,d<67108864?n=0:n=d/67108864|0}return t},R.prototype.convert13b=function(t,r,n,o){for(var d=0,m=0;m<r;m++)d=d+(t[m]|0),n[2*m]=d&8191,d=d>>>13,n[2*m+1]=d&8191,d=d>>>13;for(m=2*r;m<o;++m)n[m]=0;h(d===0),h((d&-8192)===0)},R.prototype.stub=function(t){for(var r=new Array(t),n=0;n<t;n++)r[n]=0;return r},R.prototype.mulp=function(t,r,n){var o=2*this.guessLen13b(t.length,r.length),d=this.makeRBT(o),m=this.stub(o),y=new Array(o),u=new Array(o),e=new Array(o),l=new Array(o),z=new Array(o),$=new Array(o),H=n.words;H.length=o,this.convert13b(t.words,t.length,y,o),this.convert13b(r.words,r.length,l,o),this.transform(y,m,u,e,o,d),this.transform(l,m,z,$,o,d);for(var W=0;W<o;W++){var tt=u[W]*z[W]-e[W]*$[W];e[W]=u[W]*$[W]+e[W]*z[W],u[W]=tt}return this.conjugate(u,e,o),this.transform(u,e,H,m,o,d),this.conjugate(H,m,o),this.normalize13b(H,o),n.negative=t.negative^r.negative,n.length=t.length+r.length,n.strip()},s.prototype.mul=function(t){var r=new s(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},s.prototype.mulf=function(t){var r=new s(null);return r.words=new Array(this.length+t.length),L(this,t,r)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){h(typeof t=="number"),h(t<67108864);for(var r=0,n=0;n<this.length;n++){var o=(this.words[n]|0)*t,d=(o&67108863)+(r&67108863);r>>=26,r+=o/67108864|0,r+=d>>>26,this.words[n]=d&67108863}return r!==0&&(this.words[n]=r,this.length++),this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var r=D(t);if(r.length===0)return new s(1);for(var n=this,o=0;o<r.length&&r[o]===0;o++,n=n.sqr());if(++o<r.length)for(var d=n.sqr();o<r.length;o++,d=d.sqr())r[o]!==0&&(n=n.mul(d));return n},s.prototype.iushln=function(t){h(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r,d;if(r!==0){var m=0;for(d=0;d<this.length;d++){var y=this.words[d]&o,u=(this.words[d]|0)-y<<r;this.words[d]=u|m,m=y>>>26-r}m&&(this.words[d]=m,this.length++)}if(n!==0){for(d=this.length-1;d>=0;d--)this.words[d+n]=this.words[d];for(d=0;d<n;d++)this.words[d]=0;this.length+=n}return this.strip()},s.prototype.ishln=function(t){return h(this.negative===0),this.iushln(t)},s.prototype.iushrn=function(t,r,n){h(typeof t=="number"&&t>=0);var o;r?o=(r-r%26)/26:o=0;var d=t%26,m=Math.min((t-d)/26,this.length),y=67108863^67108863>>>d<<d,u=n;if(o-=m,o=Math.max(0,o),u){for(var e=0;e<m;e++)u.words[e]=this.words[e];u.length=m}if(m!==0)if(this.length>m)for(this.length-=m,e=0;e<this.length;e++)this.words[e]=this.words[e+m];else this.words[0]=0,this.length=1;var l=0;for(e=this.length-1;e>=0&&(l!==0||e>=o);e--){var z=this.words[e]|0;this.words[e]=l<<26-d|z>>>d,l=z&y}return u&&l!==0&&(u.words[u.length++]=l),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(t,r,n){return h(this.negative===0),this.iushrn(t,r,n)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){h(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26,o=1<<r;if(this.length<=n)return!1;var d=this.words[n];return!!(d&o)},s.prototype.imaskn=function(t){h(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26;if(h(this.negative===0,"imaskn works only with positive numbers"),this.length<=n)return this;if(r!==0&&n++,this.length=Math.min(n,this.length),r!==0){var o=67108863^67108863>>>r<<r;this.words[this.length-1]&=o}return this.strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return h(typeof t=="number"),h(t<67108864),t<0?this.isubn(-t):this.negative!==0?this.length===1&&(this.words[0]|0)<t?(this.words[0]=t-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},s.prototype.isubn=function(t){if(h(typeof t=="number"),h(t<67108864),t<0)return this.iaddn(-t);if(this.negative!==0)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,r,n){var o=t.length+n,d;this._expand(o);var m,y=0;for(d=0;d<t.length;d++){m=(this.words[d+n]|0)+y;var u=(t.words[d]|0)*r;m-=u&67108863,y=(m>>26)-(u/67108864|0),this.words[d+n]=m&67108863}for(;d<this.length-n;d++)m=(this.words[d+n]|0)+y,y=m>>26,this.words[d+n]=m&67108863;if(y===0)return this.strip();for(h(y===-1),y=0,d=0;d<this.length;d++)m=-(this.words[d]|0)+y,y=m>>26,this.words[d]=m&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(t,r){var n=this.length-t.length,o=this.clone(),d=t,m=d.words[d.length-1]|0,y=this._countBits(m);n=26-y,n!==0&&(d=d.ushln(n),o.iushln(n),m=d.words[d.length-1]|0);var u=o.length-d.length,e;if(r!=="mod"){e=new s(null),e.length=u+1,e.words=new Array(e.length);for(var l=0;l<e.length;l++)e.words[l]=0}var z=o.clone()._ishlnsubmul(d,1,u);z.negative===0&&(o=z,e&&(e.words[u]=1));for(var $=u-1;$>=0;$--){var H=(o.words[d.length+$]|0)*67108864+(o.words[d.length+$-1]|0);for(H=Math.min(H/m|0,67108863),o._ishlnsubmul(d,H,$);o.negative!==0;)H--,o.negative=0,o._ishlnsubmul(d,1,$),o.isZero()||(o.negative^=1);e&&(e.words[$]=H)}return e&&e.strip(),o.strip(),r!=="div"&&n!==0&&o.iushrn(n),{div:e||null,mod:o}},s.prototype.divmod=function(t,r,n){if(h(!t.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var o,d,m;return this.negative!==0&&t.negative===0?(m=this.neg().divmod(t,r),r!=="mod"&&(o=m.div.neg()),r!=="div"&&(d=m.mod.neg(),n&&d.negative!==0&&d.iadd(t)),{div:o,mod:d}):this.negative===0&&t.negative!==0?(m=this.divmod(t.neg(),r),r!=="mod"&&(o=m.div.neg()),{div:o,mod:m.mod}):this.negative&t.negative?(m=this.neg().divmod(t.neg(),r),r!=="div"&&(d=m.mod.neg(),n&&d.negative!==0&&d.isub(t)),{div:m.div,mod:d}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:t.length===1?r==="div"?{div:this.divn(t.words[0]),mod:null}:r==="mod"?{div:null,mod:new s(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modn(t.words[0]))}:this._wordDiv(t,r)},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=r.div.negative!==0?r.mod.isub(t):r.mod,o=t.ushrn(1),d=t.andln(1),m=n.cmp(o);return m<0||d===1&&m===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},s.prototype.modn=function(t){h(t<=67108863);for(var r=(1<<26)%t,n=0,o=this.length-1;o>=0;o--)n=(r*n+(this.words[o]|0))%t;return n},s.prototype.idivn=function(t){h(t<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var o=(this.words[n]|0)+r*67108864;this.words[n]=o/t|0,r=o%t}return this.strip()},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){h(t.negative===0),h(!t.isZero());var r=this,n=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var o=new s(1),d=new s(0),m=new s(0),y=new s(1),u=0;r.isEven()&&n.isEven();)r.iushrn(1),n.iushrn(1),++u;for(var e=n.clone(),l=r.clone();!r.isZero();){for(var z=0,$=1;!(r.words[0]&$)&&z<26;++z,$<<=1);if(z>0)for(r.iushrn(z);z-- >0;)(o.isOdd()||d.isOdd())&&(o.iadd(e),d.isub(l)),o.iushrn(1),d.iushrn(1);for(var H=0,W=1;!(n.words[0]&W)&&H<26;++H,W<<=1);if(H>0)for(n.iushrn(H);H-- >0;)(m.isOdd()||y.isOdd())&&(m.iadd(e),y.isub(l)),m.iushrn(1),y.iushrn(1);r.cmp(n)>=0?(r.isub(n),o.isub(m),d.isub(y)):(n.isub(r),m.isub(o),y.isub(d))}return{a:m,b:y,gcd:n.iushln(u)}},s.prototype._invmp=function(t){h(t.negative===0),h(!t.isZero());var r=this,n=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var o=new s(1),d=new s(0),m=n.clone();r.cmpn(1)>0&&n.cmpn(1)>0;){for(var y=0,u=1;!(r.words[0]&u)&&y<26;++y,u<<=1);if(y>0)for(r.iushrn(y);y-- >0;)o.isOdd()&&o.iadd(m),o.iushrn(1);for(var e=0,l=1;!(n.words[0]&l)&&e<26;++e,l<<=1);if(e>0)for(n.iushrn(e);e-- >0;)d.isOdd()&&d.iadd(m),d.iushrn(1);r.cmp(n)>=0?(r.isub(n),o.isub(d)):(n.isub(r),d.isub(o))}var z;return r.cmpn(1)===0?z=o:z=d,z.cmpn(0)<0&&z.iadd(t),z},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),n=t.clone();r.negative=0,n.negative=0;for(var o=0;r.isEven()&&n.isEven();o++)r.iushrn(1),n.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;n.isEven();)n.iushrn(1);var d=r.cmp(n);if(d<0){var m=r;r=n,n=m}else if(d===0||n.cmpn(1)===0)break;r.isub(n)}while(!0);return n.iushln(o)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){h(typeof t=="number");var r=t%26,n=(t-r)/26,o=1<<r;if(this.length<=n)return this._expand(n+1),this.words[n]|=o,this;for(var d=o,m=n;d!==0&&m<this.length;m++){var y=this.words[m]|0;y+=d,d=y>>>26,y&=67108863,this.words[m]=y}return d!==0&&(this.words[m]=d,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(t){var r=t<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var n;if(this.length>1)n=1;else{r&&(t=-t),h(t<=67108863,"Number is too big");var o=this.words[0]|0;n=o===t?0:o<t?-1:1}return this.negative!==0?-n|0:n},s.prototype.cmp=function(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);return this.negative!==0?-r|0:r},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,n=this.length-1;n>=0;n--){var o=this.words[n]|0,d=t.words[n]|0;if(o!==d){o<d?r=-1:o>d&&(r=1);break}}return r},s.prototype.gtn=function(t){return this.cmpn(t)===1},s.prototype.gt=function(t){return this.cmp(t)===1},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return this.cmpn(t)===-1},s.prototype.lt=function(t){return this.cmp(t)===-1},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return this.cmpn(t)===0},s.prototype.eq=function(t){return this.cmp(t)===0},s.red=function(t){return new G(t)},s.prototype.toRed=function(t){return h(!this.red,"Already a number in reduction context"),h(this.negative===0,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return h(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return h(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return h(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return h(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return h(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return h(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return h(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return h(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return h(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return h(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return h(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return h(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return h(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return h(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return h(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var B={k256:null,p224:null,p192:null,p25519:null};function T(v,t){this.name=v,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}T.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},T.prototype.ireduce=function(t){var r=t,n;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),n=r.bitLength();while(n>this.n);var o=n<this.n?-1:r.ucmp(this.p);return o===0?(r.words[0]=0,r.length=1):o>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},T.prototype.split=function(t,r){t.iushrn(this.n,0,r)},T.prototype.imulK=function(t){return t.imul(this.k)};function U(){T.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}g(U,T),U.prototype.split=function(t,r){for(var n=4194303,o=Math.min(t.length,9),d=0;d<o;d++)r.words[d]=t.words[d];if(r.length=o,t.length<=9){t.words[0]=0,t.length=1;return}var m=t.words[9];for(r.words[r.length++]=m&n,d=10;d<t.length;d++){var y=t.words[d]|0;t.words[d-10]=(y&n)<<4|m>>>22,m=y}m>>>=22,t.words[d-10]=m,m===0&&t.length>10?t.length-=10:t.length-=9},U.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,n=0;n<t.length;n++){var o=t.words[n]|0;r+=o*977,t.words[n]=r&67108863,r=o*64+(r/67108864|0)}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t};function k(){T.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}g(k,T);function P(){T.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}g(P,T);function F(){T.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}g(F,T),F.prototype.imulK=function(t){for(var r=0,n=0;n<t.length;n++){var o=(t.words[n]|0)*19+r,d=o&67108863;o>>>=26,t.words[n]=d,r=o}return r!==0&&(t.words[t.length++]=r),t},s._prime=function(t){if(B[t])return B[t];var r;if(t==="k256")r=new U;else if(t==="p224")r=new k;else if(t==="p192")r=new P;else if(t==="p25519")r=new F;else throw new Error("Unknown prime "+t);return B[t]=r,r};function G(v){if(typeof v=="string"){var t=s._prime(v);this.m=t.p,this.prime=t}else h(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}G.prototype._verify1=function(t){h(t.negative===0,"red works only with positives"),h(t.red,"red works only with red numbers")},G.prototype._verify2=function(t,r){h((t.negative|r.negative)===0,"red works only with positives"),h(t.red&&t.red===r.red,"red works only with red numbers")},G.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},G.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},G.prototype.add=function(t,r){this._verify2(t,r);var n=t.add(r);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},G.prototype.iadd=function(t,r){this._verify2(t,r);var n=t.iadd(r);return n.cmp(this.m)>=0&&n.isub(this.m),n},G.prototype.sub=function(t,r){this._verify2(t,r);var n=t.sub(r);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},G.prototype.isub=function(t,r){this._verify2(t,r);var n=t.isub(r);return n.cmpn(0)<0&&n.iadd(this.m),n},G.prototype.shl=function(t,r){return this._verify1(t),this.imod(t.ushln(r))},G.prototype.imul=function(t,r){return this._verify2(t,r),this.imod(t.imul(r))},G.prototype.mul=function(t,r){return this._verify2(t,r),this.imod(t.mul(r))},G.prototype.isqr=function(t){return this.imul(t,t.clone())},G.prototype.sqr=function(t){return this.mul(t,t)},G.prototype.sqrt=function(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(h(r%2===1),r===3){var n=this.m.add(new s(1)).iushrn(2);return this.pow(t,n)}for(var o=this.m.subn(1),d=0;!o.isZero()&&o.andln(1)===0;)d++,o.iushrn(1);h(!o.isZero());var m=new s(1).toRed(this),y=m.redNeg(),u=this.m.subn(1).iushrn(1),e=this.m.bitLength();for(e=new s(2*e*e).toRed(this);this.pow(e,u).cmp(y)!==0;)e.redIAdd(y);for(var l=this.pow(e,o),z=this.pow(t,o.addn(1).iushrn(1)),$=this.pow(t,o),H=d;$.cmp(m)!==0;){for(var W=$,tt=0;W.cmp(m)!==0;tt++)W=W.redSqr();h(tt<H);var Z=this.pow(l,new s(1).iushln(H-tt-1));z=z.redMul(Z),l=Z.redSqr(),$=$.redMul(l),H=tt}return z},G.prototype.invm=function(t){var r=t._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},G.prototype.pow=function(t,r){if(r.isZero())return new s(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var n=4,o=new Array(1<<n);o[0]=new s(1).toRed(this),o[1]=t;for(var d=2;d<o.length;d++)o[d]=this.mul(o[d-1],t);var m=o[0],y=0,u=0,e=r.bitLength()%26;for(e===0&&(e=26),d=r.length-1;d>=0;d--){for(var l=r.words[d],z=e-1;z>=0;z--){var $=l>>z&1;if(m!==o[0]&&(m=this.sqr(m)),$===0&&y===0){u=0;continue}y<<=1,y|=$,u++,!(u!==n&&(d!==0||z!==0))&&(m=this.mul(m,o[y]),u=0,y=0)}e=26}return m},G.prototype.convertTo=function(t){var r=t.umod(this.m);return r===t?r.clone():r},G.prototype.convertFrom=function(t){var r=t.clone();return r.red=null,r},s.mont=function(t){return new nt(t)};function nt(v){G.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g(nt,G),nt.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},nt.prototype.convertFrom=function(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},nt.prototype.imul=function(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(r),o=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=n.isub(o).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.mul=function(t,r){if(t.isZero()||r.isZero())return new s(0)._forceRed(this);var n=t.mul(r),o=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=n.isub(o).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.invm=function(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(c,Ee)}(go)),go.exports}var i0={},n0={},s0,Ip;function Uu(){if(Ip)return s0;Ip=1;var c=qv,i=c.Buffer,a={},h;for(h in c)c.hasOwnProperty(h)&&(h==="SlowBuffer"||h==="Buffer"||(a[h]=c[h]));var g=a.Buffer={};for(h in i)i.hasOwnProperty(h)&&(h==="allocUnsafe"||h==="allocUnsafeSlow"||(g[h]=i[h]));if(a.Buffer.prototype=i.prototype,(!g.from||g.from===Uint8Array.from)&&(g.from=function(s,x,w){if(typeof s=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof s);if(s&&typeof s.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s);return i(s,x,w)}),g.alloc||(g.alloc=function(s,x,w){if(typeof s!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof s);if(s<0||s>=2*(1<<30))throw new RangeError('The value "'+s+'" is invalid for option "size"');var _=i(s);return!x||x.length===0?_.fill(0):typeof w=="string"?_.fill(x,w):_.fill(x),_}),!a.kStringMaxLength)try{a.kStringMaxLength=ei.binding("buffer").kStringMaxLength}catch{}return a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),s0=a,s0}var a0={},Rp;function ku(){if(Rp)return a0;Rp=1;const c=sr;function i(h){this._reporterState={obj:null,path:[],options:h||{},errors:[]}}a0.Reporter=i,i.prototype.isError=function(g){return g instanceof a},i.prototype.save=function(){const g=this._reporterState;return{obj:g.obj,pathLen:g.path.length}},i.prototype.restore=function(g){const s=this._reporterState;s.obj=g.obj,s.path=s.path.slice(0,g.pathLen)},i.prototype.enterKey=function(g){return this._reporterState.path.push(g)},i.prototype.exitKey=function(g){const s=this._reporterState;s.path=s.path.slice(0,g-1)},i.prototype.leaveKey=function(g,s,x){const w=this._reporterState;this.exitKey(g),w.obj!==null&&(w.obj[s]=x)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){const g=this._reporterState,s=g.obj;return g.obj={},s},i.prototype.leaveObject=function(g){const s=this._reporterState,x=s.obj;return s.obj=g,x},i.prototype.error=function(g){let s;const x=this._reporterState,w=g instanceof a;if(w?s=g:s=new a(x.path.map(function(_){return"["+JSON.stringify(_)+"]"}).join(""),g.message||g,g.stack),!x.options.partial)throw s;return w||x.errors.push(s),s},i.prototype.wrapResult=function(g){const s=this._reporterState;return s.options.partial?{result:this.isError(g)?null:g,errors:s.errors}:g};function a(h,g){this.path=h,this.rethrow(g)}return c(a,Error),a.prototype.rethrow=function(g){if(this.message=g+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,a),!this.stack)try{throw new Error(this.message)}catch(s){this.stack=s.stack}return this},a0}var fo={},Pp;function $s(){if(Pp)return fo;Pp=1;const c=sr,i=ku().Reporter,a=Uu().Buffer;function h(s,x){if(i.call(this,x),!a.isBuffer(s)){this.error("Input not Buffer");return}this.base=s,this.offset=0,this.length=s.length}c(h,i),fo.DecoderBuffer=h,h.isDecoderBuffer=function(x){return x instanceof h?!0:typeof x=="object"&&a.isBuffer(x.base)&&x.constructor.name==="DecoderBuffer"&&typeof x.offset=="number"&&typeof x.length=="number"&&typeof x.save=="function"&&typeof x.restore=="function"&&typeof x.isEmpty=="function"&&typeof x.readUInt8=="function"&&typeof x.skip=="function"&&typeof x.raw=="function"},h.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},h.prototype.restore=function(x){const w=new h(this.base);return w.offset=x.offset,w.length=this.offset,this.offset=x.offset,i.prototype.restore.call(this,x.reporter),w},h.prototype.isEmpty=function(){return this.offset===this.length},h.prototype.readUInt8=function(x){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(x||"DecoderBuffer overrun")},h.prototype.skip=function(x,w){if(!(this.offset+x<=this.length))return this.error(w||"DecoderBuffer overrun");const _=new h(this.base);return _._reporterState=this._reporterState,_.offset=this.offset,_.length=this.offset+x,this.offset+=x,_},h.prototype.raw=function(x){return this.base.slice(x?x.offset:this.offset,this.length)};function g(s,x){if(Array.isArray(s))this.length=0,this.value=s.map(function(w){return g.isEncoderBuffer(w)||(w=new g(w,x)),this.length+=w.length,w},this);else if(typeof s=="number"){if(!(0<=s&&s<=255))return x.error("non-byte EncoderBuffer value");this.value=s,this.length=1}else if(typeof s=="string")this.value=s,this.length=a.byteLength(s);else if(a.isBuffer(s))this.value=s,this.length=s.length;else return x.error("Unsupported type: "+typeof s)}return fo.EncoderBuffer=g,g.isEncoderBuffer=function(x){return x instanceof g?!0:typeof x=="object"&&x.constructor.name==="EncoderBuffer"&&typeof x.length=="number"&&typeof x.join=="function"},g.prototype.join=function(x,w){return x||(x=a.alloc(this.length)),w||(w=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(_){_.join(x,w),w+=_.length}):(typeof this.value=="number"?x[w]=this.value:typeof this.value=="string"?x.write(this.value,w):a.isBuffer(this.value)&&this.value.copy(x,w),w+=this.length)),x},fo}var o0,Op;function Lu(){if(Op)return o0;Op=1;const c=ku().Reporter,i=$s().EncoderBuffer,a=$s().DecoderBuffer,h=Cn,g=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],s=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(g),x=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function w(M,b,S){const E={};this._baseState=E,E.name=S,E.enc=M,E.parent=b||null,E.children=null,E.tag=null,E.args=null,E.reverseArgs=null,E.choice=null,E.optional=!1,E.any=!1,E.obj=!1,E.use=null,E.useDecoder=null,E.key=null,E.default=null,E.explicit=null,E.implicit=null,E.contains=null,E.parent||(E.children=[],this._wrap())}o0=w;const _=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return w.prototype.clone=function(){const b=this._baseState,S={};_.forEach(function(D){S[D]=b[D]});const E=new this.constructor(S.parent);return E._baseState=S,E},w.prototype._wrap=function(){const b=this._baseState;s.forEach(function(S){this[S]=function(){const D=new this.constructor(this);return b.children.push(D),D[S].apply(D,arguments)}},this)},w.prototype._init=function(b){const S=this._baseState;h(S.parent===null),b.call(this),S.children=S.children.filter(function(E){return E._baseState.parent===this},this),h.equal(S.children.length,1,"Root node can have only one child")},w.prototype._useArgs=function(b){const S=this._baseState,E=b.filter(function(D){return D instanceof this.constructor},this);b=b.filter(function(D){return!(D instanceof this.constructor)},this),E.length!==0&&(h(S.children===null),S.children=E,E.forEach(function(D){D._baseState.parent=this},this)),b.length!==0&&(h(S.args===null),S.args=b,S.reverseArgs=b.map(function(D){if(typeof D!="object"||D.constructor!==Object)return D;const I={};return Object.keys(D).forEach(function(O){O==(O|0)&&(O|=0);const N=D[O];I[N]=O}),I}))},x.forEach(function(M){w.prototype[M]=function(){const S=this._baseState;throw new Error(M+" not implemented for encoding: "+S.enc)}}),g.forEach(function(M){w.prototype[M]=function(){const S=this._baseState,E=Array.prototype.slice.call(arguments);return h(S.tag===null),S.tag=M,this._useArgs(E),this}}),w.prototype.use=function(b){h(b);const S=this._baseState;return h(S.use===null),S.use=b,this},w.prototype.optional=function(){const b=this._baseState;return b.optional=!0,this},w.prototype.def=function(b){const S=this._baseState;return h(S.default===null),S.default=b,S.optional=!0,this},w.prototype.explicit=function(b){const S=this._baseState;return h(S.explicit===null&&S.implicit===null),S.explicit=b,this},w.prototype.implicit=function(b){const S=this._baseState;return h(S.explicit===null&&S.implicit===null),S.implicit=b,this},w.prototype.obj=function(){const b=this._baseState,S=Array.prototype.slice.call(arguments);return b.obj=!0,S.length!==0&&this._useArgs(S),this},w.prototype.key=function(b){const S=this._baseState;return h(S.key===null),S.key=b,this},w.prototype.any=function(){const b=this._baseState;return b.any=!0,this},w.prototype.choice=function(b){const S=this._baseState;return h(S.choice===null),S.choice=b,this._useArgs(Object.keys(b).map(function(E){return b[E]})),this},w.prototype.contains=function(b){const S=this._baseState;return h(S.use===null),S.contains=b,this},w.prototype._decode=function(b,S){const E=this._baseState;if(E.parent===null)return b.wrapResult(E.children[0]._decode(b,S));let D=E.default,I=!0,O=null;if(E.key!==null&&(O=b.enterKey(E.key)),E.optional){let L=null;if(E.explicit!==null?L=E.explicit:E.implicit!==null?L=E.implicit:E.tag!==null&&(L=E.tag),L===null&&!E.any){const R=b.save();try{E.choice===null?this._decodeGeneric(E.tag,b,S):this._decodeChoice(b,S),I=!0}catch{I=!1}b.restore(R)}else if(I=this._peekTag(b,L,E.any),b.isError(I))return I}let N;if(E.obj&&I&&(N=b.enterObject()),I){if(E.explicit!==null){const R=this._decodeTag(b,E.explicit);if(b.isError(R))return R;b=R}const L=b.offset;if(E.use===null&&E.choice===null){let R;E.any&&(R=b.save());const B=this._decodeTag(b,E.implicit!==null?E.implicit:E.tag,E.any);if(b.isError(B))return B;E.any?D=b.raw(R):b=B}if(S&&S.track&&E.tag!==null&&S.track(b.path(),L,b.length,"tagged"),S&&S.track&&E.tag!==null&&S.track(b.path(),b.offset,b.length,"content"),E.any||(E.choice===null?D=this._decodeGeneric(E.tag,b,S):D=this._decodeChoice(b,S)),b.isError(D))return D;if(!E.any&&E.choice===null&&E.children!==null&&E.children.forEach(function(B){B._decode(b,S)}),E.contains&&(E.tag==="octstr"||E.tag==="bitstr")){const R=new a(D);D=this._getUse(E.contains,b._reporterState.obj)._decode(R,S)}}return E.obj&&I&&(D=b.leaveObject(N)),E.key!==null&&(D!==null||I===!0)?b.leaveKey(O,E.key,D):O!==null&&b.exitKey(O),D},w.prototype._decodeGeneric=function(b,S,E){const D=this._baseState;return b==="seq"||b==="set"?null:b==="seqof"||b==="setof"?this._decodeList(S,b,D.args[0],E):/str$/.test(b)?this._decodeStr(S,b,E):b==="objid"&&D.args?this._decodeObjid(S,D.args[0],D.args[1],E):b==="objid"?this._decodeObjid(S,null,null,E):b==="gentime"||b==="utctime"?this._decodeTime(S,b,E):b==="null_"?this._decodeNull(S,E):b==="bool"?this._decodeBool(S,E):b==="objDesc"?this._decodeStr(S,b,E):b==="int"||b==="enum"?this._decodeInt(S,D.args&&D.args[0],E):D.use!==null?this._getUse(D.use,S._reporterState.obj)._decode(S,E):S.error("unknown tag: "+b)},w.prototype._getUse=function(b,S){const E=this._baseState;return E.useDecoder=this._use(b,S),h(E.useDecoder._baseState.parent===null),E.useDecoder=E.useDecoder._baseState.children[0],E.implicit!==E.useDecoder._baseState.implicit&&(E.useDecoder=E.useDecoder.clone(),E.useDecoder._baseState.implicit=E.implicit),E.useDecoder},w.prototype._decodeChoice=function(b,S){const E=this._baseState;let D=null,I=!1;return Object.keys(E.choice).some(function(O){const N=b.save(),L=E.choice[O];try{const R=L._decode(b,S);if(b.isError(R))return!1;D={type:O,value:R},I=!0}catch{return b.restore(N),!1}return!0},this),I?D:b.error("Choice not matched")},w.prototype._createEncoderBuffer=function(b){return new i(b,this.reporter)},w.prototype._encode=function(b,S,E){const D=this._baseState;if(D.default!==null&&D.default===b)return;const I=this._encodeValue(b,S,E);if(I!==void 0&&!this._skipDefault(I,S,E))return I},w.prototype._encodeValue=function(b,S,E){const D=this._baseState;if(D.parent===null)return D.children[0]._encode(b,S||new c);let I=null;if(this.reporter=S,D.optional&&b===void 0)if(D.default!==null)b=D.default;else return;let O=null,N=!1;if(D.any)I=this._createEncoderBuffer(b);else if(D.choice)I=this._encodeChoice(b,S);else if(D.contains)O=this._getUse(D.contains,E)._encode(b,S),N=!0;else if(D.children)O=D.children.map(function(L){if(L._baseState.tag==="null_")return L._encode(null,S,b);if(L._baseState.key===null)return S.error("Child should have a key");const R=S.enterKey(L._baseState.key);if(typeof b!="object")return S.error("Child expected, but input is not object");const B=L._encode(b[L._baseState.key],S,b);return S.leaveKey(R),B},this).filter(function(L){return L}),O=this._createEncoderBuffer(O);else if(D.tag==="seqof"||D.tag==="setof"){if(!(D.args&&D.args.length===1))return S.error("Too many args for : "+D.tag);if(!Array.isArray(b))return S.error("seqof/setof, but data is not Array");const L=this.clone();L._baseState.implicit=null,O=this._createEncoderBuffer(b.map(function(R){const B=this._baseState;return this._getUse(B.args[0],b)._encode(R,S)},L))}else D.use!==null?I=this._getUse(D.use,E)._encode(b,S):(O=this._encodePrimitive(D.tag,b),N=!0);if(!D.any&&D.choice===null){const L=D.implicit!==null?D.implicit:D.tag,R=D.implicit===null?"universal":"context";L===null?D.use===null&&S.error("Tag could be omitted only for .use()"):D.use===null&&(I=this._encodeComposite(L,N,R,O))}return D.explicit!==null&&(I=this._encodeComposite(D.explicit,!1,"context",I)),I},w.prototype._encodeChoice=function(b,S){const E=this._baseState,D=E.choice[b.type];return D||h(!1,b.type+" not found in "+JSON.stringify(Object.keys(E.choice))),D._encode(b.value,S)},w.prototype._encodePrimitive=function(b,S){const E=this._baseState;if(/str$/.test(b))return this._encodeStr(S,b);if(b==="objid"&&E.args)return this._encodeObjid(S,E.reverseArgs[0],E.args[1]);if(b==="objid")return this._encodeObjid(S,null,null);if(b==="gentime"||b==="utctime")return this._encodeTime(S,b);if(b==="null_")return this._encodeNull();if(b==="int"||b==="enum")return this._encodeInt(S,E.args&&E.reverseArgs[0]);if(b==="bool")return this._encodeBool(S);if(b==="objDesc")return this._encodeStr(S,b);throw new Error("Unsupported tag: "+b)},w.prototype._isNumstr=function(b){return/^[0-9 ]*$/.test(b)},w.prototype._isPrintstr=function(b){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(b)},o0}var f0={},Cp;function Fu(){return Cp||(Cp=1,function(c){function i(a){const h={};return Object.keys(a).forEach(function(g){(g|0)==g&&(g=g|0);const s=a[g];h[s]=g}),h}c.tagClass={0:"universal",1:"application",2:"context",3:"private"},c.tagClassByName=i(c.tagClass),c.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},c.tagByName=i(c.tag)}(f0)),f0}var h0,Tp;function yg(){if(Tp)return h0;Tp=1;const c=sr,i=Uu().Buffer,a=Lu(),h=Fu();function g(_){this.enc="der",this.name=_.name,this.entity=_,this.tree=new s,this.tree._init(_.body)}h0=g,g.prototype.encode=function(M,b){return this.tree._encode(M,b).join()};function s(_){a.call(this,"der",_)}c(s,a),s.prototype._encodeComposite=function(M,b,S,E){const D=w(M,b,S,this.reporter);if(E.length<128){const N=i.alloc(2);return N[0]=D,N[1]=E.length,this._createEncoderBuffer([N,E])}let I=1;for(let N=E.length;N>=256;N>>=8)I++;const O=i.alloc(1+1+I);O[0]=D,O[1]=128|I;for(let N=1+I,L=E.length;L>0;N--,L>>=8)O[N]=L&255;return this._createEncoderBuffer([O,E])},s.prototype._encodeStr=function(M,b){if(b==="bitstr")return this._createEncoderBuffer([M.unused|0,M.data]);if(b==="bmpstr"){const S=i.alloc(M.length*2);for(let E=0;E<M.length;E++)S.writeUInt16BE(M.charCodeAt(E),E*2);return this._createEncoderBuffer(S)}else return b==="numstr"?this._isNumstr(M)?this._createEncoderBuffer(M):this.reporter.error("Encoding of string type: numstr supports only digits and space"):b==="printstr"?this._isPrintstr(M)?this._createEncoderBuffer(M):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(b)?this._createEncoderBuffer(M):b==="objDesc"?this._createEncoderBuffer(M):this.reporter.error("Encoding of string type: "+b+" unsupported")},s.prototype._encodeObjid=function(M,b,S){if(typeof M=="string"){if(!b)return this.reporter.error("string objid given, but no values map found");if(!b.hasOwnProperty(M))return this.reporter.error("objid not found in values map");M=b[M].split(/[\s.]+/g);for(let O=0;O<M.length;O++)M[O]|=0}else if(Array.isArray(M)){M=M.slice();for(let O=0;O<M.length;O++)M[O]|=0}if(!Array.isArray(M))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(M));if(!S){if(M[1]>=40)return this.reporter.error("Second objid identifier OOB");M.splice(0,2,M[0]*40+M[1])}let E=0;for(let O=0;O<M.length;O++){let N=M[O];for(E++;N>=128;N>>=7)E++}const D=i.alloc(E);let I=D.length-1;for(let O=M.length-1;O>=0;O--){let N=M[O];for(D[I--]=N&127;(N>>=7)>0;)D[I--]=128|N&127}return this._createEncoderBuffer(D)};function x(_){return _<10?"0"+_:_}s.prototype._encodeTime=function(M,b){let S;const E=new Date(M);return b==="gentime"?S=[x(E.getUTCFullYear()),x(E.getUTCMonth()+1),x(E.getUTCDate()),x(E.getUTCHours()),x(E.getUTCMinutes()),x(E.getUTCSeconds()),"Z"].join(""):b==="utctime"?S=[x(E.getUTCFullYear()%100),x(E.getUTCMonth()+1),x(E.getUTCDate()),x(E.getUTCHours()),x(E.getUTCMinutes()),x(E.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+b+" time is not supported yet"),this._encodeStr(S,"octstr")},s.prototype._encodeNull=function(){return this._createEncoderBuffer("")},s.prototype._encodeInt=function(M,b){if(typeof M=="string"){if(!b)return this.reporter.error("String int or enum given, but no values map");if(!b.hasOwnProperty(M))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(M));M=b[M]}if(typeof M!="number"&&!i.isBuffer(M)){const D=M.toArray();!M.sign&&D[0]&128&&D.unshift(0),M=i.from(D)}if(i.isBuffer(M)){let D=M.length;M.length===0&&D++;const I=i.alloc(D);return M.copy(I),M.length===0&&(I[0]=0),this._createEncoderBuffer(I)}if(M<128)return this._createEncoderBuffer(M);if(M<256)return this._createEncoderBuffer([0,M]);let S=1;for(let D=M;D>=256;D>>=8)S++;const E=new Array(S);for(let D=E.length-1;D>=0;D--)E[D]=M&255,M>>=8;return E[0]&128&&E.unshift(0),this._createEncoderBuffer(i.from(E))},s.prototype._encodeBool=function(M){return this._createEncoderBuffer(M?255:0)},s.prototype._use=function(M,b){return typeof M=="function"&&(M=M(b)),M._getEncoder("der").tree},s.prototype._skipDefault=function(M,b,S){const E=this._baseState;let D;if(E.default===null)return!1;const I=M.join();if(E.defaultBuffer===void 0&&(E.defaultBuffer=this._encodeValue(E.default,b,S).join()),I.length!==E.defaultBuffer.length)return!1;for(D=0;D<I.length;D++)if(I[D]!==E.defaultBuffer[D])return!1;return!0};function w(_,M,b,S){let E;if(_==="seqof"?_="seq":_==="setof"&&(_="set"),h.tagByName.hasOwnProperty(_))E=h.tagByName[_];else if(typeof _=="number"&&(_|0)===_)E=_;else return S.error("Unknown tag: "+_);return E>=31?S.error("Multi-octet tag encoding unsupported"):(M||(E|=32),E|=h.tagClassByName[b||"universal"]<<6,E)}return h0}var u0,Bp;function w_(){if(Bp)return u0;Bp=1;const c=sr,i=yg();function a(h){i.call(this,h),this.enc="pem"}return c(a,i),u0=a,a.prototype.encode=function(g,s){const w=i.prototype.encode.call(this,g).toString("base64"),_=["-----BEGIN "+s.label+"-----"];for(let M=0;M<w.length;M+=64)_.push(w.slice(M,M+64));return _.push("-----END "+s.label+"-----"),_.join(`
`)},u0}var Np;function wg(){return Np||(Np=1,function(c){const i=c;i.der=yg(),i.pem=w_()}(n0)),n0}var c0={},l0,qp;function _g(){if(qp)return l0;qp=1;const c=sr,i=bg(),a=$s().DecoderBuffer,h=Lu(),g=Fu();function s(M){this.enc="der",this.name=M.name,this.entity=M,this.tree=new x,this.tree._init(M.body)}l0=s,s.prototype.decode=function(b,S){return a.isDecoderBuffer(b)||(b=new a(b,S)),this.tree._decode(b,S)};function x(M){h.call(this,"der",M)}c(x,h),x.prototype._peekTag=function(b,S,E){if(b.isEmpty())return!1;const D=b.save(),I=w(b,'Failed to peek tag: "'+S+'"');return b.isError(I)?I:(b.restore(D),I.tag===S||I.tagStr===S||I.tagStr+"of"===S||E)},x.prototype._decodeTag=function(b,S,E){const D=w(b,'Failed to decode tag of "'+S+'"');if(b.isError(D))return D;let I=_(b,D.primitive,'Failed to get length of "'+S+'"');if(b.isError(I))return I;if(!E&&D.tag!==S&&D.tagStr!==S&&D.tagStr+"of"!==S)return b.error('Failed to match tag: "'+S+'"');if(D.primitive||I!==null)return b.skip(I,'Failed to match body of: "'+S+'"');const O=b.save(),N=this._skipUntilEnd(b,'Failed to skip indefinite length body: "'+this.tag+'"');return b.isError(N)?N:(I=b.offset-O.offset,b.restore(O),b.skip(I,'Failed to match body of: "'+S+'"'))},x.prototype._skipUntilEnd=function(b,S){for(;;){const E=w(b,S);if(b.isError(E))return E;const D=_(b,E.primitive,S);if(b.isError(D))return D;let I;if(E.primitive||D!==null?I=b.skip(D):I=this._skipUntilEnd(b,S),b.isError(I))return I;if(E.tagStr==="end")break}},x.prototype._decodeList=function(b,S,E,D){const I=[];for(;!b.isEmpty();){const O=this._peekTag(b,"end");if(b.isError(O))return O;const N=E.decode(b,"der",D);if(b.isError(N)&&O)break;I.push(N)}return I},x.prototype._decodeStr=function(b,S){if(S==="bitstr"){const E=b.readUInt8();return b.isError(E)?E:{unused:E,data:b.raw()}}else if(S==="bmpstr"){const E=b.raw();if(E.length%2===1)return b.error("Decoding of string type: bmpstr length mismatch");let D="";for(let I=0;I<E.length/2;I++)D+=String.fromCharCode(E.readUInt16BE(I*2));return D}else if(S==="numstr"){const E=b.raw().toString("ascii");return this._isNumstr(E)?E:b.error("Decoding of string type: numstr unsupported characters")}else{if(S==="octstr")return b.raw();if(S==="objDesc")return b.raw();if(S==="printstr"){const E=b.raw().toString("ascii");return this._isPrintstr(E)?E:b.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(S)?b.raw().toString():b.error("Decoding of string type: "+S+" unsupported")}},x.prototype._decodeObjid=function(b,S,E){let D;const I=[];let O=0,N=0;for(;!b.isEmpty();)N=b.readUInt8(),O<<=7,O|=N&127,N&128||(I.push(O),O=0);N&128&&I.push(O);const L=I[0]/40|0,R=I[0]%40;if(E?D=I:D=[L,R].concat(I.slice(1)),S){let B=S[D.join(" ")];B===void 0&&(B=S[D.join(".")]),B!==void 0&&(D=B)}return D},x.prototype._decodeTime=function(b,S){const E=b.raw().toString();let D,I,O,N,L,R;if(S==="gentime")D=E.slice(0,4)|0,I=E.slice(4,6)|0,O=E.slice(6,8)|0,N=E.slice(8,10)|0,L=E.slice(10,12)|0,R=E.slice(12,14)|0;else if(S==="utctime")D=E.slice(0,2)|0,I=E.slice(2,4)|0,O=E.slice(4,6)|0,N=E.slice(6,8)|0,L=E.slice(8,10)|0,R=E.slice(10,12)|0,D<70?D=2e3+D:D=1900+D;else return b.error("Decoding "+S+" time is not supported yet");return Date.UTC(D,I-1,O,N,L,R,0)},x.prototype._decodeNull=function(){return null},x.prototype._decodeBool=function(b){const S=b.readUInt8();return b.isError(S)?S:S!==0},x.prototype._decodeInt=function(b,S){const E=b.raw();let D=new i(E);return S&&(D=S[D.toString(10)]||D),D},x.prototype._use=function(b,S){return typeof b=="function"&&(b=b(S)),b._getDecoder("der").tree};function w(M,b){let S=M.readUInt8(b);if(M.isError(S))return S;const E=g.tagClass[S>>6],D=(S&32)===0;if((S&31)===31){let O=S;for(S=0;(O&128)===128;){if(O=M.readUInt8(b),M.isError(O))return O;S<<=7,S|=O&127}}else S&=31;const I=g.tag[S];return{cls:E,primitive:D,tag:S,tagStr:I}}function _(M,b,S){let E=M.readUInt8(S);if(M.isError(E))return E;if(!b&&E===128)return null;if(!(E&128))return E;const D=E&127;if(D>4)return M.error("length octect is too long");E=0;for(let I=0;I<D;I++){E<<=8;const O=M.readUInt8(S);if(M.isError(O))return O;E|=O}return E}return l0}var d0,Up;function __(){if(Up)return d0;Up=1;const c=sr,i=Uu().Buffer,a=_g();function h(g){a.call(this,g),this.enc="pem"}return c(h,a),d0=h,h.prototype.decode=function(s,x){const w=s.toString().split(/[\r\n]+/g),_=x.label.toUpperCase(),M=/^-----(BEGIN|END) ([^-]+)-----$/;let b=-1,S=-1;for(let I=0;I<w.length;I++){const O=w[I].match(M);if(O!==null&&O[2]===_)if(b===-1){if(O[1]!=="BEGIN")break;b=I}else{if(O[1]!=="END")break;S=I;break}}if(b===-1||S===-1)throw new Error("PEM section not found for: "+_);const E=w.slice(b+1,S).join("");E.replace(/[^a-z0-9+/=]+/gi,"");const D=i.from(E,"base64");return a.prototype.decode.call(this,D,x)},d0}var kp;function Mg(){return kp||(kp=1,function(c){const i=c;i.der=_g(),i.pem=__()}(c0)),c0}var Lp;function M_(){return Lp||(Lp=1,function(c){const i=wg(),a=Mg(),h=sr,g=c;g.define=function(w,_){return new s(w,_)};function s(x,w){this.name=x,this.body=w,this.decoders={},this.encoders={}}s.prototype._createNamed=function(w){const _=this.name;function M(b){this._initNamed(b,_)}return h(M,w),M.prototype._initNamed=function(S,E){w.call(this,S,E)},new M(this)},s.prototype._getDecoder=function(w){return w=w||"der",this.decoders.hasOwnProperty(w)||(this.decoders[w]=this._createNamed(a[w])),this.decoders[w]},s.prototype.decode=function(w,_,M){return this._getDecoder(_).decode(w,M)},s.prototype._getEncoder=function(w){return w=w||"der",this.encoders.hasOwnProperty(w)||(this.encoders[w]=this._createNamed(i[w])),this.encoders[w]},s.prototype.encode=function(w,_,M){return this._getEncoder(_).encode(w,M)}}(i0)),i0}var p0={},Fp;function x_(){return Fp||(Fp=1,function(c){const i=c;i.Reporter=ku().Reporter,i.DecoderBuffer=$s().DecoderBuffer,i.EncoderBuffer=$s().EncoderBuffer,i.Node=Lu()}(p0)),p0}var v0={},$p;function E_(){return $p||($p=1,function(c){const i=c;i._reverse=function(h){const g={};return Object.keys(h).forEach(function(s){(s|0)==s&&(s=s|0);const x=h[s];g[x]=s}),g},i.der=Fu()}(v0)),v0}var zp;function xg(){return zp||(zp=1,function(c){const i=c;i.bignum=bg(),i.define=M_().define,i.base=x_(),i.constants=E_(),i.decoders=Mg(),i.encoders=wg()}(r0)),r0}var g0,jp;function S_(){if(jp)return g0;jp=1;var c=xg(),i=c.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),a=c.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),h=c.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),g=c.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(h),this.key("subjectPublicKey").bitstr())}),s=c.define("RelativeDistinguishedName",function(){this.setof(a)}),x=c.define("RDNSequence",function(){this.seqof(s)}),w=c.define("Name",function(){this.choice({rdnSequence:this.use(x)})}),_=c.define("Validity",function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))}),M=c.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),b=c.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(h),this.key("issuer").use(w),this.key("validity").use(_),this.key("subject").use(w),this.key("subjectPublicKeyInfo").use(g),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(M).optional())}),S=c.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(b),this.key("signatureAlgorithm").use(h),this.key("signatureValue").bitstr())});return g0=S,g0}var Hp;function A_(){if(Hp)return pi;Hp=1;var c=xg();pi.certificate=S_();var i=c.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});pi.RSAPrivateKey=i;var a=c.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});pi.RSAPublicKey=a;var h=c.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(g),this.key("subjectPublicKey").bitstr())});pi.PublicKey=h;var g=c.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),s=c.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(g),this.key("subjectPrivateKey").octstr())});pi.PrivateKey=s;var x=c.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});pi.EncryptedPrivateKey=x;var w=c.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});pi.DSAPrivateKey=w,pi.DSAparam=c.define("DSAparam",function(){this.int()});var _=c.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(M),this.key("publicKey").optional().explicit(1).bitstr())});pi.ECPrivateKey=_;var M=c.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});return pi.signature=c.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),pi}const D_={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var m0,Kp;function I_(){if(Kp)return m0;Kp=1;var c=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,h=qo(),g=Cu(),s=Te.Buffer;return m0=function(x,w){var _=x.toString(),M=_.match(c),b;if(M){var E="aes"+M[1],D=s.from(M[2],"hex"),I=s.from(M[3].replace(/[\r\n]/g,""),"base64"),O=h(w,D.slice(0,8),parseInt(M[1],10)).key,N=[],L=g.createDecipheriv(E,O,D);N.push(L.update(I)),N.push(L.final()),b=s.concat(N)}else{var S=_.match(a);b=s.from(S[2].replace(/[\r\n]/g,""),"base64")}var R=_.match(i)[1];return{tag:R,data:b}},m0}var b0,Vp;function ko(){if(Vp)return b0;Vp=1;var c=A_(),i=D_,a=I_(),h=Cu(),g=ag(),s=Te.Buffer;b0=x;function x(_){var M;typeof _=="object"&&!s.isBuffer(_)&&(M=_.passphrase,_=_.key),typeof _=="string"&&(_=s.from(_));var b=a(_,M),S=b.tag,E=b.data,D,I;switch(S){case"CERTIFICATE":I=c.certificate.decode(E,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(I||(I=c.PublicKey.decode(E,"der")),D=I.algorithm.algorithm.join("."),D){case"1.2.840.113549.1.1.1":return c.RSAPublicKey.decode(I.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return I.subjectPrivateKey=I.subjectPublicKey,{type:"ec",data:I};case"1.2.840.10040.4.1":return I.algorithm.params.pub_key=c.DSAparam.decode(I.subjectPublicKey.data,"der"),{type:"dsa",data:I.algorithm.params};default:throw new Error("unknown key id "+D)}case"ENCRYPTED PRIVATE KEY":E=c.EncryptedPrivateKey.decode(E,"der"),E=w(E,M);case"PRIVATE KEY":switch(I=c.PrivateKey.decode(E,"der"),D=I.algorithm.algorithm.join("."),D){case"1.2.840.113549.1.1.1":return c.RSAPrivateKey.decode(I.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:I.algorithm.curve,privateKey:c.ECPrivateKey.decode(I.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return I.algorithm.params.priv_key=c.DSAparam.decode(I.subjectPrivateKey,"der"),{type:"dsa",params:I.algorithm.params};default:throw new Error("unknown key id "+D)}case"RSA PUBLIC KEY":return c.RSAPublicKey.decode(E,"der");case"RSA PRIVATE KEY":return c.RSAPrivateKey.decode(E,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:c.DSAPrivateKey.decode(E,"der")};case"EC PRIVATE KEY":return E=c.ECPrivateKey.decode(E,"der"),{curve:E.parameters.value,privateKey:E.privateKey};default:throw new Error("unknown key type "+S)}}x.signature=c.signature;function w(_,M){var b=_.algorithm.decrypt.kde.kdeparams.salt,S=parseInt(_.algorithm.decrypt.kde.kdeparams.iters.toString(),10),E=i[_.algorithm.decrypt.cipher.algo.join(".")],D=_.algorithm.decrypt.cipher.iv,I=_.subjectPrivateKey,O=parseInt(E.split("-")[1],10)/8,N=g.pbkdf2Sync(M,b,S,O,"sha1"),L=h.createDecipheriv(E,N,D),R=[];return R.push(L.update(I)),R.push(L.final()),s.concat(R)}return b0}const Eg={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var Gp;function R_(){if(Gp)return Ds.exports;Gp=1;var c=Te.Buffer,i=tg(),a=Bu(),h=qu().ec,g=vu,s=ko(),x=Eg;function w(N,L,R,B,T){var U=s(L);if(U.curve){if(B!=="ecdsa"&&B!=="ecdsa/rsa")throw new Error("wrong private key type");return _(N,U)}else if(U.type==="dsa"){if(B!=="dsa")throw new Error("wrong private key type");return M(N,U,R)}else if(B!=="rsa"&&B!=="ecdsa/rsa")throw new Error("wrong private key type");N=c.concat([T,N]);for(var k=U.modulus.byteLength(),P=[0,1];N.length+P.length+1<k;)P.push(255);P.push(0);for(var F=-1;++F<N.length;)P.push(N[F]);var G=a(P,U);return G}function _(N,L){var R=x[L.curve.join(".")];if(!R)throw new Error("unknown curve "+L.curve.join("."));var B=new h(R),T=B.keyFromPrivate(L.privateKey),U=T.sign(N);return c.from(U.toDER())}function M(N,L,R){for(var B=L.params.priv_key,T=L.params.p,U=L.params.q,k=L.params.g,P=new g(0),F,G=E(N,U).mod(U),nt=!1,v=S(B,U,N,R);nt===!1;)F=I(U,v,R),P=O(k,F,T,U),nt=F.invm(U).imul(G.add(B.mul(P))).mod(U),nt.cmpn(0)===0&&(nt=!1,P=new g(0));return b(P,nt)}function b(N,L){N=N.toArray(),L=L.toArray(),N[0]&128&&(N=[0].concat(N)),L[0]&128&&(L=[0].concat(L));var R=N.length+L.length+4,B=[48,R,2,N.length];return B=B.concat(N,[2,L.length],L),c.from(B)}function S(N,L,R,B){if(N=c.from(N.toArray()),N.length<L.byteLength()){var T=c.alloc(L.byteLength()-N.length);N=c.concat([T,N])}var U=R.length,k=D(R,L),P=c.alloc(U);P.fill(1);var F=c.alloc(U);return F=i(B,F).update(P).update(c.from([0])).update(N).update(k).digest(),P=i(B,F).update(P).digest(),F=i(B,F).update(P).update(c.from([1])).update(N).update(k).digest(),P=i(B,F).update(P).digest(),{k:F,v:P}}function E(N,L){var R=new g(N),B=(N.length<<3)-L.bitLength();return B>0&&R.ishrn(B),R}function D(N,L){N=E(N,L),N=N.mod(L);var R=c.from(N.toArray());if(R.length<L.byteLength()){var B=c.alloc(L.byteLength()-R.length);R=c.concat([B,R])}return R}function I(N,L,R){var B,T;do{for(B=c.alloc(0);B.length*8<N.bitLength();)L.v=i(R,L.k).update(L.v).digest(),B=c.concat([B,L.v]);T=E(B,N),L.k=i(R,L.k).update(L.v).update(c.from([0])).digest(),L.v=i(R,L.k).update(L.v).digest()}while(T.cmp(N)!==-1);return T}function O(N,L,R,B){return N.toRed(g.mont(R)).redPow(L).fromRed().mod(B)}return Ds.exports=w,Ds.exports.getKey=S,Ds.exports.makeKey=I,Ds.exports}var y0,Wp;function P_(){if(Wp)return y0;Wp=1;var c=Te.Buffer,i=vu,a=qu().ec,h=ko(),g=Eg;function s(M,b,S,E,D){var I=h(S);if(I.type==="ec"){if(E!=="ecdsa"&&E!=="ecdsa/rsa")throw new Error("wrong public key type");return x(M,b,I)}else if(I.type==="dsa"){if(E!=="dsa")throw new Error("wrong public key type");return w(M,b,I)}else if(E!=="rsa"&&E!=="ecdsa/rsa")throw new Error("wrong public key type");b=c.concat([D,b]);for(var O=I.modulus.byteLength(),N=[1],L=0;b.length+N.length+2<O;)N.push(255),L++;N.push(0);for(var R=-1;++R<b.length;)N.push(b[R]);N=c.from(N);var B=i.mont(I.modulus);M=new i(M).toRed(B),M=M.redPow(new i(I.publicExponent)),M=c.from(M.fromRed().toArray());var T=L<8?1:0;for(O=Math.min(M.length,N.length),M.length!==N.length&&(T=1),R=-1;++R<O;)T|=M[R]^N[R];return T===0}function x(M,b,S){var E=g[S.data.algorithm.curve.join(".")];if(!E)throw new Error("unknown curve "+S.data.algorithm.curve.join("."));var D=new a(E),I=S.data.subjectPrivateKey.data;return D.verify(b,M,I)}function w(M,b,S){var E=S.data.p,D=S.data.q,I=S.data.g,O=S.data.pub_key,N=h.signature.decode(M,"der"),L=N.s,R=N.r;_(L,D),_(R,D);var B=i.mont(E),T=L.invm(D),U=I.toRed(B).redPow(new i(b).mul(T).mod(D)).fromRed().mul(O.toRed(B).redPow(R.mul(T).mod(D)).fromRed()).mod(E).mod(D);return U.cmp(R)===0}function _(M,b){if(M.cmpn(0)<=0)throw new Error("invalid sig");if(M.cmp(b)>=b)throw new Error("invalid sig")}return y0=s,y0}var w0,Zp;function O_(){if(Zp)return w0;Zp=1;var c=Te.Buffer,i=Ks(),a=Nv,h=sr,g=R_(),s=P_(),x=eg;Object.keys(x).forEach(function(S){x[S].id=c.from(x[S].id,"hex"),x[S.toLowerCase()]=x[S]});function w(S){a.Writable.call(this);var E=x[S];if(!E)throw new Error("Unknown message digest");this._hashType=E.hash,this._hash=i(E.hash),this._tag=E.id,this._signType=E.sign}h(w,a.Writable),w.prototype._write=function(E,D,I){this._hash.update(E),I()},w.prototype.update=function(E,D){return typeof E=="string"&&(E=c.from(E,D)),this._hash.update(E),this},w.prototype.sign=function(E,D){this.end();var I=this._hash.digest(),O=g(I,E,this._hashType,this._signType,this._tag);return D?O.toString(D):O};function _(S){a.Writable.call(this);var E=x[S];if(!E)throw new Error("Unknown message digest");this._hash=i(E.hash),this._tag=E.id,this._signType=E.sign}h(_,a.Writable),_.prototype._write=function(E,D,I){this._hash.update(E),I()},_.prototype.update=function(E,D){return typeof E=="string"&&(E=c.from(E,D)),this._hash.update(E),this},_.prototype.verify=function(E,D,I){typeof D=="string"&&(D=c.from(D,I)),this.end();var O=this._hash.digest();return s(D,O,E,this._signType,this._tag)};function M(S){return new w(S)}function b(S){return new _(S)}return w0={Sign:M,Verify:b,createSign:M,createVerify:b},w0}var mo={exports:{}};mo.exports;var Jp;function C_(){return Jp||(Jp=1,function(c){(function(i,a){function h(v,t){if(!v)throw new Error(t||"Assertion failed")}function g(v,t){v.super_=t;var r=function(){};r.prototype=t.prototype,v.prototype=new r,v.prototype.constructor=v}function s(v,t,r){if(s.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((t==="le"||t==="be")&&(r=t,t=10),this._init(v||0,t||10,r||"be"))}typeof i=="object"?i.exports=s:a.BN=s,s.BN=s,s.wordSize=26;var x;try{typeof window<"u"&&typeof window.Buffer<"u"?x=window.Buffer:x=ns.Buffer}catch{}s.isBN=function(t){return t instanceof s?!0:t!==null&&typeof t=="object"&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,r){return t.cmp(r)>0?t:r},s.min=function(t,r){return t.cmp(r)<0?t:r},s.prototype._init=function(t,r,n){if(typeof t=="number")return this._initNumber(t,r,n);if(typeof t=="object")return this._initArray(t,r,n);r==="hex"&&(r=16),h(r===(r|0)&&r>=2&&r<=36),t=t.toString().replace(/\s+/g,"");var o=0;t[0]==="-"&&(o++,this.negative=1),o<t.length&&(r===16?this._parseHex(t,o,n):(this._parseBase(t,r,o),n==="le"&&this._initArray(this.toArray(),r,n)))},s.prototype._initNumber=function(t,r,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(h(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3),n==="le"&&this._initArray(this.toArray(),r,n)},s.prototype._initArray=function(t,r,n){if(h(typeof t.length=="number"),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d,m,y=0;if(n==="be")for(o=t.length-1,d=0;o>=0;o-=3)m=t[o]|t[o-1]<<8|t[o-2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(n==="le")for(o=0,d=0;o<t.length;o+=3)m=t[o]|t[o+1]<<8|t[o+2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this.strip()};function w(v,t){var r=v.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function _(v,t,r){var n=w(v,r);return r-1>=t&&(n|=w(v,r-1)<<4),n}s.prototype._parseHex=function(t,r,n){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d=0,m=0,y;if(n==="be")for(o=t.length-1;o>=r;o-=2)y=_(t,r,o)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8;else{var u=t.length-r;for(o=u%2===0?r+1:r;o<t.length;o+=2)y=_(t,r,o)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8}this.strip()};function M(v,t,r,n){for(var o=0,d=Math.min(v.length,r),m=t;m<d;m++){var y=v.charCodeAt(m)-48;o*=n,y>=49?o+=y-49+10:y>=17?o+=y-17+10:o+=y}return o}s.prototype._parseBase=function(t,r,n){this.words=[0],this.length=1;for(var o=0,d=1;d<=67108863;d*=r)o++;o--,d=d/r|0;for(var m=t.length-n,y=m%o,u=Math.min(m,m-y)+n,e=0,l=n;l<u;l+=o)e=M(t,l,l+o,r),this.imuln(d),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e);if(y!==0){var z=1;for(e=M(t,l,t.length,r),l=0;l<y;l++)z*=r;this.imuln(z),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e)}this.strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(t,r){t=t||10,r=r|0||1;var n;if(t===16||t==="hex"){n="";for(var o=0,d=0,m=0;m<this.length;m++){var y=this.words[m],u=((y<<o|d)&16777215).toString(16);d=y>>>24-o&16777215,d!==0||m!==this.length-1?n=b[6-u.length]+u+n:n=u+n,o+=2,o>=26&&(o-=26,m--)}for(d!==0&&(n=d.toString(16)+n);n.length%r!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}if(t===(t|0)&&t>=2&&t<=36){var e=S[t],l=E[t];n="";var z=this.clone();for(z.negative=0;!z.isZero();){var $=z.modn(l).toString(t);z=z.idivn(l),z.isZero()?n=$+n:n=b[e-$.length]+$+n}for(this.isZero()&&(n="0"+n);n.length%r!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}h(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return this.length===2?t+=this.words[1]*67108864:this.length===3&&this.words[2]===1?t+=4503599627370496+this.words[1]*67108864:this.length>2&&h(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-t:t},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(t,r){return h(typeof x<"u"),this.toArrayLike(x,t,r)},s.prototype.toArray=function(t,r){return this.toArrayLike(Array,t,r)},s.prototype.toArrayLike=function(t,r,n){var o=this.byteLength(),d=n||Math.max(1,o);h(o<=d,"byte array longer than desired length"),h(d>0,"Requested array length <= 0"),this.strip();var m=r==="le",y=new t(d),u,e,l=this.clone();if(m){for(e=0;!l.isZero();e++)u=l.andln(255),l.iushrn(8),y[e]=u;for(;e<d;e++)y[e]=0}else{for(e=0;e<d-o;e++)y[e]=0;for(e=0;!l.isZero();e++)u=l.andln(255),l.iushrn(8),y[d-e-1]=u}return y},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var r=t,n=0;return r>=4096&&(n+=13,r>>>=13),r>=64&&(n+=7,r>>>=7),r>=8&&(n+=4,r>>>=4),r>=2&&(n+=2,r>>>=2),n+r},s.prototype._zeroBits=function(t){if(t===0)return 26;var r=t,n=0;return r&8191||(n+=13,r>>>=13),r&127||(n+=7,r>>>=7),r&15||(n+=4,r>>>=4),r&3||(n+=2,r>>>=2),r&1||n++,n},s.prototype.bitLength=function(){var t=this.words[this.length-1],r=this._countBits(t);return(this.length-1)*26+r};function D(v){for(var t=new Array(v.bitLength()),r=0;r<t.length;r++){var n=r/26|0,o=r%26;t[r]=(v.words[n]&1<<o)>>>o}return t}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);if(t+=n,n!==26)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return this.negative!==0?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},s.prototype.ior=function(t){return h((this.negative|t.negative)===0),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var r;this.length>t.length?r=t:r=this;for(var n=0;n<r.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=r.length,this.strip()},s.prototype.iand=function(t){return h((this.negative|t.negative)===0),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var r,n;this.length>t.length?(r=this,n=t):(r=t,n=this);for(var o=0;o<n.length;o++)this.words[o]=r.words[o]^n.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},s.prototype.ixor=function(t){return h((this.negative|t.negative)===0),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){h(typeof t=="number"&&t>=0);var r=Math.ceil(t/26)|0,n=t%26;this._expand(r),n>0&&r--;for(var o=0;o<r;o++)this.words[o]=~this.words[o]&67108863;return n>0&&(this.words[o]=~this.words[o]&67108863>>26-n),this.strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,r){h(typeof t=="number"&&t>=0);var n=t/26|0,o=t%26;return this._expand(n+1),r?this.words[n]=this.words[n]|1<<o:this.words[n]=this.words[n]&~(1<<o),this.strip()},s.prototype.iadd=function(t){var r;if(this.negative!==0&&t.negative===0)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(this.negative===0&&t.negative!==0)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();var n,o;this.length>t.length?(n=this,o=t):(n=t,o=this);for(var d=0,m=0;m<o.length;m++)r=(n.words[m]|0)+(o.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;for(;d!==0&&m<n.length;m++)r=(n.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;if(this.length=n.length,d!==0)this.words[this.length]=d,this.length++;else if(n!==this)for(;m<n.length;m++)this.words[m]=n.words[m];return this},s.prototype.add=function(t){var r;return t.negative!==0&&this.negative===0?(t.negative=0,r=this.sub(t),t.negative^=1,r):t.negative===0&&this.negative!==0?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n=this.cmp(t);if(n===0)return this.negative=0,this.length=1,this.words[0]=0,this;var o,d;n>0?(o=this,d=t):(o=t,d=this);for(var m=0,y=0;y<d.length;y++)r=(o.words[y]|0)-(d.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;for(;m!==0&&y<o.length;y++)r=(o.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;if(m===0&&y<o.length&&o!==this)for(;y<o.length;y++)this.words[y]=o.words[y];return this.length=Math.max(this.length,y),o!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(t){return this.clone().isub(t)};function I(v,t,r){r.negative=t.negative^v.negative;var n=v.length+t.length|0;r.length=n,n=n-1|0;var o=v.words[0]|0,d=t.words[0]|0,m=o*d,y=m&67108863,u=m/67108864|0;r.words[0]=y;for(var e=1;e<n;e++){for(var l=u>>>26,z=u&67108863,$=Math.min(e,t.length-1),H=Math.max(0,e-v.length+1);H<=$;H++){var W=e-H|0;o=v.words[W]|0,d=t.words[H]|0,m=o*d+z,l+=m/67108864|0,z=m&67108863}r.words[e]=z|0,u=l|0}return u!==0?r.words[e]=u|0:r.length--,r.strip()}var O=function(t,r,n){var o=t.words,d=r.words,m=n.words,y=0,u,e,l,z=o[0]|0,$=z&8191,H=z>>>13,W=o[1]|0,tt=W&8191,Z=W>>>13,et=o[2]|0,K=et&8191,C=et>>>13,Q=o[3]|0,rt=Q&8191,st=Q>>>13,Yt=o[4]|0,gt=Yt&8191,mt=Yt>>>13,ee=o[5]|0,_t=ee&8191,Mt=ee>>>13,re=o[6]|0,ut=re&8191,pt=re>>>13,Xt=o[7]|0,vt=Xt&8191,lt=Xt>>>13,Qt=o[8]|0,ht=Qt&8191,dt=Qt>>>13,ie=o[9]|0,ct=ie&8191,bt=ie>>>13,ne=d[0]|0,yt=ne&8191,wt=ne>>>13,se=d[1]|0,Bt=se&8191,Ut=se>>>13,Fe=d[2]|0,Nt=Fe&8191,kt=Fe>>>13,ar=d[3]|0,Lt=ar&8191,Et=ar>>>13,pe=d[4]|0,St=pe&8191,At=pe>>>13,ge=d[5]|0,xt=ge&8191,Pt=ge>>>13,Me=d[6]|0,Dt=Me&8191,Ot=Me>>>13,ye=d[7]|0,Rt=ye&8191,It=ye>>>13,ue=d[8]|0,Ct=ue&8191,Tt=ue>>>13,dr=d[9]|0,Ft=dr&8191,$t=dr>>>13;n.negative=t.negative^r.negative,n.length=19,u=Math.imul($,yt),e=Math.imul($,wt),e=e+Math.imul(H,yt)|0,l=Math.imul(H,wt);var Se=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Se>>>26)|0,Se&=67108863,u=Math.imul(tt,yt),e=Math.imul(tt,wt),e=e+Math.imul(Z,yt)|0,l=Math.imul(Z,wt),u=u+Math.imul($,Bt)|0,e=e+Math.imul($,Ut)|0,e=e+Math.imul(H,Bt)|0,l=l+Math.imul(H,Ut)|0;var He=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(He>>>26)|0,He&=67108863,u=Math.imul(K,yt),e=Math.imul(K,wt),e=e+Math.imul(C,yt)|0,l=Math.imul(C,wt),u=u+Math.imul(tt,Bt)|0,e=e+Math.imul(tt,Ut)|0,e=e+Math.imul(Z,Bt)|0,l=l+Math.imul(Z,Ut)|0,u=u+Math.imul($,Nt)|0,e=e+Math.imul($,kt)|0,e=e+Math.imul(H,Nt)|0,l=l+Math.imul(H,kt)|0;var Ke=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,u=Math.imul(rt,yt),e=Math.imul(rt,wt),e=e+Math.imul(st,yt)|0,l=Math.imul(st,wt),u=u+Math.imul(K,Bt)|0,e=e+Math.imul(K,Ut)|0,e=e+Math.imul(C,Bt)|0,l=l+Math.imul(C,Ut)|0,u=u+Math.imul(tt,Nt)|0,e=e+Math.imul(tt,kt)|0,e=e+Math.imul(Z,Nt)|0,l=l+Math.imul(Z,kt)|0,u=u+Math.imul($,Lt)|0,e=e+Math.imul($,Et)|0,e=e+Math.imul(H,Lt)|0,l=l+Math.imul(H,Et)|0;var Ve=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,u=Math.imul(gt,yt),e=Math.imul(gt,wt),e=e+Math.imul(mt,yt)|0,l=Math.imul(mt,wt),u=u+Math.imul(rt,Bt)|0,e=e+Math.imul(rt,Ut)|0,e=e+Math.imul(st,Bt)|0,l=l+Math.imul(st,Ut)|0,u=u+Math.imul(K,Nt)|0,e=e+Math.imul(K,kt)|0,e=e+Math.imul(C,Nt)|0,l=l+Math.imul(C,kt)|0,u=u+Math.imul(tt,Lt)|0,e=e+Math.imul(tt,Et)|0,e=e+Math.imul(Z,Lt)|0,l=l+Math.imul(Z,Et)|0,u=u+Math.imul($,St)|0,e=e+Math.imul($,At)|0,e=e+Math.imul(H,St)|0,l=l+Math.imul(H,At)|0;var Ge=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,u=Math.imul(_t,yt),e=Math.imul(_t,wt),e=e+Math.imul(Mt,yt)|0,l=Math.imul(Mt,wt),u=u+Math.imul(gt,Bt)|0,e=e+Math.imul(gt,Ut)|0,e=e+Math.imul(mt,Bt)|0,l=l+Math.imul(mt,Ut)|0,u=u+Math.imul(rt,Nt)|0,e=e+Math.imul(rt,kt)|0,e=e+Math.imul(st,Nt)|0,l=l+Math.imul(st,kt)|0,u=u+Math.imul(K,Lt)|0,e=e+Math.imul(K,Et)|0,e=e+Math.imul(C,Lt)|0,l=l+Math.imul(C,Et)|0,u=u+Math.imul(tt,St)|0,e=e+Math.imul(tt,At)|0,e=e+Math.imul(Z,St)|0,l=l+Math.imul(Z,At)|0,u=u+Math.imul($,xt)|0,e=e+Math.imul($,Pt)|0,e=e+Math.imul(H,xt)|0,l=l+Math.imul(H,Pt)|0;var We=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(We>>>26)|0,We&=67108863,u=Math.imul(ut,yt),e=Math.imul(ut,wt),e=e+Math.imul(pt,yt)|0,l=Math.imul(pt,wt),u=u+Math.imul(_t,Bt)|0,e=e+Math.imul(_t,Ut)|0,e=e+Math.imul(Mt,Bt)|0,l=l+Math.imul(Mt,Ut)|0,u=u+Math.imul(gt,Nt)|0,e=e+Math.imul(gt,kt)|0,e=e+Math.imul(mt,Nt)|0,l=l+Math.imul(mt,kt)|0,u=u+Math.imul(rt,Lt)|0,e=e+Math.imul(rt,Et)|0,e=e+Math.imul(st,Lt)|0,l=l+Math.imul(st,Et)|0,u=u+Math.imul(K,St)|0,e=e+Math.imul(K,At)|0,e=e+Math.imul(C,St)|0,l=l+Math.imul(C,At)|0,u=u+Math.imul(tt,xt)|0,e=e+Math.imul(tt,Pt)|0,e=e+Math.imul(Z,xt)|0,l=l+Math.imul(Z,Pt)|0,u=u+Math.imul($,Dt)|0,e=e+Math.imul($,Ot)|0,e=e+Math.imul(H,Dt)|0,l=l+Math.imul(H,Ot)|0;var Oe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,u=Math.imul(vt,yt),e=Math.imul(vt,wt),e=e+Math.imul(lt,yt)|0,l=Math.imul(lt,wt),u=u+Math.imul(ut,Bt)|0,e=e+Math.imul(ut,Ut)|0,e=e+Math.imul(pt,Bt)|0,l=l+Math.imul(pt,Ut)|0,u=u+Math.imul(_t,Nt)|0,e=e+Math.imul(_t,kt)|0,e=e+Math.imul(Mt,Nt)|0,l=l+Math.imul(Mt,kt)|0,u=u+Math.imul(gt,Lt)|0,e=e+Math.imul(gt,Et)|0,e=e+Math.imul(mt,Lt)|0,l=l+Math.imul(mt,Et)|0,u=u+Math.imul(rt,St)|0,e=e+Math.imul(rt,At)|0,e=e+Math.imul(st,St)|0,l=l+Math.imul(st,At)|0,u=u+Math.imul(K,xt)|0,e=e+Math.imul(K,Pt)|0,e=e+Math.imul(C,xt)|0,l=l+Math.imul(C,Pt)|0,u=u+Math.imul(tt,Dt)|0,e=e+Math.imul(tt,Ot)|0,e=e+Math.imul(Z,Dt)|0,l=l+Math.imul(Z,Ot)|0,u=u+Math.imul($,Rt)|0,e=e+Math.imul($,It)|0,e=e+Math.imul(H,Rt)|0,l=l+Math.imul(H,It)|0;var Be=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Be>>>26)|0,Be&=67108863,u=Math.imul(ht,yt),e=Math.imul(ht,wt),e=e+Math.imul(dt,yt)|0,l=Math.imul(dt,wt),u=u+Math.imul(vt,Bt)|0,e=e+Math.imul(vt,Ut)|0,e=e+Math.imul(lt,Bt)|0,l=l+Math.imul(lt,Ut)|0,u=u+Math.imul(ut,Nt)|0,e=e+Math.imul(ut,kt)|0,e=e+Math.imul(pt,Nt)|0,l=l+Math.imul(pt,kt)|0,u=u+Math.imul(_t,Lt)|0,e=e+Math.imul(_t,Et)|0,e=e+Math.imul(Mt,Lt)|0,l=l+Math.imul(Mt,Et)|0,u=u+Math.imul(gt,St)|0,e=e+Math.imul(gt,At)|0,e=e+Math.imul(mt,St)|0,l=l+Math.imul(mt,At)|0,u=u+Math.imul(rt,xt)|0,e=e+Math.imul(rt,Pt)|0,e=e+Math.imul(st,xt)|0,l=l+Math.imul(st,Pt)|0,u=u+Math.imul(K,Dt)|0,e=e+Math.imul(K,Ot)|0,e=e+Math.imul(C,Dt)|0,l=l+Math.imul(C,Ot)|0,u=u+Math.imul(tt,Rt)|0,e=e+Math.imul(tt,It)|0,e=e+Math.imul(Z,Rt)|0,l=l+Math.imul(Z,It)|0,u=u+Math.imul($,Ct)|0,e=e+Math.imul($,Tt)|0,e=e+Math.imul(H,Ct)|0,l=l+Math.imul(H,Tt)|0;var Ze=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,u=Math.imul(ct,yt),e=Math.imul(ct,wt),e=e+Math.imul(bt,yt)|0,l=Math.imul(bt,wt),u=u+Math.imul(ht,Bt)|0,e=e+Math.imul(ht,Ut)|0,e=e+Math.imul(dt,Bt)|0,l=l+Math.imul(dt,Ut)|0,u=u+Math.imul(vt,Nt)|0,e=e+Math.imul(vt,kt)|0,e=e+Math.imul(lt,Nt)|0,l=l+Math.imul(lt,kt)|0,u=u+Math.imul(ut,Lt)|0,e=e+Math.imul(ut,Et)|0,e=e+Math.imul(pt,Lt)|0,l=l+Math.imul(pt,Et)|0,u=u+Math.imul(_t,St)|0,e=e+Math.imul(_t,At)|0,e=e+Math.imul(Mt,St)|0,l=l+Math.imul(Mt,At)|0,u=u+Math.imul(gt,xt)|0,e=e+Math.imul(gt,Pt)|0,e=e+Math.imul(mt,xt)|0,l=l+Math.imul(mt,Pt)|0,u=u+Math.imul(rt,Dt)|0,e=e+Math.imul(rt,Ot)|0,e=e+Math.imul(st,Dt)|0,l=l+Math.imul(st,Ot)|0,u=u+Math.imul(K,Rt)|0,e=e+Math.imul(K,It)|0,e=e+Math.imul(C,Rt)|0,l=l+Math.imul(C,It)|0,u=u+Math.imul(tt,Ct)|0,e=e+Math.imul(tt,Tt)|0,e=e+Math.imul(Z,Ct)|0,l=l+Math.imul(Z,Tt)|0,u=u+Math.imul($,Ft)|0,e=e+Math.imul($,$t)|0,e=e+Math.imul(H,Ft)|0,l=l+Math.imul(H,$t)|0;var Ne=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u=Math.imul(ct,Bt),e=Math.imul(ct,Ut),e=e+Math.imul(bt,Bt)|0,l=Math.imul(bt,Ut),u=u+Math.imul(ht,Nt)|0,e=e+Math.imul(ht,kt)|0,e=e+Math.imul(dt,Nt)|0,l=l+Math.imul(dt,kt)|0,u=u+Math.imul(vt,Lt)|0,e=e+Math.imul(vt,Et)|0,e=e+Math.imul(lt,Lt)|0,l=l+Math.imul(lt,Et)|0,u=u+Math.imul(ut,St)|0,e=e+Math.imul(ut,At)|0,e=e+Math.imul(pt,St)|0,l=l+Math.imul(pt,At)|0,u=u+Math.imul(_t,xt)|0,e=e+Math.imul(_t,Pt)|0,e=e+Math.imul(Mt,xt)|0,l=l+Math.imul(Mt,Pt)|0,u=u+Math.imul(gt,Dt)|0,e=e+Math.imul(gt,Ot)|0,e=e+Math.imul(mt,Dt)|0,l=l+Math.imul(mt,Ot)|0,u=u+Math.imul(rt,Rt)|0,e=e+Math.imul(rt,It)|0,e=e+Math.imul(st,Rt)|0,l=l+Math.imul(st,It)|0,u=u+Math.imul(K,Ct)|0,e=e+Math.imul(K,Tt)|0,e=e+Math.imul(C,Ct)|0,l=l+Math.imul(C,Tt)|0,u=u+Math.imul(tt,Ft)|0,e=e+Math.imul(tt,$t)|0,e=e+Math.imul(Z,Ft)|0,l=l+Math.imul(Z,$t)|0;var Je=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Je>>>26)|0,Je&=67108863,u=Math.imul(ct,Nt),e=Math.imul(ct,kt),e=e+Math.imul(bt,Nt)|0,l=Math.imul(bt,kt),u=u+Math.imul(ht,Lt)|0,e=e+Math.imul(ht,Et)|0,e=e+Math.imul(dt,Lt)|0,l=l+Math.imul(dt,Et)|0,u=u+Math.imul(vt,St)|0,e=e+Math.imul(vt,At)|0,e=e+Math.imul(lt,St)|0,l=l+Math.imul(lt,At)|0,u=u+Math.imul(ut,xt)|0,e=e+Math.imul(ut,Pt)|0,e=e+Math.imul(pt,xt)|0,l=l+Math.imul(pt,Pt)|0,u=u+Math.imul(_t,Dt)|0,e=e+Math.imul(_t,Ot)|0,e=e+Math.imul(Mt,Dt)|0,l=l+Math.imul(Mt,Ot)|0,u=u+Math.imul(gt,Rt)|0,e=e+Math.imul(gt,It)|0,e=e+Math.imul(mt,Rt)|0,l=l+Math.imul(mt,It)|0,u=u+Math.imul(rt,Ct)|0,e=e+Math.imul(rt,Tt)|0,e=e+Math.imul(st,Ct)|0,l=l+Math.imul(st,Tt)|0,u=u+Math.imul(K,Ft)|0,e=e+Math.imul(K,$t)|0,e=e+Math.imul(C,Ft)|0,l=l+Math.imul(C,$t)|0;var Ye=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,u=Math.imul(ct,Lt),e=Math.imul(ct,Et),e=e+Math.imul(bt,Lt)|0,l=Math.imul(bt,Et),u=u+Math.imul(ht,St)|0,e=e+Math.imul(ht,At)|0,e=e+Math.imul(dt,St)|0,l=l+Math.imul(dt,At)|0,u=u+Math.imul(vt,xt)|0,e=e+Math.imul(vt,Pt)|0,e=e+Math.imul(lt,xt)|0,l=l+Math.imul(lt,Pt)|0,u=u+Math.imul(ut,Dt)|0,e=e+Math.imul(ut,Ot)|0,e=e+Math.imul(pt,Dt)|0,l=l+Math.imul(pt,Ot)|0,u=u+Math.imul(_t,Rt)|0,e=e+Math.imul(_t,It)|0,e=e+Math.imul(Mt,Rt)|0,l=l+Math.imul(Mt,It)|0,u=u+Math.imul(gt,Ct)|0,e=e+Math.imul(gt,Tt)|0,e=e+Math.imul(mt,Ct)|0,l=l+Math.imul(mt,Tt)|0,u=u+Math.imul(rt,Ft)|0,e=e+Math.imul(rt,$t)|0,e=e+Math.imul(st,Ft)|0,l=l+Math.imul(st,$t)|0;var qe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(qe>>>26)|0,qe&=67108863,u=Math.imul(ct,St),e=Math.imul(ct,At),e=e+Math.imul(bt,St)|0,l=Math.imul(bt,At),u=u+Math.imul(ht,xt)|0,e=e+Math.imul(ht,Pt)|0,e=e+Math.imul(dt,xt)|0,l=l+Math.imul(dt,Pt)|0,u=u+Math.imul(vt,Dt)|0,e=e+Math.imul(vt,Ot)|0,e=e+Math.imul(lt,Dt)|0,l=l+Math.imul(lt,Ot)|0,u=u+Math.imul(ut,Rt)|0,e=e+Math.imul(ut,It)|0,e=e+Math.imul(pt,Rt)|0,l=l+Math.imul(pt,It)|0,u=u+Math.imul(_t,Ct)|0,e=e+Math.imul(_t,Tt)|0,e=e+Math.imul(Mt,Ct)|0,l=l+Math.imul(Mt,Tt)|0,u=u+Math.imul(gt,Ft)|0,e=e+Math.imul(gt,$t)|0,e=e+Math.imul(mt,Ft)|0,l=l+Math.imul(mt,$t)|0;var $e=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+($e>>>26)|0,$e&=67108863,u=Math.imul(ct,xt),e=Math.imul(ct,Pt),e=e+Math.imul(bt,xt)|0,l=Math.imul(bt,Pt),u=u+Math.imul(ht,Dt)|0,e=e+Math.imul(ht,Ot)|0,e=e+Math.imul(dt,Dt)|0,l=l+Math.imul(dt,Ot)|0,u=u+Math.imul(vt,Rt)|0,e=e+Math.imul(vt,It)|0,e=e+Math.imul(lt,Rt)|0,l=l+Math.imul(lt,It)|0,u=u+Math.imul(ut,Ct)|0,e=e+Math.imul(ut,Tt)|0,e=e+Math.imul(pt,Ct)|0,l=l+Math.imul(pt,Tt)|0,u=u+Math.imul(_t,Ft)|0,e=e+Math.imul(_t,$t)|0,e=e+Math.imul(Mt,Ft)|0,l=l+Math.imul(Mt,$t)|0;var ze=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(ze>>>26)|0,ze&=67108863,u=Math.imul(ct,Dt),e=Math.imul(ct,Ot),e=e+Math.imul(bt,Dt)|0,l=Math.imul(bt,Ot),u=u+Math.imul(ht,Rt)|0,e=e+Math.imul(ht,It)|0,e=e+Math.imul(dt,Rt)|0,l=l+Math.imul(dt,It)|0,u=u+Math.imul(vt,Ct)|0,e=e+Math.imul(vt,Tt)|0,e=e+Math.imul(lt,Ct)|0,l=l+Math.imul(lt,Tt)|0,u=u+Math.imul(ut,Ft)|0,e=e+Math.imul(ut,$t)|0,e=e+Math.imul(pt,Ft)|0,l=l+Math.imul(pt,$t)|0;var De=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(De>>>26)|0,De&=67108863,u=Math.imul(ct,Rt),e=Math.imul(ct,It),e=e+Math.imul(bt,Rt)|0,l=Math.imul(bt,It),u=u+Math.imul(ht,Ct)|0,e=e+Math.imul(ht,Tt)|0,e=e+Math.imul(dt,Ct)|0,l=l+Math.imul(dt,Tt)|0,u=u+Math.imul(vt,Ft)|0,e=e+Math.imul(vt,$t)|0,e=e+Math.imul(lt,Ft)|0,l=l+Math.imul(lt,$t)|0;var Xe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,u=Math.imul(ct,Ct),e=Math.imul(ct,Tt),e=e+Math.imul(bt,Ct)|0,l=Math.imul(bt,Tt),u=u+Math.imul(ht,Ft)|0,e=e+Math.imul(ht,$t)|0,e=e+Math.imul(dt,Ft)|0,l=l+Math.imul(dt,$t)|0;var Qe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,u=Math.imul(ct,Ft),e=Math.imul(ct,$t),e=e+Math.imul(bt,Ft)|0,l=Math.imul(bt,$t);var tr=(y+u|0)+((e&8191)<<13)|0;return y=(l+(e>>>13)|0)+(tr>>>26)|0,tr&=67108863,m[0]=Se,m[1]=He,m[2]=Ke,m[3]=Ve,m[4]=Ge,m[5]=We,m[6]=Oe,m[7]=Be,m[8]=Ze,m[9]=Ne,m[10]=Je,m[11]=Ye,m[12]=qe,m[13]=$e,m[14]=ze,m[15]=De,m[16]=Xe,m[17]=Qe,m[18]=tr,y!==0&&(m[19]=y,n.length++),n};Math.imul||(O=I);function N(v,t,r){r.negative=t.negative^v.negative,r.length=v.length+t.length;for(var n=0,o=0,d=0;d<r.length-1;d++){var m=o;o=0;for(var y=n&67108863,u=Math.min(d,t.length-1),e=Math.max(0,d-v.length+1);e<=u;e++){var l=d-e,z=v.words[l]|0,$=t.words[e]|0,H=z*$,W=H&67108863;m=m+(H/67108864|0)|0,W=W+y|0,y=W&67108863,m=m+(W>>>26)|0,o+=m>>>26,m&=67108863}r.words[d]=y,n=m,m=o}return n!==0?r.words[d]=n:r.length--,r.strip()}function L(v,t,r){var n=new R;return n.mulp(v,t,r)}s.prototype.mulTo=function(t,r){var n,o=this.length+t.length;return this.length===10&&t.length===10?n=O(this,t,r):o<63?n=I(this,t,r):o<1024?n=N(this,t,r):n=L(this,t,r),n};function R(v,t){this.x=v,this.y=t}R.prototype.makeRBT=function(t){for(var r=new Array(t),n=s.prototype._countBits(t)-1,o=0;o<t;o++)r[o]=this.revBin(o,n,t);return r},R.prototype.revBin=function(t,r,n){if(t===0||t===n-1)return t;for(var o=0,d=0;d<r;d++)o|=(t&1)<<r-d-1,t>>=1;return o},R.prototype.permute=function(t,r,n,o,d,m){for(var y=0;y<m;y++)o[y]=r[t[y]],d[y]=n[t[y]]},R.prototype.transform=function(t,r,n,o,d,m){this.permute(m,t,r,n,o,d);for(var y=1;y<d;y<<=1)for(var u=y<<1,e=Math.cos(2*Math.PI/u),l=Math.sin(2*Math.PI/u),z=0;z<d;z+=u)for(var $=e,H=l,W=0;W<y;W++){var tt=n[z+W],Z=o[z+W],et=n[z+W+y],K=o[z+W+y],C=$*et-H*K;K=$*K+H*et,et=C,n[z+W]=tt+et,o[z+W]=Z+K,n[z+W+y]=tt-et,o[z+W+y]=Z-K,W!==u&&(C=e*$-l*H,H=e*H+l*$,$=C)}},R.prototype.guessLen13b=function(t,r){var n=Math.max(r,t)|1,o=n&1,d=0;for(n=n/2|0;n;n=n>>>1)d++;return 1<<d+1+o},R.prototype.conjugate=function(t,r,n){if(!(n<=1))for(var o=0;o<n/2;o++){var d=t[o];t[o]=t[n-o-1],t[n-o-1]=d,d=r[o],r[o]=-r[n-o-1],r[n-o-1]=-d}},R.prototype.normalize13b=function(t,r){for(var n=0,o=0;o<r/2;o++){var d=Math.round(t[2*o+1]/r)*8192+Math.round(t[2*o]/r)+n;t[o]=d&67108863,d<67108864?n=0:n=d/67108864|0}return t},R.prototype.convert13b=function(t,r,n,o){for(var d=0,m=0;m<r;m++)d=d+(t[m]|0),n[2*m]=d&8191,d=d>>>13,n[2*m+1]=d&8191,d=d>>>13;for(m=2*r;m<o;++m)n[m]=0;h(d===0),h((d&-8192)===0)},R.prototype.stub=function(t){for(var r=new Array(t),n=0;n<t;n++)r[n]=0;return r},R.prototype.mulp=function(t,r,n){var o=2*this.guessLen13b(t.length,r.length),d=this.makeRBT(o),m=this.stub(o),y=new Array(o),u=new Array(o),e=new Array(o),l=new Array(o),z=new Array(o),$=new Array(o),H=n.words;H.length=o,this.convert13b(t.words,t.length,y,o),this.convert13b(r.words,r.length,l,o),this.transform(y,m,u,e,o,d),this.transform(l,m,z,$,o,d);for(var W=0;W<o;W++){var tt=u[W]*z[W]-e[W]*$[W];e[W]=u[W]*$[W]+e[W]*z[W],u[W]=tt}return this.conjugate(u,e,o),this.transform(u,e,H,m,o,d),this.conjugate(H,m,o),this.normalize13b(H,o),n.negative=t.negative^r.negative,n.length=t.length+r.length,n.strip()},s.prototype.mul=function(t){var r=new s(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},s.prototype.mulf=function(t){var r=new s(null);return r.words=new Array(this.length+t.length),L(this,t,r)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){h(typeof t=="number"),h(t<67108864);for(var r=0,n=0;n<this.length;n++){var o=(this.words[n]|0)*t,d=(o&67108863)+(r&67108863);r>>=26,r+=o/67108864|0,r+=d>>>26,this.words[n]=d&67108863}return r!==0&&(this.words[n]=r,this.length++),this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var r=D(t);if(r.length===0)return new s(1);for(var n=this,o=0;o<r.length&&r[o]===0;o++,n=n.sqr());if(++o<r.length)for(var d=n.sqr();o<r.length;o++,d=d.sqr())r[o]!==0&&(n=n.mul(d));return n},s.prototype.iushln=function(t){h(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r,d;if(r!==0){var m=0;for(d=0;d<this.length;d++){var y=this.words[d]&o,u=(this.words[d]|0)-y<<r;this.words[d]=u|m,m=y>>>26-r}m&&(this.words[d]=m,this.length++)}if(n!==0){for(d=this.length-1;d>=0;d--)this.words[d+n]=this.words[d];for(d=0;d<n;d++)this.words[d]=0;this.length+=n}return this.strip()},s.prototype.ishln=function(t){return h(this.negative===0),this.iushln(t)},s.prototype.iushrn=function(t,r,n){h(typeof t=="number"&&t>=0);var o;r?o=(r-r%26)/26:o=0;var d=t%26,m=Math.min((t-d)/26,this.length),y=67108863^67108863>>>d<<d,u=n;if(o-=m,o=Math.max(0,o),u){for(var e=0;e<m;e++)u.words[e]=this.words[e];u.length=m}if(m!==0)if(this.length>m)for(this.length-=m,e=0;e<this.length;e++)this.words[e]=this.words[e+m];else this.words[0]=0,this.length=1;var l=0;for(e=this.length-1;e>=0&&(l!==0||e>=o);e--){var z=this.words[e]|0;this.words[e]=l<<26-d|z>>>d,l=z&y}return u&&l!==0&&(u.words[u.length++]=l),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(t,r,n){return h(this.negative===0),this.iushrn(t,r,n)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){h(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26,o=1<<r;if(this.length<=n)return!1;var d=this.words[n];return!!(d&o)},s.prototype.imaskn=function(t){h(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26;if(h(this.negative===0,"imaskn works only with positive numbers"),this.length<=n)return this;if(r!==0&&n++,this.length=Math.min(n,this.length),r!==0){var o=67108863^67108863>>>r<<r;this.words[this.length-1]&=o}return this.strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return h(typeof t=="number"),h(t<67108864),t<0?this.isubn(-t):this.negative!==0?this.length===1&&(this.words[0]|0)<t?(this.words[0]=t-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},s.prototype.isubn=function(t){if(h(typeof t=="number"),h(t<67108864),t<0)return this.iaddn(-t);if(this.negative!==0)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,r,n){var o=t.length+n,d;this._expand(o);var m,y=0;for(d=0;d<t.length;d++){m=(this.words[d+n]|0)+y;var u=(t.words[d]|0)*r;m-=u&67108863,y=(m>>26)-(u/67108864|0),this.words[d+n]=m&67108863}for(;d<this.length-n;d++)m=(this.words[d+n]|0)+y,y=m>>26,this.words[d+n]=m&67108863;if(y===0)return this.strip();for(h(y===-1),y=0,d=0;d<this.length;d++)m=-(this.words[d]|0)+y,y=m>>26,this.words[d]=m&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(t,r){var n=this.length-t.length,o=this.clone(),d=t,m=d.words[d.length-1]|0,y=this._countBits(m);n=26-y,n!==0&&(d=d.ushln(n),o.iushln(n),m=d.words[d.length-1]|0);var u=o.length-d.length,e;if(r!=="mod"){e=new s(null),e.length=u+1,e.words=new Array(e.length);for(var l=0;l<e.length;l++)e.words[l]=0}var z=o.clone()._ishlnsubmul(d,1,u);z.negative===0&&(o=z,e&&(e.words[u]=1));for(var $=u-1;$>=0;$--){var H=(o.words[d.length+$]|0)*67108864+(o.words[d.length+$-1]|0);for(H=Math.min(H/m|0,67108863),o._ishlnsubmul(d,H,$);o.negative!==0;)H--,o.negative=0,o._ishlnsubmul(d,1,$),o.isZero()||(o.negative^=1);e&&(e.words[$]=H)}return e&&e.strip(),o.strip(),r!=="div"&&n!==0&&o.iushrn(n),{div:e||null,mod:o}},s.prototype.divmod=function(t,r,n){if(h(!t.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var o,d,m;return this.negative!==0&&t.negative===0?(m=this.neg().divmod(t,r),r!=="mod"&&(o=m.div.neg()),r!=="div"&&(d=m.mod.neg(),n&&d.negative!==0&&d.iadd(t)),{div:o,mod:d}):this.negative===0&&t.negative!==0?(m=this.divmod(t.neg(),r),r!=="mod"&&(o=m.div.neg()),{div:o,mod:m.mod}):this.negative&t.negative?(m=this.neg().divmod(t.neg(),r),r!=="div"&&(d=m.mod.neg(),n&&d.negative!==0&&d.isub(t)),{div:m.div,mod:d}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:t.length===1?r==="div"?{div:this.divn(t.words[0]),mod:null}:r==="mod"?{div:null,mod:new s(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modn(t.words[0]))}:this._wordDiv(t,r)},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=r.div.negative!==0?r.mod.isub(t):r.mod,o=t.ushrn(1),d=t.andln(1),m=n.cmp(o);return m<0||d===1&&m===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},s.prototype.modn=function(t){h(t<=67108863);for(var r=(1<<26)%t,n=0,o=this.length-1;o>=0;o--)n=(r*n+(this.words[o]|0))%t;return n},s.prototype.idivn=function(t){h(t<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var o=(this.words[n]|0)+r*67108864;this.words[n]=o/t|0,r=o%t}return this.strip()},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){h(t.negative===0),h(!t.isZero());var r=this,n=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var o=new s(1),d=new s(0),m=new s(0),y=new s(1),u=0;r.isEven()&&n.isEven();)r.iushrn(1),n.iushrn(1),++u;for(var e=n.clone(),l=r.clone();!r.isZero();){for(var z=0,$=1;!(r.words[0]&$)&&z<26;++z,$<<=1);if(z>0)for(r.iushrn(z);z-- >0;)(o.isOdd()||d.isOdd())&&(o.iadd(e),d.isub(l)),o.iushrn(1),d.iushrn(1);for(var H=0,W=1;!(n.words[0]&W)&&H<26;++H,W<<=1);if(H>0)for(n.iushrn(H);H-- >0;)(m.isOdd()||y.isOdd())&&(m.iadd(e),y.isub(l)),m.iushrn(1),y.iushrn(1);r.cmp(n)>=0?(r.isub(n),o.isub(m),d.isub(y)):(n.isub(r),m.isub(o),y.isub(d))}return{a:m,b:y,gcd:n.iushln(u)}},s.prototype._invmp=function(t){h(t.negative===0),h(!t.isZero());var r=this,n=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var o=new s(1),d=new s(0),m=n.clone();r.cmpn(1)>0&&n.cmpn(1)>0;){for(var y=0,u=1;!(r.words[0]&u)&&y<26;++y,u<<=1);if(y>0)for(r.iushrn(y);y-- >0;)o.isOdd()&&o.iadd(m),o.iushrn(1);for(var e=0,l=1;!(n.words[0]&l)&&e<26;++e,l<<=1);if(e>0)for(n.iushrn(e);e-- >0;)d.isOdd()&&d.iadd(m),d.iushrn(1);r.cmp(n)>=0?(r.isub(n),o.isub(d)):(n.isub(r),d.isub(o))}var z;return r.cmpn(1)===0?z=o:z=d,z.cmpn(0)<0&&z.iadd(t),z},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),n=t.clone();r.negative=0,n.negative=0;for(var o=0;r.isEven()&&n.isEven();o++)r.iushrn(1),n.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;n.isEven();)n.iushrn(1);var d=r.cmp(n);if(d<0){var m=r;r=n,n=m}else if(d===0||n.cmpn(1)===0)break;r.isub(n)}while(!0);return n.iushln(o)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){h(typeof t=="number");var r=t%26,n=(t-r)/26,o=1<<r;if(this.length<=n)return this._expand(n+1),this.words[n]|=o,this;for(var d=o,m=n;d!==0&&m<this.length;m++){var y=this.words[m]|0;y+=d,d=y>>>26,y&=67108863,this.words[m]=y}return d!==0&&(this.words[m]=d,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(t){var r=t<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var n;if(this.length>1)n=1;else{r&&(t=-t),h(t<=67108863,"Number is too big");var o=this.words[0]|0;n=o===t?0:o<t?-1:1}return this.negative!==0?-n|0:n},s.prototype.cmp=function(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);return this.negative!==0?-r|0:r},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,n=this.length-1;n>=0;n--){var o=this.words[n]|0,d=t.words[n]|0;if(o!==d){o<d?r=-1:o>d&&(r=1);break}}return r},s.prototype.gtn=function(t){return this.cmpn(t)===1},s.prototype.gt=function(t){return this.cmp(t)===1},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return this.cmpn(t)===-1},s.prototype.lt=function(t){return this.cmp(t)===-1},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return this.cmpn(t)===0},s.prototype.eq=function(t){return this.cmp(t)===0},s.red=function(t){return new G(t)},s.prototype.toRed=function(t){return h(!this.red,"Already a number in reduction context"),h(this.negative===0,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return h(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return h(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return h(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return h(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return h(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return h(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return h(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return h(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return h(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return h(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return h(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return h(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return h(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return h(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return h(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var B={k256:null,p224:null,p192:null,p25519:null};function T(v,t){this.name=v,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}T.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},T.prototype.ireduce=function(t){var r=t,n;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),n=r.bitLength();while(n>this.n);var o=n<this.n?-1:r.ucmp(this.p);return o===0?(r.words[0]=0,r.length=1):o>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},T.prototype.split=function(t,r){t.iushrn(this.n,0,r)},T.prototype.imulK=function(t){return t.imul(this.k)};function U(){T.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}g(U,T),U.prototype.split=function(t,r){for(var n=4194303,o=Math.min(t.length,9),d=0;d<o;d++)r.words[d]=t.words[d];if(r.length=o,t.length<=9){t.words[0]=0,t.length=1;return}var m=t.words[9];for(r.words[r.length++]=m&n,d=10;d<t.length;d++){var y=t.words[d]|0;t.words[d-10]=(y&n)<<4|m>>>22,m=y}m>>>=22,t.words[d-10]=m,m===0&&t.length>10?t.length-=10:t.length-=9},U.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,n=0;n<t.length;n++){var o=t.words[n]|0;r+=o*977,t.words[n]=r&67108863,r=o*64+(r/67108864|0)}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t};function k(){T.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}g(k,T);function P(){T.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}g(P,T);function F(){T.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}g(F,T),F.prototype.imulK=function(t){for(var r=0,n=0;n<t.length;n++){var o=(t.words[n]|0)*19+r,d=o&67108863;o>>>=26,t.words[n]=d,r=o}return r!==0&&(t.words[t.length++]=r),t},s._prime=function(t){if(B[t])return B[t];var r;if(t==="k256")r=new U;else if(t==="p224")r=new k;else if(t==="p192")r=new P;else if(t==="p25519")r=new F;else throw new Error("Unknown prime "+t);return B[t]=r,r};function G(v){if(typeof v=="string"){var t=s._prime(v);this.m=t.p,this.prime=t}else h(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}G.prototype._verify1=function(t){h(t.negative===0,"red works only with positives"),h(t.red,"red works only with red numbers")},G.prototype._verify2=function(t,r){h((t.negative|r.negative)===0,"red works only with positives"),h(t.red&&t.red===r.red,"red works only with red numbers")},G.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},G.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},G.prototype.add=function(t,r){this._verify2(t,r);var n=t.add(r);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},G.prototype.iadd=function(t,r){this._verify2(t,r);var n=t.iadd(r);return n.cmp(this.m)>=0&&n.isub(this.m),n},G.prototype.sub=function(t,r){this._verify2(t,r);var n=t.sub(r);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},G.prototype.isub=function(t,r){this._verify2(t,r);var n=t.isub(r);return n.cmpn(0)<0&&n.iadd(this.m),n},G.prototype.shl=function(t,r){return this._verify1(t),this.imod(t.ushln(r))},G.prototype.imul=function(t,r){return this._verify2(t,r),this.imod(t.imul(r))},G.prototype.mul=function(t,r){return this._verify2(t,r),this.imod(t.mul(r))},G.prototype.isqr=function(t){return this.imul(t,t.clone())},G.prototype.sqr=function(t){return this.mul(t,t)},G.prototype.sqrt=function(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(h(r%2===1),r===3){var n=this.m.add(new s(1)).iushrn(2);return this.pow(t,n)}for(var o=this.m.subn(1),d=0;!o.isZero()&&o.andln(1)===0;)d++,o.iushrn(1);h(!o.isZero());var m=new s(1).toRed(this),y=m.redNeg(),u=this.m.subn(1).iushrn(1),e=this.m.bitLength();for(e=new s(2*e*e).toRed(this);this.pow(e,u).cmp(y)!==0;)e.redIAdd(y);for(var l=this.pow(e,o),z=this.pow(t,o.addn(1).iushrn(1)),$=this.pow(t,o),H=d;$.cmp(m)!==0;){for(var W=$,tt=0;W.cmp(m)!==0;tt++)W=W.redSqr();h(tt<H);var Z=this.pow(l,new s(1).iushln(H-tt-1));z=z.redMul(Z),l=Z.redSqr(),$=$.redMul(l),H=tt}return z},G.prototype.invm=function(t){var r=t._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},G.prototype.pow=function(t,r){if(r.isZero())return new s(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var n=4,o=new Array(1<<n);o[0]=new s(1).toRed(this),o[1]=t;for(var d=2;d<o.length;d++)o[d]=this.mul(o[d-1],t);var m=o[0],y=0,u=0,e=r.bitLength()%26;for(e===0&&(e=26),d=r.length-1;d>=0;d--){for(var l=r.words[d],z=e-1;z>=0;z--){var $=l>>z&1;if(m!==o[0]&&(m=this.sqr(m)),$===0&&y===0){u=0;continue}y<<=1,y|=$,u++,!(u!==n&&(d!==0||z!==0))&&(m=this.mul(m,o[y]),u=0,y=0)}e=26}return m},G.prototype.convertTo=function(t){var r=t.umod(this.m);return r===t?r.clone():r},G.prototype.convertFrom=function(t){var r=t.clone();return r.red=null,r},s.mont=function(t){return new nt(t)};function nt(v){G.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g(nt,G),nt.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},nt.prototype.convertFrom=function(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},nt.prototype.imul=function(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(r),o=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=n.isub(o).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.mul=function(t,r){if(t.isZero()||r.isZero())return new s(0)._forceRed(this);var n=t.mul(r),o=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=n.isub(o).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.invm=function(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(c,Ee)}(mo)),mo.exports}var _0,Yp;function T_(){if(Yp)return _0;Yp=1;var c=qu(),i=C_();_0=function(x){return new h(x)};var a={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};a.p224=a.secp224r1,a.p256=a.secp256r1=a.prime256v1,a.p192=a.secp192r1=a.prime192v1,a.p384=a.secp384r1,a.p521=a.secp521r1;function h(s){this.curveType=a[s],this.curveType||(this.curveType={name:s}),this.curve=new c.ec(this.curveType.name),this.keys=void 0}h.prototype.generateKeys=function(s,x){return this.keys=this.curve.genKeyPair(),this.getPublicKey(s,x)},h.prototype.computeSecret=function(s,x,w){x=x||"utf8",ke.isBuffer(s)||(s=new ke(s,x));var _=this.curve.keyFromPublic(s).getPublic(),M=_.mul(this.keys.getPrivate()).getX();return g(M,w,this.curveType.byteLength)},h.prototype.getPublicKey=function(s,x){var w=this.keys.getPublic(x==="compressed",!0);return x==="hybrid"&&(w[w.length-1]%2?w[0]=7:w[0]=6),g(w,s)},h.prototype.getPrivateKey=function(s){return g(this.keys.getPrivate(),s)},h.prototype.setPublicKey=function(s,x){return x=x||"utf8",ke.isBuffer(s)||(s=new ke(s,x)),this.keys._importPublic(s),this},h.prototype.setPrivateKey=function(s,x){x=x||"utf8",ke.isBuffer(s)||(s=new ke(s,x));var w=new i(s);return w=w.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(w),this};function g(s,x,w){Array.isArray(s)||(s=s.toArray());var _=new ke(s);if(w&&_.length<w){var M=new ke(w-_.length);M.fill(0),_=ke.concat([M,_])}return x?_.toString(x):_}return _0}var M0={},x0,Xp;function Sg(){if(Xp)return x0;Xp=1;var c=Ks(),i=Te.Buffer;x0=function(h,g){for(var s=i.alloc(0),x=0,w;s.length<g;)w=a(x++),s=i.concat([s,c("sha1").update(h).update(w).digest()]);return s.slice(0,g)};function a(h){var g=i.allocUnsafe(4);return g.writeUInt32BE(h,0),g}return x0}var E0,Qp;function Ag(){return Qp||(Qp=1,E0=function(i,a){for(var h=i.length,g=-1;++g<h;)i[g]^=a[g];return i}),E0}var bo={exports:{}};bo.exports;var t1;function $u(){return t1||(t1=1,function(c){(function(i,a){function h(v,t){if(!v)throw new Error(t||"Assertion failed")}function g(v,t){v.super_=t;var r=function(){};r.prototype=t.prototype,v.prototype=new r,v.prototype.constructor=v}function s(v,t,r){if(s.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((t==="le"||t==="be")&&(r=t,t=10),this._init(v||0,t||10,r||"be"))}typeof i=="object"?i.exports=s:a.BN=s,s.BN=s,s.wordSize=26;var x;try{typeof window<"u"&&typeof window.Buffer<"u"?x=window.Buffer:x=ns.Buffer}catch{}s.isBN=function(t){return t instanceof s?!0:t!==null&&typeof t=="object"&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,r){return t.cmp(r)>0?t:r},s.min=function(t,r){return t.cmp(r)<0?t:r},s.prototype._init=function(t,r,n){if(typeof t=="number")return this._initNumber(t,r,n);if(typeof t=="object")return this._initArray(t,r,n);r==="hex"&&(r=16),h(r===(r|0)&&r>=2&&r<=36),t=t.toString().replace(/\s+/g,"");var o=0;t[0]==="-"&&(o++,this.negative=1),o<t.length&&(r===16?this._parseHex(t,o,n):(this._parseBase(t,r,o),n==="le"&&this._initArray(this.toArray(),r,n)))},s.prototype._initNumber=function(t,r,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(h(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3),n==="le"&&this._initArray(this.toArray(),r,n)},s.prototype._initArray=function(t,r,n){if(h(typeof t.length=="number"),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d,m,y=0;if(n==="be")for(o=t.length-1,d=0;o>=0;o-=3)m=t[o]|t[o-1]<<8|t[o-2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(n==="le")for(o=0,d=0;o<t.length;o+=3)m=t[o]|t[o+1]<<8|t[o+2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this.strip()};function w(v,t){var r=v.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function _(v,t,r){var n=w(v,r);return r-1>=t&&(n|=w(v,r-1)<<4),n}s.prototype._parseHex=function(t,r,n){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var d=0,m=0,y;if(n==="be")for(o=t.length-1;o>=r;o-=2)y=_(t,r,o)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8;else{var u=t.length-r;for(o=u%2===0?r+1:r;o<t.length;o+=2)y=_(t,r,o)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8}this.strip()};function M(v,t,r,n){for(var o=0,d=Math.min(v.length,r),m=t;m<d;m++){var y=v.charCodeAt(m)-48;o*=n,y>=49?o+=y-49+10:y>=17?o+=y-17+10:o+=y}return o}s.prototype._parseBase=function(t,r,n){this.words=[0],this.length=1;for(var o=0,d=1;d<=67108863;d*=r)o++;o--,d=d/r|0;for(var m=t.length-n,y=m%o,u=Math.min(m,m-y)+n,e=0,l=n;l<u;l+=o)e=M(t,l,l+o,r),this.imuln(d),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e);if(y!==0){var z=1;for(e=M(t,l,t.length,r),l=0;l<y;l++)z*=r;this.imuln(z),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e)}this.strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(t,r){t=t||10,r=r|0||1;var n;if(t===16||t==="hex"){n="";for(var o=0,d=0,m=0;m<this.length;m++){var y=this.words[m],u=((y<<o|d)&16777215).toString(16);d=y>>>24-o&16777215,d!==0||m!==this.length-1?n=b[6-u.length]+u+n:n=u+n,o+=2,o>=26&&(o-=26,m--)}for(d!==0&&(n=d.toString(16)+n);n.length%r!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}if(t===(t|0)&&t>=2&&t<=36){var e=S[t],l=E[t];n="";var z=this.clone();for(z.negative=0;!z.isZero();){var $=z.modn(l).toString(t);z=z.idivn(l),z.isZero()?n=$+n:n=b[e-$.length]+$+n}for(this.isZero()&&(n="0"+n);n.length%r!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}h(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return this.length===2?t+=this.words[1]*67108864:this.length===3&&this.words[2]===1?t+=4503599627370496+this.words[1]*67108864:this.length>2&&h(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-t:t},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(t,r){return h(typeof x<"u"),this.toArrayLike(x,t,r)},s.prototype.toArray=function(t,r){return this.toArrayLike(Array,t,r)},s.prototype.toArrayLike=function(t,r,n){var o=this.byteLength(),d=n||Math.max(1,o);h(o<=d,"byte array longer than desired length"),h(d>0,"Requested array length <= 0"),this.strip();var m=r==="le",y=new t(d),u,e,l=this.clone();if(m){for(e=0;!l.isZero();e++)u=l.andln(255),l.iushrn(8),y[e]=u;for(;e<d;e++)y[e]=0}else{for(e=0;e<d-o;e++)y[e]=0;for(e=0;!l.isZero();e++)u=l.andln(255),l.iushrn(8),y[d-e-1]=u}return y},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var r=t,n=0;return r>=4096&&(n+=13,r>>>=13),r>=64&&(n+=7,r>>>=7),r>=8&&(n+=4,r>>>=4),r>=2&&(n+=2,r>>>=2),n+r},s.prototype._zeroBits=function(t){if(t===0)return 26;var r=t,n=0;return r&8191||(n+=13,r>>>=13),r&127||(n+=7,r>>>=7),r&15||(n+=4,r>>>=4),r&3||(n+=2,r>>>=2),r&1||n++,n},s.prototype.bitLength=function(){var t=this.words[this.length-1],r=this._countBits(t);return(this.length-1)*26+r};function D(v){for(var t=new Array(v.bitLength()),r=0;r<t.length;r++){var n=r/26|0,o=r%26;t[r]=(v.words[n]&1<<o)>>>o}return t}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);if(t+=n,n!==26)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return this.negative!==0?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},s.prototype.ior=function(t){return h((this.negative|t.negative)===0),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var r;this.length>t.length?r=t:r=this;for(var n=0;n<r.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=r.length,this.strip()},s.prototype.iand=function(t){return h((this.negative|t.negative)===0),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var r,n;this.length>t.length?(r=this,n=t):(r=t,n=this);for(var o=0;o<n.length;o++)this.words[o]=r.words[o]^n.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},s.prototype.ixor=function(t){return h((this.negative|t.negative)===0),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){h(typeof t=="number"&&t>=0);var r=Math.ceil(t/26)|0,n=t%26;this._expand(r),n>0&&r--;for(var o=0;o<r;o++)this.words[o]=~this.words[o]&67108863;return n>0&&(this.words[o]=~this.words[o]&67108863>>26-n),this.strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,r){h(typeof t=="number"&&t>=0);var n=t/26|0,o=t%26;return this._expand(n+1),r?this.words[n]=this.words[n]|1<<o:this.words[n]=this.words[n]&~(1<<o),this.strip()},s.prototype.iadd=function(t){var r;if(this.negative!==0&&t.negative===0)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(this.negative===0&&t.negative!==0)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();var n,o;this.length>t.length?(n=this,o=t):(n=t,o=this);for(var d=0,m=0;m<o.length;m++)r=(n.words[m]|0)+(o.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;for(;d!==0&&m<n.length;m++)r=(n.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;if(this.length=n.length,d!==0)this.words[this.length]=d,this.length++;else if(n!==this)for(;m<n.length;m++)this.words[m]=n.words[m];return this},s.prototype.add=function(t){var r;return t.negative!==0&&this.negative===0?(t.negative=0,r=this.sub(t),t.negative^=1,r):t.negative===0&&this.negative!==0?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n=this.cmp(t);if(n===0)return this.negative=0,this.length=1,this.words[0]=0,this;var o,d;n>0?(o=this,d=t):(o=t,d=this);for(var m=0,y=0;y<d.length;y++)r=(o.words[y]|0)-(d.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;for(;m!==0&&y<o.length;y++)r=(o.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;if(m===0&&y<o.length&&o!==this)for(;y<o.length;y++)this.words[y]=o.words[y];return this.length=Math.max(this.length,y),o!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(t){return this.clone().isub(t)};function I(v,t,r){r.negative=t.negative^v.negative;var n=v.length+t.length|0;r.length=n,n=n-1|0;var o=v.words[0]|0,d=t.words[0]|0,m=o*d,y=m&67108863,u=m/67108864|0;r.words[0]=y;for(var e=1;e<n;e++){for(var l=u>>>26,z=u&67108863,$=Math.min(e,t.length-1),H=Math.max(0,e-v.length+1);H<=$;H++){var W=e-H|0;o=v.words[W]|0,d=t.words[H]|0,m=o*d+z,l+=m/67108864|0,z=m&67108863}r.words[e]=z|0,u=l|0}return u!==0?r.words[e]=u|0:r.length--,r.strip()}var O=function(t,r,n){var o=t.words,d=r.words,m=n.words,y=0,u,e,l,z=o[0]|0,$=z&8191,H=z>>>13,W=o[1]|0,tt=W&8191,Z=W>>>13,et=o[2]|0,K=et&8191,C=et>>>13,Q=o[3]|0,rt=Q&8191,st=Q>>>13,Yt=o[4]|0,gt=Yt&8191,mt=Yt>>>13,ee=o[5]|0,_t=ee&8191,Mt=ee>>>13,re=o[6]|0,ut=re&8191,pt=re>>>13,Xt=o[7]|0,vt=Xt&8191,lt=Xt>>>13,Qt=o[8]|0,ht=Qt&8191,dt=Qt>>>13,ie=o[9]|0,ct=ie&8191,bt=ie>>>13,ne=d[0]|0,yt=ne&8191,wt=ne>>>13,se=d[1]|0,Bt=se&8191,Ut=se>>>13,Fe=d[2]|0,Nt=Fe&8191,kt=Fe>>>13,ar=d[3]|0,Lt=ar&8191,Et=ar>>>13,pe=d[4]|0,St=pe&8191,At=pe>>>13,ge=d[5]|0,xt=ge&8191,Pt=ge>>>13,Me=d[6]|0,Dt=Me&8191,Ot=Me>>>13,ye=d[7]|0,Rt=ye&8191,It=ye>>>13,ue=d[8]|0,Ct=ue&8191,Tt=ue>>>13,dr=d[9]|0,Ft=dr&8191,$t=dr>>>13;n.negative=t.negative^r.negative,n.length=19,u=Math.imul($,yt),e=Math.imul($,wt),e=e+Math.imul(H,yt)|0,l=Math.imul(H,wt);var Se=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Se>>>26)|0,Se&=67108863,u=Math.imul(tt,yt),e=Math.imul(tt,wt),e=e+Math.imul(Z,yt)|0,l=Math.imul(Z,wt),u=u+Math.imul($,Bt)|0,e=e+Math.imul($,Ut)|0,e=e+Math.imul(H,Bt)|0,l=l+Math.imul(H,Ut)|0;var He=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(He>>>26)|0,He&=67108863,u=Math.imul(K,yt),e=Math.imul(K,wt),e=e+Math.imul(C,yt)|0,l=Math.imul(C,wt),u=u+Math.imul(tt,Bt)|0,e=e+Math.imul(tt,Ut)|0,e=e+Math.imul(Z,Bt)|0,l=l+Math.imul(Z,Ut)|0,u=u+Math.imul($,Nt)|0,e=e+Math.imul($,kt)|0,e=e+Math.imul(H,Nt)|0,l=l+Math.imul(H,kt)|0;var Ke=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,u=Math.imul(rt,yt),e=Math.imul(rt,wt),e=e+Math.imul(st,yt)|0,l=Math.imul(st,wt),u=u+Math.imul(K,Bt)|0,e=e+Math.imul(K,Ut)|0,e=e+Math.imul(C,Bt)|0,l=l+Math.imul(C,Ut)|0,u=u+Math.imul(tt,Nt)|0,e=e+Math.imul(tt,kt)|0,e=e+Math.imul(Z,Nt)|0,l=l+Math.imul(Z,kt)|0,u=u+Math.imul($,Lt)|0,e=e+Math.imul($,Et)|0,e=e+Math.imul(H,Lt)|0,l=l+Math.imul(H,Et)|0;var Ve=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,u=Math.imul(gt,yt),e=Math.imul(gt,wt),e=e+Math.imul(mt,yt)|0,l=Math.imul(mt,wt),u=u+Math.imul(rt,Bt)|0,e=e+Math.imul(rt,Ut)|0,e=e+Math.imul(st,Bt)|0,l=l+Math.imul(st,Ut)|0,u=u+Math.imul(K,Nt)|0,e=e+Math.imul(K,kt)|0,e=e+Math.imul(C,Nt)|0,l=l+Math.imul(C,kt)|0,u=u+Math.imul(tt,Lt)|0,e=e+Math.imul(tt,Et)|0,e=e+Math.imul(Z,Lt)|0,l=l+Math.imul(Z,Et)|0,u=u+Math.imul($,St)|0,e=e+Math.imul($,At)|0,e=e+Math.imul(H,St)|0,l=l+Math.imul(H,At)|0;var Ge=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,u=Math.imul(_t,yt),e=Math.imul(_t,wt),e=e+Math.imul(Mt,yt)|0,l=Math.imul(Mt,wt),u=u+Math.imul(gt,Bt)|0,e=e+Math.imul(gt,Ut)|0,e=e+Math.imul(mt,Bt)|0,l=l+Math.imul(mt,Ut)|0,u=u+Math.imul(rt,Nt)|0,e=e+Math.imul(rt,kt)|0,e=e+Math.imul(st,Nt)|0,l=l+Math.imul(st,kt)|0,u=u+Math.imul(K,Lt)|0,e=e+Math.imul(K,Et)|0,e=e+Math.imul(C,Lt)|0,l=l+Math.imul(C,Et)|0,u=u+Math.imul(tt,St)|0,e=e+Math.imul(tt,At)|0,e=e+Math.imul(Z,St)|0,l=l+Math.imul(Z,At)|0,u=u+Math.imul($,xt)|0,e=e+Math.imul($,Pt)|0,e=e+Math.imul(H,xt)|0,l=l+Math.imul(H,Pt)|0;var We=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(We>>>26)|0,We&=67108863,u=Math.imul(ut,yt),e=Math.imul(ut,wt),e=e+Math.imul(pt,yt)|0,l=Math.imul(pt,wt),u=u+Math.imul(_t,Bt)|0,e=e+Math.imul(_t,Ut)|0,e=e+Math.imul(Mt,Bt)|0,l=l+Math.imul(Mt,Ut)|0,u=u+Math.imul(gt,Nt)|0,e=e+Math.imul(gt,kt)|0,e=e+Math.imul(mt,Nt)|0,l=l+Math.imul(mt,kt)|0,u=u+Math.imul(rt,Lt)|0,e=e+Math.imul(rt,Et)|0,e=e+Math.imul(st,Lt)|0,l=l+Math.imul(st,Et)|0,u=u+Math.imul(K,St)|0,e=e+Math.imul(K,At)|0,e=e+Math.imul(C,St)|0,l=l+Math.imul(C,At)|0,u=u+Math.imul(tt,xt)|0,e=e+Math.imul(tt,Pt)|0,e=e+Math.imul(Z,xt)|0,l=l+Math.imul(Z,Pt)|0,u=u+Math.imul($,Dt)|0,e=e+Math.imul($,Ot)|0,e=e+Math.imul(H,Dt)|0,l=l+Math.imul(H,Ot)|0;var Oe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,u=Math.imul(vt,yt),e=Math.imul(vt,wt),e=e+Math.imul(lt,yt)|0,l=Math.imul(lt,wt),u=u+Math.imul(ut,Bt)|0,e=e+Math.imul(ut,Ut)|0,e=e+Math.imul(pt,Bt)|0,l=l+Math.imul(pt,Ut)|0,u=u+Math.imul(_t,Nt)|0,e=e+Math.imul(_t,kt)|0,e=e+Math.imul(Mt,Nt)|0,l=l+Math.imul(Mt,kt)|0,u=u+Math.imul(gt,Lt)|0,e=e+Math.imul(gt,Et)|0,e=e+Math.imul(mt,Lt)|0,l=l+Math.imul(mt,Et)|0,u=u+Math.imul(rt,St)|0,e=e+Math.imul(rt,At)|0,e=e+Math.imul(st,St)|0,l=l+Math.imul(st,At)|0,u=u+Math.imul(K,xt)|0,e=e+Math.imul(K,Pt)|0,e=e+Math.imul(C,xt)|0,l=l+Math.imul(C,Pt)|0,u=u+Math.imul(tt,Dt)|0,e=e+Math.imul(tt,Ot)|0,e=e+Math.imul(Z,Dt)|0,l=l+Math.imul(Z,Ot)|0,u=u+Math.imul($,Rt)|0,e=e+Math.imul($,It)|0,e=e+Math.imul(H,Rt)|0,l=l+Math.imul(H,It)|0;var Be=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Be>>>26)|0,Be&=67108863,u=Math.imul(ht,yt),e=Math.imul(ht,wt),e=e+Math.imul(dt,yt)|0,l=Math.imul(dt,wt),u=u+Math.imul(vt,Bt)|0,e=e+Math.imul(vt,Ut)|0,e=e+Math.imul(lt,Bt)|0,l=l+Math.imul(lt,Ut)|0,u=u+Math.imul(ut,Nt)|0,e=e+Math.imul(ut,kt)|0,e=e+Math.imul(pt,Nt)|0,l=l+Math.imul(pt,kt)|0,u=u+Math.imul(_t,Lt)|0,e=e+Math.imul(_t,Et)|0,e=e+Math.imul(Mt,Lt)|0,l=l+Math.imul(Mt,Et)|0,u=u+Math.imul(gt,St)|0,e=e+Math.imul(gt,At)|0,e=e+Math.imul(mt,St)|0,l=l+Math.imul(mt,At)|0,u=u+Math.imul(rt,xt)|0,e=e+Math.imul(rt,Pt)|0,e=e+Math.imul(st,xt)|0,l=l+Math.imul(st,Pt)|0,u=u+Math.imul(K,Dt)|0,e=e+Math.imul(K,Ot)|0,e=e+Math.imul(C,Dt)|0,l=l+Math.imul(C,Ot)|0,u=u+Math.imul(tt,Rt)|0,e=e+Math.imul(tt,It)|0,e=e+Math.imul(Z,Rt)|0,l=l+Math.imul(Z,It)|0,u=u+Math.imul($,Ct)|0,e=e+Math.imul($,Tt)|0,e=e+Math.imul(H,Ct)|0,l=l+Math.imul(H,Tt)|0;var Ze=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,u=Math.imul(ct,yt),e=Math.imul(ct,wt),e=e+Math.imul(bt,yt)|0,l=Math.imul(bt,wt),u=u+Math.imul(ht,Bt)|0,e=e+Math.imul(ht,Ut)|0,e=e+Math.imul(dt,Bt)|0,l=l+Math.imul(dt,Ut)|0,u=u+Math.imul(vt,Nt)|0,e=e+Math.imul(vt,kt)|0,e=e+Math.imul(lt,Nt)|0,l=l+Math.imul(lt,kt)|0,u=u+Math.imul(ut,Lt)|0,e=e+Math.imul(ut,Et)|0,e=e+Math.imul(pt,Lt)|0,l=l+Math.imul(pt,Et)|0,u=u+Math.imul(_t,St)|0,e=e+Math.imul(_t,At)|0,e=e+Math.imul(Mt,St)|0,l=l+Math.imul(Mt,At)|0,u=u+Math.imul(gt,xt)|0,e=e+Math.imul(gt,Pt)|0,e=e+Math.imul(mt,xt)|0,l=l+Math.imul(mt,Pt)|0,u=u+Math.imul(rt,Dt)|0,e=e+Math.imul(rt,Ot)|0,e=e+Math.imul(st,Dt)|0,l=l+Math.imul(st,Ot)|0,u=u+Math.imul(K,Rt)|0,e=e+Math.imul(K,It)|0,e=e+Math.imul(C,Rt)|0,l=l+Math.imul(C,It)|0,u=u+Math.imul(tt,Ct)|0,e=e+Math.imul(tt,Tt)|0,e=e+Math.imul(Z,Ct)|0,l=l+Math.imul(Z,Tt)|0,u=u+Math.imul($,Ft)|0,e=e+Math.imul($,$t)|0,e=e+Math.imul(H,Ft)|0,l=l+Math.imul(H,$t)|0;var Ne=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u=Math.imul(ct,Bt),e=Math.imul(ct,Ut),e=e+Math.imul(bt,Bt)|0,l=Math.imul(bt,Ut),u=u+Math.imul(ht,Nt)|0,e=e+Math.imul(ht,kt)|0,e=e+Math.imul(dt,Nt)|0,l=l+Math.imul(dt,kt)|0,u=u+Math.imul(vt,Lt)|0,e=e+Math.imul(vt,Et)|0,e=e+Math.imul(lt,Lt)|0,l=l+Math.imul(lt,Et)|0,u=u+Math.imul(ut,St)|0,e=e+Math.imul(ut,At)|0,e=e+Math.imul(pt,St)|0,l=l+Math.imul(pt,At)|0,u=u+Math.imul(_t,xt)|0,e=e+Math.imul(_t,Pt)|0,e=e+Math.imul(Mt,xt)|0,l=l+Math.imul(Mt,Pt)|0,u=u+Math.imul(gt,Dt)|0,e=e+Math.imul(gt,Ot)|0,e=e+Math.imul(mt,Dt)|0,l=l+Math.imul(mt,Ot)|0,u=u+Math.imul(rt,Rt)|0,e=e+Math.imul(rt,It)|0,e=e+Math.imul(st,Rt)|0,l=l+Math.imul(st,It)|0,u=u+Math.imul(K,Ct)|0,e=e+Math.imul(K,Tt)|0,e=e+Math.imul(C,Ct)|0,l=l+Math.imul(C,Tt)|0,u=u+Math.imul(tt,Ft)|0,e=e+Math.imul(tt,$t)|0,e=e+Math.imul(Z,Ft)|0,l=l+Math.imul(Z,$t)|0;var Je=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Je>>>26)|0,Je&=67108863,u=Math.imul(ct,Nt),e=Math.imul(ct,kt),e=e+Math.imul(bt,Nt)|0,l=Math.imul(bt,kt),u=u+Math.imul(ht,Lt)|0,e=e+Math.imul(ht,Et)|0,e=e+Math.imul(dt,Lt)|0,l=l+Math.imul(dt,Et)|0,u=u+Math.imul(vt,St)|0,e=e+Math.imul(vt,At)|0,e=e+Math.imul(lt,St)|0,l=l+Math.imul(lt,At)|0,u=u+Math.imul(ut,xt)|0,e=e+Math.imul(ut,Pt)|0,e=e+Math.imul(pt,xt)|0,l=l+Math.imul(pt,Pt)|0,u=u+Math.imul(_t,Dt)|0,e=e+Math.imul(_t,Ot)|0,e=e+Math.imul(Mt,Dt)|0,l=l+Math.imul(Mt,Ot)|0,u=u+Math.imul(gt,Rt)|0,e=e+Math.imul(gt,It)|0,e=e+Math.imul(mt,Rt)|0,l=l+Math.imul(mt,It)|0,u=u+Math.imul(rt,Ct)|0,e=e+Math.imul(rt,Tt)|0,e=e+Math.imul(st,Ct)|0,l=l+Math.imul(st,Tt)|0,u=u+Math.imul(K,Ft)|0,e=e+Math.imul(K,$t)|0,e=e+Math.imul(C,Ft)|0,l=l+Math.imul(C,$t)|0;var Ye=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,u=Math.imul(ct,Lt),e=Math.imul(ct,Et),e=e+Math.imul(bt,Lt)|0,l=Math.imul(bt,Et),u=u+Math.imul(ht,St)|0,e=e+Math.imul(ht,At)|0,e=e+Math.imul(dt,St)|0,l=l+Math.imul(dt,At)|0,u=u+Math.imul(vt,xt)|0,e=e+Math.imul(vt,Pt)|0,e=e+Math.imul(lt,xt)|0,l=l+Math.imul(lt,Pt)|0,u=u+Math.imul(ut,Dt)|0,e=e+Math.imul(ut,Ot)|0,e=e+Math.imul(pt,Dt)|0,l=l+Math.imul(pt,Ot)|0,u=u+Math.imul(_t,Rt)|0,e=e+Math.imul(_t,It)|0,e=e+Math.imul(Mt,Rt)|0,l=l+Math.imul(Mt,It)|0,u=u+Math.imul(gt,Ct)|0,e=e+Math.imul(gt,Tt)|0,e=e+Math.imul(mt,Ct)|0,l=l+Math.imul(mt,Tt)|0,u=u+Math.imul(rt,Ft)|0,e=e+Math.imul(rt,$t)|0,e=e+Math.imul(st,Ft)|0,l=l+Math.imul(st,$t)|0;var qe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(qe>>>26)|0,qe&=67108863,u=Math.imul(ct,St),e=Math.imul(ct,At),e=e+Math.imul(bt,St)|0,l=Math.imul(bt,At),u=u+Math.imul(ht,xt)|0,e=e+Math.imul(ht,Pt)|0,e=e+Math.imul(dt,xt)|0,l=l+Math.imul(dt,Pt)|0,u=u+Math.imul(vt,Dt)|0,e=e+Math.imul(vt,Ot)|0,e=e+Math.imul(lt,Dt)|0,l=l+Math.imul(lt,Ot)|0,u=u+Math.imul(ut,Rt)|0,e=e+Math.imul(ut,It)|0,e=e+Math.imul(pt,Rt)|0,l=l+Math.imul(pt,It)|0,u=u+Math.imul(_t,Ct)|0,e=e+Math.imul(_t,Tt)|0,e=e+Math.imul(Mt,Ct)|0,l=l+Math.imul(Mt,Tt)|0,u=u+Math.imul(gt,Ft)|0,e=e+Math.imul(gt,$t)|0,e=e+Math.imul(mt,Ft)|0,l=l+Math.imul(mt,$t)|0;var $e=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+($e>>>26)|0,$e&=67108863,u=Math.imul(ct,xt),e=Math.imul(ct,Pt),e=e+Math.imul(bt,xt)|0,l=Math.imul(bt,Pt),u=u+Math.imul(ht,Dt)|0,e=e+Math.imul(ht,Ot)|0,e=e+Math.imul(dt,Dt)|0,l=l+Math.imul(dt,Ot)|0,u=u+Math.imul(vt,Rt)|0,e=e+Math.imul(vt,It)|0,e=e+Math.imul(lt,Rt)|0,l=l+Math.imul(lt,It)|0,u=u+Math.imul(ut,Ct)|0,e=e+Math.imul(ut,Tt)|0,e=e+Math.imul(pt,Ct)|0,l=l+Math.imul(pt,Tt)|0,u=u+Math.imul(_t,Ft)|0,e=e+Math.imul(_t,$t)|0,e=e+Math.imul(Mt,Ft)|0,l=l+Math.imul(Mt,$t)|0;var ze=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(ze>>>26)|0,ze&=67108863,u=Math.imul(ct,Dt),e=Math.imul(ct,Ot),e=e+Math.imul(bt,Dt)|0,l=Math.imul(bt,Ot),u=u+Math.imul(ht,Rt)|0,e=e+Math.imul(ht,It)|0,e=e+Math.imul(dt,Rt)|0,l=l+Math.imul(dt,It)|0,u=u+Math.imul(vt,Ct)|0,e=e+Math.imul(vt,Tt)|0,e=e+Math.imul(lt,Ct)|0,l=l+Math.imul(lt,Tt)|0,u=u+Math.imul(ut,Ft)|0,e=e+Math.imul(ut,$t)|0,e=e+Math.imul(pt,Ft)|0,l=l+Math.imul(pt,$t)|0;var De=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(De>>>26)|0,De&=67108863,u=Math.imul(ct,Rt),e=Math.imul(ct,It),e=e+Math.imul(bt,Rt)|0,l=Math.imul(bt,It),u=u+Math.imul(ht,Ct)|0,e=e+Math.imul(ht,Tt)|0,e=e+Math.imul(dt,Ct)|0,l=l+Math.imul(dt,Tt)|0,u=u+Math.imul(vt,Ft)|0,e=e+Math.imul(vt,$t)|0,e=e+Math.imul(lt,Ft)|0,l=l+Math.imul(lt,$t)|0;var Xe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,u=Math.imul(ct,Ct),e=Math.imul(ct,Tt),e=e+Math.imul(bt,Ct)|0,l=Math.imul(bt,Tt),u=u+Math.imul(ht,Ft)|0,e=e+Math.imul(ht,$t)|0,e=e+Math.imul(dt,Ft)|0,l=l+Math.imul(dt,$t)|0;var Qe=(y+u|0)+((e&8191)<<13)|0;y=(l+(e>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,u=Math.imul(ct,Ft),e=Math.imul(ct,$t),e=e+Math.imul(bt,Ft)|0,l=Math.imul(bt,$t);var tr=(y+u|0)+((e&8191)<<13)|0;return y=(l+(e>>>13)|0)+(tr>>>26)|0,tr&=67108863,m[0]=Se,m[1]=He,m[2]=Ke,m[3]=Ve,m[4]=Ge,m[5]=We,m[6]=Oe,m[7]=Be,m[8]=Ze,m[9]=Ne,m[10]=Je,m[11]=Ye,m[12]=qe,m[13]=$e,m[14]=ze,m[15]=De,m[16]=Xe,m[17]=Qe,m[18]=tr,y!==0&&(m[19]=y,n.length++),n};Math.imul||(O=I);function N(v,t,r){r.negative=t.negative^v.negative,r.length=v.length+t.length;for(var n=0,o=0,d=0;d<r.length-1;d++){var m=o;o=0;for(var y=n&67108863,u=Math.min(d,t.length-1),e=Math.max(0,d-v.length+1);e<=u;e++){var l=d-e,z=v.words[l]|0,$=t.words[e]|0,H=z*$,W=H&67108863;m=m+(H/67108864|0)|0,W=W+y|0,y=W&67108863,m=m+(W>>>26)|0,o+=m>>>26,m&=67108863}r.words[d]=y,n=m,m=o}return n!==0?r.words[d]=n:r.length--,r.strip()}function L(v,t,r){var n=new R;return n.mulp(v,t,r)}s.prototype.mulTo=function(t,r){var n,o=this.length+t.length;return this.length===10&&t.length===10?n=O(this,t,r):o<63?n=I(this,t,r):o<1024?n=N(this,t,r):n=L(this,t,r),n};function R(v,t){this.x=v,this.y=t}R.prototype.makeRBT=function(t){for(var r=new Array(t),n=s.prototype._countBits(t)-1,o=0;o<t;o++)r[o]=this.revBin(o,n,t);return r},R.prototype.revBin=function(t,r,n){if(t===0||t===n-1)return t;for(var o=0,d=0;d<r;d++)o|=(t&1)<<r-d-1,t>>=1;return o},R.prototype.permute=function(t,r,n,o,d,m){for(var y=0;y<m;y++)o[y]=r[t[y]],d[y]=n[t[y]]},R.prototype.transform=function(t,r,n,o,d,m){this.permute(m,t,r,n,o,d);for(var y=1;y<d;y<<=1)for(var u=y<<1,e=Math.cos(2*Math.PI/u),l=Math.sin(2*Math.PI/u),z=0;z<d;z+=u)for(var $=e,H=l,W=0;W<y;W++){var tt=n[z+W],Z=o[z+W],et=n[z+W+y],K=o[z+W+y],C=$*et-H*K;K=$*K+H*et,et=C,n[z+W]=tt+et,o[z+W]=Z+K,n[z+W+y]=tt-et,o[z+W+y]=Z-K,W!==u&&(C=e*$-l*H,H=e*H+l*$,$=C)}},R.prototype.guessLen13b=function(t,r){var n=Math.max(r,t)|1,o=n&1,d=0;for(n=n/2|0;n;n=n>>>1)d++;return 1<<d+1+o},R.prototype.conjugate=function(t,r,n){if(!(n<=1))for(var o=0;o<n/2;o++){var d=t[o];t[o]=t[n-o-1],t[n-o-1]=d,d=r[o],r[o]=-r[n-o-1],r[n-o-1]=-d}},R.prototype.normalize13b=function(t,r){for(var n=0,o=0;o<r/2;o++){var d=Math.round(t[2*o+1]/r)*8192+Math.round(t[2*o]/r)+n;t[o]=d&67108863,d<67108864?n=0:n=d/67108864|0}return t},R.prototype.convert13b=function(t,r,n,o){for(var d=0,m=0;m<r;m++)d=d+(t[m]|0),n[2*m]=d&8191,d=d>>>13,n[2*m+1]=d&8191,d=d>>>13;for(m=2*r;m<o;++m)n[m]=0;h(d===0),h((d&-8192)===0)},R.prototype.stub=function(t){for(var r=new Array(t),n=0;n<t;n++)r[n]=0;return r},R.prototype.mulp=function(t,r,n){var o=2*this.guessLen13b(t.length,r.length),d=this.makeRBT(o),m=this.stub(o),y=new Array(o),u=new Array(o),e=new Array(o),l=new Array(o),z=new Array(o),$=new Array(o),H=n.words;H.length=o,this.convert13b(t.words,t.length,y,o),this.convert13b(r.words,r.length,l,o),this.transform(y,m,u,e,o,d),this.transform(l,m,z,$,o,d);for(var W=0;W<o;W++){var tt=u[W]*z[W]-e[W]*$[W];e[W]=u[W]*$[W]+e[W]*z[W],u[W]=tt}return this.conjugate(u,e,o),this.transform(u,e,H,m,o,d),this.conjugate(H,m,o),this.normalize13b(H,o),n.negative=t.negative^r.negative,n.length=t.length+r.length,n.strip()},s.prototype.mul=function(t){var r=new s(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},s.prototype.mulf=function(t){var r=new s(null);return r.words=new Array(this.length+t.length),L(this,t,r)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){h(typeof t=="number"),h(t<67108864);for(var r=0,n=0;n<this.length;n++){var o=(this.words[n]|0)*t,d=(o&67108863)+(r&67108863);r>>=26,r+=o/67108864|0,r+=d>>>26,this.words[n]=d&67108863}return r!==0&&(this.words[n]=r,this.length++),this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var r=D(t);if(r.length===0)return new s(1);for(var n=this,o=0;o<r.length&&r[o]===0;o++,n=n.sqr());if(++o<r.length)for(var d=n.sqr();o<r.length;o++,d=d.sqr())r[o]!==0&&(n=n.mul(d));return n},s.prototype.iushln=function(t){h(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r,d;if(r!==0){var m=0;for(d=0;d<this.length;d++){var y=this.words[d]&o,u=(this.words[d]|0)-y<<r;this.words[d]=u|m,m=y>>>26-r}m&&(this.words[d]=m,this.length++)}if(n!==0){for(d=this.length-1;d>=0;d--)this.words[d+n]=this.words[d];for(d=0;d<n;d++)this.words[d]=0;this.length+=n}return this.strip()},s.prototype.ishln=function(t){return h(this.negative===0),this.iushln(t)},s.prototype.iushrn=function(t,r,n){h(typeof t=="number"&&t>=0);var o;r?o=(r-r%26)/26:o=0;var d=t%26,m=Math.min((t-d)/26,this.length),y=67108863^67108863>>>d<<d,u=n;if(o-=m,o=Math.max(0,o),u){for(var e=0;e<m;e++)u.words[e]=this.words[e];u.length=m}if(m!==0)if(this.length>m)for(this.length-=m,e=0;e<this.length;e++)this.words[e]=this.words[e+m];else this.words[0]=0,this.length=1;var l=0;for(e=this.length-1;e>=0&&(l!==0||e>=o);e--){var z=this.words[e]|0;this.words[e]=l<<26-d|z>>>d,l=z&y}return u&&l!==0&&(u.words[u.length++]=l),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(t,r,n){return h(this.negative===0),this.iushrn(t,r,n)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){h(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26,o=1<<r;if(this.length<=n)return!1;var d=this.words[n];return!!(d&o)},s.prototype.imaskn=function(t){h(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26;if(h(this.negative===0,"imaskn works only with positive numbers"),this.length<=n)return this;if(r!==0&&n++,this.length=Math.min(n,this.length),r!==0){var o=67108863^67108863>>>r<<r;this.words[this.length-1]&=o}return this.strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return h(typeof t=="number"),h(t<67108864),t<0?this.isubn(-t):this.negative!==0?this.length===1&&(this.words[0]|0)<t?(this.words[0]=t-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},s.prototype.isubn=function(t){if(h(typeof t=="number"),h(t<67108864),t<0)return this.iaddn(-t);if(this.negative!==0)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,r,n){var o=t.length+n,d;this._expand(o);var m,y=0;for(d=0;d<t.length;d++){m=(this.words[d+n]|0)+y;var u=(t.words[d]|0)*r;m-=u&67108863,y=(m>>26)-(u/67108864|0),this.words[d+n]=m&67108863}for(;d<this.length-n;d++)m=(this.words[d+n]|0)+y,y=m>>26,this.words[d+n]=m&67108863;if(y===0)return this.strip();for(h(y===-1),y=0,d=0;d<this.length;d++)m=-(this.words[d]|0)+y,y=m>>26,this.words[d]=m&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(t,r){var n=this.length-t.length,o=this.clone(),d=t,m=d.words[d.length-1]|0,y=this._countBits(m);n=26-y,n!==0&&(d=d.ushln(n),o.iushln(n),m=d.words[d.length-1]|0);var u=o.length-d.length,e;if(r!=="mod"){e=new s(null),e.length=u+1,e.words=new Array(e.length);for(var l=0;l<e.length;l++)e.words[l]=0}var z=o.clone()._ishlnsubmul(d,1,u);z.negative===0&&(o=z,e&&(e.words[u]=1));for(var $=u-1;$>=0;$--){var H=(o.words[d.length+$]|0)*67108864+(o.words[d.length+$-1]|0);for(H=Math.min(H/m|0,67108863),o._ishlnsubmul(d,H,$);o.negative!==0;)H--,o.negative=0,o._ishlnsubmul(d,1,$),o.isZero()||(o.negative^=1);e&&(e.words[$]=H)}return e&&e.strip(),o.strip(),r!=="div"&&n!==0&&o.iushrn(n),{div:e||null,mod:o}},s.prototype.divmod=function(t,r,n){if(h(!t.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var o,d,m;return this.negative!==0&&t.negative===0?(m=this.neg().divmod(t,r),r!=="mod"&&(o=m.div.neg()),r!=="div"&&(d=m.mod.neg(),n&&d.negative!==0&&d.iadd(t)),{div:o,mod:d}):this.negative===0&&t.negative!==0?(m=this.divmod(t.neg(),r),r!=="mod"&&(o=m.div.neg()),{div:o,mod:m.mod}):this.negative&t.negative?(m=this.neg().divmod(t.neg(),r),r!=="div"&&(d=m.mod.neg(),n&&d.negative!==0&&d.isub(t)),{div:m.div,mod:d}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:t.length===1?r==="div"?{div:this.divn(t.words[0]),mod:null}:r==="mod"?{div:null,mod:new s(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modn(t.words[0]))}:this._wordDiv(t,r)},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=r.div.negative!==0?r.mod.isub(t):r.mod,o=t.ushrn(1),d=t.andln(1),m=n.cmp(o);return m<0||d===1&&m===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},s.prototype.modn=function(t){h(t<=67108863);for(var r=(1<<26)%t,n=0,o=this.length-1;o>=0;o--)n=(r*n+(this.words[o]|0))%t;return n},s.prototype.idivn=function(t){h(t<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var o=(this.words[n]|0)+r*67108864;this.words[n]=o/t|0,r=o%t}return this.strip()},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){h(t.negative===0),h(!t.isZero());var r=this,n=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var o=new s(1),d=new s(0),m=new s(0),y=new s(1),u=0;r.isEven()&&n.isEven();)r.iushrn(1),n.iushrn(1),++u;for(var e=n.clone(),l=r.clone();!r.isZero();){for(var z=0,$=1;!(r.words[0]&$)&&z<26;++z,$<<=1);if(z>0)for(r.iushrn(z);z-- >0;)(o.isOdd()||d.isOdd())&&(o.iadd(e),d.isub(l)),o.iushrn(1),d.iushrn(1);for(var H=0,W=1;!(n.words[0]&W)&&H<26;++H,W<<=1);if(H>0)for(n.iushrn(H);H-- >0;)(m.isOdd()||y.isOdd())&&(m.iadd(e),y.isub(l)),m.iushrn(1),y.iushrn(1);r.cmp(n)>=0?(r.isub(n),o.isub(m),d.isub(y)):(n.isub(r),m.isub(o),y.isub(d))}return{a:m,b:y,gcd:n.iushln(u)}},s.prototype._invmp=function(t){h(t.negative===0),h(!t.isZero());var r=this,n=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var o=new s(1),d=new s(0),m=n.clone();r.cmpn(1)>0&&n.cmpn(1)>0;){for(var y=0,u=1;!(r.words[0]&u)&&y<26;++y,u<<=1);if(y>0)for(r.iushrn(y);y-- >0;)o.isOdd()&&o.iadd(m),o.iushrn(1);for(var e=0,l=1;!(n.words[0]&l)&&e<26;++e,l<<=1);if(e>0)for(n.iushrn(e);e-- >0;)d.isOdd()&&d.iadd(m),d.iushrn(1);r.cmp(n)>=0?(r.isub(n),o.isub(d)):(n.isub(r),d.isub(o))}var z;return r.cmpn(1)===0?z=o:z=d,z.cmpn(0)<0&&z.iadd(t),z},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),n=t.clone();r.negative=0,n.negative=0;for(var o=0;r.isEven()&&n.isEven();o++)r.iushrn(1),n.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;n.isEven();)n.iushrn(1);var d=r.cmp(n);if(d<0){var m=r;r=n,n=m}else if(d===0||n.cmpn(1)===0)break;r.isub(n)}while(!0);return n.iushln(o)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){h(typeof t=="number");var r=t%26,n=(t-r)/26,o=1<<r;if(this.length<=n)return this._expand(n+1),this.words[n]|=o,this;for(var d=o,m=n;d!==0&&m<this.length;m++){var y=this.words[m]|0;y+=d,d=y>>>26,y&=67108863,this.words[m]=y}return d!==0&&(this.words[m]=d,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(t){var r=t<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var n;if(this.length>1)n=1;else{r&&(t=-t),h(t<=67108863,"Number is too big");var o=this.words[0]|0;n=o===t?0:o<t?-1:1}return this.negative!==0?-n|0:n},s.prototype.cmp=function(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);return this.negative!==0?-r|0:r},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,n=this.length-1;n>=0;n--){var o=this.words[n]|0,d=t.words[n]|0;if(o!==d){o<d?r=-1:o>d&&(r=1);break}}return r},s.prototype.gtn=function(t){return this.cmpn(t)===1},s.prototype.gt=function(t){return this.cmp(t)===1},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return this.cmpn(t)===-1},s.prototype.lt=function(t){return this.cmp(t)===-1},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return this.cmpn(t)===0},s.prototype.eq=function(t){return this.cmp(t)===0},s.red=function(t){return new G(t)},s.prototype.toRed=function(t){return h(!this.red,"Already a number in reduction context"),h(this.negative===0,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return h(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return h(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return h(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return h(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return h(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return h(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return h(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return h(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return h(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return h(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return h(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return h(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return h(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return h(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return h(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var B={k256:null,p224:null,p192:null,p25519:null};function T(v,t){this.name=v,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}T.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},T.prototype.ireduce=function(t){var r=t,n;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),n=r.bitLength();while(n>this.n);var o=n<this.n?-1:r.ucmp(this.p);return o===0?(r.words[0]=0,r.length=1):o>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},T.prototype.split=function(t,r){t.iushrn(this.n,0,r)},T.prototype.imulK=function(t){return t.imul(this.k)};function U(){T.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}g(U,T),U.prototype.split=function(t,r){for(var n=4194303,o=Math.min(t.length,9),d=0;d<o;d++)r.words[d]=t.words[d];if(r.length=o,t.length<=9){t.words[0]=0,t.length=1;return}var m=t.words[9];for(r.words[r.length++]=m&n,d=10;d<t.length;d++){var y=t.words[d]|0;t.words[d-10]=(y&n)<<4|m>>>22,m=y}m>>>=22,t.words[d-10]=m,m===0&&t.length>10?t.length-=10:t.length-=9},U.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,n=0;n<t.length;n++){var o=t.words[n]|0;r+=o*977,t.words[n]=r&67108863,r=o*64+(r/67108864|0)}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t};function k(){T.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}g(k,T);function P(){T.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}g(P,T);function F(){T.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}g(F,T),F.prototype.imulK=function(t){for(var r=0,n=0;n<t.length;n++){var o=(t.words[n]|0)*19+r,d=o&67108863;o>>>=26,t.words[n]=d,r=o}return r!==0&&(t.words[t.length++]=r),t},s._prime=function(t){if(B[t])return B[t];var r;if(t==="k256")r=new U;else if(t==="p224")r=new k;else if(t==="p192")r=new P;else if(t==="p25519")r=new F;else throw new Error("Unknown prime "+t);return B[t]=r,r};function G(v){if(typeof v=="string"){var t=s._prime(v);this.m=t.p,this.prime=t}else h(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}G.prototype._verify1=function(t){h(t.negative===0,"red works only with positives"),h(t.red,"red works only with red numbers")},G.prototype._verify2=function(t,r){h((t.negative|r.negative)===0,"red works only with positives"),h(t.red&&t.red===r.red,"red works only with red numbers")},G.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},G.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},G.prototype.add=function(t,r){this._verify2(t,r);var n=t.add(r);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},G.prototype.iadd=function(t,r){this._verify2(t,r);var n=t.iadd(r);return n.cmp(this.m)>=0&&n.isub(this.m),n},G.prototype.sub=function(t,r){this._verify2(t,r);var n=t.sub(r);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},G.prototype.isub=function(t,r){this._verify2(t,r);var n=t.isub(r);return n.cmpn(0)<0&&n.iadd(this.m),n},G.prototype.shl=function(t,r){return this._verify1(t),this.imod(t.ushln(r))},G.prototype.imul=function(t,r){return this._verify2(t,r),this.imod(t.imul(r))},G.prototype.mul=function(t,r){return this._verify2(t,r),this.imod(t.mul(r))},G.prototype.isqr=function(t){return this.imul(t,t.clone())},G.prototype.sqr=function(t){return this.mul(t,t)},G.prototype.sqrt=function(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(h(r%2===1),r===3){var n=this.m.add(new s(1)).iushrn(2);return this.pow(t,n)}for(var o=this.m.subn(1),d=0;!o.isZero()&&o.andln(1)===0;)d++,o.iushrn(1);h(!o.isZero());var m=new s(1).toRed(this),y=m.redNeg(),u=this.m.subn(1).iushrn(1),e=this.m.bitLength();for(e=new s(2*e*e).toRed(this);this.pow(e,u).cmp(y)!==0;)e.redIAdd(y);for(var l=this.pow(e,o),z=this.pow(t,o.addn(1).iushrn(1)),$=this.pow(t,o),H=d;$.cmp(m)!==0;){for(var W=$,tt=0;W.cmp(m)!==0;tt++)W=W.redSqr();h(tt<H);var Z=this.pow(l,new s(1).iushln(H-tt-1));z=z.redMul(Z),l=Z.redSqr(),$=$.redMul(l),H=tt}return z},G.prototype.invm=function(t){var r=t._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},G.prototype.pow=function(t,r){if(r.isZero())return new s(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var n=4,o=new Array(1<<n);o[0]=new s(1).toRed(this),o[1]=t;for(var d=2;d<o.length;d++)o[d]=this.mul(o[d-1],t);var m=o[0],y=0,u=0,e=r.bitLength()%26;for(e===0&&(e=26),d=r.length-1;d>=0;d--){for(var l=r.words[d],z=e-1;z>=0;z--){var $=l>>z&1;if(m!==o[0]&&(m=this.sqr(m)),$===0&&y===0){u=0;continue}y<<=1,y|=$,u++,!(u!==n&&(d!==0||z!==0))&&(m=this.mul(m,o[y]),u=0,y=0)}e=26}return m},G.prototype.convertTo=function(t){var r=t.umod(this.m);return r===t?r.clone():r},G.prototype.convertFrom=function(t){var r=t.clone();return r.red=null,r},s.mont=function(t){return new nt(t)};function nt(v){G.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g(nt,G),nt.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},nt.prototype.convertFrom=function(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},nt.prototype.imul=function(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(r),o=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=n.isub(o).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.mul=function(t,r){if(t.isZero()||r.isZero())return new s(0)._forceRed(this);var n=t.mul(r),o=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=n.isub(o).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.invm=function(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(c,Ee)}(bo)),bo.exports}var S0,e1;function Dg(){if(e1)return S0;e1=1;var c=$u(),i=Te.Buffer;function a(h,g){return i.from(h.toRed(c.mont(g.modulus)).redPow(new c(g.publicExponent)).fromRed().toArray())}return S0=a,S0}var A0,r1;function B_(){if(r1)return A0;r1=1;var c=ko(),i=as(),a=Ks(),h=Sg(),g=Ag(),s=$u(),x=Dg(),w=Bu(),_=Te.Buffer;A0=function(D,I,O){var N;D.padding?N=D.padding:O?N=1:N=4;var L=c(D),R;if(N===4)R=M(L,I);else if(N===1)R=b(L,I,O);else if(N===3){if(R=new s(I),R.cmp(L.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return O?w(R,L):x(R,L)};function M(E,D){var I=E.modulus.byteLength(),O=D.length,N=a("sha1").update(_.alloc(0)).digest(),L=N.length,R=2*L;if(O>I-R-2)throw new Error("message too long");var B=_.alloc(I-O-R-2),T=I-L-1,U=i(L),k=g(_.concat([N,B,_.alloc(1,1),D],T),h(U,T)),P=g(U,h(k,L));return new s(_.concat([_.alloc(1),P,k],I))}function b(E,D,I){var O=D.length,N=E.modulus.byteLength();if(O>N-11)throw new Error("message too long");var L;return I?L=_.alloc(N-O-3,255):L=S(N-O-3),new s(_.concat([_.from([0,I?1:2]),L,_.alloc(1),D],N))}function S(E){for(var D=_.allocUnsafe(E),I=0,O=i(E*2),N=0,L;I<E;)N===O.length&&(O=i(E*2),N=0),L=O[N++],L&&(D[I++]=L);return D}return A0}var D0,i1;function N_(){if(i1)return D0;i1=1;var c=ko(),i=Sg(),a=Ag(),h=$u(),g=Bu(),s=Ks(),x=Dg(),w=Te.Buffer;D0=function(E,D,I){var O;E.padding?O=E.padding:I?O=1:O=4;var N=c(E),L=N.modulus.byteLength();if(D.length>L||new h(D).cmp(N.modulus)>=0)throw new Error("decryption error");var R;I?R=x(new h(D),N):R=g(D,N);var B=w.alloc(L-R.length);if(R=w.concat([B,R],L),O===4)return _(N,R);if(O===1)return M(N,R,I);if(O===3)return R;throw new Error("unknown padding")};function _(S,E){var D=S.modulus.byteLength(),I=s("sha1").update(w.alloc(0)).digest(),O=I.length;if(E[0]!==0)throw new Error("decryption error");var N=E.slice(1,O+1),L=E.slice(O+1),R=a(N,i(L,O)),B=a(L,i(R,D-O-1));if(b(I,B.slice(0,O)))throw new Error("decryption error");for(var T=O;B[T]===0;)T++;if(B[T++]!==1)throw new Error("decryption error");return B.slice(T)}function M(S,E,D){for(var I=E.slice(0,2),O=2,N=0;E[O++]!==0;)if(O>=E.length){N++;break}var L=E.slice(2,O-1);if((I.toString("hex")!=="0002"&&!D||I.toString("hex")!=="0001"&&D)&&N++,L.length<8&&N++,N)throw new Error("decryption error");return E.slice(O)}function b(S,E){S=w.from(S),E=w.from(E);var D=0,I=S.length;S.length!==E.length&&(D++,I=Math.min(S.length,E.length));for(var O=-1;++O<I;)D+=S[O]^E[O];return D}return D0}var n1;function q_(){return n1||(n1=1,function(c){c.publicEncrypt=B_(),c.privateDecrypt=N_(),c.privateEncrypt=function(a,h){return c.publicEncrypt(a,h,!0)},c.publicDecrypt=function(a,h){return c.privateDecrypt(a,h,!0)}}(M0)),M0}var Qn={},s1;function U_(){if(s1)return Qn;s1=1;function c(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var i=Te,a=as(),h=i.Buffer,g=i.kMaxLength,s=Ee.crypto||Ee.msCrypto,x=Math.pow(2,32)-1;function w(E,D){if(typeof E!="number"||E!==E)throw new TypeError("offset must be a number");if(E>x||E<0)throw new TypeError("offset must be a uint32");if(E>g||E>D)throw new RangeError("offset out of range")}function _(E,D,I){if(typeof E!="number"||E!==E)throw new TypeError("size must be a number");if(E>x||E<0)throw new TypeError("size must be a uint32");if(E+D>I||E>g)throw new RangeError("buffer too small")}s&&s.getRandomValues||!ei.browser?(Qn.randomFill=M,Qn.randomFillSync=S):(Qn.randomFill=c,Qn.randomFillSync=c);function M(E,D,I,O){if(!h.isBuffer(E)&&!(E instanceof Ee.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof D=="function")O=D,D=0,I=E.length;else if(typeof I=="function")O=I,I=E.length-D;else if(typeof O!="function")throw new TypeError('"cb" argument must be a function');return w(D,E.length),_(I,D,E.length),b(E,D,I,O)}function b(E,D,I,O){if(ei.browser){var N=E.buffer,L=new Uint8Array(N,D,I);if(s.getRandomValues(L),O){ei.nextTick(function(){O(null,E)});return}return E}if(O){a(I,function(B,T){if(B)return O(B);T.copy(E,D),O(null,E)});return}var R=a(I);return R.copy(E,D),E}function S(E,D,I){if(typeof D>"u"&&(D=0),!h.isBuffer(E)&&!(E instanceof Ee.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return w(D,E.length),I===void 0&&(I=E.length-D),_(I,D,E.length),b(E,D,I)}return Qn}var a1;function Ig(){if(a1)return be;a1=1,be.randomBytes=be.rng=be.pseudoRandomBytes=be.prng=as(),be.createHash=be.Hash=Ks(),be.createHmac=be.Hmac=tg();var c=g4(),i=Object.keys(c),a=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);be.getHashes=function(){return a};var h=ag();be.pbkdf2=h.pbkdf2,be.pbkdf2Sync=h.pbkdf2Sync;var g=N4();be.Cipher=g.Cipher,be.createCipher=g.createCipher,be.Cipheriv=g.Cipheriv,be.createCipheriv=g.createCipheriv,be.Decipher=g.Decipher,be.createDecipher=g.createDecipher,be.Decipheriv=g.Decipheriv,be.createDecipheriv=g.createDecipheriv,be.getCiphers=g.getCiphers,be.listCiphers=g.listCiphers;var s=G4();be.DiffieHellmanGroup=s.DiffieHellmanGroup,be.createDiffieHellmanGroup=s.createDiffieHellmanGroup,be.getDiffieHellman=s.getDiffieHellman,be.createDiffieHellman=s.createDiffieHellman,be.DiffieHellman=s.DiffieHellman;var x=O_();be.createSign=x.createSign,be.Sign=x.Sign,be.createVerify=x.createVerify,be.Verify=x.Verify,be.createECDH=T_();var w=q_();be.publicEncrypt=w.publicEncrypt,be.privateEncrypt=w.privateEncrypt,be.publicDecrypt=w.publicDecrypt,be.privateDecrypt=w.privateDecrypt;var _=U_();return be.randomFill=_.randomFill,be.randomFillSync=_.randomFillSync,be.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},be.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},be}Object.defineProperty(Bo,"__esModule",{value:!0});Bo.NodeRandomSource=void 0;const k_=ii;class L_{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof r4<"u"){const i=Ig();i&&i.randomBytes&&(this._crypto=i,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(i){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let a=this._crypto.randomBytes(i);if(a.length!==i)throw new Error("NodeRandomSource: got fewer bytes than requested");const h=new Uint8Array(i);for(let g=0;g<h.length;g++)h[g]=a[g];return(0,k_.wipe)(a),h}}Bo.NodeRandomSource=L_;Object.defineProperty(Co,"__esModule",{value:!0});Co.SystemRandomSource=void 0;const F_=To,$_=Bo;class z_{constructor(){if(this.isAvailable=!1,this.name="",this._source=new F_.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new $_.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(i){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(i)}}Co.SystemRandomSource=z_;(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.randomStringForEntropy=c.randomString=c.randomUint32=c.randomBytes=c.defaultRandomSource=void 0;const i=Co,a=ve,h=ii;c.defaultRandomSource=new i.SystemRandomSource;function g(M,b=c.defaultRandomSource){return b.randomBytes(M)}c.randomBytes=g;function s(M=c.defaultRandomSource){const b=g(4,M),S=(0,a.readUint32LE)(b);return(0,h.wipe)(b),S}c.randomUint32=s;const x="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function w(M,b=x,S=c.defaultRandomSource){if(b.length<2)throw new Error("randomString charset is too short");if(b.length>256)throw new Error("randomString charset is too long");let E="";const D=b.length,I=256-256%D;for(;M>0;){const O=g(Math.ceil(M*256/I),S);for(let N=0;N<O.length&&M>0;N++){const L=O[N];L<I&&(E+=b.charAt(L%D),M--)}(0,h.wipe)(O)}return E}c.randomString=w;function _(M,b=x,S=c.defaultRandomSource){const E=Math.ceil(M/(Math.log(b.length)/Math.LN2));return w(E,b,S)}c.randomStringForEntropy=_})(ss);var Lo={};(function(c){Object.defineProperty(c,"__esModule",{value:!0});var i=ve,a=ii;c.DIGEST_LENGTH=32,c.BLOCK_SIZE=64;var h=function(){function w(){this.digestLength=c.DIGEST_LENGTH,this.blockSize=c.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return w.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},w.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},w.prototype.clean=function(){a.wipe(this._buffer),a.wipe(this._temp),this.reset()},w.prototype.update=function(_,M){if(M===void 0&&(M=_.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var b=0;if(this._bytesHashed+=M,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&M>0;)this._buffer[this._bufferLength++]=_[b++],M--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(M>=this.blockSize&&(b=s(this._temp,this._state,_,b,M),M%=this.blockSize);M>0;)this._buffer[this._bufferLength++]=_[b++],M--;return this},w.prototype.finish=function(_){if(!this._finished){var M=this._bytesHashed,b=this._bufferLength,S=M/536870912|0,E=M<<3,D=M%64<56?64:128;this._buffer[b]=128;for(var I=b+1;I<D-8;I++)this._buffer[I]=0;i.writeUint32BE(S,this._buffer,D-8),i.writeUint32BE(E,this._buffer,D-4),s(this._temp,this._state,this._buffer,0,D),this._finished=!0}for(var I=0;I<this.digestLength/4;I++)i.writeUint32BE(this._state[I],_,I*4);return this},w.prototype.digest=function(){var _=new Uint8Array(this.digestLength);return this.finish(_),_},w.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},w.prototype.restoreState=function(_){return this._state.set(_.state),this._bufferLength=_.bufferLength,_.buffer&&this._buffer.set(_.buffer),this._bytesHashed=_.bytesHashed,this._finished=!1,this},w.prototype.cleanSavedState=function(_){a.wipe(_.state),_.buffer&&a.wipe(_.buffer),_.bufferLength=0,_.bytesHashed=0},w}();c.SHA256=h;var g=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(w,_,M,b,S){for(;S>=64;){for(var E=_[0],D=_[1],I=_[2],O=_[3],N=_[4],L=_[5],R=_[6],B=_[7],T=0;T<16;T++){var U=b+T*4;w[T]=i.readUint32BE(M,U)}for(var T=16;T<64;T++){var k=w[T-2],P=(k>>>17|k<<32-17)^(k>>>19|k<<32-19)^k>>>10;k=w[T-15];var F=(k>>>7|k<<32-7)^(k>>>18|k<<32-18)^k>>>3;w[T]=(P+w[T-7]|0)+(F+w[T-16]|0)}for(var T=0;T<64;T++){var P=(((N>>>6|N<<26)^(N>>>11|N<<21)^(N>>>25|N<<7))+(N&L^~N&R)|0)+(B+(g[T]+w[T]|0)|0)|0,F=((E>>>2|E<<32-2)^(E>>>13|E<<32-13)^(E>>>22|E<<32-22))+(E&D^E&I^D&I)|0;B=R,R=L,L=N,N=O+P|0,O=I,I=D,D=E,E=P+F|0}_[0]+=E,_[1]+=D,_[2]+=I,_[3]+=O,_[4]+=N,_[5]+=L,_[6]+=R,_[7]+=B,b+=64,S-=64}return b}function x(w){var _=new h;_.update(w);var M=_.digest();return _.clean(),M}c.hash=x})(Lo);var zu={};(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.sharedKey=c.generateKeyPair=c.generateKeyPairFromSeed=c.scalarMultBase=c.scalarMult=c.SHARED_KEY_LENGTH=c.SECRET_KEY_LENGTH=c.PUBLIC_KEY_LENGTH=void 0;const i=ss,a=ii;c.PUBLIC_KEY_LENGTH=32,c.SECRET_KEY_LENGTH=32,c.SHARED_KEY_LENGTH=32;function h(T){const U=new Float64Array(16);if(T)for(let k=0;k<T.length;k++)U[k]=T[k];return U}const g=new Uint8Array(32);g[0]=9;const s=h([56129,1]);function x(T){let U=1;for(let k=0;k<16;k++){let P=T[k]+U+65535;U=Math.floor(P/65536),T[k]=P-U*65536}T[0]+=U-1+37*(U-1)}function w(T,U,k){const P=~(k-1);for(let F=0;F<16;F++){const G=P&(T[F]^U[F]);T[F]^=G,U[F]^=G}}function _(T,U){const k=h(),P=h();for(let F=0;F<16;F++)P[F]=U[F];x(P),x(P),x(P);for(let F=0;F<2;F++){k[0]=P[0]-65517;for(let nt=1;nt<15;nt++)k[nt]=P[nt]-65535-(k[nt-1]>>16&1),k[nt-1]&=65535;k[15]=P[15]-32767-(k[14]>>16&1);const G=k[15]>>16&1;k[14]&=65535,w(P,k,1-G)}for(let F=0;F<16;F++)T[2*F]=P[F]&255,T[2*F+1]=P[F]>>8}function M(T,U){for(let k=0;k<16;k++)T[k]=U[2*k]+(U[2*k+1]<<8);T[15]&=32767}function b(T,U,k){for(let P=0;P<16;P++)T[P]=U[P]+k[P]}function S(T,U,k){for(let P=0;P<16;P++)T[P]=U[P]-k[P]}function E(T,U,k){let P,F,G=0,nt=0,v=0,t=0,r=0,n=0,o=0,d=0,m=0,y=0,u=0,e=0,l=0,z=0,$=0,H=0,W=0,tt=0,Z=0,et=0,K=0,C=0,Q=0,rt=0,st=0,Yt=0,gt=0,mt=0,ee=0,_t=0,Mt=0,re=k[0],ut=k[1],pt=k[2],Xt=k[3],vt=k[4],lt=k[5],Qt=k[6],ht=k[7],dt=k[8],ie=k[9],ct=k[10],bt=k[11],ne=k[12],yt=k[13],wt=k[14],se=k[15];P=U[0],G+=P*re,nt+=P*ut,v+=P*pt,t+=P*Xt,r+=P*vt,n+=P*lt,o+=P*Qt,d+=P*ht,m+=P*dt,y+=P*ie,u+=P*ct,e+=P*bt,l+=P*ne,z+=P*yt,$+=P*wt,H+=P*se,P=U[1],nt+=P*re,v+=P*ut,t+=P*pt,r+=P*Xt,n+=P*vt,o+=P*lt,d+=P*Qt,m+=P*ht,y+=P*dt,u+=P*ie,e+=P*ct,l+=P*bt,z+=P*ne,$+=P*yt,H+=P*wt,W+=P*se,P=U[2],v+=P*re,t+=P*ut,r+=P*pt,n+=P*Xt,o+=P*vt,d+=P*lt,m+=P*Qt,y+=P*ht,u+=P*dt,e+=P*ie,l+=P*ct,z+=P*bt,$+=P*ne,H+=P*yt,W+=P*wt,tt+=P*se,P=U[3],t+=P*re,r+=P*ut,n+=P*pt,o+=P*Xt,d+=P*vt,m+=P*lt,y+=P*Qt,u+=P*ht,e+=P*dt,l+=P*ie,z+=P*ct,$+=P*bt,H+=P*ne,W+=P*yt,tt+=P*wt,Z+=P*se,P=U[4],r+=P*re,n+=P*ut,o+=P*pt,d+=P*Xt,m+=P*vt,y+=P*lt,u+=P*Qt,e+=P*ht,l+=P*dt,z+=P*ie,$+=P*ct,H+=P*bt,W+=P*ne,tt+=P*yt,Z+=P*wt,et+=P*se,P=U[5],n+=P*re,o+=P*ut,d+=P*pt,m+=P*Xt,y+=P*vt,u+=P*lt,e+=P*Qt,l+=P*ht,z+=P*dt,$+=P*ie,H+=P*ct,W+=P*bt,tt+=P*ne,Z+=P*yt,et+=P*wt,K+=P*se,P=U[6],o+=P*re,d+=P*ut,m+=P*pt,y+=P*Xt,u+=P*vt,e+=P*lt,l+=P*Qt,z+=P*ht,$+=P*dt,H+=P*ie,W+=P*ct,tt+=P*bt,Z+=P*ne,et+=P*yt,K+=P*wt,C+=P*se,P=U[7],d+=P*re,m+=P*ut,y+=P*pt,u+=P*Xt,e+=P*vt,l+=P*lt,z+=P*Qt,$+=P*ht,H+=P*dt,W+=P*ie,tt+=P*ct,Z+=P*bt,et+=P*ne,K+=P*yt,C+=P*wt,Q+=P*se,P=U[8],m+=P*re,y+=P*ut,u+=P*pt,e+=P*Xt,l+=P*vt,z+=P*lt,$+=P*Qt,H+=P*ht,W+=P*dt,tt+=P*ie,Z+=P*ct,et+=P*bt,K+=P*ne,C+=P*yt,Q+=P*wt,rt+=P*se,P=U[9],y+=P*re,u+=P*ut,e+=P*pt,l+=P*Xt,z+=P*vt,$+=P*lt,H+=P*Qt,W+=P*ht,tt+=P*dt,Z+=P*ie,et+=P*ct,K+=P*bt,C+=P*ne,Q+=P*yt,rt+=P*wt,st+=P*se,P=U[10],u+=P*re,e+=P*ut,l+=P*pt,z+=P*Xt,$+=P*vt,H+=P*lt,W+=P*Qt,tt+=P*ht,Z+=P*dt,et+=P*ie,K+=P*ct,C+=P*bt,Q+=P*ne,rt+=P*yt,st+=P*wt,Yt+=P*se,P=U[11],e+=P*re,l+=P*ut,z+=P*pt,$+=P*Xt,H+=P*vt,W+=P*lt,tt+=P*Qt,Z+=P*ht,et+=P*dt,K+=P*ie,C+=P*ct,Q+=P*bt,rt+=P*ne,st+=P*yt,Yt+=P*wt,gt+=P*se,P=U[12],l+=P*re,z+=P*ut,$+=P*pt,H+=P*Xt,W+=P*vt,tt+=P*lt,Z+=P*Qt,et+=P*ht,K+=P*dt,C+=P*ie,Q+=P*ct,rt+=P*bt,st+=P*ne,Yt+=P*yt,gt+=P*wt,mt+=P*se,P=U[13],z+=P*re,$+=P*ut,H+=P*pt,W+=P*Xt,tt+=P*vt,Z+=P*lt,et+=P*Qt,K+=P*ht,C+=P*dt,Q+=P*ie,rt+=P*ct,st+=P*bt,Yt+=P*ne,gt+=P*yt,mt+=P*wt,ee+=P*se,P=U[14],$+=P*re,H+=P*ut,W+=P*pt,tt+=P*Xt,Z+=P*vt,et+=P*lt,K+=P*Qt,C+=P*ht,Q+=P*dt,rt+=P*ie,st+=P*ct,Yt+=P*bt,gt+=P*ne,mt+=P*yt,ee+=P*wt,_t+=P*se,P=U[15],H+=P*re,W+=P*ut,tt+=P*pt,Z+=P*Xt,et+=P*vt,K+=P*lt,C+=P*Qt,Q+=P*ht,rt+=P*dt,st+=P*ie,Yt+=P*ct,gt+=P*bt,mt+=P*ne,ee+=P*yt,_t+=P*wt,Mt+=P*se,G+=38*W,nt+=38*tt,v+=38*Z,t+=38*et,r+=38*K,n+=38*C,o+=38*Q,d+=38*rt,m+=38*st,y+=38*Yt,u+=38*gt,e+=38*mt,l+=38*ee,z+=38*_t,$+=38*Mt,F=1,P=G+F+65535,F=Math.floor(P/65536),G=P-F*65536,P=nt+F+65535,F=Math.floor(P/65536),nt=P-F*65536,P=v+F+65535,F=Math.floor(P/65536),v=P-F*65536,P=t+F+65535,F=Math.floor(P/65536),t=P-F*65536,P=r+F+65535,F=Math.floor(P/65536),r=P-F*65536,P=n+F+65535,F=Math.floor(P/65536),n=P-F*65536,P=o+F+65535,F=Math.floor(P/65536),o=P-F*65536,P=d+F+65535,F=Math.floor(P/65536),d=P-F*65536,P=m+F+65535,F=Math.floor(P/65536),m=P-F*65536,P=y+F+65535,F=Math.floor(P/65536),y=P-F*65536,P=u+F+65535,F=Math.floor(P/65536),u=P-F*65536,P=e+F+65535,F=Math.floor(P/65536),e=P-F*65536,P=l+F+65535,F=Math.floor(P/65536),l=P-F*65536,P=z+F+65535,F=Math.floor(P/65536),z=P-F*65536,P=$+F+65535,F=Math.floor(P/65536),$=P-F*65536,P=H+F+65535,F=Math.floor(P/65536),H=P-F*65536,G+=F-1+37*(F-1),F=1,P=G+F+65535,F=Math.floor(P/65536),G=P-F*65536,P=nt+F+65535,F=Math.floor(P/65536),nt=P-F*65536,P=v+F+65535,F=Math.floor(P/65536),v=P-F*65536,P=t+F+65535,F=Math.floor(P/65536),t=P-F*65536,P=r+F+65535,F=Math.floor(P/65536),r=P-F*65536,P=n+F+65535,F=Math.floor(P/65536),n=P-F*65536,P=o+F+65535,F=Math.floor(P/65536),o=P-F*65536,P=d+F+65535,F=Math.floor(P/65536),d=P-F*65536,P=m+F+65535,F=Math.floor(P/65536),m=P-F*65536,P=y+F+65535,F=Math.floor(P/65536),y=P-F*65536,P=u+F+65535,F=Math.floor(P/65536),u=P-F*65536,P=e+F+65535,F=Math.floor(P/65536),e=P-F*65536,P=l+F+65535,F=Math.floor(P/65536),l=P-F*65536,P=z+F+65535,F=Math.floor(P/65536),z=P-F*65536,P=$+F+65535,F=Math.floor(P/65536),$=P-F*65536,P=H+F+65535,F=Math.floor(P/65536),H=P-F*65536,G+=F-1+37*(F-1),T[0]=G,T[1]=nt,T[2]=v,T[3]=t,T[4]=r,T[5]=n,T[6]=o,T[7]=d,T[8]=m,T[9]=y,T[10]=u,T[11]=e,T[12]=l,T[13]=z,T[14]=$,T[15]=H}function D(T,U){E(T,U,U)}function I(T,U){const k=h();for(let P=0;P<16;P++)k[P]=U[P];for(let P=253;P>=0;P--)D(k,k),P!==2&&P!==4&&E(k,k,U);for(let P=0;P<16;P++)T[P]=k[P]}function O(T,U){const k=new Uint8Array(32),P=new Float64Array(80),F=h(),G=h(),nt=h(),v=h(),t=h(),r=h();for(let m=0;m<31;m++)k[m]=T[m];k[31]=T[31]&127|64,k[0]&=248,M(P,U);for(let m=0;m<16;m++)G[m]=P[m];F[0]=v[0]=1;for(let m=254;m>=0;--m){const y=k[m>>>3]>>>(m&7)&1;w(F,G,y),w(nt,v,y),b(t,F,nt),S(F,F,nt),b(nt,G,v),S(G,G,v),D(v,t),D(r,F),E(F,nt,F),E(nt,G,t),b(t,F,nt),S(F,F,nt),D(G,F),S(nt,v,r),E(F,nt,s),b(F,F,v),E(nt,nt,F),E(F,v,r),E(v,G,P),D(G,t),w(F,G,y),w(nt,v,y)}for(let m=0;m<16;m++)P[m+16]=F[m],P[m+32]=nt[m],P[m+48]=G[m],P[m+64]=v[m];const n=P.subarray(32),o=P.subarray(16);I(n,n),E(o,o,n);const d=new Uint8Array(32);return _(d,o),d}c.scalarMult=O;function N(T){return O(T,g)}c.scalarMultBase=N;function L(T){if(T.length!==c.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${c.SECRET_KEY_LENGTH} bytes`);const U=new Uint8Array(T);return{publicKey:N(U),secretKey:U}}c.generateKeyPairFromSeed=L;function R(T){const U=(0,i.randomBytes)(32,T),k=L(U);return(0,a.wipe)(U),k}c.generateKeyPair=R;function B(T,U,k=!1){if(T.length!==c.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(U.length!==c.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const P=O(T,U);if(k){let F=0;for(let G=0;G<P.length;G++)F|=P[G];if(F===0)throw new Error("X25519: invalid shared key")}return P}c.sharedKey=B})(zu);function ju(c){return globalThis.Buffer!=null?new Uint8Array(c.buffer,c.byteOffset,c.byteLength):c}function Rg(c=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ju(globalThis.Buffer.allocUnsafe(c)):new Uint8Array(c)}function eu(c,i){i||(i=c.reduce((g,s)=>g+s.length,0));const a=Rg(i);let h=0;for(const g of c)a.set(g,h),h+=g.length;return ju(a)}function j_(c,i){if(c.length>=255)throw new TypeError("Alphabet too long");for(var a=new Uint8Array(256),h=0;h<a.length;h++)a[h]=255;for(var g=0;g<c.length;g++){var s=c.charAt(g),x=s.charCodeAt(0);if(a[x]!==255)throw new TypeError(s+" is ambiguous");a[x]=g}var w=c.length,_=c.charAt(0),M=Math.log(w)/Math.log(256),b=Math.log(256)/Math.log(w);function S(I){if(I instanceof Uint8Array||(ArrayBuffer.isView(I)?I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength):Array.isArray(I)&&(I=Uint8Array.from(I))),!(I instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(I.length===0)return"";for(var O=0,N=0,L=0,R=I.length;L!==R&&I[L]===0;)L++,O++;for(var B=(R-L)*b+1>>>0,T=new Uint8Array(B);L!==R;){for(var U=I[L],k=0,P=B-1;(U!==0||k<N)&&P!==-1;P--,k++)U+=256*T[P]>>>0,T[P]=U%w>>>0,U=U/w>>>0;if(U!==0)throw new Error("Non-zero carry");N=k,L++}for(var F=B-N;F!==B&&T[F]===0;)F++;for(var G=_.repeat(O);F<B;++F)G+=c.charAt(T[F]);return G}function E(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return new Uint8Array;var O=0;if(I[O]!==" "){for(var N=0,L=0;I[O]===_;)N++,O++;for(var R=(I.length-O)*M+1>>>0,B=new Uint8Array(R);I[O];){var T=a[I.charCodeAt(O)];if(T===255)return;for(var U=0,k=R-1;(T!==0||U<L)&&k!==-1;k--,U++)T+=w*B[k]>>>0,B[k]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");L=U,O++}if(I[O]!==" "){for(var P=R-L;P!==R&&B[P]===0;)P++;for(var F=new Uint8Array(N+(R-P)),G=N;P!==R;)F[G++]=B[P++];return F}}}function D(I){var O=E(I);if(O)return O;throw new Error(`Non-${i} character`)}return{encode:S,decodeUnsafe:E,decode:D}}var H_=j_,K_=H_;const V_=c=>{if(c instanceof Uint8Array&&c.constructor.name==="Uint8Array")return c;if(c instanceof ArrayBuffer)return new Uint8Array(c);if(ArrayBuffer.isView(c))return new Uint8Array(c.buffer,c.byteOffset,c.byteLength);throw new Error("Unknown type, must be binary type")},G_=c=>new TextEncoder().encode(c),W_=c=>new TextDecoder().decode(c);class Z_{constructor(i,a,h){this.name=i,this.prefix=a,this.baseEncode=h}encode(i){if(i instanceof Uint8Array)return`${this.prefix}${this.baseEncode(i)}`;throw Error("Unknown type, must be binary type")}}class J_{constructor(i,a,h){if(this.name=i,this.prefix=a,a.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=a.codePointAt(0),this.baseDecode=h}decode(i){if(typeof i=="string"){if(i.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(i)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(i.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(i){return Pg(this,i)}}class Y_{constructor(i){this.decoders=i}or(i){return Pg(this,i)}decode(i){const a=i[0],h=this.decoders[a];if(h)return h.decode(i);throw RangeError(`Unable to decode multibase string ${JSON.stringify(i)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Pg=(c,i)=>new Y_({...c.decoders||{[c.prefix]:c},...i.decoders||{[i.prefix]:i}});class X_{constructor(i,a,h,g){this.name=i,this.prefix=a,this.baseEncode=h,this.baseDecode=g,this.encoder=new Z_(i,a,h),this.decoder=new J_(i,a,g)}encode(i){return this.encoder.encode(i)}decode(i){return this.decoder.decode(i)}}const Fo=({name:c,prefix:i,encode:a,decode:h})=>new X_(c,i,a,h),Gs=({prefix:c,name:i,alphabet:a})=>{const{encode:h,decode:g}=K_(a,i);return Fo({prefix:c,name:i,encode:h,decode:s=>V_(g(s))})},Q_=(c,i,a,h)=>{const g={};for(let b=0;b<i.length;++b)g[i[b]]=b;let s=c.length;for(;c[s-1]==="=";)--s;const x=new Uint8Array(s*a/8|0);let w=0,_=0,M=0;for(let b=0;b<s;++b){const S=g[c[b]];if(S===void 0)throw new SyntaxError(`Non-${h} character`);_=_<<a|S,w+=a,w>=8&&(w-=8,x[M++]=255&_>>w)}if(w>=a||255&_<<8-w)throw new SyntaxError("Unexpected end of data");return x},t8=(c,i,a)=>{const h=i[i.length-1]==="=",g=(1<<a)-1;let s="",x=0,w=0;for(let _=0;_<c.length;++_)for(w=w<<8|c[_],x+=8;x>a;)x-=a,s+=i[g&w>>x];if(x&&(s+=i[g&w<<a-x]),h)for(;s.length*a&7;)s+="=";return s},Ir=({name:c,prefix:i,bitsPerChar:a,alphabet:h})=>Fo({prefix:i,name:c,encode(g){return t8(g,h,a)},decode(g){return Q_(g,h,a,c)}}),e8=Fo({prefix:"\0",name:"identity",encode:c=>W_(c),decode:c=>G_(c)}),r8=Object.freeze(Object.defineProperty({__proto__:null,identity:e8},Symbol.toStringTag,{value:"Module"})),i8=Ir({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),n8=Object.freeze(Object.defineProperty({__proto__:null,base2:i8},Symbol.toStringTag,{value:"Module"})),s8=Ir({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),a8=Object.freeze(Object.defineProperty({__proto__:null,base8:s8},Symbol.toStringTag,{value:"Module"})),o8=Gs({prefix:"9",name:"base10",alphabet:"0123456789"}),f8=Object.freeze(Object.defineProperty({__proto__:null,base10:o8},Symbol.toStringTag,{value:"Module"})),h8=Ir({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),u8=Ir({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),c8=Object.freeze(Object.defineProperty({__proto__:null,base16:h8,base16upper:u8},Symbol.toStringTag,{value:"Module"})),l8=Ir({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),d8=Ir({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),p8=Ir({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),v8=Ir({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),g8=Ir({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),m8=Ir({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),b8=Ir({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),y8=Ir({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),w8=Ir({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),_8=Object.freeze(Object.defineProperty({__proto__:null,base32:l8,base32hex:g8,base32hexpad:b8,base32hexpadupper:y8,base32hexupper:m8,base32pad:p8,base32padupper:v8,base32upper:d8,base32z:w8},Symbol.toStringTag,{value:"Module"})),M8=Gs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),x8=Gs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),E8=Object.freeze(Object.defineProperty({__proto__:null,base36:M8,base36upper:x8},Symbol.toStringTag,{value:"Module"})),S8=Gs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),A8=Gs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),D8=Object.freeze(Object.defineProperty({__proto__:null,base58btc:S8,base58flickr:A8},Symbol.toStringTag,{value:"Module"})),I8=Ir({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),R8=Ir({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),P8=Ir({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),O8=Ir({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),C8=Object.freeze(Object.defineProperty({__proto__:null,base64:I8,base64pad:R8,base64url:P8,base64urlpad:O8},Symbol.toStringTag,{value:"Module"})),Og=Array.from(""),T8=Og.reduce((c,i,a)=>(c[a]=i,c),[]),B8=Og.reduce((c,i,a)=>(c[i.codePointAt(0)]=a,c),[]);function N8(c){return c.reduce((i,a)=>(i+=T8[a],i),"")}function q8(c){const i=[];for(const a of c){const h=B8[a.codePointAt(0)];if(h===void 0)throw new Error(`Non-base256emoji character: ${a}`);i.push(h)}return new Uint8Array(i)}const U8=Fo({prefix:"",name:"base256emoji",encode:N8,decode:q8}),k8=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:U8},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const o1={...r8,...n8,...a8,...f8,...c8,..._8,...E8,...D8,...C8,...k8};function Cg(c,i,a,h){return{name:c,prefix:i,encoder:{name:c,prefix:i,encode:a},decoder:{decode:h}}}const f1=Cg("utf8","u",c=>"u"+new TextDecoder("utf8").decode(c),c=>new TextEncoder().encode(c.substring(1))),I0=Cg("ascii","a",c=>{let i="a";for(let a=0;a<c.length;a++)i+=String.fromCharCode(c[a]);return i},c=>{c=c.substring(1);const i=Rg(c.length);for(let a=0;a<c.length;a++)i[a]=c.charCodeAt(a);return i}),Tg={utf8:f1,"utf-8":f1,hex:o1.base16,latin1:I0,ascii:I0,binary:I0,...o1};function Gr(c,i="utf8"){const a=Tg[i];if(!a)throw new Error(`Unsupported encoding "${i}"`);return(i==="utf8"||i==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ju(globalThis.Buffer.from(c,"utf-8")):a.decoder.decode(`${a.prefix}${c}`)}function Fr(c,i="utf8"){const a=Tg[i];if(!a)throw new Error(`Unsupported encoding "${i}"`);return(i==="utf8"||i==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(c.buffer,c.byteOffset,c.byteLength).toString("utf8"):a.encoder.encode(c).substring(1)}var ae={},R0={},Is={},h1;function L8(){if(h1)return Is;h1=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.delay=void 0;function c(i){return new Promise(a=>{setTimeout(()=>{a(!0)},i)})}return Is.delay=c,Is}var An={},P0={},Dn={},u1;function F8(){return u1||(u1=1,Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.ONE_THOUSAND=Dn.ONE_HUNDRED=void 0,Dn.ONE_HUNDRED=100,Dn.ONE_THOUSAND=1e3),Dn}var O0={},c1;function $8(){return c1||(c1=1,function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.ONE_YEAR=c.FOUR_WEEKS=c.THREE_WEEKS=c.TWO_WEEKS=c.ONE_WEEK=c.THIRTY_DAYS=c.SEVEN_DAYS=c.FIVE_DAYS=c.THREE_DAYS=c.ONE_DAY=c.TWENTY_FOUR_HOURS=c.TWELVE_HOURS=c.SIX_HOURS=c.THREE_HOURS=c.ONE_HOUR=c.SIXTY_MINUTES=c.THIRTY_MINUTES=c.TEN_MINUTES=c.FIVE_MINUTES=c.ONE_MINUTE=c.SIXTY_SECONDS=c.THIRTY_SECONDS=c.TEN_SECONDS=c.FIVE_SECONDS=c.ONE_SECOND=void 0,c.ONE_SECOND=1,c.FIVE_SECONDS=5,c.TEN_SECONDS=10,c.THIRTY_SECONDS=30,c.SIXTY_SECONDS=60,c.ONE_MINUTE=c.SIXTY_SECONDS,c.FIVE_MINUTES=c.ONE_MINUTE*5,c.TEN_MINUTES=c.ONE_MINUTE*10,c.THIRTY_MINUTES=c.ONE_MINUTE*30,c.SIXTY_MINUTES=c.ONE_MINUTE*60,c.ONE_HOUR=c.SIXTY_MINUTES,c.THREE_HOURS=c.ONE_HOUR*3,c.SIX_HOURS=c.ONE_HOUR*6,c.TWELVE_HOURS=c.ONE_HOUR*12,c.TWENTY_FOUR_HOURS=c.ONE_HOUR*24,c.ONE_DAY=c.TWENTY_FOUR_HOURS,c.THREE_DAYS=c.ONE_DAY*3,c.FIVE_DAYS=c.ONE_DAY*5,c.SEVEN_DAYS=c.ONE_DAY*7,c.THIRTY_DAYS=c.ONE_DAY*30,c.ONE_WEEK=c.SEVEN_DAYS,c.TWO_WEEKS=c.ONE_WEEK*2,c.THREE_WEEKS=c.ONE_WEEK*3,c.FOUR_WEEKS=c.ONE_WEEK*4,c.ONE_YEAR=c.ONE_DAY*365}(O0)),O0}var l1;function Bg(){return l1||(l1=1,function(c){Object.defineProperty(c,"__esModule",{value:!0});const i=Si;i.__exportStar(F8(),c),i.__exportStar($8(),c)}(P0)),P0}var d1;function z8(){if(d1)return An;d1=1,Object.defineProperty(An,"__esModule",{value:!0}),An.fromMiliseconds=An.toMiliseconds=void 0;const c=Bg();function i(h){return h*c.ONE_THOUSAND}An.toMiliseconds=i;function a(h){return Math.floor(h/c.ONE_THOUSAND)}return An.fromMiliseconds=a,An}var p1;function j8(){return p1||(p1=1,function(c){Object.defineProperty(c,"__esModule",{value:!0});const i=Si;i.__exportStar(L8(),c),i.__exportStar(z8(),c)}(R0)),R0}var ts={},v1;function H8(){if(v1)return ts;v1=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.Watch=void 0;class c{constructor(){this.timestamps=new Map}start(a){if(this.timestamps.has(a))throw new Error(`Watch already started for label: ${a}`);this.timestamps.set(a,{started:Date.now()})}stop(a){const h=this.get(a);if(typeof h.elapsed<"u")throw new Error(`Watch already stopped for label: ${a}`);const g=Date.now()-h.started;this.timestamps.set(a,{started:h.started,elapsed:g})}get(a){const h=this.timestamps.get(a);if(typeof h>"u")throw new Error(`No timestamp found for label: ${a}`);return h}elapsed(a){const h=this.get(a);return h.elapsed||Date.now()-h.started}}return ts.Watch=c,ts.default=c,ts}var C0={},Rs={},g1;function K8(){if(g1)return Rs;g1=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.IWatch=void 0;class c{}return Rs.IWatch=c,Rs}var m1;function V8(){return m1||(m1=1,function(c){Object.defineProperty(c,"__esModule",{value:!0}),Si.__exportStar(K8(),c)}(C0)),C0}(function(c){Object.defineProperty(c,"__esModule",{value:!0});const i=Si;i.__exportStar(j8(),c),i.__exportStar(H8(),c),i.__exportStar(V8(),c),i.__exportStar(Bg(),c)})(ae);var Hu={};Object.defineProperty(Hu,"__esModule",{value:!0});Hu.getWindowMetadata=void 0;const b1=Eu;function G8(){let c,i;try{c=b1.getDocumentOrThrow(),i=b1.getLocationOrThrow()}catch{return null}function a(){const S=c.getElementsByTagName("link"),E=[];for(let D=0;D<S.length;D++){const I=S[D],O=I.getAttribute("rel");if(O&&O.toLowerCase().indexOf("icon")>-1){const N=I.getAttribute("href");if(N)if(N.toLowerCase().indexOf("https:")===-1&&N.toLowerCase().indexOf("http:")===-1&&N.indexOf("//")!==0){let L=i.protocol+"//"+i.host;if(N.indexOf("/")===0)L+=N;else{const R=i.pathname.split("/");R.pop();const B=R.join("/");L+=B+"/"+N}E.push(L)}else if(N.indexOf("//")===0){const L=i.protocol+N;E.push(L)}else E.push(N)}}return E}function h(...S){const E=c.getElementsByTagName("meta");for(let D=0;D<E.length;D++){const I=E[D],O=["itemprop","property","name"].map(N=>I.getAttribute(N)).filter(N=>N?S.includes(N):!1);if(O.length&&O){const N=I.getAttribute("content");if(N)return N}}return""}function g(){let S=h("name","og:site_name","og:title","twitter:title");return S||(S=c.title),S}function s(){return h("description","og:description","twitter:description","keywords")}const x=g(),w=s(),_=i.origin,M=a();return{description:w,url:_,icons:M,name:x}}Hu.getWindowMetadata=G8;var W8={},Ku=function(c,i){for(var a={},h=Object.keys(c),g=Array.isArray(i),s=0;s<h.length;s++){var x=h[s],w=c[x];(g?i.indexOf(x)!==-1:i(x,w,c))&&(a[x]=w)}return a};(function(c){const i=wu,a=_u,h=yu,g=Ku,s=R=>R==null,x=Symbol("encodeFragmentIdentifier");function w(R){switch(R.arrayFormat){case"index":return B=>(T,U)=>{const k=T.length;return U===void 0||R.skipNull&&U===null||R.skipEmptyString&&U===""?T:U===null?[...T,[b(B,R),"[",k,"]"].join("")]:[...T,[b(B,R),"[",b(k,R),"]=",b(U,R)].join("")]};case"bracket":return B=>(T,U)=>U===void 0||R.skipNull&&U===null||R.skipEmptyString&&U===""?T:U===null?[...T,[b(B,R),"[]"].join("")]:[...T,[b(B,R),"[]=",b(U,R)].join("")];case"colon-list-separator":return B=>(T,U)=>U===void 0||R.skipNull&&U===null||R.skipEmptyString&&U===""?T:U===null?[...T,[b(B,R),":list="].join("")]:[...T,[b(B,R),":list=",b(U,R)].join("")];case"comma":case"separator":case"bracket-separator":{const B=R.arrayFormat==="bracket-separator"?"[]=":"=";return T=>(U,k)=>k===void 0||R.skipNull&&k===null||R.skipEmptyString&&k===""?U:(k=k===null?"":k,U.length===0?[[b(T,R),B,b(k,R)].join("")]:[[U,b(k,R)].join(R.arrayFormatSeparator)])}default:return B=>(T,U)=>U===void 0||R.skipNull&&U===null||R.skipEmptyString&&U===""?T:U===null?[...T,b(B,R)]:[...T,[b(B,R),"=",b(U,R)].join("")]}}function _(R){let B;switch(R.arrayFormat){case"index":return(T,U,k)=>{if(B=/\[(\d*)\]$/.exec(T),T=T.replace(/\[\d*\]$/,""),!B){k[T]=U;return}k[T]===void 0&&(k[T]={}),k[T][B[1]]=U};case"bracket":return(T,U,k)=>{if(B=/(\[\])$/.exec(T),T=T.replace(/\[\]$/,""),!B){k[T]=U;return}if(k[T]===void 0){k[T]=[U];return}k[T]=[].concat(k[T],U)};case"colon-list-separator":return(T,U,k)=>{if(B=/(:list)$/.exec(T),T=T.replace(/:list$/,""),!B){k[T]=U;return}if(k[T]===void 0){k[T]=[U];return}k[T]=[].concat(k[T],U)};case"comma":case"separator":return(T,U,k)=>{const P=typeof U=="string"&&U.includes(R.arrayFormatSeparator),F=typeof U=="string"&&!P&&S(U,R).includes(R.arrayFormatSeparator);U=F?S(U,R):U;const G=P||F?U.split(R.arrayFormatSeparator).map(nt=>S(nt,R)):U===null?U:S(U,R);k[T]=G};case"bracket-separator":return(T,U,k)=>{const P=/(\[\])$/.test(T);if(T=T.replace(/\[\]$/,""),!P){k[T]=U&&S(U,R);return}const F=U===null?[]:U.split(R.arrayFormatSeparator).map(G=>S(G,R));if(k[T]===void 0){k[T]=F;return}k[T]=[].concat(k[T],F)};default:return(T,U,k)=>{if(k[T]===void 0){k[T]=U;return}k[T]=[].concat(k[T],U)}}}function M(R){if(typeof R!="string"||R.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function b(R,B){return B.encode?B.strict?i(R):encodeURIComponent(R):R}function S(R,B){return B.decode?a(R):R}function E(R){return Array.isArray(R)?R.sort():typeof R=="object"?E(Object.keys(R)).sort((B,T)=>Number(B)-Number(T)).map(B=>R[B]):R}function D(R){const B=R.indexOf("#");return B!==-1&&(R=R.slice(0,B)),R}function I(R){let B="";const T=R.indexOf("#");return T!==-1&&(B=R.slice(T)),B}function O(R){R=D(R);const B=R.indexOf("?");return B===-1?"":R.slice(B+1)}function N(R,B){return B.parseNumbers&&!Number.isNaN(Number(R))&&typeof R=="string"&&R.trim()!==""?R=Number(R):B.parseBooleans&&R!==null&&(R.toLowerCase()==="true"||R.toLowerCase()==="false")&&(R=R.toLowerCase()==="true"),R}function L(R,B){B=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},B),M(B.arrayFormatSeparator);const T=_(B),U=Object.create(null);if(typeof R!="string"||(R=R.trim().replace(/^[?#&]/,""),!R))return U;for(const k of R.split("&")){if(k==="")continue;let[P,F]=h(B.decode?k.replace(/\+/g," "):k,"=");F=F===void 0?null:["comma","separator","bracket-separator"].includes(B.arrayFormat)?F:S(F,B),T(S(P,B),F,U)}for(const k of Object.keys(U)){const P=U[k];if(typeof P=="object"&&P!==null)for(const F of Object.keys(P))P[F]=N(P[F],B);else U[k]=N(P,B)}return B.sort===!1?U:(B.sort===!0?Object.keys(U).sort():Object.keys(U).sort(B.sort)).reduce((k,P)=>{const F=U[P];return F&&typeof F=="object"&&!Array.isArray(F)?k[P]=E(F):k[P]=F,k},Object.create(null))}c.extract=O,c.parse=L,c.stringify=(R,B)=>{if(!R)return"";B=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},B),M(B.arrayFormatSeparator);const T=F=>B.skipNull&&s(R[F])||B.skipEmptyString&&R[F]==="",U=w(B),k={};for(const F of Object.keys(R))T(F)||(k[F]=R[F]);const P=Object.keys(k);return B.sort!==!1&&P.sort(B.sort),P.map(F=>{const G=R[F];return G===void 0?"":G===null?b(F,B):Array.isArray(G)?G.length===0&&B.arrayFormat==="bracket-separator"?b(F,B)+"[]":G.reduce(U(F),[]).join("&"):b(F,B)+"="+b(G,B)}).filter(F=>F.length>0).join("&")},c.parseUrl=(R,B)=>{B=Object.assign({decode:!0},B);const[T,U]=h(R,"#");return Object.assign({url:T.split("?")[0]||"",query:L(O(R),B)},B&&B.parseFragmentIdentifier&&U?{fragmentIdentifier:S(U,B)}:{})},c.stringifyUrl=(R,B)=>{B=Object.assign({encode:!0,strict:!0,[x]:!0},B);const T=D(R.url).split("?")[0]||"",U=c.extract(R.url),k=c.parse(U,{sort:!1}),P=Object.assign(k,R.query);let F=c.stringify(P,B);F&&(F=`?${F}`);let G=I(R.url);return R.fragmentIdentifier&&(G=`#${B[x]?b(R.fragmentIdentifier,B):R.fragmentIdentifier}`),`${T}${F}${G}`},c.pick=(R,B,T)=>{T=Object.assign({parseFragmentIdentifier:!0,[x]:!1},T);const{url:U,query:k,fragmentIdentifier:P}=c.parseUrl(R,T);return c.stringifyUrl({url:U,query:g(k,B),fragmentIdentifier:P},T)},c.exclude=(R,B,T)=>{const U=Array.isArray(B)?k=>!B.includes(k):(k,P)=>!B(k,P);return c.pick(R,U,T)}})(W8);const Z8={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function J8(c,i=[]){const a=[];return Object.keys(c).forEach(h=>{if(i.length&&!i.includes(h))return;const g=c[h];a.push(...g.accounts)}),a}const Y8={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function X8(c,i){const{message:a,code:h}=Y8[c];return{message:i?`${a} ${i}`:a,code:h}}function ru(c,i){return Array.isArray(c)?typeof i<"u"&&c.length?c.every(i):!0:!1}var $o={},Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});function Q8(c){if(typeof c!="string")throw new Error(`Cannot safe json parse value of type ${typeof c}`);try{return JSON.parse(c)}catch{return c}}Ws.safeJsonParse=Q8;function tM(c){return typeof c=="string"?c:JSON.stringify(c,(i,a)=>typeof a>"u"?null:a)}Ws.safeJsonStringify=tM;var Ps={exports:{}},y1;function eM(){return y1||(y1=1,function(){let c;function i(){}c=i,c.prototype.getItem=function(a){return this.hasOwnProperty(a)?String(this[a]):null},c.prototype.setItem=function(a,h){this[a]=String(h)},c.prototype.removeItem=function(a){delete this[a]},c.prototype.clear=function(){const a=this;Object.keys(a).forEach(function(h){a[h]=void 0,delete a[h]})},c.prototype.key=function(a){return a=a||0,Object.keys(this)[a]},c.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Ee<"u"&&Ee.localStorage?Ps.exports=Ee.localStorage:typeof window<"u"&&window.localStorage?Ps.exports=window.localStorage:Ps.exports=new i}()),Ps.exports}var T0={},Os={},w1;function rM(){if(w1)return Os;w1=1,Object.defineProperty(Os,"__esModule",{value:!0}),Os.IKeyValueStorage=void 0;class c{}return Os.IKeyValueStorage=c,Os}var Cs={},_1;function iM(){if(_1)return Cs;_1=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.parseEntry=void 0;const c=Ws;function i(a){var h;return[a[0],c.safeJsonParse((h=a[1])!==null&&h!==void 0?h:"")]}return Cs.parseEntry=i,Cs}var M1;function nM(){return M1||(M1=1,function(c){Object.defineProperty(c,"__esModule",{value:!0});const i=Si;i.__exportStar(rM(),c),i.__exportStar(iM(),c)}(T0)),T0}Object.defineProperty($o,"__esModule",{value:!0});$o.KeyValueStorage=void 0;const es=Si,x1=Ws,sM=es.__importDefault(eM()),aM=nM();class Ng{constructor(){this.localStorage=sM.default}getKeys(){return es.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return es.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(aM.parseEntry)})}getItem(i){return es.__awaiter(this,void 0,void 0,function*(){const a=this.localStorage.getItem(i);if(a!==null)return x1.safeJsonParse(a)})}setItem(i,a){return es.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(i,x1.safeJsonStringify(a))})}removeItem(i){return es.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(i)})}}$o.KeyValueStorage=Ng;var oM=$o.default=Ng,Zs={},Ts={},B0={},Bs={};class Tn{}const fM=Object.freeze(Object.defineProperty({__proto__:null,IEvents:Tn},Symbol.toStringTag,{value:"Module"})),hM=e5(fM);var E1;function uM(){if(E1)return Bs;E1=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.IHeartBeat=void 0;const c=hM;class i extends c.IEvents{constructor(h){super()}}return Bs.IHeartBeat=i,Bs}var S1;function qg(){return S1||(S1=1,function(c){Object.defineProperty(c,"__esModule",{value:!0}),Si.__exportStar(uM(),c)}(B0)),B0}var N0={},In={},A1;function cM(){if(A1)return In;A1=1,Object.defineProperty(In,"__esModule",{value:!0}),In.HEARTBEAT_EVENTS=In.HEARTBEAT_INTERVAL=void 0;const c=ae;return In.HEARTBEAT_INTERVAL=c.FIVE_SECONDS,In.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},In}var D1;function Ug(){return D1||(D1=1,function(c){Object.defineProperty(c,"__esModule",{value:!0}),Si.__exportStar(cM(),c)}(N0)),N0}var I1;function lM(){if(I1)return Ts;I1=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.HeartBeat=void 0;const c=Si,i=ri,a=ae,h=qg(),g=Ug();class s extends h.IHeartBeat{constructor(w){super(w),this.events=new i.EventEmitter,this.interval=g.HEARTBEAT_INTERVAL,this.interval=(w==null?void 0:w.interval)||g.HEARTBEAT_INTERVAL}static init(w){return c.__awaiter(this,void 0,void 0,function*(){const _=new s(w);return yield _.init(),_})}init(){return c.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(w,_){this.events.on(w,_)}once(w,_){this.events.once(w,_)}off(w,_){this.events.off(w,_)}removeListener(w,_){this.events.removeListener(w,_)}initialize(){return c.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),a.toMiliseconds(this.interval))})}pulse(){this.events.emit(g.HEARTBEAT_EVENTS.pulse)}}return Ts.HeartBeat=s,Ts}(function(c){Object.defineProperty(c,"__esModule",{value:!0});const i=Si;i.__exportStar(lM(),c),i.__exportStar(qg(),c),i.__exportStar(Ug(),c)})(Zs);var Pe={},q0,R1;function dM(){if(R1)return q0;R1=1;function c(a){try{return JSON.stringify(a)}catch{return'"[Circular]"'}}q0=i;function i(a,h,g){var s=g&&g.stringify||c,x=1;if(typeof a=="object"&&a!==null){var w=h.length+x;if(w===1)return a;var _=new Array(w);_[0]=s(a);for(var M=1;M<w;M++)_[M]=s(h[M]);return _.join(" ")}if(typeof a!="string")return a;var b=h.length;if(b===0)return a;for(var S="",E=1-x,D=-1,I=a&&a.length||0,O=0;O<I;){if(a.charCodeAt(O)===37&&O+1<I){switch(D=D>-1?D:0,a.charCodeAt(O+1)){case 100:case 102:if(E>=b||h[E]==null)break;D<O&&(S+=a.slice(D,O)),S+=Number(h[E]),D=O+2,O++;break;case 105:if(E>=b||h[E]==null)break;D<O&&(S+=a.slice(D,O)),S+=Math.floor(Number(h[E])),D=O+2,O++;break;case 79:case 111:case 106:if(E>=b||h[E]===void 0)break;D<O&&(S+=a.slice(D,O));var N=typeof h[E];if(N==="string"){S+="'"+h[E]+"'",D=O+2,O++;break}if(N==="function"){S+=h[E].name||"<anonymous>",D=O+2,O++;break}S+=s(h[E]),D=O+2,O++;break;case 115:if(E>=b)break;D<O&&(S+=a.slice(D,O)),S+=String(h[E]),D=O+2,O++;break;case 37:D<O&&(S+=a.slice(D,O)),S+="%",D=O+2,O++,E--;break}++E}++O}return D===-1?a:(D<I&&(S+=a.slice(D)),S)}return q0}var U0,P1;function pM(){if(P1)return U0;P1=1;const c=dM();U0=g;const i=U().console||{},a={mapHttpRequest:I,mapHttpResponse:I,wrapRequestSerializer:O,wrapResponseSerializer:O,wrapErrorSerializer:O,req:I,res:I,err:E};function h(k,P){return Array.isArray(k)?k.filter(function(G){return G!=="!stdSerializers.err"}):k===!0?Object.keys(P):!1}function g(k){k=k||{},k.browser=k.browser||{};const P=k.browser.transmit;if(P&&typeof P.send!="function")throw Error("pino: transmit option must have a send function");const F=k.browser.write||i;k.browser.write&&(k.browser.asObject=!0);const G=k.serializers||{},nt=h(k.browser.serialize,G);let v=k.browser.serialize;Array.isArray(k.browser.serialize)&&k.browser.serialize.indexOf("!stdSerializers.err")>-1&&(v=!1);const t=["error","fatal","warn","info","debug","trace"];typeof F=="function"&&(F.error=F.fatal=F.warn=F.info=F.debug=F.trace=F),k.enabled===!1&&(k.level="silent");const r=k.level||"info",n=Object.create(F);n.log||(n.log=N),Object.defineProperty(n,"levelVal",{get:d}),Object.defineProperty(n,"level",{get:m,set:y});const o={transmit:P,serialize:nt,asObject:k.browser.asObject,levels:t,timestamp:D(k)};n.levels=g.levels,n.level=r,n.setMaxListeners=n.getMaxListeners=n.emit=n.addListener=n.on=n.prependListener=n.once=n.prependOnceListener=n.removeListener=n.removeAllListeners=n.listeners=n.listenerCount=n.eventNames=n.write=n.flush=N,n.serializers=G,n._serialize=nt,n._stdErrSerialize=v,n.child=u,P&&(n._logEvent=S());function d(){return this.level==="silent"?1/0:this.levels.values[this.level]}function m(){return this._level}function y(e){if(e!=="silent"&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,s(o,n,"error","log"),s(o,n,"fatal","error"),s(o,n,"warn","error"),s(o,n,"info","log"),s(o,n,"debug","log"),s(o,n,"trace","log")}function u(e,l){if(!e)throw new Error("missing bindings for child Pino");l=l||{},nt&&e.serializers&&(l.serializers=e.serializers);const z=l.serializers;if(nt&&z){var $=Object.assign({},G,z),H=k.browser.serialize===!0?Object.keys($):nt;delete e.serializers,_([e],H,$,this._stdErrSerialize)}function W(tt){this._childLevel=(tt._childLevel|0)+1,this.error=M(tt,e,"error"),this.fatal=M(tt,e,"fatal"),this.warn=M(tt,e,"warn"),this.info=M(tt,e,"info"),this.debug=M(tt,e,"debug"),this.trace=M(tt,e,"trace"),$&&(this.serializers=$,this._serialize=H),P&&(this._logEvent=S([].concat(tt._logEvent.bindings,e)))}return W.prototype=this,new W(this)}return n}g.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},g.stdSerializers=a,g.stdTimeFunctions=Object.assign({},{nullTime:L,epochTime:R,unixTime:B,isoTime:T});function s(k,P,F,G){const nt=Object.getPrototypeOf(P);P[F]=P.levelVal>P.levels.values[F]?N:nt[F]?nt[F]:i[F]||i[G]||N,x(k,P,F)}function x(k,P,F){!k.transmit&&P[F]===N||(P[F]=function(G){return function(){const v=k.timestamp(),t=new Array(arguments.length),r=Object.getPrototypeOf&&Object.getPrototypeOf(this)===i?i:this;for(var n=0;n<t.length;n++)t[n]=arguments[n];if(k.serialize&&!k.asObject&&_(t,this._serialize,this.serializers,this._stdErrSerialize),k.asObject?G.call(r,w(this,F,t,v)):G.apply(r,t),k.transmit){const o=k.transmit.level||P.level,d=g.levels.values[o],m=g.levels.values[F];if(m<d)return;b(this,{ts:v,methodLevel:F,methodValue:m,transmitLevel:o,transmitValue:g.levels.values[k.transmit.level||P.level],send:k.transmit.send,val:P.levelVal},t)}}}(P[F]))}function w(k,P,F,G){k._serialize&&_(F,k._serialize,k.serializers,k._stdErrSerialize);const nt=F.slice();let v=nt[0];const t={};G&&(t.time=G),t.level=g.levels.values[P];let r=(k._childLevel|0)+1;if(r<1&&(r=1),v!==null&&typeof v=="object"){for(;r--&&typeof nt[0]=="object";)Object.assign(t,nt.shift());v=nt.length?c(nt.shift(),nt):void 0}else typeof v=="string"&&(v=c(nt.shift(),nt));return v!==void 0&&(t.msg=v),t}function _(k,P,F,G){for(const nt in k)if(G&&k[nt]instanceof Error)k[nt]=g.stdSerializers.err(k[nt]);else if(typeof k[nt]=="object"&&!Array.isArray(k[nt]))for(const v in k[nt])P&&P.indexOf(v)>-1&&v in F&&(k[nt][v]=F[v](k[nt][v]))}function M(k,P,F){return function(){const G=new Array(1+arguments.length);G[0]=P;for(var nt=1;nt<G.length;nt++)G[nt]=arguments[nt-1];return k[F].apply(this,G)}}function b(k,P,F){const G=P.send,nt=P.ts,v=P.methodLevel,t=P.methodValue,r=P.val,n=k._logEvent.bindings;_(F,k._serialize||Object.keys(k.serializers),k.serializers,k._stdErrSerialize===void 0?!0:k._stdErrSerialize),k._logEvent.ts=nt,k._logEvent.messages=F.filter(function(o){return n.indexOf(o)===-1}),k._logEvent.level.label=v,k._logEvent.level.value=t,G(v,k._logEvent,r),k._logEvent=S(n)}function S(k){return{ts:0,messages:[],bindings:k||[],level:{label:"",value:0}}}function E(k){const P={type:k.constructor.name,msg:k.message,stack:k.stack};for(const F in k)P[F]===void 0&&(P[F]=k[F]);return P}function D(k){return typeof k.timestamp=="function"?k.timestamp:k.timestamp===!1?L:R}function I(){return{}}function O(k){return k}function N(){}function L(){return!1}function R(){return Date.now()}function B(){return Math.round(Date.now()/1e3)}function T(){return new Date(Date.now()).toISOString()}function U(){function k(P){return typeof P<"u"&&P}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return k(self)||k(window)||k(this)||{}}}return U0}var Rn={},O1;function kg(){return O1||(O1=1,Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.PINO_CUSTOM_CONTEXT_KEY=Rn.PINO_LOGGER_DEFAULTS=void 0,Rn.PINO_LOGGER_DEFAULTS={level:"info"},Rn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Rn}var Ur={},C1;function vM(){if(C1)return Ur;C1=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.generateChildLogger=Ur.formatChildLoggerContext=Ur.getLoggerContext=Ur.setBrowserLoggerContext=Ur.getBrowserLoggerContext=Ur.getDefaultLoggerOptions=void 0;const c=kg();function i(w){return Object.assign(Object.assign({},w),{level:(w==null?void 0:w.level)||c.PINO_LOGGER_DEFAULTS.level})}Ur.getDefaultLoggerOptions=i;function a(w,_=c.PINO_CUSTOM_CONTEXT_KEY){return w[_]||""}Ur.getBrowserLoggerContext=a;function h(w,_,M=c.PINO_CUSTOM_CONTEXT_KEY){return w[M]=_,w}Ur.setBrowserLoggerContext=h;function g(w,_=c.PINO_CUSTOM_CONTEXT_KEY){let M="";return typeof w.bindings>"u"?M=a(w,_):M=w.bindings().context||"",M}Ur.getLoggerContext=g;function s(w,_,M=c.PINO_CUSTOM_CONTEXT_KEY){const b=g(w,M);return b.trim()?`${b}/${_}`:_}Ur.formatChildLoggerContext=s;function x(w,_,M=c.PINO_CUSTOM_CONTEXT_KEY){const b=s(w,_,M),S=w.child({context:b});return h(S,b,M)}return Ur.generateChildLogger=x,Ur}(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.pino=void 0;const i=Si,a=i.__importDefault(pM());Object.defineProperty(c,"pino",{enumerable:!0,get:function(){return a.default}}),i.__exportStar(kg(),c),i.__exportStar(vM(),c)})(Pe);class gM extends Tn{constructor(i){super(),this.opts=i,this.protocol="wc",this.version=2}}class mM extends Tn{constructor(i,a){super(),this.core=i,this.logger=a,this.records=new Map}}class bM{constructor(i,a){this.logger=i,this.core=a}}let yM=class extends Tn{constructor(i,a){super(),this.relayer=i,this.logger=a}},wM=class extends Tn{constructor(i){super()}},_M=class{constructor(i,a,h,g){this.core=i,this.logger=a,this.name=h}};class MM extends Tn{constructor(i,a){super(),this.relayer=i,this.logger=a}}class xM extends Tn{constructor(i,a){super(),this.core=i,this.logger=a}}let EM=class{constructor(i,a){this.projectId=i,this.logger=a}},SM=class{constructor(i){this.opts=i,this.protocol="wc",this.version=2}},AM=class{constructor(i){this.client=i}};const DM=c=>JSON.stringify(c,(i,a)=>typeof a=="bigint"?a.toString()+"n":a),IM=c=>{const i=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,a=c.replace(i,'$1"$2n"$3');return JSON.parse(a,(h,g)=>typeof g=="string"&&g.match(/^\d+n$/)?BigInt(g.substring(0,g.length-1)):g)};function Vu(c){if(typeof c!="string")throw new Error(`Cannot safe json parse value of type ${typeof c}`);try{return IM(c)}catch{return c}}function zs(c){return typeof c=="string"?c:DM(c)||""}var Gu={},Lg={};(function(c){Object.defineProperty(c,"__esModule",{value:!0});var i=ve,a=ii;c.DIGEST_LENGTH=64,c.BLOCK_SIZE=128;var h=function(){function w(){this.digestLength=c.DIGEST_LENGTH,this.blockSize=c.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return w.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},w.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},w.prototype.clean=function(){a.wipe(this._buffer),a.wipe(this._tempHi),a.wipe(this._tempLo),this.reset()},w.prototype.update=function(_,M){if(M===void 0&&(M=_.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var b=0;if(this._bytesHashed+=M,this._bufferLength>0){for(;this._bufferLength<c.BLOCK_SIZE&&M>0;)this._buffer[this._bufferLength++]=_[b++],M--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(M>=this.blockSize&&(b=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,_,b,M),M%=this.blockSize);M>0;)this._buffer[this._bufferLength++]=_[b++],M--;return this},w.prototype.finish=function(_){if(!this._finished){var M=this._bytesHashed,b=this._bufferLength,S=M/536870912|0,E=M<<3,D=M%128<112?128:256;this._buffer[b]=128;for(var I=b+1;I<D-8;I++)this._buffer[I]=0;i.writeUint32BE(S,this._buffer,D-8),i.writeUint32BE(E,this._buffer,D-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,D),this._finished=!0}for(var I=0;I<this.digestLength/8;I++)i.writeUint32BE(this._stateHi[I],_,I*8),i.writeUint32BE(this._stateLo[I],_,I*8+4);return this},w.prototype.digest=function(){var _=new Uint8Array(this.digestLength);return this.finish(_),_},w.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},w.prototype.restoreState=function(_){return this._stateHi.set(_.stateHi),this._stateLo.set(_.stateLo),this._bufferLength=_.bufferLength,_.buffer&&this._buffer.set(_.buffer),this._bytesHashed=_.bytesHashed,this._finished=!1,this},w.prototype.cleanSavedState=function(_){a.wipe(_.stateHi),a.wipe(_.stateLo),_.buffer&&a.wipe(_.buffer),_.bufferLength=0,_.bytesHashed=0},w}();c.SHA512=h;var g=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(w,_,M,b,S,E,D){for(var I=M[0],O=M[1],N=M[2],L=M[3],R=M[4],B=M[5],T=M[6],U=M[7],k=b[0],P=b[1],F=b[2],G=b[3],nt=b[4],v=b[5],t=b[6],r=b[7],n,o,d,m,y,u,e,l;D>=128;){for(var z=0;z<16;z++){var $=8*z+E;w[z]=i.readUint32BE(S,$),_[z]=i.readUint32BE(S,$+4)}for(var z=0;z<80;z++){var H=I,W=O,tt=N,Z=L,et=R,K=B,C=T,Q=U,rt=k,st=P,Yt=F,gt=G,mt=nt,ee=v,_t=t,Mt=r;if(n=U,o=r,y=o&65535,u=o>>>16,e=n&65535,l=n>>>16,n=(R>>>14|nt<<32-14)^(R>>>18|nt<<32-18)^(nt>>>41-32|R<<32-(41-32)),o=(nt>>>14|R<<32-14)^(nt>>>18|R<<32-18)^(R>>>41-32|nt<<32-(41-32)),y+=o&65535,u+=o>>>16,e+=n&65535,l+=n>>>16,n=R&B^~R&T,o=nt&v^~nt&t,y+=o&65535,u+=o>>>16,e+=n&65535,l+=n>>>16,n=g[z*2],o=g[z*2+1],y+=o&65535,u+=o>>>16,e+=n&65535,l+=n>>>16,n=w[z%16],o=_[z%16],y+=o&65535,u+=o>>>16,e+=n&65535,l+=n>>>16,u+=y>>>16,e+=u>>>16,l+=e>>>16,d=e&65535|l<<16,m=y&65535|u<<16,n=d,o=m,y=o&65535,u=o>>>16,e=n&65535,l=n>>>16,n=(I>>>28|k<<32-28)^(k>>>34-32|I<<32-(34-32))^(k>>>39-32|I<<32-(39-32)),o=(k>>>28|I<<32-28)^(I>>>34-32|k<<32-(34-32))^(I>>>39-32|k<<32-(39-32)),y+=o&65535,u+=o>>>16,e+=n&65535,l+=n>>>16,n=I&O^I&N^O&N,o=k&P^k&F^P&F,y+=o&65535,u+=o>>>16,e+=n&65535,l+=n>>>16,u+=y>>>16,e+=u>>>16,l+=e>>>16,Q=e&65535|l<<16,Mt=y&65535|u<<16,n=Z,o=gt,y=o&65535,u=o>>>16,e=n&65535,l=n>>>16,n=d,o=m,y+=o&65535,u+=o>>>16,e+=n&65535,l+=n>>>16,u+=y>>>16,e+=u>>>16,l+=e>>>16,Z=e&65535|l<<16,gt=y&65535|u<<16,O=H,N=W,L=tt,R=Z,B=et,T=K,U=C,I=Q,P=rt,F=st,G=Yt,nt=gt,v=mt,t=ee,r=_t,k=Mt,z%16===15)for(var $=0;$<16;$++)n=w[$],o=_[$],y=o&65535,u=o>>>16,e=n&65535,l=n>>>16,n=w[($+9)%16],o=_[($+9)%16],y+=o&65535,u+=o>>>16,e+=n&65535,l+=n>>>16,d=w[($+1)%16],m=_[($+1)%16],n=(d>>>1|m<<32-1)^(d>>>8|m<<32-8)^d>>>7,o=(m>>>1|d<<32-1)^(m>>>8|d<<32-8)^(m>>>7|d<<32-7),y+=o&65535,u+=o>>>16,e+=n&65535,l+=n>>>16,d=w[($+14)%16],m=_[($+14)%16],n=(d>>>19|m<<32-19)^(m>>>61-32|d<<32-(61-32))^d>>>6,o=(m>>>19|d<<32-19)^(d>>>61-32|m<<32-(61-32))^(m>>>6|d<<32-6),y+=o&65535,u+=o>>>16,e+=n&65535,l+=n>>>16,u+=y>>>16,e+=u>>>16,l+=e>>>16,w[$]=e&65535|l<<16,_[$]=y&65535|u<<16}n=I,o=k,y=o&65535,u=o>>>16,e=n&65535,l=n>>>16,n=M[0],o=b[0],y+=o&65535,u+=o>>>16,e+=n&65535,l+=n>>>16,u+=y>>>16,e+=u>>>16,l+=e>>>16,M[0]=I=e&65535|l<<16,b[0]=k=y&65535|u<<16,n=O,o=P,y=o&65535,u=o>>>16,e=n&65535,l=n>>>16,n=M[1],o=b[1],y+=o&65535,u+=o>>>16,e+=n&65535,l+=n>>>16,u+=y>>>16,e+=u>>>16,l+=e>>>16,M[1]=O=e&65535|l<<16,b[1]=P=y&65535|u<<16,n=N,o=F,y=o&65535,u=o>>>16,e=n&65535,l=n>>>16,n=M[2],o=b[2],y+=o&65535,u+=o>>>16,e+=n&65535,l+=n>>>16,u+=y>>>16,e+=u>>>16,l+=e>>>16,M[2]=N=e&65535|l<<16,b[2]=F=y&65535|u<<16,n=L,o=G,y=o&65535,u=o>>>16,e=n&65535,l=n>>>16,n=M[3],o=b[3],y+=o&65535,u+=o>>>16,e+=n&65535,l+=n>>>16,u+=y>>>16,e+=u>>>16,l+=e>>>16,M[3]=L=e&65535|l<<16,b[3]=G=y&65535|u<<16,n=R,o=nt,y=o&65535,u=o>>>16,e=n&65535,l=n>>>16,n=M[4],o=b[4],y+=o&65535,u+=o>>>16,e+=n&65535,l+=n>>>16,u+=y>>>16,e+=u>>>16,l+=e>>>16,M[4]=R=e&65535|l<<16,b[4]=nt=y&65535|u<<16,n=B,o=v,y=o&65535,u=o>>>16,e=n&65535,l=n>>>16,n=M[5],o=b[5],y+=o&65535,u+=o>>>16,e+=n&65535,l+=n>>>16,u+=y>>>16,e+=u>>>16,l+=e>>>16,M[5]=B=e&65535|l<<16,b[5]=v=y&65535|u<<16,n=T,o=t,y=o&65535,u=o>>>16,e=n&65535,l=n>>>16,n=M[6],o=b[6],y+=o&65535,u+=o>>>16,e+=n&65535,l+=n>>>16,u+=y>>>16,e+=u>>>16,l+=e>>>16,M[6]=T=e&65535|l<<16,b[6]=t=y&65535|u<<16,n=U,o=r,y=o&65535,u=o>>>16,e=n&65535,l=n>>>16,n=M[7],o=b[7],y+=o&65535,u+=o>>>16,e+=n&65535,l+=n>>>16,u+=y>>>16,e+=u>>>16,l+=e>>>16,M[7]=U=e&65535|l<<16,b[7]=r=y&65535|u<<16,E+=128,D-=128}return E}function x(w){var _=new h;_.update(w);var M=_.digest();return _.clean(),M}c.hash=x})(Lg);(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.convertSecretKeyToX25519=c.convertPublicKeyToX25519=c.verify=c.sign=c.extractPublicKeyFromSecretKey=c.generateKeyPair=c.generateKeyPairFromSeed=c.SEED_LENGTH=c.SECRET_KEY_LENGTH=c.PUBLIC_KEY_LENGTH=c.SIGNATURE_LENGTH=void 0;const i=ss,a=Lg,h=ii;c.SIGNATURE_LENGTH=64,c.PUBLIC_KEY_LENGTH=32,c.SECRET_KEY_LENGTH=64,c.SEED_LENGTH=32;function g(Z){const et=new Float64Array(16);if(Z)for(let K=0;K<Z.length;K++)et[K]=Z[K];return et}const s=new Uint8Array(32);s[0]=9;const x=g(),w=g([1]),_=g([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),M=g([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),b=g([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),S=g([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),E=g([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function D(Z,et){for(let K=0;K<16;K++)Z[K]=et[K]|0}function I(Z){let et=1;for(let K=0;K<16;K++){let C=Z[K]+et+65535;et=Math.floor(C/65536),Z[K]=C-et*65536}Z[0]+=et-1+37*(et-1)}function O(Z,et,K){const C=~(K-1);for(let Q=0;Q<16;Q++){const rt=C&(Z[Q]^et[Q]);Z[Q]^=rt,et[Q]^=rt}}function N(Z,et){const K=g(),C=g();for(let Q=0;Q<16;Q++)C[Q]=et[Q];I(C),I(C),I(C);for(let Q=0;Q<2;Q++){K[0]=C[0]-65517;for(let st=1;st<15;st++)K[st]=C[st]-65535-(K[st-1]>>16&1),K[st-1]&=65535;K[15]=C[15]-32767-(K[14]>>16&1);const rt=K[15]>>16&1;K[14]&=65535,O(C,K,1-rt)}for(let Q=0;Q<16;Q++)Z[2*Q]=C[Q]&255,Z[2*Q+1]=C[Q]>>8}function L(Z,et){let K=0;for(let C=0;C<32;C++)K|=Z[C]^et[C];return(1&K-1>>>8)-1}function R(Z,et){const K=new Uint8Array(32),C=new Uint8Array(32);return N(K,Z),N(C,et),L(K,C)}function B(Z){const et=new Uint8Array(32);return N(et,Z),et[0]&1}function T(Z,et){for(let K=0;K<16;K++)Z[K]=et[2*K]+(et[2*K+1]<<8);Z[15]&=32767}function U(Z,et,K){for(let C=0;C<16;C++)Z[C]=et[C]+K[C]}function k(Z,et,K){for(let C=0;C<16;C++)Z[C]=et[C]-K[C]}function P(Z,et,K){let C,Q,rt=0,st=0,Yt=0,gt=0,mt=0,ee=0,_t=0,Mt=0,re=0,ut=0,pt=0,Xt=0,vt=0,lt=0,Qt=0,ht=0,dt=0,ie=0,ct=0,bt=0,ne=0,yt=0,wt=0,se=0,Bt=0,Ut=0,Fe=0,Nt=0,kt=0,ar=0,Lt=0,Et=K[0],pe=K[1],St=K[2],At=K[3],ge=K[4],xt=K[5],Pt=K[6],Me=K[7],Dt=K[8],Ot=K[9],ye=K[10],Rt=K[11],It=K[12],ue=K[13],Ct=K[14],Tt=K[15];C=et[0],rt+=C*Et,st+=C*pe,Yt+=C*St,gt+=C*At,mt+=C*ge,ee+=C*xt,_t+=C*Pt,Mt+=C*Me,re+=C*Dt,ut+=C*Ot,pt+=C*ye,Xt+=C*Rt,vt+=C*It,lt+=C*ue,Qt+=C*Ct,ht+=C*Tt,C=et[1],st+=C*Et,Yt+=C*pe,gt+=C*St,mt+=C*At,ee+=C*ge,_t+=C*xt,Mt+=C*Pt,re+=C*Me,ut+=C*Dt,pt+=C*Ot,Xt+=C*ye,vt+=C*Rt,lt+=C*It,Qt+=C*ue,ht+=C*Ct,dt+=C*Tt,C=et[2],Yt+=C*Et,gt+=C*pe,mt+=C*St,ee+=C*At,_t+=C*ge,Mt+=C*xt,re+=C*Pt,ut+=C*Me,pt+=C*Dt,Xt+=C*Ot,vt+=C*ye,lt+=C*Rt,Qt+=C*It,ht+=C*ue,dt+=C*Ct,ie+=C*Tt,C=et[3],gt+=C*Et,mt+=C*pe,ee+=C*St,_t+=C*At,Mt+=C*ge,re+=C*xt,ut+=C*Pt,pt+=C*Me,Xt+=C*Dt,vt+=C*Ot,lt+=C*ye,Qt+=C*Rt,ht+=C*It,dt+=C*ue,ie+=C*Ct,ct+=C*Tt,C=et[4],mt+=C*Et,ee+=C*pe,_t+=C*St,Mt+=C*At,re+=C*ge,ut+=C*xt,pt+=C*Pt,Xt+=C*Me,vt+=C*Dt,lt+=C*Ot,Qt+=C*ye,ht+=C*Rt,dt+=C*It,ie+=C*ue,ct+=C*Ct,bt+=C*Tt,C=et[5],ee+=C*Et,_t+=C*pe,Mt+=C*St,re+=C*At,ut+=C*ge,pt+=C*xt,Xt+=C*Pt,vt+=C*Me,lt+=C*Dt,Qt+=C*Ot,ht+=C*ye,dt+=C*Rt,ie+=C*It,ct+=C*ue,bt+=C*Ct,ne+=C*Tt,C=et[6],_t+=C*Et,Mt+=C*pe,re+=C*St,ut+=C*At,pt+=C*ge,Xt+=C*xt,vt+=C*Pt,lt+=C*Me,Qt+=C*Dt,ht+=C*Ot,dt+=C*ye,ie+=C*Rt,ct+=C*It,bt+=C*ue,ne+=C*Ct,yt+=C*Tt,C=et[7],Mt+=C*Et,re+=C*pe,ut+=C*St,pt+=C*At,Xt+=C*ge,vt+=C*xt,lt+=C*Pt,Qt+=C*Me,ht+=C*Dt,dt+=C*Ot,ie+=C*ye,ct+=C*Rt,bt+=C*It,ne+=C*ue,yt+=C*Ct,wt+=C*Tt,C=et[8],re+=C*Et,ut+=C*pe,pt+=C*St,Xt+=C*At,vt+=C*ge,lt+=C*xt,Qt+=C*Pt,ht+=C*Me,dt+=C*Dt,ie+=C*Ot,ct+=C*ye,bt+=C*Rt,ne+=C*It,yt+=C*ue,wt+=C*Ct,se+=C*Tt,C=et[9],ut+=C*Et,pt+=C*pe,Xt+=C*St,vt+=C*At,lt+=C*ge,Qt+=C*xt,ht+=C*Pt,dt+=C*Me,ie+=C*Dt,ct+=C*Ot,bt+=C*ye,ne+=C*Rt,yt+=C*It,wt+=C*ue,se+=C*Ct,Bt+=C*Tt,C=et[10],pt+=C*Et,Xt+=C*pe,vt+=C*St,lt+=C*At,Qt+=C*ge,ht+=C*xt,dt+=C*Pt,ie+=C*Me,ct+=C*Dt,bt+=C*Ot,ne+=C*ye,yt+=C*Rt,wt+=C*It,se+=C*ue,Bt+=C*Ct,Ut+=C*Tt,C=et[11],Xt+=C*Et,vt+=C*pe,lt+=C*St,Qt+=C*At,ht+=C*ge,dt+=C*xt,ie+=C*Pt,ct+=C*Me,bt+=C*Dt,ne+=C*Ot,yt+=C*ye,wt+=C*Rt,se+=C*It,Bt+=C*ue,Ut+=C*Ct,Fe+=C*Tt,C=et[12],vt+=C*Et,lt+=C*pe,Qt+=C*St,ht+=C*At,dt+=C*ge,ie+=C*xt,ct+=C*Pt,bt+=C*Me,ne+=C*Dt,yt+=C*Ot,wt+=C*ye,se+=C*Rt,Bt+=C*It,Ut+=C*ue,Fe+=C*Ct,Nt+=C*Tt,C=et[13],lt+=C*Et,Qt+=C*pe,ht+=C*St,dt+=C*At,ie+=C*ge,ct+=C*xt,bt+=C*Pt,ne+=C*Me,yt+=C*Dt,wt+=C*Ot,se+=C*ye,Bt+=C*Rt,Ut+=C*It,Fe+=C*ue,Nt+=C*Ct,kt+=C*Tt,C=et[14],Qt+=C*Et,ht+=C*pe,dt+=C*St,ie+=C*At,ct+=C*ge,bt+=C*xt,ne+=C*Pt,yt+=C*Me,wt+=C*Dt,se+=C*Ot,Bt+=C*ye,Ut+=C*Rt,Fe+=C*It,Nt+=C*ue,kt+=C*Ct,ar+=C*Tt,C=et[15],ht+=C*Et,dt+=C*pe,ie+=C*St,ct+=C*At,bt+=C*ge,ne+=C*xt,yt+=C*Pt,wt+=C*Me,se+=C*Dt,Bt+=C*Ot,Ut+=C*ye,Fe+=C*Rt,Nt+=C*It,kt+=C*ue,ar+=C*Ct,Lt+=C*Tt,rt+=38*dt,st+=38*ie,Yt+=38*ct,gt+=38*bt,mt+=38*ne,ee+=38*yt,_t+=38*wt,Mt+=38*se,re+=38*Bt,ut+=38*Ut,pt+=38*Fe,Xt+=38*Nt,vt+=38*kt,lt+=38*ar,Qt+=38*Lt,Q=1,C=rt+Q+65535,Q=Math.floor(C/65536),rt=C-Q*65536,C=st+Q+65535,Q=Math.floor(C/65536),st=C-Q*65536,C=Yt+Q+65535,Q=Math.floor(C/65536),Yt=C-Q*65536,C=gt+Q+65535,Q=Math.floor(C/65536),gt=C-Q*65536,C=mt+Q+65535,Q=Math.floor(C/65536),mt=C-Q*65536,C=ee+Q+65535,Q=Math.floor(C/65536),ee=C-Q*65536,C=_t+Q+65535,Q=Math.floor(C/65536),_t=C-Q*65536,C=Mt+Q+65535,Q=Math.floor(C/65536),Mt=C-Q*65536,C=re+Q+65535,Q=Math.floor(C/65536),re=C-Q*65536,C=ut+Q+65535,Q=Math.floor(C/65536),ut=C-Q*65536,C=pt+Q+65535,Q=Math.floor(C/65536),pt=C-Q*65536,C=Xt+Q+65535,Q=Math.floor(C/65536),Xt=C-Q*65536,C=vt+Q+65535,Q=Math.floor(C/65536),vt=C-Q*65536,C=lt+Q+65535,Q=Math.floor(C/65536),lt=C-Q*65536,C=Qt+Q+65535,Q=Math.floor(C/65536),Qt=C-Q*65536,C=ht+Q+65535,Q=Math.floor(C/65536),ht=C-Q*65536,rt+=Q-1+37*(Q-1),Q=1,C=rt+Q+65535,Q=Math.floor(C/65536),rt=C-Q*65536,C=st+Q+65535,Q=Math.floor(C/65536),st=C-Q*65536,C=Yt+Q+65535,Q=Math.floor(C/65536),Yt=C-Q*65536,C=gt+Q+65535,Q=Math.floor(C/65536),gt=C-Q*65536,C=mt+Q+65535,Q=Math.floor(C/65536),mt=C-Q*65536,C=ee+Q+65535,Q=Math.floor(C/65536),ee=C-Q*65536,C=_t+Q+65535,Q=Math.floor(C/65536),_t=C-Q*65536,C=Mt+Q+65535,Q=Math.floor(C/65536),Mt=C-Q*65536,C=re+Q+65535,Q=Math.floor(C/65536),re=C-Q*65536,C=ut+Q+65535,Q=Math.floor(C/65536),ut=C-Q*65536,C=pt+Q+65535,Q=Math.floor(C/65536),pt=C-Q*65536,C=Xt+Q+65535,Q=Math.floor(C/65536),Xt=C-Q*65536,C=vt+Q+65535,Q=Math.floor(C/65536),vt=C-Q*65536,C=lt+Q+65535,Q=Math.floor(C/65536),lt=C-Q*65536,C=Qt+Q+65535,Q=Math.floor(C/65536),Qt=C-Q*65536,C=ht+Q+65535,Q=Math.floor(C/65536),ht=C-Q*65536,rt+=Q-1+37*(Q-1),Z[0]=rt,Z[1]=st,Z[2]=Yt,Z[3]=gt,Z[4]=mt,Z[5]=ee,Z[6]=_t,Z[7]=Mt,Z[8]=re,Z[9]=ut,Z[10]=pt,Z[11]=Xt,Z[12]=vt,Z[13]=lt,Z[14]=Qt,Z[15]=ht}function F(Z,et){P(Z,et,et)}function G(Z,et){const K=g();let C;for(C=0;C<16;C++)K[C]=et[C];for(C=253;C>=0;C--)F(K,K),C!==2&&C!==4&&P(K,K,et);for(C=0;C<16;C++)Z[C]=K[C]}function nt(Z,et){const K=g();let C;for(C=0;C<16;C++)K[C]=et[C];for(C=250;C>=0;C--)F(K,K),C!==1&&P(K,K,et);for(C=0;C<16;C++)Z[C]=K[C]}function v(Z,et){const K=g(),C=g(),Q=g(),rt=g(),st=g(),Yt=g(),gt=g(),mt=g(),ee=g();k(K,Z[1],Z[0]),k(ee,et[1],et[0]),P(K,K,ee),U(C,Z[0],Z[1]),U(ee,et[0],et[1]),P(C,C,ee),P(Q,Z[3],et[3]),P(Q,Q,M),P(rt,Z[2],et[2]),U(rt,rt,rt),k(st,C,K),k(Yt,rt,Q),U(gt,rt,Q),U(mt,C,K),P(Z[0],st,Yt),P(Z[1],mt,gt),P(Z[2],gt,Yt),P(Z[3],st,mt)}function t(Z,et,K){for(let C=0;C<4;C++)O(Z[C],et[C],K)}function r(Z,et){const K=g(),C=g(),Q=g();G(Q,et[2]),P(K,et[0],Q),P(C,et[1],Q),N(Z,C),Z[31]^=B(K)<<7}function n(Z,et,K){D(Z[0],x),D(Z[1],w),D(Z[2],w),D(Z[3],x);for(let C=255;C>=0;--C){const Q=K[C/8|0]>>(C&7)&1;t(Z,et,Q),v(et,Z),v(Z,Z),t(Z,et,Q)}}function o(Z,et){const K=[g(),g(),g(),g()];D(K[0],b),D(K[1],S),D(K[2],w),P(K[3],b,S),n(Z,K,et)}function d(Z){if(Z.length!==c.SEED_LENGTH)throw new Error(`ed25519: seed must be ${c.SEED_LENGTH} bytes`);const et=(0,a.hash)(Z);et[0]&=248,et[31]&=127,et[31]|=64;const K=new Uint8Array(32),C=[g(),g(),g(),g()];o(C,et),r(K,C);const Q=new Uint8Array(64);return Q.set(Z),Q.set(K,32),{publicKey:K,secretKey:Q}}c.generateKeyPairFromSeed=d;function m(Z){const et=(0,i.randomBytes)(32,Z),K=d(et);return(0,h.wipe)(et),K}c.generateKeyPair=m;function y(Z){if(Z.length!==c.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${c.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(Z.subarray(32))}c.extractPublicKeyFromSecretKey=y;const u=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function e(Z,et){let K,C,Q,rt;for(C=63;C>=32;--C){for(K=0,Q=C-32,rt=C-12;Q<rt;++Q)et[Q]+=K-16*et[C]*u[Q-(C-32)],K=Math.floor((et[Q]+128)/256),et[Q]-=K*256;et[Q]+=K,et[C]=0}for(K=0,Q=0;Q<32;Q++)et[Q]+=K-(et[31]>>4)*u[Q],K=et[Q]>>8,et[Q]&=255;for(Q=0;Q<32;Q++)et[Q]-=K*u[Q];for(C=0;C<32;C++)et[C+1]+=et[C]>>8,Z[C]=et[C]&255}function l(Z){const et=new Float64Array(64);for(let K=0;K<64;K++)et[K]=Z[K];for(let K=0;K<64;K++)Z[K]=0;e(Z,et)}function z(Z,et){const K=new Float64Array(64),C=[g(),g(),g(),g()],Q=(0,a.hash)(Z.subarray(0,32));Q[0]&=248,Q[31]&=127,Q[31]|=64;const rt=new Uint8Array(64);rt.set(Q.subarray(32),32);const st=new a.SHA512;st.update(rt.subarray(32)),st.update(et);const Yt=st.digest();st.clean(),l(Yt),o(C,Yt),r(rt,C),st.reset(),st.update(rt.subarray(0,32)),st.update(Z.subarray(32)),st.update(et);const gt=st.digest();l(gt);for(let mt=0;mt<32;mt++)K[mt]=Yt[mt];for(let mt=0;mt<32;mt++)for(let ee=0;ee<32;ee++)K[mt+ee]+=gt[mt]*Q[ee];return e(rt.subarray(32),K),rt}c.sign=z;function $(Z,et){const K=g(),C=g(),Q=g(),rt=g(),st=g(),Yt=g(),gt=g();return D(Z[2],w),T(Z[1],et),F(Q,Z[1]),P(rt,Q,_),k(Q,Q,Z[2]),U(rt,Z[2],rt),F(st,rt),F(Yt,st),P(gt,Yt,st),P(K,gt,Q),P(K,K,rt),nt(K,K),P(K,K,Q),P(K,K,rt),P(K,K,rt),P(Z[0],K,rt),F(C,Z[0]),P(C,C,rt),R(C,Q)&&P(Z[0],Z[0],E),F(C,Z[0]),P(C,C,rt),R(C,Q)?-1:(B(Z[0])===et[31]>>7&&k(Z[0],x,Z[0]),P(Z[3],Z[0],Z[1]),0)}function H(Z,et,K){const C=new Uint8Array(32),Q=[g(),g(),g(),g()],rt=[g(),g(),g(),g()];if(K.length!==c.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${c.SIGNATURE_LENGTH} bytes`);if($(rt,Z))return!1;const st=new a.SHA512;st.update(K.subarray(0,32)),st.update(Z),st.update(et);const Yt=st.digest();return l(Yt),n(Q,rt,Yt),o(rt,K.subarray(32)),v(Q,rt),r(C,Q),!L(K,C)}c.verify=H;function W(Z){let et=[g(),g(),g(),g()];if($(et,Z))throw new Error("Ed25519: invalid public key");let K=g(),C=g(),Q=et[1];U(K,w,Q),k(C,w,Q),G(C,C),P(K,K,C);let rt=new Uint8Array(32);return N(rt,K),rt}c.convertPublicKeyToX25519=W;function tt(Z){const et=(0,a.hash)(Z.subarray(0,32));et[0]&=248,et[31]&=127,et[31]|=64;const K=new Uint8Array(et.subarray(0,32));return(0,h.wipe)(et),K}c.convertSecretKeyToX25519=tt})(Gu);const RM="EdDSA",PM="JWT",Fg=".",$g="base64url",OM="utf8",CM="utf8",TM=":",BM="did",NM="key",T1="base58btc",qM="z",UM="K36",kM=32;function Eo(c){return Fr(Gr(zs(c),OM),$g)}function zg(c){const i=Gr(UM,T1),a=qM+Fr(eu([i,c]),T1);return[BM,NM,a].join(TM)}function LM(c){return Fr(c,$g)}function FM(c){return Gr([Eo(c.header),Eo(c.payload)].join(Fg),CM)}function $M(c){return[Eo(c.header),Eo(c.payload),LM(c.signature)].join(Fg)}function B1(c=ss.randomBytes(kM)){return Gu.generateKeyPairFromSeed(c)}async function zM(c,i,a,h,g=ae.fromMiliseconds(Date.now())){const s={alg:RM,typ:PM},x=zg(h.publicKey),w=g+a,_={iss:x,sub:c,aud:i,iat:g,exp:w},M=FM({header:s,payload:_}),b=Gu.sign(h.secretKey,M);return $M({header:s,payload:_,signature:b})}var N1=globalThis&&globalThis.__spreadArray||function(c,i,a){if(a||arguments.length===2)for(var h=0,g=i.length,s;h<g;h++)(s||!(h in i))&&(s||(s=Array.prototype.slice.call(i,0,h)),s[h]=i[h]);return c.concat(s||Array.prototype.slice.call(i))},jM=function(){function c(i,a,h){this.name=i,this.version=a,this.os=h,this.type="browser"}return c}(),HM=function(){function c(i){this.version=i,this.type="node",this.name="node",this.os=ei.platform}return c}(),KM=function(){function c(i,a,h,g){this.name=i,this.version=a,this.os=h,this.bot=g,this.type="bot-device"}return c}(),VM=function(){function c(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return c}(),GM=function(){function c(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return c}(),WM=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,ZM=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,q1=3,JM=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",WM]],U1=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function YM(c){return c?k1(c):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new GM:typeof navigator<"u"?k1(navigator.userAgent):t9()}function XM(c){return c!==""&&JM.reduce(function(i,a){var h=a[0],g=a[1];if(i)return i;var s=g.exec(c);return!!s&&[h,s]},!1)}function k1(c){var i=XM(c);if(!i)return null;var a=i[0],h=i[1];if(a==="searchbot")return new VM;var g=h[1]&&h[1].split(".").join("_").split("_").slice(0,3);g?g.length<q1&&(g=N1(N1([],g,!0),e9(q1-g.length),!0)):g=[];var s=g.join("."),x=QM(c),w=ZM.exec(c);return w&&w[1]?new KM(a,s,x,w[1]):new jM(a,s,x)}function QM(c){for(var i=0,a=U1.length;i<a;i++){var h=U1[i],g=h[0],s=h[1],x=s.exec(c);if(x)return g}return null}function t9(){var c=typeof ei<"u"&&ei.version;return c?new HM(ei.version.slice(1)):null}function e9(c){for(var i=[],a=0;a<c;a++)i.push("0");return i}var Wu={};Object.defineProperty(Wu,"__esModule",{value:!0});var jg=Wu.getWindowMetadata=void 0;const L1=Eu;function r9(){let c,i;try{c=L1.getDocumentOrThrow(),i=L1.getLocationOrThrow()}catch{return null}function a(){const S=c.getElementsByTagName("link"),E=[];for(let D=0;D<S.length;D++){const I=S[D],O=I.getAttribute("rel");if(O&&O.toLowerCase().indexOf("icon")>-1){const N=I.getAttribute("href");if(N)if(N.toLowerCase().indexOf("https:")===-1&&N.toLowerCase().indexOf("http:")===-1&&N.indexOf("//")!==0){let L=i.protocol+"//"+i.host;if(N.indexOf("/")===0)L+=N;else{const R=i.pathname.split("/");R.pop();const B=R.join("/");L+=B+"/"+N}E.push(L)}else if(N.indexOf("//")===0){const L=i.protocol+N;E.push(L)}else E.push(N)}}return E}function h(...S){const E=c.getElementsByTagName("meta");for(let D=0;D<E.length;D++){const I=E[D],O=["itemprop","property","name"].map(N=>I.getAttribute(N)).filter(N=>N?S.includes(N):!1);if(O.length&&O){const N=I.getAttribute("content");if(N)return N}}return""}function g(){let S=h("name","og:site_name","og:title","twitter:title");return S||(S=c.title),S}function s(){return h("description","og:description","twitter:description","keywords")}const x=g(),w=s(),_=i.origin,M=a();return{description:w,url:_,icons:M,name:x}}jg=Wu.getWindowMetadata=r9;var js={};(function(c){const i=wu,a=_u,h=yu,g=Ku,s=R=>R==null,x=Symbol("encodeFragmentIdentifier");function w(R){switch(R.arrayFormat){case"index":return B=>(T,U)=>{const k=T.length;return U===void 0||R.skipNull&&U===null||R.skipEmptyString&&U===""?T:U===null?[...T,[b(B,R),"[",k,"]"].join("")]:[...T,[b(B,R),"[",b(k,R),"]=",b(U,R)].join("")]};case"bracket":return B=>(T,U)=>U===void 0||R.skipNull&&U===null||R.skipEmptyString&&U===""?T:U===null?[...T,[b(B,R),"[]"].join("")]:[...T,[b(B,R),"[]=",b(U,R)].join("")];case"colon-list-separator":return B=>(T,U)=>U===void 0||R.skipNull&&U===null||R.skipEmptyString&&U===""?T:U===null?[...T,[b(B,R),":list="].join("")]:[...T,[b(B,R),":list=",b(U,R)].join("")];case"comma":case"separator":case"bracket-separator":{const B=R.arrayFormat==="bracket-separator"?"[]=":"=";return T=>(U,k)=>k===void 0||R.skipNull&&k===null||R.skipEmptyString&&k===""?U:(k=k===null?"":k,U.length===0?[[b(T,R),B,b(k,R)].join("")]:[[U,b(k,R)].join(R.arrayFormatSeparator)])}default:return B=>(T,U)=>U===void 0||R.skipNull&&U===null||R.skipEmptyString&&U===""?T:U===null?[...T,b(B,R)]:[...T,[b(B,R),"=",b(U,R)].join("")]}}function _(R){let B;switch(R.arrayFormat){case"index":return(T,U,k)=>{if(B=/\[(\d*)\]$/.exec(T),T=T.replace(/\[\d*\]$/,""),!B){k[T]=U;return}k[T]===void 0&&(k[T]={}),k[T][B[1]]=U};case"bracket":return(T,U,k)=>{if(B=/(\[\])$/.exec(T),T=T.replace(/\[\]$/,""),!B){k[T]=U;return}if(k[T]===void 0){k[T]=[U];return}k[T]=[].concat(k[T],U)};case"colon-list-separator":return(T,U,k)=>{if(B=/(:list)$/.exec(T),T=T.replace(/:list$/,""),!B){k[T]=U;return}if(k[T]===void 0){k[T]=[U];return}k[T]=[].concat(k[T],U)};case"comma":case"separator":return(T,U,k)=>{const P=typeof U=="string"&&U.includes(R.arrayFormatSeparator),F=typeof U=="string"&&!P&&S(U,R).includes(R.arrayFormatSeparator);U=F?S(U,R):U;const G=P||F?U.split(R.arrayFormatSeparator).map(nt=>S(nt,R)):U===null?U:S(U,R);k[T]=G};case"bracket-separator":return(T,U,k)=>{const P=/(\[\])$/.test(T);if(T=T.replace(/\[\]$/,""),!P){k[T]=U&&S(U,R);return}const F=U===null?[]:U.split(R.arrayFormatSeparator).map(G=>S(G,R));if(k[T]===void 0){k[T]=F;return}k[T]=[].concat(k[T],F)};default:return(T,U,k)=>{if(k[T]===void 0){k[T]=U;return}k[T]=[].concat(k[T],U)}}}function M(R){if(typeof R!="string"||R.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function b(R,B){return B.encode?B.strict?i(R):encodeURIComponent(R):R}function S(R,B){return B.decode?a(R):R}function E(R){return Array.isArray(R)?R.sort():typeof R=="object"?E(Object.keys(R)).sort((B,T)=>Number(B)-Number(T)).map(B=>R[B]):R}function D(R){const B=R.indexOf("#");return B!==-1&&(R=R.slice(0,B)),R}function I(R){let B="";const T=R.indexOf("#");return T!==-1&&(B=R.slice(T)),B}function O(R){R=D(R);const B=R.indexOf("?");return B===-1?"":R.slice(B+1)}function N(R,B){return B.parseNumbers&&!Number.isNaN(Number(R))&&typeof R=="string"&&R.trim()!==""?R=Number(R):B.parseBooleans&&R!==null&&(R.toLowerCase()==="true"||R.toLowerCase()==="false")&&(R=R.toLowerCase()==="true"),R}function L(R,B){B=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},B),M(B.arrayFormatSeparator);const T=_(B),U=Object.create(null);if(typeof R!="string"||(R=R.trim().replace(/^[?#&]/,""),!R))return U;for(const k of R.split("&")){if(k==="")continue;let[P,F]=h(B.decode?k.replace(/\+/g," "):k,"=");F=F===void 0?null:["comma","separator","bracket-separator"].includes(B.arrayFormat)?F:S(F,B),T(S(P,B),F,U)}for(const k of Object.keys(U)){const P=U[k];if(typeof P=="object"&&P!==null)for(const F of Object.keys(P))P[F]=N(P[F],B);else U[k]=N(P,B)}return B.sort===!1?U:(B.sort===!0?Object.keys(U).sort():Object.keys(U).sort(B.sort)).reduce((k,P)=>{const F=U[P];return F&&typeof F=="object"&&!Array.isArray(F)?k[P]=E(F):k[P]=F,k},Object.create(null))}c.extract=O,c.parse=L,c.stringify=(R,B)=>{if(!R)return"";B=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},B),M(B.arrayFormatSeparator);const T=F=>B.skipNull&&s(R[F])||B.skipEmptyString&&R[F]==="",U=w(B),k={};for(const F of Object.keys(R))T(F)||(k[F]=R[F]);const P=Object.keys(k);return B.sort!==!1&&P.sort(B.sort),P.map(F=>{const G=R[F];return G===void 0?"":G===null?b(F,B):Array.isArray(G)?G.length===0&&B.arrayFormat==="bracket-separator"?b(F,B)+"[]":G.reduce(U(F),[]).join("&"):b(F,B)+"="+b(G,B)}).filter(F=>F.length>0).join("&")},c.parseUrl=(R,B)=>{B=Object.assign({decode:!0},B);const[T,U]=h(R,"#");return Object.assign({url:T.split("?")[0]||"",query:L(O(R),B)},B&&B.parseFragmentIdentifier&&U?{fragmentIdentifier:S(U,B)}:{})},c.stringifyUrl=(R,B)=>{B=Object.assign({encode:!0,strict:!0,[x]:!0},B);const T=D(R.url).split("?")[0]||"",U=c.extract(R.url),k=c.parse(U,{sort:!1}),P=Object.assign(k,R.query);let F=c.stringify(P,B);F&&(F=`?${F}`);let G=I(R.url);return R.fragmentIdentifier&&(G=`#${B[x]?b(R.fragmentIdentifier,B):R.fragmentIdentifier}`),`${T}${F}${G}`},c.pick=(R,B,T)=>{T=Object.assign({parseFragmentIdentifier:!0,[x]:!1},T);const{url:U,query:k,fragmentIdentifier:P}=c.parseUrl(R,T);return c.stringifyUrl({url:U,query:g(k,B),fragmentIdentifier:P},T)},c.exclude=(R,B,T)=>{const U=Array.isArray(B)?k=>!B.includes(k):(k,P)=>!B(k,P);return c.pick(R,U,T)}})(js);function Hg(c,i){return c.includes(":")?[c]:i.chains||[]}const Kg="base10",Lr="base16",iu="base64pad",Zu="utf8",Vg=0,Bn=1,i9=0,F1=1,nu=12,Ju=32;function n9(){const c=zu.generateKeyPair();return{privateKey:Fr(c.secretKey,Lr),publicKey:Fr(c.publicKey,Lr)}}function su(){const c=ss.randomBytes(Ju);return Fr(c,Lr)}function s9(c,i){const a=zu.sharedKey(Gr(c,Lr),Gr(i,Lr)),h=new t4(Lo.SHA256,a).expand(Ju);return Fr(h,Lr)}function a9(c){const i=Lo.hash(Gr(c,Lr));return Fr(i,Lr)}function is(c){const i=Lo.hash(Gr(c,Zu));return Fr(i,Lr)}function o9(c){return Gr(`${c}`,Kg)}function Js(c){return Number(Fr(c,Kg))}function f9(c){const i=o9(typeof c.type<"u"?c.type:Vg);if(Js(i)===Bn&&typeof c.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const a=typeof c.senderPublicKey<"u"?Gr(c.senderPublicKey,Lr):void 0,h=typeof c.iv<"u"?Gr(c.iv,Lr):ss.randomBytes(nu),g=new Au.ChaCha20Poly1305(Gr(c.symKey,Lr)).seal(h,Gr(c.message,Zu));return u9({type:i,sealed:g,iv:h,senderPublicKey:a})}function h9(c){const i=new Au.ChaCha20Poly1305(Gr(c.symKey,Lr)),{sealed:a,iv:h}=So(c.encoded),g=i.open(h,a);if(g===null)throw new Error("Failed to decrypt");return Fr(g,Zu)}function u9(c){if(Js(c.type)===Bn){if(typeof c.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Fr(eu([c.type,c.senderPublicKey,c.iv,c.sealed]),iu)}return Fr(eu([c.type,c.iv,c.sealed]),iu)}function So(c){const i=Gr(c,iu),a=i.slice(i9,F1),h=F1;if(Js(a)===Bn){const w=h+Ju,_=w+nu,M=i.slice(h,w),b=i.slice(w,_),S=i.slice(_);return{type:a,sealed:S,iv:b,senderPublicKey:M}}const g=h+nu,s=i.slice(h,g),x=i.slice(g);return{type:a,sealed:x,iv:s}}function c9(c,i){const a=So(c);return Gg({type:Js(a.type),senderPublicKey:typeof a.senderPublicKey<"u"?Fr(a.senderPublicKey,Lr):void 0,receiverPublicKey:i==null?void 0:i.receiverPublicKey})}function Gg(c){const i=(c==null?void 0:c.type)||Vg;if(i===Bn){if(typeof(c==null?void 0:c.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(c==null?void 0:c.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:i,senderPublicKey:c==null?void 0:c.senderPublicKey,receiverPublicKey:c==null?void 0:c.receiverPublicKey}}function $1(c){return c.type===Bn&&typeof c.senderPublicKey=="string"&&typeof c.receiverPublicKey=="string"}var l9=Object.defineProperty,z1=Object.getOwnPropertySymbols,d9=Object.prototype.hasOwnProperty,p9=Object.prototype.propertyIsEnumerable,j1=(c,i,a)=>i in c?l9(c,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[i]=a,H1=(c,i)=>{for(var a in i||(i={}))d9.call(i,a)&&j1(c,a,i[a]);if(z1)for(var a of z1(i))p9.call(i,a)&&j1(c,a,i[a]);return c};const v9="ReactNative",Pn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},g9="js";function Yu(){return typeof ei<"u"&&typeof ei.versions<"u"&&typeof ei.versions.node<"u"}function Wg(){return!l5()&&!!kv()&&navigator.product===v9}function Xu(){return!Yu()&&!!kv()}function Zg(){return Wg()?Pn.reactNative:Yu()?Pn.node:Xu()?Pn.browser:Pn.unknown}function m9(c,i){let a=js.parse(c);return a=H1(H1({},a),i),c=js.stringify(a),c}function b9(){return jg()||{name:"",description:"",url:"",icons:[""]}}function y9(){const c=YM();if(c===null)return"unknown";const i=c.os?c.os.replace(" ","").toLowerCase():"unknown";return c.type==="browser"?[i,c.name,c.version].join("-"):[i,c.version].join("-")}function w9(){var c;const i=Zg();return i===Pn.browser?[i,((c=d5())==null?void 0:c.host)||"unknown"].join(":"):i}function _9(c,i,a){const h=y9(),g=w9();return[[c,i].join("-"),[g9,a].join("-"),h,g].join("/")}function M9({protocol:c,version:i,relayUrl:a,sdkVersion:h,auth:g,projectId:s,useOnCloseEvent:x}){const w=a.split("?"),_=_9(c,i,h),M={auth:g,ua:_,projectId:s,useOnCloseEvent:x||void 0},b=m9(w[1]||"",M);return w[0]+"?"+b}function On(c,i){return c.filter(a=>i.includes(a)).length===c.length}function Jg(c){return Object.fromEntries(c.entries())}function Yg(c){return new Map(Object.entries(c))}function rs(c=ae.FIVE_MINUTES,i){const a=ae.toMiliseconds(c||ae.FIVE_MINUTES);let h,g,s;return{resolve:x=>{s&&h&&(clearTimeout(s),h(x))},reject:x=>{s&&g&&(clearTimeout(s),g(x))},done:()=>new Promise((x,w)=>{s=setTimeout(()=>{w(new Error(i))},a),h=x,g=w})}}function Ao(c,i,a){return new Promise(async(h,g)=>{const s=setTimeout(()=>g(new Error(a)),i);try{const x=await c;h(x)}catch(x){g(x)}clearTimeout(s)})}function Xg(c,i){if(typeof i=="string"&&i.startsWith(`${c}:`))return i;if(c.toLowerCase()==="topic"){if(typeof i!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${i}`}else if(c.toLowerCase()==="id"){if(typeof i!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${i}`}throw new Error(`Unknown expirer target type: ${c}`)}function x9(c){return Xg("topic",c)}function E9(c){return Xg("id",c)}function Qg(c){const[i,a]=c.split(":"),h={id:void 0,topic:void 0};if(i==="topic"&&typeof a=="string")h.topic=a;else if(i==="id"&&Number.isInteger(Number(a)))h.id=Number(a);else throw new Error(`Invalid target, expected id:number or topic:string, got ${i}:${a}`);return h}function Bi(c,i){return ae.fromMiliseconds((i||Date.now())+ae.toMiliseconds(c))}function nn(c){return Date.now()>=ae.toMiliseconds(c)}function wr(c,i){return`${c}${i?`:${i}`:""}`}async function S9({id:c,topic:i,wcDeepLink:a}){try{if(!a)return;const h=typeof a=="string"?JSON.parse(a):a;let g=h==null?void 0:h.href;if(typeof g!="string")return;g.endsWith("/")&&(g=g.slice(0,-1));const s=`${g}/wc?requestId=${c}&sessionTopic=${i}`,x=Zg();x===Pn.browser?window.open(s,"_self","noreferrer noopener"):x===Pn.reactNative&&typeof(sn==null?void 0:sn.Linking)<"u"&&await sn.Linking.openURL(s)}catch(h){console.error(h)}}const A9="irn";function au(c){return(c==null?void 0:c.relay)||{protocol:A9}}function yo(c){const i=Z8[c];if(typeof i>"u")throw new Error(`Relay Protocol not supported: ${c}`);return i}var D9=Object.defineProperty,K1=Object.getOwnPropertySymbols,I9=Object.prototype.hasOwnProperty,R9=Object.prototype.propertyIsEnumerable,V1=(c,i,a)=>i in c?D9(c,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[i]=a,P9=(c,i)=>{for(var a in i||(i={}))I9.call(i,a)&&V1(c,a,i[a]);if(K1)for(var a of K1(i))R9.call(i,a)&&V1(c,a,i[a]);return c};function O9(c,i="-"){const a={},h="relay"+i;return Object.keys(c).forEach(g=>{if(g.startsWith(h)){const s=g.replace(h,""),x=c[g];a[s]=x}}),a}function C9(c){const i=c.indexOf(":"),a=c.indexOf("?")!==-1?c.indexOf("?"):void 0,h=c.substring(0,i),g=c.substring(i+1,a).split("@"),s=typeof a<"u"?c.substring(a):"",x=js.parse(s);return{protocol:h,topic:T9(g[0]),version:parseInt(g[1],10),symKey:x.symKey,relay:O9(x)}}function T9(c){return c.startsWith("//")?c.substring(2):c}function B9(c,i="-"){const a="relay",h={};return Object.keys(c).forEach(g=>{const s=a+i+g;c[g]&&(h[s]=c[g])}),h}function N9(c){return`${c.protocol}:${c.topic}@${c.version}?`+js.stringify(P9({symKey:c.symKey},B9(c.relay)))}function os(c){const i=[];return c.forEach(a=>{const[h,g]=a.split(":");i.push(`${h}:${g}`)}),i}function q9(c){const i=[];return Object.values(c).forEach(a=>{i.push(...os(a.accounts))}),i}function U9(c,i){const a=[];return Object.values(c).forEach(h=>{os(h.accounts).includes(i)&&a.push(...h.methods)}),a}function k9(c,i){const a=[];return Object.values(c).forEach(h=>{os(h.accounts).includes(i)&&a.push(...h.events)}),a}function L9(c,i){const a=wo(c,i);if(a)throw new Error(a.message);const h={};for(const[g,s]of Object.entries(c))h[g]={methods:s.methods,events:s.events,chains:s.accounts.map(x=>`${x.split(":")[0]}:${x.split(":")[1]}`)};return h}const F9={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},$9={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Wt(c,i){const{message:a,code:h}=$9[c];return{message:i?`${a} ${i}`:a,code:h}}function Sr(c,i){const{message:a,code:h}=F9[c];return{message:i?`${a} ${i}`:a,code:h}}function Ys(c,i){return Array.isArray(c)?typeof i<"u"&&c.length?c.every(i):!0:!1}function Fs(c){return Object.getPrototypeOf(c)===Object.prototype&&Object.keys(c).length}function kr(c){return typeof c>"u"}function Ar(c,i){return i&&kr(c)?!0:typeof c=="string"&&!!c.trim().length}function Qu(c,i){return i&&kr(c)?!0:typeof c=="number"&&!isNaN(c)}function z9(c,i){const{requiredNamespaces:a}=i,h=Object.keys(c.namespaces),g=Object.keys(a);let s=!0;return On(g,h)?(h.forEach(x=>{const{accounts:w,methods:_,events:M}=c.namespaces[x],b=os(w),S=a[x];(!On(Hg(x,S),b)||!On(S.methods,_)||!On(S.events,M))&&(s=!1)}),s):!1}function tc(c){return Ar(c,!1)&&c.includes(":")?c.split(":").length===2:!1}function j9(c){if(Ar(c,!1)&&c.includes(":")){const i=c.split(":");if(i.length===3){const a=i[0]+":"+i[1];return!!i[2]&&tc(a)}}return!1}function H9(c){if(Ar(c,!1))try{return typeof new URL(c)<"u"}catch{return!1}return!1}function K9(c){var i;return(i=c==null?void 0:c.proposer)==null?void 0:i.publicKey}function V9(c){return c==null?void 0:c.topic}function G9(c,i){let a=null;return Ar(c==null?void 0:c.publicKey,!1)||(a=Wt("MISSING_OR_INVALID",`${i} controller public key should be a string`)),a}function G1(c){let i=!0;return Ys(c)?c.length&&(i=c.every(a=>Ar(a,!1))):i=!1,i}function W9(c,i,a){let h=null;return Ys(i)?i.forEach(g=>{h||(!tc(g)||!g.includes(c))&&(h=Sr("UNSUPPORTED_CHAINS",`${a}, chain ${g} should be a string and conform to "namespace:chainId" format`))}):h=Sr("UNSUPPORTED_CHAINS",`${a}, chains ${i} should be an array of strings conforming to "namespace:chainId" format`),h}function Z9(c,i){let a=null;return Object.entries(c).forEach(([h,g])=>{if(a)return;const s=W9(h,Hg(h,g),`${i} requiredNamespace`);s&&(a=s)}),a}function J9(c,i){let a=null;return Ys(c)?c.forEach(h=>{a||j9(h)||(a=Sr("UNSUPPORTED_ACCOUNTS",`${i}, account ${h} should be a string and conform to "namespace:chainId:address" format`))}):a=Sr("UNSUPPORTED_ACCOUNTS",`${i}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),a}function Y9(c,i){let a=null;return Object.values(c).forEach(h=>{if(a)return;const g=J9(h==null?void 0:h.accounts,`${i} namespace`);g&&(a=g)}),a}function X9(c,i){let a=null;return G1(c==null?void 0:c.methods)?G1(c==null?void 0:c.events)||(a=Sr("UNSUPPORTED_EVENTS",`${i}, events should be an array of strings or empty array for no events`)):a=Sr("UNSUPPORTED_METHODS",`${i}, methods should be an array of strings or empty array for no methods`),a}function tm(c,i){let a=null;return Object.values(c).forEach(h=>{if(a)return;const g=X9(h,`${i}, namespace`);g&&(a=g)}),a}function Q9(c,i,a){let h=null;if(c&&Fs(c)){const g=tm(c,i);g&&(h=g);const s=Z9(c,i);s&&(h=s)}else h=Wt("MISSING_OR_INVALID",`${i}, ${a} should be an object with data`);return h}function wo(c,i){let a=null;if(c&&Fs(c)){const h=tm(c,i);h&&(a=h);const g=Y9(c,i);g&&(a=g)}else a=Wt("MISSING_OR_INVALID",`${i}, namespaces should be an object with data`);return a}function em(c){return Ar(c.protocol,!0)}function t7(c,i){let a=!1;return i&&!c?a=!0:c&&Ys(c)&&c.length&&c.forEach(h=>{a=em(h)}),a}function e7(c){return typeof c=="number"}function Vr(c){return typeof c<"u"&&typeof c!==null}function r7(c){return!(!c||typeof c!="object"||!c.code||!Qu(c.code,!1)||!c.message||!Ar(c.message,!1))}function i7(c){return!(kr(c)||!Ar(c.method,!1))}function n7(c){return!(kr(c)||kr(c.result)&&kr(c.error)||!Qu(c.id,!1)||!Ar(c.jsonrpc,!1))}function s7(c){return!(kr(c)||!Ar(c.name,!1))}function W1(c,i){return!(!tc(i)||!q9(c).includes(i))}function a7(c,i,a){return Ar(a,!1)?U9(c,i).includes(a):!1}function o7(c,i,a){return Ar(a,!1)?k9(c,i).includes(a):!1}function Z1(c,i,a){let h=null;const g=f7(c),s=h7(i),x=Object.keys(g),w=Object.keys(s),_=J1(Object.keys(c)),M=J1(Object.keys(i)),b=_.filter(S=>!M.includes(S));return b.length&&(h=Wt("NON_CONFORMING_NAMESPACES",`${a} namespaces keys don't satisfy requiredNamespaces.
      Required: ${b.toString()}
      Received: ${Object.keys(i).toString()}`)),On(x,w)||(h=Wt("NON_CONFORMING_NAMESPACES",`${a} namespaces chains don't satisfy required namespaces.
      Required: ${x.toString()}
      Approved: ${w.toString()}`)),Object.keys(i).forEach(S=>{if(!S.includes(":")||h)return;const E=os(i[S].accounts);E.includes(S)||(h=Wt("NON_CONFORMING_NAMESPACES",`${a} namespaces accounts don't satisfy namespace accounts for ${S}
        Required: ${S}
        Approved: ${E.toString()}`))}),x.forEach(S=>{h||(On(g[S].methods,s[S].methods)?On(g[S].events,s[S].events)||(h=Wt("NON_CONFORMING_NAMESPACES",`${a} namespaces events don't satisfy namespace events for ${S}`)):h=Wt("NON_CONFORMING_NAMESPACES",`${a} namespaces methods don't satisfy namespace methods for ${S}`))}),h}function f7(c){const i={};return Object.keys(c).forEach(a=>{var h;a.includes(":")?i[a]=c[a]:(h=c[a].chains)==null||h.forEach(g=>{i[g]={methods:c[a].methods,events:c[a].events}})}),i}function J1(c){return[...new Set(c.map(i=>i.includes(":")?i.split(":")[0]:i))]}function h7(c){const i={};return Object.keys(c).forEach(a=>{if(a.includes(":"))i[a]=c[a];else{const h=os(c[a].accounts);h==null||h.forEach(g=>{i[g]={accounts:c[a].accounts.filter(s=>s.includes(`${g}:`)),methods:c[a].methods,events:c[a].events}})}}),i}function u7(c,i){return Qu(c,!1)&&c<=i.max&&c>=i.min}class hn extends g5{constructor(i){super(i),this.events=new ri.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(i),this.connection.connected&&this.registerEventListeners()}async connect(i=this.connection){await this.open(i)}async disconnect(){await this.close()}on(i,a){this.events.on(i,a)}once(i,a){this.events.once(i,a)}off(i,a){this.events.off(i,a)}removeListener(i,a){this.events.removeListener(i,a)}async request(i,a){return this.requestStrict(Io(i.method,i.params||[],i.id||Mu().toString()),a)}async requestStrict(i,a){return new Promise(async(h,g)=>{if(!this.connection.connected)try{await this.open()}catch(s){g(s)}this.events.on(`${i.id}`,s=>{Ei(s)?g(s.error):h(s.result)});try{await this.connection.send(i,a)}catch(s){g(s)}})}setConnection(i=this.connection){return i}onPayload(i){this.events.emit("payload",i),Po(i)?this.events.emit(`${i.id}`,i):this.events.emit("message",{type:i.method,data:i.params})}onClose(i){i&&i.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${i.code} ${i.reason?`(${i.reason})`:""}`)),this.events.emit("disconnect")}async open(i=this.connection){this.connection===i&&this.connection.connected||(this.connection.connected&&this.close(),typeof i=="string"&&(await this.connection.open(i),i=this.connection),this.connection=this.setConnection(i),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",i=>this.onPayload(i)),this.connection.on("close",i=>this.onClose(i)),this.connection.on("error",i=>this.events.emit("error",i)),this.connection.on("register_error",i=>this.onClose()),this.hasRegisteredEventListeners=!0)}}var k0,Y1;function c7(){return Y1||(Y1=1,k0=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}),k0}const X1=10,l7=()=>typeof sn<"u"&&typeof sn.WebSocket<"u"?sn.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:c7(),d7=()=>typeof window<"u",p7=l7();class v7{constructor(i){if(this.url=i,this.events=new ri.EventEmitter,this.registering=!1,!ad(i))throw new Error(`Provided URL is not compatible with WebSocket connection: ${i}`);this.url=i}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(i,a){this.events.on(i,a)}once(i,a){this.events.once(i,a)}off(i,a){this.events.off(i,a)}removeListener(i,a){this.events.removeListener(i,a)}async open(i=this.url){await this.register(i)}async close(){return new Promise((i,a)=>{if(typeof this.socket>"u"){a(new Error("Connection already closed"));return}this.socket.onclose=h=>{this.onClose(h),i()},this.socket.close()})}async send(i,a){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(zs(i))}catch(h){this.onError(i.id,h)}}register(i=this.url){if(!ad(i))throw new Error(`Provided URL is not compatible with WebSocket connection: ${i}`);if(this.registering){const a=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=a||this.events.listenerCount("open")>=a)&&this.events.setMaxListeners(a+1),new Promise((h,g)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),g(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return g(new Error("WebSocket connection is missing or invalid"));h(this.socket)})})}return this.url=i,this.registering=!0,new Promise((a,h)=>{const g=c5.isReactNative()?void 0:{rejectUnauthorized:!w5(i)},s=new p7(i,[],g);d7()?s.onerror=x=>{const w=x;h(this.emitError(w.error))}:s.on("error",x=>{h(this.emitError(x))}),s.onopen=()=>{this.onOpen(s),a(s)}})}onOpen(i){i.onmessage=a=>this.onPayload(a),i.onclose=a=>this.onClose(a),this.socket=i,this.registering=!1,this.events.emit("open")}onClose(i){this.socket=void 0,this.registering=!1,this.events.emit("close",i)}onPayload(i){if(typeof i.data>"u")return;const a=typeof i.data=="string"?Vu(i.data):i.data;this.events.emit("payload",a)}onError(i,a){const h=this.parseError(a),g=h.message||h.toString(),s=Ro(i,g);this.events.emit("payload",s)}parseError(i,a=this.url){return Uv(i,a,"WS")}resetMaxListeners(){this.events.getMaxListeners()>X1&&this.events.setMaxListeners(X1)}emitError(i){const a=this.parseError(new Error((i==null?void 0:i.message)||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",a),a}}var Do={exports:{}};Do.exports;(function(c,i){var a=200,h="__lodash_hash_undefined__",g=1,s=2,x=9007199254740991,w="[object Arguments]",_="[object Array]",M="[object AsyncFunction]",b="[object Boolean]",S="[object Date]",E="[object Error]",D="[object Function]",I="[object GeneratorFunction]",O="[object Map]",N="[object Number]",L="[object Null]",R="[object Object]",B="[object Promise]",T="[object Proxy]",U="[object RegExp]",k="[object Set]",P="[object String]",F="[object Symbol]",G="[object Undefined]",nt="[object WeakMap]",v="[object ArrayBuffer]",t="[object DataView]",r="[object Float32Array]",n="[object Float64Array]",o="[object Int8Array]",d="[object Int16Array]",m="[object Int32Array]",y="[object Uint8Array]",u="[object Uint8ClampedArray]",e="[object Uint16Array]",l="[object Uint32Array]",z=/[\\^$.*+?()[\]{}|]/g,$=/^\[object .+?Constructor\]$/,H=/^(?:0|[1-9]\d*)$/,W={};W[r]=W[n]=W[o]=W[d]=W[m]=W[y]=W[u]=W[e]=W[l]=!0,W[w]=W[_]=W[v]=W[b]=W[t]=W[S]=W[E]=W[D]=W[O]=W[N]=W[R]=W[U]=W[k]=W[P]=W[nt]=!1;var tt=typeof Ee=="object"&&Ee&&Ee.Object===Object&&Ee,Z=typeof self=="object"&&self&&self.Object===Object&&self,et=tt||Z||Function("return this")(),K=i&&!i.nodeType&&i,C=K&&!0&&c&&!c.nodeType&&c,Q=C&&C.exports===K,rt=Q&&tt.process,st=function(){try{return rt&&rt.binding&&rt.binding("util")}catch{}}(),Yt=st&&st.isTypedArray;function gt(Y,at){for(var Kt=-1,Zt=Y==null?0:Y.length,rr=0,le=[];++Kt<Zt;){var or=Y[Kt];at(or,Kt,Y)&&(le[rr++]=or)}return le}function mt(Y,at){for(var Kt=-1,Zt=at.length,rr=Y.length;++Kt<Zt;)Y[rr+Kt]=at[Kt];return Y}function ee(Y,at){for(var Kt=-1,Zt=Y==null?0:Y.length;++Kt<Zt;)if(at(Y[Kt],Kt,Y))return!0;return!1}function _t(Y,at){for(var Kt=-1,Zt=Array(Y);++Kt<Y;)Zt[Kt]=at(Kt);return Zt}function Mt(Y){return function(at){return Y(at)}}function re(Y,at){return Y.has(at)}function ut(Y,at){return Y==null?void 0:Y[at]}function pt(Y){var at=-1,Kt=Array(Y.size);return Y.forEach(function(Zt,rr){Kt[++at]=[rr,Zt]}),Kt}function Xt(Y,at){return function(Kt){return Y(at(Kt))}}function vt(Y){var at=-1,Kt=Array(Y.size);return Y.forEach(function(Zt){Kt[++at]=Zt}),Kt}var lt=Array.prototype,Qt=Function.prototype,ht=Object.prototype,dt=et["__core-js_shared__"],ie=Qt.toString,ct=ht.hasOwnProperty,bt=function(){var Y=/[^.]+$/.exec(dt&&dt.keys&&dt.keys.IE_PROTO||"");return Y?"Symbol(src)_1."+Y:""}(),ne=ht.toString,yt=RegExp("^"+ie.call(ct).replace(z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wt=Q?et.Buffer:void 0,se=et.Symbol,Bt=et.Uint8Array,Ut=ht.propertyIsEnumerable,Fe=lt.splice,Nt=se?se.toStringTag:void 0,kt=Object.getOwnPropertySymbols,ar=wt?wt.isBuffer:void 0,Lt=Xt(Object.keys,Object),Et=Wr(et,"DataView"),pe=Wr(et,"Map"),St=Wr(et,"Promise"),At=Wr(et,"Set"),ge=Wr(et,"WeakMap"),xt=Wr(Object,"create"),Pt=Ni(Et),Me=Ni(pe),Dt=Ni(St),Ot=Ni(At),ye=Ni(ge),Rt=se?se.prototype:void 0,It=Rt?Rt.valueOf:void 0;function ue(Y){var at=-1,Kt=Y==null?0:Y.length;for(this.clear();++at<Kt;){var Zt=Y[at];this.set(Zt[0],Zt[1])}}function Ct(){this.__data__=xt?xt(null):{},this.size=0}function Tt(Y){var at=this.has(Y)&&delete this.__data__[Y];return this.size-=at?1:0,at}function dr(Y){var at=this.__data__;if(xt){var Kt=at[Y];return Kt===h?void 0:Kt}return ct.call(at,Y)?at[Y]:void 0}function Ft(Y){var at=this.__data__;return xt?at[Y]!==void 0:ct.call(at,Y)}function $t(Y,at){var Kt=this.__data__;return this.size+=this.has(Y)?0:1,Kt[Y]=xt&&at===void 0?h:at,this}ue.prototype.clear=Ct,ue.prototype.delete=Tt,ue.prototype.get=dr,ue.prototype.has=Ft,ue.prototype.set=$t;function Se(Y){var at=-1,Kt=Y==null?0:Y.length;for(this.clear();++at<Kt;){var Zt=Y[at];this.set(Zt[0],Zt[1])}}function He(){this.__data__=[],this.size=0}function Ke(Y){var at=this.__data__,Kt=cn(at,Y);if(Kt<0)return!1;var Zt=at.length-1;return Kt==Zt?at.pop():Fe.call(at,Kt,1),--this.size,!0}function Ve(Y){var at=this.__data__,Kt=cn(at,Y);return Kt<0?void 0:at[Kt][1]}function Ge(Y){return cn(this.__data__,Y)>-1}function We(Y,at){var Kt=this.__data__,Zt=cn(Kt,Y);return Zt<0?(++this.size,Kt.push([Y,at])):Kt[Zt][1]=at,this}Se.prototype.clear=He,Se.prototype.delete=Ke,Se.prototype.get=Ve,Se.prototype.has=Ge,Se.prototype.set=We;function Oe(Y){var at=-1,Kt=Y==null?0:Y.length;for(this.clear();++at<Kt;){var Zt=Y[at];this.set(Zt[0],Zt[1])}}function Be(){this.size=0,this.__data__={hash:new ue,map:new(pe||Se),string:new ue}}function Ze(Y){var at=Gi(this,Y).delete(Y);return this.size-=at?1:0,at}function Ne(Y){return Gi(this,Y).get(Y)}function Je(Y){return Gi(this,Y).has(Y)}function Ye(Y,at){var Kt=Gi(this,Y),Zt=Kt.size;return Kt.set(Y,at),this.size+=Kt.size==Zt?0:1,this}Oe.prototype.clear=Be,Oe.prototype.delete=Ze,Oe.prototype.get=Ne,Oe.prototype.has=Je,Oe.prototype.set=Ye;function qe(Y){var at=-1,Kt=Y==null?0:Y.length;for(this.__data__=new Oe;++at<Kt;)this.add(Y[at])}function $e(Y){return this.__data__.set(Y,h),this}function ze(Y){return this.__data__.has(Y)}qe.prototype.add=qe.prototype.push=$e,qe.prototype.has=ze;function De(Y){var at=this.__data__=new Se(Y);this.size=at.size}function Xe(){this.__data__=new Se,this.size=0}function Qe(Y){var at=this.__data__,Kt=at.delete(Y);return this.size=at.size,Kt}function tr(Y){return this.__data__.get(Y)}function Ho(Y){return this.__data__.has(Y)}function Qs(Y,at){var Kt=this.__data__;if(Kt instanceof Se){var Zt=Kt.__data__;if(!pe||Zt.length<a-1)return Zt.push([Y,at]),this.size=++Kt.size,this;Kt=this.__data__=new Oe(Zt)}return Kt.set(Y,at),this.size=Kt.size,this}De.prototype.clear=Xe,De.prototype.delete=Qe,De.prototype.get=tr,De.prototype.has=Ho,De.prototype.set=Qs;function ta(Y,at){var Kt=kn(Y),Zt=!Kt&&la(Y),rr=!Kt&&!Zt&&us(Y),le=!Kt&&!Zt&&!rr&&va(Y),or=Kt||Zt||rr||le,br=or?_t(Y.length,String):[],Ie=br.length;for(var ir in Y)(at||ct.call(Y,ir))&&!(or&&(ir=="length"||rr&&(ir=="offset"||ir=="parent")||le&&(ir=="buffer"||ir=="byteLength"||ir=="byteOffset")||oa(ir,Ie)))&&br.push(ir);return br}function cn(Y,at){for(var Kt=Y.length;Kt--;)if(ca(Y[Kt][0],at))return Kt;return-1}function fs(Y,at,Kt){var Zt=at(Y);return kn(Y)?Zt:mt(Zt,Kt(Y))}function ln(Y){return Y==null?Y===void 0?G:L:Nt&&Nt in Object(Y)?sa(Y):Go(Y)}function hs(Y){return pn(Y)&&ln(Y)==w}function dn(Y,at,Kt,Zt,rr){return Y===at?!0:Y==null||at==null||!pn(Y)&&!pn(at)?Y!==Y&&at!==at:ea(Y,at,Kt,Zt,dn,rr)}function ea(Y,at,Kt,Zt,rr,le){var or=kn(Y),br=kn(at),Ie=or?_:Ai(Y),ir=br?_:Ai(at);Ie=Ie==w?R:Ie,ir=ir==w?R:ir;var pr=Ie==R,$r=ir==R,yr=Ie==ir;if(yr&&us(Y)){if(!us(at))return!1;or=!0,pr=!1}if(yr&&!pr)return le||(le=new De),or||va(Y)?qn(Y,at,Kt,Zt,rr,le):Vo(Y,at,Ie,Kt,Zt,rr,le);if(!(Kt&g)){var fr=pr&&ct.call(Y,"__wrapped__"),Tr=$r&&ct.call(at,"__wrapped__");if(fr||Tr){var yi=fr?Y.value():Y,ni=Tr?at.value():at;return le||(le=new De),rr(yi,ni,Kt,Zt,le)}}return yr?(le||(le=new De),na(Y,at,Kt,Zt,rr,le)):!1}function Ko(Y){if(!pa(Y)||ha(Y))return!1;var at=Ln(Y)?yt:$;return at.test(Ni(Y))}function ra(Y){return pn(Y)&&da(Y.length)&&!!W[ln(Y)]}function ia(Y){if(!ua(Y))return Lt(Y);var at=[];for(var Kt in Object(Y))ct.call(Y,Kt)&&Kt!="constructor"&&at.push(Kt);return at}function qn(Y,at,Kt,Zt,rr,le){var or=Kt&g,br=Y.length,Ie=at.length;if(br!=Ie&&!(or&&Ie>br))return!1;var ir=le.get(Y);if(ir&&le.get(at))return ir==at;var pr=-1,$r=!0,yr=Kt&s?new qe:void 0;for(le.set(Y,at),le.set(at,Y);++pr<br;){var fr=Y[pr],Tr=at[pr];if(Zt)var yi=or?Zt(Tr,fr,pr,at,Y,le):Zt(fr,Tr,pr,Y,at,le);if(yi!==void 0){if(yi)continue;$r=!1;break}if(yr){if(!ee(at,function(ni,Di){if(!re(yr,Di)&&(fr===ni||rr(fr,ni,Kt,Zt,le)))return yr.push(Di)})){$r=!1;break}}else if(!(fr===Tr||rr(fr,Tr,Kt,Zt,le))){$r=!1;break}}return le.delete(Y),le.delete(at),$r}function Vo(Y,at,Kt,Zt,rr,le,or){switch(Kt){case t:if(Y.byteLength!=at.byteLength||Y.byteOffset!=at.byteOffset)return!1;Y=Y.buffer,at=at.buffer;case v:return!(Y.byteLength!=at.byteLength||!le(new Bt(Y),new Bt(at)));case b:case S:case N:return ca(+Y,+at);case E:return Y.name==at.name&&Y.message==at.message;case U:case P:return Y==at+"";case O:var br=pt;case k:var Ie=Zt&g;if(br||(br=vt),Y.size!=at.size&&!Ie)return!1;var ir=or.get(Y);if(ir)return ir==at;Zt|=s,or.set(Y,at);var pr=qn(br(Y),br(at),Zt,rr,le,or);return or.delete(Y),pr;case F:if(It)return It.call(Y)==It.call(at)}return!1}function na(Y,at,Kt,Zt,rr,le){var or=Kt&g,br=Un(Y),Ie=br.length,ir=Un(at),pr=ir.length;if(Ie!=pr&&!or)return!1;for(var $r=Ie;$r--;){var yr=br[$r];if(!(or?yr in at:ct.call(at,yr)))return!1}var fr=le.get(Y);if(fr&&le.get(at))return fr==at;var Tr=!0;le.set(Y,at),le.set(at,Y);for(var yi=or;++$r<Ie;){yr=br[$r];var ni=Y[yr],Di=at[yr];if(Zt)var cs=or?Zt(Di,ni,yr,at,Y,le):Zt(ni,Di,yr,Y,at,le);if(!(cs===void 0?ni===Di||rr(ni,Di,Kt,Zt,le):cs)){Tr=!1;break}yi||(yi=yr=="constructor")}if(Tr&&!yi){var vn=Y.constructor,xr=at.constructor;vn!=xr&&"constructor"in Y&&"constructor"in at&&!(typeof vn=="function"&&vn instanceof vn&&typeof xr=="function"&&xr instanceof xr)&&(Tr=!1)}return le.delete(Y),le.delete(at),Tr}function Un(Y){return fs(Y,Jo,aa)}function Gi(Y,at){var Kt=Y.__data__;return fa(at)?Kt[typeof at=="string"?"string":"hash"]:Kt.map}function Wr(Y,at){var Kt=ut(Y,at);return Ko(Kt)?Kt:void 0}function sa(Y){var at=ct.call(Y,Nt),Kt=Y[Nt];try{Y[Nt]=void 0;var Zt=!0}catch{}var rr=ne.call(Y);return Zt&&(at?Y[Nt]=Kt:delete Y[Nt]),rr}var aa=kt?function(Y){return Y==null?[]:(Y=Object(Y),gt(kt(Y),function(at){return Ut.call(Y,at)}))}:er,Ai=ln;(Et&&Ai(new Et(new ArrayBuffer(1)))!=t||pe&&Ai(new pe)!=O||St&&Ai(St.resolve())!=B||At&&Ai(new At)!=k||ge&&Ai(new ge)!=nt)&&(Ai=function(Y){var at=ln(Y),Kt=at==R?Y.constructor:void 0,Zt=Kt?Ni(Kt):"";if(Zt)switch(Zt){case Pt:return t;case Me:return O;case Dt:return B;case Ot:return k;case ye:return nt}return at});function oa(Y,at){return at=at??x,!!at&&(typeof Y=="number"||H.test(Y))&&Y>-1&&Y%1==0&&Y<at}function fa(Y){var at=typeof Y;return at=="string"||at=="number"||at=="symbol"||at=="boolean"?Y!=="__proto__":Y===null}function ha(Y){return!!bt&&bt in Y}function ua(Y){var at=Y&&Y.constructor,Kt=typeof at=="function"&&at.prototype||ht;return Y===Kt}function Go(Y){return ne.call(Y)}function Ni(Y){if(Y!=null){try{return ie.call(Y)}catch{}try{return Y+""}catch{}}return""}function ca(Y,at){return Y===at||Y!==Y&&at!==at}var la=hs(function(){return arguments}())?hs:function(Y){return pn(Y)&&ct.call(Y,"callee")&&!Ut.call(Y,"callee")},kn=Array.isArray;function Wo(Y){return Y!=null&&da(Y.length)&&!Ln(Y)}var us=ar||je;function Zo(Y,at){return dn(Y,at)}function Ln(Y){if(!pa(Y))return!1;var at=ln(Y);return at==D||at==I||at==M||at==T}function da(Y){return typeof Y=="number"&&Y>-1&&Y%1==0&&Y<=x}function pa(Y){var at=typeof Y;return Y!=null&&(at=="object"||at=="function")}function pn(Y){return Y!=null&&typeof Y=="object"}var va=Yt?Mt(Yt):ra;function Jo(Y){return Wo(Y)?ta(Y):ia(Y)}function er(){return[]}function je(){return!1}c.exports=Zo})(Do,Do.exports);var g7=Do.exports;const m7=Bv(g7);function b7(c,i){if(c.length>=255)throw new TypeError("Alphabet too long");for(var a=new Uint8Array(256),h=0;h<a.length;h++)a[h]=255;for(var g=0;g<c.length;g++){var s=c.charAt(g),x=s.charCodeAt(0);if(a[x]!==255)throw new TypeError(s+" is ambiguous");a[x]=g}var w=c.length,_=c.charAt(0),M=Math.log(w)/Math.log(256),b=Math.log(256)/Math.log(w);function S(I){if(I instanceof Uint8Array||(ArrayBuffer.isView(I)?I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength):Array.isArray(I)&&(I=Uint8Array.from(I))),!(I instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(I.length===0)return"";for(var O=0,N=0,L=0,R=I.length;L!==R&&I[L]===0;)L++,O++;for(var B=(R-L)*b+1>>>0,T=new Uint8Array(B);L!==R;){for(var U=I[L],k=0,P=B-1;(U!==0||k<N)&&P!==-1;P--,k++)U+=256*T[P]>>>0,T[P]=U%w>>>0,U=U/w>>>0;if(U!==0)throw new Error("Non-zero carry");N=k,L++}for(var F=B-N;F!==B&&T[F]===0;)F++;for(var G=_.repeat(O);F<B;++F)G+=c.charAt(T[F]);return G}function E(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return new Uint8Array;var O=0;if(I[O]!==" "){for(var N=0,L=0;I[O]===_;)N++,O++;for(var R=(I.length-O)*M+1>>>0,B=new Uint8Array(R);I[O];){var T=a[I.charCodeAt(O)];if(T===255)return;for(var U=0,k=R-1;(T!==0||U<L)&&k!==-1;k--,U++)T+=w*B[k]>>>0,B[k]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");L=U,O++}if(I[O]!==" "){for(var P=R-L;P!==R&&B[P]===0;)P++;for(var F=new Uint8Array(N+(R-P)),G=N;P!==R;)F[G++]=B[P++];return F}}}function D(I){var O=E(I);if(O)return O;throw new Error(`Non-${i} character`)}return{encode:S,decodeUnsafe:E,decode:D}}var y7=b7,w7=y7;const rm=c=>{if(c instanceof Uint8Array&&c.constructor.name==="Uint8Array")return c;if(c instanceof ArrayBuffer)return new Uint8Array(c);if(ArrayBuffer.isView(c))return new Uint8Array(c.buffer,c.byteOffset,c.byteLength);throw new Error("Unknown type, must be binary type")},_7=c=>new TextEncoder().encode(c),M7=c=>new TextDecoder().decode(c);class x7{constructor(i,a,h){this.name=i,this.prefix=a,this.baseEncode=h}encode(i){if(i instanceof Uint8Array)return`${this.prefix}${this.baseEncode(i)}`;throw Error("Unknown type, must be binary type")}}class E7{constructor(i,a,h){if(this.name=i,this.prefix=a,a.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=a.codePointAt(0),this.baseDecode=h}decode(i){if(typeof i=="string"){if(i.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(i)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(i.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(i){return im(this,i)}}class S7{constructor(i){this.decoders=i}or(i){return im(this,i)}decode(i){const a=i[0],h=this.decoders[a];if(h)return h.decode(i);throw RangeError(`Unable to decode multibase string ${JSON.stringify(i)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const im=(c,i)=>new S7({...c.decoders||{[c.prefix]:c},...i.decoders||{[i.prefix]:i}});class A7{constructor(i,a,h,g){this.name=i,this.prefix=a,this.baseEncode=h,this.baseDecode=g,this.encoder=new x7(i,a,h),this.decoder=new E7(i,a,g)}encode(i){return this.encoder.encode(i)}decode(i){return this.decoder.decode(i)}}const zo=({name:c,prefix:i,encode:a,decode:h})=>new A7(c,i,a,h),Xs=({prefix:c,name:i,alphabet:a})=>{const{encode:h,decode:g}=w7(a,i);return zo({prefix:c,name:i,encode:h,decode:s=>rm(g(s))})},D7=(c,i,a,h)=>{const g={};for(let b=0;b<i.length;++b)g[i[b]]=b;let s=c.length;for(;c[s-1]==="=";)--s;const x=new Uint8Array(s*a/8|0);let w=0,_=0,M=0;for(let b=0;b<s;++b){const S=g[c[b]];if(S===void 0)throw new SyntaxError(`Non-${h} character`);_=_<<a|S,w+=a,w>=8&&(w-=8,x[M++]=255&_>>w)}if(w>=a||255&_<<8-w)throw new SyntaxError("Unexpected end of data");return x},I7=(c,i,a)=>{const h=i[i.length-1]==="=",g=(1<<a)-1;let s="",x=0,w=0;for(let _=0;_<c.length;++_)for(w=w<<8|c[_],x+=8;x>a;)x-=a,s+=i[g&w>>x];if(x&&(s+=i[g&w<<a-x]),h)for(;s.length*a&7;)s+="=";return s},Rr=({name:c,prefix:i,bitsPerChar:a,alphabet:h})=>zo({prefix:i,name:c,encode(g){return I7(g,h,a)},decode(g){return D7(g,h,a,c)}}),R7=zo({prefix:"\0",name:"identity",encode:c=>M7(c),decode:c=>_7(c)});var P7=Object.freeze({__proto__:null,identity:R7});const O7=Rr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var C7=Object.freeze({__proto__:null,base2:O7});const T7=Rr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var B7=Object.freeze({__proto__:null,base8:T7});const N7=Xs({prefix:"9",name:"base10",alphabet:"0123456789"});var q7=Object.freeze({__proto__:null,base10:N7});const U7=Rr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),k7=Rr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var L7=Object.freeze({__proto__:null,base16:U7,base16upper:k7});const F7=Rr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),$7=Rr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),z7=Rr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),j7=Rr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),H7=Rr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),K7=Rr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),V7=Rr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),G7=Rr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),W7=Rr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Z7=Object.freeze({__proto__:null,base32:F7,base32upper:$7,base32pad:z7,base32padupper:j7,base32hex:H7,base32hexupper:K7,base32hexpad:V7,base32hexpadupper:G7,base32z:W7});const J7=Xs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Y7=Xs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var X7=Object.freeze({__proto__:null,base36:J7,base36upper:Y7});const Q7=Xs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),tx=Xs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ex=Object.freeze({__proto__:null,base58btc:Q7,base58flickr:tx});const rx=Rr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ix=Rr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),nx=Rr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),sx=Rr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var ax=Object.freeze({__proto__:null,base64:rx,base64pad:ix,base64url:nx,base64urlpad:sx});const nm=Array.from(""),ox=nm.reduce((c,i,a)=>(c[a]=i,c),[]),fx=nm.reduce((c,i,a)=>(c[i.codePointAt(0)]=a,c),[]);function hx(c){return c.reduce((i,a)=>(i+=ox[a],i),"")}function ux(c){const i=[];for(const a of c){const h=fx[a.codePointAt(0)];if(h===void 0)throw new Error(`Non-base256emoji character: ${a}`);i.push(h)}return new Uint8Array(i)}const cx=zo({prefix:"",name:"base256emoji",encode:hx,decode:ux});var lx=Object.freeze({__proto__:null,base256emoji:cx}),dx=sm,Q1=128,px=127,vx=~px,gx=Math.pow(2,31);function sm(c,i,a){i=i||[],a=a||0;for(var h=a;c>=gx;)i[a++]=c&255|Q1,c/=128;for(;c&vx;)i[a++]=c&255|Q1,c>>>=7;return i[a]=c|0,sm.bytes=a-h+1,i}var mx=ou,bx=128,tv=127;function ou(c,h){var a=0,h=h||0,g=0,s=h,x,w=c.length;do{if(s>=w)throw ou.bytes=0,new RangeError("Could not decode varint");x=c[s++],a+=g<28?(x&tv)<<g:(x&tv)*Math.pow(2,g),g+=7}while(x>=bx);return ou.bytes=s-h,a}var yx=Math.pow(2,7),wx=Math.pow(2,14),_x=Math.pow(2,21),Mx=Math.pow(2,28),xx=Math.pow(2,35),Ex=Math.pow(2,42),Sx=Math.pow(2,49),Ax=Math.pow(2,56),Dx=Math.pow(2,63),Ix=function(c){return c<yx?1:c<wx?2:c<_x?3:c<Mx?4:c<xx?5:c<Ex?6:c<Sx?7:c<Ax?8:c<Dx?9:10},Rx={encode:dx,decode:mx,encodingLength:Ix},am=Rx;const ev=(c,i,a=0)=>(am.encode(c,i,a),i),rv=c=>am.encodingLength(c),fu=(c,i)=>{const a=i.byteLength,h=rv(c),g=h+rv(a),s=new Uint8Array(g+a);return ev(c,s,0),ev(a,s,h),s.set(i,g),new Px(c,a,i,s)};class Px{constructor(i,a,h,g){this.code=i,this.size=a,this.digest=h,this.bytes=g}}const om=({name:c,code:i,encode:a})=>new Ox(c,i,a);class Ox{constructor(i,a,h){this.name=i,this.code=a,this.encode=h}digest(i){if(i instanceof Uint8Array){const a=this.encode(i);return a instanceof Uint8Array?fu(this.code,a):a.then(h=>fu(this.code,h))}else throw Error("Unknown type, must be binary type")}}const fm=c=>async i=>new Uint8Array(await crypto.subtle.digest(c,i)),Cx=om({name:"sha2-256",code:18,encode:fm("SHA-256")}),Tx=om({name:"sha2-512",code:19,encode:fm("SHA-512")});var Bx=Object.freeze({__proto__:null,sha256:Cx,sha512:Tx});const hm=0,Nx="identity",um=rm,qx=c=>fu(hm,um(c)),Ux={code:hm,name:Nx,encode:um,digest:qx};var kx=Object.freeze({__proto__:null,identity:Ux});new TextEncoder,new TextDecoder;const iv={...P7,...C7,...B7,...q7,...L7,...Z7,...X7,...ex,...ax,...lx};({...Bx,...kx});function cm(c){return globalThis.Buffer!=null?new Uint8Array(c.buffer,c.byteOffset,c.byteLength):c}function Lx(c=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?cm(globalThis.Buffer.allocUnsafe(c)):new Uint8Array(c)}function lm(c,i,a,h){return{name:c,prefix:i,encoder:{name:c,prefix:i,encode:a},decoder:{decode:h}}}const nv=lm("utf8","u",c=>"u"+new TextDecoder("utf8").decode(c),c=>new TextEncoder().encode(c.substring(1))),L0=lm("ascii","a",c=>{let i="a";for(let a=0;a<c.length;a++)i+=String.fromCharCode(c[a]);return i},c=>{c=c.substring(1);const i=Lx(c.length);for(let a=0;a<c.length;a++)i[a]=c.charCodeAt(a);return i}),Fx={utf8:nv,"utf-8":nv,hex:iv.base16,latin1:L0,ascii:L0,binary:L0,...iv};function $x(c,i="utf8"){const a=Fx[i];if(!a)throw new Error(`Unsupported encoding "${i}"`);return(i==="utf8"||i==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?cm(globalThis.Buffer.from(c,"utf-8")):a.decoder.decode(`${a.prefix}${c}`)}const dm="wc",zx=2,ec="core",an=`${dm}@2:${ec}:`,jx={name:ec,logger:"error"},Hx={database:":memory:"},Kx="crypto",sv="client_ed25519_seed",Vx=ae.ONE_DAY,Gx="keychain",Wx="0.3",Zx="messages",Jx="0.3",Yx=ae.SIX_HOURS,Xx="publisher",pm="irn",Qx="error",vm="wss://relay.walletconnect.com",tE="relayer",lr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},eE="_subscription",Ns={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},rE=ae.ONE_SECOND/2,iE="2.8.0",nE=1e4,sE="0.3",aE="WALLETCONNECT_CLIENT_ID",Ti={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},oE="subscription",fE="0.3",hE=ae.FIVE_SECONDS*1e3,uE="pairing",cE="0.3",qs={wc_pairingDelete:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ae.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ae.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ae.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:0},res:{ttl:ae.ONE_DAY,prompt:!1,tag:0}}},Ci={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},lE="history",dE="0.3",pE="expirer",gi={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},vE="0.3",F0="verify-api",av="https://verify.walletconnect.com";class gE{constructor(i,a){this.core=i,this.logger=a,this.keychain=new Map,this.name=Gx,this.version=Wx,this.initialized=!1,this.storagePrefix=an,this.init=async()=>{if(!this.initialized){const h=await this.getKeyChain();typeof h<"u"&&(this.keychain=h),this.initialized=!0}},this.has=h=>(this.isInitialized(),this.keychain.has(h)),this.set=async(h,g)=>{this.isInitialized(),this.keychain.set(h,g),await this.persist()},this.get=h=>{this.isInitialized();const g=this.keychain.get(h);if(typeof g>"u"){const{message:s}=Wt("NO_MATCHING_KEY",`${this.name}: ${h}`);throw new Error(s)}return g},this.del=async h=>{this.isInitialized(),this.keychain.delete(h),await this.persist()},this.core=i,this.logger=Pe.generateChildLogger(a,this.name)}get context(){return Pe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(i){await this.core.storage.setItem(this.storageKey,Jg(i))}async getKeyChain(){const i=await this.core.storage.getItem(this.storageKey);return typeof i<"u"?Yg(i):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:i}=Wt("NOT_INITIALIZED",this.name);throw new Error(i)}}}class mE{constructor(i,a,h){this.core=i,this.logger=a,this.name=Kx,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=g=>(this.isInitialized(),this.keychain.has(g)),this.getClientId=async()=>{this.isInitialized();const g=await this.getClientSeed(),s=B1(g);return zg(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const g=n9();return this.setPrivateKey(g.publicKey,g.privateKey)},this.signJWT=async g=>{this.isInitialized();const s=await this.getClientSeed(),x=B1(s),w=su();return await zM(w,g,Vx,x)},this.generateSharedKey=(g,s,x)=>{this.isInitialized();const w=this.getPrivateKey(g),_=s9(w,s);return this.setSymKey(_,x)},this.setSymKey=async(g,s)=>{this.isInitialized();const x=s||a9(g);return await this.keychain.set(x,g),x},this.deleteKeyPair=async g=>{this.isInitialized(),await this.keychain.del(g)},this.deleteSymKey=async g=>{this.isInitialized(),await this.keychain.del(g)},this.encode=async(g,s,x)=>{this.isInitialized();const w=Gg(x),_=zs(s);if($1(w)){const E=w.senderPublicKey,D=w.receiverPublicKey;g=await this.generateSharedKey(E,D)}const M=this.getSymKey(g),{type:b,senderPublicKey:S}=w;return f9({type:b,symKey:M,message:_,senderPublicKey:S})},this.decode=async(g,s,x)=>{this.isInitialized();const w=c9(s,x);if($1(w)){const b=w.receiverPublicKey,S=w.senderPublicKey;g=await this.generateSharedKey(b,S)}const _=this.getSymKey(g),M=h9({symKey:_,encoded:s});return Vu(M)},this.getPayloadType=g=>{const s=So(g);return Js(s.type)},this.getPayloadSenderPublicKey=g=>{const s=So(g);return s.senderPublicKey?Fr(s.senderPublicKey,Lr):void 0},this.core=i,this.logger=Pe.generateChildLogger(a,this.name),this.keychain=h||new gE(this.core,this.logger)}get context(){return Pe.getLoggerContext(this.logger)}async setPrivateKey(i,a){return await this.keychain.set(i,a),i}getPrivateKey(i){return this.keychain.get(i)}async getClientSeed(){let i="";try{i=this.keychain.get(sv)}catch{i=su(),await this.keychain.set(sv,i)}return $x(i,"base16")}getSymKey(i){return this.keychain.get(i)}isInitialized(){if(!this.initialized){const{message:i}=Wt("NOT_INITIALIZED",this.name);throw new Error(i)}}}class bE extends bM{constructor(i,a){super(i,a),this.logger=i,this.core=a,this.messages=new Map,this.name=Zx,this.version=Jx,this.initialized=!1,this.storagePrefix=an,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const h=await this.getRelayerMessages();typeof h<"u"&&(this.messages=h),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(h){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(h)}finally{this.initialized=!0}}},this.set=async(h,g)=>{this.isInitialized();const s=is(g);let x=this.messages.get(h);return typeof x>"u"&&(x={}),typeof x[s]<"u"||(x[s]=g,this.messages.set(h,x),await this.persist()),s},this.get=h=>{this.isInitialized();let g=this.messages.get(h);return typeof g>"u"&&(g={}),g},this.has=(h,g)=>{this.isInitialized();const s=this.get(h),x=is(g);return typeof s[x]<"u"},this.del=async h=>{this.isInitialized(),this.messages.delete(h),await this.persist()},this.logger=Pe.generateChildLogger(i,this.name),this.core=a}get context(){return Pe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(i){await this.core.storage.setItem(this.storageKey,Jg(i))}async getRelayerMessages(){const i=await this.core.storage.getItem(this.storageKey);return typeof i<"u"?Yg(i):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:i}=Wt("NOT_INITIALIZED",this.name);throw new Error(i)}}}let yE=class extends yM{constructor(i,a){super(i,a),this.relayer=i,this.logger=a,this.events=new ri.EventEmitter,this.name=Xx,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(h,g,s)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:h,message:g,opts:s}});try{const x=(s==null?void 0:s.ttl)||Yx,w=au(s),_=(s==null?void 0:s.prompt)||!1,M=(s==null?void 0:s.tag)||0,b=(s==null?void 0:s.id)||Mu().toString(),S={topic:h,message:g,opts:{ttl:x,relay:w,prompt:_,tag:M,id:b}};this.queue.set(b,S);try{await await Ao(this.rpcPublish(h,g,x,w,_,M,b),this.publishTimeout),this.relayer.events.emit(lr.publish,S)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(lr.connection_stalled);return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:h,message:g,opts:s}})}catch(x){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(x),x}},this.on=(h,g)=>{this.events.on(h,g)},this.once=(h,g)=>{this.events.once(h,g)},this.off=(h,g)=>{this.events.off(h,g)},this.removeListener=(h,g)=>{this.events.removeListener(h,g)},this.relayer=i,this.logger=Pe.generateChildLogger(a,this.name),this.registerEventListeners()}get context(){return Pe.getLoggerContext(this.logger)}rpcPublish(i,a,h,g,s,x,w){var _,M,b,S;const E={method:yo(g.protocol).publish,params:{topic:i,message:a,ttl:h,prompt:s,tag:x},id:w};return kr((_=E.params)==null?void 0:_.prompt)&&((M=E.params)==null||delete M.prompt),kr((b=E.params)==null?void 0:b.tag)&&((S=E.params)==null||delete S.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:E}),this.relayer.request(E)}onPublish(i){this.queue.delete(i)}checkQueue(){this.queue.forEach(async i=>{const{topic:a,message:h,opts:g}=i;await this.publish(a,h,g)})}registerEventListeners(){this.relayer.core.heartbeat.on(Zs.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()}),this.relayer.on(lr.message_ack,i=>{this.onPublish(i.id.toString())})}};class wE{constructor(){this.map=new Map,this.set=(i,a)=>{const h=this.get(i);this.exists(i,a)||this.map.set(i,[...h,a])},this.get=i=>this.map.get(i)||[],this.exists=(i,a)=>this.get(i).includes(a),this.delete=(i,a)=>{if(typeof a>"u"){this.map.delete(i);return}if(!this.map.has(i))return;const h=this.get(i);if(!this.exists(i,a))return;const g=h.filter(s=>s!==a);if(!g.length){this.map.delete(i);return}this.map.set(i,g)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var _E=Object.defineProperty,ME=Object.defineProperties,xE=Object.getOwnPropertyDescriptors,ov=Object.getOwnPropertySymbols,EE=Object.prototype.hasOwnProperty,SE=Object.prototype.propertyIsEnumerable,fv=(c,i,a)=>i in c?_E(c,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[i]=a,Us=(c,i)=>{for(var a in i||(i={}))EE.call(i,a)&&fv(c,a,i[a]);if(ov)for(var a of ov(i))SE.call(i,a)&&fv(c,a,i[a]);return c},$0=(c,i)=>ME(c,xE(i));class AE extends MM{constructor(i,a){super(i,a),this.relayer=i,this.logger=a,this.subscriptions=new Map,this.topicMap=new wE,this.events=new ri.EventEmitter,this.name=oE,this.version=fE,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=an,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(h,g)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:h,opts:g}});try{const s=au(g),x={topic:h,relay:s};this.pending.set(h,x);const w=await this.rpcSubscribe(h,s);return this.onSubscribe(w,x),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:h,opts:g}}),w}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(h,g)=>{await this.restartToComplete(),this.isInitialized(),typeof(g==null?void 0:g.id)<"u"?await this.unsubscribeById(h,g.id,g):await this.unsubscribeByTopic(h,g)},this.isSubscribed=async h=>this.topics.includes(h)?!0:await new Promise((g,s)=>{const x=new ae.Watch;x.start(this.pendingSubscriptionWatchLabel);const w=setInterval(()=>{!this.pending.has(h)&&this.topics.includes(h)&&(clearInterval(w),x.stop(this.pendingSubscriptionWatchLabel),g(!0)),x.elapsed(this.pendingSubscriptionWatchLabel)>=hE&&(clearInterval(w),x.stop(this.pendingSubscriptionWatchLabel),s(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(h,g)=>{this.events.on(h,g)},this.once=(h,g)=>{this.events.once(h,g)},this.off=(h,g)=>{this.events.off(h,g)},this.removeListener=(h,g)=>{this.events.removeListener(h,g)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=i,this.logger=Pe.generateChildLogger(a,this.name),this.clientId=""}get context(){return Pe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(i,a){let h=!1;try{h=this.getSubscription(i).topic===a}catch{}return h}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(i,a){const h=this.topicMap.get(i);await Promise.all(h.map(async g=>await this.unsubscribeById(i,g,a)))}async unsubscribeById(i,a,h){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:i,id:a,opts:h}});try{const g=au(h);await this.rpcUnsubscribe(i,a,g);const s=Sr("USER_DISCONNECTED",`${this.name}, ${i}`);await this.onUnsubscribe(i,a,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:i,id:a,opts:h}})}catch(g){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(g),g}}async rpcSubscribe(i,a){const h={method:yo(a.protocol).subscribe,params:{topic:i}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:h});try{await await Ao(this.relayer.request(h),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(lr.connection_stalled)}return is(i+this.clientId)}async rpcBatchSubscribe(i){if(!i.length)return;const a=i[0].relay,h={method:yo(a.protocol).batchSubscribe,params:{topics:i.map(g=>g.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:h});try{return await await Ao(this.relayer.request(h),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(lr.connection_stalled)}}rpcUnsubscribe(i,a,h){const g={method:yo(h.protocol).unsubscribe,params:{topic:i,id:a}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:g}),this.relayer.request(g)}onSubscribe(i,a){this.setSubscription(i,$0(Us({},a),{id:i})),this.pending.delete(a.topic)}onBatchSubscribe(i){i.length&&i.forEach(a=>{this.setSubscription(a.id,Us({},a)),this.pending.delete(a.topic)})}async onUnsubscribe(i,a,h){this.events.removeAllListeners(a),this.hasSubscription(a,i)&&this.deleteSubscription(a,h),await this.relayer.messages.del(i)}async setRelayerSubscriptions(i){await this.relayer.core.storage.setItem(this.storageKey,i)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(i,a){this.subscriptions.has(i)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:i,subscription:a}),this.addSubscription(i,a))}addSubscription(i,a){this.subscriptions.set(i,Us({},a)),this.topicMap.set(a.topic,i),this.events.emit(Ti.created,a)}getSubscription(i){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:i});const a=this.subscriptions.get(i);if(!a){const{message:h}=Wt("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(h)}return a}deleteSubscription(i,a){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:i,reason:a});const h=this.getSubscription(i);this.subscriptions.delete(i),this.topicMap.delete(h.topic,i),this.events.emit(Ti.deleted,$0(Us({},h),{reason:a}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ti.sync)}async reset(){if(this.cached.length){const i=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let a=0;a<i;a++){const h=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(h)}}this.events.emit(Ti.resubscribed)}async restore(){try{const i=await this.getRelayerSubscriptions();if(typeof i>"u"||!i.length)return;if(this.subscriptions.size){const{message:a}=Wt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(a),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(a)}this.cached=i,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(i){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(i)}}async batchSubscribe(i){if(!i.length)return;const a=await this.rpcBatchSubscribe(i);Ys(a)&&this.onBatchSubscribe(a.map((h,g)=>$0(Us({},i[g]),{id:h})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const i=[];this.pending.forEach(a=>{i.push(a)}),await this.batchSubscribe(i)}registerEventListeners(){this.relayer.core.heartbeat.on(Zs.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(lr.connect,async()=>{await this.onConnect()}),this.relayer.on(lr.disconnect,()=>{this.onDisconnect()}),this.events.on(Ti.created,async i=>{const a=Ti.created;this.logger.info(`Emitting ${a}`),this.logger.debug({type:"event",event:a,data:i}),await this.persist()}),this.events.on(Ti.deleted,async i=>{const a=Ti.deleted;this.logger.info(`Emitting ${a}`),this.logger.debug({type:"event",event:a,data:i}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:i}=Wt("NOT_INITIALIZED",this.name);throw new Error(i)}}async restartToComplete(){this.restartInProgress&&await new Promise(i=>{const a=setInterval(()=>{this.restartInProgress||(clearInterval(a),i())},this.pollingInterval)})}}var DE=Object.defineProperty,hv=Object.getOwnPropertySymbols,IE=Object.prototype.hasOwnProperty,RE=Object.prototype.propertyIsEnumerable,uv=(c,i,a)=>i in c?DE(c,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[i]=a,PE=(c,i)=>{for(var a in i||(i={}))IE.call(i,a)&&uv(c,a,i[a]);if(hv)for(var a of hv(i))RE.call(i,a)&&uv(c,a,i[a]);return c};let OE=class extends wM{constructor(i){super(i),this.protocol="wc",this.version=2,this.events=new ri.EventEmitter,this.name=tE,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async a=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(a)}catch(h){throw this.logger.debug("Failed to Publish Request"),this.logger.error(h),h}},this.core=i.core,this.logger=typeof i.logger<"u"&&typeof i.logger!="string"?Pe.generateChildLogger(i.logger,this.name):Pe.pino(Pe.getDefaultLoggerOptions({level:i.logger||Qx})),this.messages=new bE(this.logger,i.core),this.subscriber=new AE(this,this.logger),this.publisher=new yE(this,this.logger),this.relayUrl=(i==null?void 0:i.relayUrl)||vm,this.projectId=i.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribted to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},nE)}get context(){return Pe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(i,a,h){this.isInitialized(),await this.publisher.publish(i,a,h),await this.recordMessageEvent({topic:i,message:a,publishedAt:Date.now()})}async subscribe(i,a){var h;this.isInitialized();let g=((h=this.subscriber.topicMap.get(i))==null?void 0:h[0])||"";return g||(await Promise.all([new Promise(s=>{this.subscriber.once(Ti.created,x=>{x.topic===i&&s()})}),new Promise(async s=>{g=await this.subscriber.subscribe(i,a),s()})]),g)}async unsubscribe(i,a){this.isInitialized(),await this.subscriber.unsubscribe(i,a)}on(i,a){this.events.on(i,a)}once(i,a){this.events.once(i,a)}off(i,a){this.events.off(i,a)}removeListener(i,a){this.events.removeListener(i,a)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(lr.transport_closed))}async transportOpen(i){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=i||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(a=>{this.initialized||a(),this.subscriber.once(Ti.resubscribed,()=>{a()})}),await Promise.race([new Promise(async(a,h)=>{await Ao(this.provider.connect(),5e3,"socket stalled").catch(g=>h(g)).then(()=>a()).finally(()=>this.removeListener(lr.transport_closed,this.rejectTransportOpen))}),new Promise(a=>this.once(lr.transport_closed,this.rejectTransportOpen))])])}catch(a){this.logger.error(a);const h=a;if(!this.isConnectionStalled(h.message))throw a;this.events.emit(lr.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(i){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=i||this.relayUrl,this.connected&&await Promise.all([new Promise(a=>{this.provider.once(Ns.disconnect,()=>{a()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(i){return this.staleConnectionErrors.some(a=>i.includes(a))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){const i=await this.core.crypto.signJWT(this.relayUrl);this.provider=new hn(new v7(M9({sdkVersion:iE,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:i,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(i){const{topic:a,message:h}=i;await this.messages.set(a,h)}async shouldIgnoreMessageEvent(i){const{topic:a,message:h}=i;return await this.subscriber.isSubscribed(a)?this.messages.has(a,h):!0}async onProviderPayload(i){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:i}),Su(i)){if(!i.method.endsWith(eE))return;const a=i.params,{topic:h,message:g,publishedAt:s}=a.data,x={topic:h,message:g,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(PE({type:"event",event:a.id},x)),this.events.emit(a.id,x),await this.acknowledgePayload(i),await this.onMessageEvent(x)}else Po(i)&&this.events.emit(lr.message_ack,i)}async onMessageEvent(i){await this.shouldIgnoreMessageEvent(i)||(this.events.emit(lr.message,i),await this.recordMessageEvent(i))}async acknowledgePayload(i){const a=xu(i.id,!0);await this.provider.connection.send(a)}registerProviderListeners(){this.provider.on(Ns.payload,i=>this.onProviderPayload(i)),this.provider.on(Ns.connect,()=>{this.events.emit(lr.connect)}),this.provider.on(Ns.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(Ns.error,i=>{this.logger.error(i),this.events.emit(lr.error,i)})}registerEventListeners(){this.events.on(lr.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(lr.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},ae.toMiliseconds(rE))}isInitialized(){if(!this.initialized){const{message:i}=Wt("NOT_INITIALIZED",this.name);throw new Error(i)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(i=>{const a=setInterval(()=>{this.connected&&(clearInterval(a),i())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var CE=Object.defineProperty,cv=Object.getOwnPropertySymbols,TE=Object.prototype.hasOwnProperty,BE=Object.prototype.propertyIsEnumerable,lv=(c,i,a)=>i in c?CE(c,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[i]=a,dv=(c,i)=>{for(var a in i||(i={}))TE.call(i,a)&&lv(c,a,i[a]);if(cv)for(var a of cv(i))BE.call(i,a)&&lv(c,a,i[a]);return c};class jo extends _M{constructor(i,a,h,g=an,s=void 0){super(i,a,h,g),this.core=i,this.logger=a,this.name=h,this.map=new Map,this.version=sE,this.cached=[],this.initialized=!1,this.storagePrefix=an,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(x=>{this.getKey&&x!==null&&!kr(x)?this.map.set(this.getKey(x),x):K9(x)?this.map.set(x.id,x):V9(x)&&this.map.set(x.topic,x)}),this.cached=[],this.initialized=!0)},this.set=async(x,w)=>{this.isInitialized(),this.map.has(x)?await this.update(x,w):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:x,value:w}),this.map.set(x,w),await this.persist())},this.get=x=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:x}),this.getData(x)),this.getAll=x=>(this.isInitialized(),x?this.values.filter(w=>Object.keys(x).every(_=>m7(w[_],x[_]))):this.values),this.update=async(x,w)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:x,update:w});const _=dv(dv({},this.getData(x)),w);this.map.set(x,_),await this.persist()},this.delete=async(x,w)=>{this.isInitialized(),this.map.has(x)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:x,reason:w}),this.map.delete(x),await this.persist())},this.logger=Pe.generateChildLogger(a,this.name),this.storagePrefix=g,this.getKey=s}get context(){return Pe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(i){await this.core.storage.setItem(this.storageKey,i)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(i){const a=this.map.get(i);if(!a){const{message:h}=Wt("NO_MATCHING_KEY",`${this.name}: ${i}`);throw this.logger.error(h),new Error(h)}return a}async persist(){await this.setDataStore(this.values)}async restore(){try{const i=await this.getDataStore();if(typeof i>"u"||!i.length)return;if(this.map.size){const{message:a}=Wt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(a),new Error(a)}this.cached=i,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(i){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(i)}}isInitialized(){if(!this.initialized){const{message:i}=Wt("NOT_INITIALIZED",this.name);throw new Error(i)}}}class NE{constructor(i,a){this.core=i,this.logger=a,this.name=uE,this.version=cE,this.events=new bu,this.initialized=!1,this.storagePrefix=an,this.ignoredPayloadTypes=[Bn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:h})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...h])]},this.create=async()=>{this.isInitialized();const h=su(),g=await this.core.crypto.setSymKey(h),s=Bi(ae.FIVE_MINUTES),x={protocol:pm},w={topic:g,expiry:s,relay:x,active:!1},_=N9({protocol:this.core.protocol,version:this.core.version,topic:g,symKey:h,relay:x});return await this.pairings.set(g,w),await this.core.relayer.subscribe(g),this.core.expirer.set(g,s),{topic:g,uri:_}},this.pair=async h=>{this.isInitialized(),this.isValidPair(h);const{topic:g,symKey:s,relay:x}=C9(h.uri);if(this.pairings.keys.includes(g))throw new Error(`Pairing already exists: ${g}`);if(this.core.crypto.hasKeys(g))throw new Error(`Keychain already exists: ${g}`);const w=Bi(ae.FIVE_MINUTES),_={topic:g,relay:x,expiry:w,active:!1};return await this.pairings.set(g,_),await this.core.crypto.setSymKey(s,g),await this.core.relayer.subscribe(g,{relay:x}),this.core.expirer.set(g,w),h.activatePairing&&await this.activate({topic:g}),_},this.activate=async({topic:h})=>{this.isInitialized();const g=Bi(ae.THIRTY_DAYS);await this.pairings.update(h,{active:!0,expiry:g}),this.core.expirer.set(h,g)},this.ping=async h=>{this.isInitialized(),await this.isValidPing(h);const{topic:g}=h;if(this.pairings.keys.includes(g)){const s=await this.sendRequest(g,"wc_pairingPing",{}),{done:x,resolve:w,reject:_}=rs();this.events.once(wr("pairing_ping",s),({error:M})=>{M?_(M):w()}),await x()}},this.updateExpiry=async({topic:h,expiry:g})=>{this.isInitialized(),await this.pairings.update(h,{expiry:g})},this.updateMetadata=async({topic:h,metadata:g})=>{this.isInitialized(),await this.pairings.update(h,{peerMetadata:g})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async h=>{this.isInitialized(),await this.isValidDisconnect(h);const{topic:g}=h;this.pairings.keys.includes(g)&&(await this.sendRequest(g,"wc_pairingDelete",Sr("USER_DISCONNECTED")),await this.deletePairing(g))},this.sendRequest=async(h,g,s)=>{const x=Io(g,s),w=await this.core.crypto.encode(h,x),_=qs[g].req;return this.core.history.set(h,x),this.core.relayer.publish(h,w,_),x.id},this.sendResult=async(h,g,s)=>{const x=xu(h,s),w=await this.core.crypto.encode(g,x),_=await this.core.history.get(g,h),M=qs[_.request.method].res;await this.core.relayer.publish(g,w,M),await this.core.history.resolve(x)},this.sendError=async(h,g,s)=>{const x=Ro(h,s),w=await this.core.crypto.encode(g,x),_=await this.core.history.get(g,h),M=qs[_.request.method]?qs[_.request.method].res:qs.unregistered_method.res;await this.core.relayer.publish(g,w,M),await this.core.history.resolve(x)},this.deletePairing=async(h,g)=>{await this.core.relayer.unsubscribe(h),await Promise.all([this.pairings.delete(h,Sr("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(h),g?Promise.resolve():this.core.expirer.del(h)])},this.cleanup=async()=>{const h=this.pairings.getAll().filter(g=>nn(g.expiry));await Promise.all(h.map(g=>this.deletePairing(g.topic)))},this.onRelayEventRequest=h=>{const{topic:g,payload:s}=h,x=s.method;if(this.pairings.keys.includes(g))switch(x){case"wc_pairingPing":return this.onPairingPingRequest(g,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(g,s);default:return this.onUnknownRpcMethodRequest(g,s)}},this.onRelayEventResponse=async h=>{const{topic:g,payload:s}=h,x=(await this.core.history.get(g,s.id)).request.method;if(this.pairings.keys.includes(g))switch(x){case"wc_pairingPing":return this.onPairingPingResponse(g,s);default:return this.onUnknownRpcMethodResponse(x)}},this.onPairingPingRequest=async(h,g)=>{const{id:s}=g;try{this.isValidPing({topic:h}),await this.sendResult(s,h,!0),this.events.emit("pairing_ping",{id:s,topic:h})}catch(x){await this.sendError(s,h,x),this.logger.error(x)}},this.onPairingPingResponse=(h,g)=>{const{id:s}=g;setTimeout(()=>{Ki(g)?this.events.emit(wr("pairing_ping",s),{}):Ei(g)&&this.events.emit(wr("pairing_ping",s),{error:g.error})},500)},this.onPairingDeleteRequest=async(h,g)=>{const{id:s}=g;try{this.isValidDisconnect({topic:h}),await this.deletePairing(h),this.events.emit("pairing_delete",{id:s,topic:h})}catch(x){await this.sendError(s,h,x),this.logger.error(x)}},this.onUnknownRpcMethodRequest=async(h,g)=>{const{id:s,method:x}=g;try{if(this.registeredMethods.includes(x))return;const w=Sr("WC_METHOD_UNSUPPORTED",x);await this.sendError(s,h,w),this.logger.error(w)}catch(w){await this.sendError(s,h,w),this.logger.error(w)}},this.onUnknownRpcMethodResponse=h=>{this.registeredMethods.includes(h)||this.logger.error(Sr("WC_METHOD_UNSUPPORTED",h))},this.isValidPair=h=>{if(!Vr(h)){const{message:g}=Wt("MISSING_OR_INVALID",`pair() params: ${h}`);throw new Error(g)}if(!H9(h.uri)){const{message:g}=Wt("MISSING_OR_INVALID",`pair() uri: ${h.uri}`);throw new Error(g)}},this.isValidPing=async h=>{if(!Vr(h)){const{message:s}=Wt("MISSING_OR_INVALID",`ping() params: ${h}`);throw new Error(s)}const{topic:g}=h;await this.isValidPairingTopic(g)},this.isValidDisconnect=async h=>{if(!Vr(h)){const{message:s}=Wt("MISSING_OR_INVALID",`disconnect() params: ${h}`);throw new Error(s)}const{topic:g}=h;await this.isValidPairingTopic(g)},this.isValidPairingTopic=async h=>{if(!Ar(h,!1)){const{message:g}=Wt("MISSING_OR_INVALID",`pairing topic should be a string: ${h}`);throw new Error(g)}if(!this.pairings.keys.includes(h)){const{message:g}=Wt("NO_MATCHING_KEY",`pairing topic doesn't exist: ${h}`);throw new Error(g)}if(nn(this.pairings.get(h).expiry)){await this.deletePairing(h);const{message:g}=Wt("EXPIRED",`pairing topic: ${h}`);throw new Error(g)}},this.core=i,this.logger=Pe.generateChildLogger(a,this.name),this.pairings=new jo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Pe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:i}=Wt("NOT_INITIALIZED",this.name);throw new Error(i)}}registerRelayerEvents(){this.core.relayer.on(lr.message,async i=>{const{topic:a,message:h}=i;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(h)))return;const g=await this.core.crypto.decode(a,h);Su(g)?(this.core.history.set(a,g),this.onRelayEventRequest({topic:a,payload:g})):Po(g)&&(await this.core.history.resolve(g),this.onRelayEventResponse({topic:a,payload:g}))})}registerExpirerEvents(){this.core.expirer.on(gi.expired,async i=>{const{topic:a}=Qg(i.target);a&&this.pairings.keys.includes(a)&&(await this.deletePairing(a,!0),this.events.emit("pairing_expire",{topic:a}))})}}class qE extends mM{constructor(i,a){super(i,a),this.core=i,this.logger=a,this.records=new Map,this.events=new ri.EventEmitter,this.name=lE,this.version=dE,this.cached=[],this.initialized=!1,this.storagePrefix=an,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(h=>this.records.set(h.id,h)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(h,g,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:h,request:g,chainId:s}),this.records.has(g.id))return;const x={id:g.id,topic:h,request:{method:g.method,params:g.params||null},chainId:s};this.records.set(x.id,x),this.events.emit(Ci.created,x)},this.resolve=async h=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:h}),!this.records.has(h.id))return;const g=await this.getRecord(h.id);typeof g.response>"u"&&(g.response=Ei(h)?{error:h.error}:{result:h.result},this.records.set(g.id,g),this.events.emit(Ci.updated,g))},this.get=async(h,g)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:h,id:g}),await this.getRecord(g)),this.delete=(h,g)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:g}),this.values.forEach(s=>{if(s.topic===h){if(typeof g<"u"&&s.id!==g)return;this.records.delete(s.id),this.events.emit(Ci.deleted,s)}})},this.exists=async(h,g)=>(this.isInitialized(),this.records.has(g)?(await this.getRecord(g)).topic===h:!1),this.on=(h,g)=>{this.events.on(h,g)},this.once=(h,g)=>{this.events.once(h,g)},this.off=(h,g)=>{this.events.off(h,g)},this.removeListener=(h,g)=>{this.events.removeListener(h,g)},this.logger=Pe.generateChildLogger(a,this.name)}get context(){return Pe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const i=[];return this.values.forEach(a=>{if(typeof a.response<"u")return;const h={topic:a.topic,request:Io(a.request.method,a.request.params,a.id),chainId:a.chainId};return i.push(h)}),i}async setJsonRpcRecords(i){await this.core.storage.setItem(this.storageKey,i)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(i){this.isInitialized();const a=this.records.get(i);if(!a){const{message:h}=Wt("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(h)}return a}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Ci.sync)}async restore(){try{const i=await this.getJsonRpcRecords();if(typeof i>"u"||!i.length)return;if(this.records.size){const{message:a}=Wt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(a),new Error(a)}this.cached=i,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}}registerEventListeners(){this.events.on(Ci.created,i=>{const a=Ci.created;this.logger.info(`Emitting ${a}`),this.logger.debug({type:"event",event:a,record:i}),this.persist()}),this.events.on(Ci.updated,i=>{const a=Ci.updated;this.logger.info(`Emitting ${a}`),this.logger.debug({type:"event",event:a,record:i}),this.persist()}),this.events.on(Ci.deleted,i=>{const a=Ci.deleted;this.logger.info(`Emitting ${a}`),this.logger.debug({type:"event",event:a,record:i}),this.persist()})}isInitialized(){if(!this.initialized){const{message:i}=Wt("NOT_INITIALIZED",this.name);throw new Error(i)}}}class UE extends xM{constructor(i,a){super(i,a),this.core=i,this.logger=a,this.expirations=new Map,this.events=new ri.EventEmitter,this.name=pE,this.version=vE,this.cached=[],this.initialized=!1,this.storagePrefix=an,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(h=>this.expirations.set(h.target,h)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=h=>{try{const g=this.formatTarget(h);return typeof this.getExpiration(g)<"u"}catch{return!1}},this.set=(h,g)=>{this.isInitialized();const s=this.formatTarget(h),x={target:s,expiry:g};this.expirations.set(s,x),this.checkExpiry(s,x),this.events.emit(gi.created,{target:s,expiration:x})},this.get=h=>{this.isInitialized();const g=this.formatTarget(h);return this.getExpiration(g)},this.del=h=>{if(this.isInitialized(),this.has(h)){const g=this.formatTarget(h),s=this.getExpiration(g);this.expirations.delete(g),this.events.emit(gi.deleted,{target:g,expiration:s})}},this.on=(h,g)=>{this.events.on(h,g)},this.once=(h,g)=>{this.events.once(h,g)},this.off=(h,g)=>{this.events.off(h,g)},this.removeListener=(h,g)=>{this.events.removeListener(h,g)},this.logger=Pe.generateChildLogger(a,this.name)}get context(){return Pe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(i){if(typeof i=="string")return x9(i);if(typeof i=="number")return E9(i);const{message:a}=Wt("UNKNOWN_TYPE",`Target type: ${typeof i}`);throw new Error(a)}async setExpirations(i){await this.core.storage.setItem(this.storageKey,i)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(gi.sync)}async restore(){try{const i=await this.getExpirations();if(typeof i>"u"||!i.length)return;if(this.expirations.size){const{message:a}=Wt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(a),new Error(a)}this.cached=i,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(i){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(i)}}getExpiration(i){const a=this.expirations.get(i);if(!a){const{message:h}=Wt("NO_MATCHING_KEY",`${this.name}: ${i}`);throw this.logger.error(h),new Error(h)}return a}checkExpiry(i,a){const{expiry:h}=a;ae.toMiliseconds(h)-Date.now()<=0&&this.expire(i,a)}expire(i,a){this.expirations.delete(i),this.events.emit(gi.expired,{target:i,expiration:a})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((i,a)=>this.checkExpiry(a,i))}registerEventListeners(){this.core.heartbeat.on(Zs.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(gi.created,i=>{const a=gi.created;this.logger.info(`Emitting ${a}`),this.logger.debug({type:"event",event:a,data:i}),this.persist()}),this.events.on(gi.expired,i=>{const a=gi.expired;this.logger.info(`Emitting ${a}`),this.logger.debug({type:"event",event:a,data:i}),this.persist()}),this.events.on(gi.deleted,i=>{const a=gi.deleted;this.logger.info(`Emitting ${a}`),this.logger.debug({type:"event",event:a,data:i}),this.persist()})}isInitialized(){if(!this.initialized){const{message:i}=Wt("NOT_INITIALIZED",this.name);throw new Error(i)}}}class kE extends EM{constructor(i,a){super(i,a),this.projectId=i,this.logger=a,this.name=F0,this.initialized=!1,this.init=async h=>{Wg()||!Xu()||(this.verifyUrl=(h==null?void 0:h.verifyUrl)||av,await this.createIframe())},this.register=async h=>{var g;this.initialized||await this.init(),this.iframe&&((g=this.iframe.contentWindow)==null||g.postMessage(h.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${h.attestationId} ${this.verifyUrl}`))},this.resolve=async h=>{var g;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${h.attestationId}`);const s=this.startAbortTimer(ae.FIVE_SECONDS),x=await fetch(`${this.verifyUrl}/attestation/${h.attestationId}`,{signal:this.abortController.signal});return clearTimeout(s),x.status===200?(g=await x.json())==null?void 0:g.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((h,g)=>{if(document.getElementById(F0))return h();const s=document.createElement("iframe");s.setAttribute("id",F0),s.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),s.style.display="none",s.addEventListener("load",()=>{this.initialized=!0,h()}),s.addEventListener("error",x=>{g(x)}),document.body.append(s),this.iframe=s}),new Promise(h=>{setTimeout(()=>h("iframe load timeout"),ae.toMiliseconds(ae.ONE_SECOND/2))})])}catch(h){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(h)}},this.logger=Pe.generateChildLogger(a,this.name),this.verifyUrl=av,this.abortController=new AbortController,this.isDevEnv=Yu()&&{}.IS_VITEST}get context(){return Pe.getLoggerContext(this.logger)}startAbortTimer(i){return setTimeout(()=>this.abortController.abort(),ae.toMiliseconds(i))}}var LE=Object.defineProperty,pv=Object.getOwnPropertySymbols,FE=Object.prototype.hasOwnProperty,$E=Object.prototype.propertyIsEnumerable,vv=(c,i,a)=>i in c?LE(c,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[i]=a,gv=(c,i)=>{for(var a in i||(i={}))FE.call(i,a)&&vv(c,a,i[a]);if(pv)for(var a of pv(i))$E.call(i,a)&&vv(c,a,i[a]);return c};let zE=class gm extends gM{constructor(i){super(i),this.protocol=dm,this.version=zx,this.name=ec,this.events=new ri.EventEmitter,this.initialized=!1,this.on=(h,g)=>this.events.on(h,g),this.once=(h,g)=>this.events.once(h,g),this.off=(h,g)=>this.events.off(h,g),this.removeListener=(h,g)=>this.events.removeListener(h,g),this.projectId=i==null?void 0:i.projectId,this.relayUrl=(i==null?void 0:i.relayUrl)||vm;const a=typeof(i==null?void 0:i.logger)<"u"&&typeof(i==null?void 0:i.logger)!="string"?i.logger:Pe.pino(Pe.getDefaultLoggerOptions({level:(i==null?void 0:i.logger)||jx.logger}));this.logger=Pe.generateChildLogger(a,this.name),this.heartbeat=new Zs.HeartBeat,this.crypto=new mE(this,this.logger,i==null?void 0:i.keychain),this.history=new qE(this,this.logger),this.expirer=new UE(this,this.logger),this.storage=i!=null&&i.storage?i.storage:new oM(gv(gv({},Hx),i==null?void 0:i.storageOptions)),this.relayer=new OE({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new NE(this,this.logger),this.verify=new kE(this.projectId||"",this.logger)}static async init(i){const a=new gm(i);await a.initialize();const h=await a.crypto.getClientId();return await a.storage.setItem(aE,h),a}get context(){return Pe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(i){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,i),this.logger.error(i.message),i}}};const jE=zE,mm="wc",bm=2,ym="client",rc=`${mm}@${bm}:${ym}:`,z0={name:ym,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},HE="WALLETCONNECT_DEEPLINK_CHOICE",KE="proposal",wm="Proposal expired",VE="session",ho=ae.SEVEN_DAYS,GE="engine",ks={wc_sessionPropose:{req:{ttl:ae.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ae.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ae.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ae.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ae.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ae.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ae.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ae.THIRTY_SECONDS,prompt:!1,tag:1115}}},j0={min:ae.FIVE_MINUTES,max:ae.SEVEN_DAYS},WE="request",ZE=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var JE=Object.defineProperty,YE=Object.defineProperties,XE=Object.getOwnPropertyDescriptors,mv=Object.getOwnPropertySymbols,QE=Object.prototype.hasOwnProperty,tS=Object.prototype.propertyIsEnumerable,bv=(c,i,a)=>i in c?JE(c,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[i]=a,vi=(c,i)=>{for(var a in i||(i={}))QE.call(i,a)&&bv(c,a,i[a]);if(mv)for(var a of mv(i))tS.call(i,a)&&bv(c,a,i[a]);return c},H0=(c,i)=>YE(c,XE(i));class eS extends AM{constructor(i){super(i),this.name=GE,this.events=new bu,this.initialized=!1,this.ignoredPayloadTypes=[Bn],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(ks)}),this.initialized=!0)},this.connect=async a=>{this.isInitialized();const h=H0(vi({},a),{requiredNamespaces:a.requiredNamespaces||{},optionalNamespaces:a.optionalNamespaces||{}});await this.isValidConnect(h);const{pairingTopic:g,requiredNamespaces:s,optionalNamespaces:x,sessionProperties:w,relays:_}=h;let M=g,b,S=!1;if(M&&(S=this.client.core.pairing.pairings.get(M).active),!M||!S){const{topic:B,uri:T}=await this.client.core.pairing.create();M=B,b=T}const E=await this.client.core.crypto.generateKeyPair(),D=vi({requiredNamespaces:s,optionalNamespaces:x,relays:_??[{protocol:pm}],proposer:{publicKey:E,metadata:this.client.metadata}},w&&{sessionProperties:w}),{reject:I,resolve:O,done:N}=rs(ae.FIVE_MINUTES,wm);if(this.events.once(wr("session_connect"),async({error:B,session:T})=>{if(B)I(B);else if(T){T.self.publicKey=E;const U=H0(vi({},T),{requiredNamespaces:T.requiredNamespaces,optionalNamespaces:T.optionalNamespaces});await this.client.session.set(T.topic,U),await this.setExpiry(T.topic,T.expiry),M&&await this.client.core.pairing.updateMetadata({topic:M,metadata:T.peer.metadata}),O(U)}}),!M){const{message:B}=Wt("NO_MATCHING_KEY",`connect() pairing topic: ${M}`);throw new Error(B)}const L=await this.sendRequest(M,"wc_sessionPropose",D),R=Bi(ae.FIVE_MINUTES);return await this.setProposal(L,vi({id:L,expiry:R},D)),{uri:b,approval:N}},this.pair=async a=>(this.isInitialized(),await this.client.core.pairing.pair(a)),this.approve=async a=>{this.isInitialized(),await this.isValidApprove(a);const{id:h,relayProtocol:g,namespaces:s,sessionProperties:x}=a,w=this.client.proposal.get(h);let{pairingTopic:_,proposer:M,requiredNamespaces:b,optionalNamespaces:S}=w;_=_||"",Fs(b)||(b=L9(s,"approve()"));const E=await this.client.core.crypto.generateKeyPair(),D=M.publicKey,I=await this.client.core.crypto.generateSharedKey(E,D);_&&h&&(await this.client.core.pairing.updateMetadata({topic:_,metadata:M.metadata}),await this.sendResult(h,_,{relay:{protocol:g??"irn"},responderPublicKey:E}),await this.client.proposal.delete(h,Sr("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:_}));const O=vi({relay:{protocol:g??"irn"},namespaces:s,requiredNamespaces:b,optionalNamespaces:S,pairingTopic:_,controller:{publicKey:E,metadata:this.client.metadata},expiry:Bi(ho)},x&&{sessionProperties:x});await this.client.core.relayer.subscribe(I),await this.sendRequest(I,"wc_sessionSettle",O);const N=H0(vi({},O),{topic:I,pairingTopic:_,acknowledged:!1,self:O.controller,peer:{publicKey:M.publicKey,metadata:M.metadata},controller:E});return await this.client.session.set(I,N),await this.setExpiry(I,Bi(ho)),{topic:I,acknowledged:()=>new Promise(L=>setTimeout(()=>L(this.client.session.get(I)),500))}},this.reject=async a=>{this.isInitialized(),await this.isValidReject(a);const{id:h,reason:g}=a,{pairingTopic:s}=this.client.proposal.get(h);s&&(await this.sendError(h,s,g),await this.client.proposal.delete(h,Sr("USER_DISCONNECTED")))},this.update=async a=>{this.isInitialized(),await this.isValidUpdate(a);const{topic:h,namespaces:g}=a,s=await this.sendRequest(h,"wc_sessionUpdate",{namespaces:g}),{done:x,resolve:w,reject:_}=rs();return this.events.once(wr("session_update",s),({error:M})=>{M?_(M):w()}),await this.client.session.update(h,{namespaces:g}),{acknowledged:x}},this.extend=async a=>{this.isInitialized(),await this.isValidExtend(a);const{topic:h}=a,g=await this.sendRequest(h,"wc_sessionExtend",{}),{done:s,resolve:x,reject:w}=rs();return this.events.once(wr("session_extend",g),({error:_})=>{_?w(_):x()}),await this.setExpiry(h,Bi(ho)),{acknowledged:s}},this.request=async a=>{this.isInitialized(),await this.isValidRequest(a);const{chainId:h,request:g,topic:s,expiry:x}=a,w=await this.sendRequest(s,"wc_sessionRequest",{request:g,chainId:h},x),{done:_,resolve:M,reject:b}=rs(x);this.events.once(wr("session_request",w),({error:E,result:D})=>{E?b(E):M(D)}),this.client.events.emit("session_request_sent",{topic:s,request:g,chainId:h,id:w});const S=await this.client.core.storage.getItem(HE);return S9({id:w,topic:s,wcDeepLink:S}),await _()},this.respond=async a=>{this.isInitialized(),await this.isValidRespond(a);const{topic:h,response:g}=a,{id:s}=g;Ki(g)?await this.sendResult(s,h,g.result):Ei(g)&&await this.sendError(s,h,g.error),this.deletePendingSessionRequest(a.response.id,{message:"fulfilled",code:0})},this.ping=async a=>{this.isInitialized(),await this.isValidPing(a);const{topic:h}=a;if(this.client.session.keys.includes(h)){const g=await this.sendRequest(h,"wc_sessionPing",{}),{done:s,resolve:x,reject:w}=rs();this.events.once(wr("session_ping",g),({error:_})=>{_?w(_):x()}),await s()}else this.client.core.pairing.pairings.keys.includes(h)&&await this.client.core.pairing.ping({topic:h})},this.emit=async a=>{this.isInitialized(),await this.isValidEmit(a);const{topic:h,event:g,chainId:s}=a;await this.sendRequest(h,"wc_sessionEvent",{event:g,chainId:s})},this.disconnect=async a=>{this.isInitialized(),await this.isValidDisconnect(a);const{topic:h}=a;if(this.client.session.keys.includes(h)){const g=Mu().toString();let s;const x=w=>{(w==null?void 0:w.id.toString())===g&&(this.client.core.relayer.events.removeListener(lr.message_ack,x),s())};await Promise.all([new Promise(w=>{s=w,this.client.core.relayer.on(lr.message_ack,x)}),this.sendRequest(h,"wc_sessionDelete",Sr("USER_DISCONNECTED"),void 0,g)]),await this.deleteSession(h)}else await this.client.core.pairing.disconnect({topic:h})},this.find=a=>(this.isInitialized(),this.client.session.getAll().filter(h=>z9(h,a))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async a=>{try{const h=this.client.core.pairing.pairings.get(a.pairingTopic),g=this.client.core.pairing.pairings.getAll().filter(s=>{var x,w;return((x=s.peerMetadata)==null?void 0:x.url)&&((w=s.peerMetadata)==null?void 0:w.url)===a.peer.metadata.url&&s.topic&&s.topic!==h.topic});if(g.length===0)return;this.client.logger.info(`Cleaning up ${g.length} duplicate pairing(s)`),await Promise.all(g.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(h){this.client.logger.error(h)}},this.deleteSession=async(a,h)=>{const{self:g}=this.client.session.get(a);await this.client.core.relayer.unsubscribe(a),this.client.session.delete(a,Sr("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(g.publicKey)&&await this.client.core.crypto.deleteKeyPair(g.publicKey),this.client.core.crypto.keychain.has(a)&&await this.client.core.crypto.deleteSymKey(a),h||this.client.core.expirer.del(a)},this.deleteProposal=async(a,h)=>{await Promise.all([this.client.proposal.delete(a,Sr("USER_DISCONNECTED")),h?Promise.resolve():this.client.core.expirer.del(a)])},this.deletePendingSessionRequest=async(a,h,g=!1)=>{await Promise.all([this.client.pendingRequest.delete(a,h),g?Promise.resolve():this.client.core.expirer.del(a)])},this.setExpiry=async(a,h)=>{this.client.session.keys.includes(a)&&await this.client.session.update(a,{expiry:h}),this.client.core.expirer.set(a,h)},this.setProposal=async(a,h)=>{await this.client.proposal.set(a,h),this.client.core.expirer.set(a,h.expiry)},this.setPendingSessionRequest=async a=>{const h=ks.wc_sessionRequest.req.ttl,{id:g,topic:s,params:x}=a;await this.client.pendingRequest.set(g,{id:g,topic:s,params:x}),h&&this.client.core.expirer.set(g,Bi(h))},this.sendRequest=async(a,h,g,s,x)=>{const w=Io(h,g);if(Xu()&&ZE.includes(h)){const b=is(JSON.stringify(w));await this.client.core.verify.register({attestationId:b})}const _=await this.client.core.crypto.encode(a,w),M=ks[h].req;return s&&(M.ttl=s),x&&(M.id=x),this.client.core.history.set(a,w),this.client.core.relayer.publish(a,_,M),w.id},this.sendResult=async(a,h,g)=>{const s=xu(a,g),x=await this.client.core.crypto.encode(h,s),w=await this.client.core.history.get(h,a),_=ks[w.request.method].res;this.client.core.relayer.publish(h,x,_),await this.client.core.history.resolve(s)},this.sendError=async(a,h,g)=>{const s=Ro(a,g),x=await this.client.core.crypto.encode(h,s),w=await this.client.core.history.get(h,a),_=ks[w.request.method].res;this.client.core.relayer.publish(h,x,_),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const a=[],h=[];this.client.session.getAll().forEach(g=>{nn(g.expiry)&&a.push(g.topic)}),this.client.proposal.getAll().forEach(g=>{nn(g.expiry)&&h.push(g.id)}),await Promise.all([...a.map(g=>this.deleteSession(g)),...h.map(g=>this.deleteProposal(g))])},this.onRelayEventRequest=a=>{const{topic:h,payload:g}=a,s=g.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(h,g);case"wc_sessionSettle":return this.onSessionSettleRequest(h,g);case"wc_sessionUpdate":return this.onSessionUpdateRequest(h,g);case"wc_sessionExtend":return this.onSessionExtendRequest(h,g);case"wc_sessionPing":return this.onSessionPingRequest(h,g);case"wc_sessionDelete":return this.onSessionDeleteRequest(h,g);case"wc_sessionRequest":return this.onSessionRequest(h,g);case"wc_sessionEvent":return this.onSessionEventRequest(h,g);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async a=>{const{topic:h,payload:g}=a,s=(await this.client.core.history.get(h,g.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(h,g);case"wc_sessionSettle":return this.onSessionSettleResponse(h,g);case"wc_sessionUpdate":return this.onSessionUpdateResponse(h,g);case"wc_sessionExtend":return this.onSessionExtendResponse(h,g);case"wc_sessionPing":return this.onSessionPingResponse(h,g);case"wc_sessionRequest":return this.onSessionRequestResponse(h,g);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=a=>{const{topic:h}=a,{message:g}=Wt("MISSING_OR_INVALID",`Decoded payload on topic ${h} is not identifiable as a JSON-RPC request or a response.`);throw new Error(g)},this.onSessionProposeRequest=async(a,h)=>{const{params:g,id:s}=h;try{this.isValidConnect(vi({},h.params));const x=Bi(ae.FIVE_MINUTES),w=vi({id:s,pairingTopic:a,expiry:x},g);await this.setProposal(s,w);const _=is(JSON.stringify(h)),M=await this.getVerifyContext(_,w.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:w,verifyContext:M})}catch(x){await this.sendError(s,a,x),this.client.logger.error(x)}},this.onSessionProposeResponse=async(a,h)=>{const{id:g}=h;if(Ki(h)){const{result:s}=h;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const x=this.client.proposal.get(g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:x});const w=x.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:w});const _=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:_});const M=await this.client.core.crypto.generateSharedKey(w,_);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:M});const b=await this.client.core.relayer.subscribe(M);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:b}),await this.client.core.pairing.activate({topic:a})}else Ei(h)&&(await this.client.proposal.delete(g,Sr("USER_DISCONNECTED")),this.events.emit(wr("session_connect"),{error:h.error}))},this.onSessionSettleRequest=async(a,h)=>{const{id:g,params:s}=h;try{this.isValidSessionSettleRequest(s);const{relay:x,controller:w,expiry:_,namespaces:M,requiredNamespaces:b,optionalNamespaces:S,sessionProperties:E,pairingTopic:D}=h.params,I=vi({topic:a,relay:x,expiry:_,namespaces:M,acknowledged:!0,pairingTopic:D,requiredNamespaces:b,optionalNamespaces:S,controller:w.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:w.publicKey,metadata:w.metadata}},E&&{sessionProperties:E});await this.sendResult(h.id,a,!0),this.events.emit(wr("session_connect"),{session:I}),this.cleanupDuplicatePairings(I)}catch(x){await this.sendError(g,a,x),this.client.logger.error(x)}},this.onSessionSettleResponse=async(a,h)=>{const{id:g}=h;Ki(h)?(await this.client.session.update(a,{acknowledged:!0}),this.events.emit(wr("session_approve",g),{})):Ei(h)&&(await this.client.session.delete(a,Sr("USER_DISCONNECTED")),this.events.emit(wr("session_approve",g),{error:h.error}))},this.onSessionUpdateRequest=async(a,h)=>{const{params:g,id:s}=h;try{this.isValidUpdate(vi({topic:a},g)),await this.client.session.update(a,{namespaces:g.namespaces}),await this.sendResult(s,a,!0),this.client.events.emit("session_update",{id:s,topic:a,params:g})}catch(x){await this.sendError(s,a,x),this.client.logger.error(x)}},this.onSessionUpdateResponse=(a,h)=>{const{id:g}=h;Ki(h)?this.events.emit(wr("session_update",g),{}):Ei(h)&&this.events.emit(wr("session_update",g),{error:h.error})},this.onSessionExtendRequest=async(a,h)=>{const{id:g}=h;try{this.isValidExtend({topic:a}),await this.setExpiry(a,Bi(ho)),await this.sendResult(g,a,!0),this.client.events.emit("session_extend",{id:g,topic:a})}catch(s){await this.sendError(g,a,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(a,h)=>{const{id:g}=h;Ki(h)?this.events.emit(wr("session_extend",g),{}):Ei(h)&&this.events.emit(wr("session_extend",g),{error:h.error})},this.onSessionPingRequest=async(a,h)=>{const{id:g}=h;try{this.isValidPing({topic:a}),await this.sendResult(g,a,!0),this.client.events.emit("session_ping",{id:g,topic:a})}catch(s){await this.sendError(g,a,s),this.client.logger.error(s)}},this.onSessionPingResponse=(a,h)=>{const{id:g}=h;setTimeout(()=>{Ki(h)?this.events.emit(wr("session_ping",g),{}):Ei(h)&&this.events.emit(wr("session_ping",g),{error:h.error})},500)},this.onSessionDeleteRequest=async(a,h)=>{const{id:g}=h;try{this.isValidDisconnect({topic:a,reason:h.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(lr.publish,async()=>{s(await this.deleteSession(a))})}),this.sendResult(g,a,!0)]),this.client.events.emit("session_delete",{id:g,topic:a})}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(a,h)=>{const{id:g,params:s}=h;try{this.isValidRequest(vi({topic:a},s)),await this.setPendingSessionRequest({id:g,topic:a,params:s});const x=is(JSON.stringify(h)),w=this.client.session.get(a),_=await this.getVerifyContext(x,w.peer.metadata);this.client.events.emit("session_request",{id:g,topic:a,params:s,verifyContext:_})}catch(x){await this.sendError(g,a,x),this.client.logger.error(x)}},this.onSessionRequestResponse=(a,h)=>{const{id:g}=h;Ki(h)?this.events.emit(wr("session_request",g),{result:h.result}):Ei(h)&&this.events.emit(wr("session_request",g),{error:h.error})},this.onSessionEventRequest=async(a,h)=>{const{id:g,params:s}=h;try{this.isValidEmit(vi({topic:a},s)),this.client.events.emit("session_event",{id:g,topic:a,params:s})}catch(x){await this.sendError(g,a,x),this.client.logger.error(x)}},this.isValidConnect=async a=>{if(!Vr(a)){const{message:_}=Wt("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(a)}`);throw new Error(_)}const{pairingTopic:h,requiredNamespaces:g,optionalNamespaces:s,sessionProperties:x,relays:w}=a;if(kr(h)||await this.isValidPairingTopic(h),!t7(w,!0)){const{message:_}=Wt("MISSING_OR_INVALID",`connect() relays: ${w}`);throw new Error(_)}!kr(g)&&Fs(g)!==0&&this.validateNamespaces(g,"requiredNamespaces"),!kr(s)&&Fs(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),kr(x)||this.validateSessionProps(x,"sessionProperties")},this.validateNamespaces=(a,h)=>{const g=Q9(a,"connect()",h);if(g)throw new Error(g.message)},this.isValidApprove=async a=>{if(!Vr(a))throw new Error(Wt("MISSING_OR_INVALID",`approve() params: ${a}`).message);const{id:h,namespaces:g,relayProtocol:s,sessionProperties:x}=a;await this.isValidProposalId(h);const w=this.client.proposal.get(h),_=wo(g,"approve()");if(_)throw new Error(_.message);const M=Z1(w.requiredNamespaces,g,"approve()");if(M)throw new Error(M.message);if(!Ar(s,!0)){const{message:b}=Wt("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(b)}kr(x)||this.validateSessionProps(x,"sessionProperties")},this.isValidReject=async a=>{if(!Vr(a)){const{message:s}=Wt("MISSING_OR_INVALID",`reject() params: ${a}`);throw new Error(s)}const{id:h,reason:g}=a;if(await this.isValidProposalId(h),!r7(g)){const{message:s}=Wt("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(g)}`);throw new Error(s)}},this.isValidSessionSettleRequest=a=>{if(!Vr(a)){const{message:M}=Wt("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${a}`);throw new Error(M)}const{relay:h,controller:g,namespaces:s,expiry:x}=a;if(!em(h)){const{message:M}=Wt("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(M)}const w=G9(g,"onSessionSettleRequest()");if(w)throw new Error(w.message);const _=wo(s,"onSessionSettleRequest()");if(_)throw new Error(_.message);if(nn(x)){const{message:M}=Wt("EXPIRED","onSessionSettleRequest()");throw new Error(M)}},this.isValidUpdate=async a=>{if(!Vr(a)){const{message:_}=Wt("MISSING_OR_INVALID",`update() params: ${a}`);throw new Error(_)}const{topic:h,namespaces:g}=a;await this.isValidSessionTopic(h);const s=this.client.session.get(h),x=wo(g,"update()");if(x)throw new Error(x.message);const w=Z1(s.requiredNamespaces,g,"update()");if(w)throw new Error(w.message)},this.isValidExtend=async a=>{if(!Vr(a)){const{message:g}=Wt("MISSING_OR_INVALID",`extend() params: ${a}`);throw new Error(g)}const{topic:h}=a;await this.isValidSessionTopic(h)},this.isValidRequest=async a=>{if(!Vr(a)){const{message:_}=Wt("MISSING_OR_INVALID",`request() params: ${a}`);throw new Error(_)}const{topic:h,request:g,chainId:s,expiry:x}=a;await this.isValidSessionTopic(h);const{namespaces:w}=this.client.session.get(h);if(!W1(w,s)){const{message:_}=Wt("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(_)}if(!i7(g)){const{message:_}=Wt("MISSING_OR_INVALID",`request() ${JSON.stringify(g)}`);throw new Error(_)}if(!a7(w,s,g.method)){const{message:_}=Wt("MISSING_OR_INVALID",`request() method: ${g.method}`);throw new Error(_)}if(x&&!u7(x,j0)){const{message:_}=Wt("MISSING_OR_INVALID",`request() expiry: ${x}. Expiry must be a number (in seconds) between ${j0.min} and ${j0.max}`);throw new Error(_)}},this.isValidRespond=async a=>{if(!Vr(a)){const{message:s}=Wt("MISSING_OR_INVALID",`respond() params: ${a}`);throw new Error(s)}const{topic:h,response:g}=a;if(await this.isValidSessionTopic(h),!n7(g)){const{message:s}=Wt("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(g)}`);throw new Error(s)}},this.isValidPing=async a=>{if(!Vr(a)){const{message:g}=Wt("MISSING_OR_INVALID",`ping() params: ${a}`);throw new Error(g)}const{topic:h}=a;await this.isValidSessionOrPairingTopic(h)},this.isValidEmit=async a=>{if(!Vr(a)){const{message:w}=Wt("MISSING_OR_INVALID",`emit() params: ${a}`);throw new Error(w)}const{topic:h,event:g,chainId:s}=a;await this.isValidSessionTopic(h);const{namespaces:x}=this.client.session.get(h);if(!W1(x,s)){const{message:w}=Wt("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(w)}if(!s7(g)){const{message:w}=Wt("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(g)}`);throw new Error(w)}if(!o7(x,s,g.name)){const{message:w}=Wt("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(g)}`);throw new Error(w)}},this.isValidDisconnect=async a=>{if(!Vr(a)){const{message:g}=Wt("MISSING_OR_INVALID",`disconnect() params: ${a}`);throw new Error(g)}const{topic:h}=a;await this.isValidSessionOrPairingTopic(h)},this.getVerifyContext=async(a,h)=>{const g={verified:{verifyUrl:h.verifyUrl||"",validation:"UNKNOWN",origin:h.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:a,verifyUrl:h.verifyUrl});s&&(g.verified.origin=s,g.verified.validation=s===h.url?"VALID":"INVALID")}catch(s){this.client.logger.error(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(g)}`),g},this.validateSessionProps=(a,h)=>{Object.values(a).forEach(g=>{if(!Ar(g,!1)){const{message:s}=Wt("MISSING_OR_INVALID",`${h} must be in Record<string, string> format. Received: ${JSON.stringify(g)}`);throw new Error(s)}})}}isInitialized(){if(!this.initialized){const{message:i}=Wt("NOT_INITIALIZED",this.name);throw new Error(i)}}registerRelayerEvents(){this.client.core.relayer.on(lr.message,async i=>{const{topic:a,message:h}=i;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(h)))return;const g=await this.client.core.crypto.decode(a,h);Su(g)?(this.client.core.history.set(a,g),this.onRelayEventRequest({topic:a,payload:g})):Po(g)?(await this.client.core.history.resolve(g),this.onRelayEventResponse({topic:a,payload:g})):this.onRelayEventUnknownPayload({topic:a,payload:g})})}registerExpirerEvents(){this.client.core.expirer.on(gi.expired,async i=>{const{topic:a,id:h}=Qg(i.target);if(h&&this.client.pendingRequest.keys.includes(h))return await this.deletePendingSessionRequest(h,Wt("EXPIRED"),!0);a?this.client.session.keys.includes(a)&&(await this.deleteSession(a,!0),this.client.events.emit("session_expire",{topic:a})):h&&(await this.deleteProposal(h,!0),this.client.events.emit("proposal_expire",{id:h}))})}isValidPairingTopic(i){if(!Ar(i,!1)){const{message:a}=Wt("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(a)}if(!this.client.core.pairing.pairings.keys.includes(i)){const{message:a}=Wt("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(a)}if(nn(this.client.core.pairing.pairings.get(i).expiry)){const{message:a}=Wt("EXPIRED",`pairing topic: ${i}`);throw new Error(a)}}async isValidSessionTopic(i){if(!Ar(i,!1)){const{message:a}=Wt("MISSING_OR_INVALID",`session topic should be a string: ${i}`);throw new Error(a)}if(!this.client.session.keys.includes(i)){const{message:a}=Wt("NO_MATCHING_KEY",`session topic doesn't exist: ${i}`);throw new Error(a)}if(nn(this.client.session.get(i).expiry)){await this.deleteSession(i);const{message:a}=Wt("EXPIRED",`session topic: ${i}`);throw new Error(a)}}async isValidSessionOrPairingTopic(i){if(this.client.session.keys.includes(i))await this.isValidSessionTopic(i);else if(this.client.core.pairing.pairings.keys.includes(i))this.isValidPairingTopic(i);else if(Ar(i,!1)){const{message:a}=Wt("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${i}`);throw new Error(a)}else{const{message:a}=Wt("MISSING_OR_INVALID",`session or pairing topic should be a string: ${i}`);throw new Error(a)}}async isValidProposalId(i){if(!e7(i)){const{message:a}=Wt("MISSING_OR_INVALID",`proposal id should be a number: ${i}`);throw new Error(a)}if(!this.client.proposal.keys.includes(i)){const{message:a}=Wt("NO_MATCHING_KEY",`proposal id doesn't exist: ${i}`);throw new Error(a)}if(nn(this.client.proposal.get(i).expiry)){await this.deleteProposal(i);const{message:a}=Wt("EXPIRED",`proposal id: ${i}`);throw new Error(a)}}}class rS extends jo{constructor(i,a){super(i,a,KE,rc),this.core=i,this.logger=a}}class iS extends jo{constructor(i,a){super(i,a,VE,rc),this.core=i,this.logger=a}}class nS extends jo{constructor(i,a){super(i,a,WE,rc,h=>h.id),this.core=i,this.logger=a}}let sS=class _m extends SM{constructor(i){super(i),this.protocol=mm,this.version=bm,this.name=z0.name,this.events=new ri.EventEmitter,this.on=(h,g)=>this.events.on(h,g),this.once=(h,g)=>this.events.once(h,g),this.off=(h,g)=>this.events.off(h,g),this.removeListener=(h,g)=>this.events.removeListener(h,g),this.removeAllListeners=h=>this.events.removeAllListeners(h),this.connect=async h=>{try{return await this.engine.connect(h)}catch(g){throw this.logger.error(g.message),g}},this.pair=async h=>{try{return await this.engine.pair(h)}catch(g){throw this.logger.error(g.message),g}},this.approve=async h=>{try{return await this.engine.approve(h)}catch(g){throw this.logger.error(g.message),g}},this.reject=async h=>{try{return await this.engine.reject(h)}catch(g){throw this.logger.error(g.message),g}},this.update=async h=>{try{return await this.engine.update(h)}catch(g){throw this.logger.error(g.message),g}},this.extend=async h=>{try{return await this.engine.extend(h)}catch(g){throw this.logger.error(g.message),g}},this.request=async h=>{try{return await this.engine.request(h)}catch(g){throw this.logger.error(g.message),g}},this.respond=async h=>{try{return await this.engine.respond(h)}catch(g){throw this.logger.error(g.message),g}},this.ping=async h=>{try{return await this.engine.ping(h)}catch(g){throw this.logger.error(g.message),g}},this.emit=async h=>{try{return await this.engine.emit(h)}catch(g){throw this.logger.error(g.message),g}},this.disconnect=async h=>{try{return await this.engine.disconnect(h)}catch(g){throw this.logger.error(g.message),g}},this.find=h=>{try{return this.engine.find(h)}catch(g){throw this.logger.error(g.message),g}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(h){throw this.logger.error(h.message),h}},this.name=(i==null?void 0:i.name)||z0.name,this.metadata=(i==null?void 0:i.metadata)||b9();const a=typeof(i==null?void 0:i.logger)<"u"&&typeof(i==null?void 0:i.logger)!="string"?i.logger:Pe.pino(Pe.getDefaultLoggerOptions({level:(i==null?void 0:i.logger)||z0.logger}));this.core=(i==null?void 0:i.core)||new jE(i),this.logger=Pe.generateChildLogger(a,this.name),this.session=new iS(this.core,this.logger),this.proposal=new rS(this.core,this.logger),this.pendingRequest=new nS(this.core,this.logger),this.engine=new eS(this)}static async init(i){const a=new _m(i);return await a.initialize(),a}get context(){return Pe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(i){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(i.message),i}}};var ic={};Object.defineProperty(ic,"__esModule",{value:!0});ic.getWindowMetadata=void 0;const yv=Eu;function aS(){let c,i;try{c=yv.getDocumentOrThrow(),i=yv.getLocationOrThrow()}catch{return null}function a(){const S=c.getElementsByTagName("link"),E=[];for(let D=0;D<S.length;D++){const I=S[D],O=I.getAttribute("rel");if(O&&O.toLowerCase().indexOf("icon")>-1){const N=I.getAttribute("href");if(N)if(N.toLowerCase().indexOf("https:")===-1&&N.toLowerCase().indexOf("http:")===-1&&N.indexOf("//")!==0){let L=i.protocol+"//"+i.host;if(N.indexOf("/")===0)L+=N;else{const R=i.pathname.split("/");R.pop();const B=R.join("/");L+=B+"/"+N}E.push(L)}else if(N.indexOf("//")===0){const L=i.protocol+N;E.push(L)}else E.push(N)}}return E}function h(...S){const E=c.getElementsByTagName("meta");for(let D=0;D<E.length;D++){const I=E[D],O=["itemprop","property","name"].map(N=>I.getAttribute(N)).filter(N=>N?S.includes(N):!1);if(O.length&&O){const N=I.getAttribute("content");if(N)return N}}return""}function g(){let S=h("name","og:site_name","og:title","twitter:title");return S||(S=c.title),S}function s(){return h("description","og:description","twitter:description","keywords")}const x=g(),w=s(),_=i.origin,M=a();return{description:w,url:_,icons:M,name:x}}ic.getWindowMetadata=aS;var oS={};(function(c){const i=wu,a=_u,h=yu,g=Ku,s=R=>R==null,x=Symbol("encodeFragmentIdentifier");function w(R){switch(R.arrayFormat){case"index":return B=>(T,U)=>{const k=T.length;return U===void 0||R.skipNull&&U===null||R.skipEmptyString&&U===""?T:U===null?[...T,[b(B,R),"[",k,"]"].join("")]:[...T,[b(B,R),"[",b(k,R),"]=",b(U,R)].join("")]};case"bracket":return B=>(T,U)=>U===void 0||R.skipNull&&U===null||R.skipEmptyString&&U===""?T:U===null?[...T,[b(B,R),"[]"].join("")]:[...T,[b(B,R),"[]=",b(U,R)].join("")];case"colon-list-separator":return B=>(T,U)=>U===void 0||R.skipNull&&U===null||R.skipEmptyString&&U===""?T:U===null?[...T,[b(B,R),":list="].join("")]:[...T,[b(B,R),":list=",b(U,R)].join("")];case"comma":case"separator":case"bracket-separator":{const B=R.arrayFormat==="bracket-separator"?"[]=":"=";return T=>(U,k)=>k===void 0||R.skipNull&&k===null||R.skipEmptyString&&k===""?U:(k=k===null?"":k,U.length===0?[[b(T,R),B,b(k,R)].join("")]:[[U,b(k,R)].join(R.arrayFormatSeparator)])}default:return B=>(T,U)=>U===void 0||R.skipNull&&U===null||R.skipEmptyString&&U===""?T:U===null?[...T,b(B,R)]:[...T,[b(B,R),"=",b(U,R)].join("")]}}function _(R){let B;switch(R.arrayFormat){case"index":return(T,U,k)=>{if(B=/\[(\d*)\]$/.exec(T),T=T.replace(/\[\d*\]$/,""),!B){k[T]=U;return}k[T]===void 0&&(k[T]={}),k[T][B[1]]=U};case"bracket":return(T,U,k)=>{if(B=/(\[\])$/.exec(T),T=T.replace(/\[\]$/,""),!B){k[T]=U;return}if(k[T]===void 0){k[T]=[U];return}k[T]=[].concat(k[T],U)};case"colon-list-separator":return(T,U,k)=>{if(B=/(:list)$/.exec(T),T=T.replace(/:list$/,""),!B){k[T]=U;return}if(k[T]===void 0){k[T]=[U];return}k[T]=[].concat(k[T],U)};case"comma":case"separator":return(T,U,k)=>{const P=typeof U=="string"&&U.includes(R.arrayFormatSeparator),F=typeof U=="string"&&!P&&S(U,R).includes(R.arrayFormatSeparator);U=F?S(U,R):U;const G=P||F?U.split(R.arrayFormatSeparator).map(nt=>S(nt,R)):U===null?U:S(U,R);k[T]=G};case"bracket-separator":return(T,U,k)=>{const P=/(\[\])$/.test(T);if(T=T.replace(/\[\]$/,""),!P){k[T]=U&&S(U,R);return}const F=U===null?[]:U.split(R.arrayFormatSeparator).map(G=>S(G,R));if(k[T]===void 0){k[T]=F;return}k[T]=[].concat(k[T],F)};default:return(T,U,k)=>{if(k[T]===void 0){k[T]=U;return}k[T]=[].concat(k[T],U)}}}function M(R){if(typeof R!="string"||R.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function b(R,B){return B.encode?B.strict?i(R):encodeURIComponent(R):R}function S(R,B){return B.decode?a(R):R}function E(R){return Array.isArray(R)?R.sort():typeof R=="object"?E(Object.keys(R)).sort((B,T)=>Number(B)-Number(T)).map(B=>R[B]):R}function D(R){const B=R.indexOf("#");return B!==-1&&(R=R.slice(0,B)),R}function I(R){let B="";const T=R.indexOf("#");return T!==-1&&(B=R.slice(T)),B}function O(R){R=D(R);const B=R.indexOf("?");return B===-1?"":R.slice(B+1)}function N(R,B){return B.parseNumbers&&!Number.isNaN(Number(R))&&typeof R=="string"&&R.trim()!==""?R=Number(R):B.parseBooleans&&R!==null&&(R.toLowerCase()==="true"||R.toLowerCase()==="false")&&(R=R.toLowerCase()==="true"),R}function L(R,B){B=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},B),M(B.arrayFormatSeparator);const T=_(B),U=Object.create(null);if(typeof R!="string"||(R=R.trim().replace(/^[?#&]/,""),!R))return U;for(const k of R.split("&")){if(k==="")continue;let[P,F]=h(B.decode?k.replace(/\+/g," "):k,"=");F=F===void 0?null:["comma","separator","bracket-separator"].includes(B.arrayFormat)?F:S(F,B),T(S(P,B),F,U)}for(const k of Object.keys(U)){const P=U[k];if(typeof P=="object"&&P!==null)for(const F of Object.keys(P))P[F]=N(P[F],B);else U[k]=N(P,B)}return B.sort===!1?U:(B.sort===!0?Object.keys(U).sort():Object.keys(U).sort(B.sort)).reduce((k,P)=>{const F=U[P];return F&&typeof F=="object"&&!Array.isArray(F)?k[P]=E(F):k[P]=F,k},Object.create(null))}c.extract=O,c.parse=L,c.stringify=(R,B)=>{if(!R)return"";B=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},B),M(B.arrayFormatSeparator);const T=F=>B.skipNull&&s(R[F])||B.skipEmptyString&&R[F]==="",U=w(B),k={};for(const F of Object.keys(R))T(F)||(k[F]=R[F]);const P=Object.keys(k);return B.sort!==!1&&P.sort(B.sort),P.map(F=>{const G=R[F];return G===void 0?"":G===null?b(F,B):Array.isArray(G)?G.length===0&&B.arrayFormat==="bracket-separator"?b(F,B)+"[]":G.reduce(U(F),[]).join("&"):b(F,B)+"="+b(G,B)}).filter(F=>F.length>0).join("&")},c.parseUrl=(R,B)=>{B=Object.assign({decode:!0},B);const[T,U]=h(R,"#");return Object.assign({url:T.split("?")[0]||"",query:L(O(R),B)},B&&B.parseFragmentIdentifier&&U?{fragmentIdentifier:S(U,B)}:{})},c.stringifyUrl=(R,B)=>{B=Object.assign({encode:!0,strict:!0,[x]:!0},B);const T=D(R.url).split("?")[0]||"",U=c.extract(R.url),k=c.parse(U,{sort:!1}),P=Object.assign(k,R.query);let F=c.stringify(P,B);F&&(F=`?${F}`);let G=I(R.url);return R.fragmentIdentifier&&(G=`#${B[x]?b(R.fragmentIdentifier,B):R.fragmentIdentifier}`),`${T}${F}${G}`},c.pick=(R,B,T)=>{T=Object.assign({parseFragmentIdentifier:!0,[x]:!1},T);const{url:U,query:k,fragmentIdentifier:P}=c.parseUrl(R,T);return c.stringifyUrl({url:U,query:g(k,B),fragmentIdentifier:P},T)},c.exclude=(R,B,T)=>{const U=Array.isArray(B)?k=>!B.includes(k):(k,P)=>!B(k,P);return c.pick(R,U,T)}})(oS);function K0(c=[],i=[]){return[...new Set([...c,...i])]}function Mm(c){return c.includes(":")}function _o(c){return Mm(c)?c.split(":")[0]:c}const fS={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function wv(c,i){const{message:a,code:h}=fS[c];return{message:i?`${a} ${i}`:a,code:h}}function hS(c,i){return Array.isArray(c)?typeof i<"u"&&c.length?c.every(i):!0:!1}function uS(c){return Object.getPrototypeOf(c)===Object.prototype&&Object.keys(c).length}var hu={exports:{}};(function(c,i){var a=typeof self<"u"?self:Ee,h=function(){function s(){this.fetch=!1,this.DOMException=a.DOMException}return s.prototype=a,new s}();(function(s){(function(x){var w={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function _(n){return n&&DataView.prototype.isPrototypeOf(n)}if(w.arrayBuffer)var M=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=ArrayBuffer.isView||function(n){return n&&M.indexOf(Object.prototype.toString.call(n))>-1};function S(n){if(typeof n!="string"&&(n=String(n)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(n))throw new TypeError("Invalid character in header field name");return n.toLowerCase()}function E(n){return typeof n!="string"&&(n=String(n)),n}function D(n){var o={next:function(){var d=n.shift();return{done:d===void 0,value:d}}};return w.iterable&&(o[Symbol.iterator]=function(){return o}),o}function I(n){this.map={},n instanceof I?n.forEach(function(o,d){this.append(d,o)},this):Array.isArray(n)?n.forEach(function(o){this.append(o[0],o[1])},this):n&&Object.getOwnPropertyNames(n).forEach(function(o){this.append(o,n[o])},this)}I.prototype.append=function(n,o){n=S(n),o=E(o);var d=this.map[n];this.map[n]=d?d+", "+o:o},I.prototype.delete=function(n){delete this.map[S(n)]},I.prototype.get=function(n){return n=S(n),this.has(n)?this.map[n]:null},I.prototype.has=function(n){return this.map.hasOwnProperty(S(n))},I.prototype.set=function(n,o){this.map[S(n)]=E(o)},I.prototype.forEach=function(n,o){for(var d in this.map)this.map.hasOwnProperty(d)&&n.call(o,this.map[d],d,this)},I.prototype.keys=function(){var n=[];return this.forEach(function(o,d){n.push(d)}),D(n)},I.prototype.values=function(){var n=[];return this.forEach(function(o){n.push(o)}),D(n)},I.prototype.entries=function(){var n=[];return this.forEach(function(o,d){n.push([d,o])}),D(n)},w.iterable&&(I.prototype[Symbol.iterator]=I.prototype.entries);function O(n){if(n.bodyUsed)return Promise.reject(new TypeError("Already read"));n.bodyUsed=!0}function N(n){return new Promise(function(o,d){n.onload=function(){o(n.result)},n.onerror=function(){d(n.error)}})}function L(n){var o=new FileReader,d=N(o);return o.readAsArrayBuffer(n),d}function R(n){var o=new FileReader,d=N(o);return o.readAsText(n),d}function B(n){for(var o=new Uint8Array(n),d=new Array(o.length),m=0;m<o.length;m++)d[m]=String.fromCharCode(o[m]);return d.join("")}function T(n){if(n.slice)return n.slice(0);var o=new Uint8Array(n.byteLength);return o.set(new Uint8Array(n)),o.buffer}function U(){return this.bodyUsed=!1,this._initBody=function(n){this._bodyInit=n,n?typeof n=="string"?this._bodyText=n:w.blob&&Blob.prototype.isPrototypeOf(n)?this._bodyBlob=n:w.formData&&FormData.prototype.isPrototypeOf(n)?this._bodyFormData=n:w.searchParams&&URLSearchParams.prototype.isPrototypeOf(n)?this._bodyText=n.toString():w.arrayBuffer&&w.blob&&_(n)?(this._bodyArrayBuffer=T(n.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):w.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(n)||b(n))?this._bodyArrayBuffer=T(n):this._bodyText=n=Object.prototype.toString.call(n):this._bodyText="",this.headers.get("content-type")||(typeof n=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):w.searchParams&&URLSearchParams.prototype.isPrototypeOf(n)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},w.blob&&(this.blob=function(){var n=O(this);if(n)return n;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?O(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(L)}),this.text=function(){var n=O(this);if(n)return n;if(this._bodyBlob)return R(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(B(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},w.formData&&(this.formData=function(){return this.text().then(G)}),this.json=function(){return this.text().then(JSON.parse)},this}var k=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function P(n){var o=n.toUpperCase();return k.indexOf(o)>-1?o:n}function F(n,o){o=o||{};var d=o.body;if(n instanceof F){if(n.bodyUsed)throw new TypeError("Already read");this.url=n.url,this.credentials=n.credentials,o.headers||(this.headers=new I(n.headers)),this.method=n.method,this.mode=n.mode,this.signal=n.signal,!d&&n._bodyInit!=null&&(d=n._bodyInit,n.bodyUsed=!0)}else this.url=String(n);if(this.credentials=o.credentials||this.credentials||"same-origin",(o.headers||!this.headers)&&(this.headers=new I(o.headers)),this.method=P(o.method||this.method||"GET"),this.mode=o.mode||this.mode||null,this.signal=o.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&d)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(d)}F.prototype.clone=function(){return new F(this,{body:this._bodyInit})};function G(n){var o=new FormData;return n.trim().split("&").forEach(function(d){if(d){var m=d.split("="),y=m.shift().replace(/\+/g," "),u=m.join("=").replace(/\+/g," ");o.append(decodeURIComponent(y),decodeURIComponent(u))}}),o}function nt(n){var o=new I,d=n.replace(/\r?\n[\t ]+/g," ");return d.split(/\r?\n/).forEach(function(m){var y=m.split(":"),u=y.shift().trim();if(u){var e=y.join(":").trim();o.append(u,e)}}),o}U.call(F.prototype);function v(n,o){o||(o={}),this.type="default",this.status=o.status===void 0?200:o.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in o?o.statusText:"OK",this.headers=new I(o.headers),this.url=o.url||"",this._initBody(n)}U.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new I(this.headers),url:this.url})},v.error=function(){var n=new v(null,{status:0,statusText:""});return n.type="error",n};var t=[301,302,303,307,308];v.redirect=function(n,o){if(t.indexOf(o)===-1)throw new RangeError("Invalid status code");return new v(null,{status:o,headers:{location:n}})},x.DOMException=s.DOMException;try{new x.DOMException}catch{x.DOMException=function(o,d){this.message=o,this.name=d;var m=Error(o);this.stack=m.stack},x.DOMException.prototype=Object.create(Error.prototype),x.DOMException.prototype.constructor=x.DOMException}function r(n,o){return new Promise(function(d,m){var y=new F(n,o);if(y.signal&&y.signal.aborted)return m(new x.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function e(){u.abort()}u.onload=function(){var l={status:u.status,statusText:u.statusText,headers:nt(u.getAllResponseHeaders()||"")};l.url="responseURL"in u?u.responseURL:l.headers.get("X-Request-URL");var z="response"in u?u.response:u.responseText;d(new v(z,l))},u.onerror=function(){m(new TypeError("Network request failed"))},u.ontimeout=function(){m(new TypeError("Network request failed"))},u.onabort=function(){m(new x.DOMException("Aborted","AbortError"))},u.open(y.method,y.url,!0),y.credentials==="include"?u.withCredentials=!0:y.credentials==="omit"&&(u.withCredentials=!1),"responseType"in u&&w.blob&&(u.responseType="blob"),y.headers.forEach(function(l,z){u.setRequestHeader(z,l)}),y.signal&&(y.signal.addEventListener("abort",e),u.onreadystatechange=function(){u.readyState===4&&y.signal.removeEventListener("abort",e)}),u.send(typeof y._bodyInit>"u"?null:y._bodyInit)})}return r.polyfill=!0,s.fetch||(s.fetch=r,s.Headers=I,s.Request=F,s.Response=v),x.Headers=I,x.Request=F,x.Response=v,x.fetch=r,Object.defineProperty(x,"__esModule",{value:!0}),x})({})})(h),h.fetch.ponyfill=!0,delete h.fetch.polyfill;var g=h;i=g.fetch,i.default=g.fetch,i.fetch=g.fetch,i.Headers=g.Headers,i.Request=g.Request,i.Response=g.Response,c.exports=i})(hu,hu.exports);var cS=hu.exports;const _v=Bv(cS),lS={Accept:"application/json","Content-Type":"application/json"},dS="POST",Mv={headers:lS,method:dS},xv=10;class Nn{constructor(i,a=!1){if(this.url=i,this.disableProviderPing=a,this.events=new ri.EventEmitter,this.isAvailable=!1,this.registering=!1,!sd(i))throw new Error(`Provided URL is not compatible with HTTP connection: ${i}`);this.url=i,this.disableProviderPing=a}get connected(){return this.isAvailable}get connecting(){return this.registering}on(i,a){this.events.on(i,a)}once(i,a){this.events.once(i,a)}off(i,a){this.events.off(i,a)}removeListener(i,a){this.events.removeListener(i,a)}async open(i=this.url){await this.register(i)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(i,a){this.isAvailable||await this.register();try{const h=zs(i),s=await(await _v(this.url,Object.assign(Object.assign({},Mv),{body:h}))).json();this.onPayload({data:s})}catch(h){this.onError(i.id,h)}}async register(i=this.url){if(!sd(i))throw new Error(`Provided URL is not compatible with HTTP connection: ${i}`);if(this.registering){const a=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=a||this.events.listenerCount("open")>=a)&&this.events.setMaxListeners(a+1),new Promise((h,g)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),g(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return g(new Error("HTTP connection is missing or invalid"));h()})})}this.url=i,this.registering=!0;try{if(!this.disableProviderPing){const a=zs({id:1,jsonrpc:"2.0",method:"test",params:[]});await _v(i,Object.assign(Object.assign({},Mv),{body:a}))}this.onOpen()}catch(a){const h=this.parseError(a);throw this.events.emit("register_error",h),this.onClose(),h}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(i){if(typeof i.data>"u")return;const a=typeof i.data=="string"?Vu(i.data):i.data;this.events.emit("payload",a)}onError(i,a){const h=this.parseError(a),g=h.message||h.toString(),s=Ro(i,g);this.events.emit("payload",s)}parseError(i,a=this.url){return Uv(i,a,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>xv&&this.events.setMaxListeners(xv)}}const Ev="error",pS="wss://relay.walletconnect.com",vS="wc",gS="universal_provider",Sv=`${vS}@2:${gS}:`,mS="https://rpc.walletconnect.com/v1",un={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof sn<"u"?sn:typeof self<"u"?self:{},uu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(c,i){(function(){var a,h="4.17.21",g=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",x="Expected a function",w="Invalid `variable` option passed into `_.template`",_="__lodash_hash_undefined__",M=500,b="__lodash_placeholder__",S=1,E=2,D=4,I=1,O=2,N=1,L=2,R=4,B=8,T=16,U=32,k=64,P=128,F=256,G=512,nt=30,v="...",t=800,r=16,n=1,o=2,d=3,m=1/0,y=9007199254740991,u=17976931348623157e292,e=0/0,l=4294967295,z=l-1,$=l>>>1,H=[["ary",P],["bind",N],["bindKey",L],["curry",B],["curryRight",T],["flip",G],["partial",U],["partialRight",k],["rearg",F]],W="[object Arguments]",tt="[object Array]",Z="[object AsyncFunction]",et="[object Boolean]",K="[object Date]",C="[object DOMException]",Q="[object Error]",rt="[object Function]",st="[object GeneratorFunction]",Yt="[object Map]",gt="[object Number]",mt="[object Null]",ee="[object Object]",_t="[object Promise]",Mt="[object Proxy]",re="[object RegExp]",ut="[object Set]",pt="[object String]",Xt="[object Symbol]",vt="[object Undefined]",lt="[object WeakMap]",Qt="[object WeakSet]",ht="[object ArrayBuffer]",dt="[object DataView]",ie="[object Float32Array]",ct="[object Float64Array]",bt="[object Int8Array]",ne="[object Int16Array]",yt="[object Int32Array]",wt="[object Uint8Array]",se="[object Uint8ClampedArray]",Bt="[object Uint16Array]",Ut="[object Uint32Array]",Fe=/\b__p \+= '';/g,Nt=/\b(__p \+=) '' \+/g,kt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ar=/&(?:amp|lt|gt|quot|#39);/g,Lt=/[&<>"']/g,Et=RegExp(ar.source),pe=RegExp(Lt.source),St=/<%-([\s\S]+?)%>/g,At=/<%([\s\S]+?)%>/g,ge=/<%=([\s\S]+?)%>/g,xt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pt=/^\w*$/,Me=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dt=/[\\^$.*+?()[\]{}|]/g,Ot=RegExp(Dt.source),ye=/^\s+/,Rt=/\s/,It=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,Ct=/,? & /,Tt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dr=/[()=,{}\[\]\/\s]/,Ft=/\\(\\)?/g,$t=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Se=/\w*$/,He=/^[-+]0x[0-9a-f]+$/i,Ke=/^0b[01]+$/i,Ve=/^\[object .+?Constructor\]$/,Ge=/^0o[0-7]+$/i,We=/^(?:0|[1-9]\d*)$/,Oe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Be=/($^)/,Ze=/['\n\r\u2028\u2029\\]/g,Ne="\\ud800-\\udfff",Je="\\u0300-\\u036f",Ye="\\ufe20-\\ufe2f",qe="\\u20d0-\\u20ff",$e=Je+Ye+qe,ze="\\u2700-\\u27bf",De="a-z\\xdf-\\xf6\\xf8-\\xff",Xe="\\xac\\xb1\\xd7\\xf7",Qe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",tr="\\u2000-\\u206f",Ho=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qs="A-Z\\xc0-\\xd6\\xd8-\\xde",ta="\\ufe0e\\ufe0f",cn=Xe+Qe+tr+Ho,fs="[']",ln="["+Ne+"]",hs="["+cn+"]",dn="["+$e+"]",ea="\\d+",Ko="["+ze+"]",ra="["+De+"]",ia="[^"+Ne+cn+ea+ze+De+Qs+"]",qn="\\ud83c[\\udffb-\\udfff]",Vo="(?:"+dn+"|"+qn+")",na="[^"+Ne+"]",Un="(?:\\ud83c[\\udde6-\\uddff]){2}",Gi="[\\ud800-\\udbff][\\udc00-\\udfff]",Wr="["+Qs+"]",sa="\\u200d",aa="(?:"+ra+"|"+ia+")",Ai="(?:"+Wr+"|"+ia+")",oa="(?:"+fs+"(?:d|ll|m|re|s|t|ve))?",fa="(?:"+fs+"(?:D|LL|M|RE|S|T|VE))?",ha=Vo+"?",ua="["+ta+"]?",Go="(?:"+sa+"(?:"+[na,Un,Gi].join("|")+")"+ua+ha+")*",Ni="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ca="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",la=ua+ha+Go,kn="(?:"+[Ko,Un,Gi].join("|")+")"+la,Wo="(?:"+[na+dn+"?",dn,Un,Gi,ln].join("|")+")",us=RegExp(fs,"g"),Zo=RegExp(dn,"g"),Ln=RegExp(qn+"(?="+qn+")|"+Wo+la,"g"),da=RegExp([Wr+"?"+ra+"+"+oa+"(?="+[hs,Wr,"$"].join("|")+")",Ai+"+"+fa+"(?="+[hs,Wr+aa,"$"].join("|")+")",Wr+"?"+aa+"+"+oa,Wr+"+"+fa,ca,Ni,ea,kn].join("|"),"g"),pa=RegExp("["+sa+Ne+$e+ta+"]"),pn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,va=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Jo=-1,er={};er[ie]=er[ct]=er[bt]=er[ne]=er[yt]=er[wt]=er[se]=er[Bt]=er[Ut]=!0,er[W]=er[tt]=er[ht]=er[et]=er[dt]=er[K]=er[Q]=er[rt]=er[Yt]=er[gt]=er[ee]=er[re]=er[ut]=er[pt]=er[lt]=!1;var je={};je[W]=je[tt]=je[ht]=je[dt]=je[et]=je[K]=je[ie]=je[ct]=je[bt]=je[ne]=je[yt]=je[Yt]=je[gt]=je[ee]=je[re]=je[ut]=je[pt]=je[Xt]=je[wt]=je[se]=je[Bt]=je[Ut]=!0,je[Q]=je[rt]=je[lt]=!1;var Y={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},at={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Kt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Zt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rr=parseFloat,le=parseInt,or=typeof Ls=="object"&&Ls&&Ls.Object===Object&&Ls,br=typeof self=="object"&&self&&self.Object===Object&&self,Ie=or||br||Function("return this")(),ir=i&&!i.nodeType&&i,pr=ir&&!0&&c&&!c.nodeType&&c,$r=pr&&pr.exports===ir,yr=$r&&or.process,fr=function(){try{var ot=pr&&pr.require&&pr.require("util").types;return ot||yr&&yr.binding&&yr.binding("util")}catch{}}(),Tr=fr&&fr.isArrayBuffer,yi=fr&&fr.isDate,ni=fr&&fr.isMap,Di=fr&&fr.isRegExp,cs=fr&&fr.isSet,vn=fr&&fr.isTypedArray;function xr(ot,zt,qt){switch(qt.length){case 0:return ot.call(zt);case 1:return ot.call(zt,qt[0]);case 2:return ot.call(zt,qt[0],qt[1]);case 3:return ot.call(zt,qt[0],qt[1],qt[2])}return ot.apply(zt,qt)}function Em(ot,zt,qt,Jt){for(var ce=-1,Ce=ot==null?0:ot.length;++ce<Ce;){var _r=ot[ce];zt(Jt,_r,qt(_r),ot)}return Jt}function si(ot,zt){for(var qt=-1,Jt=ot==null?0:ot.length;++qt<Jt&&zt(ot[qt],qt,ot)!==!1;);return ot}function Sm(ot,zt){for(var qt=ot==null?0:ot.length;qt--&&zt(ot[qt],qt,ot)!==!1;);return ot}function ac(ot,zt){for(var qt=-1,Jt=ot==null?0:ot.length;++qt<Jt;)if(!zt(ot[qt],qt,ot))return!1;return!0}function Wi(ot,zt){for(var qt=-1,Jt=ot==null?0:ot.length,ce=0,Ce=[];++qt<Jt;){var _r=ot[qt];zt(_r,qt,ot)&&(Ce[ce++]=_r)}return Ce}function ga(ot,zt){var qt=ot==null?0:ot.length;return!!qt&&Fn(ot,zt,0)>-1}function Yo(ot,zt,qt){for(var Jt=-1,ce=ot==null?0:ot.length;++Jt<ce;)if(qt(zt,ot[Jt]))return!0;return!1}function hr(ot,zt){for(var qt=-1,Jt=ot==null?0:ot.length,ce=Array(Jt);++qt<Jt;)ce[qt]=zt(ot[qt],qt,ot);return ce}function Zi(ot,zt){for(var qt=-1,Jt=zt.length,ce=ot.length;++qt<Jt;)ot[ce+qt]=zt[qt];return ot}function Xo(ot,zt,qt,Jt){var ce=-1,Ce=ot==null?0:ot.length;for(Jt&&Ce&&(qt=ot[++ce]);++ce<Ce;)qt=zt(qt,ot[ce],ce,ot);return qt}function Am(ot,zt,qt,Jt){var ce=ot==null?0:ot.length;for(Jt&&ce&&(qt=ot[--ce]);ce--;)qt=zt(qt,ot[ce],ce,ot);return qt}function Qo(ot,zt){for(var qt=-1,Jt=ot==null?0:ot.length;++qt<Jt;)if(zt(ot[qt],qt,ot))return!0;return!1}var Dm=tf("length");function Im(ot){return ot.split("")}function Rm(ot){return ot.match(Tt)||[]}function oc(ot,zt,qt){var Jt;return qt(ot,function(ce,Ce,_r){if(zt(ce,Ce,_r))return Jt=Ce,!1}),Jt}function ma(ot,zt,qt,Jt){for(var ce=ot.length,Ce=qt+(Jt?1:-1);Jt?Ce--:++Ce<ce;)if(zt(ot[Ce],Ce,ot))return Ce;return-1}function Fn(ot,zt,qt){return zt===zt?$m(ot,zt,qt):ma(ot,fc,qt)}function Pm(ot,zt,qt,Jt){for(var ce=qt-1,Ce=ot.length;++ce<Ce;)if(Jt(ot[ce],zt))return ce;return-1}function fc(ot){return ot!==ot}function hc(ot,zt){var qt=ot==null?0:ot.length;return qt?rf(ot,zt)/qt:e}function tf(ot){return function(zt){return zt==null?a:zt[ot]}}function ef(ot){return function(zt){return ot==null?a:ot[zt]}}function uc(ot,zt,qt,Jt,ce){return ce(ot,function(Ce,_r,nr){qt=Jt?(Jt=!1,Ce):zt(qt,Ce,_r,nr)}),qt}function Om(ot,zt){var qt=ot.length;for(ot.sort(zt);qt--;)ot[qt]=ot[qt].value;return ot}function rf(ot,zt){for(var qt,Jt=-1,ce=ot.length;++Jt<ce;){var Ce=zt(ot[Jt]);Ce!==a&&(qt=qt===a?Ce:qt+Ce)}return qt}function nf(ot,zt){for(var qt=-1,Jt=Array(ot);++qt<ot;)Jt[qt]=zt(qt);return Jt}function Cm(ot,zt){return hr(zt,function(qt){return[qt,ot[qt]]})}function cc(ot){return ot&&ot.slice(0,vc(ot)+1).replace(ye,"")}function Zr(ot){return function(zt){return ot(zt)}}function sf(ot,zt){return hr(zt,function(qt){return ot[qt]})}function ls(ot,zt){return ot.has(zt)}function lc(ot,zt){for(var qt=-1,Jt=ot.length;++qt<Jt&&Fn(zt,ot[qt],0)>-1;);return qt}function dc(ot,zt){for(var qt=ot.length;qt--&&Fn(zt,ot[qt],0)>-1;);return qt}function Tm(ot,zt){for(var qt=ot.length,Jt=0;qt--;)ot[qt]===zt&&++Jt;return Jt}var Bm=ef(Y),Nm=ef(at);function qm(ot){return"\\"+Zt[ot]}function Um(ot,zt){return ot==null?a:ot[zt]}function $n(ot){return pa.test(ot)}function km(ot){return pn.test(ot)}function Lm(ot){for(var zt,qt=[];!(zt=ot.next()).done;)qt.push(zt.value);return qt}function af(ot){var zt=-1,qt=Array(ot.size);return ot.forEach(function(Jt,ce){qt[++zt]=[ce,Jt]}),qt}function pc(ot,zt){return function(qt){return ot(zt(qt))}}function Ji(ot,zt){for(var qt=-1,Jt=ot.length,ce=0,Ce=[];++qt<Jt;){var _r=ot[qt];(_r===zt||_r===b)&&(ot[qt]=b,Ce[ce++]=qt)}return Ce}function ba(ot){var zt=-1,qt=Array(ot.size);return ot.forEach(function(Jt){qt[++zt]=Jt}),qt}function Fm(ot){var zt=-1,qt=Array(ot.size);return ot.forEach(function(Jt){qt[++zt]=[Jt,Jt]}),qt}function $m(ot,zt,qt){for(var Jt=qt-1,ce=ot.length;++Jt<ce;)if(ot[Jt]===zt)return Jt;return-1}function zm(ot,zt,qt){for(var Jt=qt+1;Jt--;)if(ot[Jt]===zt)return Jt;return Jt}function zn(ot){return $n(ot)?Hm(ot):Dm(ot)}function wi(ot){return $n(ot)?Km(ot):Im(ot)}function vc(ot){for(var zt=ot.length;zt--&&Rt.test(ot.charAt(zt)););return zt}var jm=ef(Kt);function Hm(ot){for(var zt=Ln.lastIndex=0;Ln.test(ot);)++zt;return zt}function Km(ot){return ot.match(Ln)||[]}function Vm(ot){return ot.match(da)||[]}var Gm=function ot(zt){zt=zt==null?Ie:jn.defaults(Ie.Object(),zt,jn.pick(Ie,va));var qt=zt.Array,Jt=zt.Date,ce=zt.Error,Ce=zt.Function,_r=zt.Math,nr=zt.Object,of=zt.RegExp,Wm=zt.String,ai=zt.TypeError,ya=qt.prototype,Zm=Ce.prototype,Hn=nr.prototype,wa=zt["__core-js_shared__"],_a=Zm.toString,Le=Hn.hasOwnProperty,Jm=0,gc=function(){var f=/[^.]+$/.exec(wa&&wa.keys&&wa.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),Ma=Hn.toString,Ym=_a.call(nr),Xm=Ie._,Qm=of("^"+_a.call(Le).replace(Dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xa=$r?zt.Buffer:a,Yi=zt.Symbol,Ea=zt.Uint8Array,mc=xa?xa.allocUnsafe:a,Sa=pc(nr.getPrototypeOf,nr),bc=nr.create,yc=Hn.propertyIsEnumerable,Aa=ya.splice,wc=Yi?Yi.isConcatSpreadable:a,ds=Yi?Yi.iterator:a,gn=Yi?Yi.toStringTag:a,Da=function(){try{var f=_n(nr,"defineProperty");return f({},"",{}),f}catch{}}(),tb=zt.clearTimeout!==Ie.clearTimeout&&zt.clearTimeout,eb=Jt&&Jt.now!==Ie.Date.now&&Jt.now,rb=zt.setTimeout!==Ie.setTimeout&&zt.setTimeout,Ia=_r.ceil,Ra=_r.floor,ff=nr.getOwnPropertySymbols,ib=xa?xa.isBuffer:a,_c=zt.isFinite,nb=ya.join,sb=pc(nr.keys,nr),Mr=_r.max,Pr=_r.min,ab=Jt.now,ob=zt.parseInt,Mc=_r.random,fb=ya.reverse,hf=_n(zt,"DataView"),ps=_n(zt,"Map"),uf=_n(zt,"Promise"),Kn=_n(zt,"Set"),vs=_n(zt,"WeakMap"),gs=_n(nr,"create"),Pa=vs&&new vs,Vn={},hb=Mn(hf),ub=Mn(ps),cb=Mn(uf),lb=Mn(Kn),db=Mn(vs),Oa=Yi?Yi.prototype:a,ms=Oa?Oa.valueOf:a,xc=Oa?Oa.toString:a;function V(f){if(cr(f)&&!de(f)&&!(f instanceof Ae)){if(f instanceof oi)return f;if(Le.call(f,"__wrapped__"))return El(f)}return new oi(f)}var Gn=function(){function f(){}return function(p){if(!ur(p))return{};if(bc)return bc(p);f.prototype=p;var A=new f;return f.prototype=a,A}}();function Ca(){}function oi(f,p){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=a}V.templateSettings={escape:St,evaluate:At,interpolate:ge,variable:"",imports:{_:V}},V.prototype=Ca.prototype,V.prototype.constructor=V,oi.prototype=Gn(Ca.prototype),oi.prototype.constructor=oi;function Ae(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=l,this.__views__=[]}function pb(){var f=new Ae(this.__wrapped__);return f.__actions__=zr(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=zr(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=zr(this.__views__),f}function vb(){if(this.__filtered__){var f=new Ae(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function gb(){var f=this.__wrapped__.value(),p=this.__dir__,A=de(f),q=p<0,j=A?f.length:0,J=Iy(0,j,this.__views__),X=J.start,it=J.end,ft=it-X,jt=q?it:X-1,Ht=this.__iteratees__,Vt=Ht.length,Gt=0,te=Pr(ft,this.__takeCount__);if(!A||!q&&j==ft&&te==ft)return Gc(f,this.__actions__);var fe=[];t:for(;ft--&&Gt<te;){jt+=p;for(var we=-1,he=f[jt];++we<Vt;){var xe=Ht[we],Re=xe.iteratee,Xr=xe.type,qr=Re(he);if(Xr==o)he=qr;else if(!qr){if(Xr==n)continue t;break t}}fe[Gt++]=he}return fe}Ae.prototype=Gn(Ca.prototype),Ae.prototype.constructor=Ae;function mn(f){var p=-1,A=f==null?0:f.length;for(this.clear();++p<A;){var q=f[p];this.set(q[0],q[1])}}function mb(){this.__data__=gs?gs(null):{},this.size=0}function bb(f){var p=this.has(f)&&delete this.__data__[f];return this.size-=p?1:0,p}function yb(f){var p=this.__data__;if(gs){var A=p[f];return A===_?a:A}return Le.call(p,f)?p[f]:a}function wb(f){var p=this.__data__;return gs?p[f]!==a:Le.call(p,f)}function _b(f,p){var A=this.__data__;return this.size+=this.has(f)?0:1,A[f]=gs&&p===a?_:p,this}mn.prototype.clear=mb,mn.prototype.delete=bb,mn.prototype.get=yb,mn.prototype.has=wb,mn.prototype.set=_b;function qi(f){var p=-1,A=f==null?0:f.length;for(this.clear();++p<A;){var q=f[p];this.set(q[0],q[1])}}function Mb(){this.__data__=[],this.size=0}function xb(f){var p=this.__data__,A=Ta(p,f);if(A<0)return!1;var q=p.length-1;return A==q?p.pop():Aa.call(p,A,1),--this.size,!0}function Eb(f){var p=this.__data__,A=Ta(p,f);return A<0?a:p[A][1]}function Sb(f){return Ta(this.__data__,f)>-1}function Ab(f,p){var A=this.__data__,q=Ta(A,f);return q<0?(++this.size,A.push([f,p])):A[q][1]=p,this}qi.prototype.clear=Mb,qi.prototype.delete=xb,qi.prototype.get=Eb,qi.prototype.has=Sb,qi.prototype.set=Ab;function Ui(f){var p=-1,A=f==null?0:f.length;for(this.clear();++p<A;){var q=f[p];this.set(q[0],q[1])}}function Db(){this.size=0,this.__data__={hash:new mn,map:new(ps||qi),string:new mn}}function Ib(f){var p=Ka(this,f).delete(f);return this.size-=p?1:0,p}function Rb(f){return Ka(this,f).get(f)}function Pb(f){return Ka(this,f).has(f)}function Ob(f,p){var A=Ka(this,f),q=A.size;return A.set(f,p),this.size+=A.size==q?0:1,this}Ui.prototype.clear=Db,Ui.prototype.delete=Ib,Ui.prototype.get=Rb,Ui.prototype.has=Pb,Ui.prototype.set=Ob;function bn(f){var p=-1,A=f==null?0:f.length;for(this.__data__=new Ui;++p<A;)this.add(f[p])}function Cb(f){return this.__data__.set(f,_),this}function Tb(f){return this.__data__.has(f)}bn.prototype.add=bn.prototype.push=Cb,bn.prototype.has=Tb;function _i(f){var p=this.__data__=new qi(f);this.size=p.size}function Bb(){this.__data__=new qi,this.size=0}function Nb(f){var p=this.__data__,A=p.delete(f);return this.size=p.size,A}function qb(f){return this.__data__.get(f)}function Ub(f){return this.__data__.has(f)}function kb(f,p){var A=this.__data__;if(A instanceof qi){var q=A.__data__;if(!ps||q.length<g-1)return q.push([f,p]),this.size=++A.size,this;A=this.__data__=new Ui(q)}return A.set(f,p),this.size=A.size,this}_i.prototype.clear=Bb,_i.prototype.delete=Nb,_i.prototype.get=qb,_i.prototype.has=Ub,_i.prototype.set=kb;function Ec(f,p){var A=de(f),q=!A&&xn(f),j=!A&&!q&&rn(f),J=!A&&!q&&!j&&Yn(f),X=A||q||j||J,it=X?nf(f.length,Wm):[],ft=it.length;for(var jt in f)(p||Le.call(f,jt))&&!(X&&(jt=="length"||j&&(jt=="offset"||jt=="parent")||J&&(jt=="buffer"||jt=="byteLength"||jt=="byteOffset")||$i(jt,ft)))&&it.push(jt);return it}function Sc(f){var p=f.length;return p?f[_f(0,p-1)]:a}function Lb(f,p){return Va(zr(f),yn(p,0,f.length))}function Fb(f){return Va(zr(f))}function cf(f,p,A){(A!==a&&!Mi(f[p],A)||A===a&&!(p in f))&&ki(f,p,A)}function bs(f,p,A){var q=f[p];(!(Le.call(f,p)&&Mi(q,A))||A===a&&!(p in f))&&ki(f,p,A)}function Ta(f,p){for(var A=f.length;A--;)if(Mi(f[A][0],p))return A;return-1}function $b(f,p,A,q){return Xi(f,function(j,J,X){p(q,j,A(j),X)}),q}function Ac(f,p){return f&&Ri(p,Er(p),f)}function zb(f,p){return f&&Ri(p,Hr(p),f)}function ki(f,p,A){p=="__proto__"&&Da?Da(f,p,{configurable:!0,enumerable:!0,value:A,writable:!0}):f[p]=A}function lf(f,p){for(var A=-1,q=p.length,j=qt(q),J=f==null;++A<q;)j[A]=J?a:Vf(f,p[A]);return j}function yn(f,p,A){return f===f&&(A!==a&&(f=f<=A?f:A),p!==a&&(f=f>=p?f:p)),f}function fi(f,p,A,q,j,J){var X,it=p&S,ft=p&E,jt=p&D;if(A&&(X=j?A(f,q,j,J):A(f)),X!==a)return X;if(!ur(f))return f;var Ht=de(f);if(Ht){if(X=Py(f),!it)return zr(f,X)}else{var Vt=Or(f),Gt=Vt==rt||Vt==st;if(rn(f))return Jc(f,it);if(Vt==ee||Vt==W||Gt&&!j){if(X=ft||Gt?{}:vl(f),!it)return ft?yy(f,zb(X,f)):by(f,Ac(X,f))}else{if(!je[Vt])return j?f:{};X=Oy(f,Vt,it)}}J||(J=new _i);var te=J.get(f);if(te)return te;J.set(f,X),Hl(f)?f.forEach(function(he){X.add(fi(he,p,A,he,f,J))}):zl(f)&&f.forEach(function(he,xe){X.set(xe,fi(he,p,A,xe,f,J))});var fe=jt?ft?Cf:Of:ft?Hr:Er,we=Ht?a:fe(f);return si(we||f,function(he,xe){we&&(xe=he,he=f[xe]),bs(X,xe,fi(he,p,A,xe,f,J))}),X}function jb(f){var p=Er(f);return function(A){return Dc(A,f,p)}}function Dc(f,p,A){var q=A.length;if(f==null)return!q;for(f=nr(f);q--;){var j=A[q],J=p[j],X=f[j];if(X===a&&!(j in f)||!J(X))return!1}return!0}function Ic(f,p,A){if(typeof f!="function")throw new ai(x);return Ss(function(){f.apply(a,A)},p)}function ys(f,p,A,q){var j=-1,J=ga,X=!0,it=f.length,ft=[],jt=p.length;if(!it)return ft;A&&(p=hr(p,Zr(A))),q?(J=Yo,X=!1):p.length>=g&&(J=ls,X=!1,p=new bn(p));t:for(;++j<it;){var Ht=f[j],Vt=A==null?Ht:A(Ht);if(Ht=q||Ht!==0?Ht:0,X&&Vt===Vt){for(var Gt=jt;Gt--;)if(p[Gt]===Vt)continue t;ft.push(Ht)}else J(p,Vt,q)||ft.push(Ht)}return ft}var Xi=el(Ii),Rc=el(pf,!0);function Hb(f,p){var A=!0;return Xi(f,function(q,j,J){return A=!!p(q,j,J),A}),A}function Ba(f,p,A){for(var q=-1,j=f.length;++q<j;){var J=f[q],X=p(J);if(X!=null&&(it===a?X===X&&!Yr(X):A(X,it)))var it=X,ft=J}return ft}function Kb(f,p,A,q){var j=f.length;for(A=me(A),A<0&&(A=-A>j?0:j+A),q=q===a||q>j?j:me(q),q<0&&(q+=j),q=A>q?0:Vl(q);A<q;)f[A++]=p;return f}function Pc(f,p){var A=[];return Xi(f,function(q,j,J){p(q,j,J)&&A.push(q)}),A}function Dr(f,p,A,q,j){var J=-1,X=f.length;for(A||(A=Ty),j||(j=[]);++J<X;){var it=f[J];p>0&&A(it)?p>1?Dr(it,p-1,A,q,j):Zi(j,it):q||(j[j.length]=it)}return j}var df=rl(),Oc=rl(!0);function Ii(f,p){return f&&df(f,p,Er)}function pf(f,p){return f&&Oc(f,p,Er)}function Na(f,p){return Wi(p,function(A){return zi(f[A])})}function wn(f,p){p=tn(p,f);for(var A=0,q=p.length;f!=null&&A<q;)f=f[Pi(p[A++])];return A&&A==q?f:a}function Cc(f,p,A){var q=p(f);return de(f)?q:Zi(q,A(f))}function Br(f){return f==null?f===a?vt:mt:gn&&gn in nr(f)?Dy(f):Fy(f)}function vf(f,p){return f>p}function Vb(f,p){return f!=null&&Le.call(f,p)}function Gb(f,p){return f!=null&&p in nr(f)}function Wb(f,p,A){return f>=Pr(p,A)&&f<Mr(p,A)}function gf(f,p,A){for(var q=A?Yo:ga,j=f[0].length,J=f.length,X=J,it=qt(J),ft=1/0,jt=[];X--;){var Ht=f[X];X&&p&&(Ht=hr(Ht,Zr(p))),ft=Pr(Ht.length,ft),it[X]=!A&&(p||j>=120&&Ht.length>=120)?new bn(X&&Ht):a}Ht=f[0];var Vt=-1,Gt=it[0];t:for(;++Vt<j&&jt.length<ft;){var te=Ht[Vt],fe=p?p(te):te;if(te=A||te!==0?te:0,!(Gt?ls(Gt,fe):q(jt,fe,A))){for(X=J;--X;){var we=it[X];if(!(we?ls(we,fe):q(f[X],fe,A)))continue t}Gt&&Gt.push(fe),jt.push(te)}}return jt}function Zb(f,p,A,q){return Ii(f,function(j,J,X){p(q,A(j),J,X)}),q}function ws(f,p,A){p=tn(p,f),f=yl(f,p);var q=f==null?f:f[Pi(ui(p))];return q==null?a:xr(q,f,A)}function Tc(f){return cr(f)&&Br(f)==W}function Jb(f){return cr(f)&&Br(f)==ht}function Yb(f){return cr(f)&&Br(f)==K}function _s(f,p,A,q,j){return f===p?!0:f==null||p==null||!cr(f)&&!cr(p)?f!==f&&p!==p:Xb(f,p,A,q,_s,j)}function Xb(f,p,A,q,j,J){var X=de(f),it=de(p),ft=X?tt:Or(f),jt=it?tt:Or(p);ft=ft==W?ee:ft,jt=jt==W?ee:jt;var Ht=ft==ee,Vt=jt==ee,Gt=ft==jt;if(Gt&&rn(f)){if(!rn(p))return!1;X=!0,Ht=!1}if(Gt&&!Ht)return J||(J=new _i),X||Yn(f)?ll(f,p,A,q,j,J):Sy(f,p,ft,A,q,j,J);if(!(A&I)){var te=Ht&&Le.call(f,"__wrapped__"),fe=Vt&&Le.call(p,"__wrapped__");if(te||fe){var we=te?f.value():f,he=fe?p.value():p;return J||(J=new _i),j(we,he,A,q,J)}}return Gt?(J||(J=new _i),Ay(f,p,A,q,j,J)):!1}function Qb(f){return cr(f)&&Or(f)==Yt}function mf(f,p,A,q){var j=A.length,J=j,X=!q;if(f==null)return!J;for(f=nr(f);j--;){var it=A[j];if(X&&it[2]?it[1]!==f[it[0]]:!(it[0]in f))return!1}for(;++j<J;){it=A[j];var ft=it[0],jt=f[ft],Ht=it[1];if(X&&it[2]){if(jt===a&&!(ft in f))return!1}else{var Vt=new _i;if(q)var Gt=q(jt,Ht,ft,f,p,Vt);if(!(Gt===a?_s(Ht,jt,I|O,q,Vt):Gt))return!1}}return!0}function Bc(f){if(!ur(f)||Ny(f))return!1;var p=zi(f)?Qm:Ve;return p.test(Mn(f))}function ty(f){return cr(f)&&Br(f)==re}function ey(f){return cr(f)&&Or(f)==ut}function ry(f){return cr(f)&&Xa(f.length)&&!!er[Br(f)]}function Nc(f){return typeof f=="function"?f:f==null?Kr:typeof f=="object"?de(f)?kc(f[0],f[1]):Uc(f):id(f)}function bf(f){if(!Es(f))return sb(f);var p=[];for(var A in nr(f))Le.call(f,A)&&A!="constructor"&&p.push(A);return p}function iy(f){if(!ur(f))return Ly(f);var p=Es(f),A=[];for(var q in f)q=="constructor"&&(p||!Le.call(f,q))||A.push(q);return A}function yf(f,p){return f<p}function qc(f,p){var A=-1,q=jr(f)?qt(f.length):[];return Xi(f,function(j,J,X){q[++A]=p(j,J,X)}),q}function Uc(f){var p=Bf(f);return p.length==1&&p[0][2]?ml(p[0][0],p[0][1]):function(A){return A===f||mf(A,f,p)}}function kc(f,p){return qf(f)&&gl(p)?ml(Pi(f),p):function(A){var q=Vf(A,f);return q===a&&q===p?Gf(A,f):_s(p,q,I|O)}}function qa(f,p,A,q,j){f!==p&&df(p,function(J,X){if(j||(j=new _i),ur(J))ny(f,p,X,A,qa,q,j);else{var it=q?q(kf(f,X),J,X+"",f,p,j):a;it===a&&(it=J),cf(f,X,it)}},Hr)}function ny(f,p,A,q,j,J,X){var it=kf(f,A),ft=kf(p,A),jt=X.get(ft);if(jt){cf(f,A,jt);return}var Ht=J?J(it,ft,A+"",f,p,X):a,Vt=Ht===a;if(Vt){var Gt=de(ft),te=!Gt&&rn(ft),fe=!Gt&&!te&&Yn(ft);Ht=ft,Gt||te||fe?de(it)?Ht=it:vr(it)?Ht=zr(it):te?(Vt=!1,Ht=Jc(ft,!0)):fe?(Vt=!1,Ht=Yc(ft,!0)):Ht=[]:As(ft)||xn(ft)?(Ht=it,xn(it)?Ht=Gl(it):(!ur(it)||zi(it))&&(Ht=vl(ft))):Vt=!1}Vt&&(X.set(ft,Ht),j(Ht,ft,q,J,X),X.delete(ft)),cf(f,A,Ht)}function Lc(f,p){var A=f.length;if(A)return p+=p<0?A:0,$i(p,A)?f[p]:a}function Fc(f,p,A){p.length?p=hr(p,function(J){return de(J)?function(X){return wn(X,J.length===1?J[0]:J)}:J}):p=[Kr];var q=-1;p=hr(p,Zr(oe()));var j=qc(f,function(J,X,it){var ft=hr(p,function(jt){return jt(J)});return{criteria:ft,index:++q,value:J}});return Om(j,function(J,X){return my(J,X,A)})}function sy(f,p){return $c(f,p,function(A,q){return Gf(f,q)})}function $c(f,p,A){for(var q=-1,j=p.length,J={};++q<j;){var X=p[q],it=wn(f,X);A(it,X)&&Ms(J,tn(X,f),it)}return J}function ay(f){return function(p){return wn(p,f)}}function wf(f,p,A,q){var j=q?Pm:Fn,J=-1,X=p.length,it=f;for(f===p&&(p=zr(p)),A&&(it=hr(f,Zr(A)));++J<X;)for(var ft=0,jt=p[J],Ht=A?A(jt):jt;(ft=j(it,Ht,ft,q))>-1;)it!==f&&Aa.call(it,ft,1),Aa.call(f,ft,1);return f}function zc(f,p){for(var A=f?p.length:0,q=A-1;A--;){var j=p[A];if(A==q||j!==J){var J=j;$i(j)?Aa.call(f,j,1):Ef(f,j)}}return f}function _f(f,p){return f+Ra(Mc()*(p-f+1))}function oy(f,p,A,q){for(var j=-1,J=Mr(Ia((p-f)/(A||1)),0),X=qt(J);J--;)X[q?J:++j]=f,f+=A;return X}function Mf(f,p){var A="";if(!f||p<1||p>y)return A;do p%2&&(A+=f),p=Ra(p/2),p&&(f+=f);while(p);return A}function _e(f,p){return Lf(bl(f,p,Kr),f+"")}function fy(f){return Sc(Xn(f))}function hy(f,p){var A=Xn(f);return Va(A,yn(p,0,A.length))}function Ms(f,p,A,q){if(!ur(f))return f;p=tn(p,f);for(var j=-1,J=p.length,X=J-1,it=f;it!=null&&++j<J;){var ft=Pi(p[j]),jt=A;if(ft==="__proto__"||ft==="constructor"||ft==="prototype")return f;if(j!=X){var Ht=it[ft];jt=q?q(Ht,ft,it):a,jt===a&&(jt=ur(Ht)?Ht:$i(p[j+1])?[]:{})}bs(it,ft,jt),it=it[ft]}return f}var jc=Pa?function(f,p){return Pa.set(f,p),f}:Kr,uy=Da?function(f,p){return Da(f,"toString",{configurable:!0,enumerable:!1,value:Zf(p),writable:!0})}:Kr;function cy(f){return Va(Xn(f))}function hi(f,p,A){var q=-1,j=f.length;p<0&&(p=-p>j?0:j+p),A=A>j?j:A,A<0&&(A+=j),j=p>A?0:A-p>>>0,p>>>=0;for(var J=qt(j);++q<j;)J[q]=f[q+p];return J}function ly(f,p){var A;return Xi(f,function(q,j,J){return A=p(q,j,J),!A}),!!A}function Ua(f,p,A){var q=0,j=f==null?q:f.length;if(typeof p=="number"&&p===p&&j<=$){for(;q<j;){var J=q+j>>>1,X=f[J];X!==null&&!Yr(X)&&(A?X<=p:X<p)?q=J+1:j=J}return j}return xf(f,p,Kr,A)}function xf(f,p,A,q){var j=0,J=f==null?0:f.length;if(J===0)return 0;p=A(p);for(var X=p!==p,it=p===null,ft=Yr(p),jt=p===a;j<J;){var Ht=Ra((j+J)/2),Vt=A(f[Ht]),Gt=Vt!==a,te=Vt===null,fe=Vt===Vt,we=Yr(Vt);if(X)var he=q||fe;else jt?he=fe&&(q||Gt):it?he=fe&&Gt&&(q||!te):ft?he=fe&&Gt&&!te&&(q||!we):te||we?he=!1:he=q?Vt<=p:Vt<p;he?j=Ht+1:J=Ht}return Pr(J,z)}function Hc(f,p){for(var A=-1,q=f.length,j=0,J=[];++A<q;){var X=f[A],it=p?p(X):X;if(!A||!Mi(it,ft)){var ft=it;J[j++]=X===0?0:X}}return J}function Kc(f){return typeof f=="number"?f:Yr(f)?e:+f}function Jr(f){if(typeof f=="string")return f;if(de(f))return hr(f,Jr)+"";if(Yr(f))return xc?xc.call(f):"";var p=f+"";return p=="0"&&1/f==-m?"-0":p}function Qi(f,p,A){var q=-1,j=ga,J=f.length,X=!0,it=[],ft=it;if(A)X=!1,j=Yo;else if(J>=g){var jt=p?null:xy(f);if(jt)return ba(jt);X=!1,j=ls,ft=new bn}else ft=p?[]:it;t:for(;++q<J;){var Ht=f[q],Vt=p?p(Ht):Ht;if(Ht=A||Ht!==0?Ht:0,X&&Vt===Vt){for(var Gt=ft.length;Gt--;)if(ft[Gt]===Vt)continue t;p&&ft.push(Vt),it.push(Ht)}else j(ft,Vt,A)||(ft!==it&&ft.push(Vt),it.push(Ht))}return it}function Ef(f,p){return p=tn(p,f),f=yl(f,p),f==null||delete f[Pi(ui(p))]}function Vc(f,p,A,q){return Ms(f,p,A(wn(f,p)),q)}function ka(f,p,A,q){for(var j=f.length,J=q?j:-1;(q?J--:++J<j)&&p(f[J],J,f););return A?hi(f,q?0:J,q?J+1:j):hi(f,q?J+1:0,q?j:J)}function Gc(f,p){var A=f;return A instanceof Ae&&(A=A.value()),Xo(p,function(q,j){return j.func.apply(j.thisArg,Zi([q],j.args))},A)}function Sf(f,p,A){var q=f.length;if(q<2)return q?Qi(f[0]):[];for(var j=-1,J=qt(q);++j<q;)for(var X=f[j],it=-1;++it<q;)it!=j&&(J[j]=ys(J[j]||X,f[it],p,A));return Qi(Dr(J,1),p,A)}function Wc(f,p,A){for(var q=-1,j=f.length,J=p.length,X={};++q<j;){var it=q<J?p[q]:a;A(X,f[q],it)}return X}function Af(f){return vr(f)?f:[]}function Df(f){return typeof f=="function"?f:Kr}function tn(f,p){return de(f)?f:qf(f,p)?[f]:xl(Ue(f))}var dy=_e;function en(f,p,A){var q=f.length;return A=A===a?q:A,!p&&A>=q?f:hi(f,p,A)}var Zc=tb||function(f){return Ie.clearTimeout(f)};function Jc(f,p){if(p)return f.slice();var A=f.length,q=mc?mc(A):new f.constructor(A);return f.copy(q),q}function If(f){var p=new f.constructor(f.byteLength);return new Ea(p).set(new Ea(f)),p}function py(f,p){var A=p?If(f.buffer):f.buffer;return new f.constructor(A,f.byteOffset,f.byteLength)}function vy(f){var p=new f.constructor(f.source,Se.exec(f));return p.lastIndex=f.lastIndex,p}function gy(f){return ms?nr(ms.call(f)):{}}function Yc(f,p){var A=p?If(f.buffer):f.buffer;return new f.constructor(A,f.byteOffset,f.length)}function Xc(f,p){if(f!==p){var A=f!==a,q=f===null,j=f===f,J=Yr(f),X=p!==a,it=p===null,ft=p===p,jt=Yr(p);if(!it&&!jt&&!J&&f>p||J&&X&&ft&&!it&&!jt||q&&X&&ft||!A&&ft||!j)return 1;if(!q&&!J&&!jt&&f<p||jt&&A&&j&&!q&&!J||it&&A&&j||!X&&j||!ft)return-1}return 0}function my(f,p,A){for(var q=-1,j=f.criteria,J=p.criteria,X=j.length,it=A.length;++q<X;){var ft=Xc(j[q],J[q]);if(ft){if(q>=it)return ft;var jt=A[q];return ft*(jt=="desc"?-1:1)}}return f.index-p.index}function Qc(f,p,A,q){for(var j=-1,J=f.length,X=A.length,it=-1,ft=p.length,jt=Mr(J-X,0),Ht=qt(ft+jt),Vt=!q;++it<ft;)Ht[it]=p[it];for(;++j<X;)(Vt||j<J)&&(Ht[A[j]]=f[j]);for(;jt--;)Ht[it++]=f[j++];return Ht}function tl(f,p,A,q){for(var j=-1,J=f.length,X=-1,it=A.length,ft=-1,jt=p.length,Ht=Mr(J-it,0),Vt=qt(Ht+jt),Gt=!q;++j<Ht;)Vt[j]=f[j];for(var te=j;++ft<jt;)Vt[te+ft]=p[ft];for(;++X<it;)(Gt||j<J)&&(Vt[te+A[X]]=f[j++]);return Vt}function zr(f,p){var A=-1,q=f.length;for(p||(p=qt(q));++A<q;)p[A]=f[A];return p}function Ri(f,p,A,q){var j=!A;A||(A={});for(var J=-1,X=p.length;++J<X;){var it=p[J],ft=q?q(A[it],f[it],it,A,f):a;ft===a&&(ft=f[it]),j?ki(A,it,ft):bs(A,it,ft)}return A}function by(f,p){return Ri(f,Nf(f),p)}function yy(f,p){return Ri(f,dl(f),p)}function La(f,p){return function(A,q){var j=de(A)?Em:$b,J=p?p():{};return j(A,f,oe(q,2),J)}}function Wn(f){return _e(function(p,A){var q=-1,j=A.length,J=j>1?A[j-1]:a,X=j>2?A[2]:a;for(J=f.length>3&&typeof J=="function"?(j--,J):a,X&&Nr(A[0],A[1],X)&&(J=j<3?a:J,j=1),p=nr(p);++q<j;){var it=A[q];it&&f(p,it,q,J)}return p})}function el(f,p){return function(A,q){if(A==null)return A;if(!jr(A))return f(A,q);for(var j=A.length,J=p?j:-1,X=nr(A);(p?J--:++J<j)&&q(X[J],J,X)!==!1;);return A}}function rl(f){return function(p,A,q){for(var j=-1,J=nr(p),X=q(p),it=X.length;it--;){var ft=X[f?it:++j];if(A(J[ft],ft,J)===!1)break}return p}}function wy(f,p,A){var q=p&N,j=xs(f);function J(){var X=this&&this!==Ie&&this instanceof J?j:f;return X.apply(q?A:this,arguments)}return J}function il(f){return function(p){p=Ue(p);var A=$n(p)?wi(p):a,q=A?A[0]:p.charAt(0),j=A?en(A,1).join(""):p.slice(1);return q[f]()+j}}function Zn(f){return function(p){return Xo(ed(td(p).replace(us,"")),f,"")}}function xs(f){return function(){var p=arguments;switch(p.length){case 0:return new f;case 1:return new f(p[0]);case 2:return new f(p[0],p[1]);case 3:return new f(p[0],p[1],p[2]);case 4:return new f(p[0],p[1],p[2],p[3]);case 5:return new f(p[0],p[1],p[2],p[3],p[4]);case 6:return new f(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new f(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var A=Gn(f.prototype),q=f.apply(A,p);return ur(q)?q:A}}function _y(f,p,A){var q=xs(f);function j(){for(var J=arguments.length,X=qt(J),it=J,ft=Jn(j);it--;)X[it]=arguments[it];var jt=J<3&&X[0]!==ft&&X[J-1]!==ft?[]:Ji(X,ft);if(J-=jt.length,J<A)return fl(f,p,Fa,j.placeholder,a,X,jt,a,a,A-J);var Ht=this&&this!==Ie&&this instanceof j?q:f;return xr(Ht,this,X)}return j}function nl(f){return function(p,A,q){var j=nr(p);if(!jr(p)){var J=oe(A,3);p=Er(p),A=function(it){return J(j[it],it,j)}}var X=f(p,A,q);return X>-1?j[J?p[X]:X]:a}}function sl(f){return Fi(function(p){var A=p.length,q=A,j=oi.prototype.thru;for(f&&p.reverse();q--;){var J=p[q];if(typeof J!="function")throw new ai(x);if(j&&!X&&Ha(J)=="wrapper")var X=new oi([],!0)}for(q=X?q:A;++q<A;){J=p[q];var it=Ha(J),ft=it=="wrapper"?Tf(J):a;ft&&Uf(ft[0])&&ft[1]==(P|B|U|F)&&!ft[4].length&&ft[9]==1?X=X[Ha(ft[0])].apply(X,ft[3]):X=J.length==1&&Uf(J)?X[it]():X.thru(J)}return function(){var jt=arguments,Ht=jt[0];if(X&&jt.length==1&&de(Ht))return X.plant(Ht).value();for(var Vt=0,Gt=A?p[Vt].apply(this,jt):Ht;++Vt<A;)Gt=p[Vt].call(this,Gt);return Gt}})}function Fa(f,p,A,q,j,J,X,it,ft,jt){var Ht=p&P,Vt=p&N,Gt=p&L,te=p&(B|T),fe=p&G,we=Gt?a:xs(f);function he(){for(var xe=arguments.length,Re=qt(xe),Xr=xe;Xr--;)Re[Xr]=arguments[Xr];if(te)var qr=Jn(he),Qr=Tm(Re,qr);if(q&&(Re=Qc(Re,q,j,te)),J&&(Re=tl(Re,J,X,te)),xe-=Qr,te&&xe<jt){var gr=Ji(Re,qr);return fl(f,p,Fa,he.placeholder,A,Re,gr,it,ft,jt-xe)}var xi=Vt?A:this,Hi=Gt?xi[f]:f;return xe=Re.length,it?Re=$y(Re,it):fe&&xe>1&&Re.reverse(),Ht&&ft<xe&&(Re.length=ft),this&&this!==Ie&&this instanceof he&&(Hi=we||xs(Hi)),Hi.apply(xi,Re)}return he}function al(f,p){return function(A,q){return Zb(A,f,p(q),{})}}function $a(f,p){return function(A,q){var j;if(A===a&&q===a)return p;if(A!==a&&(j=A),q!==a){if(j===a)return q;typeof A=="string"||typeof q=="string"?(A=Jr(A),q=Jr(q)):(A=Kc(A),q=Kc(q)),j=f(A,q)}return j}}function Rf(f){return Fi(function(p){return p=hr(p,Zr(oe())),_e(function(A){var q=this;return f(p,function(j){return xr(j,q,A)})})})}function za(f,p){p=p===a?" ":Jr(p);var A=p.length;if(A<2)return A?Mf(p,f):p;var q=Mf(p,Ia(f/zn(p)));return $n(p)?en(wi(q),0,f).join(""):q.slice(0,f)}function My(f,p,A,q){var j=p&N,J=xs(f);function X(){for(var it=-1,ft=arguments.length,jt=-1,Ht=q.length,Vt=qt(Ht+ft),Gt=this&&this!==Ie&&this instanceof X?J:f;++jt<Ht;)Vt[jt]=q[jt];for(;ft--;)Vt[jt++]=arguments[++it];return xr(Gt,j?A:this,Vt)}return X}function ol(f){return function(p,A,q){return q&&typeof q!="number"&&Nr(p,A,q)&&(A=q=a),p=ji(p),A===a?(A=p,p=0):A=ji(A),q=q===a?p<A?1:-1:ji(q),oy(p,A,q,f)}}function ja(f){return function(p,A){return typeof p=="string"&&typeof A=="string"||(p=ci(p),A=ci(A)),f(p,A)}}function fl(f,p,A,q,j,J,X,it,ft,jt){var Ht=p&B,Vt=Ht?X:a,Gt=Ht?a:X,te=Ht?J:a,fe=Ht?a:J;p|=Ht?U:k,p&=~(Ht?k:U),p&R||(p&=~(N|L));var we=[f,p,j,te,Vt,fe,Gt,it,ft,jt],he=A.apply(a,we);return Uf(f)&&wl(he,we),he.placeholder=q,_l(he,f,p)}function Pf(f){var p=_r[f];return function(A,q){if(A=ci(A),q=q==null?0:Pr(me(q),292),q&&_c(A)){var j=(Ue(A)+"e").split("e"),J=p(j[0]+"e"+(+j[1]+q));return j=(Ue(J)+"e").split("e"),+(j[0]+"e"+(+j[1]-q))}return p(A)}}var xy=Kn&&1/ba(new Kn([,-0]))[1]==m?function(f){return new Kn(f)}:Xf;function hl(f){return function(p){var A=Or(p);return A==Yt?af(p):A==ut?Fm(p):Cm(p,f(p))}}function Li(f,p,A,q,j,J,X,it){var ft=p&L;if(!ft&&typeof f!="function")throw new ai(x);var jt=q?q.length:0;if(jt||(p&=~(U|k),q=j=a),X=X===a?X:Mr(me(X),0),it=it===a?it:me(it),jt-=j?j.length:0,p&k){var Ht=q,Vt=j;q=j=a}var Gt=ft?a:Tf(f),te=[f,p,A,q,j,Ht,Vt,J,X,it];if(Gt&&ky(te,Gt),f=te[0],p=te[1],A=te[2],q=te[3],j=te[4],it=te[9]=te[9]===a?ft?0:f.length:Mr(te[9]-jt,0),!it&&p&(B|T)&&(p&=~(B|T)),!p||p==N)var fe=wy(f,p,A);else p==B||p==T?fe=_y(f,p,it):(p==U||p==(N|U))&&!j.length?fe=My(f,p,A,q):fe=Fa.apply(a,te);var we=Gt?jc:wl;return _l(we(fe,te),f,p)}function ul(f,p,A,q){return f===a||Mi(f,Hn[A])&&!Le.call(q,A)?p:f}function cl(f,p,A,q,j,J){return ur(f)&&ur(p)&&(J.set(p,f),qa(f,p,a,cl,J),J.delete(p)),f}function Ey(f){return As(f)?a:f}function ll(f,p,A,q,j,J){var X=A&I,it=f.length,ft=p.length;if(it!=ft&&!(X&&ft>it))return!1;var jt=J.get(f),Ht=J.get(p);if(jt&&Ht)return jt==p&&Ht==f;var Vt=-1,Gt=!0,te=A&O?new bn:a;for(J.set(f,p),J.set(p,f);++Vt<it;){var fe=f[Vt],we=p[Vt];if(q)var he=X?q(we,fe,Vt,p,f,J):q(fe,we,Vt,f,p,J);if(he!==a){if(he)continue;Gt=!1;break}if(te){if(!Qo(p,function(xe,Re){if(!ls(te,Re)&&(fe===xe||j(fe,xe,A,q,J)))return te.push(Re)})){Gt=!1;break}}else if(!(fe===we||j(fe,we,A,q,J))){Gt=!1;break}}return J.delete(f),J.delete(p),Gt}function Sy(f,p,A,q,j,J,X){switch(A){case dt:if(f.byteLength!=p.byteLength||f.byteOffset!=p.byteOffset)return!1;f=f.buffer,p=p.buffer;case ht:return!(f.byteLength!=p.byteLength||!J(new Ea(f),new Ea(p)));case et:case K:case gt:return Mi(+f,+p);case Q:return f.name==p.name&&f.message==p.message;case re:case pt:return f==p+"";case Yt:var it=af;case ut:var ft=q&I;if(it||(it=ba),f.size!=p.size&&!ft)return!1;var jt=X.get(f);if(jt)return jt==p;q|=O,X.set(f,p);var Ht=ll(it(f),it(p),q,j,J,X);return X.delete(f),Ht;case Xt:if(ms)return ms.call(f)==ms.call(p)}return!1}function Ay(f,p,A,q,j,J){var X=A&I,it=Of(f),ft=it.length,jt=Of(p),Ht=jt.length;if(ft!=Ht&&!X)return!1;for(var Vt=ft;Vt--;){var Gt=it[Vt];if(!(X?Gt in p:Le.call(p,Gt)))return!1}var te=J.get(f),fe=J.get(p);if(te&&fe)return te==p&&fe==f;var we=!0;J.set(f,p),J.set(p,f);for(var he=X;++Vt<ft;){Gt=it[Vt];var xe=f[Gt],Re=p[Gt];if(q)var Xr=X?q(Re,xe,Gt,p,f,J):q(xe,Re,Gt,f,p,J);if(!(Xr===a?xe===Re||j(xe,Re,A,q,J):Xr)){we=!1;break}he||(he=Gt=="constructor")}if(we&&!he){var qr=f.constructor,Qr=p.constructor;qr!=Qr&&"constructor"in f&&"constructor"in p&&!(typeof qr=="function"&&qr instanceof qr&&typeof Qr=="function"&&Qr instanceof Qr)&&(we=!1)}return J.delete(f),J.delete(p),we}function Fi(f){return Lf(bl(f,a,Dl),f+"")}function Of(f){return Cc(f,Er,Nf)}function Cf(f){return Cc(f,Hr,dl)}var Tf=Pa?function(f){return Pa.get(f)}:Xf;function Ha(f){for(var p=f.name+"",A=Vn[p],q=Le.call(Vn,p)?A.length:0;q--;){var j=A[q],J=j.func;if(J==null||J==f)return j.name}return p}function Jn(f){var p=Le.call(V,"placeholder")?V:f;return p.placeholder}function oe(){var f=V.iteratee||Jf;return f=f===Jf?Nc:f,arguments.length?f(arguments[0],arguments[1]):f}function Ka(f,p){var A=f.__data__;return By(p)?A[typeof p=="string"?"string":"hash"]:A.map}function Bf(f){for(var p=Er(f),A=p.length;A--;){var q=p[A],j=f[q];p[A]=[q,j,gl(j)]}return p}function _n(f,p){var A=Um(f,p);return Bc(A)?A:a}function Dy(f){var p=Le.call(f,gn),A=f[gn];try{f[gn]=a;var q=!0}catch{}var j=Ma.call(f);return q&&(p?f[gn]=A:delete f[gn]),j}var Nf=ff?function(f){return f==null?[]:(f=nr(f),Wi(ff(f),function(p){return yc.call(f,p)}))}:Qf,dl=ff?function(f){for(var p=[];f;)Zi(p,Nf(f)),f=Sa(f);return p}:Qf,Or=Br;(hf&&Or(new hf(new ArrayBuffer(1)))!=dt||ps&&Or(new ps)!=Yt||uf&&Or(uf.resolve())!=_t||Kn&&Or(new Kn)!=ut||vs&&Or(new vs)!=lt)&&(Or=function(f){var p=Br(f),A=p==ee?f.constructor:a,q=A?Mn(A):"";if(q)switch(q){case hb:return dt;case ub:return Yt;case cb:return _t;case lb:return ut;case db:return lt}return p});function Iy(f,p,A){for(var q=-1,j=A.length;++q<j;){var J=A[q],X=J.size;switch(J.type){case"drop":f+=X;break;case"dropRight":p-=X;break;case"take":p=Pr(p,f+X);break;case"takeRight":f=Mr(f,p-X);break}}return{start:f,end:p}}function Ry(f){var p=f.match(ue);return p?p[1].split(Ct):[]}function pl(f,p,A){p=tn(p,f);for(var q=-1,j=p.length,J=!1;++q<j;){var X=Pi(p[q]);if(!(J=f!=null&&A(f,X)))break;f=f[X]}return J||++q!=j?J:(j=f==null?0:f.length,!!j&&Xa(j)&&$i(X,j)&&(de(f)||xn(f)))}function Py(f){var p=f.length,A=new f.constructor(p);return p&&typeof f[0]=="string"&&Le.call(f,"index")&&(A.index=f.index,A.input=f.input),A}function vl(f){return typeof f.constructor=="function"&&!Es(f)?Gn(Sa(f)):{}}function Oy(f,p,A){var q=f.constructor;switch(p){case ht:return If(f);case et:case K:return new q(+f);case dt:return py(f,A);case ie:case ct:case bt:case ne:case yt:case wt:case se:case Bt:case Ut:return Yc(f,A);case Yt:return new q;case gt:case pt:return new q(f);case re:return vy(f);case ut:return new q;case Xt:return gy(f)}}function Cy(f,p){var A=p.length;if(!A)return f;var q=A-1;return p[q]=(A>1?"& ":"")+p[q],p=p.join(A>2?", ":" "),f.replace(It,`{
/* [wrapped with `+p+`] */
`)}function Ty(f){return de(f)||xn(f)||!!(wc&&f&&f[wc])}function $i(f,p){var A=typeof f;return p=p??y,!!p&&(A=="number"||A!="symbol"&&We.test(f))&&f>-1&&f%1==0&&f<p}function Nr(f,p,A){if(!ur(A))return!1;var q=typeof p;return(q=="number"?jr(A)&&$i(p,A.length):q=="string"&&p in A)?Mi(A[p],f):!1}function qf(f,p){if(de(f))return!1;var A=typeof f;return A=="number"||A=="symbol"||A=="boolean"||f==null||Yr(f)?!0:Pt.test(f)||!xt.test(f)||p!=null&&f in nr(p)}function By(f){var p=typeof f;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?f!=="__proto__":f===null}function Uf(f){var p=Ha(f),A=V[p];if(typeof A!="function"||!(p in Ae.prototype))return!1;if(f===A)return!0;var q=Tf(A);return!!q&&f===q[0]}function Ny(f){return!!gc&&gc in f}var qy=wa?zi:th;function Es(f){var p=f&&f.constructor,A=typeof p=="function"&&p.prototype||Hn;return f===A}function gl(f){return f===f&&!ur(f)}function ml(f,p){return function(A){return A==null?!1:A[f]===p&&(p!==a||f in nr(A))}}function Uy(f){var p=Ja(f,function(q){return A.size===M&&A.clear(),q}),A=p.cache;return p}function ky(f,p){var A=f[1],q=p[1],j=A|q,J=j<(N|L|P),X=q==P&&A==B||q==P&&A==F&&f[7].length<=p[8]||q==(P|F)&&p[7].length<=p[8]&&A==B;if(!(J||X))return f;q&N&&(f[2]=p[2],j|=A&N?0:R);var it=p[3];if(it){var ft=f[3];f[3]=ft?Qc(ft,it,p[4]):it,f[4]=ft?Ji(f[3],b):p[4]}return it=p[5],it&&(ft=f[5],f[5]=ft?tl(ft,it,p[6]):it,f[6]=ft?Ji(f[5],b):p[6]),it=p[7],it&&(f[7]=it),q&P&&(f[8]=f[8]==null?p[8]:Pr(f[8],p[8])),f[9]==null&&(f[9]=p[9]),f[0]=p[0],f[1]=j,f}function Ly(f){var p=[];if(f!=null)for(var A in nr(f))p.push(A);return p}function Fy(f){return Ma.call(f)}function bl(f,p,A){return p=Mr(p===a?f.length-1:p,0),function(){for(var q=arguments,j=-1,J=Mr(q.length-p,0),X=qt(J);++j<J;)X[j]=q[p+j];j=-1;for(var it=qt(p+1);++j<p;)it[j]=q[j];return it[p]=A(X),xr(f,this,it)}}function yl(f,p){return p.length<2?f:wn(f,hi(p,0,-1))}function $y(f,p){for(var A=f.length,q=Pr(p.length,A),j=zr(f);q--;){var J=p[q];f[q]=$i(J,A)?j[J]:a}return f}function kf(f,p){if(!(p==="constructor"&&typeof f[p]=="function")&&p!="__proto__")return f[p]}var wl=Ml(jc),Ss=rb||function(f,p){return Ie.setTimeout(f,p)},Lf=Ml(uy);function _l(f,p,A){var q=p+"";return Lf(f,Cy(q,zy(Ry(q),A)))}function Ml(f){var p=0,A=0;return function(){var q=ab(),j=r-(q-A);if(A=q,j>0){if(++p>=t)return arguments[0]}else p=0;return f.apply(a,arguments)}}function Va(f,p){var A=-1,q=f.length,j=q-1;for(p=p===a?q:p;++A<p;){var J=_f(A,j),X=f[J];f[J]=f[A],f[A]=X}return f.length=p,f}var xl=Uy(function(f){var p=[];return f.charCodeAt(0)===46&&p.push(""),f.replace(Me,function(A,q,j,J){p.push(j?J.replace(Ft,"$1"):q||A)}),p});function Pi(f){if(typeof f=="string"||Yr(f))return f;var p=f+"";return p=="0"&&1/f==-m?"-0":p}function Mn(f){if(f!=null){try{return _a.call(f)}catch{}try{return f+""}catch{}}return""}function zy(f,p){return si(H,function(A){var q="_."+A[0];p&A[1]&&!ga(f,q)&&f.push(q)}),f.sort()}function El(f){if(f instanceof Ae)return f.clone();var p=new oi(f.__wrapped__,f.__chain__);return p.__actions__=zr(f.__actions__),p.__index__=f.__index__,p.__values__=f.__values__,p}function jy(f,p,A){(A?Nr(f,p,A):p===a)?p=1:p=Mr(me(p),0);var q=f==null?0:f.length;if(!q||p<1)return[];for(var j=0,J=0,X=qt(Ia(q/p));j<q;)X[J++]=hi(f,j,j+=p);return X}function Hy(f){for(var p=-1,A=f==null?0:f.length,q=0,j=[];++p<A;){var J=f[p];J&&(j[q++]=J)}return j}function Ky(){var f=arguments.length;if(!f)return[];for(var p=qt(f-1),A=arguments[0],q=f;q--;)p[q-1]=arguments[q];return Zi(de(A)?zr(A):[A],Dr(p,1))}var Vy=_e(function(f,p){return vr(f)?ys(f,Dr(p,1,vr,!0)):[]}),Gy=_e(function(f,p){var A=ui(p);return vr(A)&&(A=a),vr(f)?ys(f,Dr(p,1,vr,!0),oe(A,2)):[]}),Wy=_e(function(f,p){var A=ui(p);return vr(A)&&(A=a),vr(f)?ys(f,Dr(p,1,vr,!0),a,A):[]});function Zy(f,p,A){var q=f==null?0:f.length;return q?(p=A||p===a?1:me(p),hi(f,p<0?0:p,q)):[]}function Jy(f,p,A){var q=f==null?0:f.length;return q?(p=A||p===a?1:me(p),p=q-p,hi(f,0,p<0?0:p)):[]}function Yy(f,p){return f&&f.length?ka(f,oe(p,3),!0,!0):[]}function Xy(f,p){return f&&f.length?ka(f,oe(p,3),!0):[]}function Qy(f,p,A,q){var j=f==null?0:f.length;return j?(A&&typeof A!="number"&&Nr(f,p,A)&&(A=0,q=j),Kb(f,p,A,q)):[]}function Sl(f,p,A){var q=f==null?0:f.length;if(!q)return-1;var j=A==null?0:me(A);return j<0&&(j=Mr(q+j,0)),ma(f,oe(p,3),j)}function Al(f,p,A){var q=f==null?0:f.length;if(!q)return-1;var j=q-1;return A!==a&&(j=me(A),j=A<0?Mr(q+j,0):Pr(j,q-1)),ma(f,oe(p,3),j,!0)}function Dl(f){var p=f==null?0:f.length;return p?Dr(f,1):[]}function t2(f){var p=f==null?0:f.length;return p?Dr(f,m):[]}function e2(f,p){var A=f==null?0:f.length;return A?(p=p===a?1:me(p),Dr(f,p)):[]}function r2(f){for(var p=-1,A=f==null?0:f.length,q={};++p<A;){var j=f[p];q[j[0]]=j[1]}return q}function Il(f){return f&&f.length?f[0]:a}function i2(f,p,A){var q=f==null?0:f.length;if(!q)return-1;var j=A==null?0:me(A);return j<0&&(j=Mr(q+j,0)),Fn(f,p,j)}function n2(f){var p=f==null?0:f.length;return p?hi(f,0,-1):[]}var s2=_e(function(f){var p=hr(f,Af);return p.length&&p[0]===f[0]?gf(p):[]}),a2=_e(function(f){var p=ui(f),A=hr(f,Af);return p===ui(A)?p=a:A.pop(),A.length&&A[0]===f[0]?gf(A,oe(p,2)):[]}),o2=_e(function(f){var p=ui(f),A=hr(f,Af);return p=typeof p=="function"?p:a,p&&A.pop(),A.length&&A[0]===f[0]?gf(A,a,p):[]});function f2(f,p){return f==null?"":nb.call(f,p)}function ui(f){var p=f==null?0:f.length;return p?f[p-1]:a}function h2(f,p,A){var q=f==null?0:f.length;if(!q)return-1;var j=q;return A!==a&&(j=me(A),j=j<0?Mr(q+j,0):Pr(j,q-1)),p===p?zm(f,p,j):ma(f,fc,j,!0)}function u2(f,p){return f&&f.length?Lc(f,me(p)):a}var c2=_e(Rl);function Rl(f,p){return f&&f.length&&p&&p.length?wf(f,p):f}function l2(f,p,A){return f&&f.length&&p&&p.length?wf(f,p,oe(A,2)):f}function d2(f,p,A){return f&&f.length&&p&&p.length?wf(f,p,a,A):f}var p2=Fi(function(f,p){var A=f==null?0:f.length,q=lf(f,p);return zc(f,hr(p,function(j){return $i(j,A)?+j:j}).sort(Xc)),q});function v2(f,p){var A=[];if(!(f&&f.length))return A;var q=-1,j=[],J=f.length;for(p=oe(p,3);++q<J;){var X=f[q];p(X,q,f)&&(A.push(X),j.push(q))}return zc(f,j),A}function Ff(f){return f==null?f:fb.call(f)}function g2(f,p,A){var q=f==null?0:f.length;return q?(A&&typeof A!="number"&&Nr(f,p,A)?(p=0,A=q):(p=p==null?0:me(p),A=A===a?q:me(A)),hi(f,p,A)):[]}function m2(f,p){return Ua(f,p)}function b2(f,p,A){return xf(f,p,oe(A,2))}function y2(f,p){var A=f==null?0:f.length;if(A){var q=Ua(f,p);if(q<A&&Mi(f[q],p))return q}return-1}function w2(f,p){return Ua(f,p,!0)}function _2(f,p,A){return xf(f,p,oe(A,2),!0)}function M2(f,p){var A=f==null?0:f.length;if(A){var q=Ua(f,p,!0)-1;if(Mi(f[q],p))return q}return-1}function x2(f){return f&&f.length?Hc(f):[]}function E2(f,p){return f&&f.length?Hc(f,oe(p,2)):[]}function S2(f){var p=f==null?0:f.length;return p?hi(f,1,p):[]}function A2(f,p,A){return f&&f.length?(p=A||p===a?1:me(p),hi(f,0,p<0?0:p)):[]}function D2(f,p,A){var q=f==null?0:f.length;return q?(p=A||p===a?1:me(p),p=q-p,hi(f,p<0?0:p,q)):[]}function I2(f,p){return f&&f.length?ka(f,oe(p,3),!1,!0):[]}function R2(f,p){return f&&f.length?ka(f,oe(p,3)):[]}var P2=_e(function(f){return Qi(Dr(f,1,vr,!0))}),O2=_e(function(f){var p=ui(f);return vr(p)&&(p=a),Qi(Dr(f,1,vr,!0),oe(p,2))}),C2=_e(function(f){var p=ui(f);return p=typeof p=="function"?p:a,Qi(Dr(f,1,vr,!0),a,p)});function T2(f){return f&&f.length?Qi(f):[]}function B2(f,p){return f&&f.length?Qi(f,oe(p,2)):[]}function N2(f,p){return p=typeof p=="function"?p:a,f&&f.length?Qi(f,a,p):[]}function $f(f){if(!(f&&f.length))return[];var p=0;return f=Wi(f,function(A){if(vr(A))return p=Mr(A.length,p),!0}),nf(p,function(A){return hr(f,tf(A))})}function Pl(f,p){if(!(f&&f.length))return[];var A=$f(f);return p==null?A:hr(A,function(q){return xr(p,a,q)})}var q2=_e(function(f,p){return vr(f)?ys(f,p):[]}),U2=_e(function(f){return Sf(Wi(f,vr))}),k2=_e(function(f){var p=ui(f);return vr(p)&&(p=a),Sf(Wi(f,vr),oe(p,2))}),L2=_e(function(f){var p=ui(f);return p=typeof p=="function"?p:a,Sf(Wi(f,vr),a,p)}),F2=_e($f);function $2(f,p){return Wc(f||[],p||[],bs)}function z2(f,p){return Wc(f||[],p||[],Ms)}var j2=_e(function(f){var p=f.length,A=p>1?f[p-1]:a;return A=typeof A=="function"?(f.pop(),A):a,Pl(f,A)});function Ol(f){var p=V(f);return p.__chain__=!0,p}function H2(f,p){return p(f),f}function Ga(f,p){return p(f)}var K2=Fi(function(f){var p=f.length,A=p?f[0]:0,q=this.__wrapped__,j=function(J){return lf(J,f)};return p>1||this.__actions__.length||!(q instanceof Ae)||!$i(A)?this.thru(j):(q=q.slice(A,+A+(p?1:0)),q.__actions__.push({func:Ga,args:[j],thisArg:a}),new oi(q,this.__chain__).thru(function(J){return p&&!J.length&&J.push(a),J}))});function V2(){return Ol(this)}function G2(){return new oi(this.value(),this.__chain__)}function W2(){this.__values__===a&&(this.__values__=Kl(this.value()));var f=this.__index__>=this.__values__.length,p=f?a:this.__values__[this.__index__++];return{done:f,value:p}}function Z2(){return this}function J2(f){for(var p,A=this;A instanceof Ca;){var q=El(A);q.__index__=0,q.__values__=a,p?j.__wrapped__=q:p=q;var j=q;A=A.__wrapped__}return j.__wrapped__=f,p}function Y2(){var f=this.__wrapped__;if(f instanceof Ae){var p=f;return this.__actions__.length&&(p=new Ae(this)),p=p.reverse(),p.__actions__.push({func:Ga,args:[Ff],thisArg:a}),new oi(p,this.__chain__)}return this.thru(Ff)}function X2(){return Gc(this.__wrapped__,this.__actions__)}var Q2=La(function(f,p,A){Le.call(f,A)?++f[A]:ki(f,A,1)});function t3(f,p,A){var q=de(f)?ac:Hb;return A&&Nr(f,p,A)&&(p=a),q(f,oe(p,3))}function e3(f,p){var A=de(f)?Wi:Pc;return A(f,oe(p,3))}var r3=nl(Sl),i3=nl(Al);function n3(f,p){return Dr(Wa(f,p),1)}function s3(f,p){return Dr(Wa(f,p),m)}function a3(f,p,A){return A=A===a?1:me(A),Dr(Wa(f,p),A)}function Cl(f,p){var A=de(f)?si:Xi;return A(f,oe(p,3))}function Tl(f,p){var A=de(f)?Sm:Rc;return A(f,oe(p,3))}var o3=La(function(f,p,A){Le.call(f,A)?f[A].push(p):ki(f,A,[p])});function f3(f,p,A,q){f=jr(f)?f:Xn(f),A=A&&!q?me(A):0;var j=f.length;return A<0&&(A=Mr(j+A,0)),Qa(f)?A<=j&&f.indexOf(p,A)>-1:!!j&&Fn(f,p,A)>-1}var h3=_e(function(f,p,A){var q=-1,j=typeof p=="function",J=jr(f)?qt(f.length):[];return Xi(f,function(X){J[++q]=j?xr(p,X,A):ws(X,p,A)}),J}),u3=La(function(f,p,A){ki(f,A,p)});function Wa(f,p){var A=de(f)?hr:qc;return A(f,oe(p,3))}function c3(f,p,A,q){return f==null?[]:(de(p)||(p=p==null?[]:[p]),A=q?a:A,de(A)||(A=A==null?[]:[A]),Fc(f,p,A))}var l3=La(function(f,p,A){f[A?0:1].push(p)},function(){return[[],[]]});function d3(f,p,A){var q=de(f)?Xo:uc,j=arguments.length<3;return q(f,oe(p,4),A,j,Xi)}function p3(f,p,A){var q=de(f)?Am:uc,j=arguments.length<3;return q(f,oe(p,4),A,j,Rc)}function v3(f,p){var A=de(f)?Wi:Pc;return A(f,Ya(oe(p,3)))}function g3(f){var p=de(f)?Sc:fy;return p(f)}function m3(f,p,A){(A?Nr(f,p,A):p===a)?p=1:p=me(p);var q=de(f)?Lb:hy;return q(f,p)}function b3(f){var p=de(f)?Fb:cy;return p(f)}function y3(f){if(f==null)return 0;if(jr(f))return Qa(f)?zn(f):f.length;var p=Or(f);return p==Yt||p==ut?f.size:bf(f).length}function w3(f,p,A){var q=de(f)?Qo:ly;return A&&Nr(f,p,A)&&(p=a),q(f,oe(p,3))}var _3=_e(function(f,p){if(f==null)return[];var A=p.length;return A>1&&Nr(f,p[0],p[1])?p=[]:A>2&&Nr(p[0],p[1],p[2])&&(p=[p[0]]),Fc(f,Dr(p,1),[])}),Za=eb||function(){return Ie.Date.now()};function M3(f,p){if(typeof p!="function")throw new ai(x);return f=me(f),function(){if(--f<1)return p.apply(this,arguments)}}function Bl(f,p,A){return p=A?a:p,p=f&&p==null?f.length:p,Li(f,P,a,a,a,a,p)}function Nl(f,p){var A;if(typeof p!="function")throw new ai(x);return f=me(f),function(){return--f>0&&(A=p.apply(this,arguments)),f<=1&&(p=a),A}}var zf=_e(function(f,p,A){var q=N;if(A.length){var j=Ji(A,Jn(zf));q|=U}return Li(f,q,p,A,j)}),ql=_e(function(f,p,A){var q=N|L;if(A.length){var j=Ji(A,Jn(ql));q|=U}return Li(p,q,f,A,j)});function Ul(f,p,A){p=A?a:p;var q=Li(f,B,a,a,a,a,a,p);return q.placeholder=Ul.placeholder,q}function kl(f,p,A){p=A?a:p;var q=Li(f,T,a,a,a,a,a,p);return q.placeholder=kl.placeholder,q}function Ll(f,p,A){var q,j,J,X,it,ft,jt=0,Ht=!1,Vt=!1,Gt=!0;if(typeof f!="function")throw new ai(x);p=ci(p)||0,ur(A)&&(Ht=!!A.leading,Vt="maxWait"in A,J=Vt?Mr(ci(A.maxWait)||0,p):J,Gt="trailing"in A?!!A.trailing:Gt);function te(gr){var xi=q,Hi=j;return q=j=a,jt=gr,X=f.apply(Hi,xi),X}function fe(gr){return jt=gr,it=Ss(xe,p),Ht?te(gr):X}function we(gr){var xi=gr-ft,Hi=gr-jt,nd=p-xi;return Vt?Pr(nd,J-Hi):nd}function he(gr){var xi=gr-ft,Hi=gr-jt;return ft===a||xi>=p||xi<0||Vt&&Hi>=J}function xe(){var gr=Za();if(he(gr))return Re(gr);it=Ss(xe,we(gr))}function Re(gr){return it=a,Gt&&q?te(gr):(q=j=a,X)}function Xr(){it!==a&&Zc(it),jt=0,q=ft=j=it=a}function qr(){return it===a?X:Re(Za())}function Qr(){var gr=Za(),xi=he(gr);if(q=arguments,j=this,ft=gr,xi){if(it===a)return fe(ft);if(Vt)return Zc(it),it=Ss(xe,p),te(ft)}return it===a&&(it=Ss(xe,p)),X}return Qr.cancel=Xr,Qr.flush=qr,Qr}var x3=_e(function(f,p){return Ic(f,1,p)}),E3=_e(function(f,p,A){return Ic(f,ci(p)||0,A)});function S3(f){return Li(f,G)}function Ja(f,p){if(typeof f!="function"||p!=null&&typeof p!="function")throw new ai(x);var A=function(){var q=arguments,j=p?p.apply(this,q):q[0],J=A.cache;if(J.has(j))return J.get(j);var X=f.apply(this,q);return A.cache=J.set(j,X)||J,X};return A.cache=new(Ja.Cache||Ui),A}Ja.Cache=Ui;function Ya(f){if(typeof f!="function")throw new ai(x);return function(){var p=arguments;switch(p.length){case 0:return!f.call(this);case 1:return!f.call(this,p[0]);case 2:return!f.call(this,p[0],p[1]);case 3:return!f.call(this,p[0],p[1],p[2])}return!f.apply(this,p)}}function A3(f){return Nl(2,f)}var D3=dy(function(f,p){p=p.length==1&&de(p[0])?hr(p[0],Zr(oe())):hr(Dr(p,1),Zr(oe()));var A=p.length;return _e(function(q){for(var j=-1,J=Pr(q.length,A);++j<J;)q[j]=p[j].call(this,q[j]);return xr(f,this,q)})}),jf=_e(function(f,p){var A=Ji(p,Jn(jf));return Li(f,U,a,p,A)}),Fl=_e(function(f,p){var A=Ji(p,Jn(Fl));return Li(f,k,a,p,A)}),I3=Fi(function(f,p){return Li(f,F,a,a,a,p)});function R3(f,p){if(typeof f!="function")throw new ai(x);return p=p===a?p:me(p),_e(f,p)}function P3(f,p){if(typeof f!="function")throw new ai(x);return p=p==null?0:Mr(me(p),0),_e(function(A){var q=A[p],j=en(A,0,p);return q&&Zi(j,q),xr(f,this,j)})}function O3(f,p,A){var q=!0,j=!0;if(typeof f!="function")throw new ai(x);return ur(A)&&(q="leading"in A?!!A.leading:q,j="trailing"in A?!!A.trailing:j),Ll(f,p,{leading:q,maxWait:p,trailing:j})}function C3(f){return Bl(f,1)}function T3(f,p){return jf(Df(p),f)}function B3(){if(!arguments.length)return[];var f=arguments[0];return de(f)?f:[f]}function N3(f){return fi(f,D)}function q3(f,p){return p=typeof p=="function"?p:a,fi(f,D,p)}function U3(f){return fi(f,S|D)}function k3(f,p){return p=typeof p=="function"?p:a,fi(f,S|D,p)}function L3(f,p){return p==null||Dc(f,p,Er(p))}function Mi(f,p){return f===p||f!==f&&p!==p}var F3=ja(vf),$3=ja(function(f,p){return f>=p}),xn=Tc(function(){return arguments}())?Tc:function(f){return cr(f)&&Le.call(f,"callee")&&!yc.call(f,"callee")},de=qt.isArray,z3=Tr?Zr(Tr):Jb;function jr(f){return f!=null&&Xa(f.length)&&!zi(f)}function vr(f){return cr(f)&&jr(f)}function j3(f){return f===!0||f===!1||cr(f)&&Br(f)==et}var rn=ib||th,H3=yi?Zr(yi):Yb;function K3(f){return cr(f)&&f.nodeType===1&&!As(f)}function V3(f){if(f==null)return!0;if(jr(f)&&(de(f)||typeof f=="string"||typeof f.splice=="function"||rn(f)||Yn(f)||xn(f)))return!f.length;var p=Or(f);if(p==Yt||p==ut)return!f.size;if(Es(f))return!bf(f).length;for(var A in f)if(Le.call(f,A))return!1;return!0}function G3(f,p){return _s(f,p)}function W3(f,p,A){A=typeof A=="function"?A:a;var q=A?A(f,p):a;return q===a?_s(f,p,a,A):!!q}function Hf(f){if(!cr(f))return!1;var p=Br(f);return p==Q||p==C||typeof f.message=="string"&&typeof f.name=="string"&&!As(f)}function Z3(f){return typeof f=="number"&&_c(f)}function zi(f){if(!ur(f))return!1;var p=Br(f);return p==rt||p==st||p==Z||p==Mt}function $l(f){return typeof f=="number"&&f==me(f)}function Xa(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=y}function ur(f){var p=typeof f;return f!=null&&(p=="object"||p=="function")}function cr(f){return f!=null&&typeof f=="object"}var zl=ni?Zr(ni):Qb;function J3(f,p){return f===p||mf(f,p,Bf(p))}function Y3(f,p,A){return A=typeof A=="function"?A:a,mf(f,p,Bf(p),A)}function X3(f){return jl(f)&&f!=+f}function Q3(f){if(qy(f))throw new ce(s);return Bc(f)}function t6(f){return f===null}function e6(f){return f==null}function jl(f){return typeof f=="number"||cr(f)&&Br(f)==gt}function As(f){if(!cr(f)||Br(f)!=ee)return!1;var p=Sa(f);if(p===null)return!0;var A=Le.call(p,"constructor")&&p.constructor;return typeof A=="function"&&A instanceof A&&_a.call(A)==Ym}var Kf=Di?Zr(Di):ty;function r6(f){return $l(f)&&f>=-y&&f<=y}var Hl=cs?Zr(cs):ey;function Qa(f){return typeof f=="string"||!de(f)&&cr(f)&&Br(f)==pt}function Yr(f){return typeof f=="symbol"||cr(f)&&Br(f)==Xt}var Yn=vn?Zr(vn):ry;function i6(f){return f===a}function n6(f){return cr(f)&&Or(f)==lt}function s6(f){return cr(f)&&Br(f)==Qt}var a6=ja(yf),o6=ja(function(f,p){return f<=p});function Kl(f){if(!f)return[];if(jr(f))return Qa(f)?wi(f):zr(f);if(ds&&f[ds])return Lm(f[ds]());var p=Or(f),A=p==Yt?af:p==ut?ba:Xn;return A(f)}function ji(f){if(!f)return f===0?f:0;if(f=ci(f),f===m||f===-m){var p=f<0?-1:1;return p*u}return f===f?f:0}function me(f){var p=ji(f),A=p%1;return p===p?A?p-A:p:0}function Vl(f){return f?yn(me(f),0,l):0}function ci(f){if(typeof f=="number")return f;if(Yr(f))return e;if(ur(f)){var p=typeof f.valueOf=="function"?f.valueOf():f;f=ur(p)?p+"":p}if(typeof f!="string")return f===0?f:+f;f=cc(f);var A=Ke.test(f);return A||Ge.test(f)?le(f.slice(2),A?2:8):He.test(f)?e:+f}function Gl(f){return Ri(f,Hr(f))}function f6(f){return f?yn(me(f),-y,y):f===0?f:0}function Ue(f){return f==null?"":Jr(f)}var h6=Wn(function(f,p){if(Es(p)||jr(p)){Ri(p,Er(p),f);return}for(var A in p)Le.call(p,A)&&bs(f,A,p[A])}),Wl=Wn(function(f,p){Ri(p,Hr(p),f)}),to=Wn(function(f,p,A,q){Ri(p,Hr(p),f,q)}),u6=Wn(function(f,p,A,q){Ri(p,Er(p),f,q)}),c6=Fi(lf);function l6(f,p){var A=Gn(f);return p==null?A:Ac(A,p)}var d6=_e(function(f,p){f=nr(f);var A=-1,q=p.length,j=q>2?p[2]:a;for(j&&Nr(p[0],p[1],j)&&(q=1);++A<q;)for(var J=p[A],X=Hr(J),it=-1,ft=X.length;++it<ft;){var jt=X[it],Ht=f[jt];(Ht===a||Mi(Ht,Hn[jt])&&!Le.call(f,jt))&&(f[jt]=J[jt])}return f}),p6=_e(function(f){return f.push(a,cl),xr(Zl,a,f)});function v6(f,p){return oc(f,oe(p,3),Ii)}function g6(f,p){return oc(f,oe(p,3),pf)}function m6(f,p){return f==null?f:df(f,oe(p,3),Hr)}function b6(f,p){return f==null?f:Oc(f,oe(p,3),Hr)}function y6(f,p){return f&&Ii(f,oe(p,3))}function w6(f,p){return f&&pf(f,oe(p,3))}function _6(f){return f==null?[]:Na(f,Er(f))}function M6(f){return f==null?[]:Na(f,Hr(f))}function Vf(f,p,A){var q=f==null?a:wn(f,p);return q===a?A:q}function x6(f,p){return f!=null&&pl(f,p,Vb)}function Gf(f,p){return f!=null&&pl(f,p,Gb)}var E6=al(function(f,p,A){p!=null&&typeof p.toString!="function"&&(p=Ma.call(p)),f[p]=A},Zf(Kr)),S6=al(function(f,p,A){p!=null&&typeof p.toString!="function"&&(p=Ma.call(p)),Le.call(f,p)?f[p].push(A):f[p]=[A]},oe),A6=_e(ws);function Er(f){return jr(f)?Ec(f):bf(f)}function Hr(f){return jr(f)?Ec(f,!0):iy(f)}function D6(f,p){var A={};return p=oe(p,3),Ii(f,function(q,j,J){ki(A,p(q,j,J),q)}),A}function I6(f,p){var A={};return p=oe(p,3),Ii(f,function(q,j,J){ki(A,j,p(q,j,J))}),A}var R6=Wn(function(f,p,A){qa(f,p,A)}),Zl=Wn(function(f,p,A,q){qa(f,p,A,q)}),P6=Fi(function(f,p){var A={};if(f==null)return A;var q=!1;p=hr(p,function(J){return J=tn(J,f),q||(q=J.length>1),J}),Ri(f,Cf(f),A),q&&(A=fi(A,S|E|D,Ey));for(var j=p.length;j--;)Ef(A,p[j]);return A});function O6(f,p){return Jl(f,Ya(oe(p)))}var C6=Fi(function(f,p){return f==null?{}:sy(f,p)});function Jl(f,p){if(f==null)return{};var A=hr(Cf(f),function(q){return[q]});return p=oe(p),$c(f,A,function(q,j){return p(q,j[0])})}function T6(f,p,A){p=tn(p,f);var q=-1,j=p.length;for(j||(j=1,f=a);++q<j;){var J=f==null?a:f[Pi(p[q])];J===a&&(q=j,J=A),f=zi(J)?J.call(f):J}return f}function B6(f,p,A){return f==null?f:Ms(f,p,A)}function N6(f,p,A,q){return q=typeof q=="function"?q:a,f==null?f:Ms(f,p,A,q)}var Yl=hl(Er),Xl=hl(Hr);function q6(f,p,A){var q=de(f),j=q||rn(f)||Yn(f);if(p=oe(p,4),A==null){var J=f&&f.constructor;j?A=q?new J:[]:ur(f)?A=zi(J)?Gn(Sa(f)):{}:A={}}return(j?si:Ii)(f,function(X,it,ft){return p(A,X,it,ft)}),A}function U6(f,p){return f==null?!0:Ef(f,p)}function k6(f,p,A){return f==null?f:Vc(f,p,Df(A))}function L6(f,p,A,q){return q=typeof q=="function"?q:a,f==null?f:Vc(f,p,Df(A),q)}function Xn(f){return f==null?[]:sf(f,Er(f))}function F6(f){return f==null?[]:sf(f,Hr(f))}function $6(f,p,A){return A===a&&(A=p,p=a),A!==a&&(A=ci(A),A=A===A?A:0),p!==a&&(p=ci(p),p=p===p?p:0),yn(ci(f),p,A)}function z6(f,p,A){return p=ji(p),A===a?(A=p,p=0):A=ji(A),f=ci(f),Wb(f,p,A)}function j6(f,p,A){if(A&&typeof A!="boolean"&&Nr(f,p,A)&&(p=A=a),A===a&&(typeof p=="boolean"?(A=p,p=a):typeof f=="boolean"&&(A=f,f=a)),f===a&&p===a?(f=0,p=1):(f=ji(f),p===a?(p=f,f=0):p=ji(p)),f>p){var q=f;f=p,p=q}if(A||f%1||p%1){var j=Mc();return Pr(f+j*(p-f+rr("1e-"+((j+"").length-1))),p)}return _f(f,p)}var H6=Zn(function(f,p,A){return p=p.toLowerCase(),f+(A?Ql(p):p)});function Ql(f){return Wf(Ue(f).toLowerCase())}function td(f){return f=Ue(f),f&&f.replace(Oe,Bm).replace(Zo,"")}function K6(f,p,A){f=Ue(f),p=Jr(p);var q=f.length;A=A===a?q:yn(me(A),0,q);var j=A;return A-=p.length,A>=0&&f.slice(A,j)==p}function V6(f){return f=Ue(f),f&&pe.test(f)?f.replace(Lt,Nm):f}function G6(f){return f=Ue(f),f&&Ot.test(f)?f.replace(Dt,"\\$&"):f}var W6=Zn(function(f,p,A){return f+(A?"-":"")+p.toLowerCase()}),Z6=Zn(function(f,p,A){return f+(A?" ":"")+p.toLowerCase()}),J6=il("toLowerCase");function Y6(f,p,A){f=Ue(f),p=me(p);var q=p?zn(f):0;if(!p||q>=p)return f;var j=(p-q)/2;return za(Ra(j),A)+f+za(Ia(j),A)}function X6(f,p,A){f=Ue(f),p=me(p);var q=p?zn(f):0;return p&&q<p?f+za(p-q,A):f}function Q6(f,p,A){f=Ue(f),p=me(p);var q=p?zn(f):0;return p&&q<p?za(p-q,A)+f:f}function tw(f,p,A){return A||p==null?p=0:p&&(p=+p),ob(Ue(f).replace(ye,""),p||0)}function ew(f,p,A){return(A?Nr(f,p,A):p===a)?p=1:p=me(p),Mf(Ue(f),p)}function rw(){var f=arguments,p=Ue(f[0]);return f.length<3?p:p.replace(f[1],f[2])}var iw=Zn(function(f,p,A){return f+(A?"_":"")+p.toLowerCase()});function nw(f,p,A){return A&&typeof A!="number"&&Nr(f,p,A)&&(p=A=a),A=A===a?l:A>>>0,A?(f=Ue(f),f&&(typeof p=="string"||p!=null&&!Kf(p))&&(p=Jr(p),!p&&$n(f))?en(wi(f),0,A):f.split(p,A)):[]}var sw=Zn(function(f,p,A){return f+(A?" ":"")+Wf(p)});function aw(f,p,A){return f=Ue(f),A=A==null?0:yn(me(A),0,f.length),p=Jr(p),f.slice(A,A+p.length)==p}function ow(f,p,A){var q=V.templateSettings;A&&Nr(f,p,A)&&(p=a),f=Ue(f),p=to({},p,q,ul);var j=to({},p.imports,q.imports,ul),J=Er(j),X=sf(j,J),it,ft,jt=0,Ht=p.interpolate||Be,Vt="__p += '",Gt=of((p.escape||Be).source+"|"+Ht.source+"|"+(Ht===ge?$t:Be).source+"|"+(p.evaluate||Be).source+"|$","g"),te="//# sourceURL="+(Le.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Jo+"]")+`
`;f.replace(Gt,function(he,xe,Re,Xr,qr,Qr){return Re||(Re=Xr),Vt+=f.slice(jt,Qr).replace(Ze,qm),xe&&(it=!0,Vt+=`' +
__e(`+xe+`) +
'`),qr&&(ft=!0,Vt+=`';
`+qr+`;
__p += '`),Re&&(Vt+=`' +
((__t = (`+Re+`)) == null ? '' : __t) +
'`),jt=Qr+he.length,he}),Vt+=`';
`;var fe=Le.call(p,"variable")&&p.variable;if(!fe)Vt=`with (obj) {
`+Vt+`
}
`;else if(dr.test(fe))throw new ce(w);Vt=(ft?Vt.replace(Fe,""):Vt).replace(Nt,"$1").replace(kt,"$1;"),Vt="function("+(fe||"obj")+`) {
`+(fe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(it?", __e = _.escape":"")+(ft?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Vt+`return __p
}`;var we=rd(function(){return Ce(J,te+"return "+Vt).apply(a,X)});if(we.source=Vt,Hf(we))throw we;return we}function fw(f){return Ue(f).toLowerCase()}function hw(f){return Ue(f).toUpperCase()}function uw(f,p,A){if(f=Ue(f),f&&(A||p===a))return cc(f);if(!f||!(p=Jr(p)))return f;var q=wi(f),j=wi(p),J=lc(q,j),X=dc(q,j)+1;return en(q,J,X).join("")}function cw(f,p,A){if(f=Ue(f),f&&(A||p===a))return f.slice(0,vc(f)+1);if(!f||!(p=Jr(p)))return f;var q=wi(f),j=dc(q,wi(p))+1;return en(q,0,j).join("")}function lw(f,p,A){if(f=Ue(f),f&&(A||p===a))return f.replace(ye,"");if(!f||!(p=Jr(p)))return f;var q=wi(f),j=lc(q,wi(p));return en(q,j).join("")}function dw(f,p){var A=nt,q=v;if(ur(p)){var j="separator"in p?p.separator:j;A="length"in p?me(p.length):A,q="omission"in p?Jr(p.omission):q}f=Ue(f);var J=f.length;if($n(f)){var X=wi(f);J=X.length}if(A>=J)return f;var it=A-zn(q);if(it<1)return q;var ft=X?en(X,0,it).join(""):f.slice(0,it);if(j===a)return ft+q;if(X&&(it+=ft.length-it),Kf(j)){if(f.slice(it).search(j)){var jt,Ht=ft;for(j.global||(j=of(j.source,Ue(Se.exec(j))+"g")),j.lastIndex=0;jt=j.exec(Ht);)var Vt=jt.index;ft=ft.slice(0,Vt===a?it:Vt)}}else if(f.indexOf(Jr(j),it)!=it){var Gt=ft.lastIndexOf(j);Gt>-1&&(ft=ft.slice(0,Gt))}return ft+q}function pw(f){return f=Ue(f),f&&Et.test(f)?f.replace(ar,jm):f}var vw=Zn(function(f,p,A){return f+(A?" ":"")+p.toUpperCase()}),Wf=il("toUpperCase");function ed(f,p,A){return f=Ue(f),p=A?a:p,p===a?km(f)?Vm(f):Rm(f):f.match(p)||[]}var rd=_e(function(f,p){try{return xr(f,a,p)}catch(A){return Hf(A)?A:new ce(A)}}),gw=Fi(function(f,p){return si(p,function(A){A=Pi(A),ki(f,A,zf(f[A],f))}),f});function mw(f){var p=f==null?0:f.length,A=oe();return f=p?hr(f,function(q){if(typeof q[1]!="function")throw new ai(x);return[A(q[0]),q[1]]}):[],_e(function(q){for(var j=-1;++j<p;){var J=f[j];if(xr(J[0],this,q))return xr(J[1],this,q)}})}function bw(f){return jb(fi(f,S))}function Zf(f){return function(){return f}}function yw(f,p){return f==null||f!==f?p:f}var ww=sl(),_w=sl(!0);function Kr(f){return f}function Jf(f){return Nc(typeof f=="function"?f:fi(f,S))}function Mw(f){return Uc(fi(f,S))}function xw(f,p){return kc(f,fi(p,S))}var Ew=_e(function(f,p){return function(A){return ws(A,f,p)}}),Sw=_e(function(f,p){return function(A){return ws(f,A,p)}});function Yf(f,p,A){var q=Er(p),j=Na(p,q);A==null&&!(ur(p)&&(j.length||!q.length))&&(A=p,p=f,f=this,j=Na(p,Er(p)));var J=!(ur(A)&&"chain"in A)||!!A.chain,X=zi(f);return si(j,function(it){var ft=p[it];f[it]=ft,X&&(f.prototype[it]=function(){var jt=this.__chain__;if(J||jt){var Ht=f(this.__wrapped__),Vt=Ht.__actions__=zr(this.__actions__);return Vt.push({func:ft,args:arguments,thisArg:f}),Ht.__chain__=jt,Ht}return ft.apply(f,Zi([this.value()],arguments))})}),f}function Aw(){return Ie._===this&&(Ie._=Xm),this}function Xf(){}function Dw(f){return f=me(f),_e(function(p){return Lc(p,f)})}var Iw=Rf(hr),Rw=Rf(ac),Pw=Rf(Qo);function id(f){return qf(f)?tf(Pi(f)):ay(f)}function Ow(f){return function(p){return f==null?a:wn(f,p)}}var Cw=ol(),Tw=ol(!0);function Qf(){return[]}function th(){return!1}function Bw(){return{}}function Nw(){return""}function qw(){return!0}function Uw(f,p){if(f=me(f),f<1||f>y)return[];var A=l,q=Pr(f,l);p=oe(p),f-=l;for(var j=nf(q,p);++A<f;)p(A);return j}function kw(f){return de(f)?hr(f,Pi):Yr(f)?[f]:zr(xl(Ue(f)))}function Lw(f){var p=++Jm;return Ue(f)+p}var Fw=$a(function(f,p){return f+p},0),$w=Pf("ceil"),zw=$a(function(f,p){return f/p},1),jw=Pf("floor");function Hw(f){return f&&f.length?Ba(f,Kr,vf):a}function Kw(f,p){return f&&f.length?Ba(f,oe(p,2),vf):a}function Vw(f){return hc(f,Kr)}function Gw(f,p){return hc(f,oe(p,2))}function Ww(f){return f&&f.length?Ba(f,Kr,yf):a}function Zw(f,p){return f&&f.length?Ba(f,oe(p,2),yf):a}var Jw=$a(function(f,p){return f*p},1),Yw=Pf("round"),Xw=$a(function(f,p){return f-p},0);function Qw(f){return f&&f.length?rf(f,Kr):0}function t5(f,p){return f&&f.length?rf(f,oe(p,2)):0}return V.after=M3,V.ary=Bl,V.assign=h6,V.assignIn=Wl,V.assignInWith=to,V.assignWith=u6,V.at=c6,V.before=Nl,V.bind=zf,V.bindAll=gw,V.bindKey=ql,V.castArray=B3,V.chain=Ol,V.chunk=jy,V.compact=Hy,V.concat=Ky,V.cond=mw,V.conforms=bw,V.constant=Zf,V.countBy=Q2,V.create=l6,V.curry=Ul,V.curryRight=kl,V.debounce=Ll,V.defaults=d6,V.defaultsDeep=p6,V.defer=x3,V.delay=E3,V.difference=Vy,V.differenceBy=Gy,V.differenceWith=Wy,V.drop=Zy,V.dropRight=Jy,V.dropRightWhile=Yy,V.dropWhile=Xy,V.fill=Qy,V.filter=e3,V.flatMap=n3,V.flatMapDeep=s3,V.flatMapDepth=a3,V.flatten=Dl,V.flattenDeep=t2,V.flattenDepth=e2,V.flip=S3,V.flow=ww,V.flowRight=_w,V.fromPairs=r2,V.functions=_6,V.functionsIn=M6,V.groupBy=o3,V.initial=n2,V.intersection=s2,V.intersectionBy=a2,V.intersectionWith=o2,V.invert=E6,V.invertBy=S6,V.invokeMap=h3,V.iteratee=Jf,V.keyBy=u3,V.keys=Er,V.keysIn=Hr,V.map=Wa,V.mapKeys=D6,V.mapValues=I6,V.matches=Mw,V.matchesProperty=xw,V.memoize=Ja,V.merge=R6,V.mergeWith=Zl,V.method=Ew,V.methodOf=Sw,V.mixin=Yf,V.negate=Ya,V.nthArg=Dw,V.omit=P6,V.omitBy=O6,V.once=A3,V.orderBy=c3,V.over=Iw,V.overArgs=D3,V.overEvery=Rw,V.overSome=Pw,V.partial=jf,V.partialRight=Fl,V.partition=l3,V.pick=C6,V.pickBy=Jl,V.property=id,V.propertyOf=Ow,V.pull=c2,V.pullAll=Rl,V.pullAllBy=l2,V.pullAllWith=d2,V.pullAt=p2,V.range=Cw,V.rangeRight=Tw,V.rearg=I3,V.reject=v3,V.remove=v2,V.rest=R3,V.reverse=Ff,V.sampleSize=m3,V.set=B6,V.setWith=N6,V.shuffle=b3,V.slice=g2,V.sortBy=_3,V.sortedUniq=x2,V.sortedUniqBy=E2,V.split=nw,V.spread=P3,V.tail=S2,V.take=A2,V.takeRight=D2,V.takeRightWhile=I2,V.takeWhile=R2,V.tap=H2,V.throttle=O3,V.thru=Ga,V.toArray=Kl,V.toPairs=Yl,V.toPairsIn=Xl,V.toPath=kw,V.toPlainObject=Gl,V.transform=q6,V.unary=C3,V.union=P2,V.unionBy=O2,V.unionWith=C2,V.uniq=T2,V.uniqBy=B2,V.uniqWith=N2,V.unset=U6,V.unzip=$f,V.unzipWith=Pl,V.update=k6,V.updateWith=L6,V.values=Xn,V.valuesIn=F6,V.without=q2,V.words=ed,V.wrap=T3,V.xor=U2,V.xorBy=k2,V.xorWith=L2,V.zip=F2,V.zipObject=$2,V.zipObjectDeep=z2,V.zipWith=j2,V.entries=Yl,V.entriesIn=Xl,V.extend=Wl,V.extendWith=to,Yf(V,V),V.add=Fw,V.attempt=rd,V.camelCase=H6,V.capitalize=Ql,V.ceil=$w,V.clamp=$6,V.clone=N3,V.cloneDeep=U3,V.cloneDeepWith=k3,V.cloneWith=q3,V.conformsTo=L3,V.deburr=td,V.defaultTo=yw,V.divide=zw,V.endsWith=K6,V.eq=Mi,V.escape=V6,V.escapeRegExp=G6,V.every=t3,V.find=r3,V.findIndex=Sl,V.findKey=v6,V.findLast=i3,V.findLastIndex=Al,V.findLastKey=g6,V.floor=jw,V.forEach=Cl,V.forEachRight=Tl,V.forIn=m6,V.forInRight=b6,V.forOwn=y6,V.forOwnRight=w6,V.get=Vf,V.gt=F3,V.gte=$3,V.has=x6,V.hasIn=Gf,V.head=Il,V.identity=Kr,V.includes=f3,V.indexOf=i2,V.inRange=z6,V.invoke=A6,V.isArguments=xn,V.isArray=de,V.isArrayBuffer=z3,V.isArrayLike=jr,V.isArrayLikeObject=vr,V.isBoolean=j3,V.isBuffer=rn,V.isDate=H3,V.isElement=K3,V.isEmpty=V3,V.isEqual=G3,V.isEqualWith=W3,V.isError=Hf,V.isFinite=Z3,V.isFunction=zi,V.isInteger=$l,V.isLength=Xa,V.isMap=zl,V.isMatch=J3,V.isMatchWith=Y3,V.isNaN=X3,V.isNative=Q3,V.isNil=e6,V.isNull=t6,V.isNumber=jl,V.isObject=ur,V.isObjectLike=cr,V.isPlainObject=As,V.isRegExp=Kf,V.isSafeInteger=r6,V.isSet=Hl,V.isString=Qa,V.isSymbol=Yr,V.isTypedArray=Yn,V.isUndefined=i6,V.isWeakMap=n6,V.isWeakSet=s6,V.join=f2,V.kebabCase=W6,V.last=ui,V.lastIndexOf=h2,V.lowerCase=Z6,V.lowerFirst=J6,V.lt=a6,V.lte=o6,V.max=Hw,V.maxBy=Kw,V.mean=Vw,V.meanBy=Gw,V.min=Ww,V.minBy=Zw,V.stubArray=Qf,V.stubFalse=th,V.stubObject=Bw,V.stubString=Nw,V.stubTrue=qw,V.multiply=Jw,V.nth=u2,V.noConflict=Aw,V.noop=Xf,V.now=Za,V.pad=Y6,V.padEnd=X6,V.padStart=Q6,V.parseInt=tw,V.random=j6,V.reduce=d3,V.reduceRight=p3,V.repeat=ew,V.replace=rw,V.result=T6,V.round=Yw,V.runInContext=ot,V.sample=g3,V.size=y3,V.snakeCase=iw,V.some=w3,V.sortedIndex=m2,V.sortedIndexBy=b2,V.sortedIndexOf=y2,V.sortedLastIndex=w2,V.sortedLastIndexBy=_2,V.sortedLastIndexOf=M2,V.startCase=sw,V.startsWith=aw,V.subtract=Xw,V.sum=Qw,V.sumBy=t5,V.template=ow,V.times=Uw,V.toFinite=ji,V.toInteger=me,V.toLength=Vl,V.toLower=fw,V.toNumber=ci,V.toSafeInteger=f6,V.toString=Ue,V.toUpper=hw,V.trim=uw,V.trimEnd=cw,V.trimStart=lw,V.truncate=dw,V.unescape=pw,V.uniqueId=Lw,V.upperCase=vw,V.upperFirst=Wf,V.each=Cl,V.eachRight=Tl,V.first=Il,Yf(V,function(){var f={};return Ii(V,function(p,A){Le.call(V.prototype,A)||(f[A]=p)}),f}(),{chain:!1}),V.VERSION=h,si(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){V[f].placeholder=V}),si(["drop","take"],function(f,p){Ae.prototype[f]=function(A){A=A===a?1:Mr(me(A),0);var q=this.__filtered__&&!p?new Ae(this):this.clone();return q.__filtered__?q.__takeCount__=Pr(A,q.__takeCount__):q.__views__.push({size:Pr(A,l),type:f+(q.__dir__<0?"Right":"")}),q},Ae.prototype[f+"Right"]=function(A){return this.reverse()[f](A).reverse()}}),si(["filter","map","takeWhile"],function(f,p){var A=p+1,q=A==n||A==d;Ae.prototype[f]=function(j){var J=this.clone();return J.__iteratees__.push({iteratee:oe(j,3),type:A}),J.__filtered__=J.__filtered__||q,J}}),si(["head","last"],function(f,p){var A="take"+(p?"Right":"");Ae.prototype[f]=function(){return this[A](1).value()[0]}}),si(["initial","tail"],function(f,p){var A="drop"+(p?"":"Right");Ae.prototype[f]=function(){return this.__filtered__?new Ae(this):this[A](1)}}),Ae.prototype.compact=function(){return this.filter(Kr)},Ae.prototype.find=function(f){return this.filter(f).head()},Ae.prototype.findLast=function(f){return this.reverse().find(f)},Ae.prototype.invokeMap=_e(function(f,p){return typeof f=="function"?new Ae(this):this.map(function(A){return ws(A,f,p)})}),Ae.prototype.reject=function(f){return this.filter(Ya(oe(f)))},Ae.prototype.slice=function(f,p){f=me(f);var A=this;return A.__filtered__&&(f>0||p<0)?new Ae(A):(f<0?A=A.takeRight(-f):f&&(A=A.drop(f)),p!==a&&(p=me(p),A=p<0?A.dropRight(-p):A.take(p-f)),A)},Ae.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},Ae.prototype.toArray=function(){return this.take(l)},Ii(Ae.prototype,function(f,p){var A=/^(?:filter|find|map|reject)|While$/.test(p),q=/^(?:head|last)$/.test(p),j=V[q?"take"+(p=="last"?"Right":""):p],J=q||/^find/.test(p);j&&(V.prototype[p]=function(){var X=this.__wrapped__,it=q?[1]:arguments,ft=X instanceof Ae,jt=it[0],Ht=ft||de(X),Vt=function(xe){var Re=j.apply(V,Zi([xe],it));return q&&Gt?Re[0]:Re};Ht&&A&&typeof jt=="function"&&jt.length!=1&&(ft=Ht=!1);var Gt=this.__chain__,te=!!this.__actions__.length,fe=J&&!Gt,we=ft&&!te;if(!J&&Ht){X=we?X:new Ae(this);var he=f.apply(X,it);return he.__actions__.push({func:Ga,args:[Vt],thisArg:a}),new oi(he,Gt)}return fe&&we?f.apply(this,it):(he=this.thru(Vt),fe?q?he.value()[0]:he.value():he)})}),si(["pop","push","shift","sort","splice","unshift"],function(f){var p=ya[f],A=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",q=/^(?:pop|shift)$/.test(f);V.prototype[f]=function(){var j=arguments;if(q&&!this.__chain__){var J=this.value();return p.apply(de(J)?J:[],j)}return this[A](function(X){return p.apply(de(X)?X:[],j)})}}),Ii(Ae.prototype,function(f,p){var A=V[p];if(A){var q=A.name+"";Le.call(Vn,q)||(Vn[q]=[]),Vn[q].push({name:p,func:A})}}),Vn[Fa(a,L).name]=[{name:"wrapper",func:a}],Ae.prototype.clone=pb,Ae.prototype.reverse=vb,Ae.prototype.value=gb,V.prototype.at=K2,V.prototype.chain=V2,V.prototype.commit=G2,V.prototype.next=W2,V.prototype.plant=J2,V.prototype.reverse=Y2,V.prototype.toJSON=V.prototype.valueOf=V.prototype.value=X2,V.prototype.first=V.prototype.head,ds&&(V.prototype[ds]=Z2),V},jn=Gm();pr?((pr.exports=jn)._=jn,ir._=jn):Ie._=jn}).call(Ls)})(uu,uu.exports);var bS=Object.defineProperty,yS=Object.defineProperties,wS=Object.getOwnPropertyDescriptors,Av=Object.getOwnPropertySymbols,_S=Object.prototype.hasOwnProperty,MS=Object.prototype.propertyIsEnumerable,Dv=(c,i,a)=>i in c?bS(c,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[i]=a,uo=(c,i)=>{for(var a in i||(i={}))_S.call(i,a)&&Dv(c,a,i[a]);if(Av)for(var a of Av(i))MS.call(i,a)&&Dv(c,a,i[a]);return c},xS=(c,i)=>yS(c,wS(i));function mi(c,i,a){let h;const g=cu(c);return i.rpcMap&&(h=i.rpcMap[g]),h||(h=`${mS}?chainId=eip155:${g}&projectId=${a}`),h}function cu(c){return c.includes("eip155")?Number(c.split(":")[1]):Number(c)}function ES(c,i){if(!i.includes(c))throw new Error(`Chain '${c}' not approved. Please use one of the following: ${i.toString()}`)}function SS(c){return c.map(i=>`${i.split(":")[0]}:${i.split(":")[1]}`)}function AS(c,i){const a=Object.keys(i.namespaces).filter(g=>g.includes(c));if(!a.length)return[];const h=[];return a.forEach(g=>{const s=i.namespaces[g].accounts;h.push(...s)}),h}function DS(c,i={}){const a=Iv(c),h=Iv(i);return uu.exports.merge(a,h)}function Iv(c){var i,a,h,g;const s={};if(!uS(c))return s;for(const[x,w]of Object.entries(c)){const _=Mm(x)?[x]:w.chains,M=w.methods||[],b=w.events||[],S=w.rpcMap||{},E=_o(x);s[E]=xS(uo(uo({},s[E]),w),{chains:K0(_,(i=s[E])==null?void 0:i.chains),methods:K0(M,(a=s[E])==null?void 0:a.methods),events:K0(b,(h=s[E])==null?void 0:h.events),rpcMap:uo(uo({},S),(g=s[E])==null?void 0:g.rpcMap)})}return s}const xm={},mr=c=>xm[c],V0=(c,i)=>{xm[c]=i};class IS{constructor(i){this.name="polkadot",this.namespace=i.namespace,this.events=mr("events"),this.client=mr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,a){if(this.chainId=i,!this.httpProviders[i]){const h=a||mi(`${this.name}:${i}`,this.namespace);if(!h)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,h)}this.events.emit(un.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const i=this.namespace.accounts;return i?i.filter(a=>a.split(":")[1]===this.chainId.toString()).map(a=>a.split(":")[2])||[]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(a=>{var h;i[a]=this.createHttpProvider(a,(h=this.namespace.rpcMap)==null?void 0:h[a])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,a=this.httpProviders[i];if(typeof a>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return a}setHttpProvider(i,a){const h=this.createHttpProvider(i,a);h&&(this.httpProviders[i]=h)}createHttpProvider(i,a){const h=a||mi(i,this.namespace);return typeof h>"u"?void 0:new hn(new Nn(h,mr("disableProviderPing")))}}class RS{constructor(i){this.name="eip155",this.namespace=i.namespace,this.events=mr("events"),this.client=mr("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(i){var a;switch(i.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return this.handleSwitchChain(i.request.params?(a=i.request.params[0])==null?void 0:a.chainId:"0x0"),null;case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(i.request.method)?await this.client.request(i):this.getHttpProvider().request(i.request)}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}setDefaultChain(i,a){const h=cu(i);if(!this.httpProviders[h]){const g=a||mi(`${this.name}:${h}`,this.namespace,this.client.core.projectId);if(!g)throw new Error(`No RPC url provided for chainId: ${h}`);this.setHttpProvider(h,g)}this.chainId=h,this.events.emit(un.DEFAULT_CHAIN_CHANGED,`${this.name}:${h}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}createHttpProvider(i,a){const h=a||mi(`${this.name}:${i}`,this.namespace,this.client.core.projectId);return typeof h>"u"?void 0:new hn(new Nn(h,mr("disableProviderPing")))}setHttpProvider(i,a){const h=this.createHttpProvider(i,a);h&&(this.httpProviders[i]=h)}createHttpProviders(){const i={};return this.namespace.chains.forEach(a=>{var h;const g=cu(a);i[g]=this.createHttpProvider(g,(h=this.namespace.rpcMap)==null?void 0:h[a])}),i}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(a=>a.split(":")[1]===this.chainId.toString()).map(a=>a.split(":")[2]))]:[]}getHttpProvider(){const i=this.chainId,a=this.httpProviders[i];if(typeof a>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return a}handleSwitchChain(i){const a=parseInt(i,16),h=`${this.name}:${a}`;ES(h,this.namespace.chains),this.setDefaultChain(`${a}`)}}class PS{constructor(i){this.name="solana",this.namespace=i.namespace,this.events=mr("events"),this.client=mr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,a){if(!this.httpProviders[i]){const h=a||mi(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!h)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,h)}this.chainId=i,this.events.emit(un.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(a=>a.split(":")[1]===this.chainId.toString()).map(a=>a.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(a=>{var h;i[a]=this.createHttpProvider(a,(h=this.namespace.rpcMap)==null?void 0:h[a])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,a=this.httpProviders[i];if(typeof a>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return a}setHttpProvider(i,a){const h=this.createHttpProvider(i,a);h&&(this.httpProviders[i]=h)}createHttpProvider(i,a){const h=a||mi(i,this.namespace,this.client.core.projectId);return typeof h>"u"?void 0:new hn(new Nn(h,mr("disableProviderPing")))}}class OS{constructor(i){this.name="cosmos",this.namespace=i.namespace,this.events=mr("events"),this.client=mr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,a){if(this.chainId=i,!this.httpProviders[i]){const h=a||mi(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!h)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,h)}this.events.emit(un.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(a=>a.split(":")[1]===this.chainId.toString()).map(a=>a.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(a=>{var h;i[a]=this.createHttpProvider(a,(h=this.namespace.rpcMap)==null?void 0:h[a])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,a=this.httpProviders[i];if(typeof a>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return a}setHttpProvider(i,a){const h=this.createHttpProvider(i,a);h&&(this.httpProviders[i]=h)}createHttpProvider(i,a){const h=a||mi(i,this.namespace,this.client.core.projectId);return typeof h>"u"?void 0:new hn(new Nn(h,mr("disableProviderPing")))}}class CS{constructor(i){this.name="cip34",this.namespace=i.namespace,this.events=mr("events"),this.client=mr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,a){if(this.chainId=i,!this.httpProviders[i]){const h=a||this.getCardanoRPCUrl(i);if(!h)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,h)}this.events.emit(un.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(a=>a.split(":")[1]===this.chainId.toString()).map(a=>a.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(a=>{const h=this.getCardanoRPCUrl(a);i[a]=this.createHttpProvider(a,h)}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,a=this.httpProviders[i];if(typeof a>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return a}getCardanoRPCUrl(i){const a=this.namespace.rpcMap;if(a)return a[i]}setHttpProvider(i,a){const h=this.createHttpProvider(i,a);h&&(this.httpProviders[i]=h)}createHttpProvider(i,a){const h=a||this.getCardanoRPCUrl(i);return typeof h>"u"?void 0:new hn(new Nn(h,mr("disableProviderPing")))}}class TS{constructor(i){this.name="elrond",this.namespace=i.namespace,this.events=mr("events"),this.client=mr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,a){if(!this.httpProviders[i]){const h=a||mi(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!h)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,h)}this.chainId=i,this.events.emit(un.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(a=>a.split(":")[1]===this.chainId.toString()).map(a=>a.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(a=>{var h;i[a]=this.createHttpProvider(a,(h=this.namespace.rpcMap)==null?void 0:h[a])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,a=this.httpProviders[i];if(typeof a>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return a}setHttpProvider(i,a){const h=this.createHttpProvider(i,a);h&&(this.httpProviders[i]=h)}createHttpProvider(i,a){const h=a||mi(i,this.namespace,this.client.core.projectId);return typeof h>"u"?void 0:new hn(new Nn(h,mr("disableProviderPing")))}}class BS{constructor(i){this.name="multiversx",this.namespace=i.namespace,this.events=mr("events"),this.client=mr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,a){if(!this.httpProviders[i]){const h=a||mi(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!h)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,h)}this.chainId=i,this.events.emit(un.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(a=>a.split(":")[1]===this.chainId.toString()).map(a=>a.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(a=>{var h;i[a]=this.createHttpProvider(a,(h=this.namespace.rpcMap)==null?void 0:h[a])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,a=this.httpProviders[i];if(typeof a>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return a}setHttpProvider(i,a){const h=this.createHttpProvider(i,a);h&&(this.httpProviders[i]=h)}createHttpProvider(i,a){const h=a||mi(i,this.namespace,this.client.core.projectId);return typeof h>"u"?void 0:new hn(new Nn(h,mr("disableProviderPing")))}}var NS=Object.defineProperty,qS=Object.defineProperties,US=Object.getOwnPropertyDescriptors,Rv=Object.getOwnPropertySymbols,kS=Object.prototype.hasOwnProperty,LS=Object.prototype.propertyIsEnumerable,Pv=(c,i,a)=>i in c?NS(c,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[i]=a,co=(c,i)=>{for(var a in i||(i={}))kS.call(i,a)&&Pv(c,a,i[a]);if(Rv)for(var a of Rv(i))LS.call(i,a)&&Pv(c,a,i[a]);return c},G0=(c,i)=>qS(c,US(i));class nc{constructor(i){this.events=new bu,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=i,this.logger=typeof(i==null?void 0:i.logger)<"u"&&typeof(i==null?void 0:i.logger)!="string"?i.logger:Pe.pino(Pe.getDefaultLoggerOptions({level:(i==null?void 0:i.logger)||Ev})),this.disableProviderPing=(i==null?void 0:i.disableProviderPing)||!1}static async init(i){const a=new nc(i);return await a.initialize(),a}async request(i,a){const[h,g]=this.validateChain(a);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(h).request({request:co({},i),chainId:`${h}:${g}`,topic:this.session.topic})}sendAsync(i,a,h){this.request(i,h).then(g=>a(null,g)).catch(g=>a(g,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var i;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(i=this.session)==null?void 0:i.topic,reason:wv("USER_DISCONNECTED")}),await this.cleanup()}async connect(i){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(i),await this.cleanupPendingPairings(),!i.skipPairing)return await this.pair(i.pairingTopic)}on(i,a){this.events.on(i,a)}once(i,a){this.events.once(i,a)}removeListener(i,a){this.events.removeListener(i,a)}off(i,a){this.events.off(i,a)}get isWalletConnect(){return!0}async pair(i){this.shouldAbortPairingAttempt=!1;let a=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(a>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:h,approval:g}=await this.client.connect({pairingTopic:i,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});h&&(this.uri=h,this.events.emit("display_uri",h)),await g().then(s=>{this.session=s}).catch(s=>{if(s.message!==wm)throw s;a++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(i,a){try{const[h,g]=this.validateChain(i);this.getProvider(h).setDefaultChain(g,a)}catch(h){if(!/Please call connect/.test(h.message))throw h}}async cleanupPendingPairings(i={}){this.logger.info("Cleaning up inactive pairings...");const a=this.client.pairing.getAll();if(hS(a)){for(const h of a)i.deletePairings?this.client.core.expirer.set(h.topic,0):await this.client.core.relayer.subscriber.unsubscribe(h.topic);this.logger.info(`Inactive pairings cleared: ${a.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const i=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[i]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await sS.init({logger:this.providerOpts.logger||Ev,relayUrl:this.providerOpts.relayUrl||pS,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const i=[...new Set(Object.keys(this.session.namespaces).map(a=>_o(a)))];V0("client",this.client),V0("events",this.events),V0("disableProviderPing",this.disableProviderPing),i.forEach(a=>{if(!this.session)return;const h=AS(a,this.session),g=SS(h),s=DS(this.namespaces,this.optionalNamespaces),x=G0(co({},s[a]),{accounts:h,chains:g});switch(a){case"eip155":this.rpcProviders[a]=new RS({namespace:x});break;case"solana":this.rpcProviders[a]=new PS({namespace:x});break;case"cosmos":this.rpcProviders[a]=new OS({namespace:x});break;case"polkadot":this.rpcProviders[a]=new IS({namespace:x});break;case"cip34":this.rpcProviders[a]=new CS({namespace:x});break;case"elrond":this.rpcProviders[a]=new TS({namespace:x});break;case"multiversx":this.rpcProviders[a]=new BS({namespace:x});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",i=>{this.events.emit("session_ping",i)}),this.client.on("session_event",i=>{const{params:a}=i,{event:h}=a;h.name==="accountsChanged"?this.events.emit("accountsChanged",h.data):h.name==="chainChanged"?this.onChainChanged(a.chainId):this.events.emit(h.name,h.data),this.events.emit("session_event",i)}),this.client.on("session_update",({topic:i,params:a})=>{var h;const{namespaces:g}=a,s=(h=this.client)==null?void 0:h.session.get(i);this.session=G0(co({},s),{namespaces:g}),this.onSessionUpdate(),this.events.emit("session_update",{topic:i,params:a})}),this.client.on("session_delete",async i=>{await this.cleanup(),this.events.emit("session_delete",i),this.events.emit("disconnect",G0(co({},wv("USER_DISCONNECTED")),{data:i.topic}))}),this.on(un.DEFAULT_CHAIN_CHANGED,i=>{this.onChainChanged(i,!0)})}getProvider(i){if(!this.rpcProviders[i])throw new Error(`Provider not found: ${i}`);return this.rpcProviders[i]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(i=>{var a;this.getProvider(i).updateNamespace((a=this.session)==null?void 0:a.namespaces[i])})}setNamespaces(i){const{namespaces:a,optionalNamespaces:h,sessionProperties:g}=i;if(!a||!Object.keys(a).length)throw new Error("Namespaces must be not empty");this.namespaces=a,this.optionalNamespaces=h,this.sessionProperties=g,this.persist("namespaces",a),this.persist("optionalNamespaces",h)}validateChain(i){const[a,h]=(i==null?void 0:i.split(":"))||["",""];if(a&&!Object.keys(this.namespaces).map(x=>_o(x)).includes(a))throw new Error(`Namespace '${a}' is not configured. Please call connect() first with namespace config.`);if(a&&h)return[a,h];const g=_o(Object.keys(this.namespaces)[0]),s=this.rpcProviders[g].getDefaultChain();return[g,s]}async requestAccounts(){const[i]=this.validateChain();return await this.getProvider(i).requestAccounts()}onChainChanged(i,a=!1){var h;const[g,s]=this.validateChain(i);a||this.getProvider(g).setDefaultChain(s),((h=this.namespaces[g])!=null?h:this.namespaces[`${g}:${s}`]).defaultChain=s,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",s)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(i,a){this.client.core.storage.setItem(`${Sv}/${i}`,a)}async getFromStore(i){return await this.client.core.storage.getItem(`${Sv}/${i}`)}}const FS=nc,$S="wc",zS="ethereum_provider",jS=`${$S}@2:${zS}:`,HS="https://rpc.walletconnect.com/v1/",lu=["eth_sendTransaction","personal_sign"],dA=["eth_accounts","eth_requestAccounts","eth_call","eth_getBalance","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],du=["chainChanged","accountsChanged"],pA=["message","disconnect","connect"];var KS=Object.defineProperty,VS=Object.defineProperties,GS=Object.getOwnPropertyDescriptors,Ov=Object.getOwnPropertySymbols,WS=Object.prototype.hasOwnProperty,ZS=Object.prototype.propertyIsEnumerable,Cv=(c,i,a)=>i in c?KS(c,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[i]=a,W0=(c,i)=>{for(var a in i||(i={}))WS.call(i,a)&&Cv(c,a,i[a]);if(Ov)for(var a of Ov(i))ZS.call(i,a)&&Cv(c,a,i[a]);return c},Tv=(c,i)=>VS(c,GS(i));function pu(c){return Number(c[0].split(":")[1])}function Z0(c){return`0x${c.toString(16)}`}function JS(c){const{chains:i,optionalChains:a,methods:h,optionalMethods:g,events:s,optionalEvents:x,rpcMap:w}=c;if(!ru(i))throw new Error("Invalid chains");const _=i,M=h||lu,b=s||du,S={[pu(_)]:w[pu(_)]},E={chains:_,methods:M,events:b,rpcMap:S},D=s==null?void 0:s.filter(L=>!du.includes(L)),I=h==null?void 0:h.filter(L=>!lu.includes(L));if(!a&&!x&&!g&&!(D!=null&&D.length)&&!(I!=null&&I.length))return{required:E};const O=(D==null?void 0:D.length)&&(I==null?void 0:I.length)||!a,N={chains:[...new Set(O?_.concat(a||[]):a)],methods:[...new Set(M.concat(g||[]))],events:[...new Set(b.concat(x||[]))],rpcMap:w};return{required:E,optional:N}}class sc{constructor(){this.events=new ri.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=jS,this.on=(i,a)=>(this.events.on(i,a),this),this.once=(i,a)=>(this.events.once(i,a),this),this.removeListener=(i,a)=>(this.events.removeListener(i,a),this),this.off=(i,a)=>(this.events.off(i,a),this),this.parseAccount=i=>this.isCompatibleChainId(i)?this.parseAccountId(i).address:i,this.signer={},this.rpc={}}static async init(i){const a=new sc;return await a.initialize(i),a}async request(i){return await this.signer.request(i,this.formatChainId(this.chainId))}sendAsync(i,a){this.signer.sendAsync(i,a,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(i){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(i);const{required:a,optional:h}=JS(this.rpc);try{const g=await new Promise(async(x,w)=>{var _;this.rpc.showQrModal&&((_=this.modal)==null||_.subscribeModal(M=>{!M.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),w(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Tv(W0({namespaces:{[this.namespace]:a}},h&&{optionalNamespaces:{[this.namespace]:h}}),{pairingTopic:i==null?void 0:i.pairingTopic})).then(M=>{x(M)}).catch(M=>{w(new Error(M.message))})});if(!g)return;this.setChainIds(this.rpc.chains);const s=J8(g.namespaces,[this.namespace]);this.setAccounts(s),this.events.emit("connect",{chainId:Z0(this.chainId)})}catch(g){throw this.signer.logger.error(g),g}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",i=>{const{params:a}=i,{event:h}=a;h.name==="accountsChanged"?(this.accounts=this.parseAccounts(h.data),this.events.emit("accountsChanged",this.accounts)):h.name==="chainChanged"?this.setChainId(this.formatChainId(h.data)):this.events.emit(h.name,h.data),this.events.emit("session_event",i)}),this.signer.on("chainChanged",i=>{const a=parseInt(i);this.chainId=a,this.events.emit("chainChanged",Z0(this.chainId)),this.persist()}),this.signer.on("session_update",i=>{this.events.emit("session_update",i)}),this.signer.on("session_delete",i=>{this.reset(),this.events.emit("session_delete",i),this.events.emit("disconnect",Tv(W0({},X8("USER_DISCONNECTED")),{data:i.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",i=>{var a,h;this.rpc.showQrModal&&((a=this.modal)==null||a.closeModal(),(h=this.modal)==null||h.openModal({uri:i})),this.events.emit("display_uri",i)})}setHttpProvider(i){this.request({method:"wallet_switchEthereumChain",params:[{chainId:i.toString(16)}]})}isCompatibleChainId(i){return typeof i=="string"?i.startsWith(`${this.namespace}:`):!1}formatChainId(i){return`${this.namespace}:${i}`}parseChainId(i){return Number(i.split(":")[1])}setChainIds(i){const a=i.filter(h=>this.isCompatibleChainId(h)).map(h=>this.parseChainId(h));a.length&&(this.chainId=a[0],this.events.emit("chainChanged",Z0(this.chainId)),this.persist())}setChainId(i){if(this.isCompatibleChainId(i)){const a=this.parseChainId(i);this.chainId=a,this.setHttpProvider(a)}}parseAccountId(i){const[a,h,g]=i.split(":");return{chainId:`${a}:${h}`,address:g}}setAccounts(i){this.accounts=i.filter(a=>this.parseChainId(this.parseAccountId(a).chainId)===this.chainId).map(a=>this.parseAccountId(a).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(i){var a,h;return{chains:((a=i.chains)==null?void 0:a.map(g=>this.formatChainId(g)))||[`${this.namespace}:1`],optionalChains:i.optionalChains?i.optionalChains.map(g=>this.formatChainId(g)):void 0,methods:(i==null?void 0:i.methods)||lu,events:(i==null?void 0:i.events)||du,optionalMethods:(i==null?void 0:i.optionalMethods)||[],optionalEvents:(i==null?void 0:i.optionalEvents)||[],rpcMap:(i==null?void 0:i.rpcMap)||this.buildRpcMap(i.chains.concat(i.optionalChains||[]),i.projectId),showQrModal:!!(i!=null&&i.showQrModal),qrModalOptions:(h=i==null?void 0:i.qrModalOptions)!=null?h:void 0,projectId:i.projectId,metadata:i.metadata}}buildRpcMap(i,a){const h={};return i.forEach(g=>{h[g]=this.getRpcUrl(g,a)}),h}async initialize(i){if(this.rpc=this.getRpcConfig(i),this.chainId=pu(this.rpc.chains),this.signer=await FS.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:i.disableProviderPing}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let a;try{const{WalletConnectModal:h}=await r5(()=>import("./index.es-476097e6.js").then(g=>g.i),["assets/index.es-476097e6.js","assets/index-cdd2c3b9.js","assets/index-8cd56294.css","assets/index-5c01dcb3.js"]);a=h}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(a)try{this.modal=new a(W0({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(h){throw this.signer.logger.error(h),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(i){if(!i)return;const{chains:a,optionalChains:h,rpcMap:g}=i;a&&ru(a)&&(this.rpc.chains=a.map(s=>this.formatChainId(s)),a.forEach(s=>{this.rpc.rpcMap[s]=(g==null?void 0:g[s])||this.getRpcUrl(s)})),h&&ru(h)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=h==null?void 0:h.map(s=>this.formatChainId(s)),h.forEach(s=>{this.rpc.rpcMap[s]=(g==null?void 0:g[s])||this.getRpcUrl(s)}))}getRpcUrl(i,a){var h;return((h=this.rpc.rpcMap)==null?void 0:h[i])||`${HS}?chainId=eip155:${i}&projectId=${a||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const i=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`);this.setChainIds(i?[this.formatChainId(i)]:this.session.namespaces[this.namespace].accounts),this.setAccounts(this.session.namespaces[this.namespace].accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(i){return typeof i=="string"||i instanceof String?[this.parseAccount(i)]:i.map(a=>this.parseAccount(a))}}const vA=sc;export{vA as EthereumProvider,pA as OPTIONAL_EVENTS,dA as OPTIONAL_METHODS,du as REQUIRED_EVENTS,lu as REQUIRED_METHODS,sc as default};
