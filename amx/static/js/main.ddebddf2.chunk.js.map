{"version":3,"sources":["img/ic_polygon_16.svg","img/ic_arbitrum_16.svg","img/ic_arbitrum_24.svg","img/ic_arbitrum_96.svg","img/ic_language24.svg","img/ic_polygon_24.svg","img/ic_polygon_96.svg","img/logo_GMX.svg","img/ic_checked.svg","img/ic_glp_40.svg","img/ic_glp_24.svg","img/ic_settings_16.svg","img/logo_GMX_small.svg","img/DROP_DOWN.svg","img/buy_gmx.svg","img/coinbaseWallet.png","img/gmx-logo-with-name.svg","img/ic_banxa.svg","img/ic_bungee.png","img/ic_buy_glp.svg","img/ic_coingecko_16.svg","img/ic_convert_down.svg","img/ic_copy_16.svg","img/ic_cost.svg","img/ic_discord.svg","img/ic_github.svg","img/ic_glp_custom.svg","img/ic_gmx_40.svg","img/ic_gmx_custom.svg","img/ic_gmx_footer.svg","img/ic_liquidity.svg","img/ic_medium.svg","img/ic_metamask_16.svg","img/ic_new_link_16.svg","img/ic_o3.png","img/ic_olympus_arbitrum.svg","img/ic_sign_out_16.svg","img/ic_simpleswaps.svg","img/ic_stats.svg","img/ic_telegram.svg","img/ic_totaluser.svg","img/ic_traderjoe.svg","img/ic_trading.svg","img/ic_twitter.svg","img/ic_uni_arbitrum.svg","img/ic_wallet_24.svg","img/long.svg","img/metamask.png","img/position-share-bg.png","img/short.svg","img/swap.svg","img/walletconnect-circle-blue.svg","img sync /^/.*$","img/Anyswap.png","img/Anyswap.svg","img/Artwork.svg","img/Artwork_gmx.svg","img/Banxa.png","img/Frame.svg","img/Hop.png","img/Hop.svg","img/Hop_dark.png","img/Hop_dark.svg","img/Synapse.png","img/Synapse.svg","img/amx.png","img/binance.png","img/bscscan.png","img/btn_big_arbitrum.png","img/btn_big_avalanche.png","img/btn_big_bsc.png","img/btn_big_purchasegmx.png","img/btn_big_purchasegmx.svg","img/buy_gmx_bond.svg","img/buy_transfer_eth.svg","img/coingecko.png","img/cross.svg","img/dlp.png","img/flag_en.svg","img/flag_es.svg","img/flag_fr.svg","img/flag_ja.svg","img/flag_ko.svg","img/flag_ru.svg","img/flag_zh.svg","img/glp_icon.svg","img/gmx-logo-final-white-small.png","img/gmx-logo-final-white.png","img/gmx-logo-final.png","img/gmx-logo-glow.png","img/gmx_logo.svg","img/graphite-01.png","img/ic-communityproject.svg","img/ic_aave_24.svg","img/ic_aave_30.svg","img/ic_aave_40.svg","img/ic_arbitrum_hover_16.svg","img/ic_arrowleft16.svg","img/ic_arrowright16.svg","img/ic_avalanche_16.svg","img/ic_avalanche_24.svg","img/ic_avalanche_96.svg","img/ic_avax_24.svg","img/ic_avax_30.svg","img/ic_avax_40.svg","img/ic_binance.svg","img/ic_binance_logo.svg","img/ic_bsc.svg","img/ic_bsc_96.svg","img/ic_btc.b_24.svg","img/ic_btc.b_40.svg","img/ic_btc_24.svg","img/ic_btc_40.svg","img/ic_busd_24.svg","img/ic_cash.png","img/ic_cash.svg","img/ic_coingecko_hover_16.svg","img/ic_dai_24.svg","img/ic_dai_40.svg","img/ic_eth_24.svg","img/ic_eth_40.svg","img/ic_frax_24.svg","img/ic_frax_40.svg","img/ic_glp_40_.svg","img/ic_glp_custom_.svg","img/ic_gmx.svg","img/ic_gmx_24.svg","img/ic_gmx_30.svg","img/ic_gmx_40_.svg","img/ic_gmx_64.svg","img/ic_gmx_arbitrum.svg","img/ic_gmx_avax.svg","img/ic_gmx_big.svg","img/ic_gmx_custom_.svg","img/ic_gmx_footer_.svg","img/ic_gmx_footer_org.svg","img/ic_hop.svg","img/ic_info.svg","img/ic_link.e_40.svg","img/ic_link_24.svg","img/ic_link_40.svg","img/ic_matic_24.svg","img/ic_matic_40.svg","img/ic_menu_dots.svg","img/ic_metamask_hover_16.svg","img/ic_mim_24.svg","img/ic_mim_40.svg","img/ic_multiswap.svg","img/ic_olympus.svg","img/ic_selector_dropdowns.svg","img/ic_settings_24.svg","img/ic_sign in_16.svg","img/ic_stats_big.svg","img/ic_synapse.svg","img/ic_tether_24.svg","img/ic_tokens.svg","img/ic_traderjoe.png","img/ic_transfer_avax.svg","img/ic_uni_24.svg","img/ic_uni_40.svg","img/ic_usdc.e_24.svg","img/ic_usdc.e_40.svg","img/ic_usdc_24.svg","img/ic_usdc_40.svg","img/ic_usdt_24.svg","img/ic_usdt_40.svg","img/ic_wavax_24.svg","img/ic_wavax_40.svg","img/ic_wbtc_24.svg","img/ic_wbtc_40.svg","img/ic_weth_24.svg","img/ic_weth_40.svg","img/lg_arbitrum.svg","img/logo_GMX_.svg","img/logo_GMX_org.svg","img/logo_GMX_small_.svg","img/metamask-text.svg","img/page-not-found.svg","img/trading.jpg","img/wallet-connect-text.svg","img/wave-01.png","img/wave-02.png","../ /^/.*/messages/.po$/ groupOptions: {} namespace object","config/chains.ts","config/contracts.ts","config/backend.ts","config/tokens.ts","lib/numbers.ts","domain/tokens/utils.ts","lib/helperToast.ts","components/ToastifyDebug/ToastifyDebug.tsx","lib/contracts/transactionErrors.ts","lib/contracts/utils.ts","components/ExternalLink/ExternalLink.tsx","lib/contracts/callContract.tsx","lib/rpc/index.ts","lib/contracts/contractFetcher.ts","domain/tokens/useInfoTokens.ts","domain/tokens/approveTokens.tsx","config/localStorage.ts","lib/chains/index.ts","lib/dates.ts","lib/legacy.js","components/Footer/Footer.tsx","config/ui.ts","lib/subgraph/utils.ts","config/subgraph.ts","lib/subgraph/clients.ts","lib/sleep.js","domain/prices.js","domain/legacy.js","components/APRLabel/APRLabel.js","components/Header/HeaderLink.tsx","lib/wallets/index.js","components/TokenCard/TokenCard.js","pages/Home/Home.js","components/Tooltip/Tooltip.js","domain/useFeesSummary.js","pages/Dashboard/AssetDropdown.js","components/Common/SEO.js","components/StatsTooltip/StatsTooltip.tsx","components/StatsTooltip/StatsTooltipRow.tsx","pages/Dashboard/DashboardV2.js","pages/Dashboard/Dashboard.js","pages/Ecosystem/Ecosystem.js","lib/useLockBodyScroll.ts","components/Modal/Modal.js","pages/Stake/StakeV1.js","components/Checkbox/Checkbox.js","lib/localStorage/index.ts","pages/Stake/StakeV2.js","pages/Stake/Stake.js","components/Tab/Tab.js","components/Common/Portal.js","components/Tooltip/TooltipWithPortal.js","components/Exchange/TokenSelector.js","components/Exchange/ExchangeInfoRow.js","components/Exchange/ConfirmationBox.js","components/Exchange/OrdersToa.js","components/Referrals/referralsHelper.js","lib/url.ts","domain/referrals.js","domain/common.js","components/Exchange/NoLiquidityErrorModal.tsx","lib/usePrevious.js","components/Exchange/SwapBox.js","components/Exchange/ChartTokenSelector.js","components/Exchange/ExchangeTVChart.js","components/Exchange/PositionSeller.js","components/Exchange/PositionEditor.js","components/Common/SpinningLoader.js","lib/downloadImage.ts","components/Exchange/PositionShare.js","lib/useLoadImage.js","components/Exchange/PositionDropdown.js","components/Exchange/PositionsList.js","components/Exchange/OrderEditor.js","components/Exchange/OrdersList.js","components/Exchange/TradeHistory.js","components/Exchange/ExchangeWalletTokens.js","components/Exchange/ExchangeBanner.js","pages/Exchange/Exchange.js","pages/Actions/Actions.js","pages/OrdersOverview/OrdersOverview.js","pages/PositionsOverview/PositionsOverview.js","components/Common/Loader.js","lib/useDebounce.js","components/Referrals/JoinReferralCode.js","components/Common/Card.tsx","components/Referrals/EmptyMessage.js","components/Referrals/InfoCard.js","components/Referrals/AddAffiliateCode.js","components/Referrals/AffiliatesStats.js","components/Referrals/TradersStats.js","pages/Referrals/Referrals.js","components/BuyInputSection/BuyInputSection.js","components/Glp/SwapErrorModal.tsx","components/Glp/GlpSwap.js","pages/BuyGlp/BuyGlp.js","components/Common/Button.tsx","pages/BuyGMX/constants.ts","pages/BuyGMX/BuyGMX.tsx","pages/Buy/Buy.js","pages/NftWallet/NftWallet.js","pages/ClaimEsGmx/ClaimEsGmx.js","pages/BeginAccountTransfer/BeginAccountTransfer.js","pages/CompleteAccountTransfer/CompleteAccountTransfer.js","config/events.ts","components/EventToast/AnnouncementIcon.js","components/EventToast/EventToast.js","components/EventToast/useEventToast.js","components/EventToast/EventToastContainer.js","pages/PageNotFound/PageNotFound.js","pages/ReferralTerms/ReferralTerms.js","pages/TermsAndConditions/TermsAndConditions.js","components/ModalViews/RedirectModal.js","pages/Jobs/Jobs.js","lib/i18n.js","components/AddressDropdown/AddressDropdown.js","components/Common/ConnectWalletButton.tsx","components/Modal/ModalWithPortal.js","components/NetworkDropdown/NetworkDropdown.js","components/NetworkDropdown/LanguagePopupHome.js","components/Header/AppHeaderUser.tsx","components/Header/AppHeaderLinks.tsx","components/Header/Header.tsx","App/App.js","lib/useRouteQuery.js","lib/useScrollToTop.js","reportWebVitals.js","index.tsx"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","webpackAsyncContext","Promise","then","ids","t","parseEther","ethers","utils","MAINNET","TESTNET","ARBITRUM_TESTNET","ARBITRUM","POLYGON","DEFAULT_CHAIN_ID","CHAIN_ID","SUPPORTED_CHAIN_IDS","isDevelopment","push","IS_NETWORK_DISABLED","CHAIN_NAMES_MAP","GAS_PRICE_ADJUSTMENT_MAP","MAX_GAS_PRICE_MAP","HIGH_EXECUTION_FEES_MAP","constants","nativeTokenSymbol","defaultCollateralSymbol","defaultFlagOrdersEnabled","positionReaderPropsLength","v2","SWAP_ORDER_EXECUTION_GAS_FEE","INCREASE_ORDER_EXECUTION_GAS_FEE","DECREASE_ORDER_EXECUTION_GAS_FEE","wrappedTokenSymbol","ALCHEMY_WHITELISTED_DOMAINS","ARBITRUM_RPC_PROVIDERS","POLYGON_RPC_PROVIDERS","BSC_RPC_PROVIDERS","RPC_PROVIDERS","FALLBACK_PROVIDERS","includes","window","location","host","getAlchemyHttpUrl","NETWORK_METADATA","chainId","toString","chainName","nativeCurrency","name","symbol","decimals","rpcUrls","blockExplorerUrls","getExplorerUrl","getConstant","key","getChainName","XGMT_EXCLUDED_ACCOUNTS","CONTRACTS","Treasury","BUSD","GMT","Vault","Router","Reader","AmmFactory","AmmFactoryV2","OrderBook","OrderBookReader","GmxMigrator","USDG","NATIVE_TOKEN","XGMT","GMT_USDG_PAIR","XGMT_USDG_PAIR","GMT_USDG_FARM","XGMT_USDG_FARM","USDG_YIELD_TRACKER","XGMT_YIELD_TRACKER","GMT_USDG_FARM_TRACKER_XGMT","GMT_USDG_FARM_TRACKER_NATIVE","XGMT_USDG_FARM_TRACKER_XGMT","XGMT_USDG_FARM_TRACKER_NATIVE","AUTO","AUTO_USDG_PAIR","AUTO_USDG_FARM","AUTO_USDG_FARM_TRACKER_XGMT","AUTO_USDG_FARM_TRACKER_NATIVE","GMT_GMX_IOU","XGMT_GMX_IOU","GMT_USDG_GMX_IOU","XGMT_USDG_GMX_IOU","VaultReader","GlpManager","RewardRouter","RewardReader","GLP","GMX","ES_GMX","BN_GMX","ES_GMX_IOU","StakedGmxTracker","BonusGmxTracker","FeeGmxTracker","StakedGlpTracker","FeeGlpTracker","StakedGmxDistributor","StakedGlpDistributor","GmxVester","GlpVester","PositionRouter","PositionManager","ReferralStorage","ReferralReader","OrderExecutor","UniswapGmxEthPool","TraderJoeGmxMaticPool","getContract","GMX_STATS_API_URL","BACKEND_URLS","default","getServerBaseUrl","document","hostname","fromLocalStorage","localStorage","getItem","getServerUrl","path","TOKENS","address","coingeckoUrl","imageUrl","AddressZero","isNative","isWrapped","baseSymbol","isUsdg","isStable","isShortable","isTempHidden","ADDITIONAL_TOKENS","PLATFORM_TOKENS","ICONLINKS","coingecko","arbitrum","ETH","BTC","LINK","UNI","USDC","USDT","DAI","MIM","FRAX","polygon","MATIC","WETH","WBTC","GLP_POOL_COLORS","TOKENS_MAP","TOKENS_BY_SYMBOL_MAP","WRAPPED_TOKENS_MAP","NATIVE_TOKENS_MAP","CHAIN_IDS","j","length","tokens","concat","i","token","getWrappedToken","getNativeToken","getTokens","isValidToken","getToken","getTokenBySymbol","getWhitelistedTokens","filter","bigNumberify","n","BigNumber","from","console","error","expandDecimals","mul","pow","limitDecimals","amount","maxDecimals","amountStr","undefined","split","dotIndex","indexOf","substr","formatAmount","tokenDecimals","displayDecimals","useCommas","defaultValue","formatUnits","minDecimals","padEnd","padDecimals","numberWithCommas","formatKeyAmount","formatAmountFree","parseFloat","parseInt","trimZeroDecimals","parseValue","value","pValue","isNaN","parseUnits","x","parts","replace","join","getUsd","tokenAddress","max","infoTokens","orderOption","triggerPriceUsd","USDG_ADDRESS","PRECISION","div","info","getTokenInfo","price","MARKET","maxPrice","minPrice","getTriggerPrice","getTokenAmountFromUsd","usdAmount","opts","overridePrice","isBigNumber","lte","replaceNative","nativeTokenAddress","getLowestFeeTokenForBuyGlp","toAmount","glpPrice","usdgSupply","totalTokenWeights","fromTokenAddress","swapUsdMin","getVisibleTokens","usdgAmount","tokensData","fromToken","fees","getFeeBasisPoints","MINT_BURN_FEE_BASIS_POINTS","TAX_BASIS_POINTS","amountLeftToDeposit","maxUsdgAmount","gt","sub","USD_DECIMALS","USDG_DECIMALS","tokensWithLiquidity","asset","hasOwnProperty","lt","sort","a","b","Number","getMostAbundantStableToken","availableAmount","whitelistedTokens","stableToken","find","adjustedAvailableAmount","adjustForDecimals","shouldRaiseGasError","balance","gte","DUST_BNB","replaceNativeTokenAddress","updatedPath","helperToast","content","toast","dismiss","success","ToastifyDebug","props","useState","open","setOpen","className","onClick","old","children","NOT_ENOUGH_FUNDS","USER_DENIED","SLIPPAGE","RPC_ERROR","TX_ERROR_PATTERNS","msg","extractError","ex","message","data","entries","type","patterns","pattern","matchCode","matchMessage","setGasPrice","txnOpts","provider","maxGasPrice","premium","getGasPrice","gasPrice","getFeeData","feeData","maxPriorityFeePerGas","maxFeePerGas","add","getGasLimit","contract","method","params","estimateGas","gasLimit","ExternalLink","href","target","rel","callContract","Array","isArray","res","txUrl","hash","sentMsg","setPendingTxns","hideSuccessMsg","successMsg","pendingTxn","pendingTxns","autoCloseToast","errorData","failMsg","originalError","autoClose","getProvider","library","getSigner","_","sample","providers","StaticJsonRpcProvider","getFallbackProvider","contractFetcher","contractInfo","additionalArgs","args","arg0","arg1","isAddress","contractCall","getContractCall","shouldCallFallback","handleFallback","reject","fallbackProvider","result","catch","contractName","setTimeout","Contract","abi","useInfoTokens","active","tokenBalances","fundingRateInfo","vaultPropsLength","vaultReaderAddress","vaultAddress","positionRouterAddress","whitelistedTokenAddresses","log","vaultTokenInfo","useSWR","fetcher","indexPricesUrl","fetch","json","refreshInterval","refreshWhenHidden","getInfoTokens","indexPrices","JSON","parse","stringify","poolAmount","reservedAmount","redemptionAmount","weight","bufferAmount","globalShortSize","maxGlobalShortSize","maxGlobalLongSize","guaranteedUsd","maxPrimaryPrice","minPrimaryPrice","contractMinPrice","contractMaxPrice","maxAvailableShort","hasMaxAvailableShort","eq","DEFAULT_MAX_USDG_AMOUNT","availableUsd","maxAvailableLong","hasMaxAvailableLong","remainingLongSize","maxLongCapacity","managedUsd","managedAmount","setTokenUsingIndexPrices","fundingRate","cumulativeFundingRate","indexPrice","indexPriceBn","spreadBps","BASIS_POINTS_DIVISOR","MAX_PRICE_DEVIATION_BASIS_POINTS","halfSpreadBps","toNumber","approveTokens","setIsApproving","spender","onApproveSubmitted","includeMessage","Token","approve","MaxUint256","finally","SELECTED_NETWORK_LOCAL_STORAGE_KEY","WALLET_CONNECT_LOCALSTORAGE_KEY","SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY","CURRENT_PROVIDER_LOCALSTORAGE_KEY","LANGUAGE_LOCALSTORAGE_KEY","SLIPPAGE_BPS_KEY","REFERRAL_CODE_KEY","useChainId","useWeb3React","chainIdFromLocalStorage","removeItem","formatDateTime","time","formatDateFn","formatDate","getTimeRemaining","now","String","Date","diff","hours","minutes","PLACEHOLDER_ACCOUNT","Wallet","createRandom","MAX_LEVERAGE","SECONDS_PER_YEAR","DUST_USD","GLP_DECIMALS","MARGIN_FEE_BASIS_POINTS","LIQUIDATION_FEE","THRESHOLD_REDEMPTION_VALUE","FUNDING_RATE_PRECISION","SWAP","INCREASE","DECREASE","LONG","SHORT","LIMIT","STOP","LEVERAGE_ORDER_OPTIONS","SWAP_ORDER_OPTIONS","SWAP_OPTIONS","REFERRAL_CODE_QUERY_PARAM","deserialize","_type","isHomeSite","process","REACT_APP_IS_HOME_SITE","getLiquidationPriceFromDelta","liquidationAmount","size","collateral","averagePrice","isLong","priceDelta","getMarginFee","sizeDelta","afterFeeUsd","isTriggerRatioInverted","fromTokenInfo","toTokenInfo","getExchangeRate","tokenAInfo","tokenBInfo","inverted","shouldInvertTriggerRatio","tokenA","tokenB","getExchangeRateDisplay","rate","rateValue","omitSymbols","adjustForDecimalsFactory","number","divDecimals","mulDecimals","usdgDelta","feeBasisPoints","taxBasisPoints","increment","initialAmount","nextAmount","targetAmount","getTargetUsdgAmount","initialDiff","nextDiff","rebateBps","averageDiff","taxBps","getBuyGlpFromAmount","fromAmount","getSellGlpToAmount","getNextFromAmount","toTokenAddress","toTokenPriceUsd","ratio","forSwap","fromTokenMinPrice","toTokenMaxPrice","toToken","fromAmountBasedOnRatio","adjustDecimals","isZero","swapFeeBasisPoints","feeBasisPoints0","feeBasisPoints1","getNextToAmount","toAmountBasedOnRatio","getSwapFeeBasisPoints","expectedAmount","calculatePositionDelta","lastIncreasedTime","delta","pendingDelta","minProfitExpired","hasProfit","deltaPercentage","pendingDeltaPercentage","getDeltaStr","deltaStr","deltaPercentageStr","getLeverage","increaseSize","collateralDelta","increaseCollateral","entryFundingRate","includeDelta","nextSize","remainingCollateral","fundingFee","getLiquidationPrice","adjustedDelta","positionFee","liquidationPriceForFees","liquidationPriceForMaxLeverage","getPositionKey","account","collateralTokenAddress","indexTokenAddress","getPositionContractKey","collateralToken","indexToken","solidityKeccak256","shortenAddress","left","Math","floor","substring","_parseOrdersData","ordersData","indexes","extractor","uintPropsLength","addressPropsLength","uintProps","addressProps","count","orders","sliced","slice","order","index","parseDecreaseOrdersData","decreaseOrdersData","triggerPrice","triggerAboveThreshold","parseIncreaseOrdersData","increaseOrdersData","purchaseToken","purchaseTokenAmount","parseSwapOrdersData","swapOrdersData","shouldUnwrap","amountIn","minOut","triggerRatio","every","getOrderKey","useAccountOrders","flagOrdersEnabled","overrideAccount","connectedAccount","shouldRequest","orderBookAddress","orderBookReaderAddress","dedupingInterval","orderBookContract","orderBookReaderContract","fetchIndexesFromServer","ordersIndexesUrl","ret","toLowerCase","val","swap","increase","decrease","fetchLastIndex","_hex","fetchLastIndexes","all","getRange","to","_indexes","getIndexes","knownIndexes","lastIndex","getOrders","parseFunc","serverIndexes","lastIndexes","swapOrders","increaseOrders","decreaseOrders","mutate","CHART_PERIODS","getTotalVolumeSum","volumes","volume","getBalanceAndSupplyData","balances","balanceData","supplyData","getDepositBalanceData","depositBalances","getVestingData","vestingInfo","pairAmount","vestedAmount","escrowedBalance","claimedAmounts","claimable","maxVestableAmount","averageStakedAmount","getStakingData","stakingInfo","tokensPerInterval","averageStakedAmounts","cumulativeRewards","totalSupply","getProcessedData","depositBalanceData","stakingData","vestingData","aum","nativeTokenPrice","stakedGmxSupply","gmxPrice","gmxSupply","gmxBalance","gmx","gmxBalanceUsd","gmxSupplyUsd","stakedGmxSupplyUsd","gmxInStakedGmx","gmxInStakedGmxUsd","esGmxBalance","esGmx","esGmxBalanceUsd","stakedGmxTrackerSupply","stakedGmxTracker","stakedGmxTrackerSupplyUsd","stakedEsGmxSupply","stakedEsGmxSupplyUsd","esGmxInStakedGmx","esGmxInStakedGmxUsd","bnGmxInFeeGmx","bonusGmxInFeeGmx","feeGmxSupply","feeGmxTracker","feeGmxSupplyUsd","stakedGmxTrackerRewards","stakedGmxTrackerRewardsUsd","bonusGmxTrackerRewards","bonusGmxTracker","feeGmxTrackerRewards","feeGmxTrackerRewardsUsd","boostBasisPoints","stakedGmxTrackerAnnualRewardsUsd","gmxAprForEsGmx","feeGmxTrackerAnnualRewardsUsd","gmxAprForNativeToken","gmxBoostAprForNativeToken","gmxAprTotal","gmxAprTotalWithBoost","gmxAprForNativeTokenWithBoost","totalGmxRewardsUsd","glpSupply","glp","glpSupplyUsd","glpBalance","glpInStakedGlp","glpBalanceUsd","stakedGlpTrackerRewards","stakedGlpTracker","stakedGlpTrackerRewardsUsd","feeGlpTrackerRewards","feeGlpTracker","feeGlpTrackerRewardsUsd","stakedGlpTrackerAnnualRewardsUsd","glpAprForEsGmx","feeGlpTrackerAnnualRewardsUsd","glpAprForNativeToken","glpAprTotal","totalGlpRewardsUsd","totalEsGmxRewards","totalEsGmxRewardsUsd","gmxVesterRewards","gmxVester","glpVesterRewards","glpVester","totalVesterRewards","totalVesterRewardsUsd","totalNativeTokenRewards","totalNativeTokenRewardsUsd","totalRewardsUsd","getPageTitle","isHashZero","HashZero","isAddressZero","isLocal","getHomeUrl","getAppBaseUrl","importImage","tokenImage","require","getTwitterIntentURL","text","url","hashtag","finalURL","encodeURIComponent","getPositionForOrder","positionsMap","position","getOrderError","positionForOrder","arrayURLFetcher","urlArr","shouldShowRedirectModal","timestamp","expiryTime","getTime","isValidTimestamp","footerLinks","home","link","external","app","socialLinks","icon","twitterIcon","mediumIcon","githubIcon","telegramIcon","discordIcon","Footer","showRedirectModal","redirectPopupTimestamp","isHome","cx","src","logoImg","alt","platform","activeClassName","IS_TOUCH","TRIGGER_PREFIX_ABOVE","TRIGGER_PREFIX_BELOW","createClient","uri","ApolloClient","cache","InMemoryCache","SUBGRAPH_URLS","stats","referrals","nissohVault","trades","chainLink","chainlinkClient","common","arbitrumGraphClient","arbitrumReferralsGraphClient","nissohGraphClient","polygonGraphClient","polygonReferralsGraphClient","polygonGraphClientForTrades","getGmxGraphClient","sleep","ms","FEED_ID_MAP","BTC_USD","ETH_USD","BNB_USD","LINK_USD","UNI_USD","SUSHI_USD","MATIC_USD","AAVE_USD","YFI_USD","SPELL_USD","timezoneOffset","getTimezoneOffset","getChartPricesFromStats","period","timeDiff","done","lastEx","ok","status","statusText","prices","OBSOLETE_THRESHOLD","updatedAt","toISOString","close","c","high","h","low","l","getChainlinkChartPricesFromGraph","tokenSymbol","marketName","feedId","requests","query","gql","chunks","uniqTs","Set","forEach","chunk","rounds","item","has","unixTimestamp","periodTime","candles","first","prevTsGroup","prevPrice","ts","tsGroup","min","getCandlesFromPrices","err","useChartPrices","currentAveragePrice","swrKey","warn","focusThrottleInterval","updatePrices","currentAveragePriceString","retPrices","useMemo","periodSeconds","priceData","getStablePriceData","_prices","currentCandleTime","last","averagePriceValue","newCandle","appendCurrentAveragePrice","newPrices","prevTime","fillGaps","NOW_TS","FIRST_DATE_TS","MOVING_AVERAGE_PERIOD","useAllOrdersStats","setRes","useEffect","graphClient","orderStat","usePositionStates","tradeData","superArray","totalLongPositionCollaterals","totalLongPositionSizes","totalShortPositionCollaterals","totalShortPositionSizes","totalActivePositions","createIncreasePositions","useTotalVolume","swaps","createDecreasePositions","useTradeVolumeHistory","parent","group","action","getAddress","tokenOut","amountOut","createdTimestamp","useAllTradesHistory","txhash","transaction","tokenIn","acceptablePrice","executionFee","cancelIncreasePositions","cancelDecreasePositions","useUserStat","userStat","useLiquidationsData","setData","_data","liquidatedPositions","markPrice","useAllPositions","aggregatedTradeOpens","dataItem","initialPosition","getPosition","positionData","getFundingFee","marginFee","fee","collateralDiffPercent","danger","Boolean","useAllOrders","charAt","toUpperCase","orderFromChain","path0","path1","path2","usePositionsForOrders","reduce","memo","invariant","condition","errorMsg","useTrades","forSingleAccount","afterId","urlItem","URL","searchParams","append","updateTrades","item0","item1","data0","data1","time0","time1","block0","blockNumber","block1","useMinExecutionFee","multiplier","minExecutionFee","finalExecutionFee","estimatedExecutionFee","finalExecutionFeeUSD","isFeeHigh","getHighExecutionFee","minExecutionFeeUSD","minExecutionFeeErrorMessage","useStakedGmxSupply","gmxAddressArb","stakedGmxTrackerAddressArb","arbData","arbMutate","gmxAddressMatic","stakedGmxTrackerAddressMatic","maticData","maticMutate","useHasOutdatedUi","hasOutdatedUi","useGmxPrice","libraries","poolAddress","UniPool","uniPoolSlot0","updateUniPoolSlot0","ethAddress","ethPrice","updateEthPrice","UniToken","gmxAddress","poolTokenPrice","Pool","sqrtPriceX96","tick","priceOf","toSignificant","useCallback","useGmxPriceFromArbitrum","gmxPriceFromArbitrum","mutateFromArbitrum","UniswapV2","updateReserves","gmxReserve","_reserve0","maticReserve","_reserve1","maticAddress","maticPrice","updateMaticPrice","useGmxPriceFromPolygon","gmxPriceFromPolygon","mutateFromPolygon","useTotalGmxSupply","total","useTotalGmxStaked","stakedGmxTrackerAddressArbitrum","totalStakedGmx","useRef","stakedGmxSupplyArbitrum","updateStakedGmxSupplyArbitrum","stakedGmxSupplyMatic","updateStakedGmxSupplyMatic","current","matic","useTotalGmxInLiquidity","poolAddressArbitrum","poolAddressMatic","totalGMX","gmxInLiquidityOnArbitrum","mutateGMXInLiquidityOnArbitrum","gmxInLiquidityOnMatic","mutateGMXInLiquidityOnMatic","approvePlugin","pluginAddress","routerAddress","createSwapOrder","shouldWrap","createIncreaseOrder","fromETH","createDecreaseOrder","cancelSwapOrder","cancelDecreaseOrder","cancelIncreaseOrder","handleCancelOrder","func","cancelMultipleOrders","ordersWithTypes","d","allIndexes","groupBy","v","updateDecreaseOrder","updateIncreaseOrder","updateSwapOrder","_executeOrder","feeReceiver","positionManagerAddress","executeSwapOrder","executeIncreaseOrder","executeDecreaseOrder","useFeesData","PROPS","feesData","feesChartData","chartData","sortBy","feeStats","prop","liquidation","marginAndLiquidation","margin","cumulative","cumulativeByTs","chain","values","movingAverageAll","sumBy","movingAverageTs","totalFees","totalFeesDelta","useVolumeData","timestampProp","graphData","volumeStats","totalVolume","totalVolumeDelta","numberFmt0","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","numberFmt1","numberFmt2","currencyFmt0","style","currency","currencyFmt1","currencyFmt2","_getCurrencyFmt","absValue","abs","_getNumberFmt","formatNumber","compact","format","display","compactNumber","toFixed","APRLabel","label","rewardReaderAddress","readerAddress","esGmxAddress","bnGmxAddress","glpAddress","stakedGmxTrackerAddress","bonusGmxTrackerAddress","feeGmxTrackerAddress","stakedGlpTrackerAddress","feeGlpTrackerAddress","glpManagerAddress","vesterAddresses","walletTokens","depositTokens","rewardTrackersForDepositBalances","rewardTrackersForStakingInfo","walletBalances","ReaderV2","aums","processedData","HeaderLink","isHomeLink","exact","isOnHomePage","pathname","baseUrl","injectedConnector","InjectedConnector","supportedChainIds","activateInjectedProvider","providerName","ethereum","isCoinbaseWallet","isMetaMask","setSelectedProvider","getInjectedConnector","getWalletConnectConnector","WalletConnectConnector","rpc","qrcode","clearWalletConnectData","clearWalletLinkData","startsWith","addNetwork","metadata","request","switchNetwork","setItem","reload","chainIdHex","getInjectedHandler","activate","fn","UnsupportedChainIdError","errString","options","image","TokenCard","changeNetwork","network","BuyLink","gmxBigIcon","glpBigIcon","Home","arbitrumPositionStatsUrl","arbitrumPositionStats","arbitrumTotalVolumeUrl","arbitrumTotalVolume","polygonPositionStatsUrl","polygonPositionStats","polygonTotalVolumeUrl","polygonTotalVolume","arbitrumTotalVolumeSum","polygonTotalVolumeSum","totalVolumeSum","openInterest","arbitrumUserStats","polygonUserStats","totalUsers","uniqueCount","LaunchExchangeButton","tradingIcon","statsIcon","totaluserIcon","liquidityIcon","costIcon","simpleSwapIcon","arbitrumIcon","avaIcon","Tooltip","visible","setVisible","intervalCloseRef","intervalOpenRef","trigger","onMouseEnter","clearInterval","onMouseClick","onMouseLeave","disableHandleStyle","handleClassName","handle","renderContent","ACTIVE_CHAIN_IDS","AssetDropdown","assetSymbol","assetInfo","unavailableTokenSymbols","Button","as","Items","Item","coingeckoIcon","polygonIcon","addTokenToMetamask","metamaskIcon","SEO","customMeta","meta","title","description","Helmet","property","StatsTooltip","maticValue","showDollar","decimalsForConversion","isFloatNum","StatsTooltipRow","DashboardV2","positionStats","totalGmxSupply","positionStatsInfo","getWhitelistedTokenAddresses","tokenList","visibleTokens","tokensForSupplyQuery","totalSupplies","VaultV2","infoTokensArbitrum","infoTokensMatic","acc","cv","feeUSD","tokenAddresses","currentFeesUsd","tokenInfo","feeUsd","getCurrentFeesUsd","currentFees","feesSummary","feesSummaryByChain","useFeesSummary","eth","lastUpdatedAt","gmxMarketCap","glpMarketCap","tvl","totalGmxInLiquidity","maticStakedGmx","arbitrumStakedGmx","totalFloorPriceFundUsd","ethFloorPriceFund","glpFloorPriceFund","usdcFloorPriceFund","ethFloorPriceFundUsd","glpFloorPriceFundUsd","adjustedUsdgSupply","getWeightText","currentWeightBps","targetWeightBps","weightText","stakedPercent","liquidityPercent","notStakedPercent","gmxDistributionData","color","totalStatsStartDate","stableGlp","totalGlp","glpPool","fullname","stablePercentage","element","gmxActiveIndex","setGMXActiveIndex","onGMXDistributionChartLeave","glpActiveIndex","setGLPActiveIndex","onGLPPoolChartLeave","CustomTooltip","payload","backgroundColor","polygon24Icon","arbitrum24Icon","arbitrumValue","gmx40Icon","PieChart","width","height","Pie","cy","innerRadius","outerRadius","fill","dataKey","startAngle","endAngle","paddingAngle","onMouseOut","entry","Cell","hexToRgba","cursor","stroke","strokeWidth","y","textAnchor","dominantBaseline","glp40Icon","arbitrum16Icon","polygon16Icon","utilization","Dashboard","NETWORK_ICONS","NETWORK_ICON_ALTS","Ecosystem","gmxPages","linkLabel","about","chainIds","telegramGroups","creatorLink","creatorLabel","announcementLink","announcementLabel","TOUCH_MOVE_CONTAINER_CLASS_NAME","allowTouchMoveFn","el","body","parentElement","Modal","isVisible","setIsVisible","zIndex","onAfterOpen","disableBodyScrollLock","allowContentTouchMove","modalRef","ref","disableLock","disableBodyScroll","allowTouchMove","enableBodyScroll","clearAllBodyScrollLocks","useLockBodyScroll","keyCode","addEventListener","removeEventListener","motion","initial","animate","exit","variants","hidden","opacity","transition","duration","overflow","fontSize","HOURS_PER_YEAR","StakeModal","maxAmount","setValue","stakingTokenSymbol","stakingTokenAddress","farmAddress","isStaking","setIsStaking","isApproving","tokenAllowance","updateTokenAllowance","on","removeAllListeners","needApproval","getError","placeholder","onChange","YieldFarm","stake","disabled","getPrimaryText","UnstakeModal","isUnstaking","setIsUnstaking","unstake","StakeV1","isStakeModalVisible","setIsStakeModalVisible","stakeModalTitle","setStakeModalTitle","stakeModalMaxAmount","setStakeModalMaxAmount","stakeValue","setStakeValue","setStakingTokenAddress","stakingFarmAddress","setStakingFarmAddress","isUnstakeModalVisible","setIsUnstakeModalVisible","unstakeModalTitle","setUnstakeModalTitle","unstakeModalMaxAmount","setUnstakeModalMaxAmount","unstakeValue","setUnstakeValue","unstakingFarmAddress","setUnstakingFarmAddress","connectWallet","ammFactoryAddressV2","usdgAddress","gmtAddress","xgmtAddress","autoAddress","busdAddress","gmtUsdgPairAddress","xgmtUsdgPairAddress","autoUsdgPairAddress","gmtUsdgFarmAddress","xgmtUsdgFarmAddress","autoUsdgFarmAddress","usdgYieldTracker","xgmtYieldTracker","gmtUsdgFarmTrackerXgmt","gmtUsdgFarmTrackerNative","xgmtUsdgFarmTrackerXgmt","xgmtUsdgFarmTrackerNative","autoUsdgFarmTrackerXgmt","autoUsdgFarmTrackerNative","yieldTrackers","pairTokens","yieldTokens","xgmtSupply","updateXgmtSupply","updateBalances","updateStakingInfo","totalStakedInfo","updateTotalStakedInfo","pairInfo","updatePairInfo","pairData","balance0","balance1","getPairData","totalStakedData","getTotalStakedData","gmtUsdg","xgmtUsdg","autoUsdg","xgmtPrice","gmtUsdgPrice","xgmtUsdgPrice","bnbPrice","bnbBusd","autoUsdgPrice","usdgAnnualRewardsUsd","usdg","xgmtAnnualRewardsUsd","xgmt","gmtUsdgAnnualRewardsXmgtUsd","gmtUsdgFarmXgmt","gmtUsdgAnnualRewardsNativeUsd","gmtUsdgFarmNative","gmtUsdgTotalAnnualRewardsUsd","xgmtUsdgAnnualRewardsXmgtUsd","xgmtUsdgFarmXgmt","xgmtUsdgAnnualRewardsNativeUsd","xgmtUsdgFarmNative","xgmtUsdgTotalAnnualRewardsUsd","autoUsdgAnnualRewardsXgmtUsd","autoUsdgFarmXgmt","autoUsdgAnnualRewardsNativeUsd","autoUsdgFarmNative","autoUsdgTotalAnnualRewardsUsd","usdgBalance","usdgTotalStaked","usdgTotalStakedUsd","usdgSupplyUsd","usdgApr","usdgRewards","xgmtBalance","xgmtBalanceUsd","xgmtTotalStaked","xgmtTotalStakedUsd","xgmtSupplyUsd","xgmtApr","xgmtRewards","gmtUsdgFarmBalance","gmtUsdgFarm","gmtUsdgBalance","gmtUsdgBalanceUsd","gmtUsdgSupply","gmtUsdgSupplyUsd","gmtUsdgStaked","gmtUsdgStakedUsd","gmtUsdgFarmSupplyUsd","gmtUsdgApr","gmtUsdgXgmtRewards","gmtUsdgNativeRewards","gmtUsdgTotalRewards","gmtUsdgTotalStaked","gmtUsdgTotalStakedUsd","xgmtUsdgBalance","xgmtUsdgFarmBalance","xgmtUsdgFarm","xgmtUsdgBalanceUsd","xgmtUsdgSupply","xgmtUsdgSupplyUsd","xgmtUsdgStaked","xgmtUsdgStakedUsd","xgmtUsdgFarmSupplyUsd","xgmtUsdgApr","xgmtUsdgXgmtRewards","xgmtUsdgNativeRewards","xgmtUsdgTotalRewards","xgmtUsdgTotalStaked","xgmtUsdgTotalStakedUsd","autoUsdgBalance","autoUsdgFarmBalance","autoUsdgFarm","autoUsdgBalanceUsd","autoUsdgStaked","autoUsdgStakedUsd","autoUsdgFarmSupplyUsd","autoUsdgApr","autoUsdgXgmtRewards","autoUsdgNativeRewards","autoUsdgTotalRewards","autoUsdgTotalStaked","autoUsdgTotalStakedUsd","totalStakedUsd","buyXgmtUrl","buyGmtUrl","addGmtUsdgLpUrl","addXgmtUsdgLpUrl","buyAutoUrl","addAutoUsdgLpUrl","claim","rewards","YieldToken","Checkbox","isChecked","setIsChecked","selected","useLocalStorageByChainId","useLocalStorage","internalValue","setInternalValue","useLocalStorageSerializeKey","rewardRouterAddress","stakeMethodName","burnAmount","unstakingTokenSymbol","unstakeMethodName","multiplierPointsAmount","rewardReductionBasisPoints","VesterDepositModal","stakeTokenLabel","reserveAmount","maxReserveAmount","vesterAddress","isDepositing","setIsDepositing","nextReserveAmount","nextDepositAmount","additionalReserveAmount","Vester","VesterWithdrawModal","isWithdrawing","setIsWithdrawing","CompoundModal","isCompounding","setIsCompounding","shouldClaimGmx","setShouldClaimGmx","shouldStakeGmx","setShouldStakeGmx","shouldClaimEsGmx","setShouldClaimEsGmx","shouldStakeEsGmx","setShouldStakeEsGmx","shouldStakeMultiplierPoints","setShouldStakeMultiplierPoints","shouldClaimWeth","setShouldClaimWeth","shouldConvertWeth","setShouldConvertWeth","ClaimModal","isClaiming","setIsClaiming","StakeV2","setStakingTokenSymbol","setStakeMethodName","unstakeModalReservedAmount","setUnstakeModalReservedAmount","setUnstakingTokenSymbol","setUnstakeMethodName","isVesterDepositModalVisible","setIsVesterDepositModalVisible","vesterDepositTitle","setVesterDepositTitle","vesterDepositStakeTokenLabel","setVesterDepositStakeTokenLabel","vesterDepositMaxAmount","setVesterDepositMaxAmount","vesterDepositBalance","setVesterDepositBalance","vesterDepositEscrowedBalance","setVesterDepositEscrowedBalance","vesterDepositVestedAmount","setVesterDepositVestedAmount","vesterDepositAverageStakedAmount","setVesterDepositAverageStakedAmount","vesterDepositMaxVestableAmount","setVesterDepositMaxVestableAmount","vesterDepositValue","setVesterDepositValue","vesterDepositReserveAmount","setVesterDepositReserveAmount","vesterDepositMaxReserveAmount","setVesterDepositMaxReserveAmount","vesterDepositAddress","setVesterDepositAddress","isVesterWithdrawModalVisible","setIsVesterWithdrawModalVisible","vesterWithdrawTitle","setVesterWithdrawTitle","vesterWithdrawAddress","setVesterWithdrawAddress","isCompoundModalVisible","setIsCompoundModalVisible","isClaimModalVisible","setIsClaimModalVisible","stakedGmxDistributorAddress","stakedGlpDistributorAddress","gmxVesterAddress","glpVesterAddress","excludedEsGmxAccounts","esGmxSupply","esGmxSupplyUsd","totalGmxStaked","totalRewardTokens","totalRewardTokensAndGlp","hasMultiplierPoints","totalSupplyUsd","maxUnstakeableGmx","gmxVesterPairAmount","availableTokens","stakedTokens","divisor","earnMsg","renderMultiplierPointsLabel","renderMultiplierPointsValue","gmxAmountStr","esGmxAmountStr","mpAmountStr","glpStr","s","showUnstakeGmxModal","showUnstakeEsGmxModal","remainingVestableAmount","showGmxVesterDepositModal","gmxVesterVestedAmount","showGlpVesterDepositModal","glpVesterVestedAmount","Stake","Tab","option","setOption","optionLabels","icons","opt","Portal","root","createElement","appendChild","removeChild","createPortal","TooltipWithPortal","coords","setCoords","tooltipWidth","setTooltipWidth","handlerRef","updateTooltipCoords","rect","getBoundingClientRect","top","scrollY","fitHandleWidth","closeOnDoubleClick","TokenSelector","isModalVisible","setIsModalVisible","searchKeyword","setSearchKeyword","mintingCap","showMintingCap","selectedTokenLabel","showBalances","showTokenImgInDropdown","showSymbolImage","showNewCaret","getTokenState","onSelectToken","filteredTokens","onSearchKeywordChange","onKeyDown","autoFocus","tokenIndex","mintAmount","balanceUsd","tokenPopupImage","tokenState","portalClassName","dropDownIcon","ExchangeInfoRow","isTop","isWarning","HIGH_SPREAD_THRESHOLD","ConfirmationBox","fromTokenUsd","toTokenUsd","isSwap","isMarketOrder","isShort","isHigherSlippageAllowed","setIsHigherSlippageAllowed","onConfirmationClick","setIsConfirming","shortCollateralAddress","hasExistingPosition","leverage","existingPosition","existingLiquidationPrice","displayLiquidationPrice","shortCollateralToken","isPendingConfirmation","feesUsd","isSubmitting","fromUsdMin","toUsdMax","nextAveragePrice","feeBps","savedSlippageAmount","isProfitWarningAccepted","setIsProfitWarningAccepted","isTriggerWarningAccepted","setIsTriggerWarningAccepted","isLimitOrdersVisible","setIsLimitOrdersVisible","onCancelOrderClick","collateralAfterFees","existingOrder","wrappedToken","sameToken","existingOrders","existingTriggerOrders","decreaseOrdersThatWillBeExecuted","hasPendingProfit","spread","fromSpread","toSpread","isHigh","getSpread","showSpread","allowedSlippage","renderSpreadWarning","renderFeeWarning","MIN_PROFIT_TIME","renderExistingOrderWarning","sizeInToken","longOrShortText","p","triggerPricePrefix","renderExistingTriggerErrors","existingTriggerOrderLength","renderExistingTriggerWarning","renderMain","renderExecutionFee","renderAvailableLiquidity","availableLiquidity","isLiquidityRisk","riskThresholdBps","poolWithoutBuffer","adjustedMaxGlobalShortSize","sizeTokens","renderMarginSection","renderSwapSection","OrdersToa","isPluginApproving","approveOrderBook","REFERRAL_CODE_REGEX","REGEX_VERIFY_BYTES32","isRecentReferralCodeNotExpired","referralCodeInfo","getReferralCodeTakenStatus","referralCode","referralCodeBytes32","encodeReferralCode","getReferralCodeOwner","ownerArbitrum","ownerMatic","takenOnArb","takenOnMatic","referralCodeTakenInfo","both","getTierIdDisplay","tierId","tierRebateInfo","tierDiscountInfo","deserializeSampleStats","input","parsedData","obj1","getSampleReferrarStat","obj2","currentValue","hex","ownerOnOtherNetwork","discountUsd","totalRebateUsd","tradedReferralsCount","registeredReferralsCount","ownerOnOtherChain","codeString","owner","isTaken","isTakenByCurrentUser","getUSDValue","getReferralCodeTradeUrl","origin","protocol","port","portString","getRootUrl","ACTIVE_CHAINS","getGraphClient","decodeReferralCode","hexCode","parseBytes32String","fromCharCode","trim","final","formatBytes32String","getCodeOwnersData","codes","variables","codeOwners","referralCodes","useReferralsData","loading","setLoading","arbitrumCodes","polygonCodes","codeOwnersOnMatic","codeOwnersOnArbitrum","main","useUserCodesOnAllChain","startOfDayTimestamp","typeIds","referralTotalStatsId","rebateDistributions","discountDistributions","prepareStatsItem","distributions","transactionHash","receiver","typeId","referrerTotalStats","referrerTierInfo","referrerLastDayStats","cumulativeStats","getCumulativeStats","referralTotalStats","referralStorageAddress","referralCodeHex","setTraderReferralCodeByUser","codeOwner","useUserReferralCode","localStorageCode","onChainCode","localStorageCodeOwner","test","attachedOnChain","userReferralCode","userReferralCodeString","validateReferralCodeExists","referralCodeOwner","get1InchSwapUrl","rootUrl","NoLiquidityErrorModal","outputCurrency","modalError","setModalError","nativeToken","inputCurrency","swapTokenSymbol","oneInchSwapUrl","usePrevious","SWAP_ICONS","longImg","shortImg","swapImg","leverageSliderHandle","dragging","restProps","prefixCls","overlay","placement","Handle","SwapBox","pendingPositions","setPendingPositions","setFromTokenAddress","setToTokenAddress","swapOption","setSwapOption","tokenSelection","setTokenSelection","isConfirming","setIsPendingConfirmation","savedIsPnlInLeverage","orderBookApproved","positionRouterApproved","isWaitingForPluginApproval","approvePositionRouter","setIsWaitingForPluginApproval","isWaitingForPositionRouterApproval","setIsWaitingForPositionRouterApproval","isPositionRouterApproving","savedShouldDisableValidationForTesting","fromValue","setFromValue","toValue","setToValue","anchorOnFromAmount","setAnchorOnFromAmount","isWaitingForApproval","setIsWaitingForApproval","setIsSubmitting","setShortCollateralAddress","leverageOption","setLeverageOption","isLeverageSliderEnabled","setIsLeverageSliderEnabled","hasLeverageOption","ordersToaOpen","setOrdersToaOpen","setOrderOption","positionKey","orderOptions","orderOptionLabels","triggerPriceValue","setTriggerPriceValue","fromTokens","stableTokens","indexTokens","shortableTokens","toTokens","needOrderBookApproval","prevNeedOrderBookApproval","needPositionRouterApproval","prevNeedPositionRouterApproval","tokenAllowanceAddress","Api","fromBalance","toBalance","isPotentialWrap","isWrapOrUnwrap","prevFromTokenAddress","prevNeedApproval","prevToTokenAddress","triggerRatioValue","setTriggerRatioValue","triggerRatioInverted","maxToTokenOut","maxToTokenOutUSD","maxFromTokenInUSD","maxFromTokenIn","maxSwapAmountUsd","entryMarkPrice","exitMarkPrice","nextToAmount","nextToValue","nextFromAmount","nextFromValue","updateSwapAmounts","leverageMultiplier","fromUsdMinAfterFee","toNumerator","toDenominator","baseFromAmountUsd","swapFees","updateLeverageAmounts","nextDelta","nextHasProfit","nextPrice","getNextAveragePrice","liquidationPrice","getToLabel","currentRate","usdgFromAmount","getSwapError","requiredAmount","swapAmount","sizeUsd","stableTokenAmount","getLeverageError","wrap","unwrap","multiPath","increasePosition","tokenAddress0","refPrice","priceBasisPoints","priceLimit","boundedFromAmount","contractAddress","pendingChanges","isStopOrder","showFromAndToSection","showTriggerPriceSection","showTriggerRatioSection","feeTokenPrice","borrowFeeText","hasZeroBorrowFee","setFromValueToMaximumAvailable","maxAvailableAmount","SWAP_LABELS","Fragment","shouldShowMaxButton","updatedTokenSelection","getTokenLabel","evt","positive","negative","step","marks","modal","errorCode","isPrimaryEnabled","isSupportedChain","indexTokenInfo","nextToAmountUsd","ChartTokenSelector","selectedToken","onSelect","marginLeft","getChartToken","ExchangeTVChart","positions","savedShouldShowPositionLines","currentChart","setCurrentChart","currentSeries","setCurrentSeries","setPeriod","hoveredCandlestick","setHoveredCandlestick","chartToken","setChartToken","tmp","previousMarketName","currentOrders","chartRef","updatePriceData","chartInited","setChartInited","scaleChart","timeScale","setVisibleRange","onCrosshairMove","seriesPrices","point","chart","createChart","offsetWidth","offsetHeight","layout","textColor","fontFamily","localization","timeFormatter","businessDayOrTimestamp","grid","vertLines","horzLines","rightOffset","borderVisible","barSpacing","timeVisible","fixLeftEdge","priceScale","crosshair","horzLine","vertLine","mode","subscribeCrosshairMove","series","addCandlestickSeries","lineColor","topColor","bottomColor","lineWidth","priceLineColor","downColor","wickDownColor","upColor","wickUpColor","interval","setInterval","resizeChart","resize","lines","createPriceLine","line","removePriceLine","deltaPrice","candleStatsHtml","candlestick","timeThreshold","average","ORDER_SIZE_DUST_USD","shouldSwap","receiveToken","isCollateralWrapped","isSameToken","isUnwrap","PositionSeller","keepLeverage","setKeepLeverage","prevIsVisible","savedRecieveTokenAddress","setSavedRecieveTokenAddress","swapToToken","setSwapToToken","ORDER_OPTIONS","ORDER_OPTION_LABELS","maxAmountFormatted","maxAmountFormattedFree","convertedAmount","convertedAmountFormatted","nextLeverage","nextLiquidationPrice","isClosing","nextCollateral","isNotEnoughReceiveTokenLiquidity","isCollateralPoolCapacityExceeded","swapFeeToken","swapFee","isSwapAllowed","receiveAmount","convertedReceiveAmount","executionFeeUsd","residualSize","deductions","collateralInfo","receiveTokenInfo","profitPrice","onClickPrimary","minProfitExpiration","minProfitTimeExpired","withdrawETH","sizeDeltaUsd","prefix","closePrice","getProfitPrice","warning","tokenOptionInfo","convertedTokenAmount","maxInUsd","maxIn","maxOut","maxOutUsd","fromInfo","toInfo","getSwapLimits","DEPOSIT","WITHDRAW","EDIT_OPTIONS","PositionEditor","isSwapping","setIsSwapping","nextLeverageExcludingPnl","isDeposit","isWithdrawal","resetForm","depositCollateral","collateralSnapshot","expectingCollateralChange","withdrawCollateral","EDIT_OPTIONS_LABELS","depositOrWithdrawalText","SpinningLoader","downloadImage","dataURI","filename","blob","navigator","msSaveBlob","blobURL","createObjectURL","tempLink","setAttribute","download","click","revokeObjectURL","ROOT_SHARE_URL","UPLOAD_URL","UPLOAD_SHARE","config","quality","canvasWidth","canvasHeight","getShareURL","imageInfo","PositionShareCard","positionRef","userAffiliateCode","uploadedImageInfo","uploadedImageError","sharePositionBgImg","isMobile","useMedia","deltaAfterFeesPercentageStr","homeURL","backgroundImage","gmxLogo","PositionShare","setIsPositionShareModalOpen","isPositionShareModalOpen","positionToShare","affiliateCodes","setAffiliateCodes","parsedAffiliateCodes","useAffiliateCodes","setUploadedImageInfo","setUploadedImageError","useCopyToClipboard","copyToClipboard","sourceLoaded","setSourceLoaded","img","Image","onload","useLoadImage","shareBgImg","tweetLink","toJpeg","PositionDropdown","handleEditCollateral","handleShare","handleMarketSelect","fontWeight","getOrdersForPosition","hasMatchingIndexToken","hasMatchingCollateralToken","PositionsList","positionsDataIsLoading","setListSection","showPnlAfterFees","setMarket","positionToEditKey","setPositionToEditKey","positionToSellKey","setPositionToSellKey","setPositionToShare","isPositionEditorVisible","setIsPositionEditorVisible","isPositionSellerVisible","setIsPositionSellerVisible","setCollateralTokenAddress","editPosition","sellPosition","onPositionClick","borrowFeeUSD","positionOrders","hasPositionProfit","positionDelta","borrowFeeRate","collateralAfterFee","hasLowCollateral","muted","netValue","deltaBeforeFeesStr","deltaAfterFeesStr","orderText","colSpan","hasOrderError","hasPendingChanges","OrderEditor","setEditingOrder","initialRatio","indexTokenMarkPrice","OrdersList","hideActions","cancelOrderIdList","setCancelOrderIdList","editingOrder","onCancelClick","onEditClick","renderHead","isAllOrdersSelected","allOrderIds","renderEmptyRow","renderActions","renderLargeList","markExchangeRate","orderId","prevState","indexTokenSymbol","collateralTokenInfo","collateralUSD","renderSmallList","getPositionDisplay","getOrderActionTitle","actionDisplay","renderLiquidationTooltip","liquidationData","minCollateral","borrowFee","loss","getLiquidationData","liquidationsDataMap","TradeHistory","shouldShowPaginationButtons","pageIds","setPageIds","pageIndex","setPageIndex","tradeHistoryData","liquidationsData","getMsg","trade","defaultMsg","tokenAmount","flags","isOrderExecution","isLiquidation","longShortDisplay","executionPriceDisplay","executionPrice","sizeDeltaDisplay","nBigNum","priceDisplay","fromAmountDisplay","toAmountDisplay","amountInDisplay","minOutDisplay","tradesWithMessages","lastTrade","ExchangeWalletTokens","ExchangeBanner","hideBanner","xmlns","viewBox","transform","notifications","pushSuccessNotification","pushErrorNotification","getTokenAddress","applyPendingChanges","getPositions","positionQuery","updatedPositions","propsLength","collateralTokens","contractKey","hasRealisedProfit","realisedPnl","updatedPosition","closingFee","hasProfitAfterFees","pendingDeltaAfterFees","deltaPercentageAfterFees","getPositionQuery","Exchange","forwardRef","setSavedIsPnlInLeverage","savedShowPnlAfterFees","setSavedShouldShowPositionLines","showBanner","setShowBanner","bannerHidden","setBannerHidden","setUpdatedPositions","currentAccount","defaultTokenSelection","selectedSwapOption","newTokenSelection","positionDataError","useImperativeHandle","onUpdatePosition","onClosePosition","onIncreasePosition","indexTokenItem","onDecreasePosition","onCancelIncreasePosition","blockGap","timeGap","onCancelDecreasePosition","setIsPluginApproving","setIsPositionRouterApproving","isCancelMultipleOrderProcessing","setIsCancelMultipleOrderProcessing","onMultipleCancelClick","tx","wait","POSITIONS","ORDERS","TRADES","LIST_SECTIONS","listSection","LIST_SECTIONS_LABELS","renderCancelOrderButton","getListSection","section","hiddenLimit","Actions","useParams","checkSummedAccount","updateOrders","OrdersOverview","openTotal","executedTotal","cancelledTotal","positionsForOrders","openDecrease","openIncrease","openSwap","executedDecrease","executedIncrease","executedSwap","cancelledDecrease","cancelledIncrease","cancelledSwap","executeOrder","preventDefault","shouldExecute","nearExecute","diffPercent","shoudUnwrap","invalidToken","invert","near","PositionsOverview","diffToLiq","feesPerHour","liqTime","Loader","useDebounce","delay","debouncedValue","setDebouncedValue","handler","clearTimeout","ReferralCodeForm","callAfterSuccess","setReferralCode","inputRef","isValidating","setIsValidating","referralCodeExists","setReferralCodeExists","debouncedReferralCode","event","isEdit","cancelled","codeExists","checkReferralCode","focus","onSubmit","JoinReferralCode","Card","tooltipText","EmptyMessage","InfoCard","toolTipPosition","AffiliateCodeForm","handleCreateReferralCode","recentlyAddedCodes","setRecentlyAddedCodes","isProcessing","setIsProcessing","setError","referralCodeCheckStatus","setReferralCodeCheckStatus","checkCodeTakenStatus","takenStatus","buttonError","takenInfo","trimmedValue","getCodeError","AddAffiliateCode","AffiliatesStats","referralsData","isAddReferralCodeModalOpen","setIsAddReferralCodeModalOpen","addNewModalRef","allReferralCodes","finalAffiliatesTotalStats","referrerRebates","scope","stat","referrerRebate","rebate","explorerURL","TradersStats","traderTier","isEditModalOpen","setIsEditModalOpen","editModalRef","TRADERS","AFFILIATES","TAB_OPTIONS","Referrals","walletAccount","queryAccount","activeTab","setActiveTab","deserializer","mutateCodeOwner","useCodeOwner","referrerTier","mutateReferrerTier","useReferrerTier","registerReferralCode","TAB_OPTION_LABELS","isReferralCodeAvailable","renderAffiliatesTab","BuyInputSection","topLeftLabel","topRightLabel","onClickTopRightLabel","inputValue","onInputValueChange","onClickMax","showMaxButton","staticInput","tokenBalance","clickable","SwapErrorModal","swapToken","glpAmount","lowestFeeToken","setLowestFeeToken","lowestFeeTokenInfo","oneInchUrl","getTooltipContent","GlpSwap","isBuying","setIsBuying","history","useHistory","swapLabel","tabLabel","swapValue","setSwapValue","glpValue","setGlpValue","swapTokenAddress","setSwapTokenAddress","anchorOnSwapAmount","setAnchorOnSwapAmount","setFeeBasisPoints","tokensForBalanceAndSupplyQuery","balancesAndSupplies","lastPurchaseTime","RewardTracker","redemptionTime","inCooldownWindow","reserveAmountUsd","maxSellAmount","isSwapTokenCapReached","swapTokenInfo","swapTokenBalance","glpUsdMax","feeGlpTrackerApr","stakedGlpTrackerApr","onSwapValueChange","onGlpValueChange","onSelectSwapToken","totalApr","getBuyGlpToAmount","nextValue","getSellGlpFromAmount","switchSwapOption","fillMaxAmount","nextUsdgAmount","payLabel","receiveLabel","payBalance","receiveBalance","selectToken","feePercentageText","defaultTokenName","glp24Icon","arrowIcon","minGlp","buyGlp","sellGlp","tooltipIconPosition","tokenFeeBps","availableAmountUsd","isCapReached","swapUrl","renderFees","BuyGlp","buyGLPIcon","imgSrc","imgName","classNames","ARBITRUM_GMX","POLYGON_GMX","EXTERNAL_LINKS","bungee","banxa","o3","networkWebsite","buyGmx","uniswap","traderjoe","TRANSFER_EXCHANGES","networks","BuyGMX","isArbitrum","externalLinks","DecentralisedExchanges","CentralisedExchanges","Bungee","O3","Banxa","exchange","Uniswap","Traderjoe","ohmArbitrum","BuyGMXGLP","buyGMXIcon","NftWallet","nftAddress","setNftAddress","nftId","setNftId","setReceiver","getTransferError","ERC721","transferNft","transferError","VEST_WITH_GMX_ARB","VEST_WITH_GLP_ARB","VEST_WITH_GMX_MATIC","VEST_WITH_GLP_MATIC","getVestingDataV2","combinedAverageStakedAmount","cumulativeReward","transferredCumulativeReward","bonusReward","transferredAverageStakedAmount","getVestingValues","minRatio","vestingDataItem","currentRatio","nextMaxVestableEsGmx","nextTransferredCumulativeReward","totalCumulativeReward","nextCombinedAverageStakedAmount","nextTransferredAverageStakedAmount","nextRatio","initialStakingAmount","nextStakingAmount","ClaimEsGmx","selectedOption","setSelectedOption","esGmxIouAddress","esGmxIouBalance","arbRewardReaderAddress","maticRewardReaderAddress","arbVesterAdddresses","maticVesterAdddresses","arbVestingInfo","maticVestingInfo","arbVestingData","maticVestingData","stakingToken","ValidationRow","isValid","BeginAccountTransfer","isTransferring","setIsTransferring","isTransferSubmittedModalVisible","setIsTransferSubmittedModalVisible","parsedReceiver","gmxVesterBalance","glpVesterBalance","cumulativeGmxRewards","cumulativeGlpRewards","transferredCumulativeGmxRewards","transferredCumulativeGlpRewards","pendingReceiver","gmxAllowance","gmxStaked","hasVestedGmx","hasVestedGlp","hasStakedGmx","hasStakedGlp","hasPendingReceiver","completeTransferLink","pendingTransferLink","CompleteAccountTransfer","sender","isCorrectAccount","homeEventsData","appEventsData","isActive","validTill","bodyText","buttons","newTab","Icon","strokeLinecap","strokeLinejoin","EventToast","button","useEventToast","visited","setVisited","isFuture","custom","EventToastContainer","useWindowScroll","breakpoint","createBreakpoint","XL","L","S","useBreakpoint","reverseOrder","gutter","containerClassName","containerStyle","right","toastOptions","Infinity","PageNotFound","homeUrl","tradePageUrl","ReferralTerms","TermsAndConditions","RedirectPopupModal","redirectModalVisible","setRedirectModalVisible","appRedirectUrl","setRedirectPopupTimestamp","setShouldHideRedirectModal","shouldHideRedirectModal","removeRedirectPopupTimestamp","NoJob","Jobs","locales","en","es","zh","ko","ja","pseudo","defaultLocale","isTestLanguage","locale","dynamicActivate","messages","i18n","load","loadLocaleData","plurals","ru","fr","de","AddressDropdown","accountUrl","disconnectAccountAndCloseSettings","M","ensName","setENSName","JsonRpcProvider","lookupAddress","resolveENS","useENS","copy","externalLink","disconnect","ConnectWalletButton","ModalWithPortal","LANGUAGE_MODAL_KEY","NETWORK_MODAL_KEY","NetworkDropdown","currentLanguage","activeModal","setActiveModal","small","NavIcons","selectorLabel","DesktopDropdown","modalName","getModalProps","LanguageModalContent","NetworkModalContent","networkOptions","onNetworkSelect","openSettings","getModalContent","maticIcon","NetworkMenuItems","settingsIcon","language24Icon","networkIcon","handleNetworkSelect","checkedIcon","LanguagePopupHome","isLanguageModalOpen","setIsLanguageModalOpen","AppHeaderUser","setWalletModalVisible","showConnectionOptions","connectWalletImg","getAccountUrl","AppHeaderLinks","clickCloseIcon","AnimatePresence","fadeVariants","slideVariants","Header","isDrawerVisible","setIsDrawerVisible","isNativeSelectorModalVisible","setIsNativeSelectorModalVisible","logoSmallImg","getLibrary","Web3Provider","autoRefreshOnNetworkChange","Zoom","cssTransition","enter","appendPosition","collapse","collapseDuration","arbWsProvider","WebSocketProvider","maticWsProvider","FullApp","exchangeRef","connector","deactivate","useLocation","activatingConnector","setActivatingConnector","triedEager","tried","setTried","shouldTryWalletConnect","rawData","connected","SyntaxError","currentProviderName","isAuthorized","useEagerConnect","suppress","injected","handleConnect","handleChainChanged","handleAccountsChanged","accounts","handleNetworkChanged","networkId","removeListener","useInactiveListener","search","React","URLSearchParams","useRouteQuery","get","encodedReferralCode","queryParams","delete","disconnectAccount","connectInjectedWallet","userOnMobileDevice","userAgent","attemptActivateWallet","walletModalVisible","selectedToPage","setSelectedToPage","isSettingsVisible","setIsSettingsVisible","setSavedSlippageAmount","slippageAmount","setSlippageAmount","isPnlInLeverage","setIsPnlInLeverage","shouldDisableValidationForTesting","setShouldDisableValidationForTesting","setShowPnlAfterFees","setSavedShowPnlAfterFees","setSavedShouldDisableValidationForTesting","decodedRefCode","checkPendingTxns","updatedPendingTxns","getTransactionReceipt","receipt","wsVaultAbi","VaultV2b","wsProvider","getWsProvider","wsVault","wsPositionRouter","callExchangeRef","off","slippage","limit","hideProgressBar","newestOnTop","closeOnClick","draggable","pauseOnHover","metamaskImg","hasCoinBaseWalletExtension","coinbaseImg","walletConnect","UserRejectedRequestErrorWalletConnect","getWalletConnectHandler","walletConnectImg","basisPoints","App","unlisten","listen","scrollTo","useScrollToTop","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,00D,+BCAf,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,iD,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,6C,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,gD,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,iD,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,88I,+BCAf,OAAe,cAA0B,4C,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,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","file":"static/js/main.ddebddf2.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/ic_polygon_16.5cb70e5d.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_16.f4c1a9fe.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_24.21ec7bfe.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_96.4c6d42bf.svg\";","export default __webpack_public_path__ + \"static/media/ic_language24.ce951c62.svg\";","export default __webpack_public_path__ + \"static/media/ic_polygon_24.4352380c.svg\";","export default __webpack_public_path__ + \"static/media/ic_polygon_96.c7ad5028.svg\";","export default __webpack_public_path__ + \"static/media/logo_GMX.18d2594f.svg\";","export default __webpack_public_path__ + \"static/media/ic_checked.ef61d0e2.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_40.933f9b97.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_24.eff381d9.svg\";","export default __webpack_public_path__ + \"static/media/ic_settings_16.9d97766b.svg\";","export default __webpack_public_path__ + \"static/media/logo_GMX_small.17e8891c.svg\";","export default __webpack_public_path__ + \"static/media/DROP_DOWN.ef525fad.svg\";","export default __webpack_public_path__ + \"static/media/buy_gmx.618eb538.svg\";","export default __webpack_public_path__ + \"static/media/coinbaseWallet.ae86a337.png\";","export default __webpack_public_path__ + \"static/media/gmx-logo-with-name.6211e9eb.svg\";","export default __webpack_public_path__ + \"static/media/ic_banxa.06412144.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAIAAABL1vtsAAAAuElEQVR4AWMYcWAUMMIAGxsbCdr+///PwcEBYTc0NPz69es/GFy9etXS0hK7HmsOhTdy9a/k6oAMTCOAXAcHByB7PxgAGcJ64j47YoEIyIAa8VauHoJeyNagGwEGELa2tjZQCsjw3hoNMcJnZyzUiHdyDTAjaiFGAFVjGgE0F2rEFoQRCI8A9QP9AmQgOxjofqAeNCMgHvHeFoPwCCawsbEBhhwkCL9//45uBPEAGIvAuByhaXkUAABgd3QJTKl1YwAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/ic_buy_glp.b4c18be7.svg\";","export default __webpack_public_path__ + \"static/media/ic_coingecko_16.ef20d202.svg\";","export default __webpack_public_path__ + \"static/media/ic_convert_down.74b7eb02.svg\";","export default __webpack_public_path__ + \"static/media/ic_copy_16.fafdf331.svg\";","export default __webpack_public_path__ + \"static/media/ic_cost.b4a729d3.svg\";","export default __webpack_public_path__ + \"static/media/ic_discord.be4d716c.svg\";","export default __webpack_public_path__ + \"static/media/ic_github.dbd4de8a.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_custom.e906ef8f.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_40.eeb7dc00.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_custom.1e4ac4aa.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_footer.dc91de3c.svg\";","export default __webpack_public_path__ + \"static/media/ic_liquidity.505b3f30.svg\";","export default __webpack_public_path__ + \"static/media/ic_medium.f6051b2e.svg\";","export default __webpack_public_path__ + \"static/media/ic_metamask_16.aa3dce32.svg\";","export default __webpack_public_path__ + \"static/media/ic_new_link_16.5b7cb7bf.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAPCAYAAAAPr1RWAAAABHNCSVQICAgIfAhkiAAAA5ZJREFUOE+NVGtsU2UYfr9zWfv10K4XVrvaG0zpBgw7NsnMWJxENEJinCSQIMEgMQYJl2QzEf5pjJIYLySijniJkYRgwrhkGLYwFZgikmyVHxuzK6WwdesYO6drt572XD7PqQ7r4obfn+e8ed/zPM/7fhcEc9a1sa8+zyupZyVVDOipSXGI2I2PRs2s+0ita/vHc+sXitFsMjx+bEti+vevRVnALIWBpUzAIgwGehGk5THg80lw4MrRMnPwidW2TfH/I1Ig14lvpn46LpEsYsAAmLGrVoMvziJTCoA4ZCJ542JME0mBucSd9Vofr2qwbXygQIH8+9gbM+l8Auvf5dxjEQcVeHqFe/PtWXdDQmetkOc7rvA9LgUo8HPV4WbPqzV6/suRc91JMdbEQY4qYxh5KfYdq3c279Bz6Gri6Be30hd36sFDpupok/fNR/6r5Rt3u9zh7GA0NhM3qoiGNbamxlGVq7uW6vvIQalgRSrYaAIWIFBhDh5Ytfj5Q6g7/tbohPiHi6UxqXQ8t2T5AvPsTJ759Bfht10KoaDaEjrNYNf+fmGoH5Mcsww7f0jn4us5kGgHY8o0el43o/bITlUmOWQ1BIRn/O/YFtqobr7b35W8fEvRnFfgiugu39Z/ddkx/G1UksaWltIUrPO1IHRi8CWiE7q5mnCjp7Uwx4XWvsH3iO7cbSwXDga2F8xcGftuy4wstChEDeVUkbUz+F7Dw68tRmeje6SsPMnYjUuE9Q9w3j7+49rzk72X9ZnXcMsu7vZsaNLJT8Xe5flszMrocy9xQsCy5oPqsuZW1DXS1s9nLlXpRUHbxsaQc2vPfM6PJs6f6pmKvEAAwTrrikM7XE8d0Gs77xzpG8mEQzRRgQFFI68ZaPDsW47axy/slaYvHYZ8FCwGd9ZfWl8136Z+OHyury8TC9lZs3y44mW22ERv4qT/ttg7kBFHsIk2kBeDbVThnH8yfOYGVu8FzbmrgCmDXM6F3q9zvXJwbgcn+Z/9iempb2wl5s+2OdeemJvviL3Np7I3rUbKAJsq21CBXP8pzEcGJvITmCYK6LP7B2UtJlpchKDltfZZDSmtni2q12PvopV3nvS1+u6/LbpAcjp5uj8TCTHFAn8TMfOiUmREBQtbKtc5Ntd67fXX75PPtnhWOxEpOd0iKdlARpkKUNomsUi79BrSmsNiZLXbSGkd0JowC7RYWmL7lUOO/avdfz1sfwIZaJcfXDdbRwAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/ic_olympus_arbitrum.2d52c3f7.svg\";","export default __webpack_public_path__ + \"static/media/ic_sign_out_16.7516903b.svg\";","export default __webpack_public_path__ + \"static/media/ic_simpleswaps.2005009f.svg\";","export default __webpack_public_path__ + \"static/media/ic_stats.f0a18011.svg\";","export default __webpack_public_path__ + \"static/media/ic_telegram.af1a4a66.svg\";","export default __webpack_public_path__ + \"static/media/ic_totaluser.ae09b310.svg\";","export default __webpack_public_path__ + \"static/media/ic_traderjoe.aa0f5ef5.svg\";","export default __webpack_public_path__ + \"static/media/ic_trading.2c53815a.svg\";","export default __webpack_public_path__ + \"static/media/ic_twitter.9f35b403.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_arbitrum.a1fa0b7f.svg\";","export default __webpack_public_path__ + \"static/media/ic_wallet_24.a19a6758.svg\";","export default __webpack_public_path__ + \"static/media/long.0bc4a064.svg\";","export default __webpack_public_path__ + \"static/media/metamask.4b5d438a.png\";","export default __webpack_public_path__ + \"static/media/position-share-bg.900fbfaa.png\";","export default __webpack_public_path__ + \"static/media/short.1f94a0c2.svg\";","export default __webpack_public_path__ + \"static/media/swap.40fb8e49.svg\";","export default __webpack_public_path__ + \"static/media/walletconnect-circle-blue.31c29967.svg\";","var map = {\n\t\"./Anyswap.png\": 503,\n\t\"./Anyswap.svg\": 504,\n\t\"./Artwork.svg\": 505,\n\t\"./Artwork_gmx.svg\": 506,\n\t\"./Banxa.png\": 507,\n\t\"./DROP_DOWN.svg\": 290,\n\t\"./Frame.svg\": 508,\n\t\"./Hop.png\": 509,\n\t\"./Hop.svg\": 510,\n\t\"./Hop_dark.png\": 511,\n\t\"./Hop_dark.svg\": 512,\n\t\"./Synapse.png\": 513,\n\t\"./Synapse.svg\": 514,\n\t\"./amx.png\": 515,\n\t\"./binance.png\": 516,\n\t\"./bscscan.png\": 517,\n\t\"./btn_big_arbitrum.png\": 518,\n\t\"./btn_big_avalanche.png\": 519,\n\t\"./btn_big_bsc.png\": 520,\n\t\"./btn_big_purchasegmx.png\": 521,\n\t\"./btn_big_purchasegmx.svg\": 522,\n\t\"./buy_gmx.svg\": 291,\n\t\"./buy_gmx_bond.svg\": 523,\n\t\"./buy_transfer_eth.svg\": 524,\n\t\"./coinbaseWallet.png\": 292,\n\t\"./coingecko.png\": 525,\n\t\"./cross.svg\": 526,\n\t\"./dlp.png\": 527,\n\t\"./flag_en.svg\": 528,\n\t\"./flag_es.svg\": 529,\n\t\"./flag_fr.svg\": 530,\n\t\"./flag_ja.svg\": 531,\n\t\"./flag_ko.svg\": 532,\n\t\"./flag_ru.svg\": 533,\n\t\"./flag_zh.svg\": 534,\n\t\"./glp_icon.svg\": 535,\n\t\"./gmx-logo-final-white-small.png\": 536,\n\t\"./gmx-logo-final-white.png\": 537,\n\t\"./gmx-logo-final.png\": 538,\n\t\"./gmx-logo-glow.png\": 539,\n\t\"./gmx-logo-with-name.svg\": 293,\n\t\"./gmx_logo.svg\": 540,\n\t\"./graphite-01.png\": 541,\n\t\"./ic-communityproject.svg\": 542,\n\t\"./ic_aave_24.svg\": 543,\n\t\"./ic_aave_30.svg\": 544,\n\t\"./ic_aave_40.svg\": 545,\n\t\"./ic_arbitrum_16.svg\": 130,\n\t\"./ic_arbitrum_24.svg\": 172,\n\t\"./ic_arbitrum_96.svg\": 173,\n\t\"./ic_arbitrum_hover_16.svg\": 546,\n\t\"./ic_arrowleft16.svg\": 547,\n\t\"./ic_arrowright16.svg\": 548,\n\t\"./ic_avalanche_16.svg\": 549,\n\t\"./ic_avalanche_24.svg\": 550,\n\t\"./ic_avalanche_96.svg\": 551,\n\t\"./ic_avax_24.svg\": 552,\n\t\"./ic_avax_30.svg\": 553,\n\t\"./ic_avax_40.svg\": 554,\n\t\"./ic_banxa.svg\": 294,\n\t\"./ic_binance.svg\": 555,\n\t\"./ic_binance_logo.svg\": 556,\n\t\"./ic_bsc.svg\": 557,\n\t\"./ic_bsc_96.svg\": 558,\n\t\"./ic_btc.b_24.svg\": 559,\n\t\"./ic_btc.b_40.svg\": 560,\n\t\"./ic_btc_24.svg\": 561,\n\t\"./ic_btc_40.svg\": 562,\n\t\"./ic_bungee.png\": 295,\n\t\"./ic_busd_24.svg\": 563,\n\t\"./ic_buy_glp.svg\": 296,\n\t\"./ic_cash.png\": 564,\n\t\"./ic_cash.svg\": 565,\n\t\"./ic_checked.svg\": 203,\n\t\"./ic_coingecko_16.svg\": 297,\n\t\"./ic_coingecko_hover_16.svg\": 566,\n\t\"./ic_convert_down.svg\": 298,\n\t\"./ic_copy_16.svg\": 299,\n\t\"./ic_cost.svg\": 300,\n\t\"./ic_dai_24.svg\": 567,\n\t\"./ic_dai_40.svg\": 568,\n\t\"./ic_discord.svg\": 301,\n\t\"./ic_eth_24.svg\": 569,\n\t\"./ic_eth_40.svg\": 570,\n\t\"./ic_frax_24.svg\": 571,\n\t\"./ic_frax_40.svg\": 572,\n\t\"./ic_github.svg\": 302,\n\t\"./ic_glp_24.svg\": 245,\n\t\"./ic_glp_40.svg\": 204,\n\t\"./ic_glp_40_.svg\": 573,\n\t\"./ic_glp_custom.svg\": 303,\n\t\"./ic_glp_custom_.svg\": 574,\n\t\"./ic_gmx.svg\": 575,\n\t\"./ic_gmx_24.svg\": 576,\n\t\"./ic_gmx_30.svg\": 577,\n\t\"./ic_gmx_40.svg\": 304,\n\t\"./ic_gmx_40_.svg\": 578,\n\t\"./ic_gmx_64.svg\": 579,\n\t\"./ic_gmx_arbitrum.svg\": 580,\n\t\"./ic_gmx_avax.svg\": 581,\n\t\"./ic_gmx_big.svg\": 582,\n\t\"./ic_gmx_custom.svg\": 305,\n\t\"./ic_gmx_custom_.svg\": 583,\n\t\"./ic_gmx_footer.svg\": 306,\n\t\"./ic_gmx_footer_.svg\": 584,\n\t\"./ic_gmx_footer_org.svg\": 585,\n\t\"./ic_hop.svg\": 586,\n\t\"./ic_info.svg\": 587,\n\t\"./ic_language24.svg\": 174,\n\t\"./ic_link.e_40.svg\": 588,\n\t\"./ic_link_24.svg\": 589,\n\t\"./ic_link_40.svg\": 590,\n\t\"./ic_liquidity.svg\": 307,\n\t\"./ic_matic_24.svg\": 591,\n\t\"./ic_matic_40.svg\": 592,\n\t\"./ic_medium.svg\": 308,\n\t\"./ic_menu_dots.svg\": 593,\n\t\"./ic_metamask_16.svg\": 309,\n\t\"./ic_metamask_hover_16.svg\": 594,\n\t\"./ic_mim_24.svg\": 595,\n\t\"./ic_mim_40.svg\": 596,\n\t\"./ic_multiswap.svg\": 597,\n\t\"./ic_new_link_16.svg\": 310,\n\t\"./ic_o3.png\": 311,\n\t\"./ic_olympus.svg\": 598,\n\t\"./ic_olympus_arbitrum.svg\": 312,\n\t\"./ic_polygon_16.svg\": 115,\n\t\"./ic_polygon_24.svg\": 175,\n\t\"./ic_polygon_96.svg\": 176,\n\t\"./ic_selector_dropdowns.svg\": 599,\n\t\"./ic_settings_16.svg\": 246,\n\t\"./ic_settings_24.svg\": 600,\n\t\"./ic_sign in_16.svg\": 601,\n\t\"./ic_sign_out_16.svg\": 313,\n\t\"./ic_simpleswaps.svg\": 314,\n\t\"./ic_stats.svg\": 315,\n\t\"./ic_stats_big.svg\": 602,\n\t\"./ic_synapse.svg\": 603,\n\t\"./ic_telegram.svg\": 316,\n\t\"./ic_tether_24.svg\": 604,\n\t\"./ic_tokens.svg\": 605,\n\t\"./ic_totaluser.svg\": 317,\n\t\"./ic_traderjoe.png\": 606,\n\t\"./ic_traderjoe.svg\": 318,\n\t\"./ic_trading.svg\": 319,\n\t\"./ic_transfer_avax.svg\": 607,\n\t\"./ic_twitter.svg\": 320,\n\t\"./ic_uni_24.svg\": 608,\n\t\"./ic_uni_40.svg\": 609,\n\t\"./ic_uni_arbitrum.svg\": 321,\n\t\"./ic_usdc.e_24.svg\": 610,\n\t\"./ic_usdc.e_40.svg\": 611,\n\t\"./ic_usdc_24.svg\": 612,\n\t\"./ic_usdc_40.svg\": 613,\n\t\"./ic_usdt_24.svg\": 614,\n\t\"./ic_usdt_40.svg\": 615,\n\t\"./ic_wallet_24.svg\": 322,\n\t\"./ic_wavax_24.svg\": 616,\n\t\"./ic_wavax_40.svg\": 617,\n\t\"./ic_wbtc_24.svg\": 618,\n\t\"./ic_wbtc_40.svg\": 619,\n\t\"./ic_weth_24.svg\": 620,\n\t\"./ic_weth_40.svg\": 621,\n\t\"./lg_arbitrum.svg\": 622,\n\t\"./logo_GMX.svg\": 177,\n\t\"./logo_GMX_.svg\": 623,\n\t\"./logo_GMX_org.svg\": 624,\n\t\"./logo_GMX_small.svg\": 247,\n\t\"./logo_GMX_small_.svg\": 625,\n\t\"./long.svg\": 323,\n\t\"./metamask-text.svg\": 626,\n\t\"./metamask.png\": 324,\n\t\"./page-not-found.svg\": 627,\n\t\"./position-share-bg.png\": 325,\n\t\"./short.svg\": 326,\n\t\"./swap.svg\": 327,\n\t\"./trading.jpg\": 628,\n\t\"./wallet-connect-text.svg\": 629,\n\t\"./walletconnect-circle-blue.svg\": 328,\n\t\"./wave-01.png\": 630,\n\t\"./wave-02.png\": 631\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 502;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAAAZlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Vn2moAAAAInRSTlMABhQdEgsKKUeEstIZdbP/wlfRwTjgpJRm8fDhhaNlk3ZW+c569wAAAsRJREFUeAHs0AEBwEAMAjFaCv4lbz7+IiHSrJ+3I40vfVzOo72it3JaxHLxI4IIIogggggiiCDia9cMdx5FwSj8aw84Ug4qCoL96t7/Te68YL7GjrPpn0nsxCepLXrA8IQ3NoY/IULp5keLJ0YbHKM1/gfd3PQni7Ak6b6bXU9y8DigIz1+hx9JsvefKwITyfBsVCIOgrPkjlGp7WDiPJqPFWF6kvHpISgox6R+DXKyI35DpK6LJn6oCPEwW/rNw6bEZC4Hc+0iu/Irmttw7wDdKKB8bSKwaDRPF6bpANUM96/aTT2GR3dOEeLBY9p7ABY6vDJkGJakG1N24krVdp+h5qRRaceyNPptgfg0O8dBuiVKt/spRbTiAa8esP4qQjFIxABwnMq85GO2K3Hm+PBVogcCqWp8zAaIMrKTHAL1CUVE8sgDJk7YU+fXlYgrOiJVneBaxjBrS44d4LkC41SOFtClergALkPI7oQiJoYjD5HUeGFMzU/qGi9T0ZKZ+1IZFRMzY5mpZ2ctvLTMfWQaiogAwY4nFOG4HHuY8ILnhtqJCFSlMryvKnIv57DOWGlWKph+Dstii4h6r8BTiggvHnQ88iCBTv8kct2JUAylMtyIgsvirOstFKNrJdV9l4atkTOWRmRSOw9YORx5QHIo5HEnAjaVylhrf5WsZKy0WivSYkmtRQQ9RFM4oQiTmW76q3/WReChh/h8sPqdiI51Yi1/3L4eafZ1DFOOClBz/69+sIiQe93SbE4oAj5TmOOzWHj0pLc0KChOOxHI9EXpMpN0ul5pZWi2pZFl+LkHnJOMUyf9Z7m0bIP6blNY8D59xoZROETV88Wf/5T3Eb6dVm3wPp4r3sS5v/bFjL83KRtcIlRL6/EuYfkbRFzvLC8Rl4hLxCXiEnGJuET8A+HaTFa3F17bC68Np9uG02sL8rYF+T+idSlyqmiqtwAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/Anyswap.491d1f32.svg\";","export default __webpack_public_path__ + \"static/media/Artwork.a2d41b8c.svg\";","export default __webpack_public_path__ + \"static/media/Artwork_gmx.cc61d732.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAAoCAMAAABO8gGqAAABcVBMVEUAAAAoKDwnKTsnKTsnKTuGh5HJyc6urrWFhpA1Nkehoqrx8vO7vMF4eoVCRFRrbHhQUWARbooBqMcRcojKys////+vr7ZdX2zW19ry8vMUZIIBo8cBqMYBrMUUbYCTlJ0iN00BnsgAoscArMUDqbwiO0zl5ee8vcLX2NsNd50Bp8YBrcYAscQPgpHk5OYeRF8AmcgAo8cUaYEBssUAtsMdTl0Gh7gBmckPdpMPe5IBtsQIn6mgoalcXmtqa3gWVnoBlcoAmckDmMAlMUQiOUwDqr0Bu8MYYm4lL0QDicIBlMoAu8MDtrolM0MSYI0Bj8oFi7clMkQFpbMAv8EUd34iNU0Bi8sBkMsbTGgZXm8AwMIAxMEiPUwKb6gBi8wLeqcKl6EAv8IBxcEMl5YbRWkBhs0gPVYgRFUBwMIAycAdUlwGeLwBhswRY4wPh48Fuq8UVoQBgs0Azr8YaWwKbKkBzsAKqZ4ZS3IDfcQCxLcbXmRL8BeXAAAABHRSTlMAM7D2JaXEwgAAAp1JREFUeAHszjEBADAQArF7wL/myigDURA4OaWsg3OK+VCqCaeaSbkFF/xswQUfa2XRJa8OxNFNYF6gvUkz7u7u7u7u7m6f/1UqZArW/9wNhZ26kd+JZWvy/uMsjOPGQg8c247rOmHblrwm4a8UQ+K2HUswIp3JGhL0BOEmGRGHBzm6FYA29IXwUBCe5eMgUlAVQKUpLCouKTUvKFyaBO4KwCdBSSoqyMrgWV7wcUGK/VFeUZmpqq4xJej4SLIWSlpSIbGjgm6KBJE6eGgxVo/TSzRUFDU2NbeYEvRpUT39OCE7h9sKpJVHBblU8x0hh0a0tVd0dFZ1dfcYFrRCgp6sy6QRCeb0liNBligQwoXndSxEb19FPxtoHhwyJDg8goy6lAofNxyH7mUk6Ftqy5Eg1pJ6zoix8YnJKTY90z07ZzokQvepVa5xyg0mRs6hQ4KIpdJDzC8s9hXCtXRwaXnFtGDeX9MCHryNkaD6Oh4VrBcYFGJ1bXxdXjc2Z7e2jQjWlyk8lAC4q1v6+IgEVSjCgjmBJJlmZ3dvcR+rg6XDo2MzIaG6LGhaS/3zSTAIBaaJFrhePkuxgJPTtbOgPL+4vDIqWKYap1CGUhoPCbIUPBBaEM+SWu4Livv1ze7eLVPc3R89PBoQ1MvDW9UMetifpF1OgtKJBFPBCWIJPdHs6fn0hWleLx/eDAi6tgK6iYQ2COOQIBBHQT0iNb85HbD3j2fYg30VcBY3D8IefPj8MprieNAsikeC2sbTAXboRJG5+v54Pl0bn5BncVf37MXlw8/vPwrWkUdBXQrXrVZEKZDa8DDFyLAO92r0RCmA6/8rr0iFhKCWNjAEgWmwsmq0RY0XjDpw1IGjDhx14KAfwBz0Q8CDfhB90E9DAACtALoxSNWoNwAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/Frame.17e8891c.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAYAAACZvCZrAAAFLElEQVR4Ae3aBWwcRxTG8QjKQqsUEtOJpTJzw+U2zMmGmZlJVIYwYznMya0ZjslU58Jo2Nu43L7Os2ej7eiMMt+30s8ws+a7f2Zn044PIrpbeFDonPAA4EHhbnsceDBJeEC4P2EBwAOyBZ0rIiFrkWSdAAAgm/BgO1kKdeUAAFhJdJaBUCYBABAIAKhzIAAAEAgAQCAAAIEAAAQCABAIAEAg8tcEHIExrqhPc/ui26Pt78wBAAIRmRXs4h3pIe9wH3lGBLa30V80AAJx6aszT0dXHFt+bslxZ+H841Q49xTlzzpDeTOcFJmWHM2dlr4/PD1zBq8a7qwgluU7vMP95B4cINfAMLlGFfbm8QbmELoIVa1Q2qvzANCAgbjyyekuRYuPUNHCY1Q4/wQVzLHioFNkajKFJ6dRaEI6BcdlkX9MDvlHe5zBCcGR/LHuoSE9R8Qhu18eZfYuKIuuvdnQT9QVVHl0qWK+izoP0IAQiPOrTmpFC49TwTyOw2nKm3mW8qaLOExJqYhDcEKGiEO2CEMO+TQ3eYd7yTMsQK7BQZ9reO7MrL4ch0JKf7+I0j88vx+BgDYGlxiFi07PLFygr8ifp888tyKzS8ESV5eCha4ukRkuLTzR9YV/tMvvG+khD8dhqIjDoBDl9I9QVp98yvyI43CO0t45Tym9LlJG72saAgEJBpuUvOfg00IrcgaGjOz+uZRZEYdfKO09jsMFSu51iZJ7XKWzXa6VucbecrSAQIwU9gtOYXu8c+TYcuV8thz7GoBA1ENgftSR1a/gQMaHHIcopb4t4tDzEundOQ7X6czrt4SSA80YiPaCT46fF3T5mo/98T6/7Xxd4iMqPI0HGyR8IMx9W3sbO74pMw/+UOt/+dP7np+Z+vZFEYfLIg7X6OyblXE49UoJnXzJoAYOhE9wxuGLEwinHFPvqsyU4yvifH6/YP/ZOQyG/Fx4wAECEdvxDZk719bpCZH24TVN78ZxuEGnXyumUy+X0skXY3TipdsNvYLwC3ocfiUQDiUCqgNCWQ0rFHUOqwjAJYa5Y+15EQiK7V6/oi4fl/xOsXb6NV41lJKza7l2ppvZO7yC2jfTJUbvGs6fqczLz48N0LgAgeDLitjezSPN3eu/4FUEu/3Tzjo9KU6/VrrjxAsmnXih/EAz3+acWcP5vesRCA0POEjcQFgrB46DZefasl/376n10ppXDMeeLT9/9KnfKX3gH45mDEQXZf9B9YWcdyifv31NMQFIvEDk6O1tYVCVmfs2abVeRfT4q8vhx/887xxIzRkIdl6Iqk96+X6ZoKufv4o9C6dg4HYnJPQKIrZjrd+KgrqS4PfN3es+55DU5XM2cyB6225TjpRzM2QcDOFp9fPbboF+JDnl2Ew82CChA8GXEhyD6vAt0NiejTN4v6IVBMIa99P/D12Jg/r5z9vONay9BwDc5ty7cYUSBUNZSdjfdpp7NnzOG5vGd9u6sPLvxNt7NizncQ5JC/pFta8yLvE3KR3S/QAIhE1sp7zUkMx9WzTewJTv14m1wdmiKYEAQCBquNSwrxSMnet28DhvVJoyHvb5qt43dnxt8KVIGwoEAALBYns3zLQ/4dX/L1Exv3PdAXVlwe/zOM+3ojgwzbqrAYBA1IK5a50uVwa2SwUAQCDkSqFyRbDWj180AAIBAAgEACAQANDwEAgAQCAAAIEAAATiAdsgAMADViAeFJKsCQAA2YQHORB3cynkAFYSAFg5JMkm3N2ODxmJB3kQABLeg1Yc/gOptOvB5Z4VkgAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/Hop.4b77c9e3.svg\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/Hop_dark.423942af.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAABmFBMVEUAAAD///////////////////////+PcOZ/UON5R+KNT+iFQeWSYOi4hfWIP+aRP+iIP+WUP+ibPeqSPOiiauz///////////////95VON4U+O3N/C1LO9+WOL///////9yS+F4SeO/JvK+IvF4SOP///////////////9+WOWHVeXRQPbKHvTRO/b///////////+pOOyxKu6+KfG7JvCxKu+wRPH///////////////////////////////////+qL+21J+/CIvLTS/PCIPK2J++sMuz///////////+eT+2iOOu3QfG8MPDNQPbUH/beGff1Zv/gGPjVIfXNNvS+MvOiNuv///////96SOKHQeaZQ+noMvrvDfv3A/3vC/vmRPmHP+V6R+J7SOKIQuaXQefvDfz3Bf2ZQeehNuuzPu27MPDUHfbeG/fTIfWiNuurMuy2J/DBIPGtQO2wKu68KPGwKe7NKvXKHvR3SOJ4SOJ3UuK/SfG0Ku+7QfF7V+OUPuidPeqIQOaRPueQP+eQT+iFQOV6R+MNOs0rAAAAhnRSTlMABhQdEgsKKXb/V/84Gf+z/7OF4SkpZYRWdnVmwVeT////wv//lIU4s1dXOMI44MLSdv+U0v9H4dFHV6PBGbJ10v/gKf//o/DxZkekR3Y4lIUZk4VHZrN2pPHwdjiz/8Ip8fDS4Xaz4XazV3WUhYWkpP//V/+z/2bB//+FOMJHZrKF/8KzVzMrutwAAANDSURBVHgB7NDFAQRBCERRfHxa8091PYK9Ur8Fzo+IRdMnTMRqHslzUyaxQGFC6oHClfQ90f8QgAAEIACxAOLTuq2AeLcfOyDO67dcZ2qI8y6/rdQzM8TV+m/rYz65LYvt9nkgju7mDWSXp2Q5JdsfxkqscmunzMzMzPjqf4+isrv3iQq6yZzfQlf4W5gZZhkrYRHlFRoqqyo1VVckZGuQmlm6ImrrNNQ31GtqrP0ZtZDbYGeQl6yIpmYNLa1tmpqbfkYdV3WeU9JnxF9//6Pp3//+T45mfdUJDsJkRDkTmMlEPjClqhj59g4iYcqOIK8QmBnkDSiW24MalnoRnV3dPQp6evv6k6MW5mWRBFrUOdmY8ui6GMYF6ccUhQyAox+5HvoSwMYsEaiy50ZYSLeIgcGh4ZHRMYDxicmp6aGZgaSodBHbDUmYdYAGOQsCURBxGn4OgEUZIk+SrTmAjEcrhypBJADkHLIUi5hfWFT90vLK6pqixfWNpLCYi1AtiwINzUL2tjZcF8C2iTIOiWCEcxgXHEk5pqyRzGguxSI2t7aLInZ2d5YU7W1tQnKz52jJS5p4x6NpL7yJANNH9H0E4BFQy6GI/8J8hw1quwTUQjfdW2P/4HDq6Bhg/Phk6vDgNGlrSCFVP0urYQ6ZmmOB4k2EhXOcW1kSoU9VqjHuIgaStourWiblh+XZ+YU+LC/Oz5LXAs7q8c2qDxayLyL0JiERqI0x0EtjDgooFNss5SIur641Xd9cJkcjX1LH1ZA8h3bGFxE8BhYqEVxfKhBliHwXZBQULfIUi6hu1nB7d6upufpnNIehWWa2ozruCoizX0W4oSGMMFIisEYYvjpQYxI1WKBAYIiO0JNpfmLf/3hiP9QmZIWLiBGXxDJC9lWEpKrFkdFFmkXM5qjCI4ooj/F3OCfT/I54fNTw9Pyi6fXxl0vjnRwvwRT9K54R7H3EjL2T/WdDoRve0AhlNTbwEmGOJZ42opr8UB6YaWqGslqaCA7MqFuLuxuw4QmIkTJUJ2ruoYEns3vqD/XB29a2VjA9OpzfPjqcPzrBgxWMBsRoQIwGxGhAjAYEK4geXUwGXV44urwQuuB0dMEpdAny6BJkAMRHfxzYlb9eAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/Synapse.4974674c.svg\";","export default __webpack_public_path__ + \"static/media/amx.1a8107c3.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAAAn1BMVEUAAAD////////////////////////1vjzzuzPzui/yvDTyujD////////////////2xE3/////////////////1nrzuzH////////////////zvTb1wELzvDL0wEbyvDb////////////////////////0uzDzuzHzuy/////////////////////////////0vDLyujD////////1wD3k7xDPAAAANXRSTlMABhQdEgsKZqT/o/EpRzgZOIX/wcIZ0nbx4JSEScJFiVeEk6NlsvbR8vDS4dFmpLPB8FZ1ZcrSjpcAAAKDSURBVHgB7NABAcBQFAFAD/SPvPX4LsIBRz2PB5ycPi7Wge7UhNJpBHV+i1jEIr527aipUR8IAPjTP4KSpGxigaoK0P49AFDv7vt/ttvNmpnrVfrgE7TZmcBOlIf8Jlkk5hsQNwHCRRTfBgjnEKNEgCAHkrhyCHJgieuGYAeWuGYIdri7uTsjkUgKRamW6kIh2GEjNmckUnBh0ECCvUyI+y07CJbY3n8NkUkps7wQQtndRUKQBDuQxIwDQki67UBdao14eESJpw1ebpFg84SX55dZiJJulWtJbWopKGRtqoTqSJXIxlSaOxtTl8LF/mDqZOkQD/H/jzwtXuNXngzPP+KXOYhDroWAFNuh7WwONNQGOttTJqEBa6HVrrPHzgYzPbifj0uGIIeYJdAhZgl0iE8lUhiMMUWOHAxBF91bGv6EfbaljLQUpK6kYOdIwzf0jJ5ArgRiy3VyHqKz1vZQe4iee+nFqt2YE4RwVdSiTmEFxbRjF4z8bS1LY8sO55fG6BCoTR5ClAeAwoBEiPETQvPoKTIYDEVbrKFYvlOxjKhYvp8vlqKzBMGNIUqwaZp2DkIyhJ8GfipxLByC68PH5+vzg+vEPIQ9gbAdZdkRhOBFIpRCp9KnS4egOkkS5MAVcx5CwXQCMVA2HENMrXuftpPQueEH01X8iU0S7BBHMzOiqaqqafPkGIJaJX8aOIZI8vaX3Bf02yOYvdy3vV48hJf47R3mvzXyt0T8CyF2AGAzGP+GEMpSr1sOZY/ppFf2GR6Jb4T6cpRS+NBqdRszUdiq8w5h89Y7hO18cggQ4R88sxEgAkSACBABIkD855JwmCwcL+Tjhf7AaThwGo4g8xHkP7gaLtKObnJaAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/btn_big_arbitrum.ff6ad480.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAf8AAAB/CAMAAADW6DvgAAABF1BMVEUbIDIeITUbHDAXGCwhGi2HLjhhJjNhJzNOIzJPIzI8HzBYJjNrKDRqKDRYJTM7Hy+QMDhGITGsNTwqHC51KjWaMTqPMDkzHi8eIDYbHDBFITB0KjYeITaiMzt+LDceITajMzt9LDdCIDCZMTo4HzA+IDBLKDmBMT15LzuuOD+TND05JjhRIzJyKjVwKjU2Hi+RMDgyHi8oIzdSIzJUKTp7LDYjGy5PJDKeMjuELThAIDBjJjSbMjqKLzg5HzBUJDJ5LDYlGy5hJzSSMDkfGSxqKDUpHC5EITEnGy5VJDMcGS02HS9DIDFAIDFFITFDIDAsHC4eITYcHzMaGy8TFiMeITUAAAASFiIcHzJlLDowJDduLjpCJjgHX8VeAAAAWXRSTlM4+O////////////////////////////+18P//+f/////////////////////////////////////////////////////////////////////6vvJR+SRTwHfs7R4AAA1sSURBVHgB7d2Hmuo6lgVgute2jKRNkLYoTcPgQ01NzjnnnKdzvO//HAOc2+jjkGRjwFT5vzmHtSwkWTaDwTe+iZOowJYqkY2GWhP2KIMvkLGsRuMJnf9Hm6lDiwq/UeBGRDOPBfUwGgh+bfZCuEY08ZvfGPzCt3Ca1vhMOCLL3DrCl5zBUWLUyRZYBVpMI54i/yRa5iHdOn+wnzmYqcGVvjX4xcx/OWszwldacIQxOCM6xVwOJ0gAWr6Uy4rQKpvyv6WoeDRHJoUrKEW4zuATTiOFrawhIFobT/4hJOdbELFFL36N0C6aeu9XEXdgFJcTXCYa1xB2N8zfCoCsISAq5doouXFKcTmfvPgNg5aRVZZwJ+SUGkecZwyuY4LcLH/GPlERR8hY6TYHOXKV31J4dqKVGgpOU4RrqZJuk390+JJTdBB+sNT6JCfl//zEspoTjmNcT8IQtChepeX8FQ4RGyQ0rlhuMMkhv7ESvBfR8miCI1SLE1tvkO+XLuZPFse4INiiYQjmJpPcuJxN1/E7vCtGqcMpYWhzZfvSav5acJRUJUDD10ITcIv8zcwCxuD9Icf7U8KocA2aTCbjclS8+c+Q7Zd/JeVfOzR+e5kpQdJq/noa8Y6R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\"","export default __webpack_public_path__ + \"static/media/btn_big_bsc.5e5ec82b.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYwAAAB4CAYAAADhTcXxAAAj8klEQVR4Ae2d51brStPnWWtuYLK7CTY44ICTZDIccs4bNnviEy5y5vOEz3Mtk3PSS51+eN0+pX+7ZIT2yzr14bd0gvBfLUzFlmpucWV9s7yy+S/e+F9vJGJG35Ly7h/e+KM77v0xWdqj4x/GR2KfU47uhToe3Uum544Opgv0y6u/ZNNdu+C6XA+vd++fJeXqTkgDU91OljpnYdY4co3iUBT6PpdrW8VqDm6TJWJ4+6a98/l67bMJe0iUe1efuL47sk3YPg3vP6rxv8g/kJ+Ym5v7W3PllY3/ubA4/A8l000ysbSemNGPN17Hx/VJSj4bDrP+PSktDPHnVrbg/7P9e9IiPG2uCbXbp+mfvbyTlBqHUNf07kgvuN4S0mwc4LUKMKsnYT18bxUFU9kuXnM+SkqNo0I1TXmT/n4K1TVrN6TpGDx+8j3tJzZ6SbdPo5c3ezD4sAb5B/ITvzoN4CxEmOYpv0h3xMbbGWaIGdyTM4JfcqbDdH94ut6Rbt58P12z//Crsf2H8+nG1lS2QnrQWZnBA1qnHNtPzPB5ut4Gv7e5sBAnpereb9hNSrW9L2EYFcW2zovVXNpITOwMeGll9/MdVP2AtLjTqGcMVpe3w05jefNfzn3Uuxnn3WQReNiAugXS+WvX+Jz2pacFdRkg0qf/Pja+7fPAl+4C6oJMhzKX8HrbZ7IvRO0Xpsv0cnBO4XvuO99n6Hxzhpw48aUMlKKY5lliOjfFOcXuAzmpv3ZUtpfNHpjaPgXrwXOoPDWXr3cLR/5Bb2t7iYlfxsYWnbsYAcPN9MZGtf+AHR5peplJqbIJI20bcz3orNauwveuvOGMb3oJjmF7d3id+H7lw0JEa+eRSwGY8gY5TDVCytdifkCZxsxVhewlxh3nLBw4WEW2N3p29qh+EHIYCXYYi3FSap4Ijdn9dCO+dj3FI59MRuqDh3BdPxY4DQe8eaZ1xo197wbrNo6RLtMvLY3C6+3eOL3+ndBwbgFtnJHlianT2nHkoihKPpBdooAyeyXgytmIzvUMfdJXR4xL92GH0blwEfdSLGqgOc8GjSjuSxBLo/SMpB5oRA++yZxG5wrXGVEmVN0L6D5N153maFd2fScFImhQFuP3Gd/bnDH9J4pkPuvzFUUpO7tkujhwDQX5NsLBKvoZbr9OscMATd5xzbpzJa9zxz+YQeMXwCCPCIwv3vVjqvueHnZWdEOm7WRgusMnfK0re2HN6HlqSkk7J3wn5X6mx89FZTEffG9heWnW/oNxZS9F+d1g6sWUQ7ldmq3MbBonmbMSpweDUIHD6N35ETcs6TBPFf9g2AimOI7l3XBPINSI7t6GncbqSSDCD2cmpdXj4C8V6E7PFhpHqXowKwFlMcIOszefTecyMS3nZBTly2B7P2XrMQ4Ac8fZpfhHAVtyQWXI1+5cixwGGTxmRG3/QerduCGtHUzpfzxO7QmUyptgu+smaaQzxFG76T8GsxLCvkERPdzbzTWpMS1sHqchTyVt/1tiw/cW3y+XOc5cxlKUnxFwmNXTIjZb8N5sjEvMeWN6jywIpQCzgJ1VTJegYD7oMMiT2uFLiiFl3XNAL7GDZ2c8iV5wmxYZPFFZidfzWF2fgSJ9Uz9CN4nTvgjonrt1+p9RDu94su3LsJ60/LeyR7/s7F/I7i1ulCtK8cifRVreo+99cQ6qepDY4ffERg4czOWDqR1R/4GYDELjV/fAY+56B2M9OqbYQ9t/5A6DdcuREeXdc9hbeL+Q4NOk8wP6RZCOxIDjRvR8xG9y9w6cO0xs9BrS5FS2RJ9FjmtKdC/QFG+Hw/cW/16YHqXABe78UMOnKMCGzQ9end30AbYll6fDBy9Qb4L6IXAYiyPmaZhha8r+6O3aXWJal+Fzmue+XliXGOBGNGUNNvY8ZXkLZiNQD+gGy0y1w7/c7H8EyldjyImF7y+Rx7ZVnPkxvX7OWthZkR7fKqgoCtmrNzbTqTjyfFDWrp4ldvjDETF8O+WC+oUBdximfQ09jUO8hdMtcDEOPYyFPFvYaTSOg/U/G0FvTDef3xioKW9km+4jvy6cdTnCmr5XzwXTOAVrzl8LfUGpBo13dCmKUlQ2Y6sHqZgaZtJhVHbCnsZn7ebjBqRzG9YD2Bg3omnL53xE/z8CWQ/TlGc4Q7xTwizvTo/u+8843YQ7ywboM7PvzR6G1j2OIACKoihjh2HXHplRwRGxvPaNDDvSAXqEqFdg6sdAcx9oSZ0V2KIrje6HM6y3eZZX884hiCAURQmiDsOSIWldJfYNE6I9yexb1Z7GBjTspLARL29l1PyG9eQZB/V5ZovuHVgf6MrfRaMoilJQhlEUpnbMDCghzTjwLiiMqZ/I9bAmgR0l1pbRSOOY0C+qovxOUYdR2f2Vknd07IyPy7tveEeAKW/IXqXRvn3jhh87b7gjw4yPDNG2VzmKoijqMBRFURR1GIqiKIo6DEVRFEVRh6EoiqLYXnaKdxgknDPTNOuHkzRyorB7piiKkvO4ZW+y6Tsln43f0DwGDqOIC/XnbHgXCy4aU9+HWuFJfmO4vkC3uptpzTOz6NAv+ZdFUeRjB5qniWlNUnqnfZqvZuNo0i4G7KCJniZLUmRUZ2DWC+Uzt9eRp8POwwxuwcsA98CscKeHNEW6RDfjrNzmKfulYI/OMR03PEpRlIKhbfuVzTGf/PocGqXgB7W+bTDLm/nrDR7DwbTDt6nOYZB383+Iexpu1Ezn4iMXCmdpG0HGAW8grSN6Sn+XfvTM9WbJdMrr6VlE4DXCJn6ZaZ1mA4+nVZSfSsFjSwmzdl1oAOXsxouzD2uXxVRgYm6X8EweOeGpo9gOm95NetPbtM+xp/HZcB9Ii8vhQoGHQ/oEjLppce781ZMEThGcXRdNGXMjZCtbgae9D7guEc44cuuVmOoeOWnHcEzpneiNlQyzNRRlcVS8w6Cpm/NRsZo197db1HpN4yhl6mdUwPxwYBcrm2CX1PyQ+gvc07CMA826ZkaS1frBoHN55O9Iv4HVPf/81No/zbUIOw3c4zAjMDu7sun+f/9u2qhHphfsqeQ8y9d0b3AGCaMnRVHM6kmxev0nbzzr8WeX3cAgN57Z8KZ3/ZBODkfDwydBajVIzOjFRbH4QpmWJPIvrabPt6XrmjiPl8xoct50PQc34o2DUFbjCKXplW28Xq5HWVju0Rlb77veUlzItD2z/j0p1UIbFRRFMSu7zoD3w7YW0rnMptc846NZR6+URECH4Xm3x4DxxmNSuXF4JajJHToPGG8Q+SNn1ThOrcHxMpGbuOfriXT7D7DU4+m5Eba2H2hqXcp0uzfiN+FmM9oXXLdZUPQ0P2AvjFQUBc8Lmml++fI22SLh++7wqGxKHmQP7r17txFDZsjKG5NR+oiVkNiFAj1m3FJLXPRyQZQp9O/Tz4//EdABusvbKKthWVjQAC/GnhfHeqIxppXNUCSBZ5DHr/5QKPwsS/4IJjUSiqIYPNZAUPp+TWz/IWuvZmyb+o/ZnvQ2nZv0MaXlTSwa6k10LmQXGor8u7c4asYRe2qZyDSOx3ruiH8eGGX6DJQhuC3HsB4aXm/rTN6TWH+FzgxSPxzrg7GzeaAoSq/I56jc5hrfHmXcNGNp1HSEh+NBh0GRIJsD0ToX737iuG479oqPeJY2AaJuU2Y9CU70khpFm8ET1+Okl30W4rBm5yr4SL4ZPKeuVzyWtbrndNZZFiXC9B61PKQUgTbLQcCZO/N9sh+TdihG9gRQ2aFkQfAuKdAImZz5PBQ+XwEi9t5toO62g2dpE8BZkdGbmpmM0stEVB/ker4uHslq2xdTM5NQDdFUf+HaBKgbpjo7X68Ox6vCGeR8YqGiFMM/LP7ZItr6XqzmYjwOOivbBTinU243ccUCs7QhcRjAYw1ffnUapdqhIB06YhfMqO4HfqHX3IA6Z8WfsERGdwRJLRPZtVs8vxvU901lS6LJa4jA2b1je+B8UArjkUS/iD8EsIlBjqK1edM4Kfz5Ddv/lpTqR8Vpti69v+37T+8NuvHSzI551ZkC3lZr3hyF6T7InlCMXqcb8OG3wKJH6SNRU5wVGXLLyzpYl+hcp36R4GfUfsGGnukBXRz5U4nOm1mOMxLWsEfrbJ4W8iTqlIxGUZTydmJa14lpe9Q+72+GpoaSwyBM2mjptZv8HEZ12zkMyDJugPhbVd1FAka8zANqfuMyGNF7DJ8n1SRAmci2zp0emBfOnhaX61J2BGuITvsysRGYEw7uc0Av511IoBRHWtFzcRkNfP2KoihUXrZDchYM307k9lxXuXcLHIb8LYvMs0FjzhrJ/N0tdvDy/nnpzmoxluoxXdt/TN9qGr1OeubyFrw28TpjQQ2RMrOh6LUDdE1s3Uyvc/25aX3kaTZPi/yjAGUMRVGHkUaJk8vrYCpbf8zsMFgfAHs2YEzbl8GGsIu6r0Ft8IrpERKnAcpEVPYaf07rAmY1bJ1QV15DNPVj4X2+E6wXONkcsJ07dw3dMfpchaL8frBvtrccv87uMMzKPjOiUmMa2jlgu/fpxqiyI9LDuriJTltN5yPwoq/F0cd05TVE7ESHwvssbJ4rilIoOqLV9p+5IeNwYxreOQC3fNq1B6yDjSh6poSldiDapwaWQBdrymuIoEzXf3H32YG18WP9iqIoP89hmPqJb8SI7EZcvnOAykaeDtATR/6gTGR76VkNXqdc1/VPFEVRfmcOg4YCVQ8dNTkljlhvfuCibEY0FVAmuhVpz689JvPDf4SJMJaIxxi3D1xRFOV35DAKxq6eJbZ5+Rcu+LF1+YZ3FGJgmUhRFEUpwGEoiqIo6jAURVEUdRiKoiiKgiaG0nvkyr3rL+AwyhsfowIR6CuKoihm7Top7/4hu8MwNISnkYWD9yNn9UA4GCQ8c9sdPTYEsK214P1RRF1OyTsysJaiKAoG2cbOBWdtErK1ebwVt7z7xxkcRnWfz76e1Xgvb8k0+/ekh3Wz6rfP5BPqfL2RRA8gmsEtR1EUxfYemD30bZEZPOSmVR7czfjgXveWz9Ben6TkwMYUjW5tHqfV0EiL+LCuWQeTqOb7wFk9cl25nmOVr0k81L15MkEJ0RrjfYaiKEsxBWyFlm9MRCMYnpNSjgYb2Qg2zM23RSs7+TmM2vaMDqOyiWZay8tFi1H6pKr19Hm0pn3J9SYzjumRP/psKiO1TsOjZ5keHQV60dPHvnydK6AHnBMeh6soPx83ZqBQTOe62FfyL62PZ/wX8LyXaV+l28O1q4J3SS1EgYu8wONR1zklHzQXo3PpjOHIZQFo7KFDnnG4I0jPbN9FAnROeR1EDDdIb7qTrO198Ms34usF99V0zj9n3GRtPyn51Ikv0pNRlPlh0ZpubGrnuriRsDGaNCr/DKpUzO4wKpvhWbjzUWJjHPHDyD/6hlMr/7zWWeprxrGzEGQ6PLpxZZ73c9euYcSAdXFPxfTCb6pFBh6vO6T3PfmHuf1hgOCAdIhRgUOUFiIdoPT1UOb7RY4AcDYi/jEGGn9A58IFnkvxTA6DjJ0zDsubWKR+BKL+gPGu7QO9exax851MPRr1ijVDup0rEL375+EU0jRPkSbMOMjphhyyc2LborfWmuFLcJ2lxuGnGm0be7r1g2LnQIORuYqi8NHVdvhCNiNDi2ErMSNgJ0UOo7o3zgz6t2Gx/iNLh2Ak3rsNbp1lEXT3Jn2XFtZDR56euf4A70kMHvBLF6MXsR7Ozhx0L1yZ7B6cA0bEpunn3VgDw55I3+rMDUUpHunsnPhH5gDL9O58Owj7TNBhmOHTZLTMsgKPlT022Q5S2USGGPYI6PP5kKVbpod5TU/Plne4noOidezY4ul69o1Q3dRU9/xMRByx2959qn4RjTXC9J/A8KvcUBSlcYjth2A6Z4bzyblw+9V/kDsM0zjmETP1HWwPi3Zu2IxpZrTbF/JSj68/eEzfpQX02OdEz5Segf3LKFP4Dn9htvsw1ga604YYmcHTpF5MTf6eJHX8+ES/yhYv9Qkxn+qYFEUxC0OyP6BCIfv5TAPahi/p9rp+IHAYC3FikfEOPUuwtBGcpW3j1/TG5dK6KGIvNY644W5fQD2ftPTMuAfyQuBfWGU7oAuGJTGHzO8vOU7RF6I1uW7cWMMPQfJSn6IooDxfrMNonYOKTAGNcqfrBbH9oMNwcyJwjT748ItpniGnQc1xWWbCeMUOhxqxUZqed+zx9Iy269roJU2Xr7eyCfc921nGsS7EAT1m/PFnuMl+wMlgTO2A7w9XlC+AKW/SLsCiNakaUKyeb5c+M7BbHAXHWbsg9gw7DFPemh6tdy4nRZkh/s6EYcRNc7TxxXJ4SYum2NH5mMqWzLGNAN2b4L5nRoefzxwy1hTv2zYNGpHLI4Agtuf3ivxSXxFIdoNhFMX2i3dSK/tuk81KMVmG7dyyGf3mkzIc0752Wthp+EEsdxi2eycx3u4PH0ewbKY1utmm9xg09rhpzhuxKT9PxjmtdIZvDtKt7qF0jnlokCGg/oO4gQ3mnGd9kIjpUamvsAeL4E4uRVHITtrmxZjWmNz1Kjvp46zpyHukzGHQdix2MjBsU7dV2u6jE4cRtzN2Futhg9q9TWvEss+hGdpUukkrgWFdoDl4Cu57dp/H0zd+X+5l99dlZPmyNGJ6uLeUP6Z1SZr+ZoBi0B1disKwa4+JHZKTAIAyu3MY1CkfvDAPE0hTwttAl8feiyL6tMf0bfQq0ANGvLrPDRKlcrH3eY3jdA/Ob0p4ne5In4f3PUc/UHmInSe/v4d5p58ggmClvvwpbyd27Z4cJoF2nymKUgC2epCY1lVi3zAh2hOMHQbVw6GXAdiIGUhmoEDETemWxLNhBt/SngYep1X9J1QCk6dhKGMB+55D5SHfITOg3vc3vUFOUfZuSjTh6wl3YyiKoiNayXig9CQYETdPgx14aoKn7QJgOkzPOwLIyXFHdE6fkdozMbUjmS6O/GEtERtbv0GNtaFu6zyfiKJxmhifVeJkfHQIPktRFHUYZMzeiSDcqOEmb3gXQFhHGvnzLb7zA/r81Jckzg/Y+hDCXVfyrWvg/soyjvADdoqiFIw6DGoECzF0XHs7rrkj2gYKdgEw40nHmSP/9mX6K3p5CYx0ODM4K9vN+tj98Zj6bIQ1FEUpEHUYxY0S/MaNtjTyBga8NCXiN+UtarhiuhnoOfTNqYqiqMP4bGzvc5DqK4qiFIo6DEVRFEUdhqIoiqKow1AURVGWRjNRvMNY2Z2N6vjIEA85VxRFUUxlk493Xh8fSxvj4zumc+E96U1zJTozsvZG40C4xXR/crLd+iSlNDYCrF1KdN2woPaFo/NBqvpKcEVRvjamfc6choPZXzeydSHyHIY/y9X7If7DHDyPGs+xJj18sSKP51iK5brNU08PrTfspEzvZraX/vXvZAw4JX1wT/ndoK9vp+mg5rc2t3WSvxa9z88F7swuMnvoBuf5DuM1HPljx4FfdU4eyfZAOvTDh2mKMo5m+CaCueHAWQnXWt6YdaqVpyvXM+0zuQ6e1+uop1Pyqe1l11CUIuepuCCxKNzs/d5NIW90ZvO1yUbEbLx0fvCpo9xGDZ9405sZUd/j4IwjWBKiMhcy6qZ9yfUy6Lqb2APvbTrE11Q/wHojpJeD8abBRcNnphvUW3/J5+WDpB09s/vKHNRQZ1UoChipXKie7d2NDXj9l89dW/9xrMXtIo2n5Q7Dti+YpxFlHEsxHhSEz3GjVWOgJ8g40E2kCMSMXvhLDz1s/x7oEkBvJDfeosiBCJbj2AD2HLS9+8ucVC7jWnFJbvDwKyWHOieAoviTT23vvpCNSCYOThvlDsObMw0jf1bzxyUhV49/Pw+NdG0cBZwUdh702Vj33l1f6yw0UIfp4QznBzPeYC1g1jmMHAh4f+0nTKYzpA30TPf68wfNO13SK3TjgFl7W5vLOhXlq+DejF3ZmnFYWcY5/52b9LlD5U3gMFza5U4KG3FHBEtCFM0yI4/6HGbwhDRxllPZwuUmXxP3G6gkJtB0Rz79jmdLZsQcI4ocpuq5+7Uj+UXLew5hbfDG4RyxfRowxaOWYqK1r2cwFAUHoGHobxnaP/wzBo9WwA/u0WAiEwucRu2XTLV620+PmA1Ih2Dk377ADe34xY+cw4ZpMRbrTjPepnPhjDxzjDhycJP8gG7niv8ccpDRt8xRC9NtnhbVzNPXtStKARk1tn8YGnZnveFtZmEocBjVPZaWMHp34dIDMr71A7DAW9KbqmvfABPvyOgxPaK0she61um6netpD8B4Tkq2xZjWYLGu6EFE6qeY0XfnqCSDj4A2nJqI+VA2Yps8alEUJb9+hGdLsvUl510VgOxDyU0PxQ4DGnBu1HCKvxiHI/Y43ThRxMn1OKXGMTRg0EkNQuWkXmIHz0BXZrxN75b3PuoHkl0X6bqyrcKULvq7uzKlrzRfwzpdfK0YF7ksCfQURctKoIT+eTuePHsC7B+GxkybLuyfAodR3iRRzgiPKCVoSLg7DwKbMaZ5HnYagyes27kOalJDGu+x3me6bPws/lmmxR0jxvSffD3y7rL91uUN3oPo4N8L0rb4i4Gp7rqsxpXNFOWr8FOCHNu+ABWZ/DH1Q24/sf3DLO8KHAaqdXvYGJaEqM4PjD2L/FNLGmZhkNjoOzbe1T24OKzr9Gz8Gnzoxq7d0tqY8Q7P2ehRvwevEzgbNn3QnyRYw9E+ywDZOvEgKaRdqoT7LXiTgtPz+zWF4LZK54hil7aK13VBafGataMiZ+dQJWY87hn0fHN9ajt6ZXYM27/ZKTePkjl0Ab546OEVila5oQfOY+0Gp0P85+H5hOk9YD2f9kW4D+H/vMB4m8ZJSBc4RuCsIhr7ei809LtQz/bvP/vhpUm93kOBtdk9XK5TFDmFOgyPz3X8zQs+Yjr2wPYvM5X4hTsMwtSPnMci8f5TsO4FZm4D44abMbb3yGZpw2jE0xU5q8pmYPfQ5bvudOO9GENd3DDHkZaNcHaAy1hA1zm6/KEHLSOu5/dACngatfCyAv7OKErxQBsCxlx7diqX77JZ2U8q239M5nAE/0jCroSBO+vexQkNeP8RlZic3rvxBnuBzcKQSlhAF2h2b4MGcd7d5KmlGtO6FOgCxwh2Domb1dEUpxwJ+yAY6FB9h4F3WeUPBS7mXbtzVXwZQ42S8jcYs7Txxvr4+EYJ8VE70H9OKlshh7G8l9hOoCS0esZTIakxrR+C5vn1Xz7rlUpjyMhyTxo2pu5Y3Q8bplbw4TtyJtnW23/ILcKfHwp1V0/yjrLDus2zHHQQPTLaY+pvaNSvKIVj6ieUxQCHIWlQLW0w48nTIYyNgUNYWneGqXYIr2dm3cG3aYY57GG791l1yTHmFuELdXMdKmU7d8n84Mebwxpjh69v2mNw9KIoypeHHoyuHv5KZe0q5DAwtn1DBovXznDkz41b6wJkLqcBA3ZDmlDXTMs4GrNF4KZ6gHUJoGsj/NRkxhqlbN2E65/kj6IoOtM7axffLO9iIyaPhHFTG28HzUW3tBhlfxdS98nR4xjvaPopgF6MBFeXdJTk5NnLUBRFmX2mt+0+csNNRBAc+a/dyo1n83KSVkba4+Nn31hFURR1GPTwy3yUL1/3BiqKoqjDUBRFURR1GIqiKIr8PVUNR7l3qQ5DURRFCb1o1b1Drrz7B3UYiqIoXwz3Hrzl6ZR8ZtXqulEO5V344B7G1Pb/mhI/ZiebvqIoirI04uOd18fH0sZvKK9/xDl5GUbzOOM707f9yXZ8hncaG0QOi2gcpXD4fuSsMr7aU5azI9dRFOULYponvtNAdhjMIsr2tgvTvnAZxiyvkjCdS7pIPnFunXs65DRMW7gIOBbVHcV6o2fBO/HxjTTDp3SiMaXx0bF2+cEXfj2gCCLsjGu7Mg3E6nF23JdNUdSQ925prLSzUTG9kqj3OVq2Ty8d9e0wtxcj4UtCyba2zwPBa5SUd7L3MNBIVpZtwIzDGW/ZIoCn4zfHETSm9Q8OMmkc83WGs6mPv5J7ecdp4nUyXdO7yaM+Cu4vWGdL51V8Nczi+s8qpRStCeb55AYObIlPLrvTgCbPDnN7IRtDQHbDnR/odZS718lc0Hs1sJhZnUyH0jKOEsg4wOfCLxSbzxBzvVDGYfr5jEo0gye5s2oe56PZuRLcX4983uhKjln0+3SZW84lsMp2YgYPSekNQ0eHm1O8qq8dV/7mY9uX1CwuRqt3l+40pIPVqnvjv+/+reA5DFgfw+kMlXfM8BlkGjjjmLYI073h42B5L4Pr4p5KfsPYV3ZTdZle9I3uT24RGdNDujyl5NiefPRj/Mq1CV+TZ245OaxLnl4PH4sbnrS8PfsoWkVZiIp6HT/Zt/SZ3rJRzK607v9t1/axw4BGCjRMxOkQMG7BP8LqrjuvfSGexBbKcPBnzQ6NjQ3ritNQYOBBNjft/o6+J/8QzBDxMa0T+XD4uueY+TrzytwEZc9XNpSqgEl/unngZ6DMNDLAtC5+M5r1Ulqu4/bEBbzQYeAyyDoR3s1kuzwdgkamcznF0z06TUlW4GZcB3UtGZmFWNIroF1VwleOb4R1eyylg00m50C3JM0tkM0RaCgVDgTMCA+Hh46Z8QrGywJWdiTncUcZ83nwBcBnMStKQZi16+zB0cLE+GgKuGQ/g+z16jFyGNx4skiSFoBnNviT7YKRcHARjSP/fEn0SkaEpWEe1KgWGsUH0qQyjNCbnwNdcnSb0iaTy+AG9/LmFpoh3n+Q90NIk+hcCA39XoouiGAQixH1ImaaumcHz+4PoLzx9Y2BoojK3q8z/b3QvB8byef+2NaF3F4jh2F7bisnKgcAYWZUGKsn4UZ22kXXptTHXbSfrj14Er4r5YDOz1S+MgsDGo7ENVvCn6/u0frwTgaczfG14t8N2HH1Ol6v1Ll1bphuprkinUvSw1lc+NUEeBSsonxVcPCKqwYCbJ9t44UZ9FSb3bkMOwxTO8AeZ/AYNvjMcHvHIX4Gwm9wMt2I/RyDjAnpMKp7gsbuILHxd9LLniHUDn09Wj/dh9l2W0UvbJ3ol8zus3DCnmU9H1Q+AyN5Z51cWNny7u93nMWFf090VJSiAcFcXgCbMnLYWf5eKtvZg0/sOKjnDBzGvBc1j9LgESJrnjhRTm1fsGcZ0MTGiV23Q1zvNq0zWQ8CYHuPnhE9ljaZsq8TZ3OwQQYCAQb/3WDHbPFsdIjt3ftOCjf684dtAsgJpb5XvKbrRRbL8i4FlG/anx+wmIUhs2OuanGev1b1FzbMDjkOqjhxh+EMAvY0Qo9n+k/sIsiTyTwd7oHwZzO4QbRZR7+WN7BedU/+hYp+0LrFX3pwf8E6QaMq+ke0Xjz/HDtUvt6hLIWlHUN2+EIlouB5koy1VC5ou2HrTNiY5yiKpYifqB9+vlbzfDyhlOym3J5lHzk9ePEmoXI9Zo/rB5MOwyzxXgA04u3z0Nxt7rkqm+H6NNLz6VzJRsfSTWiez1iX9xjKo2jTvqZ1Z8wOgG7nWpyl2KHskX+6H0AT95dwypxlOiNdY7pmt4AdT+UNwcNLPx9FMUubaWOu5aOsszfGOaQDsJGzNWOH0bkReRpH2AlYMsTuAshAhg3K4JnpAV1q2k5r6rpIekHwLMLKLtCVG1G8Zxr3H3xnite5K43eBZob4t+raBueHMp+nC7QAz2m3DCd27Geu1dFATZrKAqgsoNZdgjtTJjFkXMO3DlNzziap85hkPHkXg3jIsTb4DZb91mgCQw8HdZktbQPR8Cm9zhFN38jarv34/UG1/mYn2bnVhZFyLfJip9OD+uCXWw54X+nScsO8aYCRfm9YFtX5CzGRJg0p1Fu/JLM2d4T9jQhqnvBepypH4ee4hV4OGbUcqklmvqRPCVrX+TVZALrBbq1g1yNpvT+SndYSMp0ovvbOP6kFH/9V0o+i6PftbFQNIux7ZvEduQYOtKzbmvuuBQ9/Z+5xfV/9t/EnsYH75aZWhYy754O6eJa2se2WM5Hyfwg6F25bmXr402m/kum9dro4zszKBDIeo9tL4d6f2WXdMVpb/G7XxRFycr8wuA/L1bifz1X2frD/8ZOA0emM0eIlW15WsQN24ce4rLNi1/TMhOizfiY4W6cJPPD1wmsd7SRz/f344e205nasX+Pw8Y73+yGHOwbm/yIya6jKEqhzqK8svG//u4/WHmd+3u17T8vxa//rrz1h/9T2fpjUtkOU975DfU9aoaIqQyfk0qEKUffxsSAxkFIQ2keY1oC3OcoiqL878Vy/G//zt9f/sdzc3PtvwLVOJ7+QqpQzQAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/btn_big_purchasegmx.86c08dee.svg\";","export default __webpack_public_path__ + \"static/media/buy_gmx_bond.67f59201.svg\";","export default __webpack_public_path__ + \"static/media/buy_transfer_eth.fd9264bc.svg\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/cross.4f70d802.svg\";","export default __webpack_public_path__ + \"static/media/dlp.348f3600.png\";","export default __webpack_public_path__ + \"static/media/flag_en.ad3aa4f8.svg\";","export default __webpack_public_path__ + \"static/media/flag_es.284fc0d7.svg\";","export default __webpack_public_path__ + \"static/media/flag_fr.d7acb86a.svg\";","export default __webpack_public_path__ + \"static/media/flag_ja.fdbc8bce.svg\";","export default __webpack_public_path__ + \"static/media/flag_ko.e814d54a.svg\";","export default __webpack_public_path__ + \"static/media/flag_ru.c789ea20.svg\";","export default __webpack_public_path__ + \"static/media/flag_zh.814b7a34.svg\";","export default __webpack_public_path__ + \"static/media/glp_icon.ef02d046.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABPCAQAAAC3gKgqAAADyUlEQVR4Ae3BfWhVdQDH4e/Z3Uvb2lZukS5sOEI3UHS95xbBqg2iQmcvpCRZZClYkBoWaAvpD0ncHxVCFjE0iyE6eyFqK6K3RRTaiy1ptaXljDnL29h2t7v7iZGeTuuen9vd7r3nynke+Xw+n8/n800EWToXUMKrVCnVkcELwPsUKbWxlH5GbcZS6mI23/OPk9QqVZHNTv7VxiVKTawkhFMDAaUeKujkv4LUKdWQTzP/9zWlSi2sI0w0O8hU6qCSbqIbYLlSBYW04O4w5UoFWNQTwWQ3OfI+aujFbIhV8jqKaePsuqiQlxGggfHZT768iyX8xfiMsF5eRSnfMn7dVMmLyOJlJqaFafIe7mOQiYnwFJa8hXl0MHG91MhLyKWJ2LRRLO/gEYaJ1TYC8gau5iixC7JIXsAFvI1ZK3sxOcAsJR9PEMGki/mUcBCTF8lUcnEDv2MyxCpJoo4g7vpZqmTiIj7EbDc5kkSABkzaKVOykMYzmP1AuU6jmM8x2UW2koNb+AOTAe6VA7WcxN0QDysZmMkXmO0gUw5YbMakkwVKNNJ5DrODzNIYFPEBJs3kKbG4iz5MgixWFFzPcdyFeUyJxGV8h9lWAoqKxxnB3TEWKlE4j0bMPmOGbAQIyEYBb2DSQqESg/sZxKSXm+XAA6yWA1fQhbsIm5QIzOMnzOqxZKOCI3RzrRxYzRDuTnCj4o3z2YNZC4Wykc9+Rr3LNNnI4TVMPmGG4otHCWNyjIVyYB1hRkXYKAfKOYzJs6QpfriGXzEJs1YOVNLNGT1Uy4HlDODuFLcrXriQdzDbR55sFNKK00dcLBtZvITJV5QoPthIBJOfmS8bFk8z1hbSZKOUbzDZTqamHtX0YBLiQTlQQy9j/cmtcuAO+nDXzzJNNabzMWaNZMtGMW1E8yUzZSOdBkzaKdNUIo0tmB1itmwE2Iab58mQjWLaMNlJtqYOt3EKkyB3yoHFBHHTx91yoJZe3IV4SONi6awo0V5dLpNf1KiQLI1C6bpHZXJ3SIusDp2GpXo9qXS56VKddUCTRwbbmWqvkCUbRbRiso88TR7L6GeqDbJCDlRxHHdh1mqymEM78dDBXDmwgRHc/cZ1mgyy2UW8NJErGwW8icl7FCp2rCREvAyzRg5cyRHcRdikWLGATuLpKFfJgTUM4+4ENykW5NNMvL1FgWzk0oTJp0zXxLGeMPE2wgY5MJcfMdlKQBNDJT0kQi/VcmAFIdz1s0Qu0hVdjpoV0fhZik1Al2JZ6IzXVag5iii6dOXKq7Dk8/l8Pp/Pd676GwYUP6Kwt1/bAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/gmx-logo-final-white.b7833ed6.png\";","export default __webpack_public_path__ + \"static/media/gmx-logo-final.0b59e423.png\";","export default __webpack_public_path__ + \"static/media/gmx-logo-glow.83c5aea5.png\";","export default __webpack_public_path__ + \"static/media/gmx_logo.851636bc.svg\";","export default __webpack_public_path__ + \"static/media/graphite-01.6f3526cd.png\";","export default __webpack_public_path__ + \"static/media/ic-communityproject.d195d704.svg\";","export default __webpack_public_path__ + \"static/media/ic_aave_24.4fc56820.svg\";","export default __webpack_public_path__ + \"static/media/ic_aave_30.47eb886f.svg\";","export default __webpack_public_path__ + \"static/media/ic_aave_40.abd927d8.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_hover_16.d779b479.svg\";","export default __webpack_public_path__ + \"static/media/ic_arrowleft16.9d2319ed.svg\";","export default __webpack_public_path__ + \"static/media/ic_arrowright16.25e0dd13.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_16.90aca01d.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_24.be4891c9.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_96.b6255c50.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_24.43583fc4.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_30.403cd87e.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_40.ba220dde.svg\";","export default __webpack_public_path__ + \"static/media/ic_binance.60a43ade.svg\";","export default __webpack_public_path__ + \"static/media/ic_binance_logo.46794a16.svg\";","export default __webpack_public_path__ + \"static/media/ic_bsc.8de996f1.svg\";","export default __webpack_public_path__ + \"static/media/ic_bsc_96.79853d5a.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc.b_24.a8f56d16.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc.b_40.1560513c.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc_24.f992927a.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc_40.1560513c.svg\";","export default __webpack_public_path__ + \"static/media/ic_busd_24.2432ce58.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAsCAYAAAAq/ZsdAAAFI0lEQVR4Ac1ZA5AsSRCd2FkMvm2cbdu2bdu2bdt3obN9X6tGrW3vxv6x509e5dwtukZdXYt5EW9ZNf1eZFZmVbVJL8yyfJpZlT2UYIw4VzrVlC3IJXINChNhriLXZJOh56gon4Ahbw5RHs8SO+JRwrmmbEMuIfuYiRzgNYNzcK4pG5Gryk9j+vCkGs7JGgOiqYdjj7MEzj/OErrfCHHuBBiS9slR5XpMpXTEMZtf037hcdYgiPAEe3gHU7bghBkw43hrsNWoGZw77iLNqnqWWVW+yVElNR1xDG2mZ51gCRxg1BDOHT8nkrQFFfgLpVvP+rmorRUe6ekJPtrTU3P6Lt7PDRh6Ydy85CjSlVRkxKxIusr2TrXVMBq3NnVtOGq2b5An1TBdxyfFiPwRFbmep/cc1FCvMfRgTzfY/yqLzP6iehJTTVEW5SqyRA3FU0zUEP7dUkRiW13W0X3EIu/Tx9kCDyTjsZbABWNvRi1ckUuUOr0phpxdTuDGzg742+MG4vdrDLWEQvG/v9DfB4c01ofiG9WysiWmCUF5+cxcVaniMYNrxhGNgl6scnpg578anbsfMHgKjcj+oznmfcesyKuoyCC/GT784vDBwnfqk66hY63Bv+g6WiFuRpVf5dyrwT8eD/DCR/3fWBeDZauaYaMHW1IVBwfl9SLV7HTeUylGJxnQ5Cq3B9a4fEA8G6CSeu4Pac2cQP7jrNXVsOPpPelK+Ff8JbyoaBoVOMBbzW6iRYAFVjhrURmsLGxFwRre0xiDy6q1fzuAeKGgSIVDNvKkK+Uq19rKJdKLQzsAHmI5ZmEpIbBVcReK1c0tV3fB8kebMvUnB5rS1W+ouBgl8PKk5iZg8fWAH0Vy07a6DPbbySFsCrc193JFh+k9qVDkBHixnUmxNNx6VTesvL8ZRYuZov2mnREqnHYsmv0A3/ZriwHLw0kILOuI3o2rioUi6WFtqLKJ8Pv1LtCLCk9qYzP/qYZdj+7Xu4H9KjHdiHIP00S5iUVgb+KCL3rjJVkXvNHkppaXtsCOp/bqPmIcawudwDRS5S9RMxutaxsWdHZFDN7tikGxEzKiLwQJhrYhPbDpg208Z6YWxpD0i4ihXMojSChB2JC5x1ti8OfgUFNNxEvt2jl7Egcs+LSexxBoduc0Ql4RQxsVtukuy9hUGWAkNWMOI0GYsqacwxATJbMitxk1YysqgwOJl6fX4BZIA/ydHTPr92o4YoEPhXKvJUy5P40amlZUmZBij7XEv6dMQW80s6Gt3u3kv1CxhT4wIUQu4Dcr7dCIbfYPVTAszYnEIsAAK6PGzFEkPNSLeOkYMvS3ETP2deWwB3GwZriPEGw0dyODsPDdeqNXXiv+v2OTndxbnj9rYC/iRBHxMs2PxAqHnLu6DnY5vk/sDo8K/I23uVpKCRxJwsNCvhvgiUxyM5uXdMKitxoMmUHiBYspDlWdkavIMs8WaObq6gRBuAnFNYELvYVJQexD+HeMJptmx5Eobc6tMPeLWjhyrk/IEHNiVd5BU3qiNefvGq6ewy7+Y6kJPNhtWdIFtnVlsNFDicdwYUOIPEJ2zFXjrx8bKMO5RC5KGqFfqwzdyyE3+bQN8ktVmPldNWxyeyvsv71T2AxS6D4PK0q6D79+d22N/vyRqIBYjionAvohf6d7wIuXReJGkGcuGF8zqMWYCzZKlqBTTIg4UcNQdISBR2GBF1rCxGejhjF/S4cVhj9aYlHBZ/Lf1/Gn4QFxc+PIdK9a/gVaRiAcqhHzNAAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/ic_cash.21569a1d.svg\";","export default __webpack_public_path__ + \"static/media/ic_coingecko_hover_16.ef20d202.svg\";","export default __webpack_public_path__ + \"static/media/ic_dai_24.bafa9da6.svg\";","export default __webpack_public_path__ + \"static/media/ic_dai_40.6f901476.svg\";","export default __webpack_public_path__ + \"static/media/ic_eth_24.6b1d8a1d.svg\";","export default __webpack_public_path__ + \"static/media/ic_eth_40.5e255508.svg\";","export default __webpack_public_path__ + \"static/media/ic_frax_24.7349c478.svg\";","export default __webpack_public_path__ + \"static/media/ic_frax_40.1e127166.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_40_.087335c1.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_custom_.11dd75db.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx.bf8fb0b1.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_24.2b59d7e0.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_30.375de394.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_40_.8cd483b1.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_64.f4caeaad.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_arbitrum.59f04e87.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_avax.e9ef7077.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_big.a0a74216.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_custom_.fd35b66a.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_footer_.e7821eb2.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_footer_org.ff878c31.svg\";","export default __webpack_public_path__ + \"static/media/ic_hop.0f4a98a0.svg\";","export default __webpack_public_path__ + \"static/media/ic_info.f334ee0a.svg\";","export default __webpack_public_path__ + \"static/media/ic_link.e_40.4bb3a048.svg\";","export default __webpack_public_path__ + \"static/media/ic_link_24.0d641e52.svg\";","export default __webpack_public_path__ + \"static/media/ic_link_40.4bb3a048.svg\";","export default __webpack_public_path__ + \"static/media/ic_matic_24.4352380c.svg\";","export default __webpack_public_path__ + \"static/media/ic_matic_40.c7ad5028.svg\";","export default __webpack_public_path__ + \"static/media/ic_menu_dots.ba19dad8.svg\";","export default __webpack_public_path__ + \"static/media/ic_metamask_hover_16.aa3dce32.svg\";","export default __webpack_public_path__ + \"static/media/ic_mim_24.b6a1708c.svg\";","export default __webpack_public_path__ + \"static/media/ic_mim_40.42c8b575.svg\";","export default __webpack_public_path__ + \"static/media/ic_multiswap.e577f4fa.svg\";","export default __webpack_public_path__ + \"static/media/ic_olympus.0b15337e.svg\";","export default __webpack_public_path__ + \"static/media/ic_selector_dropdowns.aaf0b8f0.svg\";","export default __webpack_public_path__ + \"static/media/ic_settings_24.6f286878.svg\";","export default __webpack_public_path__ + \"static/media/ic_sign in_16.b6f5b1d9.svg\";","export default __webpack_public_path__ + \"static/media/ic_stats_big.4a4ebfb7.svg\";","export default __webpack_public_path__ + \"static/media/ic_synapse.8b3e94cb.svg\";","export default __webpack_public_path__ + \"static/media/ic_tether_24.a7c88dcd.svg\";","export default __webpack_public_path__ + \"static/media/ic_tokens.42432da7.svg\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/ic_transfer_avax.88f088a6.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_24.47e903f7.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_40.efe1f12f.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc.e_24.0952740b.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc.e_40.27f415ba.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc_24.0952740b.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc_40.27f415ba.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdt_24.5ab8778d.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdt_40.e357d24a.svg\";","export default __webpack_public_path__ + \"static/media/ic_wavax_24.43583fc4.svg\";","export default __webpack_public_path__ + \"static/media/ic_wavax_40.ba36eda4.svg\";","export default __webpack_public_path__ + \"static/media/ic_wbtc_24.5dda0ca3.svg\";","export default __webpack_public_path__ + \"static/media/ic_wbtc_40.8330ef8d.svg\";","export default __webpack_public_path__ + \"static/media/ic_weth_24.bc395894.svg\";","export default __webpack_public_path__ + \"static/media/ic_weth_40.334ca16a.svg\";","export default __webpack_public_path__ + \"static/media/lg_arbitrum.bdf133fe.svg\";","export default __webpack_public_path__ + \"static/media/logo_GMX_.b956aa96.svg\";","export default __webpack_public_path__ + \"static/media/logo_GMX_org.17e8891c.svg\";","export default __webpack_public_path__ + \"static/media/logo_GMX_small_.f593fa5c.svg\";","export default __webpack_public_path__ + \"static/media/metamask-text.2f9c2df2.svg\";","export default __webpack_public_path__ + \"static/media/page-not-found.bb90d073.svg\";","export default __webpack_public_path__ + \"static/media/trading.7ea1604c.jpg\";","export default __webpack_public_path__ + \"static/media/wallet-connect-text.78166b41.svg\";","export default __webpack_public_path__ + \"static/media/wave-01.3c9bce1e.png\";","export default __webpack_public_path__ + \"static/media/wave-02.4a56e8c7.png\";","var map = {\n\t\"./de/messages.po\": [\n\t\t836,\n\t\t4\n\t],\n\t\"./en/messages.po\": [\n\t\t837,\n\t\t5\n\t],\n\t\"./es/messages.po\": [\n\t\t838,\n\t\t6\n\t],\n\t\"./fr/messages.po\": [\n\t\t839,\n\t\t7\n\t],\n\t\"./ja/messages.po\": [\n\t\t840,\n\t\t8\n\t],\n\t\"./ko/messages.po\": [\n\t\t841,\n\t\t9\n\t],\n\t\"./pseudo/messages.po\": [\n\t\t842,\n\t\t10\n\t],\n\t\"./ru/messages.po\": [\n\t\t843,\n\t\t11\n\t],\n\t\"./zh/messages.po\": [\n\t\t844,\n\t\t12\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 817;\nmodule.exports = webpackAsyncContext;","import { ethers } from \"ethers\";\nimport { isDevelopment } from \"lib/legacy\";\n\nconst { parseEther } = ethers.utils;\n\nexport const MAINNET = 56;\nexport const TESTNET = 97;\nexport const ARBITRUM_TESTNET = 421611;\nexport const ARBITRUM = 42161;\nexport const POLYGON = 137;\n\n// TODO take it from web3\nexport const DEFAULT_CHAIN_ID = POLYGON;\nexport const CHAIN_ID = DEFAULT_CHAIN_ID;\n\n// export const SUPPORTED_CHAIN_IDS = [ARBITRUM];\nexport const SUPPORTED_CHAIN_IDS = [POLYGON];\n\nif (isDevelopment()) {\n  SUPPORTED_CHAIN_IDS.push(POLYGON);\n}\n\nexport const IS_NETWORK_DISABLED = {\n  [ARBITRUM]: true,\n  [MAINNET]: true,\n  [TESTNET]: true,\n  [POLYGON]: true,\n};\n\nexport const CHAIN_NAMES_MAP = {\n  [MAINNET]: \"BSC\",\n  [TESTNET]: \"BSC Testnet\",\n  [ARBITRUM_TESTNET]: \"ArbRinkeby\",\n  [ARBITRUM]: \"Arbitrum\",\n  [POLYGON]: \"Polygon\",\n};\n\nexport const GAS_PRICE_ADJUSTMENT_MAP = {\n  [ARBITRUM]: \"0\",\n  [POLYGON]: \"3000000000\", // 3 gwei\n};\n\nexport const MAX_GAS_PRICE_MAP = {\n  [POLYGON]: \"200000000000\", // 200 gwei\n};\n\nexport const HIGH_EXECUTION_FEES_MAP = {\n  [ARBITRUM]: 3, // 3 USD\n  [POLYGON]: 3, // 3 USD\n};\n\nconst constants = {\n  [MAINNET]: {\n    nativeTokenSymbol: \"BNB\",\n    defaultCollateralSymbol: \"BUSD\",\n    defaultFlagOrdersEnabled: false,\n    positionReaderPropsLength: 8,\n    v2: false,\n  },\n\n  [TESTNET]: {\n    nativeTokenSymbol: \"BNB\",\n    defaultCollateralSymbol: \"BUSD\",\n    defaultFlagOrdersEnabled: true,\n    positionReaderPropsLength: 8,\n    v2: false,\n  },\n\n  [ARBITRUM_TESTNET]: {\n    nativeTokenSymbol: \"ETH\",\n    defaultCollateralSymbol: \"USDC\",\n    defaultFlagOrdersEnabled: false,\n    positionReaderPropsLength: 9,\n    v2: true,\n\n    SWAP_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0003\"),\n    INCREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0003\"),\n    // contract requires that execution fee be strictly greater than instead of gte\n    DECREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.000300001\"),\n  },\n\n  [ARBITRUM]: {\n    nativeTokenSymbol: \"ETH\",\n    wrappedTokenSymbol: \"WETH\",\n    defaultCollateralSymbol: \"USDC\",\n    defaultFlagOrdersEnabled: false,\n    positionReaderPropsLength: 9,\n    v2: true,\n\n    SWAP_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0003\"),\n    INCREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0003\"),\n    // contract requires that execution fee be strictly greater than instead of gte\n    DECREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.000300001\"),\n  },\n  [POLYGON]: {\n    nativeTokenSymbol: \"MATIC\",\n    wrappedTokenSymbol: \"WMATIC\",\n    defaultCollateralSymbol: \"USDC\",\n    defaultFlagOrdersEnabled: true,\n    positionReaderPropsLength: 9,\n    v2: true,\n\n    SWAP_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.01\"),\n    INCREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.01\"),\n    // contract requires that execution fee be strictly greater than instead of gte\n    DECREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0100001\"),\n  },\n};\n\nconst ALCHEMY_WHITELISTED_DOMAINS = [\"gmx.io\", \"app.gmx.io\"];\n\nexport const ARBITRUM_RPC_PROVIDERS = [getDefaultArbitrumRpcUrl()];\nexport const POLYGON_RPC_PROVIDERS = [\"https://polygon-rpc.com/\"]; // BSC MAINNET\n\n// BSC TESTNET\n// const RPC_PROVIDERS = [\n//   \"https://data-seed-prebsc-1-s1.binance.org:8545\",\n//   \"https://data-seed-prebsc-2-s1.binance.org:8545\",\n//   \"https://data-seed-prebsc-1-s2.binance.org:8545\",\n//   \"https://data-seed-prebsc-2-s2.binance.org:8545\",\n//   \"https://data-seed-prebsc-1-s3.binance.org:8545\",\n//   \"https://data-seed-prebsc-2-s3.binance.org:8545\"\n// ]\n\nexport const BSC_RPC_PROVIDERS = [\n  \"https://bsc-dataseed.binance.org\",\n  \"https://bsc-dataseed1.defibit.io\",\n  \"https://bsc-dataseed1.ninicoin.io\",\n  \"https://bsc-dataseed2.defibit.io\",\n  \"https://bsc-dataseed3.defibit.io\",\n  \"https://bsc-dataseed4.defibit.io\",\n  \"https://bsc-dataseed2.ninicoin.io\",\n  \"https://bsc-dataseed3.ninicoin.io\",\n  \"https://bsc-dataseed4.ninicoin.io\",\n  \"https://bsc-dataseed1.binance.org\",\n  \"https://bsc-dataseed2.binance.org\",\n  \"https://bsc-dataseed3.binance.org\",\n  \"https://bsc-dataseed4.binance.org\",\n];\n\nexport const RPC_PROVIDERS = {\n  [MAINNET]: BSC_RPC_PROVIDERS,\n  [ARBITRUM]: ARBITRUM_RPC_PROVIDERS,\n  [POLYGON]: POLYGON_RPC_PROVIDERS,\n};\n\nexport const FALLBACK_PROVIDERS = {\n  [ARBITRUM]: [getAlchemyHttpUrl()],\n  [POLYGON]: [\"https://rpc-mainnet.maticvigil.com/v1/dc3b0e3e09e78528c801d1e74556f0e74412ff13\"],\n};\n\nexport const NETWORK_METADATA = {\n  [MAINNET]: {\n    chainId: \"0x\" + MAINNET.toString(16),\n    chainName: \"BSC\",\n    nativeCurrency: {\n      name: \"BNB\",\n      symbol: \"BNB\",\n      decimals: 18,\n    },\n    rpcUrls: BSC_RPC_PROVIDERS,\n    blockExplorerUrls: [\"https://bscscan.com\"],\n  },\n  [TESTNET]: {\n    chainId: \"0x\" + TESTNET.toString(16),\n    chainName: \"BSC Testnet\",\n    nativeCurrency: {\n      name: \"BNB\",\n      symbol: \"BNB\",\n      decimals: 18,\n    },\n    rpcUrls: [\"https://data-seed-prebsc-1-s1.binance.org:8545/\"],\n    blockExplorerUrls: [\"https://testnet.bscscan.com/\"],\n  },\n  [ARBITRUM_TESTNET]: {\n    chainId: \"0x\" + ARBITRUM_TESTNET.toString(16),\n    chainName: \"Arbitrum Testnet\",\n    nativeCurrency: {\n      name: \"ETH\",\n      symbol: \"ETH\",\n      decimals: 18,\n    },\n    rpcUrls: [\"https://rinkeby.arbitrum.io/rpc\"],\n    blockExplorerUrls: [\"https://rinkeby-explorer.arbitrum.io/\"],\n  },\n  [ARBITRUM]: {\n    chainId: \"0x\" + ARBITRUM.toString(16),\n    chainName: \"Arbitrum\",\n    nativeCurrency: {\n      name: \"ETH\",\n      symbol: \"ETH\",\n      decimals: 18,\n    },\n    rpcUrls: ARBITRUM_RPC_PROVIDERS,\n    blockExplorerUrls: [getExplorerUrl(ARBITRUM)],\n  },\n  \n  [POLYGON]: {\n    chainId: \"0x\" + POLYGON.toString(16),\n    chainName: \"Polygon\",\n    nativeCurrency: {\n      name: \"MATIC\",\n      symbol: \"MATIC\",\n      decimals: 18,\n    },\n    rpcUrls: POLYGON_RPC_PROVIDERS,\n    blockExplorerUrls: [getExplorerUrl(POLYGON)],\n  },\n};\n\nexport const getConstant = (chainId: number, key: string) => {\n  if (!constants[chainId]) {\n    throw new Error(`Unsupported chainId ${chainId}`);\n  }\n\n  if (!(key in constants[chainId])) {\n    throw new Error(`Key ${key} does not exist for chainId ${chainId}`);\n  }\n\n  return constants[chainId][key];\n};\n\nexport function getChainName(chainId: number) {\n  return CHAIN_NAMES_MAP[chainId];\n}\n\nexport function getDefaultArbitrumRpcUrl() {\n  return \"https://arb1.arbitrum.io/rpc\";\n}\n\nexport function getAlchemyHttpUrl() {\n  if (ALCHEMY_WHITELISTED_DOMAINS.includes(window.location.host)) {\n    return \"https://arb-mainnet.g.alchemy.com/v2/ha7CFsr1bx5ZItuR6VZBbhKozcKDY4LZ\";\n  }\n  return \"https://arb-mainnet.g.alchemy.com/v2/EmVYwUw0N2tXOuG0SZfe5Z04rzBsCbr2\";\n}\n\nexport function getAlchemyWsUrl() {\n  if (ALCHEMY_WHITELISTED_DOMAINS.includes(window.location.host)) {\n    return \"wss://arb-mainnet.g.alchemy.com/v2/ha7CFsr1bx5ZItuR6VZBbhKozcKDY4LZ\";\n  }\n  return \"wss://arb-mainnet.g.alchemy.com/v2/EmVYwUw0N2tXOuG0SZfe5Z04rzBsCbr2\";\n}\n\nexport function getExplorerUrl(chainId) {\n  if (chainId === 3) {\n    return \"https://ropsten.etherscan.io/\";\n  } else if (chainId === 42) {\n    return \"https://kovan.etherscan.io/\";\n  } else if (chainId === MAINNET) {\n    return \"https://bscscan.com/\";\n  } else if (chainId === TESTNET) {\n    return \"https://testnet.bscscan.com/\";\n  } else if (chainId === ARBITRUM_TESTNET) {\n    return \"https://testnet.arbiscan.io/\";\n  } else if (chainId === ARBITRUM) {\n    return \"https://arbiscan.io/\";\n  } else if (chainId === POLYGON) {\n    return \"https://polygonscan.com//\";\n  }\n  return \"https://etherscan.io/\";\n}\n\nexport function getHighExecutionFee(chainId) {\n  return HIGH_EXECUTION_FEES_MAP[chainId] || 3;\n}\n\nexport function isSupportedChain(chainId) {\n  return SUPPORTED_CHAIN_IDS.includes(chainId);\n}\n","import { ARBITRUM, ARBITRUM_TESTNET, MAINNET, TESTNET, POLYGON } from \"./chains\";\n\nexport const XGMT_EXCLUDED_ACCOUNTS = [\n  \"0x330eef6b9b1ea6edd620c825c9919dc8b611d5d5\",\n  \"0xd9b1c23411adbb984b1c4be515fafc47a12898b2\",\n  \"0xa633158288520807f91ccc98aa58e0ea43acb400\",\n  \"0xffd0a93b4362052a336a7b22494f1b77018dd34b\",\n];\n\nconst CONTRACTS = {\n  [MAINNET]: {\n    // bsc mainnet\n    Treasury: \"0xa44E7252a0C137748F523F112644042E5987FfC7\",\n    BUSD: \"0xe9e7cea3dedca5984780bafc599bd69add087d56\",\n    GMT: \"0x99e92123eB77Bc8f999316f622e5222498438784\",\n    Vault: \"0xc73A8DcAc88498FD4b4B1b2AaA37b0a2614Ff67B\",\n    Router: \"0xD46B23D042E976F8666F554E928e0Dc7478a8E1f\",\n    Reader: \"0x087A618fD25c92B61254DBe37b09E5E8065FeaE7\",\n    AmmFactory: \"0xBCfCcbde45cE874adCB698cC183deBcF17952812\",\n    AmmFactoryV2: \"0xcA143Ce32Fe78f1f7019d7d551a6402fC5350c73\",\n    OrderBook: \"0x1111111111111111111111111111111111111111\",\n    OrderBookReader: \"0x1111111111111111111111111111111111111111\",\n    GmxMigrator: \"0xDEF2af818514c1Ca1A9bBe2a4D45E28f260063f9\",\n    USDG: \"0x85E76cbf4893c1fbcB34dCF1239A91CE2A4CF5a7\",\n    NATIVE_TOKEN: \"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c\",\n    XGMT: \"0xe304ff0983922787Fd84BC9170CD21bF78B16B10\",\n    GMT_USDG_PAIR: \"0xa41e57459f09a126F358E118b693789d088eA8A0\",\n    XGMT_USDG_PAIR: \"0x0b622208fc0691C2486A3AE6B7C875b4A174b317\",\n    GMT_USDG_FARM: \"0x3E8B08876c791dC880ADC8f965A02e53Bb9C0422\",\n    XGMT_USDG_FARM: \"0x68D7ee2A16AB7c0Ee1D670BECd144166d2Ae0759\",\n    USDG_YIELD_TRACKER: \"0x0EF0Cf825B8e9F89A43FfD392664131cFB4cfA89\",\n    XGMT_YIELD_TRACKER: \"0x82A012A9b3003b18B6bCd6052cbbef7Fa4892e80\",\n    GMT_USDG_FARM_TRACKER_XGMT: \"0x08FAb024BEfcb6068847726b2eccEAd18b6c23Cd\",\n    GMT_USDG_FARM_TRACKER_NATIVE: \"0xd8E26637B34B2487Cad1f91808878a391134C5c2\",\n    XGMT_USDG_FARM_TRACKER_XGMT: \"0x026A02F7F26C1AFccb9Cba7C4df3Dc810F4e92e8\",\n    XGMT_USDG_FARM_TRACKER_NATIVE: \"0x22458CEbD14a9679b2880147d08CA1ce5aa40E84\",\n    AUTO: \"0xa184088a740c695E156F91f5cC086a06bb78b827\",\n    AUTO_USDG_PAIR: \"0x0523FD5C53ea5419B4DAF656BC1b157dDFE3ce50\",\n    AUTO_USDG_FARM: \"0xE6958298328D02051769282628a3b4178D0F3A47\",\n    AUTO_USDG_FARM_TRACKER_XGMT: \"0x093b8be41c1A30704De84a9521632f9a139c08bd\",\n    AUTO_USDG_FARM_TRACKER_NATIVE: \"0x23ed48E5dce3acC7704d0ce275B7b9a0e346b63A\",\n    GMT_GMX_IOU: \"0x47052469970C2484729875CC9E2dd2683fcE71fb\",\n    XGMT_GMX_IOU: \"0xeB3733DFe3b68C9d26898De2493A3Bb59FDb4A7B\",\n    GMT_USDG_GMX_IOU: \"0x481312655F81b5e249780A6a49735335BF6Ca7f4\",\n    XGMT_USDG_GMX_IOU: \"0x8095F1A92526C304623483018aA28cC6E62EB1e1\",\n  },\n  [TESTNET]: {\n    // bsc testnet\n    Vault: \"0x1B183979a5cd95FAF392c8002dbF0D5A1C687D9a\",\n    Router: \"0x10800f683aa564534497a5b67F45bE3556a955AB\",\n    Reader: \"0x98D4742F1B6a821bae672Cd8721283b91996E454\",\n    AmmFactory: \"0x6725f303b657a9451d8ba641348b6761a6cc7a17\",\n    AmmFactoryV2: \"0x1111111111111111111111111111111111111111\",\n    OrderBook: \"0x9afD7B4f0b58d65F6b2978D3581383a06b2ac4e9\",\n    OrderBookReader: \"0x0713562970D1A802Fa3FeB1D15F9809943982Ea9\",\n    GmxMigrator: \"0xDEF2af818514c1Ca1A9bBe2a4D45E28f260063f9\",\n    USDG: \"0x2D549bdBf810523fe9cd660cC35fE05f0FcAa028\",\n    GMT: \"0xedba0360a44f885ed390fad01aa34d00d2532817\",\n    NATIVE_TOKEN: \"0x612777Eea37a44F7a95E3B101C39e1E2695fa6C2\",\n    XGMT: \"0x28cba798eca1a3128ffd1b734afb93870f22e613\",\n    GMT_USDG_PAIR: \"0xe0b0a315746f51932de033ab27223d85114c6b85\",\n    XGMT_USDG_PAIR: \"0x0108de1eea192ce8448080c3d90a1560cf643fa0\",\n    GMT_USDG_FARM: \"0xbe3cB06CE03cA692b77902040479572Ba8D01b0B\",\n    XGMT_USDG_FARM: \"0x138E92195D4B99CE3618092D3F9FA830d9A69B4b\",\n    USDG_YIELD_TRACKER: \"0x62B49Bc3bF252a5DB26D88ccc7E61119e3179B4f\",\n    XGMT_YIELD_TRACKER: \"0x5F235A582e0993eE9466FeEb8F7B4682993a57d0\",\n    GMT_USDG_FARM_TRACKER_XGMT: \"0x4f8EE3aE1152422cbCaFACd4e3041ba2D859913C\",\n    GMT_USDG_FARM_TRACKER_NATIVE: \"0xd691B26E544Fe370f39A776964c991363aF72e56\",\n    XGMT_USDG_FARM_TRACKER_XGMT: \"0xfd5617CFB082Ba9bcD62d654603972AE312bC695\",\n    XGMT_USDG_FARM_TRACKER_NATIVE: \"0x0354387DD85b7D8aaD1611B3D167A384d6AE0c28\",\n    GMT_GMX_IOU: \"0x47052469970C2484729875CC9E2dd2683fcE71fb\",\n    XGMT_GMX_IOU: \"0xeB3733DFe3b68C9d26898De2493A3Bb59FDb4A7B\",\n    GMT_USDG_GMX_IOU: \"0x481312655F81b5e249780A6a49735335BF6Ca7f4\",\n    XGMT_USDG_GMX_IOU: \"0x8095F1A92526C304623483018aA28cC6E62EB1e1\",\n  },\n  [ARBITRUM_TESTNET]: {\n    // arbitrum testnet\n    Vault: \"0xBc9BC47A7aB63db1E0030dC7B60DDcDe29CF4Ffb\",\n    Router: \"0xe0d4662cdfa2d71477A7DF367d5541421FAC2547\",\n    VaultReader: \"0xFc371E380262536c819D12B9569106bf032cC41c\",\n    Reader: \"0x2E093c70E3A7E4919611d2555dFd8D697d2fC0a1\",\n    GlpManager: \"0xD875d99E09118d2Be80579b9d23E83469077b498\",\n    RewardRouter: \"0x0000000000000000000000000000000000000000\",\n    RewardReader: \"0x0000000000000000000000000000000000000000\",\n    NATIVE_TOKEN: \"0xB47e6A5f8b33b3F17603C83a0535A9dcD7E32681\",\n    GLP: \"0xb4f81Fa74e06b5f762A104e47276BA9b2929cb27\",\n    GMX: \"0x0000000000000000000000000000000000000000\",\n    ES_GMX: \"0x0000000000000000000000000000000000000000\",\n    BN_GMX: \"0x0000000000000000000000000000000000000000\",\n    USDG: \"0xBCDCaF67193Bf5C57be08623278fCB69f4cA9e68\",\n    ES_GMX_IOU: \"0x0000000000000000000000000000000000000000\",\n    StakedGmxTracker: \"0x0000000000000000000000000000000000000000\",\n    BonusGmxTracker: \"0x0000000000000000000000000000000000000000\",\n    FeeGmxTracker: \"0x0000000000000000000000000000000000000000\",\n    StakedGlpTracker: \"0x0000000000000000000000000000000000000000\",\n    FeeGlpTracker: \"0x0000000000000000000000000000000000000000\",\n\n    StakedGmxDistributor: \"0x0000000000000000000000000000000000000000\",\n    StakedGlpDistributor: \"0x0000000000000000000000000000000000000000\",\n\n    GmxVester: \"0x0000000000000000000000000000000000000000\",\n    GlpVester: \"0x0000000000000000000000000000000000000000\",\n\n    OrderBook: \"0xebD147E5136879520dDaDf1cA8FBa48050EFf016\",\n    OrderBookReader: \"0xC492c8d82DC576Ad870707bb40EDb63E2026111E\",\n\n    PositionRouter: \"0xB4bB78cd12B097603e2b55D2556c09C17a5815F8\",\n    PositionManager: \"0x168aDa266c2f10C1F37973B213d6178551030e44\",\n\n    // UniswapGmxEthPool: \"0x80A9ae39310abf666A87C743d6ebBD0E8C42158E\",\n    ReferralStorage: \"0x0000000000000000000000000000000000000000\",\n    ReferralReader: \"0x0000000000000000000000000000000000000000\",\n  },\n  [ARBITRUM]: {\n    // arbitrum mainnet\n    Vault: \"0x489ee077994B6658eAfA855C308275EAd8097C4A\",\n    Router: \"0xaBBc5F99639c9B6bCb58544ddf04EFA6802F4064\",\n    VaultReader: \"0xfebB9f4CAC4cD523598fE1C5771181440143F24A\",\n    Reader: \"0x2b43c90D1B727cEe1Df34925bcd5Ace52Ec37694\",\n    GlpManager: \"0x321F653eED006AD1C29D174e17d96351BDe22649\",\n    RewardRouter: \"0xA906F338CB21815cBc4Bc87ace9e68c87eF8d8F1\",\n    RewardReader: \"0x8BFb8e82Ee4569aee78D03235ff465Bd436D40E0\",\n    NATIVE_TOKEN: \"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1\",\n    GLP: \"0x4277f8F2c384827B5273592FF7CeBd9f2C1ac258\",\n    GMX: \"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a\",\n    ES_GMX: \"0xf42Ae1D54fd613C9bb14810b0588FaAa09a426cA\",\n    BN_GMX: \"0x35247165119B69A40edD5304969560D0ef486921\",\n    USDG: \"0x45096e7aA921f27590f8F19e457794EB09678141\",\n    ES_GMX_IOU: \"0x6260101218eC4cCfFF1b778936C6f2400f95A954\",\n    StakedGmxTracker: \"0x908C4D94D34924765f1eDc22A1DD098397c59dD4\",\n    BonusGmxTracker: \"0x4d268a7d4C16ceB5a606c173Bd974984343fea13\",\n    FeeGmxTracker: \"0xd2D1162512F927a7e282Ef43a362659E4F2a728F\",\n    StakedGlpTracker: \"0x1aDDD80E6039594eE970E5872D247bf0414C8903\",\n    FeeGlpTracker: \"0x4e971a87900b931fF39d1Aad67697F49835400b6\",\n\n    StakedGmxDistributor: \"0x23208B91A98c7C1CD9FE63085BFf68311494F193\",\n    StakedGlpDistributor: \"0x60519b48ec4183a61ca2B8e37869E675FD203b34\",\n\n    GmxVester: \"0x199070DDfd1CFb69173aa2F7e20906F26B363004\",\n    GlpVester: \"0xA75287d2f8b217273E7FCD7E86eF07D33972042E\",\n\n    OrderBook: \"0x09f77E8A13De9a35a7231028187e9fD5DB8a2ACB\",\n    OrderExecutor: \"0x7257ac5D0a0aaC04AA7bA2AC0A6Eb742E332c3fB\",\n    OrderBookReader: \"0xa27C20A7CF0e1C68C0460706bB674f98F362Bc21\",\n\n    PositionRouter: \"0xb87a436B93fFE9D75c5cFA7bAcFff96430b09868\",\n    PositionManager: \"0x75E42e6f01baf1D6022bEa862A28774a9f8a4A0C\",\n\n    UniswapGmxEthPool: \"0x80A9ae39310abf666A87C743d6ebBD0E8C42158E\",\n    ReferralStorage: \"0xe6fab3f0c7199b0d34d7fbe83394fc0e0d06e99d\",\n    ReferralReader: \"0x8Aa382760BCdCe8644C33e6C2D52f6304A76F5c8\",\n  },\n  // [POLYGON]: {\n  //   // polygon\n  //   Vault: \"0x9ab2De34A33fB459b538c43f251eB825645e8595\",\n  //   Router: \"0x5F719c2F1095F7B9fc68a68e35B51194f4b6abe8\",\n  //   VaultReader: \"0x66eC8fc33A26feAEAe156afA3Cb46923651F6f0D\",\n  //   Reader: \"0x2eFEE1950ededC65De687b40Fd30a7B5f4544aBd\",\n  //   GlpManager: \"0xe1ae4d4b06A5Fe1fc288f6B4CD72f9F8323B107F\",\n  //   RewardRouter: \"0x82147C5A7E850eA4E28155DF107F2590fD4ba327\",\n  //   RewardReader: \"0x04Fc11Bd28763872d143637a7c768bD96E44c1b6\",\n  //   NATIVE_TOKEN: \"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7\",\n  //   GLP: \"0x01234181085565ed162a948b6a5e88758CD7c7b8\",\n  //   GMX: \"0x62edc0692BD897D2295872a9FFCac5425011c661\",\n  //   ES_GMX: \"0xFf1489227BbAAC61a9209A08929E4c2a526DdD17\",\n  //   BN_GMX: \"0x8087a341D32D445d9aC8aCc9c14F5781E04A26d2\",\n  //   USDG: \"0xc0253c3cC6aa5Ab407b5795a04c28fB063273894\",\n  //   ES_GMX_IOU: \"0x6260101218eC4cCfFF1b778936C6f2400f95A954\", // placeholder address\n\n  //   StakedGmxTracker: \"0x2bD10f8E93B3669b6d42E74eEedC65dd1B0a1342\",\n  //   BonusGmxTracker: \"0x908C4D94D34924765f1eDc22A1DD098397c59dD4\",\n  //   FeeGmxTracker: \"0x4d268a7d4C16ceB5a606c173Bd974984343fea13\",\n  //   StakedGlpTracker: \"0x9e295B5B976a184B14aD8cd72413aD846C299660\",\n  //   FeeGlpTracker: \"0xd2D1162512F927a7e282Ef43a362659E4F2a728F\",\n\n  //   StakedGmxDistributor: \"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a\",\n  //   StakedGlpDistributor: \"0xDd593Cf40734199afc9207eBe9ffF23dA4Bf7720\",\n\n  //   GmxVester: \"0x472361d3cA5F49c8E633FB50385BfaD1e018b445\",\n  //   GlpVester: \"0x62331A7Bd1dfB3A7642B7db50B5509E57CA3154A\",\n\n  //   OrderBook: \"0x4296e307f108B2f583FF2F7B7270ee7831574Ae5\",\n  //   OrderExecutor: \"0x4296e307f108B2f583FF2F7B7270ee7831574Ae5\",\n  //   OrderBookReader: \"0xccFE3E576f8145403d3ce8f3c2f6519Dae40683B\",\n\n  //   PositionRouter: \"0xffF6D276Bc37c61A23f06410Dce4A400f66420f8\",\n  //   PositionManager: \"0xA21B83E579f4315951bA658654c371520BDcB866\",\n\n  //   TraderJoeGmxMaticPool: \"0x0c91a070f862666bbcce281346be45766d874d98\",\n  //   ReferralStorage: \"0x827ed045002ecdabeb6e2b0d1604cf5fc3d322f8\",\n  //   ReferralReader: \"0x505Ce16D3017be7D76a7C2631C0590E71A975083\",\n  // },\n  \n  [POLYGON]: {\n    // polygon\n    Vault: \"0x980C3Cb15a66F1A026A7E562C222242a1cd30aD6\",//replaced 0x9e34FDE4Bf55061a1805C11654C21acCd34d511E\n    Router: \"0x41BAB46bD4094653241cddDEC95F9360F8cF1219\",//replaced 0x6A154CE91003Cf4b8787280fd7C96D9BFb3f88C3\n    VaultReader: \"0xeb39Bc6673ss4BBE74e46D19640a24fa2e1F48250c\",//replaced 0x9DFEbCA2fa5318093016892dC772CC7132dDcE43\n    Reader: \"0x1F53a302CD2EE95F71a33CA2fa7b625969f503f2\",//replaced 0x8D88Aa3F648e751f989E528a32577Ee434B8e47F\n    GlpManager: \"0x67de9EbE4b17687Cd95Fa5DbE4B5065D7B09fDbA\",//replaced 0x3a417b2949d59B129e5C6c0A52114335C780B9AE\n    RewardRouter: \"0x05eA153Df967ccfa85d23F467Bc696D01BD5dD3e\",//replaced 0x0AB63435EbA15CCedb44d86Cf3e2f1d8DBeB9e08\n    RewardReader: \"0x9CCBA031D76f87607c75da997D5938937e320173\",//replaced 0x4Ee70052E9c64602Ab96a2A61850E72A051bbd89\n    NATIVE_TOKEN: \"0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270\",\n    GLP: \"0x21D6B429166aCC6e4858216Dc137287B597C8090\",//replaced 0xA63FbC76dDaf2F800B3699a4a46C5f260E04050C\n    GMX: \"0x9e5C4900ca4e8995CD00c2eDCFaa4Ab5D340Df96\", //replaced 0x39E1Da9a034Fd5ADba01C7F6cFA8B5dE16dD908c\n    ES_GMX: \"0xD54fcAc5BF0C89B8ED742EE127e0e8Fbef0371fF\",//replaced 0x6CdEf99C74CcF3FA65211fF547Be5dDB4A73770C\n    BN_GMX: \"0x3a7969635f470b9Ac05c8c545d11a7CbaecDaaEf\",//replaced 0x6e29e6db1Ea778fCC17BA575C8fB22A4dfeAE08f\n    USDG: \"0xBAbD566ac8bA3720794B05e8da7f0d76bE9EEbDd\", //replaced 0x775003195F41AFa4f75F751c35F06B3dF76F8e04\n    ES_GMX_IOU: \"0x1990CfaF416DAf9f41faA48Ee65D73eAE782A6D2\", // placeholder address\n\n    StakedGmxTracker: \"0xaaf885dB484e55F459378C01c8C5B8925a2C2073\",//replaced 0x48d7f4529f6149c5EB96AeF38534b90AD7562b4d\n    BonusGmxTracker: \"0x86a2f9DD0C131225840Aa1876D6579E64165dab3\",//replaced 0xC5fcC14560781C4c9FD55d7466d781539177A3a4\n    FeeGmxTracker: \"0x620262b1e33AE3132dc1689CA274556042A0E778\",//replaced 0xb31018C29500a565e511a0800dA87e1457CdE9b1\n    StakedGlpTracker: \"0xd4Ad1E56f89A4fCD8353dF355343098837239863\",//replaced 0x8b498C45465f4a7e9CEc0D12Aa6a695A6b563A34\n    FeeGlpTracker: \"0xacE33f27a278f110CCcAedaD77481DE1598793b1\",//replaced 0x82b84dc1A46D43747496E62BBEE2c70Ef8EE4EAD\n\n    StakedGmxDistributor: \"0xa7256d891F294866Bc060c764C1B3c15b66C798B\",//replaced 0x4e11F35A9c226be709078787cC44375FD7c22424\n    StakedGlpDistributor: \"0x3854c62fc9019068FE31b977E081dc6Cb81E39bb\",//replaced 0x7ed80C511359db0E34e2FbF14aB12Ee9AfAB0Baa\n\n    GmxVester: \"0xb0B08C64B4f00872af4821bC2A86CA92E01f407F\",//replaced 0x957C9a17fc5A5Fda190D1Bc4Fc1AF2B6282C2743\n    GlpVester: \"0x6b1411508D80D5C29933bF2b2c171B54B83657e9\",//replaced 0xcf920DC4df556267A82783c4647cbe9Ce55cB1A2\n\n    OrderBook: \"0x542B4bc46aA51edD56c06498378C196Baa649473\",//replaced 0xA76fB4882bcb66fBe68948B71eBe7f3B80e329Ea\n    OrderExecutor: \"0x542B4bc46aA51edD56c06498378C196Baa649473\",//replaced\n    OrderBookReader: \"0xC86c6286A0efc2D79Bc8b6b5A5727c2df6DC737f\",//replaced 0x1d47908DC429b00611bd11AF78A7D39E7Dc6bCa2\n\n    PositionRouter: \"0xEfb22f7D00041aD0a7f82a52aBf627a145854DA3\",//replaced 0xD3D403595ccBB99537Af13099aC89A102AAd70D1\n    PositionManager: \"0xb0b7bA65e670b79cA2AB7c0394096423eCF7a9F6\",//replaced 0xD5326A526f78667375D9D5dA7C739e261Df52fe6\n\n    TraderJoeGmxMaticPool: \"0xFFAf1517877B8C326DF408Ba6B62aB1505999029\",//replaced\n    ReferralStorage: \"0x61BB5ee47e33CEb626A2919A09c52cc74C0Db1E1\",//replaced 0xa4Ac7025c01e8fa2bfB7f274913e76b5d4d719de\n    ReferralReader: \"0x34E74f1BCcDF92Cb58c14f22A42E4ab51784E887\",//replaced 0xDe0D6DbCCB35b92e0952C51ddDD81C7A86C5E480\n  },\n};\n\nexport function getContract(chainId: number, name: string): string {\n  if (!CONTRACTS[chainId]) {\n    throw new Error(`Unknown chainId ${chainId}`);\n  }\n\n  if (!CONTRACTS[chainId][name]) {\n    throw new Error(`Unknown contract \"${name}\" for chainId ${chainId}`);\n  }\n\n  return CONTRACTS[chainId][name];\n}\n","import { ARBITRUM, ARBITRUM_TESTNET, POLYGON, MAINNET } from \"./chains\";\n\nexport const GMX_STATS_API_URL = \"https://stats.gmx.io/api\";\n\nconst BACKEND_URLS = {\n  default: \"https://gmx-server-mainnet.uw.r.appspot.com\",\n\n  [MAINNET]: \"https://gambit-server-staging.uc.r.appspot.com\",\n  [ARBITRUM_TESTNET]: \"https://gambit-server-devnet.uc.r.appspot.com\",\n  [ARBITRUM]: \"https://gmx-server-mainnet.uw.r.appspot.com\",\n  [POLYGON]: \"https://gmx-polygon-server.uc.r.appspot.com\",\n};\n\nexport function getServerBaseUrl(chainId: number) {\n  if (!chainId) {\n    throw new Error(\"chainId is not provided\");\n  }\n\n  if (document.location.hostname.includes(\"deploy-preview\")) {\n    const fromLocalStorage = localStorage.getItem(\"SERVER_BASE_URL\");\n    if (fromLocalStorage) {\n      return fromLocalStorage;\n    }\n  }\n\n  return BACKEND_URLS[chainId] || BACKEND_URLS.default;\n}\n\nexport function getServerUrl(chainId: number, path: string) {\n  return `${getServerBaseUrl(chainId)}${path}`;\n}\n","import { ethers } from \"ethers\";\nimport { getContract } from \"./contracts\";\nimport { ARBITRUM, ARBITRUM_TESTNET, MAINNET, POLYGON, TESTNET } from \"./chains\";\nimport { Token } from \"domain/tokens\";\n\nexport const TOKENS: { [chainId: number]: Token[] } = {\n  [MAINNET]: [\n    {\n      name: \"Bitcoin (BTCB)\",\n      symbol: \"BTC\",\n      decimals: 18,\n      address: \"0x7130d2A12B9BCbFAe4f2634d864A1Ee1Ce3Ead9c\",\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-bitcoin\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/14108/small/Binance-bitcoin.png\",\n    },\n    {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n      address: \"0x2170Ed0880ac9A755fd29B2688956BD959F933F8\",\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/ethereum\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png\",\n    },\n    {\n      name: \"Binance Coin\",\n      symbol: \"BNB\",\n      decimals: 18,\n      address: ethers.constants.AddressZero,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-coin\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png\",\n      isNative: true,\n    },\n    {\n      name: \"Wrapped Binance Coin\",\n      symbol: \"WBNB\",\n      decimals: 18,\n      address: getContract(MAINNET, \"NATIVE_TOKEN\"),\n      isWrapped: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-coin\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png\",\n      baseSymbol: \"BNB\",\n    },\n    {\n      name: \"USD Gambit\",\n      symbol: \"USDG\",\n      decimals: 18,\n      address: getContract(MAINNET, \"USDG\"),\n      isUsdg: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/usd-gambit\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/15886/small/usdg-02.png\",\n    },\n    {\n      name: \"Binance USD\",\n      symbol: \"BUSD\",\n      decimals: 18,\n      address: \"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56\",\n      isStable: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-usd\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/9576/small/BUSD.png\",\n    },\n    {\n      name: \"USD Coin\",\n      symbol: \"USDC\",\n      decimals: 18,\n      address: \"0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d\",\n      isStable: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/usd-coin\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/small/USD_Coin_icon.png\",\n    },\n    {\n      name: \"Tether\",\n      symbol: \"USDT\",\n      decimals: 18,\n      address: \"0x55d398326f99059fF775485246999027B3197955\",\n      isStable: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/tether\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/325/small/Tether-logo.png\",\n    },\n  ],\n  [TESTNET]: [\n    {\n      name: \"Bitcoin (BTCB)\",\n      symbol: \"BTC\",\n      decimals: 8,\n      address: \"0xb19C12715134bee7c4b1Ca593ee9E430dABe7b56\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/26115/thumb/btcb.png?1655921693\",\n    },\n    {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n      address: \"0x1958f7C067226c7C8Ac310Dc994D0cebAbfb2B02\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880\",\n    },\n    {\n      name: \"Binance Coin\",\n      symbol: \"BNB\",\n      decimals: 18,\n      address: ethers.constants.AddressZero,\n      isNative: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png\",\n    },\n    {\n      name: \"Wrapped Binance Coin\",\n      symbol: \"WBNB\",\n      decimals: 18,\n      address: \"0x612777Eea37a44F7a95E3B101C39e1E2695fa6C2\",\n      isWrapped: true,\n      baseSymbol: \"BNB\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png\",\n    },\n    {\n      name: \"USD Gambit\",\n      symbol: \"USDG\",\n      decimals: 18,\n      address: getContract(TESTNET, \"USDG\"),\n      isUsdg: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/15886/small/usdg-02.png\",\n    },\n    {\n      name: \"Binance USD\",\n      symbol: \"BUSD\",\n      decimals: 18,\n      address: \"0x3F223C4E5ac67099CB695834b20cCd5E5D5AA9Ef\",\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/9576/small/BUSD.png\",\n    },\n  ],\n  [ARBITRUM_TESTNET]: [\n    {\n      name: \"Bitcoin\",\n      symbol: \"BTC\",\n      decimals: 8,\n      address: \"0x27960f9A322BE96A1535E6c19B3958e80E6a2670\",\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/7598/thumb/wrapped_bitcoin_wbtc.png?1548822744\",\n    },\n    {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n      address: ethers.constants.AddressZero,\n      isNative: true,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880\",\n    },\n    // https://github.com/OffchainLabs/arbitrum/blob/950c2f91b2e951cd3764394e0a73eac3797aecf3/packages/arb-ts/src/lib/networks.ts#L65\n    {\n      name: \"Wrapped Ethereum\",\n      symbol: \"WETH\",\n      decimals: 18,\n      address: \"0xB47e6A5f8b33b3F17603C83a0535A9dcD7E32681\",\n      isWrapped: true,\n      baseSymbol: \"ETH\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/2518/thumb/weth.png?1628852295\",\n    },\n    {\n      name: \"USD Coin\",\n      symbol: \"USDC\",\n      decimals: 6,\n      address: \"0xf0DCd4737A20ED33481A49De94C599944a3Ca737\",\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\n    },\n    {\n      name: \"Tether\",\n      symbol: \"USDT\",\n      decimals: 6,\n      address: \"0x818ED84bA1927945b631016e0d402Db50cE8865f\",\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/325/small/Tether-logo.png\",\n    },\n  ],\n  [ARBITRUM]: [\n    {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n      address: ethers.constants.AddressZero,\n      isNative: true,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880\",\n    },\n    {\n      name: \"Wrapped Ethereum\",\n      symbol: \"WETH\",\n      decimals: 18,\n      address: \"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1\",\n      isWrapped: true,\n      baseSymbol: \"ETH\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/2518/thumb/weth.png?1628852295\",\n    },\n    {\n      name: \"Bitcoin (WBTC)\",\n      symbol: \"BTC\",\n      decimals: 8,\n      address: \"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f\",\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/7598/thumb/wrapped_bitcoin_wbtc.png?1548822744\",\n    },\n    {\n      name: \"Chainlink\",\n      symbol: \"LINK\",\n      decimals: 18,\n      address: \"0xf97f4df75117a78c1A5a0DBb814Af92458539FB4\",\n      isStable: false,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/877/thumb/chainlink-new-logo.png?1547034700\",\n    },\n    {\n      name: \"Uniswap\",\n      symbol: \"UNI\",\n      decimals: 18,\n      address: \"0xFa7F8980b0f1E64A2062791cc3b0871572f1F7f0\",\n      isStable: false,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/12504/thumb/uniswap-uni.png?1600306604\",\n    },\n    {\n      name: \"USD Coin\",\n      symbol: \"USDC\",\n      decimals: 6,\n      address: \"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8\",\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\n    },\n    {\n      name: \"Tether\",\n      symbol: \"USDT\",\n      decimals: 6,\n      address: \"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9\",\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/325/thumb/Tether-logo.png?1598003707\",\n    },\n    {\n      name: \"Dai\",\n      symbol: \"DAI\",\n      decimals: 18,\n      address: \"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1\",\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/9956/thumb/4943.png?1636636734\",\n    },\n    {\n      name: \"Frax\",\n      symbol: \"FRAX\",\n      decimals: 18,\n      address: \"0x17FC002b466eEc40DaE837Fc4bE5c67993ddBd6F\",\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/13422/small/frax_logo.png?1608476506\",\n    },\n    {\n      name: \"Magic Internet Money\",\n      symbol: \"MIM\",\n      decimals: 18,\n      address: \"0xFEa7a6a0B346362BF88A9e4A88416B77a57D6c2A\",\n      isStable: true,\n      isTempHidden: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/16786/small/mimlogopng.png\",\n    },\n  ],\n  [POLYGON]: [\n    {\n      name: \"Polygon\",\n      symbol: \"MATIC\",\n      decimals: 18,\n      address: ethers.constants.AddressZero,\n      isNative: true,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/12559/small/coin-round-red.png?1604021818\",\n    },\n    {\n      name: \"Wrapped MATIC\",\n      symbol: \"WMATIC\",\n      decimals: 18,\n      address: \"0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270\",\n      isWrapped: true,\n      baseSymbol: \"MATIC\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/12559/small/coin-round-red.png?1604021818\",\n    },\n    {\n      name: \"Ethereum (WETH)\",\n      symbol: \"WETH\",\n      address: \"0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619\",\n      decimals: 18,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880\",\n    },\n    {\n      name: \"Bitcoin (WBTC)\",\n      symbol: \"WBTC\",\n      address: \"0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6\",\n      decimals: 8,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/26115/thumb/btcb.png?1655921693\",\n    },\n    {\n      name: \"USD Coin\",\n      symbol: \"USDC\",\n      address: \"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174\",\n      decimals: 6,\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\n    },\n  ],\n};\n\nexport const ADDITIONAL_TOKENS: { [chainId: number]: Token[] } = {\n  [ARBITRUM]: [\n    {\n      name: \"GMX\",\n      symbol: \"GMX\",\n      address: getContract(ARBITRUM, \"GMX\"),\n      decimals: 18,\n      imageUrl: \"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468\",\n    },\n    {\n      name: \"Escrowed $AMX\",\n      symbol: \"esGMX\",\n      address: getContract(ARBITRUM, \"ES_GMX\"),\n      decimals: 18,\n    },\n    {\n      name: \"GMX LP\",\n      symbol: \"GLP\",\n      address: getContract(ARBITRUM, \"GLP\"),\n      decimals: 18,\n      imageUrl: \"https://github.com/Amx-Dex/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\n    },\n  ],\n  [POLYGON]: [\n    {\n      name: \"$AMX\",\n      symbol: \"$AMX\",\n      address: getContract(POLYGON, \"GMX\"),\n      decimals: 18,\n      imageUrl: \"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468\",\n    },\n    {\n      name: \"Escrowed AMX\",\n      symbol: \"esAMX\",\n      address: getContract(POLYGON, \"ES_GMX\"),\n      decimals: 18,\n    },\n    {\n      name: \"AMX LP\",\n      symbol: \"$DLP\",\n      address: getContract(POLYGON, \"GLP\"),\n      decimals: 18,\n      imageUrl: \"https://github.com/Amx-Dex/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\n    },\n  ],\n};\n\nexport const PLATFORM_TOKENS: { [chainId: number]: { [symbol: string]: Token } } = {\n  [ARBITRUM]: {\n    // arbitrum\n    GMX: {\n      name: \"GMX\",\n      symbol: \"GMX\",\n      decimals: 18,\n      address: getContract(ARBITRUM, \"GMX\"),\n      imageUrl: \"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468\",\n    },\n    GLP: {\n      name: \"GMX LP\",\n      symbol: \"GLP\",\n      decimals: 18,\n      address: getContract(ARBITRUM, \"StakedGlpTracker\"), // address of fsGLP token because user only holds fsGLP\n      imageUrl: \"https://github.com/Amx-Dex/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\n    },\n  },\n  [POLYGON]: {\n    // polygon\n    GMX: {\n      name: \"AMX\",\n      symbol: \"$AMX\",\n      decimals: 18,\n      address: getContract(POLYGON, \"GMX\"),\n      imageUrl: \"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468\",\n    },\n    GLP: {\n      name: \"AMX LP\",\n      symbol: \"$DLP\",\n      decimals: 18,\n      address: getContract(POLYGON, \"StakedGlpTracker\"), // address of fsGLP token because user only holds fsGLP\n      imageUrl: \"https://github.com/Amx-Dex/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\n    },\n  },\n};\n\nexport const ICONLINKS = {\n  [ARBITRUM_TESTNET]: {\n    GMX: {\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\n      arbitrum: \"https://arbiscan.io/address/0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a\",\n    },\n    GLP: {\n      arbitrum: \"https://testnet.arbiscan.io/token/0xb4f81Fa74e06b5f762A104e47276BA9b2929cb27\",\n    },\n  },\n  [ARBITRUM]: {\n    GMX: {\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\n      arbitrum: \"https://arbiscan.io/address/0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a\",\n    },\n    GLP: {\n      arbitrum: \"https://arbiscan.io/token/0x1aDDD80E6039594eE970E5872D247bf0414C8903\",\n    },\n    ETH: {\n      coingecko: \"https://www.coingecko.com/en/coins/ethereum\",\n    },\n    BTC: {\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\n      arbitrum: \"https://arbiscan.io/address/0x2f2a2543b76a4166549f7aab2e75bef0aefc5b0f\",\n    },\n    LINK: {\n      coingecko: \"https://www.coingecko.com/en/coins/chainlink\",\n      arbitrum: \"https://arbiscan.io/address/0xf97f4df75117a78c1a5a0dbb814af92458539fb4\",\n    },\n    UNI: {\n      coingecko: \"https://www.coingecko.com/en/coins/uniswap\",\n      arbitrum: \"https://arbiscan.io/address/0xfa7f8980b0f1e64a2062791cc3b0871572f1f7f0\",\n    },\n    USDC: {\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin\",\n      arbitrum: \"https://arbiscan.io/address/0xff970a61a04b1ca14834a43f5de4533ebddb5cc8\",\n    },\n    USDT: {\n      coingecko: \"https://www.coingecko.com/en/coins/tether\",\n      arbitrum: \"https://arbiscan.io/address/0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9\",\n    },\n    DAI: {\n      coingecko: \"https://www.coingecko.com/en/coins/dai\",\n      arbitrum: \"https://arbiscan.io/address/0xda10009cbd5d07dd0cecc66161fc93d7c9000da1\",\n    },\n    MIM: {\n      coingecko: \"https://www.coingecko.com/en/coins/magic-internet-money\",\n      arbitrum: \"https://arbiscan.io/address/0xfea7a6a0b346362bf88a9e4a88416b77a57d6c2a\",\n    },\n    FRAX: {\n      coingecko: \"https://www.coingecko.com/en/coins/frax\",\n      arbitrum: \"https://arbiscan.io/address/0x17fc002b466eec40dae837fc4be5c67993ddbd6f\",\n    },\n  },\n  [POLYGON]: {\n    GMX: {\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\n      polygon: \"https://polygonscan.com/address/0x9e5C4900ca4e8995CD00c2eDCFaa4Ab5D340Df96\",\n    },\n    GLP: {\n      polygon: \"https://polygonscan.com/address/0x21D6B429166aCC6e4858216Dc137287B597C8090\",\n    },\n    MATIC: {\n      coingecko: \"https://www.coingecko.com/en/coins/polygon\",\n    },\n    WETH: {\n      coingecko: \"https://www.coingecko.com/en/coins/weth\",\n      polygon: \"https://polygonscan.com/address/0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619\",\n    },\n    WBTC: {\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\n      polygon: \"https://polygonscan.com/address/0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6\",\n    },\n    USDC: {\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin\",\n      polygon: \"https://polygonscan.com/address/0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174\",\n    },\n  },\n};\n\nexport const GLP_POOL_COLORS = {\n  WETH: \"#6062a6\",\n  BTC: \"#F7931A\",\n  WBTC: \"#F7931A\",\n  USDC: \"#2775CA\",\n  \"USDC.e\": \"#2A5ADA\",\n  USDT: \"#67B18A\",\n  MIM: \"#9695F8\",\n  FRAX: \"#000\",\n  DAI: \"#FAC044\",\n  UNI: \"#E9167C\",\n  MATIC: \"#E84142\",\n  LINK: \"#3256D6\",\n};\n\nexport const TOKENS_MAP: { [chainId: number]: { [address: string]: Token } } = {};\nexport const TOKENS_BY_SYMBOL_MAP: { [chainId: number]: { [symbol: string]: Token } } = {};\nexport const WRAPPED_TOKENS_MAP: { [chainId: number]: Token } = {};\nexport const NATIVE_TOKENS_MAP: { [chainId: number]: Token } = {};\n\nconst CHAIN_IDS = [MAINNET, TESTNET, ARBITRUM, ARBITRUM_TESTNET, POLYGON];\n\nfor (let j = 0; j < CHAIN_IDS.length; j++) {\n  const chainId = CHAIN_IDS[j];\n  TOKENS_MAP[chainId] = {};\n  TOKENS_BY_SYMBOL_MAP[chainId] = {};\n  let tokens = TOKENS[chainId];\n  if (ADDITIONAL_TOKENS[chainId]) {\n    tokens = tokens.concat(ADDITIONAL_TOKENS[chainId]);\n  }\n\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n    TOKENS_MAP[chainId][token.address] = token;\n    TOKENS_BY_SYMBOL_MAP[chainId][token.symbol] = token;\n  }\n}\n\nfor (const chainId of CHAIN_IDS) {\n  for (const token of TOKENS[chainId]) {\n    if (token.isWrapped) {\n      WRAPPED_TOKENS_MAP[chainId] = token;\n    } else if (token.isNative) {\n      NATIVE_TOKENS_MAP[chainId] = token;\n    }\n  }\n}\n\nexport function getWrappedToken(chainId: number) {\n  return WRAPPED_TOKENS_MAP[chainId];\n}\n\nexport function getNativeToken(chainId: number) {\n  return NATIVE_TOKENS_MAP[chainId];\n}\n\nexport function getTokens(chainId: number) {\n  return TOKENS[chainId];\n}\n\nexport function isValidToken(chainId: number, address: string) {\n  if (!TOKENS_MAP[chainId]) {\n    throw new Error(`Incorrect chainId ${chainId}`);\n  }\n  return address in TOKENS_MAP[chainId];\n}\n\nexport function getToken(chainId: number, address: string) {\n  if (!TOKENS_MAP[chainId]) {\n    throw new Error(`Incorrect chainId ${chainId}`);\n  }\n  if (!TOKENS_MAP[chainId][address]) {\n    throw new Error(`Incorrect address \"${address}\" for chainId ${chainId}`);\n  }\n  return TOKENS_MAP[chainId][address];\n}\n\nexport function getTokenBySymbol(chainId: number, symbol: string) {\n  const token = TOKENS_BY_SYMBOL_MAP[chainId][symbol];\n  if (!token) {\n    throw new Error(`Incorrect symbol \"${symbol}\" for chainId ${chainId}`);\n  }\n  return token;\n}\n\nexport function getWhitelistedTokens(chainId: number) {\n  return TOKENS[chainId].filter((token) => token.symbol !== \"USDG\");\n}\n\nexport function getVisibleTokens(chainId: number) {\n  return getWhitelistedTokens(chainId).filter((token) => !token.isWrapped && !token.isTempHidden);\n}\n","import { BigNumber, BigNumberish, ethers } from \"ethers\";\n\nexport function bigNumberify(n: BigNumberish) {\n  try {\n    return BigNumber.from(n);\n  } catch (e) {\n    console.error(\"bigNumberify error\", e);\n    return undefined;\n  }\n}\n\nexport function expandDecimals(n: BigNumberish, decimals: number): BigNumber {\n  // @ts-ignore\n  return bigNumberify(n).mul(bigNumberify(10).pow(decimals));\n}\n\nexport const trimZeroDecimals = (amount: string) => {\n  if (parseFloat(amount) === parseInt(amount)) {\n    return parseInt(amount).toString();\n  }\n  return amount;\n};\n\nexport const limitDecimals = (amount: BigNumberish, maxDecimals?: number) => {\n  let amountStr = amount.toString();\n  if (maxDecimals === undefined) {\n    return amountStr;\n  }\n  if (maxDecimals === 0) {\n    return amountStr.split(\".\")[0];\n  }\n  const dotIndex = amountStr.indexOf(\".\");\n  if (dotIndex !== -1) {\n    let decimals = amountStr.length - dotIndex - 1;\n    if (decimals > maxDecimals) {\n      amountStr = amountStr.substr(0, amountStr.length - (decimals - maxDecimals));\n    }\n  }\n  return amountStr;\n};\n\nexport const padDecimals = (amount: BigNumberish, minDecimals: number) => {\n  let amountStr = amount.toString();\n  const dotIndex = amountStr.indexOf(\".\");\n  if (dotIndex !== -1) {\n    const decimals = amountStr.length - dotIndex - 1;\n    if (decimals < minDecimals) {\n      amountStr = amountStr.padEnd(amountStr.length + (minDecimals - decimals), \"0\");\n    }\n  } else {\n    amountStr = amountStr + \".0000\";\n  }\n  return amountStr;\n};\n\nexport const formatAmount = (\n  amount: BigNumberish | undefined,\n  tokenDecimals: number,\n  displayDecimals?: number,\n  useCommas?: boolean,\n  defaultValue?: string\n) => {\n  if (!defaultValue) {\n    defaultValue = \"...\";\n  }\n  if (amount === undefined || amount.toString().length === 0) {\n    return defaultValue;\n  }\n  if (displayDecimals === undefined) {\n    displayDecimals = 4;\n  }\n  let amountStr = ethers.utils.formatUnits(amount, tokenDecimals);\n  amountStr = limitDecimals(amountStr, displayDecimals);\n  if (displayDecimals !== 0) {\n    amountStr = padDecimals(amountStr, displayDecimals);\n  }\n  if (useCommas) {\n    return numberWithCommas(amountStr);\n  }\n  return amountStr;\n};\n\nexport const formatKeyAmount = (\n  map: any,\n  key: string,\n  tokenDecimals: number,\n  displayDecimals: number,\n  useCommas?: boolean\n) => {\n  if (!map || !map[key]) {\n    return \"...\";\n  }\n\n  return formatAmount(map[key], tokenDecimals, displayDecimals, useCommas);\n};\n\nexport const formatArrayAmount = (\n  arr: any[],\n  index: number,\n  tokenDecimals: number,\n  displayDecimals?: number,\n  useCommas?: boolean\n) => {\n  if (!arr || !arr[index]) {\n    return \"...\";\n  }\n\n  return formatAmount(arr[index], tokenDecimals, displayDecimals, useCommas);\n};\n\nexport const formatAmountFree = (amount: BigNumberish, tokenDecimals: number, displayDecimals?: number) => {\n  if (!amount) {\n    return \"...\";\n  }\n  let amountStr = ethers.utils.formatUnits(amount, tokenDecimals);\n  amountStr = limitDecimals(amountStr, displayDecimals);\n  return trimZeroDecimals(amountStr);\n};\n\nexport const parseValue = (value: string, tokenDecimals: number) => {\n  const pValue = parseFloat(value);\n\n  if (isNaN(pValue)) {\n    return undefined;\n  }\n\n  value = limitDecimals(value, tokenDecimals);\n  const amount = ethers.utils.parseUnits(value, tokenDecimals);\n  return bigNumberify(amount);\n};\n\nexport function numberWithCommas(x: BigNumberish) {\n  // if (!x) {\n  //   return \"...\";\n  // }\n  if (typeof x == 'undefined') {\n    return \"...\";\n  }\n\n  var parts = x.toString().split(\".\");\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  return parts.join(\".\");\n}\n\n","import { BigNumber, ethers } from \"ethers\";\nimport {\n  adjustForDecimals,\n  DUST_BNB,\n  getFeeBasisPoints,\n  MARKET,\n  MINT_BURN_FEE_BASIS_POINTS,\n  PRECISION,\n  TAX_BASIS_POINTS,\n  USD_DECIMALS,\n  USDG_ADDRESS,\n  USDG_DECIMALS,\n} from \"lib/legacy\";\nimport { getVisibleTokens, getWhitelistedTokens } from \"config/tokens\";\nimport { getExplorerUrl } from \"config/chains\";\nimport { InfoTokens, Token, TokenInfo } from \"./types\";\nimport { bigNumberify, expandDecimals } from \"lib/numbers\";\n\nconst { AddressZero } = ethers.constants;\n\nexport function getTokenUrl(chainId: number, address: string) {\n  if (!address) {\n    return getExplorerUrl(chainId);\n  }\n  return getExplorerUrl(chainId) + \"token/\" + address;\n}\n\nexport function getUsd(\n  amount: BigNumber,\n  tokenAddress: string,\n  max: boolean,\n  infoTokens: InfoTokens,\n  orderOption?: string,\n  triggerPriceUsd?: BigNumber\n) {\n  if (!amount) {\n    return;\n  }\n  if (tokenAddress === USDG_ADDRESS) {\n    return amount.mul(PRECISION).div(expandDecimals(1, 18));\n  }\n  const info = getTokenInfo(infoTokens, tokenAddress);\n  const price = getTriggerPrice(tokenAddress, max, info, orderOption, triggerPriceUsd);\n  if (!price) {\n    return;\n  }\n\n  return amount.mul(price).div(expandDecimals(1, info.decimals));\n}\n\nexport function getTokenAmountFromUsd(\n  infoTokens: InfoTokens,\n  tokenAddress: string,\n  usdAmount?: BigNumber,\n  opts: {\n    max?: boolean;\n    overridePrice?: BigNumber;\n  } = {}\n) {\n  if (!usdAmount) {\n    return;\n  }\n\n  if (tokenAddress === USDG_ADDRESS) {\n    return usdAmount.mul(expandDecimals(1, 18)).div(PRECISION);\n  }\n\n  const info: TokenInfo | undefined = getTokenInfo(infoTokens, tokenAddress);\n\n  if (!info) {\n    return;\n  }\n\n  const price = opts.overridePrice || (opts.max ? info.maxPrice : info.minPrice);\n\n  if (!BigNumber.isBigNumber(price) || price.lte(0)) {\n    return;\n  }\n\n  return usdAmount.mul(expandDecimals(1, info.decimals)).div(price);\n}\n\nexport function getTriggerPrice(\n  tokenAddress: string,\n  max: boolean,\n  info: TokenInfo,\n  orderOption?: string,\n  triggerPriceUsd?: BigNumber\n) {\n  // Limit/stop orders are executed with price specified by user\n  if (orderOption && orderOption !== MARKET && triggerPriceUsd) {\n    return triggerPriceUsd;\n  }\n\n  // Market orders are executed with current market price\n  if (!info) {\n    return;\n  }\n  if (max && !info.maxPrice) {\n    return;\n  }\n  if (!max && !info.minPrice) {\n    return;\n  }\n  return max ? info.maxPrice : info.minPrice;\n}\n\nexport function getTokenInfo(\n  infoTokens: InfoTokens,\n  tokenAddress: string,\n  replaceNative?: boolean,\n  nativeTokenAddress?: string\n) {\n  if (replaceNative && tokenAddress === nativeTokenAddress) {\n    return infoTokens[AddressZero];\n  }\n\n  return infoTokens[tokenAddress];\n}\n\nexport function getLowestFeeTokenForBuyGlp(\n  chainId: number,\n  toAmount: BigNumber,\n  glpPrice: BigNumber,\n  usdgSupply: BigNumber,\n  totalTokenWeights: BigNumber,\n  infoTokens: InfoTokens,\n  fromTokenAddress: string,\n  swapUsdMin: BigNumber\n): { token: Token; fees: number; amountLeftToDeposit: BigNumber } | undefined {\n  if (!chainId || !toAmount || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights || !swapUsdMin) {\n    return;\n  }\n\n  const tokens = getVisibleTokens(chainId);\n\n  const usdgAmount = toAmount.mul(glpPrice).div(PRECISION);\n\n  const tokensData = tokens.map((token) => {\n    const fromToken = getTokenInfo(infoTokens, token.address);\n\n    const fees = getFeeBasisPoints(\n      fromToken,\n      usdgAmount,\n      MINT_BURN_FEE_BASIS_POINTS,\n      TAX_BASIS_POINTS,\n      true,\n      usdgSupply,\n      totalTokenWeights\n    );\n\n    let amountLeftToDeposit = bigNumberify(0)!;\n\n    if (\n      fromToken.maxUsdgAmount &&\n      fromToken.maxUsdgAmount.gt(0) &&\n      fromToken.usdgAmount &&\n      fromToken.usdgAmount.gt(0)\n    ) {\n      amountLeftToDeposit = fromToken.maxUsdgAmount\n        .sub(fromToken.usdgAmount)\n        .mul(expandDecimals(1, USD_DECIMALS))\n        .div(expandDecimals(1, USDG_DECIMALS));\n    }\n    return { token, fees, amountLeftToDeposit };\n  });\n\n  const tokensWithLiquidity = tokensData\n    .filter(\n      (asset) =>\n        asset.token.address !== fromTokenAddress &&\n        asset.hasOwnProperty(\"fees\") &&\n        swapUsdMin.lt(asset.amountLeftToDeposit)\n    )\n    .sort((a, b) => a.fees - b.fees);\n\n  return tokensWithLiquidity.length > 0\n    ? tokensWithLiquidity[0]\n    : tokensData.sort((a, b) => Number(b.amountLeftToDeposit.sub(a.amountLeftToDeposit)))[0];\n}\n\nexport function getMostAbundantStableToken(chainId: number, infoTokens: InfoTokens) {\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  let availableAmount;\n  let stableToken = whitelistedTokens.find((t) => t.isStable);\n\n  for (let i = 0; i < whitelistedTokens.length; i++) {\n    const info = getTokenInfo(infoTokens, whitelistedTokens[i].address);\n    if (!info.isStable || !info.availableAmount) {\n      continue;\n    }\n\n    const adjustedAvailableAmount = adjustForDecimals(info.availableAmount, info.decimals, USD_DECIMALS);\n    if (!availableAmount || adjustedAvailableAmount.gt(availableAmount)) {\n      availableAmount = adjustedAvailableAmount;\n      stableToken = info;\n    }\n  }\n\n  return stableToken;\n}\n\nexport function shouldRaiseGasError(token: TokenInfo, amount?: BigNumber) {\n  if (!amount) {\n    return false;\n  }\n  if (token.address !== AddressZero) {\n    return false;\n  }\n  if (!token.balance) {\n    return false;\n  }\n  if (amount.gte(token.balance)) {\n    return true;\n  }\n  if (token.balance.sub(amount).lt(DUST_BNB)) {\n    return true;\n  }\n  return false;\n}\n\nexport const replaceNativeTokenAddress = (path: string[], nativeTokenAddress: string) => {\n  if (!path) {\n    return;\n  }\n\n  let updatedPath: string[] = [];\n\n  for (let i = 0; i < path.length; i++) {\n    let address = path[i];\n    if (address === AddressZero) {\n      address = nativeTokenAddress;\n    }\n    updatedPath.push(address);\n  }\n\n  return updatedPath;\n};\n","import { toast, ToastContent, ToastOptions } from \"react-toastify\";\n\nexport const helperToast = {\n  success: (content: ToastContent, opts?: ToastOptions) => {\n    toast.dismiss();\n    toast.success(content, opts);\n  },\n  error: (content: ToastContent, opts?: ToastOptions) => {\n    toast.dismiss();\n    toast.error(content, opts);\n  },\n};\n","import { useState } from \"react\";\n\nexport function ToastifyDebug(props) {\n  const [open, setOpen] = useState(false);\n  return (\n    <div className=\"Toastify-debug\">\n      <span className=\"Toastify-debug-button\" onClick={() => setOpen((old) => !old)}>\n        {open ? \"Hide error\" : \"Show error\"}\n      </span>\n      {open && <div className=\"Toastify-debug-content\">{props.children}</div>}\n    </div>\n  );\n}\n","export const NOT_ENOUGH_FUNDS = \"NOT_ENOUGH_FUNDS\";\nexport const USER_DENIED = \"USER_DENIED\";\nexport const SLIPPAGE = \"SLIPPAGE\";\nexport const RPC_ERROR = \"RPC_ERROR\";\n\ntype ErrorPattern = { msg?: string; code?: number };\n\nconst TX_ERROR_PATTERNS: { [key: string]: ErrorPattern[] } = {\n  [NOT_ENOUGH_FUNDS]: [\n    { msg: \"not enough funds for gas\" },\n    { msg: \"failed to execute call with revert code InsufficientGasFunds\" },\n  ],\n  [USER_DENIED]: [{ msg: \"User denied transaction signature\" }],\n  [SLIPPAGE]: [{ msg: \"Router: mark price lower than limit\" }, { msg: \"Router: mark price higher than limit\" }],\n  [RPC_ERROR]: [\n    // @see https://eips.ethereum.org/EIPS/eip-1474#error-codes\n    { code: -32005 },\n    { msg: \"Non-200 status code\" },\n    { msg: \"Request limit exceeded\" },\n    { msg: \"Internal JSON-RPC error\" },\n    { msg: \"Response has no error or result\" },\n    { msg: \"couldn't connect to the network\" },\n  ],\n};\n\ntype TxError = {\n  message?: string;\n  code?: number;\n  data?: any;\n};\n\nexport function extractError(ex: TxError) {\n  if (!ex) {\n    return [];\n  }\n\n  const message = ex.data?.message || ex.message;\n  const code = ex.code;\n\n  if (!message && !code) {\n    return [];\n  }\n\n  for (const [type, patterns] of Object.entries(TX_ERROR_PATTERNS)) {\n    for (const pattern of patterns) {\n      const matchCode = pattern.code && code === pattern.code;\n      const matchMessage = pattern.msg && message && message.includes(pattern.msg);\n\n      if (matchCode || matchMessage) {\n        return [message, type, ex.data];\n      }\n    }\n  }\n\n  return [message, null, ex.data];\n}\n","import { Provider } from \"@ethersproject/providers\";\nimport { Contract } from \"ethers\";\nimport { GAS_PRICE_ADJUSTMENT_MAP, MAX_GAS_PRICE_MAP } from \"config/chains\";\nimport { bigNumberify } from \"../numbers\";\n\nexport async function setGasPrice(txnOpts: any, provider: Provider, chainId: number) {\n  let maxGasPrice = MAX_GAS_PRICE_MAP[chainId];\n  const premium = GAS_PRICE_ADJUSTMENT_MAP[chainId] || bigNumberify(0);\n\n  const gasPrice = await provider.getGasPrice();\n\n  if (maxGasPrice) {\n    if (gasPrice.gt(maxGasPrice)) {\n      maxGasPrice = gasPrice;\n    }\n\n    const feeData = await provider.getFeeData();\n\n    // the wallet provider might not return maxPriorityFeePerGas in feeData\n    // in which case we should fallback to the usual getGasPrice flow handled below\n    if (feeData && feeData.maxPriorityFeePerGas) {\n      txnOpts.maxFeePerGas = maxGasPrice;\n      txnOpts.maxPriorityFeePerGas = feeData.maxPriorityFeePerGas.add(premium);\n      return;\n    }\n  }\n\n  txnOpts.gasPrice = gasPrice.add(premium);\n  return;\n}\n\nexport async function getGasLimit(contract: Contract, method, params = [], value) {\n  const defaultValue = bigNumberify(0);\n\n  if (!value) {\n    value = defaultValue;\n  }\n\n  let gasLimit = await contract.estimateGas[method](...params, { value });\n\n  if (gasLimit.lt(22000)) {\n    gasLimit = bigNumberify(22000)!;\n  }\n\n  return gasLimit.mul(11000).div(10000); // add a 10% buffer\n}\n","import React from \"react\";\n\ntype Props = {\n  href: string;\n  children: React.ReactNode;\n  className?: string;\n};\n\nfunction ExternalLink({ href, children, className }: Props) {\n  return (\n    <a href={href} className={className} target=\"_blank\" rel=\"noopener noreferrer\">\n      {children}\n    </a>\n  );\n}\n\nexport default ExternalLink;\n","import { BigNumber, Contract } from \"ethers\";\nimport { helperToast } from \"../helperToast\";\nimport { ToastifyDebug } from \"components/ToastifyDebug/ToastifyDebug\";\nimport { extractError, NOT_ENOUGH_FUNDS, RPC_ERROR, SLIPPAGE, USER_DENIED } from \"./transactionErrors\";\nimport { getGasLimit, setGasPrice } from \"./utils\";\nimport { getExplorerUrl } from \"config/chains\";\nimport { t, Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nexport async function callContract(\n  chainId: number,\n  contract: Contract,\n  method: string,\n  params: any,\n  opts: {\n    value?: BigNumber | number;\n    gasLimit?: BigNumber | number;\n    sentMsg?: string;\n    successMsg?: string;\n    hideSuccessMsg?: boolean;\n    failMsg?: string;\n    setPendingTxns?: (txns: any) => void;\n  }\n) {\n  try {\n    if (!Array.isArray(params) && typeof params === \"object\" && opts === undefined) {\n      opts = params;\n      params = [];\n    }\n\n    if (!opts) {\n      opts = {};\n    }\n\n    const txnOpts: any = {};\n\n    if (opts.value) {\n      txnOpts.value = opts.value;\n    }\n\n    txnOpts.gasLimit = opts.gasLimit ? opts.gasLimit : await getGasLimit(contract, method, params, opts.value);\n\n    await setGasPrice(txnOpts, contract.provider, chainId);\n\n    const res = await contract[method](...params, txnOpts);\n    const txUrl = getExplorerUrl(chainId) + \"tx/\" + res.hash;\n    const sentMsg = opts.sentMsg || t`Transaction sent.`;\n\n    helperToast.success(\n      <div>\n        {sentMsg}{\" \"}\n        <ExternalLink href={txUrl}>\n          <Trans>View status.</Trans>\n        </ExternalLink>\n        <br />\n      </div>\n    );\n\n    if (opts.setPendingTxns) {\n      const message = opts.hideSuccessMsg ? undefined : opts.successMsg || t`Transaction completed!`;\n      const pendingTxn = {\n        hash: res.hash,\n        message,\n      };\n      opts.setPendingTxns((pendingTxns) => [...pendingTxns, pendingTxn]);\n    }\n\n    return res;\n  } catch (e) {\n    let failMsg;\n\n    let autoCloseToast: number | boolean = 5000;\n\n    const [message, type, errorData] = extractError(e);\n    switch (type) {\n      case NOT_ENOUGH_FUNDS:\n        failMsg = (\n          <div>\n            <Trans>\n              There is not enough ETH in your account on Arbitrum to send this transaction.\n              <br />\n              <br />\n              <ExternalLink href=\"https://arbitrum.io/bridge-tutorial/\">Bridge ETH to Arbitrum</ExternalLink>\n            </Trans>\n          </div>\n        );\n        break;\n      case USER_DENIED:\n        failMsg = t`Transaction was cancelled.`;\n        break;\n      case SLIPPAGE:\n        failMsg = t`The mark price has changed, consider increasing your Allowed Slippage by clicking on the \"...\" icon next to your address.`;\n        break;\n      case RPC_ERROR:\n        autoCloseToast = false;\n\n        const originalError = errorData?.error?.message || errorData?.message || message;\n\n        failMsg = (\n          <div>\n            <Trans>\n              Transaction failed due to RPC error.\n              <br />\n              <br />\n              Please try changing the RPC url in your wallet settings.{\" \"}\n              <ExternalLink href=\"https://amxdex.gitbook.io/amxdex/trading#backup-rpc-urls\">More info</ExternalLink>\n            </Trans>\n            <br />\n            {originalError && <ToastifyDebug>{originalError}</ToastifyDebug>}\n          </div>\n        );\n        break;\n      default:\n        autoCloseToast = false;\n\n        failMsg = (\n          <div>\n            {opts.failMsg || t`Transaction failed`}\n            <br />\n            {message && <ToastifyDebug>{message}</ToastifyDebug>}\n          </div>\n        );\n    }\n\n    helperToast.error(failMsg, { autoClose: autoCloseToast });\n    throw e;\n  }\n}\n","import { FALLBACK_PROVIDERS, RPC_PROVIDERS } from \"config/chains\";\nimport _ from \"lodash\";\nimport { ethers } from \"ethers\";\nimport { Web3ReactContextInterface } from \"@web3-react/core/dist/types\";\nimport { JsonRpcProvider } from \"@ethersproject/providers\";\n\nexport function getProvider(\n  library: Web3ReactContextInterface[\"library\"] | undefined,\n  chainId: number\n): JsonRpcProvider {\n  let provider;\n\n  if (library) {\n    return library.getSigner();\n  }\n\n  provider = _.sample(RPC_PROVIDERS[chainId]);\n\n  return new ethers.providers.StaticJsonRpcProvider(\n    provider,\n    // @ts-ignore incorrect Network param types\n    { chainId }\n  );\n}\n\nexport function getFallbackProvider(chainId: number) {\n  if (!FALLBACK_PROVIDERS[chainId]) {\n    return;\n  }\n\n  const provider = _.sample(FALLBACK_PROVIDERS[chainId]);\n\n  return new ethers.providers.StaticJsonRpcProvider(\n    provider,\n    // @ts-ignore incorrect Network param types\n    { chainId }\n  );\n}\n","import { ethers } from \"ethers\";\nimport { Web3Provider } from \"@ethersproject/providers\";\nimport { getFallbackProvider, getProvider } from \"../rpc\";\n\nexport const contractFetcher =\n  <T>(library: Web3Provider, contractInfo: any, additionalArgs: any[]) =>\n  (...args: any): Promise<T> => {\n    // eslint-disable-next-line\n    const [id, chainId, arg0, arg1, ...params] = args;\n    const provider = getProvider(library, chainId);\n\n    const method = ethers.utils.isAddress(arg0) ? arg1 : arg0;\n\n    const contractCall = getContractCall({\n      provider,\n      contractInfo,\n      arg0,\n      arg1,\n      method,\n      params,\n      additionalArgs,\n    });\n\n    let shouldCallFallback = true;\n\n    const handleFallback = async (resolve, reject, error) => {\n      if (!shouldCallFallback) {\n        return;\n      }\n      // prevent fallback from being called twice\n      shouldCallFallback = false;\n\n      const fallbackProvider = getFallbackProvider(chainId);\n      if (!fallbackProvider) {\n        reject(error);\n        return;\n      }\n\n      console.info(\"using fallbackProvider for\", method);\n      const fallbackContractCall = getContractCall({\n        provider: fallbackProvider,\n        contractInfo,\n        arg0,\n        arg1,\n        method,\n        params,\n        additionalArgs,\n      });\n\n      fallbackContractCall\n        .then((result) => resolve(result))\n        .catch((e) => {\n          console.error(\"fallback fetcher error\", id, contractInfo.contractName, method, e);\n          reject(e);\n        });\n    };\n\n    return new Promise(async (resolve, reject) => {\n      contractCall\n        .then((result) => {\n          shouldCallFallback = false;\n          resolve(result);\n        })\n        .catch((e) => {\n          console.error(\"fetcher error\", id, contractInfo.contractName, method, e);\n          handleFallback(resolve, reject, e);\n        });\n\n      setTimeout(() => {\n        handleFallback(resolve, reject, \"contractCall timeout\");\n      }, 2000);\n    });\n  };\n\nfunction getContractCall({ provider, contractInfo, arg0, arg1, method, params, additionalArgs }) {\n  if (ethers.utils.isAddress(arg0)) {\n    const address = arg0;\n    const contract = new ethers.Contract(address, contractInfo.abi, provider);\n\n    if (additionalArgs) {\n      return contract[method](...params.concat(additionalArgs));\n    }\n    return contract[method](...params);\n  }\n\n  if (!provider) {\n    return;\n  }\n\n  return provider[method](arg1, ...params);\n}\n","import { getContract } from \"config/contracts\";\nimport useSWR from \"swr\";\nimport { contractFetcher } from \"lib/contracts\";\nimport VaultReader from \"abis/VaultReader.json\";\nimport {\n  BASIS_POINTS_DIVISOR,\n  DEFAULT_MAX_USDG_AMOUNT,\n  MAX_PRICE_DEVIATION_BASIS_POINTS,\n  USD_DECIMALS,\n  USDG_ADDRESS,\n} from \"lib/legacy\";\nimport { getServerUrl } from \"config/backend\";\nimport { InfoTokens, Token, TokenInfo } from \"./types\";\nimport { BigNumber } from \"ethers\";\nimport { Web3ReactContextInterface } from \"@web3-react/core/dist/types\";\nimport { bigNumberify, expandDecimals } from \"lib/numbers\";\nimport { getTokens, getWhitelistedTokens } from \"config/tokens\";\n\nexport function useInfoTokens(\n  library: Web3ReactContextInterface[\"library\"],\n  chainId: number,\n  active: boolean,\n  tokenBalances?: BigNumber[],\n  fundingRateInfo?: BigNumber[],\n  vaultPropsLength?: number\n) {\n  const tokens = getTokens(chainId);\n  const vaultReaderAddress = getContract(chainId, \"VaultReader\");\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const whitelistedTokenAddresses = whitelistedTokens.map((token) => token.address);\n  console.log(\"---shark useInfoTokens start!\");\n  console.log(\"---shark vaultReaderAddress: \", vaultAddress);\n  console.log(\"---shark positionRouterAddress: \", positionRouterAddress);\n  console.log(\"---shark nativeTokenAddress: \", nativeTokenAddress);\n  console.log(\"---shark expandDecimals(1, 18): \", expandDecimals(1, 18));\n  console.log(\"---shark whitelistedTokenAddresses: \", whitelistedTokenAddresses);\n  console.log(\"---shark useInfoTokens end!\");\n\n  const { data: vaultTokenInfo } = useSWR<BigNumber[], any>(\n    [`useInfoTokens:${active}`, chainId, vaultReaderAddress, \"getVaultTokenInfoV4\"],\n    {\n      fetcher: contractFetcher(library, VaultReader, [\n        vaultAddress,\n        positionRouterAddress,\n        nativeTokenAddress,\n        expandDecimals(1, 18),\n        whitelistedTokenAddresses,\n      ]),\n    }\n  );\n\n  const indexPricesUrl = getServerUrl(chainId, \"/prices\");\n\n  const { data: indexPrices } = useSWR([indexPricesUrl], {\n    // @ts-ignore spread args incorrect type\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\n    refreshInterval: 500,\n    refreshWhenHidden: true,\n  });\n\n  return {\n    infoTokens: getInfoTokens(\n      tokens,\n      tokenBalances,\n      whitelistedTokens,\n      vaultTokenInfo,\n      fundingRateInfo,\n      vaultPropsLength,\n      indexPrices,\n      nativeTokenAddress\n    ),\n  };\n}\n\nfunction getInfoTokens(\n  tokens: Token[],\n  tokenBalances: BigNumber[] | undefined,\n  whitelistedTokens: Token[],\n  vaultTokenInfo: BigNumber[] | undefined,\n  fundingRateInfo: BigNumber[] | undefined,\n  vaultPropsLength: number | undefined,\n  indexPrices: { [address: string]: BigNumber },\n  nativeTokenAddress: string\n): InfoTokens {\n  if (!vaultPropsLength) {\n    vaultPropsLength = 15;\n  }\n  const fundingRatePropsLength = 2;\n  const infoTokens: InfoTokens = {};\n\n  for (let i = 0; i < tokens.length; i++) {\n    const token = JSON.parse(JSON.stringify(tokens[i])) as TokenInfo;\n\n    if (tokenBalances) {\n      token.balance = tokenBalances[i];\n    }\n\n    if (token.address === USDG_ADDRESS) {\n      token.minPrice = expandDecimals(1, USD_DECIMALS);\n      token.maxPrice = expandDecimals(1, USD_DECIMALS);\n    }\n\n    infoTokens[token.address] = token;\n  }\n\n  for (let i = 0; i < whitelistedTokens.length; i++) {\n    const token = JSON.parse(JSON.stringify(whitelistedTokens[i])) as TokenInfo;\n\n    if (vaultTokenInfo) {\n      token.poolAmount = vaultTokenInfo[i * vaultPropsLength];\n      token.reservedAmount = vaultTokenInfo[i * vaultPropsLength + 1];\n      token.availableAmount = token.poolAmount.sub(token.reservedAmount);\n      token.usdgAmount = vaultTokenInfo[i * vaultPropsLength + 2];\n      token.redemptionAmount = vaultTokenInfo[i * vaultPropsLength + 3];\n      token.weight = vaultTokenInfo[i * vaultPropsLength + 4];\n      token.bufferAmount = vaultTokenInfo[i * vaultPropsLength + 5];\n      token.maxUsdgAmount = vaultTokenInfo[i * vaultPropsLength + 6];\n      token.globalShortSize = vaultTokenInfo[i * vaultPropsLength + 7];\n      token.maxGlobalShortSize = vaultTokenInfo[i * vaultPropsLength + 8];\n      token.maxGlobalLongSize = vaultTokenInfo[i * vaultPropsLength + 9];\n      token.minPrice = vaultTokenInfo[i * vaultPropsLength + 10];\n      token.maxPrice = vaultTokenInfo[i * vaultPropsLength + 11];\n      token.guaranteedUsd = vaultTokenInfo[i * vaultPropsLength + 12];\n      token.maxPrimaryPrice = vaultTokenInfo[i * vaultPropsLength + 13];\n      token.minPrimaryPrice = vaultTokenInfo[i * vaultPropsLength + 14];\n\n      // save minPrice and maxPrice as setTokenUsingIndexPrices may override it\n      token.contractMinPrice = token.minPrice;\n      token.contractMaxPrice = token.maxPrice;\n\n      token.maxAvailableShort = bigNumberify(0)!;\n\n      token.hasMaxAvailableShort = false;\n      if (token.maxGlobalShortSize.gt(0)) {\n        token.hasMaxAvailableShort = true;\n        if (token.maxGlobalShortSize.gt(token.globalShortSize)) {\n          token.maxAvailableShort = token.maxGlobalShortSize.sub(token.globalShortSize);\n        }\n      }\n\n      if (token.maxUsdgAmount.eq(0)) {\n        token.maxUsdgAmount = DEFAULT_MAX_USDG_AMOUNT;\n      }\n\n      token.availableUsd = token.isStable\n        ? token.poolAmount.mul(token.minPrice).div(expandDecimals(1, token.decimals))\n        : token.availableAmount.mul(token.minPrice).div(expandDecimals(1, token.decimals));\n\n      token.maxAvailableLong = bigNumberify(0)!;\n      token.hasMaxAvailableLong = false;\n      if (token.maxGlobalLongSize.gt(0)) {\n        token.hasMaxAvailableLong = true;\n\n        if (token.maxGlobalLongSize.gt(token.guaranteedUsd)) {\n          const remainingLongSize = token.maxGlobalLongSize.sub(token.guaranteedUsd);\n          token.maxAvailableLong = remainingLongSize.lt(token.availableUsd) ? remainingLongSize : token.availableUsd;\n        }\n      } else {\n        token.maxAvailableLong = token.availableUsd;\n      }\n\n      token.maxLongCapacity =\n        token.maxGlobalLongSize.gt(0) && token.maxGlobalLongSize.lt(token.availableUsd.add(token.guaranteedUsd))\n          ? token.maxGlobalLongSize\n          : token.availableUsd.add(token.guaranteedUsd);\n\n      token.managedUsd = token.availableUsd.add(token.guaranteedUsd);\n      token.managedAmount = token.managedUsd.mul(expandDecimals(1, token.decimals)).div(token.minPrice);\n\n      setTokenUsingIndexPrices(token, indexPrices, nativeTokenAddress);\n    }\n\n    if (fundingRateInfo) {\n      token.fundingRate = fundingRateInfo[i * fundingRatePropsLength];\n      token.cumulativeFundingRate = fundingRateInfo[i * fundingRatePropsLength + 1];\n    }\n\n    if (infoTokens[token.address]) {\n      token.balance = infoTokens[token.address].balance;\n    }\n\n    infoTokens[token.address] = token;\n  }\n\n  return infoTokens;\n}\n\nfunction setTokenUsingIndexPrices(\n  token: TokenInfo,\n  indexPrices: { [address: string]: BigNumber },\n  nativeTokenAddress: string\n) {\n  if (!indexPrices) {\n    return;\n  }\n\n  const tokenAddress = token.isNative ? nativeTokenAddress : token.address;\n\n  const indexPrice = indexPrices[tokenAddress];\n\n  if (!indexPrice) {\n    return;\n  }\n\n  const indexPriceBn = bigNumberify(indexPrice)!;\n\n  if (indexPriceBn.eq(0)) {\n    return;\n  }\n\n  const spread = token.maxPrice!.sub(token.minPrice!);\n  const spreadBps = spread.mul(BASIS_POINTS_DIVISOR).div(token.maxPrice!.add(token.minPrice!).div(2));\n\n  if (spreadBps.gt(MAX_PRICE_DEVIATION_BASIS_POINTS - 50)) {\n    // only set one of the values as there will be a spread between the index price and the Chainlink price\n    if (indexPriceBn.gt(token.minPrimaryPrice!)) {\n      token.maxPrice = indexPriceBn;\n    } else {\n      token.minPrice = indexPriceBn;\n    }\n    return;\n  }\n\n  const halfSpreadBps = spreadBps.div(2).toNumber();\n  token.maxPrice = indexPriceBn.mul(BASIS_POINTS_DIVISOR + halfSpreadBps).div(BASIS_POINTS_DIVISOR);\n  token.minPrice = indexPriceBn.mul(BASIS_POINTS_DIVISOR - halfSpreadBps).div(BASIS_POINTS_DIVISOR);\n}\n","import { ethers } from \"ethers\";\nimport Token from \"abis/Token.json\";\nimport { getExplorerUrl } from \"config/chains\";\nimport { helperToast } from \"lib/helperToast\";\nimport { Web3ReactContextInterface } from \"@web3-react/core/dist/types\";\nimport { InfoTokens, TokenInfo } from \"./types\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { t, Trans } from \"@lingui/macro\";\n\ntype Params = {\n  setIsApproving: (val: boolean) => void;\n  library: Web3ReactContextInterface[\"library\"];\n  tokenAddress: string;\n  spender: string;\n  chainId: number;\n  onApproveSubmitted: () => void;\n  getTokenInfo?: (infoTokens: InfoTokens, tokenAddress: string) => TokenInfo;\n  infoTokens: InfoTokens;\n  pendingTxns: any[];\n  setPendingTxns: (txns: any[]) => void;\n  includeMessage?: boolean;\n};\n\nexport function approveTokens({\n  setIsApproving,\n  library,\n  tokenAddress,\n  spender,\n  chainId,\n  onApproveSubmitted,\n  getTokenInfo,\n  infoTokens,\n  pendingTxns,\n  setPendingTxns,\n  includeMessage,\n}: Params) {\n  setIsApproving(true);\n  const contract = new ethers.Contract(tokenAddress, Token.abi, library.getSigner());\n  contract\n    .approve(spender, ethers.constants.MaxUint256)\n    .then(async (res) => {\n      const txUrl = getExplorerUrl(chainId) + \"tx/\" + res.hash;\n      helperToast.success(\n        <div>\n          <Trans>\n            Approval submitted! <ExternalLink href={txUrl}>View status.</ExternalLink>\n          </Trans>\n          <br />\n        </div>\n      );\n      if (onApproveSubmitted) {\n        onApproveSubmitted();\n      }\n      if (getTokenInfo && infoTokens && pendingTxns && setPendingTxns) {\n        const token = getTokenInfo(infoTokens, tokenAddress);\n        const pendingTxn = {\n          hash: res.hash,\n          message: includeMessage ? t`${token.symbol} Approved!` : false,\n        };\n        setPendingTxns([...pendingTxns, pendingTxn]);\n      }\n    })\n    .catch((e) => {\n      console.error(e);\n      let failMsg;\n      if (\n        [\"not enough funds for gas\", \"failed to execute call with revert code InsufficientGasFunds\"].includes(\n          e.data?.message\n        )\n      ) {\n        failMsg = (\n          <div>\n            <Trans>\n              There is not enough ETH in your account on Arbitrum to send this transaction.\n              <br />\n              <br />\n              <ExternalLink href=\"https://arbitrum.io/bridge-tutorial/\">Bridge ETH to Arbitrum</ExternalLink>\n            </Trans>\n          </div>\n        );\n      } else if (e.message?.includes(\"User denied transaction signature\")) {\n        failMsg = t`Approval was cancelled`;\n      } else {\n        failMsg = t`Approval failed`;\n      }\n      helperToast.error(failMsg);\n    })\n    .finally(() => {\n      setIsApproving(false);\n    });\n}\n","export const SELECTED_NETWORK_LOCAL_STORAGE_KEY = \"SELECTED_NETWORK\";\nexport const WALLET_CONNECT_LOCALSTORAGE_KEY = \"walletconnect\";\nexport const WALLET_LINK_LOCALSTORAGE_PREFIX = \"-walletlink\";\nexport const SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY = \"eagerconnect\";\nexport const CURRENT_PROVIDER_LOCALSTORAGE_KEY = \"currentprovider\";\nexport const LANGUAGE_LOCALSTORAGE_KEY = \"LANGUAGE_KEY\";\nexport const SLIPPAGE_BPS_KEY = \"Exchange-swap-slippage-basis-points-v3\";\nexport const CLOSE_POSITION_RECEIVE_TOKEN_KEY = \"Close-position-receive-token\";\nexport const IS_PNL_IN_LEVERAGE_KEY = \"Exchange-swap-is-pnl-in-leverage\";\nexport const SHOW_PNL_AFTER_FEES_KEY = \"Exchange-swap-show-pnl-after-fees\";\nexport const DISABLE_ORDER_VALIDATION_KEY = \"disable-order-validation\";\nexport const SHOULD_SHOW_POSITION_LINES_KEY = \"Exchange-swap-should-show-position-lines\";\nexport const REFERRAL_CODE_KEY = \"GMX-referralCode\";\nexport const REFERRALS_SELECTED_TAB_KEY = \"Referrals-selected-tab\";\n","import { useWeb3React } from \"@web3-react/core\";\nimport { SELECTED_NETWORK_LOCAL_STORAGE_KEY } from \"config/localStorage\";\nimport { DEFAULT_CHAIN_ID, SUPPORTED_CHAIN_IDS } from \"config/chains\";\n\nexport function useChainId() {\n  let { chainId } = useWeb3React();\n\n  if (!chainId) {\n    const chainIdFromLocalStorage = localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY);\n    if (chainIdFromLocalStorage) {\n      chainId = parseInt(chainIdFromLocalStorage);\n      if (!chainId) {\n        // localstorage value is invalid\n        localStorage.removeItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY);\n      }\n    }\n  }\n\n  if (!chainId || !SUPPORTED_CHAIN_IDS.includes(chainId)) {\n    chainId = DEFAULT_CHAIN_ID;\n  }\n\n  return { chainId };\n}\n","import { format as formatDateFn } from \"date-fns\";\n\nexport function formatDateTime(time: number) {\n  return formatDateFn(time * 1000, \"dd MMM yyyy, h:mm a\");\n}\n\nexport function formatDate(time: number) {\n  return formatDateFn(time * 1000, \"dd MMM yyyy\");\n}\n\nexport function getTimeRemaining(time: number) {\n  const now = parseInt(String(Date.now() / 1000));\n  if (time < now) {\n    return \"0h 0m\";\n  }\n  const diff = time - now;\n  const hours = parseInt(String(diff / (60 * 60)));\n  const minutes = parseInt(String((diff - hours * 60 * 60) / 60));\n  return `${hours}h ${minutes}m`;\n}\n\nexport function isValidTimestamp(timestamp: any) {\n  return new Date(timestamp).getTime() > 0;\n}\n","import { useEffect, useState } from \"react\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { ethers } from \"ethers\";\nimport { getContract } from \"config/contracts\";\nimport useSWR from \"swr\";\n\nimport OrderBookReader from \"abis/OrderBookReader.json\";\nimport OrderBook from \"abis/OrderBook.json\";\n\nimport { CHAIN_ID, getExplorerUrl } from \"config/chains\";\nimport { getServerBaseUrl } from \"config/backend\";\nimport { getMostAbundantStableToken } from \"domain/tokens\";\nimport { getTokenInfo } from \"domain/tokens/utils\";\nimport { getProvider } from \"./rpc\";\nimport { bigNumberify, expandDecimals, formatAmount } from \"./numbers\";\nimport { isValidToken } from \"config/tokens\";\nimport { useChainId } from \"./chains\";\nimport { isValidTimestamp } from \"./dates\";\nimport { t } from \"@lingui/macro\";\n\nconst { AddressZero } = ethers.constants;\n\n// use a random placeholder account instead of the zero address as the zero address might have tokens\nexport const PLACEHOLDER_ACCOUNT = ethers.Wallet.createRandom().address;\n\nexport const MIN_PROFIT_TIME = 0;\n\nexport const USDG_ADDRESS = getContract(CHAIN_ID, \"USDG\");\nexport const MAX_LEVERAGE = 100 * 10000;\n\nexport const MAX_PRICE_DEVIATION_BASIS_POINTS = 750;\nexport const DEFAULT_GAS_LIMIT = 1 * 1000 * 1000;\nexport const SECONDS_PER_YEAR = 31536000;\nexport const USDG_DECIMALS = 18;\n// export const USD_DECIMALS = 30;\nexport const USD_DECIMALS = 30;\nexport const BASIS_POINTS_DIVISOR = 10000;\nexport const DEPOSIT_FEE = 30;\nexport const DUST_BNB = \"2000000000000000\";\nexport const DUST_USD = expandDecimals(1, USD_DECIMALS);\nexport const PRECISION = expandDecimals(1, 30);\nexport const GLP_DECIMALS = 18;\nexport const GMX_DECIMALS = 18;\nexport const DEFAULT_MAX_USDG_AMOUNT = expandDecimals(200 * 1000 * 1000, 18);\n\nexport const TAX_BASIS_POINTS = 50;\nexport const STABLE_TAX_BASIS_POINTS = 5;\nexport const MINT_BURN_FEE_BASIS_POINTS = 25;\nexport const SWAP_FEE_BASIS_POINTS = 30;\nexport const STABLE_SWAP_FEE_BASIS_POINTS = 1;\nexport const MARGIN_FEE_BASIS_POINTS = 10;\n\nexport const LIQUIDATION_FEE = expandDecimals(5, USD_DECIMALS);\n\nexport const TRADES_PAGE_SIZE = 100;\n\nexport const GLP_COOLDOWN_DURATION = 15 * 60;\nexport const THRESHOLD_REDEMPTION_VALUE = expandDecimals(993, 27); // 0.993\nexport const FUNDING_RATE_PRECISION = 1000000;\n\nexport const SWAP = \"Swap\";\nexport const INCREASE = \"Increase\";\nexport const DECREASE = \"Decrease\";\nexport const LONG = \"Long\";\nexport const SHORT = \"Short\";\n\nexport const MARKET = \"Market\";\nexport const LIMIT = \"Limit\";\nexport const STOP = \"Stop\";\nexport const LEVERAGE_ORDER_OPTIONS = [MARKET, LIMIT, STOP];\nexport const SWAP_ORDER_OPTIONS = [MARKET, LIMIT];\nexport const SWAP_OPTIONS = [LONG, SHORT, SWAP];\nexport const DEFAULT_SLIPPAGE_AMOUNT = 30;\nexport const DEFAULT_HIGHER_SLIPPAGE_AMOUNT = 100;\n\nexport const REFERRAL_CODE_QUERY_PARAM = \"ref\";\nexport const MAX_REFERRAL_CODE_LENGTH = 20;\n\nexport const MIN_PROFIT_BIPS = 0;\n\nexport function deserialize(data) {\n  for (const [key, value] of Object.entries(data)) {\n    if (value._type === \"BigNumber\") {\n      data[key] = bigNumberify(value.value);\n    }\n  }\n  return data;\n}\n\nexport function isHomeSite() {\n  return process.env.REACT_APP_IS_HOME_SITE === \"true\";\n}\n\nexport function getLiquidationPriceFromDelta({ liquidationAmount, size, collateral, averagePrice, isLong }) {\n  if (!size || size.eq(0)) {\n    return;\n  }\n\n  if (liquidationAmount.gt(collateral)) {\n    const liquidationDelta = liquidationAmount.sub(collateral);\n    const priceDelta = liquidationDelta.mul(averagePrice).div(size);\n    return isLong ? averagePrice.add(priceDelta) : averagePrice.sub(priceDelta);\n  }\n\n  const liquidationDelta = collateral.sub(liquidationAmount);\n  const priceDelta = liquidationDelta.mul(averagePrice).div(size);\n\n  return isLong ? averagePrice.sub(priceDelta) : averagePrice.add(priceDelta);\n}\n\nexport function getMarginFee(sizeDelta) {\n  if (!sizeDelta) {\n    return bigNumberify(0);\n  }\n  const afterFeeUsd = sizeDelta.mul(BASIS_POINTS_DIVISOR - MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n  return sizeDelta.sub(afterFeeUsd);\n}\n\nexport function isTriggerRatioInverted(fromTokenInfo, toTokenInfo) {\n  if (!toTokenInfo || !fromTokenInfo) return false;\n  if (toTokenInfo.isStable || toTokenInfo.isUsdg) return true;\n  if (toTokenInfo.maxPrice) return toTokenInfo.maxPrice.lt(fromTokenInfo.maxPrice);\n  return false;\n}\n\nexport function getExchangeRate(tokenAInfo, tokenBInfo, inverted) {\n  if (!tokenAInfo || !tokenAInfo.minPrice || !tokenBInfo || !tokenBInfo.maxPrice) {\n    return;\n  }\n  if (inverted) {\n    return tokenAInfo.minPrice.mul(PRECISION).div(tokenBInfo.maxPrice);\n  }\n  return tokenBInfo.maxPrice.mul(PRECISION).div(tokenAInfo.minPrice);\n}\n\nexport function shouldInvertTriggerRatio(tokenA, tokenB) {\n  if (tokenB.isStable || tokenB.isUsdg) return true;\n  if (tokenB.maxPrice && tokenA.maxPrice && tokenB.maxPrice.lt(tokenA.maxPrice)) return true;\n  return false;\n}\n\nexport function getExchangeRateDisplay(rate, tokenA, tokenB, opts = {}) {\n  if (!rate || !tokenA || !tokenB) return \"...\";\n  if (shouldInvertTriggerRatio(tokenA, tokenB)) {\n    [tokenA, tokenB] = [tokenB, tokenA];\n    rate = PRECISION.mul(PRECISION).div(rate);\n  }\n  const rateValue = formatAmount(rate, USD_DECIMALS, tokenA.isStable || tokenA.isUsdg ? 2 : 4, true);\n  if (opts.omitSymbols) {\n    return rateValue;\n  }\n  return `${rateValue} ${tokenA.symbol} / ${tokenB.symbol}`;\n}\n\nconst adjustForDecimalsFactory = (n) => (number) => {\n  if (n === 0) {\n    return number;\n  }\n  if (n > 0) {\n    return number.mul(expandDecimals(1, n));\n  }\n  return number.div(expandDecimals(1, -n));\n};\n\nexport function adjustForDecimals(amount, divDecimals, mulDecimals) {\n  return amount.mul(expandDecimals(1, mulDecimals)).div(expandDecimals(1, divDecimals));\n}\n\nexport function getTargetUsdgAmount(token, usdgSupply, totalTokenWeights) {\n  if (!token || !token.weight || !usdgSupply) {\n    return;\n  }\n\n  if (usdgSupply.eq(0)) {\n    return bigNumberify(0);\n  }\n\n  return token.weight.mul(usdgSupply).div(totalTokenWeights);\n}\n\nexport function getFeeBasisPoints(\n  token,\n  usdgDelta,\n  feeBasisPoints,\n  taxBasisPoints,\n  increment,\n  usdgSupply,\n  totalTokenWeights\n) {\n  if (!token || !token.usdgAmount || !usdgSupply || !totalTokenWeights) {\n    return 0;\n  }\n\n  feeBasisPoints = bigNumberify(feeBasisPoints);\n  taxBasisPoints = bigNumberify(taxBasisPoints);\n\n  const initialAmount = token.usdgAmount;\n  let nextAmount = initialAmount.add(usdgDelta);\n  if (!increment) {\n    nextAmount = usdgDelta.gt(initialAmount) ? bigNumberify(0) : initialAmount.sub(usdgDelta);\n  }\n\n  const targetAmount = getTargetUsdgAmount(token, usdgSupply, totalTokenWeights);\n  if (!targetAmount || targetAmount.eq(0)) {\n    return feeBasisPoints.toNumber();\n  }\n\n  const initialDiff = initialAmount.gt(targetAmount)\n    ? initialAmount.sub(targetAmount)\n    : targetAmount.sub(initialAmount);\n  const nextDiff = nextAmount.gt(targetAmount) ? nextAmount.sub(targetAmount) : targetAmount.sub(nextAmount);\n\n  if (nextDiff.lt(initialDiff)) {\n    const rebateBps = taxBasisPoints.mul(initialDiff).div(targetAmount);\n    return rebateBps.gt(feeBasisPoints) ? 0 : feeBasisPoints.sub(rebateBps).toNumber();\n  }\n\n  let averageDiff = initialDiff.add(nextDiff).div(2);\n  if (averageDiff.gt(targetAmount)) {\n    averageDiff = targetAmount;\n  }\n  const taxBps = taxBasisPoints.mul(averageDiff).div(targetAmount);\n  return feeBasisPoints.add(taxBps).toNumber();\n}\n\nexport function getBuyGlpToAmount(fromAmount, swapTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\n  const defaultValue = { amount: bigNumberify(0), feeBasisPoints: 0 };\n  if (!fromAmount || !swapTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\n    return defaultValue;\n  }\n\n  const swapToken = getTokenInfo(infoTokens, swapTokenAddress);\n  if (!swapToken || !swapToken.minPrice) {\n    return defaultValue;\n  }\n\n  let glpAmount = fromAmount.mul(swapToken.minPrice).div(glpPrice);\n  glpAmount = adjustForDecimals(glpAmount, swapToken.decimals, USDG_DECIMALS);\n\n  let usdgAmount = fromAmount.mul(swapToken.minPrice).div(PRECISION);\n  usdgAmount = adjustForDecimals(usdgAmount, swapToken.decimals, USDG_DECIMALS);\n  const feeBasisPoints = getFeeBasisPoints(\n    swapToken,\n    usdgAmount,\n    MINT_BURN_FEE_BASIS_POINTS,\n    TAX_BASIS_POINTS,\n    true,\n    usdgSupply,\n    totalTokenWeights\n  );\n\n  glpAmount = glpAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n\n  return { amount: glpAmount, feeBasisPoints };\n}\n\nexport function getSellGlpFromAmount(toAmount, swapTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\n  const defaultValue = { amount: bigNumberify(0), feeBasisPoints: 0 };\n  if (!toAmount || !swapTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\n    return defaultValue;\n  }\n\n  const swapToken = getTokenInfo(infoTokens, swapTokenAddress);\n  if (!swapToken || !swapToken.maxPrice) {\n    return defaultValue;\n  }\n\n  let glpAmount = toAmount.mul(swapToken.maxPrice).div(glpPrice);\n  glpAmount = adjustForDecimals(glpAmount, swapToken.decimals, USDG_DECIMALS);\n\n  let usdgAmount = toAmount.mul(swapToken.maxPrice).div(PRECISION);\n  usdgAmount = adjustForDecimals(usdgAmount, swapToken.decimals, USDG_DECIMALS);\n  const feeBasisPoints = getFeeBasisPoints(\n    swapToken,\n    usdgAmount,\n    MINT_BURN_FEE_BASIS_POINTS,\n    TAX_BASIS_POINTS,\n    false,\n    usdgSupply,\n    totalTokenWeights\n  );\n\n  glpAmount = glpAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints);\n\n  return { amount: glpAmount, feeBasisPoints };\n}\n\nexport function getBuyGlpFromAmount(toAmount, fromTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\n  const defaultValue = { amount: bigNumberify(0) };\n  if (!toAmount || !fromTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\n    return defaultValue;\n  }\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  if (!fromToken || !fromToken.minPrice) {\n    return defaultValue;\n  }\n\n  let fromAmount = toAmount.mul(glpPrice).div(fromToken.minPrice);\n  fromAmount = adjustForDecimals(fromAmount, GLP_DECIMALS, fromToken.decimals);\n\n  const usdgAmount = toAmount.mul(glpPrice).div(PRECISION);\n  const feeBasisPoints = getFeeBasisPoints(\n    fromToken,\n    usdgAmount,\n    MINT_BURN_FEE_BASIS_POINTS,\n    TAX_BASIS_POINTS,\n    true,\n    usdgSupply,\n    totalTokenWeights\n  );\n\n  fromAmount = fromAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints);\n\n  return { amount: fromAmount, feeBasisPoints };\n}\n\nexport function getSellGlpToAmount(toAmount, fromTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\n  const defaultValue = { amount: bigNumberify(0) };\n  if (!toAmount || !fromTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\n    return defaultValue;\n  }\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  if (!fromToken || !fromToken.maxPrice) {\n    return defaultValue;\n  }\n\n  let fromAmount = toAmount.mul(glpPrice).div(fromToken.maxPrice);\n  fromAmount = adjustForDecimals(fromAmount, GLP_DECIMALS, fromToken.decimals);\n\n  const usdgAmount = toAmount.mul(glpPrice).div(PRECISION);\n  const feeBasisPoints = getFeeBasisPoints(\n    fromToken,\n    usdgAmount,\n    MINT_BURN_FEE_BASIS_POINTS,\n    TAX_BASIS_POINTS,\n    false,\n    usdgSupply,\n    totalTokenWeights\n  );\n\n  fromAmount = fromAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n\n  return { amount: fromAmount, feeBasisPoints };\n}\n\nexport function getNextFromAmount(\n  chainId,\n  toAmount,\n  fromTokenAddress,\n  toTokenAddress,\n  infoTokens,\n  toTokenPriceUsd,\n  ratio,\n  usdgSupply,\n  totalTokenWeights,\n  forSwap\n) {\n  const defaultValue = { amount: bigNumberify(0) };\n\n  if (!toAmount || !fromTokenAddress || !toTokenAddress || !infoTokens) {\n    return defaultValue;\n  }\n\n  if (fromTokenAddress === toTokenAddress) {\n    return { amount: toAmount };\n  }\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  const toToken = getTokenInfo(infoTokens, toTokenAddress);\n\n  if (fromToken.isNative && toToken.isWrapped) {\n    return { amount: toAmount };\n  }\n\n  if (fromToken.isWrapped && toToken.isNative) {\n    return { amount: toAmount };\n  }\n\n  // the realtime price should be used if it is for a transaction to open / close a position\n  // or if the transaction involves doing a swap and opening / closing a position\n  // otherwise use the contract price instead of realtime price for swaps\n\n  let fromTokenMinPrice;\n  if (fromToken) {\n    fromTokenMinPrice = forSwap ? fromToken.contractMinPrice : fromToken.minPrice;\n  }\n\n  let toTokenMaxPrice;\n  if (toToken) {\n    toTokenMaxPrice = forSwap ? toToken.contractMaxPrice : toToken.maxPrice;\n  }\n\n  if (!fromToken || !fromTokenMinPrice || !toToken || !toTokenMaxPrice) {\n    return defaultValue;\n  }\n\n  const adjustDecimals = adjustForDecimalsFactory(fromToken.decimals - toToken.decimals);\n\n  let fromAmountBasedOnRatio;\n  if (ratio && !ratio.isZero()) {\n    fromAmountBasedOnRatio = toAmount.mul(ratio).div(PRECISION);\n  }\n\n  const fromAmount =\n    ratio && !ratio.isZero() ? fromAmountBasedOnRatio : toAmount.mul(toTokenMaxPrice).div(fromTokenMinPrice);\n\n  let usdgAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\n  usdgAmount = adjustForDecimals(usdgAmount, toToken.decimals, USDG_DECIMALS);\n  const swapFeeBasisPoints =\n    fromToken.isStable && toToken.isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\n  const taxBasisPoints = fromToken.isStable && toToken.isStable ? STABLE_TAX_BASIS_POINTS : TAX_BASIS_POINTS;\n  const feeBasisPoints0 = getFeeBasisPoints(\n    fromToken,\n    usdgAmount,\n    swapFeeBasisPoints,\n    taxBasisPoints,\n    true,\n    usdgSupply,\n    totalTokenWeights\n  );\n  const feeBasisPoints1 = getFeeBasisPoints(\n    toToken,\n    usdgAmount,\n    swapFeeBasisPoints,\n    taxBasisPoints,\n    false,\n    usdgSupply,\n    totalTokenWeights\n  );\n  const feeBasisPoints = feeBasisPoints0 > feeBasisPoints1 ? feeBasisPoints0 : feeBasisPoints1;\n\n  return {\n    amount: adjustDecimals(fromAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints)),\n    feeBasisPoints,\n  };\n}\n\nexport function getNextToAmount(\n  chainId,\n  fromAmount,\n  fromTokenAddress,\n  toTokenAddress,\n  infoTokens,\n  toTokenPriceUsd,\n  ratio,\n  usdgSupply,\n  totalTokenWeights,\n  forSwap\n) {\n  const defaultValue = { amount: bigNumberify(0) };\n  if (!fromAmount || !fromTokenAddress || !toTokenAddress || !infoTokens) {\n    return defaultValue;\n  }\n\n  console.log(\"---shark getNextToAmount\");\n\n  if (fromTokenAddress === toTokenAddress) {\n    return { amount: fromAmount };\n  }\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  const toToken = getTokenInfo(infoTokens, toTokenAddress);\n\n  if (fromToken.isNative && toToken.isWrapped) {\n    return { amount: fromAmount };\n  }\n\n  if (fromToken.isWrapped && toToken.isNative) {\n    return { amount: fromAmount };\n  }\n\n  // the realtime price should be used if it is for a transaction to open / close a position\n  // or if the transaction involves doing a swap and opening / closing a position\n  // otherwise use the contract price instead of realtime price for swaps\n\n  let fromTokenMinPrice;\n  if (fromToken) {\n    fromTokenMinPrice = forSwap ? fromToken.contractMinPrice : fromToken.minPrice;\n  }\n\n  let toTokenMaxPrice;\n  if (toToken) {\n    toTokenMaxPrice = forSwap ? toToken.contractMaxPrice : toToken.maxPrice;\n  }\n\n  if (!fromTokenMinPrice || !toTokenMaxPrice) {\n    return defaultValue;\n  }\n\n  const adjustDecimals = adjustForDecimalsFactory(toToken.decimals - fromToken.decimals);\n\n  let toAmountBasedOnRatio = bigNumberify(0);\n  if (ratio && !ratio.isZero()) {\n    toAmountBasedOnRatio = fromAmount.mul(PRECISION).div(ratio);\n  }\n\n  if (toTokenAddress === USDG_ADDRESS) {\n    const feeBasisPoints = getSwapFeeBasisPoints(fromToken.isStable);\n\n    if (ratio && !ratio.isZero()) {\n      const toAmount = toAmountBasedOnRatio;\n      return {\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n        feeBasisPoints,\n      };\n    }\n\n    const toAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\n    return {\n      amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n      feeBasisPoints,\n    };\n  }\n\n  if (fromTokenAddress === USDG_ADDRESS) {\n    const redemptionValue = toToken.redemptionAmount\n      .mul(toTokenPriceUsd || toTokenMaxPrice)\n      .div(expandDecimals(1, toToken.decimals));\n\n    if (redemptionValue.gt(THRESHOLD_REDEMPTION_VALUE)) {\n      const feeBasisPoints = getSwapFeeBasisPoints(toToken.isStable);\n\n      const toAmount =\n        ratio && !ratio.isZero()\n          ? toAmountBasedOnRatio\n          : fromAmount.mul(toToken.redemptionAmount).div(expandDecimals(1, toToken.decimals));\n\n      return {\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n        feeBasisPoints,\n      };\n    }\n\n    const expectedAmount = fromAmount;\n\n    const stableToken = getMostAbundantStableToken(chainId, infoTokens);\n    if (!stableToken || stableToken.availableAmount.lt(expectedAmount)) {\n      const toAmount =\n        ratio && !ratio.isZero()\n          ? toAmountBasedOnRatio\n          : fromAmount.mul(toToken.redemptionAmount).div(expandDecimals(1, toToken.decimals));\n      const feeBasisPoints = getSwapFeeBasisPoints(toToken.isStable);\n      return {\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n        feeBasisPoints,\n      };\n    }\n\n    const feeBasisPoints0 = getSwapFeeBasisPoints(true);\n    const feeBasisPoints1 = getSwapFeeBasisPoints(false);\n\n    if (ratio && !ratio.isZero()) {\n      const toAmount = toAmountBasedOnRatio\n        .mul(BASIS_POINTS_DIVISOR - feeBasisPoints0 - feeBasisPoints1)\n        .div(BASIS_POINTS_DIVISOR);\n      return {\n        amount: adjustDecimals(toAmount),\n        path: [USDG_ADDRESS, stableToken.address, toToken.address],\n        feeBasisPoints: feeBasisPoints0 + feeBasisPoints1,\n      };\n    }\n\n    // get toAmount for USDG => stableToken\n    let toAmount = fromAmount.mul(PRECISION).div(stableToken.maxPrice);\n    // apply USDG => stableToken fees\n    toAmount = toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints0).div(BASIS_POINTS_DIVISOR);\n\n    // get toAmount for stableToken => toToken\n    toAmount = toAmount.mul(stableToken.minPrice).div(toTokenPriceUsd || toTokenMaxPrice);\n    // apply stableToken => toToken fees\n    toAmount = toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints1).div(BASIS_POINTS_DIVISOR);\n\n    return {\n      amount: adjustDecimals(toAmount),\n      path: [USDG_ADDRESS, stableToken.address, toToken.address],\n      feeBasisPoints: feeBasisPoints0 + feeBasisPoints1,\n    };\n  }\n\n  const toAmount =\n    ratio && !ratio.isZero()\n      ? toAmountBasedOnRatio\n      : fromAmount.mul(fromTokenMinPrice).div(toTokenPriceUsd || toTokenMaxPrice);\n\n  let usdgAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\n  usdgAmount = adjustForDecimals(usdgAmount, fromToken.decimals, USDG_DECIMALS);\n  const swapFeeBasisPoints =\n    fromToken.isStable && toToken.isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\n  const taxBasisPoints = fromToken.isStable && toToken.isStable ? STABLE_TAX_BASIS_POINTS : TAX_BASIS_POINTS;\n  const feeBasisPoints0 = getFeeBasisPoints(\n    fromToken,\n    usdgAmount,\n    swapFeeBasisPoints,\n    taxBasisPoints,\n    true,\n    usdgSupply,\n    totalTokenWeights\n  );\n  const feeBasisPoints1 = getFeeBasisPoints(\n    toToken,\n    usdgAmount,\n    swapFeeBasisPoints,\n    taxBasisPoints,\n    false,\n    usdgSupply,\n    totalTokenWeights\n  );\n  const feeBasisPoints = feeBasisPoints0 > feeBasisPoints1 ? feeBasisPoints0 : feeBasisPoints1;\n\n  return {\n    amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n    feeBasisPoints,\n  };\n}\n\nexport function getProfitPrice(closePrice, position) {\n  let profitPrice;\n  if (position && position.averagePrice && closePrice) {\n    profitPrice = position.isLong\n      ? position.averagePrice.mul(BASIS_POINTS_DIVISOR + MIN_PROFIT_BIPS).div(BASIS_POINTS_DIVISOR)\n      : position.averagePrice.mul(BASIS_POINTS_DIVISOR - MIN_PROFIT_BIPS).div(BASIS_POINTS_DIVISOR);\n  }\n  return profitPrice;\n}\n\nexport function calculatePositionDelta(\n  price,\n  { size, collateral, isLong, averagePrice, lastIncreasedTime },\n  sizeDelta\n) {\n  if (!sizeDelta) {\n    sizeDelta = size;\n  }\n  const priceDelta = averagePrice.gt(price) ? averagePrice.sub(price) : price.sub(averagePrice);\n  let delta = sizeDelta.mul(priceDelta).div(averagePrice);\n  const pendingDelta = delta;\n\n  const minProfitExpired = lastIncreasedTime + MIN_PROFIT_TIME < Date.now() / 1000;\n  const hasProfit = isLong ? price.gt(averagePrice) : price.lt(averagePrice);\n  if (!minProfitExpired && hasProfit && delta.mul(BASIS_POINTS_DIVISOR).lte(size.mul(MIN_PROFIT_BIPS))) {\n    delta = bigNumberify(0);\n  }\n\n  const deltaPercentage = delta.mul(BASIS_POINTS_DIVISOR).div(collateral);\n  const pendingDeltaPercentage = pendingDelta.mul(BASIS_POINTS_DIVISOR).div(collateral);\n\n  return {\n    delta,\n    pendingDelta,\n    pendingDeltaPercentage,\n    hasProfit,\n    deltaPercentage,\n  };\n}\n\nexport function getDeltaStr({ delta, deltaPercentage, hasProfit }) {\n  let deltaStr;\n  let deltaPercentageStr;\n\n  if (delta.gt(0)) {\n    deltaStr = hasProfit ? \"+\" : \"-\";\n    deltaPercentageStr = hasProfit ? \"+\" : \"-\";\n  } else {\n    deltaStr = \"\";\n    deltaPercentageStr = \"\";\n  }\n  deltaStr += `$${formatAmount(delta, USD_DECIMALS, 2, true)}`;\n  deltaPercentageStr += `${formatAmount(deltaPercentage, 2, 2)}%`;\n\n  return { deltaStr, deltaPercentageStr };\n}\n\nexport function getLeverage({\n  size,\n  sizeDelta,\n  increaseSize,\n  collateral,\n  collateralDelta,\n  increaseCollateral,\n  entryFundingRate,\n  cumulativeFundingRate,\n  hasProfit,\n  delta,\n  includeDelta,\n}) {\n  if (!size && !sizeDelta) {\n    return;\n  }\n  if (!collateral && !collateralDelta) {\n    return;\n  }\n\n  let nextSize = size ? size : bigNumberify(0);\n  if (sizeDelta) {\n    if (increaseSize) {\n      nextSize = size.add(sizeDelta);\n    } else {\n      if (sizeDelta.gte(size)) {\n        return;\n      }\n      nextSize = size.sub(sizeDelta);\n    }\n  }\n\n  let remainingCollateral = collateral ? collateral : bigNumberify(0);\n  if (collateralDelta) {\n    if (increaseCollateral) {\n      remainingCollateral = collateral.add(collateralDelta);\n    } else {\n      if (collateralDelta.gte(collateral)) {\n        return;\n      }\n      remainingCollateral = collateral.sub(collateralDelta);\n    }\n  }\n\n  if (delta && includeDelta) {\n    if (hasProfit) {\n      remainingCollateral = remainingCollateral.add(delta);\n    } else {\n      if (delta.gt(remainingCollateral)) {\n        return;\n      }\n\n      remainingCollateral = remainingCollateral.sub(delta);\n    }\n  }\n\n  if (remainingCollateral.eq(0)) {\n    return;\n  }\n\n  remainingCollateral = sizeDelta\n    ? remainingCollateral.mul(BASIS_POINTS_DIVISOR - MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR)\n    : remainingCollateral;\n  if (entryFundingRate && cumulativeFundingRate) {\n    const fundingFee = size.mul(cumulativeFundingRate.sub(entryFundingRate)).div(FUNDING_RATE_PRECISION);\n    remainingCollateral = remainingCollateral.sub(fundingFee);\n  }\n\n  return nextSize.mul(BASIS_POINTS_DIVISOR).div(remainingCollateral);\n}\n\nexport function getLiquidationPrice(data) {\n  let {\n    isLong,\n    size,\n    collateral,\n    averagePrice,\n    entryFundingRate,\n    cumulativeFundingRate,\n    sizeDelta,\n    collateralDelta,\n    increaseCollateral,\n    increaseSize,\n    delta,\n    hasProfit,\n    includeDelta,\n  } = data;\n  if (!size || !collateral || !averagePrice) {\n    return;\n  }\n\n  let nextSize = size ? size : bigNumberify(0);\n  let remainingCollateral = collateral;\n\n  if (sizeDelta) {\n    if (increaseSize) {\n      nextSize = size.add(sizeDelta);\n    } else {\n      if (sizeDelta.gte(size)) {\n        return;\n      }\n      nextSize = size.sub(sizeDelta);\n    }\n\n    if (includeDelta && !hasProfit) {\n      const adjustedDelta = sizeDelta.mul(delta).div(size);\n      remainingCollateral = remainingCollateral.sub(adjustedDelta);\n    }\n  }\n\n  if (collateralDelta) {\n    if (increaseCollateral) {\n      remainingCollateral = remainingCollateral.add(collateralDelta);\n    } else {\n      if (collateralDelta.gte(remainingCollateral)) {\n        return;\n      }\n      remainingCollateral = remainingCollateral.sub(collateralDelta);\n    }\n  }\n\n  let positionFee = getMarginFee(size).add(LIQUIDATION_FEE);\n  if (entryFundingRate && cumulativeFundingRate) {\n    const fundingFee = size.mul(cumulativeFundingRate.sub(entryFundingRate)).div(FUNDING_RATE_PRECISION);\n    positionFee = positionFee.add(fundingFee);\n  }\n\n  const liquidationPriceForFees = getLiquidationPriceFromDelta({\n    liquidationAmount: positionFee,\n    size: nextSize,\n    collateral: remainingCollateral,\n    averagePrice,\n    isLong,\n  });\n\n  const liquidationPriceForMaxLeverage = getLiquidationPriceFromDelta({\n    liquidationAmount: nextSize.mul(BASIS_POINTS_DIVISOR).div(MAX_LEVERAGE),\n    size: nextSize,\n    collateral: remainingCollateral,\n    averagePrice,\n    isLong,\n  });\n\n  if (!liquidationPriceForFees) {\n    return liquidationPriceForMaxLeverage;\n  }\n  if (!liquidationPriceForMaxLeverage) {\n    return liquidationPriceForFees;\n  }\n\n  if (isLong) {\n    // return the higher price\n    return liquidationPriceForFees.gt(liquidationPriceForMaxLeverage)\n      ? liquidationPriceForFees\n      : liquidationPriceForMaxLeverage;\n  }\n\n  // return the lower price\n  return liquidationPriceForFees.lt(liquidationPriceForMaxLeverage)\n    ? liquidationPriceForFees\n    : liquidationPriceForMaxLeverage;\n}\n\nexport function getPositionKey(account, collateralTokenAddress, indexTokenAddress, isLong, nativeTokenAddress) {\n  const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\n  const tokenAddress1 = indexTokenAddress === AddressZero ? nativeTokenAddress : indexTokenAddress;\n  return account + \":\" + tokenAddress0 + \":\" + tokenAddress1 + \":\" + isLong;\n}\n\nexport function getPositionContractKey(account, collateralToken, indexToken, isLong) {\n  return ethers.utils.solidityKeccak256(\n    [\"address\", \"address\", \"address\", \"bool\"],\n    [account, collateralToken, indexToken, isLong]\n  );\n}\n\nexport function getSwapFeeBasisPoints(isStable) {\n  return isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\n}\n\nexport function shortenAddress(address, length) {\n  if (!length) {\n    return \"\";\n  }\n  if (!address) {\n    return address;\n  }\n  if (address.length < 10) {\n    return address;\n  }\n  let left = Math.floor((length - 3) / 2) + 1;\n  return address.substring(0, left) + \"...\" + address.substring(address.length - (length - (left + 3)), address.length);\n}\n\nexport function useENS(address) {\n  const [ensName, setENSName] = useState();\n\n  useEffect(() => {\n    async function resolveENS() {\n      if (address) {\n        const provider = new ethers.providers.JsonRpcProvider(\"https://rpc.ankr.com/eth\");\n        const name = await provider.lookupAddress(address.toLowerCase());\n        if (name) setENSName(name);\n      }\n    }\n    resolveENS();\n  }, [address]);\n\n  return { ensName };\n}\n\nfunction _parseOrdersData(ordersData, account, indexes, extractor, uintPropsLength, addressPropsLength) {\n  if (!ordersData || ordersData.length === 0) {\n    return [];\n  }\n  const [uintProps, addressProps] = ordersData;\n  const count = uintProps.length / uintPropsLength;\n\n  const orders = [];\n  for (let i = 0; i < count; i++) {\n    const sliced = addressProps\n      .slice(addressPropsLength * i, addressPropsLength * (i + 1))\n      .concat(uintProps.slice(uintPropsLength * i, uintPropsLength * (i + 1)));\n\n    if (sliced[0] === AddressZero && sliced[1] === AddressZero) {\n      continue;\n    }\n\n    const order = extractor(sliced);\n    order.index = indexes[i];\n    order.account = account;\n    orders.push(order);\n  }\n\n  return orders;\n}\n\nfunction parseDecreaseOrdersData(chainId, decreaseOrdersData, account, indexes) {\n  const extractor = (sliced) => {\n    const isLong = sliced[4].toString() === \"1\";\n    return {\n      collateralToken: sliced[0],\n      indexToken: sliced[1],\n      collateralDelta: sliced[2],\n      sizeDelta: sliced[3],\n      isLong,\n      triggerPrice: sliced[5],\n      triggerAboveThreshold: sliced[6].toString() === \"1\",\n      type: DECREASE,\n    };\n  };\n  return _parseOrdersData(decreaseOrdersData, account, indexes, extractor, 5, 2).filter((order) => {\n    return isValidToken(chainId, order.collateralToken) && isValidToken(chainId, order.indexToken);\n  });\n}\n\nfunction parseIncreaseOrdersData(chainId, increaseOrdersData, account, indexes) {\n  const extractor = (sliced) => {\n    const isLong = sliced[5].toString() === \"1\";\n    return {\n      purchaseToken: sliced[0],\n      collateralToken: sliced[1],\n      indexToken: sliced[2],\n      purchaseTokenAmount: sliced[3],\n      sizeDelta: sliced[4],\n      isLong,\n      triggerPrice: sliced[6],\n      triggerAboveThreshold: sliced[7].toString() === \"1\",\n      type: INCREASE,\n    };\n  };\n  return _parseOrdersData(increaseOrdersData, account, indexes, extractor, 5, 3).filter((order) => {\n    return (\n      isValidToken(chainId, order.purchaseToken) &&\n      isValidToken(chainId, order.collateralToken) &&\n      isValidToken(chainId, order.indexToken)\n    );\n  });\n}\n\nfunction parseSwapOrdersData(chainId, swapOrdersData, account, indexes) {\n  if (!swapOrdersData || !swapOrdersData.length) {\n    return [];\n  }\n\n  const extractor = (sliced) => {\n    const triggerAboveThreshold = sliced[6].toString() === \"1\";\n    const shouldUnwrap = sliced[7].toString() === \"1\";\n\n    return {\n      path: [sliced[0], sliced[1], sliced[2]].filter((address) => address !== AddressZero),\n      amountIn: sliced[3],\n      minOut: sliced[4],\n      triggerRatio: sliced[5],\n      triggerAboveThreshold,\n      type: SWAP,\n      shouldUnwrap,\n    };\n  };\n  return _parseOrdersData(swapOrdersData, account, indexes, extractor, 5, 3).filter((order) => {\n    return order.path.every((token) => isValidToken(chainId, token));\n  });\n}\n\nexport function getOrderKey(order) {\n  return `${order.type}-${order.account}-${order.index}`;\n}\n\nexport function useAccountOrders(flagOrdersEnabled, overrideAccount) {\n  const { library, account: connectedAccount } = useWeb3React();\n  const active = true; // this is used in Actions.js so set active to always be true\n  const account = overrideAccount || connectedAccount;\n\n  const { chainId } = useChainId();\n  const shouldRequest = active && account && flagOrdersEnabled;\n\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const orderBookReaderAddress = getContract(chainId, \"OrderBookReader\");\n  const key = shouldRequest ? [active, chainId, orderBookAddress, account] : false;\n  const {\n    data: orders = [],\n    mutate: updateOrders,\n    error: ordersError,\n  } = useSWR(key, {\n    dedupingInterval: 5000,\n    fetcher: async (active, chainId, orderBookAddress, account) => {\n      const provider = getProvider(library, chainId);\n      const orderBookContract = new ethers.Contract(orderBookAddress, OrderBook.abi, provider);\n      const orderBookReaderContract = new ethers.Contract(orderBookReaderAddress, OrderBookReader.abi, provider);\n\n      const fetchIndexesFromServer = () => {\n        const ordersIndexesUrl = `${getServerBaseUrl(chainId)}/orders_indices?account=${account}`;\n        return fetch(ordersIndexesUrl)\n          .then(async (res) => {\n            const json = await res.json();\n            const ret = {};\n            for (const key of Object.keys(json)) {\n              ret[key.toLowerCase()] = json[key].map((val) => parseInt(val.value)).sort((a, b) => a - b);\n            }\n\n            return ret;\n          })\n          .catch(() => ({ swap: [], increase: [], decrease: [] }));\n      };\n\n      const fetchLastIndex = async (type) => {\n        const method = type.toLowerCase() + \"OrdersIndex\";\n        return await orderBookContract[method](account).then((res) => bigNumberify(res._hex).toNumber());\n      };\n\n      const fetchLastIndexes = async () => {\n        const [swap, increase, decrease] = await Promise.all([\n          fetchLastIndex(\"swap\"),\n          fetchLastIndex(\"increase\"),\n          fetchLastIndex(\"decrease\"),\n        ]);\n\n        return { swap, increase, decrease };\n      };\n\n      const getRange = (to, from) => {\n        const LIMIT = 10;\n        const _indexes = [];\n        from = from || Math.max(to - LIMIT, 0);\n        for (let i = to - 1; i >= from; i--) {\n          _indexes.push(i);\n        }\n        return _indexes;\n      };\n\n      const getIndexes = (knownIndexes, lastIndex) => {\n        if (knownIndexes.length === 0) {\n          return getRange(lastIndex);\n        }\n        return [\n          ...knownIndexes,\n          ...getRange(lastIndex, knownIndexes[knownIndexes.length - 1] + 1).sort((a, b) => b - a),\n        ];\n      };\n\n      const getOrders = async (method, knownIndexes, lastIndex, parseFunc) => {\n        const indexes = getIndexes(knownIndexes, lastIndex);\n        const ordersData = await orderBookReaderContract[method](orderBookAddress, account, indexes);\n        const orders = parseFunc(chainId, ordersData, account, indexes);\n\n        return orders;\n      };\n\n      try {\n        const [serverIndexes, lastIndexes] = await Promise.all([fetchIndexesFromServer(), fetchLastIndexes()]);\n        const [swapOrders = [], increaseOrders = [], decreaseOrders = []] = await Promise.all([\n          getOrders(\"getSwapOrders\", serverIndexes.swap, lastIndexes.swap, parseSwapOrdersData),\n          getOrders(\"getIncreaseOrders\", serverIndexes.increase, lastIndexes.increase, parseIncreaseOrdersData),\n          getOrders(\"getDecreaseOrders\", serverIndexes.decrease, lastIndexes.decrease, parseDecreaseOrdersData),\n        ]);\n        return [...swapOrders, ...increaseOrders, ...decreaseOrders];\n      } catch (ex) {\n        console.error(ex);\n      }\n    },\n  });\n\n  return [orders, updateOrders, ordersError];\n}\n\nexport function getAccountUrl(chainId, account) {\n  if (!account) {\n    return getExplorerUrl(chainId);\n  }\n  return getExplorerUrl(chainId) + \"address/\" + account;\n}\n\nexport function isMobileDevice(navigator) {\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n}\n\nexport const CHART_PERIODS = {\n  \"5m\": 60 * 5,\n  \"15m\": 60 * 15,\n  \"1h\": 60 * 60,\n  \"4h\": 60 * 60 * 4,\n  \"1d\": 60 * 60 * 24,\n};\n\nexport function getTotalVolumeSum(volumes) {\n  if (!volumes || volumes.length === 0) {\n    return;\n  }\n\n  let volume = bigNumberify(0);\n\n  for (let i = 0; i < volumes.length; i++) {\n    volume = volume.add(volumes[i].data.volume);\n  }\n\n  return volume;\n}\n\nexport function getBalanceAndSupplyData(balances) {\n  if (!balances || balances.length === 0) {\n    return {};\n  }\n\n  const keys = [\"gmx\", \"esGmx\", \"glp\", \"stakedGmxTracker\"];\n  const balanceData = {};\n  const supplyData = {};\n  const propsLength = 2;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    balanceData[key] = balances[i * propsLength];\n    supplyData[key] = balances[i * propsLength + 1];\n  }\n\n  return { balanceData, supplyData };\n}\n\nexport function getDepositBalanceData(depositBalances) {\n  if (!depositBalances || depositBalances.length === 0) {\n    return;\n  }\n\n  const keys = [\n    \"gmxInStakedGmx\",\n    \"esGmxInStakedGmx\",\n    \"stakedGmxInBonusGmx\",\n    \"bonusGmxInFeeGmx\",\n    \"bnGmxInFeeGmx\",\n    \"glpInStakedGlp\",\n  ];\n  const data = {};\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = depositBalances[i];\n  }\n\n  return data;\n}\n\nexport function getVestingData(vestingInfo) {\n  if (!vestingInfo || vestingInfo.length === 0) {\n    return;\n  }\n\n  const keys = [\"gmxVester\", \"glpVester\"];\n  const data = {};\n  const propsLength = 7;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = {\n      pairAmount: vestingInfo[i * propsLength],\n      vestedAmount: vestingInfo[i * propsLength + 1],\n      escrowedBalance: vestingInfo[i * propsLength + 2],\n      claimedAmounts: vestingInfo[i * propsLength + 3],\n      claimable: vestingInfo[i * propsLength + 4],\n      maxVestableAmount: vestingInfo[i * propsLength + 5],\n      averageStakedAmount: vestingInfo[i * propsLength + 6],\n    };\n\n    data[key + \"PairAmount\"] = data[key].pairAmount;\n    data[key + \"VestedAmount\"] = data[key].vestedAmount;\n    data[key + \"EscrowedBalance\"] = data[key].escrowedBalance;\n    data[key + \"ClaimSum\"] = data[key].claimedAmounts.add(data[key].claimable);\n    data[key + \"Claimable\"] = data[key].claimable;\n    data[key + \"MaxVestableAmount\"] = data[key].maxVestableAmount;\n    data[key + \"AverageStakedAmount\"] = data[key].averageStakedAmount;\n  }\n\n  return data;\n}\n\nexport function getStakingData(stakingInfo) {\n  if (!stakingInfo || stakingInfo.length === 0) {\n    return;\n  }\n\n  const keys = [\"stakedGmxTracker\", \"bonusGmxTracker\", \"feeGmxTracker\", \"stakedGlpTracker\", \"feeGlpTracker\"];\n  const data = {};\n  const propsLength = 5;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = {\n      claimable: stakingInfo[i * propsLength],\n      tokensPerInterval: stakingInfo[i * propsLength + 1],\n      averageStakedAmounts: stakingInfo[i * propsLength + 2],\n      cumulativeRewards: stakingInfo[i * propsLength + 3],\n      totalSupply: stakingInfo[i * propsLength + 4],\n    };\n  }\n\n  return data;\n}\n\nexport function getProcessedData(\n  balanceData,\n  supplyData,\n  depositBalanceData,\n  stakingData,\n  vestingData,\n  aum,\n  nativeTokenPrice,\n  stakedGmxSupply,\n  gmxPrice,\n  gmxSupply\n) {\n  if (\n    !balanceData ||\n    !supplyData ||\n    !depositBalanceData ||\n    !stakingData ||\n    !vestingData ||\n    !aum ||\n    !nativeTokenPrice ||\n    !stakedGmxSupply ||\n    !gmxPrice ||\n    !gmxSupply\n  ) {\n    return {};\n  }\n\n  const data = {};\n\n  data.gmxBalance = balanceData.gmx;\n  data.gmxBalanceUsd = balanceData.gmx.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.gmxSupply = bigNumberify(gmxSupply);\n\n  data.gmxSupplyUsd = data.gmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n  data.stakedGmxSupply = stakedGmxSupply;\n  data.stakedGmxSupplyUsd = stakedGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n  data.gmxInStakedGmx = depositBalanceData.gmxInStakedGmx;\n  data.gmxInStakedGmxUsd = depositBalanceData.gmxInStakedGmx.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.esGmxBalance = balanceData.esGmx;\n  data.esGmxBalanceUsd = balanceData.esGmx.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.stakedGmxTrackerSupply = supplyData.stakedGmxTracker;\n  data.stakedGmxTrackerSupplyUsd = supplyData.stakedGmxTracker.mul(gmxPrice).div(expandDecimals(1, 18));\n  data.stakedEsGmxSupply = data.stakedGmxTrackerSupply.sub(data.stakedGmxSupply);\n  data.stakedEsGmxSupplyUsd = data.stakedEsGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.esGmxInStakedGmx = depositBalanceData.esGmxInStakedGmx;\n  data.esGmxInStakedGmxUsd = depositBalanceData.esGmxInStakedGmx.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.bnGmxInFeeGmx = depositBalanceData.bnGmxInFeeGmx;\n  data.bonusGmxInFeeGmx = depositBalanceData.bonusGmxInFeeGmx;\n  data.feeGmxSupply = stakingData.feeGmxTracker.totalSupply;\n  data.feeGmxSupplyUsd = data.feeGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.stakedGmxTrackerRewards = stakingData.stakedGmxTracker.claimable;\n  data.stakedGmxTrackerRewardsUsd = stakingData.stakedGmxTracker.claimable.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.bonusGmxTrackerRewards = stakingData.bonusGmxTracker.claimable;\n\n  data.feeGmxTrackerRewards = stakingData.feeGmxTracker.claimable;\n  data.feeGmxTrackerRewardsUsd = stakingData.feeGmxTracker.claimable.mul(nativeTokenPrice).div(expandDecimals(1, 18));\n\n  data.boostBasisPoints = bigNumberify(0);\n  if (data && data.bnGmxInFeeGmx && data.bonusGmxInFeeGmx && data.bonusGmxInFeeGmx.gt(0)) {\n    data.boostBasisPoints = data.bnGmxInFeeGmx.mul(BASIS_POINTS_DIVISOR).div(data.bonusGmxInFeeGmx);\n  }\n\n  data.stakedGmxTrackerAnnualRewardsUsd = stakingData.stakedGmxTracker.tokensPerInterval\n    .mul(SECONDS_PER_YEAR)\n    .mul(gmxPrice)\n    .div(expandDecimals(1, 18));\n  data.gmxAprForEsGmx =\n    data.stakedGmxTrackerSupplyUsd && data.stakedGmxTrackerSupplyUsd.gt(0)\n      ? data.stakedGmxTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.stakedGmxTrackerSupplyUsd)\n      : bigNumberify(0);\n  data.feeGmxTrackerAnnualRewardsUsd = stakingData.feeGmxTracker.tokensPerInterval\n    .mul(SECONDS_PER_YEAR)\n    .mul(nativeTokenPrice)\n    .div(expandDecimals(1, 18));\n  data.gmxAprForNativeToken =\n    data.feeGmxSupplyUsd && data.feeGmxSupplyUsd.gt(0)\n      ? data.feeGmxTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.feeGmxSupplyUsd)\n      : bigNumberify(0);\n  data.gmxBoostAprForNativeToken = data.gmxAprForNativeToken.mul(data.boostBasisPoints).div(BASIS_POINTS_DIVISOR);\n  data.gmxAprTotal = data.gmxAprForNativeToken.add(data.gmxAprForEsGmx);\n  data.gmxAprTotalWithBoost = data.gmxAprForNativeToken.add(data.gmxBoostAprForNativeToken).add(data.gmxAprForEsGmx);\n  data.gmxAprForNativeTokenWithBoost = data.gmxAprForNativeToken.add(data.gmxBoostAprForNativeToken);\n\n  data.totalGmxRewardsUsd = data.stakedGmxTrackerRewardsUsd.add(data.feeGmxTrackerRewardsUsd);\n\n  data.glpSupply = supplyData.glp;\n  data.glpPrice =\n    data.glpSupply && data.glpSupply.gt(0)\n      ? aum.mul(expandDecimals(1, GLP_DECIMALS)).div(data.glpSupply)\n      : bigNumberify(0);\n\n  data.glpSupplyUsd = supplyData.glp.mul(data.glpPrice).div(expandDecimals(1, 18));\n\n  data.glpBalance = depositBalanceData.glpInStakedGlp;\n  data.glpBalanceUsd = depositBalanceData.glpInStakedGlp.mul(data.glpPrice).div(expandDecimals(1, GLP_DECIMALS));\n\n  data.stakedGlpTrackerRewards = stakingData.stakedGlpTracker.claimable;\n  data.stakedGlpTrackerRewardsUsd = stakingData.stakedGlpTracker.claimable.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.feeGlpTrackerRewards = stakingData.feeGlpTracker.claimable;\n  data.feeGlpTrackerRewardsUsd = stakingData.feeGlpTracker.claimable.mul(nativeTokenPrice).div(expandDecimals(1, 18));\n\n  data.stakedGlpTrackerAnnualRewardsUsd = stakingData.stakedGlpTracker.tokensPerInterval\n    .mul(SECONDS_PER_YEAR)\n    .mul(gmxPrice)\n    .div(expandDecimals(1, 18));\n  data.glpAprForEsGmx =\n    data.glpSupplyUsd && data.glpSupplyUsd.gt(0)\n      ? data.stakedGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.glpSupplyUsd)\n      : bigNumberify(0);\n  data.feeGlpTrackerAnnualRewardsUsd = stakingData.feeGlpTracker.tokensPerInterval\n    .mul(SECONDS_PER_YEAR)\n    .mul(nativeTokenPrice)\n    .div(expandDecimals(1, 18));\n  data.glpAprForNativeToken =\n    data.glpSupplyUsd && data.glpSupplyUsd.gt(0)\n      ? data.feeGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.glpSupplyUsd)\n      : bigNumberify(0);\n  data.glpAprTotal = data.glpAprForNativeToken.add(data.glpAprForEsGmx);\n\n  data.totalGlpRewardsUsd = data.stakedGlpTrackerRewardsUsd.add(data.feeGlpTrackerRewardsUsd);\n\n  data.totalEsGmxRewards = data.stakedGmxTrackerRewards.add(data.stakedGlpTrackerRewards);\n  data.totalEsGmxRewardsUsd = data.stakedGmxTrackerRewardsUsd.add(data.stakedGlpTrackerRewardsUsd);\n\n  data.gmxVesterRewards = vestingData.gmxVester.claimable;\n  data.glpVesterRewards = vestingData.glpVester.claimable;\n  data.totalVesterRewards = data.gmxVesterRewards.add(data.glpVesterRewards);\n  data.totalVesterRewardsUsd = data.totalVesterRewards.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.totalNativeTokenRewards = data.feeGmxTrackerRewards.add(data.feeGlpTrackerRewards);\n  data.totalNativeTokenRewardsUsd = data.feeGmxTrackerRewardsUsd.add(data.feeGlpTrackerRewardsUsd);\n\n  data.totalRewardsUsd = data.totalEsGmxRewardsUsd.add(data.totalNativeTokenRewardsUsd).add(data.totalVesterRewardsUsd);\n\n  return data;\n}\n\nexport function getPageTitle(data) {\n  return `${data} | Decentralized\n  Perpetual Exchange | $AMX`;\n}\n\nexport function isHashZero(value) {\n  return value === ethers.constants.HashZero;\n}\nexport function isAddressZero(value) {\n  return value === ethers.constants.AddressZero;\n}\n\nexport function isDevelopment() {\n  return !window.location.host?.includes(\"gmx.io\") && !window.location.host?.includes(\"ipfs.io\");\n}\n\nexport function isLocal() {\n  return window.location.host?.includes(\"localhost\");\n}\n\nexport function getHomeUrl() {\n  if (isLocal()) {\n    return \"http://localhost:3010\";\n  }\n\n  return \"https://app.amx.exchange/\";\n}\n\nexport function getAppBaseUrl() {\n  if (isLocal()) {\n    return \"http://localhost:3011/#\";\n  }\n\n  return \"https://app.amx.exchange/#\";\n}\n\nexport function getRootShareApiUrl() {\n  if (isLocal()) {\n    return \"https://gmxs.vercel.app\";\n  }\n\n  return \"https://share.gmx.io\";\n}\n\nexport function getTradePageUrl() {\n  if (isLocal()) {\n    return \"http://localhost:3011/#/trade\";\n  }\n\n  return \"https://app.amx.exchange/#/trade\";\n}\n\nexport function importImage(name) {\n  let tokenImage = null;\n  try {\n    tokenImage = require(\"img/\" + name);\n  } catch (error) {\n    console.error(error);\n  }\n  return tokenImage?.default;\n}\n\nexport function getTwitterIntentURL(text, url = \"\", hashtag = \"\") {\n  let finalURL = \"https://twitter.com/intent/tweet?text=\";\n  if (text.length > 0) {\n    finalURL += Array.isArray(text) ? text.map((t) => encodeURIComponent(t)).join(\"%0a%0a\") : encodeURIComponent(text);\n    if (hashtag.length > 0) {\n      finalURL += \"&hashtags=\" + encodeURIComponent(hashtag.replace(/#/g, \"\"));\n    }\n    if (url.length > 0) {\n      finalURL += \"&url=\" + encodeURIComponent(url);\n    }\n  }\n  return finalURL;\n}\n\nexport function getPositionForOrder(account, order, positionsMap) {\n  const key = getPositionKey(account, order.collateralToken, order.indexToken, order.isLong);\n  const position = positionsMap[key];\n  return position && position.size && position.size.gt(0) ? position : null;\n}\n\nexport function getOrderError(account, order, positionsMap, position) {\n  if (order.type !== DECREASE) {\n    return;\n  }\n\n  const positionForOrder = position ? position : getPositionForOrder(account, order, positionsMap);\n\n  if (!positionForOrder) {\n    return t`No open position, order cannot be executed unless a position is opened`;\n  }\n  if (positionForOrder.size.lt(order.sizeDelta)) {\n    return t`Order size is bigger than position, will only be executable if position increases`;\n  }\n\n  if (positionForOrder.size.gt(order.sizeDelta)) {\n    if (positionForOrder.size.sub(order.sizeDelta).lt(positionForOrder.collateral.sub(order.collateralDelta))) {\n      return t`Order cannot be executed as it would reduce the position's leverage below 1`;\n    }\n    if (positionForOrder.size.sub(order.sizeDelta).lt(expandDecimals(5, USD_DECIMALS))) {\n      return t`Order cannot be executed as the remaining position would be smaller than $5.00`;\n    }\n  }\n}\n\nexport function arrayURLFetcher(...urlArr) {\n  const fetcher = (url) => fetch(url).then((res) => res.json());\n  return Promise.all(urlArr.map(fetcher));\n}\n\nexport function shouldShowRedirectModal(timestamp) {\n  const thirtyDays = 1000 * 60 * 60 * 24 * 30;\n  const expiryTime = timestamp + thirtyDays;\n  return !isValidTimestamp(timestamp) || Date.now() > expiryTime;\n}\n","import React from \"react\";\nimport cx from \"classnames\";\nimport { t } from \"@lingui/macro\";\nimport \"./Footer.css\";\nimport logoImg from \"img/ic_gmx_footer.svg\";\nimport twitterIcon from \"img/ic_twitter.svg\";\nimport discordIcon from \"img/ic_discord.svg\";\nimport telegramIcon from \"img/ic_telegram.svg\";\nimport githubIcon from \"img/ic_github.svg\";\nimport mediumIcon from \"img/ic_medium.svg\";\nimport { NavLink } from \"react-router-dom\";\nimport { isHomeSite, getAppBaseUrl, shouldShowRedirectModal } from \"lib/legacy\";\n\nconst footerLinks = {\n  home: [\n    { text: t`Terms and Conditions`, link: \"/terms-and-conditions\" },\n    { text: t`Referral Terms`, link: \"https://amxdex.gitbook.io/amxdex/how-it-works/referrals\", external: true },\n    { text: t`Media Kit`, link: \"https://amxdex.gitbook.io/amxdex/\", external: true },\n    // { text: \"Jobs\", link: \"/jobs\", isAppLink: true },\n  ],\n  app: [\n    { text: t`Terms and Conditions`, link: \"/terms-and-conditions\" },\n    { text: t`Referral Terms`, link: \"/referral-terms\" },\n    { text: t`Media Kit`, link: \"https://amxdex.gitbook.io/amxdex/\", external: true },\n    // { text: \"Jobs\", link: \"/jobs\" },\n  ],\n};\n\nconst socialLinks = [\n  { link: \"https://twitter.com/amxdex\", name: \"Twitter\", icon: twitterIcon },\n  { link: \"https://amxdex.medium.com/\", name: \"Medium\", icon: mediumIcon },\n  { link: \"https://github.com/Amx-Dex\", name: \"Github\", icon: githubIcon },\n  { link: \"https://t.me/amxdex\", name: \"Telegram\", icon: telegramIcon },\n  { link: \"https://discord.gg/amx\", name: \"Discord\", icon: discordIcon },\n];\n\ntype Props = { showRedirectModal?: (to: string) => void; redirectPopupTimestamp?: () => void };\n\nexport default function Footer({ showRedirectModal, redirectPopupTimestamp }: Props) {\n  const isHome = isHomeSite();\n\n  return (\n    <div className=\"Footer\">\n      <div className={cx(\"Footer-wrapper\", { home: isHome })}>\n        <div className=\"Footer-logo\">\n          <img src={logoImg} alt=\"MetaMask\" />\n        </div>\n        <div className=\"Footer-social-link-block\">\n          {socialLinks.map((platform) => {\n            return (\n              <a\n                key={platform.name}\n                className=\"App-social-link\"\n                href={platform.link}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <img src={platform.icon} alt={platform.name} />\n              </a>\n            );\n          })}\n        </div>\n        <div className=\"Footer-links\">\n          {/* {footerLinks[isHome ? \"home\" : \"app\"].map(({ external, text, link, isAppLink }) => { */}\n          {footerLinks[isHome ? \"home\" : \"app\"].map(({ external, text, link }) => {\n            if (external) {\n              return (\n                <a key={text} target=\"_blank\" href={link} className=\"Footer-link\" rel=\"noopener noreferrer\">\n                  {text}\n                </a>\n              );\n            }\n            // if (isAppLink) {\n            //   if (shouldShowRedirectModal(redirectPopupTimestamp)) {\n            //     return (\n            //       <div key={text} className=\"Footer-link a\" onClick={() => showRedirectModal(link)}>\n            //         {text}\n            //       </div>\n            //     );\n            //   } else {\n            //     const baseUrl = getAppBaseUrl();\n            //     return (\n            //       <a key={text} href={baseUrl + link} className=\"Footer-link\">\n            //         {text}\n            //       </a>\n            //     );\n            //   }\n            // }\n            return (\n              <NavLink key={link} to={link} className=\"Footer-link\" activeClassName=\"active\">\n                {text}\n              </NavLink>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n","export const REDIRECT_POPUP_TIMESTAMP_KEY = \"redirect-popup-timestamp\";\n\nexport const IS_TOUCH = \"ontouchstart\" in window;\n\nexport const UI_VERSION = \"1.4\";\n\nexport const TRIGGER_PREFIX_ABOVE = \">\";\nexport const TRIGGER_PREFIX_BELOW = \"<\";\n","import { ApolloClient, InMemoryCache } from \"@apollo/client\";\n\nexport function createClient(uri: string) {\n  return new ApolloClient({\n    uri,\n    cache: new InMemoryCache(),\n  });\n}\n","import { ARBITRUM, POLYGON } from \"./chains\";\n\nexport const SUBGRAPH_URLS = {\n  [ARBITRUM]: {\n    stats: \"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-stats\",\n    referrals: \"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-arbitrum-referrals\",\n    nissohVault: \"https://api.thegraph.com/subgraphs/name/nissoh/gmx-vault\",\n  },\n\n \n  [POLYGON]: {\n    stats: \"https://api.thegraph.com/subgraphs/name/davidblockdev/amx-avalanche-stats\",\n    // stats: \"https://api.thegraph.com/subgraphs/name/hspdev0814/amx_avalanche_trade_info_test\",\n    referrals: \"https://api.thegraph.com/subgraphs/name/davidblockdev/amx-avalanche-referrals\",\n    trades:\"https://api.thegraph.com/subgraphs/name/davidblockdev/amx-avalanche-trade\",\n  },\n\n  common: {\n    chainLink: \"https://api.thegraph.com/subgraphs/name/deividask/chainlink\",\n  },\n};\n","import { createClient } from \"./utils\";\nimport { SUBGRAPH_URLS } from \"config/subgraph\";\nimport { ARBITRUM, ARBITRUM_TESTNET, POLYGON } from \"config/chains\";\n\nexport const chainlinkClient = createClient(SUBGRAPH_URLS.common.chainLink);\n\nexport const arbitrumGraphClient = createClient(SUBGRAPH_URLS[ARBITRUM].stats);\nexport const arbitrumReferralsGraphClient = createClient(SUBGRAPH_URLS[ARBITRUM].referrals);\nexport const nissohGraphClient = createClient(SUBGRAPH_URLS[ARBITRUM].nissohVault);\n\nexport const polygonGraphClient = createClient(SUBGRAPH_URLS[POLYGON].stats);\nexport const polygonReferralsGraphClient = createClient(SUBGRAPH_URLS[POLYGON].referrals);\n\nexport const polygonGraphClientForTrades = createClient(SUBGRAPH_URLS[POLYGON].trades);\n\nexport function getGmxGraphClient(chainId: number) {\n  if (chainId === ARBITRUM) {\n    return arbitrumGraphClient;\n  } else if (chainId === POLYGON) {\n    return polygonGraphClient;\n  } else if (chainId === ARBITRUM_TESTNET) {\n    return null;\n  }\n\n  throw new Error(`Unsupported chain ${chainId}`);\n}\n","export function sleep(ms) {\n  return new Promise((resolve) => resolve(), ms);\n}\n","import { useMemo } from \"react\";\nimport { gql } from \"@apollo/client\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\n\nimport { USD_DECIMALS, CHART_PERIODS } from \"lib/legacy\";\nimport { GMX_STATS_API_URL } from \"config/backend\";\nimport { chainlinkClient } from \"lib/subgraph/clients\";\nimport { sleep } from \"lib/sleep\";\nimport { formatAmount } from \"lib/numbers\";\n\nconst BigNumber = ethers.BigNumber;\n\n// Ethereum network, Chainlink Aggregator contracts\nconst FEED_ID_MAP = {\n  BTC_USD: \"0xae74faa92cb67a95ebcab07358bc222e33a34da7\",\n  ETH_USD: \"0x37bc7498f4ff12c19678ee8fe19d713b87f6a9e6\",\n  BNB_USD: \"0xc45ebd0f901ba6b2b8c7e70b717778f055ef5e6d\",\n  LINK_USD: \"0xdfd03bfc3465107ce570a0397b247f546a42d0fa\",\n  UNI_USD: \"0x68577f915131087199fe48913d8b416b3984fd38\",\n  SUSHI_USD: \"0x7213536a36094cd8a768a5e45203ec286cba2d74\",\n  MATIC_USD: \"0x0fc3657899693648bba4dbd2d8b33b82e875105d\",\n  AAVE_USD: \"0xe3f0dede4b499c07e12475087ab1a084b5f93bc0\",\n  YFI_USD: \"0x8a4d74003870064d41d4f84940550911fbfccf04\",\n  SPELL_USD: \"0x8640b23468815902e011948f3ab173e1e83f9879\",\n};\nconst timezoneOffset = -new Date().getTimezoneOffset() * 60;\n\nfunction fillGaps(prices, periodSeconds) {\n  if (prices.length < 2) {\n    return prices;\n  }\n\n  const newPrices = [prices[0]];\n  let prevTime = prices[0].time;\n  for (let i = 1; i < prices.length; i++) {\n    const { time, open } = prices[i];\n    if (prevTime) {\n      let j = (time - prevTime) / periodSeconds - 1;\n      while (j > 0) {\n        newPrices.push({\n          time: time - j * periodSeconds,\n          open,\n          close: open,\n          high: open * 1.0003,\n          low: open * 0.9996,\n        });\n        j--;\n      }\n    }\n\n    prevTime = time;\n    newPrices.push(prices[i]);\n  }\n\n  return newPrices;\n}\n\nasync function getChartPricesFromStats(chainId, symbol, period) {\n  console.log(\"---shark getChartPricesFromStats\");\n  if ([\"WBTC\", \"WETH\", \"WMATIC\"].includes(symbol)) {\n    symbol = symbol.substr(1);\n  } else if (symbol === \"BTC.b\") {\n    symbol = \"BTC\";\n  }\n\n  const timeDiff = CHART_PERIODS[period] * 3000;\n  const from = Math.floor(Date.now() / 1000 - timeDiff);\n  const url = `${GMX_STATS_API_URL}/candles/${symbol}?preferableChainId=${chainId}&period=${period}&from=${from}&preferableSource=fast`;\n\n  const TIMEOUT = 5000;\n  const res = await new Promise(async (resolve, reject) => {\n    let done = false;\n    setTimeout(() => {\n      done = true;\n      reject(new Error(`request timeout ${url}`));\n    }, TIMEOUT);\n\n    let lastEx;\n    for (let i = 0; i < 3; i++) {\n      if (done) return;\n      try {\n        const res = await fetch(url);\n        resolve(res);\n        return;\n      } catch (ex) {\n        await sleep(300);\n        lastEx = ex;\n      }\n    }\n    reject(lastEx);\n  });\n  if (!res.ok) {\n    throw new Error(`request failed ${res.status} ${res.statusText}`);\n  }\n  const json = await res.json();\n  let prices = json?.prices;\n  if (!prices || prices.length < 10) {\n    throw new Error(`not enough prices data: ${prices?.length}`);\n  }\n\n  const OBSOLETE_THRESHOLD = Date.now() / 1000 - 60 * 30; // 30 min ago\n  const updatedAt = json?.updatedAt || 0;\n  if (updatedAt < OBSOLETE_THRESHOLD) {\n    throw new Error(\n      \"chart data is obsolete, last price record at \" +\n        new Date(updatedAt * 1000).toISOString() +\n        \" now: \" +\n        new Date().toISOString()\n    );\n  }\n\n  prices = prices.map(({ t, o: open, c: close, h: high, l: low }) => ({\n    time: t + timezoneOffset,\n    open,\n    close,\n    high,\n    low,\n  }));\n  return prices;\n}\n\nfunction getCandlesFromPrices(prices, period) {\n  const periodTime = CHART_PERIODS[period];\n\n  if (prices.length < 2) {\n    return [];\n  }\n\n  const candles = [];\n  const first = prices[0];\n  let prevTsGroup = Math.floor(first[0] / periodTime) * periodTime;\n  let prevPrice = first[1];\n  let o = prevPrice;\n  let h = prevPrice;\n  let l = prevPrice;\n  let c = prevPrice;\n  for (let i = 1; i < prices.length; i++) {\n    const [ts, price] = prices[i];\n    const tsGroup = Math.floor(ts / periodTime) * periodTime;\n    if (prevTsGroup !== tsGroup) {\n      candles.push({ t: prevTsGroup + timezoneOffset, o, h, l, c });\n      o = c;\n      h = Math.max(o, c);\n      l = Math.min(o, c);\n    }\n    c = price;\n    h = Math.max(h, price);\n    l = Math.min(l, price);\n    prevTsGroup = tsGroup;\n  }\n\n  return candles.map(({ t: time, o: open, c: close, h: high, l: low }) => ({\n    time,\n    open,\n    close,\n    high,\n    low,\n  }));\n}\n\nfunction getChainlinkChartPricesFromGraph(tokenSymbol, period) {\n  if ([\"WBTC\", \"WETH\", \"WMATIC\"].includes(tokenSymbol)) {\n    tokenSymbol = tokenSymbol.substr(1);\n  }\n\n  const marketName = tokenSymbol + \"_USD\";\n  const feedId = FEED_ID_MAP[marketName];\n  if (!feedId) {\n    throw new Error(`undefined marketName ${marketName}`);\n  }\n\n  const PER_CHUNK = 1000;\n  const CHUNKS_TOTAL = 6;\n  const requests = [];\n  for (let i = 0; i < CHUNKS_TOTAL; i++) {\n    const query = gql(`{\n      rounds(\n        first: ${PER_CHUNK},\n        skip: ${i * PER_CHUNK},\n        orderBy: unixTimestamp,\n        orderDirection: desc,\n        where: {feed: \"${feedId}\"}\n      ) {\n        unixTimestamp,\n        value\n      }\n    }`);\n    requests.push(chainlinkClient.query({ query }));\n  }\n\n  return Promise.all(requests)\n    .then((chunks) => {\n      let prices = [];\n      const uniqTs = new Set();\n      chunks.forEach((chunk) => {\n        chunk.data.rounds.forEach((item) => {\n          if (uniqTs.has(item.unixTimestamp)) {\n            return;\n          }\n\n          uniqTs.add(item.unixTimestamp);\n          prices.push([item.unixTimestamp, Number(item.value) / 1e8]);\n        });\n      });\n\n      prices.sort(([timeA], [timeB]) => timeA - timeB);\n      prices = getCandlesFromPrices(prices, period);\n      return prices;\n    })\n    .catch((err) => {\n      console.error(err);\n    });\n}\n\nexport function useChartPrices(chainId, symbol, isStable, period, currentAveragePrice) {\n  const swrKey = !isStable && symbol ? [\"getChartCandles\", chainId, symbol, period] : null;\n  let { data: prices, mutate: updatePrices } = useSWR(swrKey, {\n    fetcher: async (...args) => {\n      try {\n        return await getChartPricesFromStats(chainId, symbol, period);\n      } catch (ex) {\n        console.warn(ex);\n        console.warn(\"Switching to graph chainlink data\");\n        try {\n          return await getChainlinkChartPricesFromGraph(symbol, period);\n        } catch (ex2) {\n          console.warn(\"getChainlinkChartPricesFromGraph failed\");\n          console.warn(ex2);\n          return [];\n        }\n      }\n    },\n    dedupingInterval: 60000,\n    focusThrottleInterval: 60000 * 10,\n  });\n\n  const currentAveragePriceString = currentAveragePrice && currentAveragePrice.toString();\n  const retPrices = useMemo(() => {\n    if (isStable) {\n      return getStablePriceData(period);\n    }\n\n    if (!prices) {\n      return [];\n    }\n\n    let _prices = [...prices];\n    if (currentAveragePriceString && prices.length) {\n      _prices = appendCurrentAveragePrice(_prices, BigNumber.from(currentAveragePriceString), period);\n    }\n\n    return fillGaps(_prices, CHART_PERIODS[period]);\n  }, [prices, isStable, currentAveragePriceString, period]);\n\n  return [retPrices, updatePrices];\n}\n\nfunction appendCurrentAveragePrice(prices, currentAveragePrice, period) {\n  const periodSeconds = CHART_PERIODS[period];\n  const currentCandleTime = Math.floor(Date.now() / 1000 / periodSeconds) * periodSeconds + timezoneOffset;\n  const last = prices[prices.length - 1];\n  const averagePriceValue = parseFloat(formatAmount(currentAveragePrice, USD_DECIMALS, 2));\n  if (currentCandleTime === last.time) {\n    last.close = averagePriceValue;\n    last.high = Math.max(last.high, averagePriceValue);\n    last.low = Math.max(last.low, averagePriceValue);\n    return prices;\n  } else {\n    const newCandle = {\n      time: currentCandleTime,\n      open: last.close,\n      close: averagePriceValue,\n      high: averagePriceValue,\n      low: averagePriceValue,\n    };\n    return [...prices, newCandle];\n  }\n}\n\nfunction getStablePriceData(period) {\n  const periodSeconds = CHART_PERIODS[period];\n  const now = Math.floor(Date.now() / 1000 / periodSeconds) * periodSeconds;\n  let priceData = [];\n  for (let i = 100; i > 0; i--) {\n    priceData.push({\n      time: now - i * periodSeconds,\n      open: 1,\n      close: 1,\n      high: 1,\n      low: 1,\n    });\n  }\n  return priceData;\n}\n","import { ethers } from \"ethers\";\nimport { gql } from \"@apollo/client\";\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { Token as UniToken } from \"@uniswap/sdk-core\";\nimport { Pool } from \"@uniswap/v3-sdk\";\nimport useSWR from \"swr\";\nimport { chain, sumBy, sortBy, maxBy, minBy } from 'lodash'\n\nimport OrderBook from \"abis/OrderBook.json\";\nimport PositionManager from \"abis/PositionManager.json\";\nimport Vault from \"abis/Vault.json\";\nimport Router from \"abis/Router.json\";\nimport UniPool from \"abis/UniPool.json\";\nimport UniswapV2 from \"abis/UniswapV2.json\";\nimport Token from \"abis/Token.json\";\nimport PositionRouter from \"abis/PositionRouter.json\";\n\nimport { getContract } from \"config/contracts\";\nimport { ARBITRUM, ARBITRUM_TESTNET, POLYGON, getConstant, getHighExecutionFee } from \"config/chains\";\nimport { DECREASE, getOrderKey, INCREASE, SWAP, USD_DECIMALS } from \"lib/legacy\";\n\nimport { groupBy } from \"lodash\";\nimport { UI_VERSION } from \"config/ui\";\nimport { getServerBaseUrl, getServerUrl } from \"config/backend\";\nimport { getGmxGraphClient, nissohGraphClient, polygonGraphClientForTrades } from \"lib/subgraph/clients\";\nimport { callContract, contractFetcher } from \"lib/contracts\";\nimport { replaceNativeTokenAddress } from \"./tokens\";\nimport { getUsd } from \"./tokens/utils\";\nimport { getProvider } from \"lib/rpc\";\nimport { bigNumberify, expandDecimals, parseValue } from \"lib/numbers\";\nimport { getTokenBySymbol } from \"config/tokens\";\nimport { t } from \"@lingui/macro\";\n\nexport * from \"./prices\";\n\nconst NOW_TS = parseInt(Date.now() / 1000)\nconst FIRST_DATE_TS = parseInt(+(new Date(2022, 10, 1)) / 1000)\nconst MOVING_AVERAGE_DAYS = 7\nconst MOVING_AVERAGE_PERIOD = 86400 * MOVING_AVERAGE_DAYS\nconst { AddressZero } = ethers.constants;\n\nexport function useAllOrdersStats(chainId) {\n  const query = gql(`{\n    orderStat(id: \"total\") {\n      openSwap\n      openIncrease\n      openDecrease\n      executedSwap\n      executedIncrease\n      executedDecrease\n      cancelledSwap\n      cancelledIncrease\n      cancelledDecrease\n    }\n  }`);\n\n  const [res, setRes] = useState();\n\n  useEffect(() => {\n    const graphClient = getGmxGraphClient(chainId);\n    if (graphClient) {\n      graphClient.query({ query }).then(setRes).catch(console.warn);\n    }\n  }, [setRes, query, chainId]);\n\n  return res ? res.data.orderStat : null;\n}\n\nexport function usePositionStates(chainId) {\n  const [res, setRes] = useState();\n  useEffect(() => {\n    const query = gql(`\n    {\n      swaps(\n        first: 1000\n        where: {timestamp_gt: 0}\n        orderBy: timestamp\n      ) {\n        account\n        tokenIn\n        tokenOut\n        amountIn\n        amountOut\n        timestamp\n        transaction\n      }\n      createIncreasePositions(\n        first: 1000, \n        where: {timestamp_gt: 0}\n        orderBy: timestamp\n        ) {\n      account\n      collateralToken\n      indexToken\n      isLong\n      amountIn\n    \n      sizeDelta\n      acceptablePrice\n      executionFee\n    \n      transaction\n      timestamp\n    }\n        \n    createDecreasePositions(\n        first: 1000, \n        where: {timestamp_gt: 0}\n        orderBy: timestamp\n        ) {\n      account\n      collateralToken\n      indexToken\n      isLong\n      \n    \n      sizeDelta\n      acceptablePrice\n      executionFee\n    \n      transaction\n      timestamp\n    }\n    \n    cancelIncreasePositions(\n        first: 1000, \n        where: {timestamp_gt: 0}\n        orderBy: timestamp\n        ) {\n      account\n      \n      indexToken\n      isLong\n      \n    \n      sizeDelta\n      acceptablePrice\n    \n      transaction\n      timestamp\n    }\n    \n    cancelDecreasePositions(\n        first: 1000, \n        where: {timestamp_gt: 0}\n        orderBy: timestamp\n        ) {\n      account\n      \n      indexToken\n      isLong\n      \n    \n      sizeDelta\n      acceptablePrice\n    \n      transaction\n      timestamp\n    }\n    \n    orders(\n        first: 1000, \n        where: {createdTimestamp_gt: 0}\n        orderBy: createdTimestamp\n        ) {\n      type\n      account\n      status\n      index\n      size\n    \n      indexToken\n      isLong\n    \n      collateralToken\n      collateral\n    \n      triggerPrice\n      triggerAboveThreshold\n    \n      createdTimestamp\n      cancelledTimestamp\n      executedTimestamp\n      transaction\n    }\n    \n    }`);\n    if (!polygonGraphClientForTrades) {\n      return;\n    }\n\n    polygonGraphClientForTrades\n      .query({ query })\n      .then((res) => {\n        setRes(res);\n      })\n      .catch((err) => {\n          console.error(err);\n        }\n      );\n\n\n  }, [setRes, chainId]);\n\n  const tradeVolueDataMap = useMemo(() => {\n    if (!res) {\n      return [];\n    }\n    const tradeData = res.data;\n    const superArray = {\n      totalLongPositionCollaterals\t:\tbigNumberify(0),\n      totalLongPositionSizes\t:\tbigNumberify(0),\n      totalShortPositionCollaterals\t:\tbigNumberify(0),\n      totalShortPositionSizes\t:\tbigNumberify(0),\n      totalActivePositions\t:\t0\n    };\n\n    tradeData.createIncreasePositions.forEach((item) => {\n      if(item.isLong) {\n        superArray.totalLongPositionCollaterals = superArray.totalLongPositionCollaterals.add(bigNumberify(item.amountIn));\n        superArray.totalLongPositionSizes = superArray.totalLongPositionSizes.add(bigNumberify(item.amountIn));\n      } else {\n        superArray.totalShortPositionCollaterals = superArray.totalShortPositionCollaterals.add(bigNumberify(item.amountIn));\n        superArray.totalShortPositionSizes = superArray.totalShortPositionSizes.add(bigNumberify(item.amountIn));\n      }\n      superArray.totalActivePositions += 1;\n    });\n\n    // tradeData.createDecreasePositions.forEach((item) => {\n    //   const obj = {\n    //     timestamp: item.timestamp,\n    //     group: 1669248000,\n    //     action: \"CreateDecreasePosition\",\n    //     token: ethers.utils.getAddress(item.indexToken),\n    //     volume: item.amountOut,\n    //   };\n    //   const parent = {\n    //     data: obj\n    //   };\n    //   superArray.push(parent);\n    // });\n\n\n    // tradeData.orders.forEach((item) => {\n      \n    //   const obj = {\n    //     timestamp: item.createdTimestamp,\n    //     group: 1669248000,\n    //     action: \"CreateIncreaseOrder\",\n    //     token: ethers.utils.getAddress(item.indexToken),\n    //     volume: item.size\n    //   };\n    //   const parent = {\n    //     data: obj\n    //   };\n    //   superArray.push(parent);\n    // });\n\n\n    // const mapData = new Map();\n\n    // return tradeHistoryData.forEach((item) => ({\n    //   data: item\n    // }));\n    return superArray;\n  }, [res]);\n\n  return tradeVolueDataMap;\n}\n\nexport function useTotalVolume() {\n  const [res, setRes] = useState();\n  useEffect(() => {\n    const query = gql(`\n    {\n      swaps(\n        first: 1000\n        where: {timestamp_gt: 0}\n        orderBy: timestamp\n      ) {\n        account\n        tokenIn\n        tokenOut\n        amountIn\n        amountOut\n        timestamp\n        transaction\n      }\n      createIncreasePositions(\n        first: 1000, \n        where: {timestamp_gt: 0}\n        orderBy: timestamp\n        ) {\n      account\n      collateralToken\n      indexToken\n      isLong\n      amountIn\n    \n      sizeDelta\n      acceptablePrice\n      executionFee\n    \n      transaction\n      timestamp\n    }\n        \n    createDecreasePositions(\n        first: 1000, \n        where: {timestamp_gt: 0}\n        orderBy: timestamp\n        ) {\n      account\n      collateralToken\n      indexToken\n      isLong\n      \n    \n      sizeDelta\n      acceptablePrice\n      executionFee\n    \n      transaction\n      timestamp\n    }\n    \n    cancelIncreasePositions(\n        first: 1000, \n        where: {timestamp_gt: 0}\n        orderBy: timestamp\n        ) {\n      account\n      \n      indexToken\n      isLong\n      \n    \n      sizeDelta\n      acceptablePrice\n    \n      transaction\n      timestamp\n    }\n    \n    cancelDecreasePositions(\n        first: 1000, \n        where: {timestamp_gt: 0}\n        orderBy: timestamp\n        ) {\n      account\n      \n      indexToken\n      isLong\n      \n    \n      sizeDelta\n      acceptablePrice\n    \n      transaction\n      timestamp\n    }\n    \n    orders(\n        first: 1000, \n        where: {createdTimestamp_gt: 0}\n        orderBy: createdTimestamp\n        ) {\n      type\n      account\n      status\n      index\n      size\n    \n      indexToken\n      isLong\n    \n      collateralToken\n      collateral\n    \n      triggerPrice\n      triggerAboveThreshold\n    \n      createdTimestamp\n      cancelledTimestamp\n      executedTimestamp\n      transaction\n    }\n    \n    }`);\n\n    if (!polygonGraphClientForTrades) {\n      return;\n    }\n\n    polygonGraphClientForTrades\n      .query({ query })\n      .then((res) => {\n        setRes(res);\n      })\n      .catch((err) => {\n          console.error(err);\n        }\n      );\n\n\n  }, [setRes]);\n\n  const tradeVolueDataMap = useMemo(() => {\n    if (!res) {\n      return [];\n    }\n    const tradeData = res.data;\n    let superArray = bigNumberify(0);\n    tradeData.swaps.forEach((item) => {\n      superArray = superArray.add(item.amountIn);\n    });\n\n    tradeData.createIncreasePositions.forEach((item) => {\n      superArray = superArray.add(item.amountIn);\n    });\n\n    tradeData.createDecreasePositions.forEach((item) => {\n      // superArray.add(bigNumberify(item.amountOut));\n    });\n\n\n    tradeData.orders.forEach((item) => {\n      superArray = superArray.add(item.size);\n    });\n    \n    return superArray;\n  }, [res]);\n\n  return tradeVolueDataMap;\n}\n\nexport function useTradeVolumeHistory(chainId) {\n  const [res, setRes] = useState();\n  useEffect(() => {\n    const query = gql(`\n    {\n      swaps(\n        first: 1000\n        where: {timestamp_gt: 0}\n        orderBy: timestamp\n      ) {\n        account\n        tokenIn\n        tokenOut\n        amountIn\n        amountOut\n        timestamp\n        transaction\n      }\n      createIncreasePositions(\n        first: 1000, \n        where: {timestamp_gt: 0}\n        orderBy: timestamp\n        ) {\n      account\n      collateralToken\n      indexToken\n      isLong\n      amountIn\n    \n      sizeDelta\n      acceptablePrice\n      executionFee\n    \n      transaction\n      timestamp\n    }\n        \n    createDecreasePositions(\n        first: 1000, \n        where: {timestamp_gt: 0}\n        orderBy: timestamp\n        ) {\n      account\n      collateralToken\n      indexToken\n      isLong\n      \n    \n      sizeDelta\n      acceptablePrice\n      executionFee\n    \n      transaction\n      timestamp\n    }\n    \n    cancelIncreasePositions(\n        first: 1000, \n        where: {timestamp_gt: 0}\n        orderBy: timestamp\n        ) {\n      account\n      \n      indexToken\n      isLong\n      \n    \n      sizeDelta\n      acceptablePrice\n    \n      transaction\n      timestamp\n    }\n    \n    cancelDecreasePositions(\n        first: 1000, \n        where: {timestamp_gt: 0}\n        orderBy: timestamp\n        ) {\n      account\n      \n      indexToken\n      isLong\n      \n    \n      sizeDelta\n      acceptablePrice\n    \n      transaction\n      timestamp\n    }\n    \n    orders(\n        first: 1000, \n        where: {createdTimestamp_gt: 0}\n        orderBy: createdTimestamp\n        ) {\n      type\n      account\n      status\n      index\n      size\n    \n      indexToken\n      isLong\n    \n      collateralToken\n      collateral\n    \n      triggerPrice\n      triggerAboveThreshold\n    \n      createdTimestamp\n      cancelledTimestamp\n      executedTimestamp\n      transaction\n    }\n    \n    }`);\n    if (!polygonGraphClientForTrades) {\n      return;\n    }\n\n    polygonGraphClientForTrades\n      .query({ query })\n      .then((res) => {\n        setRes(res);\n      })\n      .catch((err) => {\n          console.error(err);\n        }\n      );\n\n\n  }, [setRes, chainId]);\n\n  const tradeVolueDataMap = useMemo(() => {\n    if (!res) {\n      return [];\n    }\n    const tradeData = res.data;\n    const superArray = [];\n    tradeData.swaps.forEach((item) => {\n      const obj = {\n        timestamp: item.timestamp,\n        group: 1669248000,\n        action: \"Swap\",\n        token: ethers.utils.getAddress(item.tokenOut),\n        volume: item.amountIn\n      };\n      const parent = {\n        data: obj\n      };\n      superArray.push(parent);\n    });\n\n    tradeData.createIncreasePositions.forEach((item) => {\n      const obj = {\n        timestamp: item.timestamp,\n        group: 1669248000,\n        action: \"CreateIncreasePosition\",\n        token: ethers.utils.getAddress(item.indexToken),\n        volume: item.amountIn,\n      };\n      const parent = {\n        data: obj\n      };\n      superArray.push(parent);\n    });\n\n    tradeData.createDecreasePositions.forEach((item) => {\n      const obj = {\n        timestamp: item.timestamp,\n        group: 1669248000,\n        action: \"CreateDecreasePosition\",\n        token: ethers.utils.getAddress(item.indexToken),\n        volume: item.amountOut,\n      };\n      const parent = {\n        data: obj\n      };\n      superArray.push(parent);\n    });\n\n\n    tradeData.orders.forEach((item) => {\n      \n      const obj = {\n        timestamp: item.createdTimestamp,\n        group: 1669248000,\n        action: \"CreateIncreaseOrder\",\n        token: ethers.utils.getAddress(item.indexToken),\n        volume: item.size\n      };\n      const parent = {\n        data: obj\n      };\n      superArray.push(parent);\n    });\n\n\n    // const mapData = new Map();\n\n    // return tradeHistoryData.forEach((item) => ({\n    //   data: item\n    // }));\n    superArray.sort((a, b) => b.timestamp - a.timestamp);\n    return superArray;\n  }, [res]);\n\n  return tradeVolueDataMap;\n}\n\nexport function useAllTradesHistory(chainId, account) {\n  const [res, setRes] = useState();\n\n  \n\n  useEffect(() => {\n    if (account) {\n      const query = gql(`\n      {\n        swaps(\n          first: 1000\n          where: {\n            account: \"${account.toLowerCase()}\"\n          }\n        ) {\n          account\n          tokenIn\n          tokenOut\n          amountIn\n          amountOut\n          timestamp\n          transaction\n        }\n        createIncreasePositions(\n          first: 1000, \n          where: { \n            account: \"${account.toLowerCase()}\",\n        }) {\n        account\n        collateralToken\n        indexToken\n        isLong\n        amountIn\n      \n        sizeDelta\n        acceptablePrice\n        executionFee\n      \n        transaction\n        timestamp\n      }\n          \n      createDecreasePositions(\n          first: 1000, \n          where: { \n            account: \"${account.toLowerCase()}\",\n        }) {\n        account\n        collateralToken\n        indexToken\n        isLong\n        \n      \n        sizeDelta\n        acceptablePrice\n        executionFee\n      \n        transaction\n        timestamp\n      }\n      \n      cancelIncreasePositions(\n          first: 1000, \n          where: { \n            account: \"${account.toLowerCase()}\",\n        }) {\n        account\n        \n        indexToken\n        isLong\n        \n      \n        sizeDelta\n        acceptablePrice\n      \n        transaction\n        timestamp\n      }\n      \n      cancelDecreasePositions(\n          first: 1000, \n          where: { \n            account: \"${account.toLowerCase()}\",\n        }) {\n        account\n        \n        indexToken\n        isLong\n        \n      \n        sizeDelta\n        acceptablePrice\n      \n        transaction\n        timestamp\n      }\n      \n      orders(\n          first: 1000, \n          where: { \n            account: \"${account.toLowerCase()}\",\n        }) {\n        type\n        account\n        status\n        index\n        size\n      \n        indexToken\n        isLong\n      \n        collateralToken\n        collateral\n      \n        triggerPrice\n        triggerAboveThreshold\n      \n        createdTimestamp\n        cancelledTimestamp\n        executedTimestamp\n        transaction\n      }\n      \n      }\n      `);\n      console.log(\"---shark useAllTradesHistory 1\");\n      // const graphClient = getGmxGraphClient(chainId);\n      if (!polygonGraphClientForTrades) {\n        return;\n      }\n      console.log(\"---shark useAllTradesHistory 2\");\n\n      polygonGraphClientForTrades\n        .query({ query })\n        .then((res) => {\n          console.log(\"---shark useAllTradesHistory 3\");\n          console.log(\"---shark useAllTradesHistory Data: \", res);\n          // const _data = res.data.swap.map((item) => {\n          //   return {\n          //     ...item,\n          //   };\n          // });\n          setRes(res);\n          console.log(\"---shark useAllTradesHistory 5\");\n        })\n        .catch((err) => {\n            console.log(\"---shark useAllTradesHistory 4\");\n            console.error(err);\n          }\n        );\n    }\n  }, [setRes, chainId, account]);\n\n  const tradeHistoryDataMap = useMemo(() => {\n    if (!res) {\n      return [];\n    }\n    const tradeData = res.data;\n    const superArray = [];\n    tradeData.swaps.forEach((item) => {\n      const obj = {\n        timestamp: item.timestamp,\n        txhash: item.transaction,\n        account: item.account,\n        action: \"Swap\",\n        params: {\n          \"tokenIn\": ethers.utils.getAddress(item.tokenIn),\n          \"tokenOut\": ethers.utils.getAddress(item.tokenOut),\n          \"amountIn\": item.amountIn,\n          \"amountOut\": item.amountOut,\n          \n        },\n      };\n      const parent = {\n        data: obj\n      };\n      superArray.push(parent);\n    });\n\n    tradeData.createIncreasePositions.forEach((item) => {\n      const obj = {\n        timestamp: item.timestamp,\n        txhash: item.transaction,\n        account: item.account,\n        action: \"CreateIncreasePosition\",\n        params: {\n          \"indexToken\": ethers.utils.getAddress(item.indexToken),\n          \"tokenOut\": item.tokenOut,\n          \"amountIn\": item.amountIn,\n          \"acceptablePrice\": item.acceptablePrice,\n          \"collateralToken\": ethers.utils.getAddress(item.collateralToken),\n          \"executionFee\": item.executionFee,\n          \"isLong\": item.isLong,\n          \"sizeDelta\": item.sizeDelta,\n        },\n      };\n      const parent = {\n        data: obj\n      };\n      superArray.push(parent);\n    });\n\n    tradeData.createDecreasePositions.forEach((item) => {\n      const obj = {\n        timestamp: item.timestamp,\n        txhash: item.transaction,\n        account: item.account,\n        action: \"CreateDecreasePosition\",\n        params: {\n          \"indexToken\": ethers.utils.getAddress(item.indexToken),\n          \"tokenOut\": item.tokenOut,\n          \"amountOut\": item.amountOut,\n          \"acceptablePrice\": item.acceptablePrice,\n          \"collateralToken\": ethers.utils.getAddress(item.collateralToken),\n          \"executionFee\": item.executionFee,\n          \"isLong\": item.isLong,\n          \"sizeDelta\": item.sizeDelta,\n        },\n      };\n      const parent = {\n        data: obj\n      };\n      superArray.push(parent);\n    });\n\n    tradeData.cancelIncreasePositions.forEach((item) => {\n      const obj = {\n        timestamp: item.timestamp,\n        txhash: item.transaction,\n        account: item.account,\n        action: \"CancelIncreasePosition\",\n        params: {\n          \"indexToken\": ethers.utils.getAddress(item.indexToken),\n          \"acceptablePrice\": item.acceptablePrice,\n          \"isLong\": item.isLong,\n          \"sizeDelta\": item.sizeDelta,\n        },\n      };\n      const parent = {\n        data: obj\n      };\n      superArray.push(parent);\n    });\n\n    tradeData.cancelDecreasePositions.forEach((item) => {\n      const obj = {\n        timestamp: item.timestamp,\n        txhash: item.transaction,\n        account: item.account,\n        action: \"CancelDecreasePosition\",\n        params: {\n          \"indexToken\": ethers.utils.getAddress(item.indexToken),\n          \"acceptablePrice\": item.acceptablePrice,\n          \"isLong\": item.isLong,\n          \"sizeDelta\": item.sizeDelta,\n        },\n      };\n      const parent = {\n        data: obj\n      };\n      superArray.push(parent);\n    });\n\n    tradeData.orders.forEach((item) => {\n      \n      const obj = {\n        timestamp: item.createdTimestamp,\n        txhash: item.transaction,\n        account: item.account,\n        action: \"CreateIncreaseOrder\",\n        params: {\n          \"order\": {\n            \"type\":item.type,\n            // \"createdAtBlock\":22518920,\n            \"updatedAt\":1668747661257,\n            \"account\":item.account,\n            \"orderIndex\": {\n              \"_type\": \"BigNumber\",\n              \"value\":item.index\n            },\n            // \"triggerPrice\": {\n            //   \"_type\":\"BigNumber\",\n            //   \"value\":item.triggerPrice\n            // },\n            \"triggerPrice\": item.triggerPrice,\n            \"triggerAboveThreshold\":item.triggerAboveThreshold,\n            \"executionFee\": {\n              \"_type\":\"BigNumber\",\n              \"value\":0\n            },\n            \"indexToken\": item.indexToken? ethers.utils.getAddress(item.indexToken) : item.indexToken,\n            \"collateralToken\":item.collateralToken? ethers.utils.getAddress(item.collateralToken) : item.collateralToken,\n            // \"purchaseToken\":\"0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E\",\n            // \"purchaseTokenAmount\":{\n            //   \"_type\":\"BigNumber\",\n            //   \"value\":\"10000000\"\n            // },\n            \"sizeDelta\":item.size,\n            \"isLong\":item.isLong\n          }},\n      };\n      const parent = {\n        data: obj\n      };\n      superArray.push(parent);\n    });\n\n\n    // const mapData = new Map();\n\n    // return tradeHistoryData.forEach((item) => ({\n    //   data: item\n    // }));\n    superArray.sort((a, b) => b.timestamp - a.timestamp);\n    return superArray;\n  }, [res]);\n\n  // return res? res.data : null;\n  return tradeHistoryDataMap;\n}\n\nexport function useUserStat(chainId) {\n  const query = gql(`{\n    userStat(id: \"total\") {\n      id\n      uniqueCount\n    }\n  }`);\n\n  const [res, setRes] = useState();\n\n  useEffect(() => {\n    const graphClient = getGmxGraphClient(chainId);\n    if (!graphClient) {\n      return;\n    }\n    graphClient.query({ query }).then(setRes).catch(console.warn);\n  }, [setRes, query, chainId]);\n\n  return res ? res.data.userStat : null;\n}\n\nexport function useLiquidationsData(chainId, account) {\n  const [data, setData] = useState(null);\n  useEffect(() => {\n    if (account) {\n      const query = gql(`{\n         liquidatedPositions(\n           where: {account: \"${account.toLowerCase()}\"}\n           first: 100\n           orderBy: timestamp\n           orderDirection: desc\n         ) {\n           key\n           timestamp\n           borrowFee\n           loss\n           collateral\n           size\n           markPrice\n           type\n         }\n      }`);\n      const graphClient = getGmxGraphClient(chainId);\n      if (!graphClient) {\n        return;\n      }\n\n      graphClient\n        .query({ query })\n        .then((res) => {\n          const _data = res.data.liquidatedPositions.map((item) => {\n            return {\n              ...item,\n              size: bigNumberify(item.size),\n              collateral: bigNumberify(item.collateral),\n              markPrice: bigNumberify(item.markPrice),\n            };\n          });\n          setData(_data);\n        })\n        .catch(console.warn);\n    }\n  }, [setData, chainId, account]);\n\n  return data;\n}\n\nexport function useAllPositions(chainId, library) {\n  const count = 1000;\n  const query = gql(`{\n    aggregatedTradeOpens(\n      first: ${count}\n    ) {\n      account\n      initialPosition{\n        indexToken\n        collateralToken\n        isLong\n        sizeDelta\n      }\n      increaseList {\n        sizeDelta\n      }\n      decreaseList {\n        sizeDelta\n      }\n    }\n  }`);\n\n  const [res, setRes] = useState();\n\n  useEffect(() => {\n    nissohGraphClient.query({ query }).then(setRes).catch(console.warn);\n  }, [setRes, query]);\n\n  const key = res ? `allPositions${count}__` : false;\n  const { data: positions = [] } = useSWR(key, async () => {\n    const provider = getProvider(library, chainId);\n    const vaultAddress = getContract(chainId, \"Vault\");\n    const contract = new ethers.Contract(vaultAddress, Vault.abi, provider);\n    const ret = await Promise.all(\n      res.data.aggregatedTradeOpens.map(async (dataItem) => {\n        try {\n          const { indexToken, collateralToken, isLong } = dataItem.initialPosition;\n          const positionData = await contract.getPosition(dataItem.account, collateralToken, indexToken, isLong);\n          const position = {\n            size: bigNumberify(positionData[0]),\n            collateral: bigNumberify(positionData[1]),\n            entryFundingRate: bigNumberify(positionData[3]),\n            account: dataItem.account,\n          };\n          position.fundingFee = await contract.getFundingFee(collateralToken, position.size, position.entryFundingRate);\n          position.marginFee = position.size.div(1000);\n          position.fee = position.fundingFee.add(position.marginFee);\n\n          const THRESHOLD = 5000;\n          const collateralDiffPercent = position.fee.mul(10000).div(position.collateral);\n          position.danger = collateralDiffPercent.gt(THRESHOLD);\n\n          return position;\n        } catch (ex) {\n          console.error(ex);\n        }\n      })\n    );\n\n    return ret.filter(Boolean);\n  });\n\n  return positions;\n}\n\nexport function useAllOrders(chainId, library) {\n  const query = gql(`{\n    orders(\n      first: 1000,\n      orderBy: createdTimestamp,\n      orderDirection: desc,\n      where: {status: \"open\"}\n    ) {\n      type\n      account\n      index\n      status\n      createdTimestamp\n    }\n  }`);\n\n  const [res, setRes] = useState();\n\n  useEffect(() => {\n    getGmxGraphClient(chainId).query({ query }).then(setRes);\n  }, [setRes, query, chainId]);\n\n  const key = res ? res.data.orders.map((order) => `${order.type}-${order.account}-${order.index}`) : null;\n  const { data: orders = [] } = useSWR(key, () => {\n    const provider = getProvider(library, chainId);\n    const orderBookAddress = getContract(chainId, \"OrderBook\");\n    const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, provider);\n    return Promise.all(\n      res.data.orders.map(async (order) => {\n        try {\n          const type = order.type.charAt(0).toUpperCase() + order.type.substring(1);\n          const method = `get${type}Order`;\n          const orderFromChain = await contract[method](order.account, order.index);\n          const ret = {};\n          for (const [key, val] of Object.entries(orderFromChain)) {\n            ret[key] = val;\n          }\n          if (order.type === \"swap\") {\n            ret.path = [ret.path0, ret.path1, ret.path2].filter((address) => address !== AddressZero);\n          }\n          ret.type = type;\n          ret.index = order.index;\n          ret.account = order.account;\n          ret.createdTimestamp = order.createdTimestamp;\n          return ret;\n        } catch (ex) {\n          console.error(ex);\n        }\n      })\n    );\n  });\n\n  return orders.filter(Boolean);\n}\n\nexport function usePositionsForOrders(chainId, library, orders) {\n  const key = orders ? orders.map((order) => getOrderKey(order) + \"____\") : null;\n  const { data: positions = {} } = useSWR(key, async () => {\n    const provider = getProvider(library, chainId);\n    const vaultAddress = getContract(chainId, \"Vault\");\n    const contract = new ethers.Contract(vaultAddress, Vault.abi, provider);\n    const data = await Promise.all(\n      orders.map(async (order) => {\n        try {\n          const position = await contract.getPosition(\n            order.account,\n            order.collateralToken,\n            order.indexToken,\n            order.isLong\n          );\n          if (position[0].eq(0)) {\n            return [null, order];\n          }\n          return [position, order];\n        } catch (ex) {\n          console.error(ex);\n        }\n      })\n    );\n    return data.reduce((memo, [position, order]) => {\n      memo[getOrderKey(order)] = position;\n      return memo;\n    }, {});\n  });\n\n  return positions;\n}\n\nfunction invariant(condition, errorMsg) {\n  if (!condition) {\n    throw new Error(errorMsg);\n  }\n}\n\nexport function useTrades(chainId, account, forSingleAccount, afterId) {\n  let url =\n    account && account.length > 0\n      ? `${getServerBaseUrl(chainId)}/actions?account=${account}`\n      : !forSingleAccount && `${getServerBaseUrl(chainId)}/actions`;\n\n  if (afterId && afterId.length > 0) {\n    const urlItem = new URL(url);\n    urlItem.searchParams.append(\"after\", afterId);\n    url = urlItem.toString();\n  }\n\n  const { data: trades, mutate: updateTrades } = useSWR(url && url, {\n    dedupingInterval: 10000,\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\n  });\n\n  if (trades) {\n    trades.sort((item0, item1) => {\n      const data0 = item0.data;\n      const data1 = item1.data;\n      const time0 = parseInt(data0.timestamp);\n      const time1 = parseInt(data1.timestamp);\n      if (time1 > time0) {\n        return 1;\n      }\n      if (time1 < time0) {\n        return -1;\n      }\n\n      const block0 = parseInt(data0.blockNumber);\n      const block1 = parseInt(data1.blockNumber);\n\n      if (isNaN(block0) && isNaN(block1)) {\n        return 0;\n      }\n\n      if (isNaN(block0)) {\n        return 1;\n      }\n\n      if (isNaN(block1)) {\n        return -1;\n      }\n\n      if (block1 > block0) {\n        return 1;\n      }\n\n      if (block1 < block0) {\n        return -1;\n      }\n\n      return 0;\n    });\n  }\n\n  return { trades, updateTrades };\n}\n\nexport function useMinExecutionFee(library, active, chainId, infoTokens) {\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n\n  const { data: minExecutionFee } = useSWR([active, chainId, positionRouterAddress, \"minExecutionFee\"], {\n    fetcher: contractFetcher(library, PositionRouter),\n  });\n\n  const { data: gasPrice } = useSWR([\"gasPrice\", chainId], {\n    fetcher: () => {\n      return new Promise(async (resolve, reject) => {\n        const provider = getProvider(library, chainId);\n        if (!provider) {\n          resolve(undefined);\n          return;\n        }\n\n        try {\n          const gasPrice = await provider.getGasPrice();\n          resolve(gasPrice);\n        } catch (e) {\n          console.error(e);\n        }\n      });\n    },\n  });\n\n  let multiplier;\n\n  // if gas prices on Arbitrum are high, the main transaction costs would come from the L2 gas usage\n  // for executing positions this is around 65,000 gas\n  // if gas prices on Ethereum are high, than the gas usage might be higher, this calculation doesn't deal with that\n  // case yet\n  if (chainId === ARBITRUM || chainId === ARBITRUM_TESTNET) {\n    multiplier = 65000;\n  }\n\n  // multiplier for Polygon is just the average gas usage\n  if (chainId === POLYGON) {\n    multiplier = 700000;\n  }\n\n  let finalExecutionFee = minExecutionFee;\n\n  if (gasPrice && minExecutionFee) {\n    const estimatedExecutionFee = gasPrice.mul(multiplier);\n    if (estimatedExecutionFee.gt(minExecutionFee)) {\n      finalExecutionFee = estimatedExecutionFee;\n    }\n  }\n\n  const finalExecutionFeeUSD = getUsd(finalExecutionFee, nativeTokenAddress, false, infoTokens);\n  const isFeeHigh = finalExecutionFeeUSD?.gt(expandDecimals(getHighExecutionFee(chainId), USD_DECIMALS));\n  const errorMessage =\n    isFeeHigh &&\n    `The network cost to send transactions is high at the moment, please check the \"Execution Fee\" value before proceeding.`;\n\n  return {\n    minExecutionFee: finalExecutionFee,\n    minExecutionFeeUSD: finalExecutionFeeUSD,\n    minExecutionFeeErrorMessage: errorMessage,\n  };\n}\n\nexport function useStakedGmxSupply(library, active) {\n  const gmxAddressArb = getContract(ARBITRUM, \"GMX\");\n  const stakedGmxTrackerAddressArb = getContract(ARBITRUM, \"StakedGmxTracker\");\n\n  const { data: arbData, mutate: arbMutate } = useSWR(\n    [`StakeV2:stakedGmxSupply:${active}`, ARBITRUM, gmxAddressArb, \"balanceOf\", stakedGmxTrackerAddressArb],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  const gmxAddressMatic = getContract(POLYGON, \"GMX\");\n  const stakedGmxTrackerAddressMatic = getContract(POLYGON, \"StakedGmxTracker\");\n\n  const { data: maticData, mutate: maticMutate } = useSWR(\n    [`StakeV2:stakedGmxSupply:${active}`, POLYGON, gmxAddressMatic, \"balanceOf\", stakedGmxTrackerAddressMatic],\n    {\n      fetcher: contractFetcher(undefined, Token),\n    }\n  );\n\n  let data;\n  if (arbData && maticData) {\n    data = arbData.add(maticData);\n  }\n\n  const mutate = () => {\n    arbMutate();\n    maticMutate();\n  };\n\n  return { data, mutate };\n}\n\nexport function useHasOutdatedUi() {\n  const url = getServerUrl(ARBITRUM, \"/ui_version\");\n  const { data, mutate } = useSWR([url], {\n    fetcher: (...args) => fetch(...args).then((res) => res.text()),\n  });\n\n  let hasOutdatedUi = false;\n\n  if (data && parseFloat(data) > parseFloat(UI_VERSION)) {\n    hasOutdatedUi = true;\n  }\n\n  return { data: hasOutdatedUi, mutate };\n}\n\nexport function useGmxPrice(chainId, libraries, active) {\n  const arbitrumLibrary = libraries && libraries.arbitrum ? libraries.arbitrum : undefined;\n  const { data: gmxPriceFromArbitrum, mutate: mutateFromArbitrum } = useGmxPriceFromArbitrum(arbitrumLibrary, active);\n  const { data: gmxPriceFromPolygon, mutate: mutateFromPolygon } = useGmxPriceFromPolygon();\n\n  const gmxPrice = chainId === ARBITRUM ? gmxPriceFromArbitrum : gmxPriceFromPolygon;\n  const mutate = useCallback(() => {\n    mutateFromPolygon();\n    mutateFromArbitrum();\n  }, [mutateFromPolygon, mutateFromArbitrum]);\n\n  return {\n    gmxPrice,\n    gmxPriceFromArbitrum,\n    gmxPriceFromPolygon,\n    mutate,\n  };\n}\n\n// use only the supply endpoint on arbitrum, it includes the supply on polygon\nexport function useTotalGmxSupply() {\n  // const gmxSupplyUrlArbitrum = getServerUrl(ARBITRUM, \"/gmx_supply\");\n\n  // const { data: gmxSupply, mutate: updateGmxSupply } = useSWR([gmxSupplyUrlArbitrum], {\n  //   fetcher: (...args) => fetch(...args).then((res) => res.text()),\n  // });\n\n  // return {\n  //   total: gmxSupply ? bigNumberify(gmxSupply) : undefined,\n  //   mutate: updateGmxSupply,\n  // };\n  const { data: gmxSupply } = useSWR([`StakeV2:totalSupply:${POLYGON}`, POLYGON, getContract(POLYGON, \"GMX\"), \"totalSupply\"], {\n    fetcher: contractFetcher(undefined, Token),\n  });\n\n  return {\n    total: gmxSupply,\n    mutate: undefined,\n  };\n}\n\nexport function useTotalGmxStaked() {\n  const stakedGmxTrackerAddressArbitrum = getContract(ARBITRUM, \"StakedGmxTracker\");\n  const stakedGmxTrackerAddressMatic = getContract(POLYGON, \"StakedGmxTracker\");\n  let totalStakedGmx = useRef(bigNumberify(0));\n  const { data: stakedGmxSupplyArbitrum, mutate: updateStakedGmxSupplyArbitrum } = useSWR(\n    [\n      `StakeV2:stakedGmxSupply:${ARBITRUM}`,\n      ARBITRUM,\n      getContract(ARBITRUM, \"GMX\"),\n      \"balanceOf\",\n      stakedGmxTrackerAddressArbitrum,\n    ],\n    {\n      fetcher: contractFetcher(undefined, Token),\n    }\n  );\n  const { data: stakedGmxSupplyMatic, mutate: updateStakedGmxSupplyMatic } = useSWR(\n    [\n      `StakeV2:stakedGmxSupply:${POLYGON}`,\n      POLYGON,\n      getContract(POLYGON, \"GMX\"),\n      \"balanceOf\",\n      stakedGmxTrackerAddressMatic,\n    ],\n    {\n      fetcher: contractFetcher(undefined, Token),\n    }\n  );\n\n  const mutate = useCallback(() => {\n    updateStakedGmxSupplyArbitrum();\n    updateStakedGmxSupplyMatic();\n  }, [updateStakedGmxSupplyArbitrum, updateStakedGmxSupplyMatic]);\n\n  if (stakedGmxSupplyArbitrum && stakedGmxSupplyMatic) {\n    // let total = bigNumberify(stakedGmxSupplyArbitrum).add(stakedGmxSupplyMatic);\n    let total = bigNumberify(stakedGmxSupplyMatic);\n    totalStakedGmx.current = total;\n  }\n\n  return {\n    matic: stakedGmxSupplyMatic,\n    arbitrum: stakedGmxSupplyArbitrum,\n    total: totalStakedGmx.current,\n    mutate,\n  };\n}\n\nexport function useTotalGmxInLiquidity() {\n  let poolAddressArbitrum = getContract(ARBITRUM, \"UniswapGmxEthPool\");\n  let poolAddressMatic = getContract(POLYGON, \"TraderJoeGmxMaticPool\");\n  let totalGMX = useRef(bigNumberify(0));\n\n  const { data: gmxInLiquidityOnArbitrum, mutate: mutateGMXInLiquidityOnArbitrum } = useSWR(\n    [`StakeV2:gmxInLiquidity:${ARBITRUM}`, ARBITRUM, getContract(ARBITRUM, \"GMX\"), \"balanceOf\", poolAddressArbitrum],\n    {\n      fetcher: contractFetcher(undefined, Token),\n    }\n  );\n  const { data: gmxInLiquidityOnMatic, mutate: mutateGMXInLiquidityOnMatic } = useSWR(\n    [`StakeV2:gmxInLiquidity:${POLYGON}`, POLYGON, getContract(POLYGON, \"GMX\"), \"balanceOf\", poolAddressMatic],\n    {\n      fetcher: contractFetcher(undefined, Token),\n    }\n  );\n  const mutate = useCallback(() => {\n    mutateGMXInLiquidityOnArbitrum();\n    mutateGMXInLiquidityOnMatic();\n  }, [mutateGMXInLiquidityOnArbitrum, mutateGMXInLiquidityOnMatic]);\n\n  if (gmxInLiquidityOnMatic && gmxInLiquidityOnArbitrum) {\n    let total = bigNumberify(gmxInLiquidityOnArbitrum).add(gmxInLiquidityOnMatic);\n    totalGMX.current = total;\n  }\n  return {\n    matic: gmxInLiquidityOnMatic,\n    arbitrum: gmxInLiquidityOnArbitrum,\n    total: totalGMX.current,\n    mutate,\n  };\n}\n\nfunction useGmxPriceFromPolygon() {\n  const poolAddress = getContract(POLYGON, \"TraderJoeGmxMaticPool\");\n\n  const { data, mutate: updateReserves } = useSWR([\"TraderJoeGmxMaticReserves\", POLYGON, poolAddress, \"getReserves\"], {\n    fetcher: contractFetcher(undefined, UniswapV2),\n  });\n  const { _reserve0: gmxReserve, _reserve1: maticReserve } = data || {};\n\n  const vaultAddress = getContract(POLYGON, \"Vault\");\n  const maticAddress = getTokenBySymbol(POLYGON, \"WMATIC\").address;\n  const { data: maticPrice, mutate: updateMaticPrice } = useSWR(\n    [`StakeV2:maticPrice`, POLYGON, vaultAddress, \"getMinPrice\", maticAddress],\n    {\n      fetcher: contractFetcher(undefined, Vault),\n    }\n  );\n\n  const PRECISION = bigNumberify(10).pow(18);\n  let gmxPrice;\n  if (maticReserve && gmxReserve && maticPrice) {\n    gmxPrice = maticReserve.mul(PRECISION).div(gmxReserve).mul(maticPrice).div(PRECISION);\n  }\n\n  const mutate = useCallback(() => {\n    updateReserves(undefined, true);\n    updateMaticPrice(undefined, true);\n  }, [updateReserves, updateMaticPrice]);\n\n  return { data: gmxPrice, mutate };\n}\n\nfunction useGmxPriceFromArbitrum(library, active) {\n  const poolAddress = getContract(ARBITRUM, \"UniswapGmxEthPool\");\n  const { data: uniPoolSlot0, mutate: updateUniPoolSlot0 } = useSWR(\n    [`StakeV2:uniPoolSlot0:${active}`, ARBITRUM, poolAddress, \"slot0\"],\n    {\n      fetcher: contractFetcher(library, UniPool),\n    }\n  );\n\n  const vaultAddress = getContract(ARBITRUM, \"Vault\");\n  const ethAddress = getTokenBySymbol(ARBITRUM, \"WETH\").address;\n  const { data: ethPrice, mutate: updateEthPrice } = useSWR(\n    [`StakeV2:ethPrice:${active}`, ARBITRUM, vaultAddress, \"getMinPrice\", ethAddress],\n    {\n      fetcher: contractFetcher(library, Vault),\n    }\n  );\n\n  const gmxPrice = useMemo(() => {\n    if (uniPoolSlot0 && ethPrice) {\n      const tokenA = new UniToken(ARBITRUM, ethAddress, 18, \"SYMBOL\", \"NAME\");\n\n      const gmxAddress = getContract(ARBITRUM, \"GMX\");\n      const tokenB = new UniToken(ARBITRUM, gmxAddress, 18, \"SYMBOL\", \"NAME\");\n\n      const pool = new Pool(\n        tokenA, // tokenA\n        tokenB, // tokenB\n        10000, // fee\n        uniPoolSlot0.sqrtPriceX96, // sqrtRatioX96\n        1, // liquidity\n        uniPoolSlot0.tick, // tickCurrent\n        []\n      );\n\n      const poolTokenPrice = pool.priceOf(tokenB).toSignificant(6);\n      const poolTokenPriceAmount = parseValue(poolTokenPrice, 18);\n      return poolTokenPriceAmount.mul(ethPrice).div(expandDecimals(1, 18));\n    }\n  }, [ethPrice, uniPoolSlot0, ethAddress]);\n\n  const mutate = useCallback(() => {\n    updateUniPoolSlot0(undefined, true);\n    updateEthPrice(undefined, true);\n  }, [updateEthPrice, updateUniPoolSlot0]);\n\n  return { data: gmxPrice, mutate };\n}\n\nexport async function approvePlugin(\n  chainId,\n  pluginAddress,\n  { library, pendingTxns, setPendingTxns, sentMsg, failMsg }\n) {\n  const routerAddress = getContract(chainId, \"Router\");\n  const contract = new ethers.Contract(routerAddress, Router.abi, library.getSigner());\n  return callContract(chainId, contract, \"approvePlugin\", [pluginAddress], {\n    sentMsg,\n    failMsg,\n    pendingTxns,\n    setPendingTxns,\n  });\n}\n\nexport async function createSwapOrder(\n  chainId,\n  library,\n  path,\n  amountIn,\n  minOut,\n  triggerRatio,\n  nativeTokenAddress,\n  opts = {}\n) {\n  const executionFee = getConstant(chainId, \"SWAP_ORDER_EXECUTION_GAS_FEE\");\n  const triggerAboveThreshold = false;\n  let shouldWrap = false;\n  let shouldUnwrap = false;\n  opts.value = executionFee;\n\n  if (path[0] === AddressZero) {\n    shouldWrap = true;\n    opts.value = opts.value.add(amountIn);\n  }\n  if (path[path.length - 1] === AddressZero) {\n    shouldUnwrap = true;\n  }\n  path = replaceNativeTokenAddress(path, nativeTokenAddress);\n\n  const params = [path, amountIn, minOut, triggerRatio, triggerAboveThreshold, executionFee, shouldWrap, shouldUnwrap];\n\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, \"createSwapOrder\", params, opts);\n}\n\nexport async function createIncreaseOrder(\n  chainId,\n  library,\n  nativeTokenAddress,\n  path,\n  amountIn,\n  indexTokenAddress,\n  minOut,\n  sizeDelta,\n  collateralTokenAddress,\n  isLong,\n  triggerPrice,\n  opts = {}\n) {\n  invariant(!isLong || indexTokenAddress === collateralTokenAddress, \"invalid token addresses\");\n  invariant(indexTokenAddress !== AddressZero, \"indexToken is 0\");\n  invariant(collateralTokenAddress !== AddressZero, \"collateralToken is 0\");\n\n  const fromETH = path[0] === AddressZero;\n\n  path = replaceNativeTokenAddress(path, nativeTokenAddress);\n  const shouldWrap = fromETH;\n  const triggerAboveThreshold = !isLong;\n  const executionFee = getConstant(chainId, \"INCREASE_ORDER_EXECUTION_GAS_FEE\");\n\n  const params = [\n    path,\n    amountIn,\n    indexTokenAddress,\n    minOut,\n    sizeDelta,\n    collateralTokenAddress,\n    isLong,\n    triggerPrice,\n    triggerAboveThreshold,\n    executionFee,\n    shouldWrap,\n  ];\n\n  if (!opts.value) {\n    opts.value = fromETH ? amountIn.add(executionFee) : executionFee;\n  }\n\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, \"createIncreaseOrder\", params, opts);\n}\n\nexport async function createDecreaseOrder(\n  chainId,\n  library,\n  indexTokenAddress,\n  sizeDelta,\n  collateralTokenAddress,\n  collateralDelta,\n  isLong,\n  triggerPrice,\n  triggerAboveThreshold,\n  opts = {}\n) {\n  invariant(!isLong || indexTokenAddress === collateralTokenAddress, \"invalid token addresses\");\n  invariant(indexTokenAddress !== AddressZero, \"indexToken is 0\");\n  invariant(collateralTokenAddress !== AddressZero, \"collateralToken is 0\");\n\n  const executionFee = getConstant(chainId, \"DECREASE_ORDER_EXECUTION_GAS_FEE\");\n\n  const params = [\n    indexTokenAddress,\n    sizeDelta,\n    collateralTokenAddress,\n    collateralDelta,\n    isLong,\n    triggerPrice,\n    triggerAboveThreshold,\n  ];\n  opts.value = executionFee;\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, \"createDecreaseOrder\", params, opts);\n}\n\nexport async function cancelSwapOrder(chainId, library, index, opts) {\n  const params = [index];\n  const method = \"cancelSwapOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function cancelDecreaseOrder(chainId, library, index, opts) {\n  const params = [index];\n  const method = \"cancelDecreaseOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function cancelIncreaseOrder(chainId, library, index, opts) {\n  const params = [index];\n  const method = \"cancelIncreaseOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport function handleCancelOrder(chainId, library, order, opts) {\n  let func;\n  if (order.type === SWAP) {\n    func = cancelSwapOrder;\n  } else if (order.type === INCREASE) {\n    func = cancelIncreaseOrder;\n  } else if (order.type === DECREASE) {\n    func = cancelDecreaseOrder;\n  }\n\n  return func(chainId, library, order.index, {\n    successMsg: t`Order cancelled.`,\n    failMsg: t`Cancel failed.`,\n    sentMsg: t`Cancel submitted.`,\n    pendingTxns: opts.pendingTxns,\n    setPendingTxns: opts.setPendingTxns,\n  });\n}\n\nexport async function cancelMultipleOrders(chainId, library, allIndexes = [], opts) {\n  const ordersWithTypes = groupBy(allIndexes, (v) => v.split(\"-\")[0]);\n  function getIndexes(key) {\n    if (!ordersWithTypes[key]) return;\n    return ordersWithTypes[key].map((d) => d.split(\"-\")[1]);\n  }\n  // params order => swap, increase, decrease\n  const params = [\"Swap\", \"Increase\", \"Decrease\"].map((key) => getIndexes(key) || []);\n  const method = \"cancelMultiple\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function updateDecreaseOrder(\n  chainId,\n  library,\n  index,\n  collateralDelta,\n  sizeDelta,\n  triggerPrice,\n  triggerAboveThreshold,\n  opts\n) {\n  const params = [index, collateralDelta, sizeDelta, triggerPrice, triggerAboveThreshold];\n  const method = \"updateDecreaseOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function updateIncreaseOrder(\n  chainId,\n  library,\n  index,\n  sizeDelta,\n  triggerPrice,\n  triggerAboveThreshold,\n  opts\n) {\n  const params = [index, sizeDelta, triggerPrice, triggerAboveThreshold];\n  const method = \"updateIncreaseOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function updateSwapOrder(chainId, library, index, minOut, triggerRatio, triggerAboveThreshold, opts) {\n  const params = [index, minOut, triggerRatio, triggerAboveThreshold];\n  const method = \"updateSwapOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function _executeOrder(chainId, library, method, account, index, feeReceiver, opts) {\n  const params = [account, index, feeReceiver];\n  const positionManagerAddress = getContract(chainId, \"PositionManager\");\n  const contract = new ethers.Contract(positionManagerAddress, PositionManager.abi, library.getSigner());\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport function executeSwapOrder(chainId, library, account, index, feeReceiver, opts) {\n  return _executeOrder(chainId, library, \"executeSwapOrder\", account, index, feeReceiver, opts);\n}\n\nexport function executeIncreaseOrder(chainId, library, account, index, feeReceiver, opts) {\n  return _executeOrder(chainId, library, \"executeIncreaseOrder\", account, index, feeReceiver, opts);\n}\n\nexport function executeDecreaseOrder(chainId, library, account, index, feeReceiver, opts) {\n  return _executeOrder(chainId, library, \"executeDecreaseOrder\", account, index, feeReceiver, opts);\n}\n\nexport function useFeesData({ from = FIRST_DATE_TS, to = NOW_TS } = {}) {\n  const PROPS = 'margin liquidation swap mint burn'.split(' ')\n  const query = gql(`{\n    feeStats(\n      first: 1000\n      orderBy: id\n      orderDirection: desc\n      where: { period: daily, id_gte: ${from}, id_lte: ${to} }\n      subgraphError: allow\n    ) {\n      id\n      margin\n      marginAndLiquidation\n      swap\n      mint\n      burn\n      timestamp\n    }\n  }`);\n  // let [feesData, loading, error] = useGraph(feesQuery, {\n  //   chainName\n  // })\n  const [feesData, setRes] = useState();\n\n  useEffect(() => {\n    const graphClient = getGmxGraphClient(POLYGON);\n    if (!graphClient) {\n      return;\n    }\n    graphClient.query({ query }).then(setRes).catch(console.warn);\n  }, [setRes, query]);\n\n  const feesChartData = useMemo(() => {\n    if (!feesData) {\n      return null\n    }\n\n    // let chartData = sortBy(feesData.feeStats, 'id').map(item => {\n    let chartData = sortBy(feesData.data.feeStats, 'id').map(item => {\n\n      const ret = { timestamp: item.timestamp || item.id };\n\n      PROPS.forEach(prop => {\n        if (item[prop]) {\n          ret[prop] = item[prop] / 1e30\n        }\n      })\n\n      ret.liquidation = item.marginAndLiquidation / 1e30 - item.margin / 1e30\n      ret.all = PROPS.reduce((memo, prop) => memo + ret[prop], 0)\n      return ret\n    })\n\n    let cumulative = 0\n    const cumulativeByTs = {}\n    return chain(chartData)\n      .groupBy(item => item.timestamp)\n      .map((values, timestamp) => {\n        const all = sumBy(values, 'all')\n        cumulative += all\n\n        let movingAverageAll\n        const movingAverageTs = timestamp - MOVING_AVERAGE_PERIOD\n        if (movingAverageTs in cumulativeByTs) {\n          movingAverageAll = (cumulative - cumulativeByTs[movingAverageTs]) / MOVING_AVERAGE_DAYS\n        }\n\n        const ret = {\n          timestamp: Number(timestamp),\n          all,\n          cumulative,\n          movingAverageAll\n        }\n        PROPS.forEach(prop => {\n           ret[prop] = sumBy(values, prop)\n        })\n        cumulativeByTs[timestamp] = cumulative\n        return ret\n      })\n      .value()\n      .filter(item => item.timestamp >= from)\n  }, [feesData])\n\n  const [totalFees, totalFeesDelta] = useMemo(() => {\n    if (!feesChartData) {\n      return []\n    }\n    const total = feesChartData[feesChartData.length - 1]?.cumulative\n    const delta = total - feesChartData[feesChartData.length - 2]?.cumulative\n    return [total, delta]\n  }, [feesChartData])\n\n  return [totalFees, totalFeesDelta];\n}\n\nexport function useVolumeData({ from = FIRST_DATE_TS, to = NOW_TS } = {}) {\n\tconst PROPS = 'margin liquidation swap mint burn'.split(' ')\n  // const timestampProp = chainName === \"arbitrum\" ? \"id\" : \"timestamp\"\n  const timestampProp = \"timestamp\"\n  const [graphData, setRes] = useState();\n\n  const query = gql`{\n    volumeStats(\n      first: 1000,\n      orderBy: ${timestampProp},\n      orderDirection: desc\n      where: { period: daily, ${timestampProp}_gte: ${from}, ${timestampProp}_lte: ${to} }\n      subgraphError: allow\n    ) {\n      ${timestampProp}\n      ${PROPS.join('\\n')}\n    }\n  }`\n  // const [graphData, loading, error] = useGraph(query, { chainName })\n\n  useEffect(() => {\n    const graphClient = getGmxGraphClient(POLYGON);\n    if (!graphClient) {\n      return;\n    }\n    graphClient.query({ query }).then(setRes).catch(console.warn);\n  }, [setRes, query]);\n\n  const data = useMemo(() => {\n    if (!graphData) {\n      return null\n    }\n\n    let ret =  sortBy(graphData.data.volumeStats, timestampProp).map(item => {\n      const ret = { timestamp: item[timestampProp] };\n      let all = 0;\n      PROPS.forEach(prop => {\n        ret[prop] = item[prop] / 1e30\n        all += ret[prop]\n      })\n      ret.all = all\n      return ret\n    })\n\n    let cumulative = 0\n    const cumulativeByTs = {}\n    return ret.map(item => {\n      cumulative += item.all\n\n      let movingAverageAll\n      const movingAverageTs = item.timestamp - MOVING_AVERAGE_PERIOD\n      if (movingAverageTs in cumulativeByTs) {\n        movingAverageAll = (cumulative - cumulativeByTs[movingAverageTs]) / MOVING_AVERAGE_DAYS\n      }\n\n      return {\n        movingAverageAll,\n        cumulative,\n        ...item\n      }\n    })\n  }, [graphData])\n\n  // return [data, loading, error]\n\n  const [totalVolume, totalVolumeDelta] = useMemo(() => {\n    if (!data) {\n      return []\n    }\n    const total = data[data.length - 1]?.cumulative\n    const delta = total - data[data.length - 2]?.cumulative\n    return [total, delta]\n  }, [data])\n\n  return [totalVolume, totalVolumeDelta];\n}\n\nconst numberFmt0 = Intl.NumberFormat('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })\nconst numberFmt1 = Intl.NumberFormat('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 1 })\nconst numberFmt2 = Intl.NumberFormat('en-US', { minimumFractionDigits: 3, maximumFractionDigits: 3 })\nconst currencyFmt0 = Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 })\nconst currencyFmt1 = Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 1, maximumFractionDigits: 1 })\nconst currencyFmt2 = Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 2, maximumFractionDigits: 2 })\n\n\nfunction _getCurrencyFmt(value) {\n  const absValue = Math.abs(value)\n  if (absValue < 10) {\n    return currencyFmt2\n  } else if (absValue < 1000) {\n    return currencyFmt1\n  } else {\n    return currencyFmt0\n  }\n}\n\nfunction _getNumberFmt(value) {\n  const absValue = Math.abs(value)\n  if (absValue < 10) {\n    return numberFmt2\n  } else if (absValue < 1000) {\n    return numberFmt1\n  } else {\n    return numberFmt0\n  }\n}\n\n\nexport const formatNumber = (value, opts = {}) => {\n  const currency = !!opts.currency\n  const compact = !!opts.compact\n\n  if (currency && !compact) {\n    return _getCurrencyFmt(value).format(value)\n  }\n\n  const display = compact ? compactNumber(value) : _getNumberFmt(value).format(value)\n  if (currency) {\n    return `$${display}`\n  }\n  return display\n}\n\nexport const compactNumber = value => {\n  const abs = Math.abs(value)\n  if (abs >= 1e9) {\n    return `${(value / 1e9).toFixed(abs < 1e10 ? 2 : 1)}B`\n  }\n  if (abs >= 1e6) {\n    return `${(value / 1e6).toFixed(abs < 1e7 ? 2 : 1)}M`\n  }\n  if (abs >= 1e3) {\n    return `${(value / 1e3).toFixed(abs < 1e4 ? 2 : 1)}K`\n  }\n  return `${value.toFixed(1)}`\n}\n","import React from \"react\";\n\nimport useSWR from \"swr\";\n\nimport {\n  PLACEHOLDER_ACCOUNT,\n  getBalanceAndSupplyData,\n  getDepositBalanceData,\n  getVestingData,\n  getStakingData,\n  getProcessedData,\n} from \"lib/legacy\";\n\nimport Vault from \"abis/Vault.json\";\nimport ReaderV2 from \"abis/ReaderV2.json\";\nimport RewardReader from \"abis/RewardReader.json\";\nimport Token from \"abis/Token.json\";\nimport GlpManager from \"abis/GlpManager.json\";\n\nimport { useWeb3React } from \"@web3-react/core\";\n\nimport { useGmxPrice } from \"domain/legacy\";\n\nimport { getContract } from \"config/contracts\";\nimport { contractFetcher } from \"lib/contracts\";\nimport { formatKeyAmount } from \"lib/numbers\";\n\nexport default function APRLabel({ chainId, label }) {\n  let { active } = useWeb3React();\n\n  const rewardReaderAddress = getContract(chainId, \"RewardReader\");\n  const readerAddress = getContract(chainId, \"Reader\");\n\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const gmxAddress = getContract(chainId, \"GMX\");\n  const esGmxAddress = getContract(chainId, \"ES_GMX\");\n  const bnGmxAddress = getContract(chainId, \"BN_GMX\");\n  const glpAddress = getContract(chainId, \"GLP\");\n\n  const stakedGmxTrackerAddress = getContract(chainId, \"StakedGmxTracker\");\n  const bonusGmxTrackerAddress = getContract(chainId, \"BonusGmxTracker\");\n  const feeGmxTrackerAddress = getContract(chainId, \"FeeGmxTracker\");\n\n  const stakedGlpTrackerAddress = getContract(chainId, \"StakedGlpTracker\");\n  const feeGlpTrackerAddress = getContract(chainId, \"FeeGlpTracker\");\n\n  const glpManagerAddress = getContract(chainId, \"GlpManager\");\n\n  const gmxVesterAddress = getContract(chainId, \"GmxVester\");\n  const glpVesterAddress = getContract(chainId, \"GlpVester\");\n\n  const vesterAddresses = [gmxVesterAddress, glpVesterAddress];\n\n  const walletTokens = [gmxAddress, esGmxAddress, glpAddress, stakedGmxTrackerAddress];\n  const depositTokens = [\n    gmxAddress,\n    esGmxAddress,\n    stakedGmxTrackerAddress,\n    bonusGmxTrackerAddress,\n    bnGmxAddress,\n    glpAddress,\n  ];\n  const rewardTrackersForDepositBalances = [\n    stakedGmxTrackerAddress,\n    stakedGmxTrackerAddress,\n    bonusGmxTrackerAddress,\n    feeGmxTrackerAddress,\n    feeGmxTrackerAddress,\n    feeGlpTrackerAddress,\n  ];\n  const rewardTrackersForStakingInfo = [\n    stakedGmxTrackerAddress,\n    bonusGmxTrackerAddress,\n    feeGmxTrackerAddress,\n    stakedGlpTrackerAddress,\n    feeGlpTrackerAddress,\n  ];\n\n  const { data: walletBalances } = useSWR(\n    [`StakeV2:walletBalances:${active}`, chainId, readerAddress, \"getTokenBalancesWithSupplies\", PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(undefined, ReaderV2, [walletTokens]),\n    }\n  );\n\n  const { data: depositBalances } = useSWR(\n    [`StakeV2:depositBalances:${active}`, chainId, rewardReaderAddress, \"getDepositBalances\", PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(undefined, RewardReader, [depositTokens, rewardTrackersForDepositBalances]),\n    }\n  );\n\n  const { data: stakingInfo } = useSWR(\n    [`StakeV2:stakingInfo:${active}`, chainId, rewardReaderAddress, \"getStakingInfo\", PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(undefined, RewardReader, [rewardTrackersForStakingInfo]),\n    }\n  );\n\n  const { data: stakedGmxSupply } = useSWR(\n    [`StakeV2:stakedGmxSupply:${active}`, chainId, gmxAddress, \"balanceOf\", stakedGmxTrackerAddress],\n    {\n      fetcher: contractFetcher(undefined, Token),\n    }\n  );\n\n  const { data: aums } = useSWR([`StakeV2:getAums:${active}`, chainId, glpManagerAddress, \"getAums\"], {\n    fetcher: contractFetcher(undefined, GlpManager),\n  });\n\n  const { data: nativeTokenPrice } = useSWR(\n    [`StakeV2:nativeTokenPrice:${active}`, chainId, vaultAddress, \"getMinPrice\", nativeTokenAddress],\n    {\n      fetcher: contractFetcher(undefined, Vault),\n    }\n  );\n\n  const { data: vestingInfo } = useSWR(\n    [`StakeV2:vestingInfo:${active}`, chainId, readerAddress, \"getVestingInfo\", PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(undefined, ReaderV2, [vesterAddresses]),\n    }\n  );\n\n  const { gmxPrice } = useGmxPrice(chainId, {}, active);\n\n  // const gmxSupplyUrl = getServerUrl(chainId, \"/gmx_supply\");\n  // const { data: gmxSupply } = useSWR([gmxSupplyUrl], {\n  //   fetcher: (...args) => fetch(...args).then((res) => res.text()),\n  // });\n\n  const { data: gmxSupply } = useSWR(\n    [`APRLabel:gmxSupply:${active}`, chainId, gmxAddress, \"totalSupply\"],\n    {\n      fetcher: contractFetcher(undefined, Token),\n    }\n  );\n\n  let aum;\n  if (aums && aums.length > 0) {\n    aum = aums[0].add(aums[1]).div(2);\n  }\n\n  const { balanceData, supplyData } = getBalanceAndSupplyData(walletBalances);\n  const depositBalanceData = getDepositBalanceData(depositBalances);\n  const stakingData = getStakingData(stakingInfo);\n  const vestingData = getVestingData(vestingInfo);\n\n  const processedData = getProcessedData(\n    balanceData,\n    supplyData,\n    depositBalanceData,\n    stakingData,\n    vestingData,\n    aum,\n    nativeTokenPrice,\n    stakedGmxSupply,\n    gmxPrice,\n    gmxSupply\n  );\n  console.log(\"---shark APRLabel processedData: \", processedData);\n  return <>{`${formatKeyAmount(processedData, label, 2, 2, true)}%`}</>;\n}\n","import React, { ReactNode } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport cx from \"classnames\";\nimport { getAppBaseUrl, getHomeUrl } from \"lib/legacy\";\n\nimport \"./Header.css\";\nimport { isHomeSite, shouldShowRedirectModal } from \"lib/legacy\";\n\ntype Props = {\n  isHome?: boolean;\n  isHomeLink?: boolean;\n  className?: string;\n  exact?: boolean;\n  to: string;\n  shouldShowRedirectModal?: boolean;\n  showRedirectModal: (to: string) => void;\n  redirectPopupTimestamp: number;\n  children?: ReactNode;\n};\n\nexport function HeaderLink({\n  isHomeLink,\n  className,\n  exact,\n  to,\n  children,\n  redirectPopupTimestamp,\n  showRedirectModal,\n}: Props) {\n  const isOnHomePage = window.location.pathname === \"/\";\n  const isHome = isHomeSite();\n\n  if (isHome && !(isHomeLink && !isOnHomePage)) {\n    if (shouldShowRedirectModal(redirectPopupTimestamp)) {\n      return (\n        <div className={cx(\"a\", className, { active: isHomeLink })} onClick={() => showRedirectModal(to)}>\n          {children}\n        </div>\n      );\n    } else {\n      const baseUrl = getAppBaseUrl();\n      return (\n        <a className={cx(\"a\", className, { active: isHomeLink })} href={baseUrl + to}>\n          {children}\n        </a>\n      );\n    }\n  }\n\n  if (isHomeLink) {\n    return (\n      <a href={getHomeUrl()} className={cx(className)}>\n        {children}\n      </a>\n    );\n  }\n\n  return (\n    <NavLink activeClassName=\"active\" className={cx(className)} exact={exact} to={to}>\n      {children}\n    </NavLink>\n  );\n}\n","import { InjectedConnector } from \"@web3-react/injected-connector\";\nimport {\n  ARBITRUM,\n  ARBITRUM_RPC_PROVIDERS,\n  ARBITRUM_TESTNET,\n  POLYGON,\n  POLYGON_RPC_PROVIDERS,\n  DEFAULT_CHAIN_ID,\n  getChainName,\n  MAINNET,\n  NETWORK_METADATA,\n  SUPPORTED_CHAIN_IDS,\n} from \"config/chains\";\nimport { UnsupportedChainIdError, useWeb3React } from \"@web3-react/core\";\nimport React, { useEffect, useState } from \"react\";\nimport {\n  CURRENT_PROVIDER_LOCALSTORAGE_KEY,\n  SELECTED_NETWORK_LOCAL_STORAGE_KEY,\n  SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY,\n  WALLET_CONNECT_LOCALSTORAGE_KEY,\n  WALLET_LINK_LOCALSTORAGE_PREFIX,\n} from \"config/localStorage\";\nimport {\n  UserRejectedRequestError as UserRejectedRequestErrorWalletConnect,\n  WalletConnectConnector,\n} from \"@web3-react/walletconnect-connector\";\nimport { helperToast } from \"../helperToast\";\nimport { t, Trans } from \"@lingui/macro\";\n\nconst injectedConnector = new InjectedConnector({\n  supportedChainIds: SUPPORTED_CHAIN_IDS,\n});\n\nexport function hasMetaMaskWalletExtension() {\n  return window.ethereum;\n}\n\nexport function hasCoinBaseWalletExtension() {\n  const { ethereum } = window;\n\n  if (!ethereum?.providers && !ethereum?.isCoinbaseWallet) {\n    return false;\n  }\n\n  return window.ethereum.isCoinbaseWallet || ethereum.providers.find(({ isCoinbaseWallet }) => isCoinbaseWallet);\n}\n\nexport function activateInjectedProvider(providerName) {\n  const { ethereum } = window;\n\n  if (!ethereum?.providers && !ethereum?.isCoinbaseWallet && !ethereum?.isMetaMask) {\n    return undefined;\n  }\n\n  let provider;\n  if (ethereum?.providers) {\n    switch (providerName) {\n      case \"CoinBase\":\n        provider = ethereum.providers.find(({ isCoinbaseWallet }) => isCoinbaseWallet);\n        break;\n      case \"MetaMask\":\n      default:\n        provider = ethereum.providers.find(({ isMetaMask }) => isMetaMask);\n        break;\n    }\n  }\n\n  if (provider) {\n    ethereum.setSelectedProvider(provider);\n  }\n}\n\nexport function getInjectedConnector() {\n  return injectedConnector;\n}\n\nexport const getWalletConnectConnector = () => {\n  const chainId = localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY) || DEFAULT_CHAIN_ID;\n  return new WalletConnectConnector({\n    rpc: {\n      [POLYGON]: POLYGON_RPC_PROVIDERS[0],\n      [ARBITRUM]: ARBITRUM_RPC_PROVIDERS[0],\n      [ARBITRUM_TESTNET]: \"https://rinkeby.arbitrum.io/rpc\",\n    },\n    qrcode: true,\n    chainId,\n  });\n};\n\nexport function clearWalletConnectData() {\n  localStorage.removeItem(WALLET_CONNECT_LOCALSTORAGE_KEY);\n}\n\nexport function clearWalletLinkData() {\n  Object.entries(localStorage)\n    .map((x) => x[0])\n    .filter((x) => x.startsWith(WALLET_LINK_LOCALSTORAGE_PREFIX))\n    .map((x) => localStorage.removeItem(x));\n}\n\nexport function useEagerConnect(setActivatingConnector) {\n  const { activate, active } = useWeb3React();\n  const [tried, setTried] = useState(false);\n\n  useEffect(() => {\n    (async function () {\n      if (Boolean(localStorage.getItem(SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY)) !== true) {\n        // only works with WalletConnect\n        clearWalletConnectData();\n        // force clear localStorage connection for MM/CB Wallet (Brave legacy)\n        clearWalletLinkData();\n        return;\n      }\n\n      let shouldTryWalletConnect = false;\n      try {\n        // naive validation to not trigger Wallet Connect if data is corrupted\n        const rawData = localStorage.getItem(WALLET_CONNECT_LOCALSTORAGE_KEY);\n        if (rawData) {\n          const data = JSON.parse(rawData);\n          if (data && data.connected) {\n            shouldTryWalletConnect = true;\n          }\n        }\n      } catch (ex) {\n        if (ex instanceof SyntaxError) {\n          // rawData is not a valid json\n          clearWalletConnectData();\n        }\n      }\n\n      if (shouldTryWalletConnect) {\n        try {\n          const connector = getWalletConnectConnector();\n          setActivatingConnector(connector);\n          await activate(connector, undefined, true);\n          // in case Wallet Connect is activated no need to check injected wallet\n          return;\n        } catch (ex) {\n          // assume data in localstorage is corrupted and delete it to not retry on next page load\n          clearWalletConnectData();\n        }\n      }\n\n      try {\n        const connector = getInjectedConnector();\n        const currentProviderName = localStorage.getItem(CURRENT_PROVIDER_LOCALSTORAGE_KEY) ?? false;\n        if (currentProviderName !== false) {\n          activateInjectedProvider(currentProviderName);\n        }\n        const authorized = await connector.isAuthorized();\n        if (authorized) {\n          setActivatingConnector(connector);\n          await activate(connector, undefined, true);\n        }\n      } catch (ex) {}\n\n      setTried(true);\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // intentionally only running on mount (make sure it's only mounted once :))\n\n  // if the connection worked, wait until we get confirmation of that to flip the flag\n  useEffect(() => {\n    if (!tried && active) {\n      setTried(true);\n    }\n  }, [tried, active]);\n\n  return tried;\n}\n\nexport function useInactiveListener(suppress = false) {\n  const injected = getInjectedConnector();\n  const { active, error, activate } = useWeb3React();\n\n  useEffect(() => {\n    const { ethereum } = window;\n    if (ethereum && ethereum.on && !active && !error && !suppress) {\n      const handleConnect = () => {\n        activate(injected);\n      };\n      const handleChainChanged = (chainId) => {\n        activate(injected);\n      };\n      const handleAccountsChanged = (accounts) => {\n        if (accounts.length > 0) {\n          activate(injected);\n        }\n      };\n      const handleNetworkChanged = (networkId) => {\n        activate(injected);\n      };\n\n      ethereum.on(\"connect\", handleConnect);\n      ethereum.on(\"chainChanged\", handleChainChanged);\n      ethereum.on(\"accountsChanged\", handleAccountsChanged);\n      ethereum.on(\"networkChanged\", handleNetworkChanged);\n\n      return () => {\n        if (ethereum.removeListener) {\n          ethereum.removeListener(\"connect\", handleConnect);\n          ethereum.removeListener(\"chainChanged\", handleChainChanged);\n          ethereum.removeListener(\"accountsChanged\", handleAccountsChanged);\n          ethereum.removeListener(\"networkChanged\", handleNetworkChanged);\n        }\n      };\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [active, error, suppress, activate]);\n}\n\nexport const addBscNetwork = async () => {\n  return addNetwork(NETWORK_METADATA[MAINNET]);\n};\n\nexport const addNetwork = async (metadata) => {\n  await window.ethereum.request({ method: \"wallet_addEthereumChain\", params: [metadata] }).catch();\n};\n\nexport const switchNetwork = async (chainId, active) => {\n  if (!active) {\n    // chainId in localStorage allows to switch network even if wallet is not connected\n    // or there is no wallet at all\n    localStorage.setItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY, chainId);\n    document.location.reload();\n    return;\n  }\n\n  try {\n    const chainIdHex = \"0x\" + chainId.toString(16);\n    await window.ethereum.request({\n      method: \"wallet_switchEthereumChain\",\n      params: [{ chainId: chainIdHex }],\n    });\n    helperToast.success(t`Connected to ${getChainName(chainId)}`);\n    return getChainName(chainId);\n  } catch (ex) {\n    // https://docs.metamask.io/guide/rpc-api.html#other-rpc-methods\n    // This error code indicates that the chain has not been added to MetaMask.\n    // 4001 error means user has denied the request\n    // If the error code is not 4001, then we need to add the network\n    if (ex.code !== 4001) {\n      return await addNetwork(NETWORK_METADATA[chainId]);\n    }\n\n    console.error(\"error\", ex);\n  }\n};\n\nexport const getWalletConnectHandler = (activate, deactivate, setActivatingConnector) => {\n  const fn = async () => {\n    const walletConnect = getWalletConnectConnector();\n    setActivatingConnector(walletConnect);\n    activate(walletConnect, (ex) => {\n      if (ex instanceof UnsupportedChainIdError) {\n        helperToast.error(t`Unsupported chain. Switch to Arbitrum network on your wallet and try again`);\n        console.warn(ex);\n      } else if (!(ex instanceof UserRejectedRequestErrorWalletConnect)) {\n        helperToast.error(ex.message);\n        console.warn(ex);\n      }\n      clearWalletConnectData();\n      deactivate();\n    });\n  };\n  return fn;\n};\n\nexport const getInjectedHandler = (activate) => {\n  const fn = async () => {\n    activate(getInjectedConnector(), (e) => {\n      const chainId = localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY) || DEFAULT_CHAIN_ID;\n\n      if (e instanceof UnsupportedChainIdError) {\n        helperToast.error(\n          <div>\n            <Trans>\n              <div>Your wallet is not connected to {getChainName(chainId)}.</div>\n              <br />\n              <div className=\"clickable underline margin-bottom\" onClick={() => switchNetwork(chainId, true)}>\n                Switch to {getChainName(chainId)}\n              </div>\n              <div className=\"clickable underline\" onClick={() => switchNetwork(chainId, true)}>\n                Add {getChainName(chainId)}\n              </div>\n            </Trans>\n          </div>\n        );\n        return;\n      }\n      const errString = e.message ?? e.toString();\n      helperToast.error(errString);\n    });\n  };\n  return fn;\n};\n\nexport async function addTokenToMetamask(token) {\n  try {\n    const wasAdded = await window.ethereum.request({\n      method: \"wallet_watchAsset\",\n      params: {\n        type: \"ERC20\",\n        options: {\n          address: token.address,\n          symbol: token.symbol,\n          decimals: token.decimals,\n          image: token.imageUrl,\n        },\n      },\n    });\n    if (wasAdded) {\n      // https://github.com/MetaMask/metamask-extension/issues/11377\n      // We can show a toast message when the token is added to metamask but because of the bug we can't. Once the bug is fixed we can show a toast message.\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n","import React, { useCallback } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Trans } from \"@lingui/macro\";\n\nimport gmxBigIcon from \"img/ic_gmx_custom.svg\";\nimport glpBigIcon from \"img/ic_glp_custom.svg\";\n\nimport { isHomeSite } from \"lib/legacy\";\n\nimport { useWeb3React } from \"@web3-react/core\";\n\nimport APRLabel from \"../APRLabel/APRLabel\";\nimport { HeaderLink } from \"../Header/HeaderLink\";\nimport { ARBITRUM, POLYGON } from \"config/chains\";\nimport { switchNetwork } from \"lib/wallets\";\nimport { useChainId } from \"lib/chains\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport \"./TokenCard.css\"\n\nexport default function TokenCard({ showRedirectModal, redirectPopupTimestamp }) {\n  const isHome = isHomeSite();\n  const { chainId } = useChainId();\n  const { active } = useWeb3React();\n\n  const changeNetwork = useCallback(\n    (network) => {\n      if (network === chainId) {\n        return;\n      }\n      if (!active) {\n        setTimeout(() => {\n          return switchNetwork(network, active);\n        }, 500);\n      } else {\n        return switchNetwork(network, active);\n      }\n    },\n    [chainId, active]\n  );\n\n  const BuyLink = ({ className, to, children, network }) => {\n    if (isHome && showRedirectModal) {\n      return (\n        <HeaderLink\n          to={to}\n          className={className}\n          redirectPopupTimestamp={redirectPopupTimestamp}\n          showRedirectModal={showRedirectModal}\n        >\n          {children}\n        </HeaderLink>\n      );\n    }\n\n    return (\n      <Link to={to} className={className} onClick={() => changeNetwork(network)}>\n        {children}\n      </Link>\n    );\n  };\n\n  return (\n    <div className=\"Home-token-card-options\">\n      <div className=\"Home-token-card-option\">\n        <div className=\"Home-token-card-option-icon\">\n          <img src={gmxBigIcon} alt=\"amxBigIcon\" /> $AMX\n        </div>\n        <div className=\"Home-token-card-option-info\">\n          <div className=\"Home-token-card-option-title\">\n            <Trans>$AMX is the utility and governance token. Accrues 30% of the platform's generated fees.</Trans>\n          </div>\n          <div className=\"Home-token-card-option-apr\">\n            {/* <Trans>Arbitrum APR:</Trans> <APRLabel chainId={ARBITRUM} label=\"gmxAprTotal\" />,{\" \"} */}\n            <Trans>Polygon APR:</Trans> <APRLabel chainId={POLYGON} label=\"gmxAprTotal\" key=\"POLYGON\" />\n          </div>\n          <div className=\"Home-token-card-option-action\">\n            <div className=\"buy\">\n              {/* <BuyLink to=\"/buy_amx\" className=\"default-btn\" network={ARBITRUM}>\n                <Trans>Buy on Arbitrum</Trans>\n              </BuyLink> */}\n              <BuyLink to=\"/buy_amx\" className=\"default-btn\" network={POLYGON}>\n                <Trans>Buy</Trans>\n              </BuyLink>\n            </div>\n            <ExternalLink href=\"https://amxdex.gitbook.io/amxdex/tokenomics/amx\" className=\"default-btn read-more\">\n              <Trans>Read more</Trans>\n            </ExternalLink>\n          </div>\n        </div>\n      </div>\n      <div className=\"Home-token-card-option\">\n        <div className=\"Home-token-card-option-icon\">\n          <img src={glpBigIcon} alt=\"dlpBigIcon\" /> $DLP\n        </div>\n        <div className=\"Home-token-card-option-info\">\n          <div className=\"Home-token-card-option-title\">\n            <Trans>$DLP is the liquidity provider token. Accrues 70% of the platform's generated fees.</Trans>\n          </div>\n          <div className=\"Home-token-card-option-apr\">\n            {/* <Trans>Arbitrum APR:</Trans> <APRLabel chainId={ARBITRUM} label=\"glpAprTotal\" key=\"ARBITRUM\" />,{\" \"} */}\n            <Trans>Polygon APR:</Trans> <APRLabel chainId={POLYGON} label=\"glpAprTotal\" key=\"POLYGON\" />\n          </div>\n          <div className=\"Home-token-card-option-action\">\n            <div className=\"buy\">\n              {/* <BuyLink to=\"/buy_dlp\" className=\"default-btn\" network={ARBITRUM}>\n                <Trans>Buy on Arbitrum</Trans>\n              </BuyLink> */}\n              <BuyLink to=\"/buy_dlp\" className=\"default-btn\" network={POLYGON}>\n                <Trans>Buy</Trans>\n              </BuyLink>\n            </div>\n            <a\n              href=\"https://amxdex.gitbook.io/amxdex/tokenomics/dlp\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              className=\"default-btn read-more\"\n            >\n              <Trans>Read more</Trans>\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport Footer from \"components/Footer/Footer\";\nimport \"./Home.css\";\n\nimport simpleSwapIcon from \"img/ic_simpleswaps.svg\";\nimport costIcon from \"img/ic_cost.svg\";\nimport liquidityIcon from \"img/ic_liquidity.svg\";\nimport totaluserIcon from \"img/ic_totaluser.svg\";\n\nimport arbitrumIcon from \"img/ic_arbitrum_96.svg\";\nimport avaIcon from \"img/ic_polygon_96.svg\";\n\nimport statsIcon from \"img/ic_stats.svg\";\nimport tradingIcon from \"img/ic_trading.svg\";\n\nimport useSWR from \"swr\";\n\nimport { USD_DECIMALS, getTotalVolumeSum } from \"lib/legacy\";\n\nimport { useUserStat } from \"domain/legacy\";\n\nimport TokenCard from \"components/TokenCard/TokenCard\";\nimport { Trans } from \"@lingui/macro\";\nimport { HeaderLink } from \"components/Header/HeaderLink\";\nimport { ARBITRUM, POLYGON } from \"config/chains\";\nimport { getServerUrl } from \"config/backend\";\nimport { bigNumberify, formatAmount, numberWithCommas } from \"lib/numbers\";\n\nexport default function Home({ showRedirectModal, redirectPopupTimestamp }) {\n  // const [openedFAQIndex, setOpenedFAQIndex] = useState(null)\n  // const faqContent = [{\n  //   id: 1,\n  //   question: \"What is GMX?\",\n  //   answer: \"GMX is a decentralized spot and perpetual exchange that supports low swap fees and zero price impact trades.<br><br>Trading is supported by a unique multi-asset pool that earns liquidity providers fees from market making, swap fees, leverage trading (spreads, funding fees & liquidations), and asset rebalancing.<br><br>Dynamic pricing is supported by Chainlink Oracles along with TWAP pricing from leading volume DEXs.\"\n  // }, {\n  //   id: 2,\n  //   question: \"What is the $AMX Governance Token? \",\n  //   answer: \"The $AMX token is the governance token of the $AMX ecosystem, it provides the token owner voting rights on the direction of the $AMX platform.<br><br>Additionally, when $AMX is staked you will earn 30% of the platform-generated fees, you will also earn Escrowed $AMX tokens and Multiplier Points.\"\n  // }, {\n  //   id: 3,\n  //   question: \"What is the $DLP Token? \",\n  //   answer: \"The $DLP token represents the liquidity users provide to the $AMX platform for Swaps and Margin Trading.<br><br>To provide liquidity to $DLP you <a href='https://gmx.io/buy_dlp' target='_blank'>trade</a> your crypto asset BTC, ETH, LINK, UNI, USDC, USDT, MIM, or FRAX to the liquidity pool, in exchange, you gain exposure to a diversified index of tokens while earning 50% of the platform trading fees and esAMX.\"\n  // }, {\n  //   id: 4,\n  //   question: \"What can I trade on GMX? \",\n  //   answer: \"On $AMX you can swap or margin trade any of the following assets: ETH, BTC, LINK, UNI, USDC, USDT, MIM, FRAX, with others to be added. \"\n  // }]\n\n  // const toggleFAQContent = function(index) {\n  //   if (openedFAQIndex === index) {\n  //     setOpenedFAQIndex(null)\n  //   } else {\n  //     setOpenedFAQIndex(index)\n  //   }\n  // }\n\n  // ARBITRUM\n\n  const arbitrumPositionStatsUrl = getServerUrl(ARBITRUM, \"/position_stats\");\n  const { data: arbitrumPositionStats } = useSWR([arbitrumPositionStatsUrl], {\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\n  });\n\n  const arbitrumTotalVolumeUrl = getServerUrl(ARBITRUM, \"/total_volume\");\n  const { data: arbitrumTotalVolume } = useSWR([arbitrumTotalVolumeUrl], {\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\n  });\n\n  // POLYGON\n\n  const polygonPositionStatsUrl = getServerUrl(POLYGON, \"/position_stats\");\n  const { data: polygonPositionStats } = useSWR([polygonPositionStatsUrl], {\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\n  });\n\n  const polygonTotalVolumeUrl = getServerUrl(POLYGON, \"/total_volume\");\n  const { data: polygonTotalVolume } = useSWR([polygonTotalVolumeUrl], {\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\n  });\n\n  // Total Volume\n\n  const arbitrumTotalVolumeSum = getTotalVolumeSum(arbitrumTotalVolume);\n  const polygonTotalVolumeSum = getTotalVolumeSum(polygonTotalVolume);\n\n  let totalVolumeSum = bigNumberify(0);\n  if (arbitrumTotalVolumeSum && polygonTotalVolumeSum) {\n    totalVolumeSum = totalVolumeSum.add(arbitrumTotalVolumeSum);\n    totalVolumeSum = totalVolumeSum.add(polygonTotalVolumeSum);\n  }\n\n  // Open Interest\n\n  let openInterest = bigNumberify(0);\n  if (\n    arbitrumPositionStats &&\n    arbitrumPositionStats.totalLongPositionSizes &&\n    arbitrumPositionStats.totalShortPositionSizes\n  ) {\n    openInterest = openInterest.add(arbitrumPositionStats.totalLongPositionSizes);\n    openInterest = openInterest.add(arbitrumPositionStats.totalShortPositionSizes);\n  }\n\n  if (\n    polygonPositionStats &&\n    polygonPositionStats.totalLongPositionSizes &&\n    polygonPositionStats.totalShortPositionSizes\n  ) {\n    openInterest = openInterest.add(polygonPositionStats.totalLongPositionSizes);\n    openInterest = openInterest.add(polygonPositionStats.totalShortPositionSizes);\n  }\n\n  // user stat\n  const arbitrumUserStats = useUserStat(ARBITRUM);\n  const polygonUserStats = useUserStat(POLYGON);\n  let totalUsers = 0;\n\n  if (arbitrumUserStats && arbitrumUserStats.uniqueCount) {\n    totalUsers += arbitrumUserStats.uniqueCount;\n  }\n\n  if (polygonUserStats && polygonUserStats.uniqueCount) {\n    totalUsers += polygonUserStats.uniqueCount;\n  }\n\n  const LaunchExchangeButton = () => {\n    return (\n      <HeaderLink\n        className=\"default-btn\"\n        to=\"/trade\"\n        redirectPopupTimestamp={redirectPopupTimestamp}\n        showRedirectModal={showRedirectModal}\n      >\n        <Trans>Launch Exchange</Trans>\n      </HeaderLink>\n    );\n  };\n\n  return (\n    <div className=\"Home\">\n      <div className=\"Home-top\">\n        {/* <div className=\"Home-top-image\"></div> */}\n        <div className=\"Home-title-section-container default-container\">\n          <div className=\"Home-title-section\">\n            <div className=\"Home-title\">\n              <Trans>\n                Decentralized\n                <br />\n                Perpetual Exchange\n              </Trans>\n            </div>\n            <div className=\"Home-description\">\n              <Trans>\n                Trade BTC, ETH, MATIC and other top cryptocurrencies with up to 30x leverage directly from your wallet\n              </Trans>\n            </div>\n            <LaunchExchangeButton />\n          </div>\n        </div>\n        <div className=\"Home-latest-info-container default-container\">\n          <div className=\"Home-latest-info-block\">\n            <img src={tradingIcon} alt=\"Total Trading Volume Icon\" className=\"Home-latest-info__icon\" />\n            <div className=\"Home-latest-info-content\">\n              <div className=\"Home-latest-info__title\">\n                <Trans>Total Trading Volume</Trans>\n              </div>\n              <div className=\"Home-latest-info__value\">${formatAmount(totalVolumeSum, USD_DECIMALS, 0, true)}</div>\n            </div>\n          </div>\n          <div className=\"Home-latest-info-block\">\n            <img src={statsIcon} alt=\"Open Interest Icon\" className=\"Home-latest-info__icon\" />\n            <div className=\"Home-latest-info-content\">\n              <div className=\"Home-latest-info__title\">\n                <Trans>Open Interest</Trans>\n              </div>\n              <div className=\"Home-latest-info__value\">${formatAmount(openInterest, USD_DECIMALS, 0, true)}</div>\n            </div>\n          </div>\n          <div className=\"Home-latest-info-block\">\n            <img src={totaluserIcon} alt=\"Total Users Icon\" className=\"Home-latest-info__icon\" />\n            <div className=\"Home-latest-info-content\">\n              <div className=\"Home-latest-info__title\">\n                <Trans>Total Users</Trans>\n              </div>\n              <div className=\"Home-latest-info__value\">{numberWithCommas(totalUsers.toFixed(0))}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"Home-benefits-section\">\n        <div className=\"Home-benefits default-container\">\n          <div className=\"Home-benefit\">\n            <div className=\"Home-benefit-icon\">\n              <img src={liquidityIcon} alt=\"Reduce Liquidation Risks Icon\" className=\"Home-benefit-icon-symbol\" />\n              <div className=\"Home-benefit-title\">\n                <Trans>Reduce Liquidation Risks</Trans>\n              </div>\n            </div>\n            <div className=\"Home-benefit-description\">\n              <Trans>\n                An aggregate of high-quality price feeds determine when liquidations occur. This keeps positions safe\n                from temporary wicks.\n              </Trans>\n            </div>\n          </div>\n          <div className=\"Home-benefit\">\n            <div className=\"Home-benefit-icon\">\n              <img src={costIcon} alt=\"Save on Costs Icon\" className=\"Home-benefit-icon-symbol\" />\n              <div className=\"Home-benefit-title\">\n                <Trans>Save on Costs</Trans>\n              </div>\n            </div>\n            <div className=\"Home-benefit-description\">\n              <Trans>\n                Enter and exit positions with minimal spread and zero price impact. Get the optimal price without\n                incurring additional costs.\n              </Trans>\n            </div>\n          </div>\n          <div className=\"Home-benefit\">\n            <div className=\"Home-benefit-icon\">\n              <img src={simpleSwapIcon} alt=\"Simple Swaps Icon\" className=\"Home-benefit-icon-symbol\" />\n              <div className=\"Home-benefit-title\">\n                <Trans>Simple Swaps</Trans>\n              </div>\n            </div>\n            <div className=\"Home-benefit-description\">\n              <Trans>\n                Open positions through a simple swap interface. Conveniently swap from any supported asset into the\n                position of your choice.\n              </Trans>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"Home-cta-section\">\n        <div className=\"Home-cta-container default-container\">\n          <div className=\"Home-cta-info\">\n            <div className=\"Home-cta-info__title\">\n              <Trans>Available on your preferred network</Trans>\n            </div>\n            <div className=\"Home-cta-info__description\">\n              <Trans>$AMX is currently live on Arbitrum and Polygon.</Trans>\n            </div>\n          </div>\n          <div className=\"Home-cta-options\">\n            <div className=\"Home-cta-option Home-cta-option-arbitrum\">\n              <div className=\"Home-cta-option-icon\">\n                <img src={arbitrumIcon} alt=\"Arbitrum Icon\" />\n              </div>\n              <div className=\"Home-cta-option-info\">\n                <div className=\"Home-cta-option-title\">Arbitrum</div>\n                <div className=\"Home-cta-option-action\">\n                  <LaunchExchangeButton />\n                </div>\n              </div>\n            </div>\n            <div className=\"Home-cta-option Home-cta-option-ava\">\n              <div className=\"Home-cta-option-icon\">\n                <img src={avaIcon} alt=\"Polygon Icon\" />\n              </div>\n              <div className=\"Home-cta-option-info\">\n                <div className=\"Home-cta-option-title\">Polygon</div>\n                <div className=\"Home-cta-option-action\">\n                  <LaunchExchangeButton />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"Home-token-card-section\">\n        <div className=\"Home-token-card-container default-container\">\n          <div className=\"Home-token-card-info\">\n            <div className=\"Home-token-card-info__title\">\n              <Trans>Two tokens create our ecosystem</Trans>\n            </div>\n          </div>\n          <TokenCard showRedirectModal={showRedirectModal} redirectPopupTimestamp={redirectPopupTimestamp} />\n        </div>\n      </div>\n\n      {/* <div className=\"Home-video-section\">\n        <div className=\"Home-video-container default-container\">\n          <div className=\"Home-video-block\">\n            <img src={amxBigIcon} alt=\"gmxbig\" />\n          </div>\n        </div>\n      </div> */}\n      {/* <div className=\"Home-faqs-section\">\n        <div className=\"Home-faqs-container default-container\">\n          <div className=\"Home-faqs-introduction\">\n            <div className=\"Home-faqs-introduction__title\">FAQs</div>\n            <div className=\"Home-faqs-introduction__description\">Most asked questions. If you wish to learn more, please head to our Documentation page.</div>\n            <a href=\"https://amxdex.gitbook.io/amxdex/\" className=\"default-btn Home-faqs-documentation\">Documentation</a>\n          </div>\n          <div className=\"Home-faqs-content-block\">\n            {\n              faqContent.map((content, index) => (\n                <div className=\"Home-faqs-content\" key={index} onClick={() => toggleFAQContent(index)}>\n                  <div className=\"Home-faqs-content-header\">\n                    <div className=\"Home-faqs-content-header__icon\">\n                      {\n                        openedFAQIndex === index ? <FiMinus className=\"opened\" /> : <FiPlus className=\"closed\" />\n                      }\n                    </div>\n                    <div className=\"Home-faqs-content-header__text\">\n                      { content.question }\n                    </div>\n                  </div>\n                  <div className={ openedFAQIndex === index ? \"Home-faqs-content-main opened\" : \"Home-faqs-content-main\" }>\n                    <div className=\"Home-faqs-content-main__text\">\n                      <div dangerouslySetInnerHTML={{__html: content.answer}} >\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))\n            }\n          </div>\n        </div>\n      </div> */}\n      <Footer showRedirectModal={showRedirectModal} redirectPopupTimestamp={redirectPopupTimestamp} />\n    </div>\n  );\n}\n","import cx from \"classnames\";\nimport { useCallback, useState, useRef } from \"react\";\nimport { IS_TOUCH } from \"config/ui\";\n\nconst OPEN_DELAY = 0;\nconst CLOSE_DELAY = 100;\n\nexport default function Tooltip(props) {\n  const [visible, setVisible] = useState(false);\n  const intervalCloseRef = useRef(null);\n  const intervalOpenRef = useRef(null);\n\n  const position = props.position ?? \"left-bottom\";\n  const trigger = props.trigger ?? \"hover\";\n\n  const onMouseEnter = useCallback(() => {\n    if (trigger !== \"hover\" || IS_TOUCH) return;\n\n    if (intervalCloseRef.current) {\n      clearInterval(intervalCloseRef.current);\n      intervalCloseRef.current = null;\n    }\n    if (!intervalOpenRef.current) {\n      intervalOpenRef.current = setTimeout(() => {\n        setVisible(true);\n        intervalOpenRef.current = null;\n      }, OPEN_DELAY);\n    }\n  }, [setVisible, intervalCloseRef, intervalOpenRef, trigger]);\n\n  const onMouseClick = useCallback(() => {\n    if (trigger !== \"click\" && !IS_TOUCH) return;\n    if (intervalCloseRef.current) {\n      clearInterval(intervalCloseRef.current);\n      intervalCloseRef.current = null;\n    }\n    if (intervalOpenRef.current) {\n      clearInterval(intervalOpenRef.current);\n      intervalOpenRef.current = null;\n    }\n\n    setVisible(true);\n  }, [setVisible, intervalCloseRef, trigger]);\n\n  const onMouseLeave = useCallback(() => {\n    intervalCloseRef.current = setTimeout(() => {\n      setVisible(false);\n      intervalCloseRef.current = null;\n    }, CLOSE_DELAY);\n    if (intervalOpenRef.current) {\n      clearInterval(intervalOpenRef.current);\n      intervalOpenRef.current = null;\n    }\n  }, [setVisible, intervalCloseRef]);\n\n  const className = cx(\"Tooltip\", props.className);\n\n  return (\n    <span className={className} onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave} onClick={onMouseClick}>\n      <span\n        className={cx({ \"Tooltip-handle\": !props.disableHandleStyle }, [props.handleClassName], { active: visible })}\n      >\n        {props.handle}\n      </span>\n      {visible && <div className={cx([\"Tooltip-popup\", position])}>{props.renderContent()}</div>}\n    </span>\n  );\n}\n","import useSWR from \"swr\";\nimport { arrayURLFetcher } from \"lib/legacy\";\nimport { ARBITRUM, POLYGON } from \"config/chains\";\nimport { getServerUrl } from \"config/backend\";\nconst ACTIVE_CHAIN_IDS = [ARBITRUM, POLYGON];\n\nexport default function useFeesSummary() {\n  const { data: feesSummary } = useSWR(\n    ACTIVE_CHAIN_IDS.map((chainId) => getServerUrl(chainId, \"/fees_summary\")),\n    {\n      fetcher: arrayURLFetcher,\n    }\n  );\n\n  const feesSummaryByChain = {};\n  for (let i = 0; i < ACTIVE_CHAIN_IDS.length; i++) {\n    if (feesSummary && feesSummary.length === ACTIVE_CHAIN_IDS.length) {\n      feesSummaryByChain[ACTIVE_CHAIN_IDS[i]] = feesSummary[i];\n    } else {\n      feesSummaryByChain[ACTIVE_CHAIN_IDS[i]] = {};\n    }\n  }\n\n  return { data: feesSummaryByChain };\n}\n\n\n","import { Menu } from \"@headlessui/react\";\nimport { FiChevronDown } from \"react-icons/fi\";\nimport \"./AssetDropdown.css\";\nimport coingeckoIcon from \"img/ic_coingecko_16.svg\";\nimport arbitrumIcon from \"img/ic_arbitrum_16.svg\";\nimport polygonIcon from \"img/ic_polygon_16.svg\";\nimport metamaskIcon from \"img/ic_metamask_16.svg\";\nimport { useWeb3React } from \"@web3-react/core\";\n\nimport { t, Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { ICONLINKS, PLATFORM_TOKENS } from \"config/tokens\";\nimport { addTokenToMetamask } from \"lib/wallets\";\nimport { useChainId } from \"lib/chains\";\n\nfunction AssetDropdown({ assetSymbol, assetInfo }) {\n  const { active } = useWeb3React();\n  const { chainId } = useChainId();\n  console.log(\"---shark AssetDropdown\");\n  let { coingecko, arbitrum, polygon } = ICONLINKS[chainId][assetSymbol] || {};\n  const unavailableTokenSymbols =\n    {\n      42161: [\"ETH\"],\n      43114: [\"MATIC\"],\n    }[chainId] || [];\n\n  return (\n    <Menu>\n      <Menu.Button as=\"div\" className=\"dropdown-arrow center-both\">\n        <FiChevronDown size={20} />\n      </Menu.Button>\n      <Menu.Items as=\"div\" className=\"asset-menu-items\">\n        <Menu.Item>\n          <>\n            {coingecko && (\n              <ExternalLink href={coingecko} className=\"asset-item\">\n                <img src={coingeckoIcon} alt=\"Open in Coingecko\" />\n                <p>\n                  <Trans>Open in Coingecko</Trans>\n                </p>\n              </ExternalLink>\n            )}\n          </>\n        </Menu.Item>\n        <Menu.Item>\n          <>\n            {arbitrum && (\n              <ExternalLink href={arbitrum} className=\"asset-item\">\n                <img src={arbitrumIcon} alt=\"Open in explorer\" />\n                <p>\n                  <Trans>Open in Explorer</Trans>\n                </p>\n              </ExternalLink>\n            )}\n            {polygon && (\n              <ExternalLink href={polygon} className=\"asset-item\">\n                <img src={polygonIcon} alt=\"Open in explorer\" />\n                <p>\n                  <Trans>Open in Explorer</Trans>\n                </p>\n              </ExternalLink>\n            )}\n          </>\n        </Menu.Item>\n        <Menu.Item>\n          <>\n            {active && unavailableTokenSymbols.indexOf(assetSymbol) < 0 && (\n              <div\n                onClick={() => {\n                  let token = assetInfo\n                    ? { ...assetInfo, image: assetInfo.imageUrl }\n                    : PLATFORM_TOKENS[chainId][assetSymbol];\n                  addTokenToMetamask(token);\n                }}\n                className=\"asset-item\"\n              >\n                <img src={metamaskIcon} alt={t`Add to Metamask`} />\n                <p>\n                  <Trans>Add to Metamask</Trans>\n                </p>\n              </div>\n            )}\n          </>\n        </Menu.Item>\n      </Menu.Items>\n    </Menu>\n  );\n}\n\nexport default AssetDropdown;\n","import { Helmet } from \"react-helmet\";\n\nfunction SEO(props) {\n  const { children, ...customMeta } = props;\n  const meta = {\n    title: \"AMX | Decentralized Perpetual Exchange\",\n    description:\n      \"Trade spot or perpetual BTC, ETH, MATIC and other top cryptocurrencies with up to 30x leverage directly from your wallet on Arbitrum and Polygon.\",\n    image: \"https://gmx.io/og.png\",\n    type: \"exchange\",\n    ...customMeta,\n  };\n  return (\n    <>\n      <Helmet>\n        <title>{meta.title}</title>\n        <meta name=\"robots\" content=\"follow, index\" />\n        <meta content={meta.description} name=\"description\" />\n        <meta property=\"og:type\" content={meta.type} />\n        <meta property=\"og:site_name\" content=\"AMX\" />\n        <meta property=\"og:description\" content={meta.description} />\n        <meta property=\"og:title\" content={meta.title} />\n        <meta property=\"og:image\" content={meta.image} />\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\n        <meta name=\"twitter:site\" content=\"@gmx_io\" />\n        <meta name=\"twitter:title\" content={meta.title} />\n        <meta name=\"twitter:description\" content={meta.description} />\n        <meta name=\"twitter:image\" content={meta.image} />\n      </Helmet>\n      {children}\n    </>\n  );\n}\n\nexport default SEO;\n","import { Trans } from \"@lingui/macro\";\nimport { BigNumber } from \"ethers\";\nimport { USD_DECIMALS } from \"lib/legacy\";\nimport \"./StatsTooltip.css\";\nimport { formatAmount } from \"lib/numbers\";\n\ntype Props = {\n  title: string;\n  total?: BigNumber;\n  maticValue?: BigNumber;\n  // arbitrumValue?: BigNumber;\n  showDollar?: boolean;\n  decimalsForConversion: number;\n  symbol: string;\n  isFloatNum?: boolean;\n};\n\nexport default function StatsTooltip({\n  title,\n  total,\n  maticValue,\n  // arbitrumValue,\n  showDollar = true,\n  decimalsForConversion = USD_DECIMALS,\n  symbol,\n  isFloatNum = false,\n}: Props) {\n  return (\n    <>\n      {/* <p className=\"Tooltip-row\">\n        <span className=\"label\">\n          <Trans>{title} on Arbitrum:</Trans>\n        </span>\n        <span className=\"amount\">\n          {showDollar && \"$\"}\n          {formatAmount(arbitrumValue, decimalsForConversion, 0, true)}\n          {!showDollar && symbol && \" \" + symbol}\n        </span>\n      </p> */}\n      <p className=\"Tooltip-row\">\n        <span className=\"label\">\n          <Trans>{title} on Polygon:</Trans>\n        </span>\n        <span className=\"amount\">\n          {!isFloatNum && showDollar && \"$\"}\n          {isFloatNum && \"\"+maticValue}\n          {!isFloatNum && formatAmount(maticValue, decimalsForConversion, 0, true)}\n          {!showDollar && symbol && \" \" + symbol}\n        </span>\n      </p>\n      <div className=\"Tooltip-divider\" />\n      <p className=\"Tooltip-row\">\n        <span className=\"label\">\n          <Trans>Total:</Trans>\n        </span>\n        <span className=\"amount\">\n          {!isFloatNum && showDollar && \"$\"}\n          {isFloatNum && \"\" + total}\n          {!isFloatNum && formatAmount(total, decimalsForConversion, 0, true)}\n          {!showDollar && symbol && \" \" + symbol}\n        </span>\n      </p>\n    </>\n  );\n}\n","import \"./StatsTooltip.css\";\ntype Props = {\n  label: string;\n  value: number | [number];\n  showDollar?: boolean;\n};\n\nexport default function StatsTooltipRow({ label, value, showDollar = true }: Props) {\n  function renderValue() {\n    if (Array.isArray(value)) {\n      return (\n        <ul className=\"Tooltip-row-values\">\n          {value.map((v, i) => (\n            <li key={i}>{v}</li>\n          ))}\n        </ul>\n      );\n    }\n    return (\n      <span className=\"Tooltip-row-value\">\n        {showDollar && \"$\"}\n        {value}\n      </span>\n    );\n  }\n  return (\n    <div className=\"Tooltip-row\">\n      <span className=\"label\">{label}:</span>\n      {renderValue()}\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { Trans, t } from \"@lingui/macro\";\nimport useSWR from \"swr\";\nimport { PieChart, Pie, Cell, Tooltip } from \"recharts\";\nimport TooltipComponent from \"components/Tooltip/Tooltip\";\n\nimport hexToRgba from \"hex-to-rgba\";\nimport { ethers } from \"ethers\";\n\nimport {\n  USD_DECIMALS,\n  GMX_DECIMALS,\n  GLP_DECIMALS,\n  BASIS_POINTS_DIVISOR,\n  DEFAULT_MAX_USDG_AMOUNT,\n  getPageTitle,\n  importImage,\n  arrayURLFetcher,\n} from \"lib/legacy\";\nimport { useTotalGmxInLiquidity, useGmxPrice, useTotalGmxStaked, useTotalGmxSupply, \n  useTradeVolumeHistory, usePositionStates, useTotalVolume, useFeesData, useVolumeData,\n   formatNumber} from \"domain/legacy\";\nimport useFeesSummary from \"domain/useFeesSummary\";\n\nimport { getContract } from \"config/contracts\";\n\nimport VaultV2 from \"abis/VaultV2.json\";\nimport ReaderV2 from \"abis/ReaderV2.json\";\nimport GlpManager from \"abis/GlpManager.json\";\nimport Footer from \"components/Footer/Footer\";\n\nimport \"./DashboardV2.css\";\n\nimport gmx40Icon from \"img/ic_gmx_40.svg\";\nimport glp40Icon from \"img/ic_glp_40.svg\";\nimport polygon16Icon from \"img/ic_polygon_16.svg\";\nimport arbitrum16Icon from \"img/ic_arbitrum_16.svg\";\nimport arbitrum24Icon from \"img/ic_arbitrum_24.svg\";\nimport polygon24Icon from \"img/ic_polygon_24.svg\";\n\nimport AssetDropdown from \"./AssetDropdown\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport SEO from \"components/Common/SEO\";\nimport StatsTooltip from \"components/StatsTooltip/StatsTooltip\";\nimport StatsTooltipRow from \"components/StatsTooltip/StatsTooltipRow\";\nimport { ARBITRUM, POLYGON, getChainName } from \"config/chains\";\nimport { getServerUrl } from \"config/backend\";\nimport { contractFetcher } from \"lib/contracts\";\nimport { useInfoTokens } from \"domain/tokens\";\nimport { getTokenBySymbol, getWhitelistedTokens, GLP_POOL_COLORS } from \"config/tokens\";\nimport { bigNumberify, expandDecimals, formatAmount, formatKeyAmount, numberWithCommas } from \"lib/numbers\";\nimport { useChainId } from \"lib/chains\";\nimport { formatDate } from \"lib/dates\";\nconst ACTIVE_CHAIN_IDS = [ARBITRUM, POLYGON];\n\nconst { AddressZero } = ethers.constants;\n\nfunction getVolumeInfo(hourlyVolumes) {\n  if (!hourlyVolumes || hourlyVolumes.length === 0) {\n    return {};\n  }\n  const dailyVolumes = hourlyVolumes.map((hourlyVolume) => {\n    const secondsPerHour = 60 * 60;\n    const minTime = parseInt(Date.now() / 1000 / secondsPerHour) * secondsPerHour - 24 * secondsPerHour;\n    const info = {};\n    let totalVolume = bigNumberify(0);\n    for (let i = 0; i < hourlyVolume.length; i++) {\n      const item = hourlyVolume[i].data;\n      if (parseInt(item.timestamp) < minTime) {\n        break;\n      }\n\n      if (!info[item.token]) {\n        info[item.token] = bigNumberify(0);\n      }\n\n      info[item.token] = info[item.token].add(item.volume);\n      totalVolume = totalVolume.add(item.volume);\n    }\n    info.totalVolume = totalVolume;\n    return info;\n  });\n  return dailyVolumes.reduce(\n    (acc, cv, index) => {\n      acc.totalVolume = acc.totalVolume.add(cv.totalVolume);\n      acc[ACTIVE_CHAIN_IDS[index]] = cv;\n      return acc;\n    },\n    { totalVolume: bigNumberify(0) }\n  );\n}\n\nfunction getPositionStats(positionStats) {\n  if (!positionStats || positionStats.length === 0) {\n    return null;\n  }\n  return positionStats.reduce(\n    (acc, cv, i) => {\n      acc.totalLongPositionSizes = acc.totalLongPositionSizes.add(cv.totalLongPositionSizes);\n      acc.totalShortPositionSizes = acc.totalShortPositionSizes.add(cv.totalShortPositionSizes);\n      acc[ACTIVE_CHAIN_IDS[i]] = cv;\n      return acc;\n    },\n    {\n      totalLongPositionSizes: bigNumberify(0),\n      totalShortPositionSizes: bigNumberify(0),\n    }\n  );\n}\n\nfunction getCurrentFeesUsd(tokenAddresses, fees, infoTokens) {\n  if (!fees || !infoTokens) {\n    return bigNumberify(0);\n  }\n\n  let currentFeesUsd = bigNumberify(0);\n  for (let i = 0; i < tokenAddresses.length; i++) {\n    const tokenAddress = tokenAddresses[i];\n    const tokenInfo = infoTokens[tokenAddress];\n    if (!tokenInfo || !tokenInfo.contractMinPrice) {\n      continue;\n    }\n\n    const feeUsd = fees[i].mul(tokenInfo.contractMinPrice).div(expandDecimals(1, tokenInfo.decimals));\n    currentFeesUsd = currentFeesUsd.add(feeUsd);\n  }\n  console.log(\"---shark currentFeesUsd: \", currentFeesUsd);\n  return currentFeesUsd;\n}\n\nexport default function DashboardV2() {\n  const { active, library } = useWeb3React();\n  const { chainId } = useChainId();\n  console.log(\"---shark DashboardV2 chainId: \", chainId);\n  // const totalVolume = useTotalVolume();\n  const [totalVolume, totalVolumeDelta] = useVolumeData();\n\n  const chainName = getChainName(chainId);\n  console.log(\"---shark DashboardV2 chainName: \", chainName);\n  // const { data: positionStats } = useSWR(\n  //   ACTIVE_CHAIN_IDS.map((chainId) => getServerUrl(chainId, \"/position_stats\")),\n  //   {\n  //     fetcher: arrayURLFetcher,\n  //   }\n  // );\n  const positionStats = usePositionStates(chainId);\n\n  // const { data: hourlyVolumes } = useSWR(\n  //   ACTIVE_CHAIN_IDS.map((chainId) => getServerUrl(chainId, \"/hourly_volume\")),\n  //   {\n  //     fetcher: arrayURLFetcher,\n  //   }\n  // );\n\n  // const hourlyVolumes = useTradeVolumeHistory(chainId);\n  // const dailyVolume = useVolumeData({from: parseInt(Date.now() / 1000) - 86400, to: parseInt(Date.now() / 1000) });\n\n\n  let { total: totalGmxSupply } = useTotalGmxSupply();\n\n  // const currentVolumeInfo = getVolumeInfo(hourlyVolumes);\n\n  // const positionStatsInfo = getPositionStats(positionStats);\n  const positionStatsInfo = positionStats;\n\n\n  function getWhitelistedTokenAddresses(chainId) {\n    const whitelistedTokens = getWhitelistedTokens(chainId);\n    return whitelistedTokens.map((token) => token.address);\n  }\n\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const tokenList = whitelistedTokens.filter((t) => !t.isWrapped);\n  const visibleTokens = tokenList.filter((t) => !t.isTempHidden);\n\n  const readerAddress = getContract(chainId, \"Reader\");\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const glpManagerAddress = getContract(chainId, \"GlpManager\");\n\n  const gmxAddress = getContract(chainId, \"GMX\");\n  const glpAddress = getContract(chainId, \"GLP\");\n  const usdgAddress = getContract(chainId, \"USDG\");\n\n  const tokensForSupplyQuery = [gmxAddress, glpAddress, usdgAddress];\n\n  const { data: aums } = useSWR([`Dashboard:getAums:${active}`, chainId, glpManagerAddress, \"getAums\"], {\n    fetcher: contractFetcher(library, GlpManager),\n  });\n\n  const { data: totalSupplies } = useSWR(\n    [`Dashboard:totalSupplies:${active}`, chainId, readerAddress, \"getTokenBalancesWithSupplies\", AddressZero],\n    {\n      fetcher: contractFetcher(library, ReaderV2, [tokensForSupplyQuery]),\n    }\n  );\n  \n  const { data: totalTokenWeights } = useSWR(\n    [`GlpSwap:totalTokenWeights:${active}`, chainId, vaultAddress, \"totalTokenWeights\"],\n    {\n      fetcher: contractFetcher(library, VaultV2),\n    }\n  );\n\n  const { infoTokens } = useInfoTokens(library, chainId, active, undefined, undefined);\n  const { infoTokens: infoTokensArbitrum } = useInfoTokens(null, ARBITRUM, active, undefined, undefined);\n  const { infoTokens: infoTokensMatic } = useInfoTokens(null, POLYGON, active, undefined, undefined);\n\n  const { data: currentFees } = useSWR(\n    infoTokensArbitrum[AddressZero].contractMinPrice && infoTokensMatic[AddressZero].contractMinPrice\n      ? \"Dashboard:currentFees\"\n      : null,\n    {\n      fetcher: () => {\n        return Promise.all(\n          ACTIVE_CHAIN_IDS.map((chainId) =>\n            contractFetcher(null, ReaderV2, [getWhitelistedTokenAddresses(chainId)])(\n              `Dashboard:fees:${chainId}`,\n              chainId,\n              getContract(chainId, \"Reader\"),\n              \"getFees\",\n              getContract(chainId, \"Vault\")\n            )\n          )\n        ).then((fees) => {\n          return fees.reduce(\n            (acc, cv, i) => {\n              const feeUSD = getCurrentFeesUsd(\n                getWhitelistedTokenAddresses(ACTIVE_CHAIN_IDS[i]),\n                cv,\n                ACTIVE_CHAIN_IDS[i] === ARBITRUM ? infoTokensArbitrum : infoTokensMatic\n              );\n              acc[ACTIVE_CHAIN_IDS[i]] = feeUSD;\n              acc.total = acc.total.add(feeUSD);\n              return acc;\n            },\n            { total: bigNumberify(0) }\n          );\n        });\n      },\n    }\n  );\n\n  const { data: feesSummaryByChain } = useFeesSummary();\n  const feesSummary = feesSummaryByChain[chainId];\n\n  const eth = infoTokens[getTokenBySymbol(chainId, \"WETH\").address];\n  const shouldIncludeCurrrentFees =\n    feesSummaryByChain[chainId].lastUpdatedAt &&\n    parseInt(Date.now() / 1000) - feesSummaryByChain[chainId].lastUpdatedAt > 60 * 60;\n\n  // const totalFees = ACTIVE_CHAIN_IDS.map((chainId) => {\n  //   if (shouldIncludeCurrrentFees && currentFees && currentFees[chainId]) {\n  //     return currentFees[chainId].div(expandDecimals(1, USD_DECIMALS)).add(feesSummaryByChain[chainId].totalFees || 0);\n  //   }\n\n  //   return feesSummaryByChain[chainId].totalFees || 0;\n  // })\n  //   .map((v) => Math.round(v))\n  //   .reduce(\n  //     (acc, cv, i) => {\n  //       acc[ACTIVE_CHAIN_IDS[i]] = cv;\n  //       acc.total = acc.total + cv;\n  //       return acc;\n  //     },\n  //     { total: 0 }\n  //   );\n  const [totalFees, totalFeesDelta] = useFeesData()\n\n  console.log(\"---shark totalFees: \", totalFees?.[chainId]);\n  const { gmxPrice, gmxPriceFromArbitrum, gmxPriceFromPolygon } = useGmxPrice(\n    chainId,\n    { arbitrum: chainId === ARBITRUM ? library : undefined },\n    active\n  );\n\n  let { total: totalGmxInLiquidity } = useTotalGmxInLiquidity(chainId, active);\n\n  let { matic: maticStakedGmx, arbitrum: arbitrumStakedGmx, total: totalStakedGmx } = useTotalGmxStaked();\n\n  let gmxMarketCap;\n  if (gmxPrice && totalGmxSupply) {\n    gmxMarketCap = gmxPrice.mul(totalGmxSupply).div(expandDecimals(1, GMX_DECIMALS));\n  }\n\n  let stakedGmxSupplyUsd;\n  if (gmxPrice && totalStakedGmx) {\n    stakedGmxSupplyUsd = totalStakedGmx.mul(gmxPrice).div(expandDecimals(1, GMX_DECIMALS));\n  }\n\n  let aum;\n  if (aums && aums.length > 0) {\n    aum = aums[0].add(aums[1]).div(2);\n  }\n\n  let glpPrice;\n  let glpSupply;\n  let glpMarketCap;\n  if (aum && totalSupplies && totalSupplies[3]) {\n    glpSupply = totalSupplies[3];\n    glpPrice =\n      aum && aum.gt(0) && glpSupply.gt(0)\n        ? aum.mul(expandDecimals(1, GLP_DECIMALS)).div(glpSupply)\n        : expandDecimals(1, USD_DECIMALS);\n    glpMarketCap = glpPrice.mul(glpSupply).div(expandDecimals(1, GLP_DECIMALS));\n  }\n  console.log(\"---shark glpPrice: \", glpPrice);\n\n  let tvl;\n  if (glpMarketCap && gmxPrice && totalStakedGmx) {\n    tvl = glpMarketCap.add(gmxPrice.mul(totalStakedGmx).div(expandDecimals(1, GMX_DECIMALS)));\n  }\n\n  // const ethFloorPriceFund = expandDecimals(350 + 148 + 384, 18);\n  // const glpFloorPriceFund = expandDecimals(660001, 18);\n  // const usdcFloorPriceFund = expandDecimals(784598 + 200000, 30);\n  const ethFloorPriceFund = expandDecimals(350, 18);\n  const glpFloorPriceFund = expandDecimals(660, 18);\n  const usdcFloorPriceFund = expandDecimals(784 + 200, 30);\n\n  let totalFloorPriceFundUsd;\n\n  if (eth && eth.contractMinPrice && glpPrice) {\n    const ethFloorPriceFundUsd = ethFloorPriceFund.mul(eth.contractMinPrice).div(expandDecimals(1, eth.decimals));\n    const glpFloorPriceFundUsd = glpFloorPriceFund.mul(glpPrice).div(expandDecimals(1, 18));\n\n    totalFloorPriceFundUsd = ethFloorPriceFundUsd.add(glpFloorPriceFundUsd).add(usdcFloorPriceFund);\n  }\n\n  let adjustedUsdgSupply = bigNumberify(0);\n\n  for (let i = 0; i < tokenList.length; i++) {\n    const token = tokenList[i];\n    const tokenInfo = infoTokens[token.address];\n    if (tokenInfo && tokenInfo.usdgAmount) {\n      adjustedUsdgSupply = adjustedUsdgSupply.add(tokenInfo.usdgAmount);\n    }\n  }\n\n  const getWeightText = (tokenInfo) => {\n    if (\n      !tokenInfo.weight ||\n      !tokenInfo.usdgAmount ||\n      !adjustedUsdgSupply ||\n      adjustedUsdgSupply.eq(0) ||\n      !totalTokenWeights\n    ) {\n      return \"...\";\n    }\n\n    const currentWeightBps = tokenInfo.usdgAmount.mul(BASIS_POINTS_DIVISOR).div(adjustedUsdgSupply);\n    // use add(1).div(10).mul(10) to round numbers up\n    const targetWeightBps = tokenInfo.weight.mul(BASIS_POINTS_DIVISOR).div(totalTokenWeights).add(1).div(10).mul(10);\n\n    const weightText = `${formatAmount(currentWeightBps, 2, 2, false)}% / ${formatAmount(\n      targetWeightBps,\n      2,\n      2,\n      false\n    )}%`;\n\n    return (\n      <TooltipComponent\n        handle={weightText}\n        position=\"right-bottom\"\n        renderContent={() => {\n          return (\n            <>\n              <StatsTooltipRow\n                label={t`Current Weight`}\n                value={`${formatAmount(currentWeightBps, 2, 2, false)}%`}\n                showDollar={false}\n              />\n              <StatsTooltipRow\n                label={t`Target Weight`}\n                value={`${formatAmount(targetWeightBps, 2, 2, false)}%`}\n                showDollar={false}\n              />\n              <br />\n              {currentWeightBps.lt(targetWeightBps) && (\n                <div className=\"text-white\">\n                  <Trans>\n                    {tokenInfo.symbol} is below its target weight.\n                    <br />\n                    <br />\n                    Get lower fees to{\" \"}\n                    <Link to=\"/buy_dlp\" target=\"_blank\" rel=\"noopener noreferrer\">\n                      buy $DLP\n                    </Link>{\" \"}\n                    with {tokenInfo.symbol},&nbsp; and to{\" \"}\n                    <Link to=\"/trade\" target=\"_blank\" rel=\"noopener noreferrer\">\n                      swap\n                    </Link>{\" \"}\n                    {tokenInfo.symbol} for other tokens.\n                  </Trans>\n                </div>\n              )}\n              {currentWeightBps.gt(targetWeightBps) && (\n                <div className=\"text-white\">\n                  <Trans>\n                    {tokenInfo.symbol} is above its target weight.\n                    <br />\n                    <br />\n                    Get lower fees to{\" \"}\n                    <Link to=\"/trade\" target=\"_blank\" rel=\"noopener noreferrer\">\n                      swap\n                    </Link>{\" \"}\n                    tokens for {tokenInfo.symbol}.\n                  </Trans>\n                </div>\n              )}\n              <br />\n              <div>\n                <ExternalLink href=\"https://amxdex.gitbook.io/amxdex/\">\n                  <Trans>More Info</Trans>\n                </ExternalLink>\n              </div>\n            </>\n          );\n        }}\n      />\n    );\n  };\n\n  let stakedPercent = 0;\n\n  if (totalGmxSupply && !totalGmxSupply.isZero() && !totalStakedGmx.isZero()) {\n    stakedPercent = totalStakedGmx.mul(100).div(totalGmxSupply).toNumber();\n  }\n\n  let liquidityPercent = 0;\n\n  if (totalGmxSupply && !totalGmxSupply.isZero() && totalGmxInLiquidity) {\n    liquidityPercent = totalGmxInLiquidity.mul(100).div(totalGmxSupply).toNumber();\n  }\n\n  let notStakedPercent = 100 - stakedPercent - liquidityPercent;\n\n  let gmxDistributionData = [\n    {\n      name: t`staked`,\n      value: stakedPercent,\n      color: \"#4353fa\",\n    },\n    {\n      name: t`in liquidity`,\n      value: liquidityPercent,\n      color: \"#0598fa\",\n    },\n    {\n      name: t`not staked`,\n      value: notStakedPercent,\n      color: \"#5c0af5\",\n    },\n  ];\n\n  const totalStatsStartDate = chainId === POLYGON ? t`06 Jan 2022` : t`01 Sep 2021`;\n\n  let stableGlp = 0;\n  let totalGlp = 0;\n\n  let glpPool = tokenList.map((token) => {\n    const tokenInfo = infoTokens[token.address];\n    if (tokenInfo.usdgAmount && adjustedUsdgSupply && adjustedUsdgSupply.gt(0)) {\n      const currentWeightBps = tokenInfo.usdgAmount.mul(BASIS_POINTS_DIVISOR).div(adjustedUsdgSupply);\n      if (tokenInfo.isStable) {\n        stableGlp += parseFloat(`${formatAmount(currentWeightBps, 2, 2, false)}`);\n      }\n      totalGlp += parseFloat(`${formatAmount(currentWeightBps, 2, 2, false)}`);\n      return {\n        fullname: token.name,\n        name: token.symbol,\n        value: parseFloat(`${formatAmount(currentWeightBps, 2, 2, false)}`),\n      };\n    }\n    return null;\n  });\n\n  let stablePercentage = totalGlp > 0 ? ((stableGlp * 100) / totalGlp).toFixed(2) : \"0.0\";\n\n  glpPool = glpPool.filter(function (element) {\n    return element !== null;\n  });\n\n  glpPool = glpPool.sort(function (a, b) {\n    if (a.value < b.value) return 1;\n    else return -1;\n  });\n\n  gmxDistributionData = gmxDistributionData.sort(function (a, b) {\n    if (a.value < b.value) return 1;\n    else return -1;\n  });\n\n  const [gmxActiveIndex, setGMXActiveIndex] = useState(null);\n\n  const onGMXDistributionChartEnter = (_, index) => {\n    setGMXActiveIndex(index);\n  };\n\n  const onGMXDistributionChartLeave = (_, index) => {\n    setGMXActiveIndex(null);\n  };\n\n  const [glpActiveIndex, setGLPActiveIndex] = useState(null);\n\n  const onGLPPoolChartEnter = (_, index) => {\n    setGLPActiveIndex(index);\n  };\n\n  const onGLPPoolChartLeave = (_, index) => {\n    setGLPActiveIndex(null);\n  };\n\n  const CustomTooltip = ({ active, payload }) => {\n    if (active && payload && payload.length) {\n      return (\n        <div className=\"stats-label\">\n          <div className=\"stats-label-color\" style={{ backgroundColor: payload[0].color }}></div>\n          {payload[0].value}% {payload[0].name}\n        </div>\n      );\n    }\n\n    return null;\n  };\n\n  return (\n    <SEO title={getPageTitle(\"Dashboard\")}>\n      <div className=\"default-container DashboardV2 page-layout\">\n        <div className=\"section-title-block\">\n          <div className=\"section-title-icon\"></div>\n          <div className=\"section-title-content\">\n            <div className=\"Page-title\">\n              <Trans>Stats</Trans> {chainId === POLYGON && <img src={polygon24Icon} alt=\"polygon24Icon\" />}\n              {chainId === ARBITRUM && <img src={arbitrum24Icon} alt=\"arbitrum24Icon\" />}\n            </div>\n            <div className=\"Page-description\">\n            <Trans>\n              {chainName} Total Stats start from {totalStatsStartDate}.<br /> For detailed stats:\n              </Trans>{\" \"}\n              {chainId === ARBITRUM && <ExternalLink href=\"https://stats.amx.exchange\">https://stats.amx.exchange</ExternalLink>}\n              {chainId === POLYGON && (\n                <ExternalLink href=\"https://stats.amx.exchange/polygon\">https://stats.amx.exchange/polygon</ExternalLink>\n              )}\n              .\n            </div>\n          </div>\n        </div>\n        <div className=\"DashboardV2-content\">\n          <div className=\"DashboardV2-cards\">\n            <div className=\"App-card\">\n              <div className=\"App-card-title\">\n                <Trans>Overview</Trans>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-content\">\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>AUM</Trans>\n                  </div>\n                  <div>\n                    <TooltipComponent\n                      handle={`$${formatAmount(tvl, USD_DECIMALS, 0, true)}`}\n                      position=\"right-bottom\"\n                      renderContent={() => (\n                        <span>{t`Assets Under Management: $AMX staked (All chains) + $DLP pool (${chainName})`}</span>\n                        // <div>{t`Assets Under Management: $AMX staked (All chains) + $DLP pool (${chainName})`}</div>\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>$DLP Pool</Trans>\n                  </div>\n                  <div>\n                    <TooltipComponent\n                      handle={`$${formatAmount(aum, USD_DECIMALS, 0, true)}`}\n                      position=\"right-bottom\"\n                      renderContent={() => <span>{t`Total value of tokens in $DLP pool (${chainName})`}</span>}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>24h Volume</Trans>\n                  </div>\n                  <div>\n                    <TooltipComponent\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      // handle={`$${formatAmount(currentVolumeInfo?.[chainId]?.totalVolume, 18, 0, true)}`}\n                      handle={totalVolumeDelta? `${formatNumber(totalVolumeDelta, { currency: true, compact: false })}` : `$0`}\n\n                      renderContent={() => (\n                        <StatsTooltip\n                          title={t`Volume`}\n                          // arbitrumValue={currentVolumeInfo?.[ARBITRUM].totalVolume}\n                          arbitrumValue={bigNumberify(0)}\n                          // maticValue={currentVolumeInfo?.[POLYGON].totalVolume}\n                          maticValue={totalVolumeDelta? formatNumber(totalVolumeDelta, { currency: true, compact: false }) : `$0`}\n                          total={totalVolumeDelta? formatNumber(totalVolumeDelta, { currency: true, compact: false }): `$0`}\n                          isFloatNum={true}\n                        />\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Long Positions</Trans>\n                  </div>\n                  <div>\n                    <TooltipComponent\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      handle={`$${formatAmount(\n                        // positionStatsInfo?.[chainId]?.totalLongPositionSizes,\n                        positionStatsInfo?.totalLongPositionSizes,\n                        18,\n                        0,\n                        true\n                      )}`}\n                      renderContent={() => (\n                        <StatsTooltip\n                          title={t`Long Positions`}\n                          // arbitrumValue={positionStatsInfo?.[ARBITRUM].totalLongPositionSizes}\n                          maticValue={positionStatsInfo?.totalLongPositionSizes}\n                          total={positionStatsInfo?.totalLongPositionSizes}\n                        />\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Short Positions</Trans>\n                  </div>\n                  <div>\n                    <TooltipComponent\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      handle={`$${formatAmount(\n                        // positionStatsInfo?.[chainId]?.totalShortPositionSizes,\n                        positionStatsInfo?.totalShortPositionSizes,\n                        18,\n                        0,\n                        true\n                      )}`}\n                      renderContent={() => (\n                        <StatsTooltip\n                          title={t`Short Positions`}\n                          // arbitrumValue={positionStatsInfo?.[ARBITRUM].totalShortPositionSizes}\n                          maticValue={positionStatsInfo?.totalShortPositionSizes}\n                          total={positionStatsInfo?.totalShortPositionSizes}\n                        />\n                      )}\n                    />\n                  </div>\n                </div>\n                {feesSummary.lastUpdatedAt ? (\n                  <div className=\"App-card-row\">\n                    <div className=\"label\">\n                      <Trans>Fees since</Trans> {formatDate(feesSummary.lastUpdatedAt)}\n                    </div>\n                    <div>\n                      <TooltipComponent\n                        position=\"right-bottom\"\n                        className=\"nowrap\"\n                        handle={`$${formatAmount(currentFees?.[chainId], USD_DECIMALS, 2, true)}`}\n                        renderContent={() => (\n                          <StatsTooltip\n                            title={t`Fees`}\n                            arbitrumValue={currentFees?.[ARBITRUM]}\n                            maticValue={currentFees?.[POLYGON]}\n                            total={currentFees?.total}\n                          />\n                        )}\n                      />\n                    </div>\n                  </div>\n                ) : null}\n              </div>\n            </div>\n            <div className=\"App-card\">\n              <div className=\"App-card-title\">\n                <Trans>Total Stats</Trans>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-content\">\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Total Fees</Trans>\n                  </div>\n                  <div>\n                    <TooltipComponent\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      // handle={`$${numberWithCommas(totalFees?.[chainId])}`}\n                      handle={totalFees? `${formatNumber(totalFees, { currency: true, compact: false })}` : `$0`}\n                      renderContent={() => (\n                        <StatsTooltip\n                          title={t`Total Fees`}\n                          // arbitrumValue={totalFees?.[ARBITRUM]}\n                          // maticValue={totalFees?.[POLYGON]}\n                          maticValue={totalFees? formatNumber(totalFees, { currency: true, compact: false }): `$0`}\n                          // total={totalFees?.total}\n                          total={totalFees? formatNumber(totalFees, { currency: true, compact: false }) : `$0`}\n                          decimalsForConversion={0}\n                          isFloatNum={true}\n                        />\n                      )}\n                      // renderContent={()=>{}}\n\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Total Volume</Trans>\n                  </div>\n                  <div>\n                    <TooltipComponent\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      // handle={`$${formatAmount(totalVolume?.[chainId], USD_DECIMALS, 0, true)}`}\n                      handle={totalVolume? `${formatNumber(totalVolume, { currency: true, compact: false })}` : `$0`}\n                      renderContent={() => (\n                        <StatsTooltip\n                          title={t`Total Volume`}\n                          // arbitrumValue={totalVolume?.[ARBITRUM]}\n                          // maticValue={totalVolume?.[POLYGON]}\n                          maticValue={totalVolume? formatNumber(totalVolume, { currency: true, compact: false }) : `$0`}\n                          // total={totalVolume?.total}\n                          total={totalVolume? formatNumber(totalVolume, { currency: true, compact: false }) : `$0`}\n                          isFloatNum={true}\n                        />\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Floor Price Fund</Trans>\n                  </div>\n                  <div>${formatAmount(totalFloorPriceFundUsd, 30, 0, true)}</div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"Tab-title-section\">\n            <div className=\"Page-title\">\n              <Trans>Tokens</Trans> {chainId === POLYGON && <img src={polygon24Icon} alt=\"polygon24Icon\" />}\n              {chainId === ARBITRUM && <img src={arbitrum24Icon} alt=\"arbitrum24Icon\" />}\n            </div>\n            <div className=\"Page-description\">\n              <Trans>Platform and $DLP index tokens.</Trans>\n            </div>\n          </div>\n          <div className=\"DashboardV2-token-cards\">\n            <div className=\"stats-wrapper stats-wrapper--gmx\">\n              <div className=\"App-card\">\n                <div className=\"stats-block\">\n                  <div className=\"App-card-title\">\n                    <div className=\"App-card-title-mark\">\n                      <div className=\"App-card-title-mark-icon\">\n                        <img src={gmx40Icon} alt=\"$AMX Token Icon\" />\n                      </div>\n                      <div className=\"App-card-title-mark-info\">\n                        <div className=\"App-card-title-mark-title\">$AMX</div>\n                        <div className=\"App-card-title-mark-subtitle\">$AMX</div>\n                      </div>\n                      <div>\n                        <AssetDropdown assetSymbol=\"GMX\" />\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Price</Trans>\n                      </div>\n                      <div>\n                        {!gmxPrice && \"...\"}\n                        {gmxPrice && (\n                          <TooltipComponent\n                            position=\"right-bottom\"\n                            className=\"nowrap\"\n                            handle={\"$\" + formatAmount(gmxPrice, USD_DECIMALS, 2, true)}\n                            renderContent={() => (\n                              <>\n                                {/* <StatsTooltipRow\n                                  label={t`Price on Arbitrum`}\n                                  value={formatAmount(gmxPriceFromArbitrum, USD_DECIMALS, 2, true)}\n                                  showDollar={true}\n                                /> */}\n                                <StatsTooltipRow\n                                  label={t`Price on Polygon`}\n                                  value={formatAmount(gmxPriceFromPolygon, USD_DECIMALS, 2, true)}\n                                  showDollar={true}\n                                />\n                              </>\n                            )}\n                          />\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Supply</Trans>\n                      </div>\n                      <div>{formatAmount(totalGmxSupply, GMX_DECIMALS, 0, true)} $AMX</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Total Staked</Trans>\n                      </div>\n                      <div>\n                        <TooltipComponent\n                          position=\"right-bottom\"\n                          className=\"nowrap\"\n                          handle={`$${formatAmount(stakedGmxSupplyUsd, USD_DECIMALS, 0, true)}`}\n                          renderContent={() => (\n                            <StatsTooltip\n                              title={t`Staked`}\n                              arbitrumValue={arbitrumStakedGmx}\n                              maticValue={maticStakedGmx}\n                              total={totalStakedGmx}\n                              decimalsForConversion={GMX_DECIMALS}\n                              showDollar={false}\n                            />\n                          )}\n                        />\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Market Cap</Trans>\n                      </div>\n                      <div>${formatAmount(gmxMarketCap, USD_DECIMALS, 0, true)}</div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"stats-piechart\" onMouseLeave={onGMXDistributionChartLeave}>\n                  {gmxDistributionData.length > 0 && (\n                    <PieChart width={210} height={210}>\n                      <Pie\n                        data={gmxDistributionData}\n                        cx={100}\n                        cy={100}\n                        innerRadius={73}\n                        outerRadius={80}\n                        fill=\"#8884d8\"\n                        dataKey=\"value\"\n                        startAngle={90}\n                        endAngle={-270}\n                        paddingAngle={2}\n                        onMouseEnter={onGMXDistributionChartEnter}\n                        onMouseOut={onGMXDistributionChartLeave}\n                        onMouseLeave={onGMXDistributionChartLeave}\n                      >\n                        {gmxDistributionData.map((entry, index) => (\n                          <Cell\n                            key={`cell-${index}`}\n                            fill={entry.color}\n                            style={{\n                              filter:\n                                gmxActiveIndex === index\n                                  ? `drop-shadow(0px 0px 6px ${hexToRgba(entry.color, 0.7)})`\n                                  : \"none\",\n                              cursor: \"pointer\",\n                            }}\n                            stroke={entry.color}\n                            strokeWidth={gmxActiveIndex === index ? 1 : 1}\n                          />\n                        ))}\n                      </Pie>\n                      <text x={\"50%\"} y={\"50%\"} fill=\"white\" textAnchor=\"middle\" dominantBaseline=\"middle\">\n                        <Trans>Distribution</Trans>\n                      </text>\n                      <Tooltip content={<CustomTooltip />} />\n                    </PieChart>\n                  )}\n                </div>\n              </div>\n              <div className=\"App-card\">\n                <div className=\"stats-block\">\n                  <div className=\"App-card-title\">\n                    <div className=\"App-card-title-mark\">\n                      <div className=\"App-card-title-mark-icon\">\n                        <img src={glp40Icon} alt=\"glp40Icon\" />\n                        {chainId === ARBITRUM ? (\n                          <img src={arbitrum16Icon} alt={t`Arbitrum Icon`} className=\"selected-network-symbol\" />\n                        ) : (\n                          <img src={polygon16Icon} alt={t`Polygon Icon`} className=\"selected-network-symbol\" />\n                        )}\n                      </div>\n                      <div className=\"App-card-title-mark-info\">\n                        <div className=\"App-card-title-mark-title\">$DLP</div>\n                        <div className=\"App-card-title-mark-subtitle\">$DLP</div>\n                      </div>\n                      <div>\n                        <AssetDropdown assetSymbol=\"GLP\" />\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Price</Trans>\n                      </div>\n                      <div>${formatAmount(glpPrice, USD_DECIMALS, 3, true)}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Supply</Trans>\n                      </div>\n                      <div>{formatAmount(glpSupply, GLP_DECIMALS, 0, true)} $DLP</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Total Staked</Trans>\n                      </div>\n                      <div>${formatAmount(glpMarketCap, USD_DECIMALS, 0, true)}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Market Cap</Trans>\n                      </div>\n                      <div>${formatAmount(glpMarketCap, USD_DECIMALS, 0, true)}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Stablecoin Percentage</Trans>\n                      </div>\n                      <div>{stablePercentage}%</div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"stats-piechart\" onMouseOut={onGLPPoolChartLeave}>\n                  {glpPool.length > 0 && (\n                    <PieChart width={210} height={210}>\n                      <Pie\n                        data={glpPool}\n                        cx={100}\n                        cy={100}\n                        innerRadius={73}\n                        outerRadius={80}\n                        fill=\"#8884d8\"\n                        dataKey=\"value\"\n                        startAngle={90}\n                        endAngle={-270}\n                        onMouseEnter={onGLPPoolChartEnter}\n                        onMouseOut={onGLPPoolChartLeave}\n                        onMouseLeave={onGLPPoolChartLeave}\n                        paddingAngle={2}\n                      >\n                        {glpPool.map((entry, index) => (\n                          <Cell\n                            key={`cell-${index}`}\n                            fill={GLP_POOL_COLORS[entry.name]}\n                            style={{\n                              filter:\n                                glpActiveIndex === index\n                                  ? `drop-shadow(0px 0px 6px ${hexToRgba(GLP_POOL_COLORS[entry.name], 0.7)})`\n                                  : \"none\",\n                              cursor: \"pointer\",\n                            }}\n                            stroke={GLP_POOL_COLORS[entry.name]}\n                            strokeWidth={glpActiveIndex === index ? 1 : 1}\n                          />\n                        ))}\n                      </Pie>\n                      <text x={\"50%\"} y={\"50%\"} fill=\"white\" textAnchor=\"middle\" dominantBaseline=\"middle\">\n                        $DLP Pool\n                      </text>\n                      <Tooltip content={<CustomTooltip />} />\n                    </PieChart>\n                  )}\n                </div>\n              </div>\n            </div>\n            <div className=\"token-table-wrapper App-card\">\n              <div className=\"App-card-title\">\n                <Trans>$DLP Index Composition</Trans>{\" \"}\n                {chainId === POLYGON && <img src={polygon16Icon} alt={t`Polygon Icon`} />}\n                {chainId === ARBITRUM && <img src={arbitrum16Icon} alt={t`Arbitrum Icon`} />}\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <table className=\"token-table\">\n                <thead>\n                  <tr>\n                    <th>\n                      <Trans>TOKEN</Trans>\n                    </th>\n                    <th>\n                      <Trans>PRICE</Trans>\n                    </th>\n                    <th>\n                      <Trans>POOL</Trans>\n                    </th>\n                    <th>\n                      <Trans>WEIGHT</Trans>\n                    </th>\n                    <th>\n                      <Trans>UTILIZATION</Trans>\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {visibleTokens.map((token) => {\n                    const tokenInfo = infoTokens[token.address];\n                    let utilization = bigNumberify(0);\n                    if (tokenInfo && tokenInfo.reservedAmount && tokenInfo.poolAmount && tokenInfo.poolAmount.gt(0)) {\n                      utilization = tokenInfo.reservedAmount.mul(BASIS_POINTS_DIVISOR).div(tokenInfo.poolAmount);\n                    }\n                    let maxUsdgAmount = DEFAULT_MAX_USDG_AMOUNT;\n                    if (tokenInfo.maxUsdgAmount && tokenInfo.maxUsdgAmount.gt(0)) {\n                      maxUsdgAmount = tokenInfo.maxUsdgAmount;\n                    }\n                    const tokenImage = importImage(\"ic_\" + token.symbol.toLowerCase() + \"_40.svg\");\n\n                    return (\n                      <tr key={token.symbol}>\n                        <td>\n                          <div className=\"token-symbol-wrapper\">\n                            <div className=\"App-card-title-info\">\n                              <div className=\"App-card-title-info-icon\">\n                                <img src={tokenImage} alt={token.symbol} width=\"40px\" />\n                              </div>\n                              <div className=\"App-card-title-info-text\">\n                                <div className=\"App-card-info-title\">{token.name}</div>\n                                <div className=\"App-card-info-subtitle\">{token.symbol}</div>\n                              </div>\n                              <div>\n                                <AssetDropdown assetSymbol={token.symbol} assetInfo={token} />\n                              </div>\n                            </div>\n                          </div>\n                        </td>\n                        <td>${formatKeyAmount(tokenInfo, \"minPrice\", USD_DECIMALS, 2, true)}</td>\n                        <td>\n                          <TooltipComponent\n                            handle={`$${formatKeyAmount(tokenInfo, \"managedUsd\", USD_DECIMALS, 0, true)}`}\n                            position=\"right-bottom\"\n                            renderContent={() => {\n                              return (\n                                <>\n                                  <StatsTooltipRow\n                                    label={t`Pool Amount`}\n                                    value={`${formatKeyAmount(tokenInfo, \"managedAmount\", token.decimals, 0, true)} ${\n                                      token.symbol\n                                    }`}\n                                    showDollar={false}\n                                  />\n                                  <StatsTooltipRow\n                                    label={t`Target Min Amount`}\n                                    value={`${formatKeyAmount(tokenInfo, \"bufferAmount\", token.decimals, 0, true)} ${\n                                      token.symbol\n                                    }`}\n                                    showDollar={false}\n                                  />\n                                  <StatsTooltipRow\n                                    label={t`Max ${tokenInfo.symbol} Capacity`}\n                                    value={formatAmount(maxUsdgAmount, 18, 0, true)}\n                                    showDollar={true}\n                                  />\n                                </>\n                              );\n                            }}\n                          />\n                        </td>\n                        <td>{getWeightText(tokenInfo)}</td>\n                        <td>{formatAmount(utilization, 2, 2, false)}%</td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n            <div className=\"token-grid\">\n              {visibleTokens.map((token) => {\n                const tokenInfo = infoTokens[token.address];\n                let utilization = bigNumberify(0);\n                if (tokenInfo && tokenInfo.reservedAmount && tokenInfo.poolAmount && tokenInfo.poolAmount.gt(0)) {\n                  utilization = tokenInfo.reservedAmount.mul(BASIS_POINTS_DIVISOR).div(tokenInfo.poolAmount);\n                }\n                let maxUsdgAmount = DEFAULT_MAX_USDG_AMOUNT;\n                if (tokenInfo.maxUsdgAmount && tokenInfo.maxUsdgAmount.gt(0)) {\n                  maxUsdgAmount = tokenInfo.maxUsdgAmount;\n                }\n\n                const tokenImage = importImage(\"ic_\" + token.symbol.toLowerCase() + \"_24.svg\");\n                return (\n                  <div className=\"App-card\" key={token.symbol}>\n                    <div className=\"App-card-title\">\n                      <div className=\"mobile-token-card\">\n                        <img src={tokenImage} alt={token.symbol} width=\"20px\" />\n                        <div className=\"token-symbol-text\">{token.symbol}</div>\n                        <div>\n                          <AssetDropdown assetSymbol={token.symbol} assetInfo={token} />\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"App-card-divider\"></div>\n                    <div className=\"App-card-content\">\n                      <div className=\"App-card-row\">\n                        <div className=\"label\">\n                          <Trans>Price</Trans>\n                        </div>\n                        <div>${formatKeyAmount(tokenInfo, \"minPrice\", USD_DECIMALS, 2, true)}</div>\n                      </div>\n                      <div className=\"App-card-row\">\n                        <div className=\"label\">\n                          <Trans>Pool</Trans>\n                        </div>\n                        <div>\n                          <TooltipComponent\n                            handle={`$${formatKeyAmount(tokenInfo, \"managedUsd\", USD_DECIMALS, 0, true)}`}\n                            position=\"right-bottom\"\n                            renderContent={() => {\n                              return (\n                                <>\n                                  <StatsTooltipRow\n                                    label={t`Pool Amount`}\n                                    value={`${formatKeyAmount(tokenInfo, \"managedAmount\", token.decimals, 0, true)} ${\n                                      token.symbol\n                                    }`}\n                                    showDollar={false}\n                                  />\n                                  <StatsTooltipRow\n                                    label={t`Target Min Amount`}\n                                    value={`${formatKeyAmount(tokenInfo, \"bufferAmount\", token.decimals, 0, true)} ${\n                                      token.symbol\n                                    }`}\n                                    showDollar={false}\n                                  />\n                                  <StatsTooltipRow\n                                    label={t`Max ${tokenInfo.symbol} Capacity`}\n                                    value={formatAmount(maxUsdgAmount, 18, 0, true)}\n                                  />\n                                </>\n                              );\n                            }}\n                          />\n                        </div>\n                      </div>\n                      <div className=\"App-card-row\">\n                        <div className=\"label\">\n                          <Trans>Weight</Trans>\n                        </div>\n                        <div>{getWeightText(tokenInfo)}</div>\n                      </div>\n                      <div className=\"App-card-row\">\n                        <div className=\"label\">\n                          <Trans>Utilization</Trans>\n                        </div>\n                        <div>{formatAmount(utilization, 2, 2, false)}%</div>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n        <Footer />\n      </div>\n    </SEO>\n  );\n}\n","import React from \"react\";\n\nimport DashboardV2 from \"./DashboardV2\";\n\nexport default function Dashboard(props) {\n  return <DashboardV2 />;\n}\n","import React from \"react\";\nimport { Trans } from \"@lingui/macro\";\nimport SEO from \"components/Common/SEO\";\n\nimport Footer from \"components/Footer/Footer\";\nimport { getPageTitle } from \"lib/legacy\";\n\nimport arbitrumIcon from \"img/ic_arbitrum_16.svg\";\nimport polygonIcon from \"img/ic_polygon_16.svg\";\n\nimport \"./Ecosystem.css\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { POLYGON } from \"config/chains\";\nimport { t } from \"@lingui/macro\";\n\nconst NETWORK_ICONS = {\n  // [POLYGON]: arbitrumIcon,\n  [POLYGON]: polygonIcon,\n};\n\nconst NETWORK_ICON_ALTS = {\n  // [POLYGON]: \"Arbitrum Icon\",\n  [POLYGON]: \"Polygon Icon\",\n};\n\nexport default function Ecosystem() {\n  const gmxPages = [\n    // {\n    //   title: \"$AMX Governance\",\n    //   link: \"https://gov.amx.exchange/\",\n    //   linkLabel: \"gov.amx.exchange\",\n    //   about: t`$AMX Governance Page`,\n    //   chainIds: [POLYGON],\n    // },\n    {\n      title: \"$AMX Stats\",\n      link: \"https://stats.amx.exchange/\",\n      linkLabel: \"stats.amx.exchange\",\n      about: t`$AMX Stats Page`,\n      chainIds: [POLYGON],\n    },\n    // {\n    //   title: \"$AMX Proposals\",\n    //   link: \"https://snapshot.org/#/amx.eth\",\n    //   linkLabel: \"snapshot.org\",\n    //   about: t`$AMX Proposals Voting page`,\n    //   chainIds: [POLYGON],\n    // },\n    {\n      title: \"$AMX Announcements\",\n      link: \"https://t.me/amxdex\",\n      linkLabel: \"t.me\",\n      about: t`$AMX Announcements and Updates`,\n      chainIds: [POLYGON],\n    },\n  ];\n\n  const communityProjects = [\n    // {\n    //   title: \"$AMX Blueberry Club\",\n    //   link: \"https://www.blueberry.club/\",\n    //   linkLabel: \"blueberry.club\",\n    //   about: t`$AMX Blueberry NFTs`,\n    //   creatorLabel: \"@xm92boi\",\n    //   creatorLink: \"https://t.me/xm92boi\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"$AMX Leaderboard\",\n    //   link: \"https://www.amx.house/\",\n    //   linkLabel: \"amx.house\",\n    //   about: t`Leaderboard for $AMX traders`,\n    //   creatorLabel: \"@Itburnz\",\n    //   creatorLink: \"https://t.me/Itburnz\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"$AMX Positions Bot\",\n    //   link: \"https://t.me/amxdex\",\n    //   linkLabel: \"t.me\",\n    //   about: t`Telegram bot for $AMX position updates`,\n    //   creatorLabel: \"@zhongfu\",\n    //   creatorLink: \"https://t.me/amxdex\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"Blueberry Pulse\",\n    //   link: \"https://blueberrypulse.substack.com/\",\n    //   linkLabel: \"substack.com\",\n    //   about: t`$AMX Weekly Updates`,\n    //   creatorLabel: \"@puroscohiba\",\n    //   creatorLink: \"https://t.me/puroscohiba\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"DegenClip\",\n    //   link: \"https://degenclip.com/\",\n    //   linkLabel: \"degenclip.com\",\n    //   about: t`Community curated tweet collection`,\n    //   creatorLabel: \"@ox21l\",\n    //   creatorLink: \"https://t.me/amxdex\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"$AMX Yield Simulator\",\n    //   link: \"https://amx.defisims.com/\",\n    //   linkLabel: \"defisims.com\",\n    //   about: t`Yield simulator for $AMX`,\n    //   creatorLabel: \"@kyzoeth\",\n    //   creatorLink: \"https://twitter.com/kyzoeth\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"$AMX Returns Calculator\",\n    //   link: \"https://docs.google.com/spreadsheets/u/4/d/1mQZlztz_NpTg5qQiYIzc_Ls1OTLfMOUtmEQN-WW8jj4/copy\",\n    //   linkLabel: \"docs.google.com\",\n    //   about: t`Returns calculator for $AMX and $DLP`,\n    //   creatorLabel: \"@amxdex\",\n    //   creatorLink: \"https://twitter.com/amxdex\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"$AMX Compound Calculator\",\n    //   link: \"https://docs.google.com/spreadsheets/d/14DiIE1wZkK9-Y5xSx1PzIgmpcj4ccz1YVw5nwzIWLgI/edit#gid=0\",\n    //   linkLabel: \"docs.google.com\",\n    //   about: t`Optimal compound interval calculator`,\n    //   creatorLabel: \"@ChasenKaminsky\",\n    //   creatorLink: \"https://twitter.com/amxdex\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"$AMX Trading Stats\",\n    //   link: \"https://t.me/amxdex\",\n    //   linkLabel: \"t.me\",\n    //   about: t`Telegram bot for Open Interest on $AMX`,\n    //   creatorLabel: \"@amxdex\",\n    //   creatorLink: \"https://twitter.com/amxdex\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"$AMX Staking Bot\",\n    //   link: \"https://t.me/amxdex\",\n    //   linkLabel: \"t.me\",\n    //   about: t`$AMX staking rewards updates and insights`,\n    //   creatorLabel: \"@amxdex\",\n    //   creatorLink: \"https://twitter.com/amxdex\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"AMX Staking Calculator\",\n    //   link: \"\",\n    //   linkLabel: \"\",\n    //   about: t`$AMX staking calculator`,\n    //   creatorLabel: \"@amxdex\",\n    //   creatorLink: \"https://t.me/amxdex\",\n    //   chainIds: [POLYGON],\n    // },\n  ];\n\n  const dashboardProjects = [\n    // {\n    //   title: \"$AMX Referrals Dashboard\",\n    //   link: \"\",\n    //   linkLabel: \"\",\n    //   about: t`Dashboard for $AMX referral stats`,\n    //   creatorLabel: \"@amxdex\",\n    //   creatorLink: \"https://twitter.com/amxdex\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"$AMX Terminal\",\n    //   link: \"\",\n    //   linkLabel: \"\",\n    //   about: t`$AMX explorer for stats and traders`,\n    //   creatorLabel: \"@amxdex\",\n    //   creatorLink: \"https://t.me/amxdex\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"$AMX Analytics\",\n    //   link: \"\",\n    //   linkLabel: \"\",\n    //   about: t`Financial reports and protocol analytics`,\n    //   creatorLabel: \"@amxdex\",\n    //   creatorLink: \"https://t.me/amxdex\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"TokenTerminal\",\n    //   link: \"\",\n    //   linkLabel: \"\",\n    //   about: t`$AMX fundamentals`,\n    //   creatorLabel: \"@amxdex\",\n    //   creatorLink: \"https://twitter.com/amxdex\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"CryptoFees\",\n    //   link: \"\",\n    //   linkLabel: \"\",\n    //   about: t`Fees generated by $AMX`,\n    //   creatorLabel: \"@amxdex\",\n    //   creatorLink: \"https://twitter.com/amxdex\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"Shogun Dashboard (Dune Arbitrum)\",\n    //   link: \"https://dune.com/shogun/gmx-analytics-arbitrum\",\n    //   linkLabel: \"dune.com\",\n    //   about: t`Protocol analytics`,\n    //   creatorLabel: \"@JamesCliffyz\",\n    //   creatorLink: \"https://twitter.com/JamesCliffyz\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"Shogun Dashboard (Dune Polygon)\",\n    //   link: \"https://dune.com/shogun/gmx-analytics-polygon\",\n    //   linkLabel: \"dune.com\",\n    //   about: t`Protocol analytics`,\n    //   creatorLabel: \"@JamesCliffyz\",\n    //   creatorLink: \"https://twitter.com/JamesCliffyz\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"$AMX Perpetuals Data\",\n    //   link: \"https://app.laevitas.ch/altsderivs/GMX/perpetualswaps\",\n    //   linkLabel: \"laevitas.ch\",\n    //   about: t`$AMX Perpetuals Data`,\n    //   creatorLabel: \"@laevitas1\",\n    //   creatorLink: \"https://twitter.com/laevitas1\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"$AMX Blueberry Leaderboard\",\n    //   link: \"https://www.blueberryboard.com\",\n    //   linkLabel: \"blueberryboard.com\",\n    //   about: t`GBC NFTs APR tracker and rewards`,\n    //   creatorLabel: \"@kyzoeth\",\n    //   creatorLink: \"https://twitter.com/kyzoeth\",\n    //   chainIds: [POLYGON],\n    // },\n  ];\n\n  const integrations = [\n    // {\n    //   title: \"DeBank\",\n    //   link: \"debank.com\",\n    //   linkLabe: \"debank.com\",\n    //   about: t`DeFi Portfolio Tracker`,\n    //   announcementLabel: \"twitter.com\",\n    //   announcementLink: \"https://twitter.com/GMX_IO/status/1439711532884152324\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"Defi Llama\",\n    //   link: \"https://defillama.com\",\n    //   linkLabel: \"defillama.com\",\n    //   about: t`Decentralized Finance Dashboard`,\n    //   announcementLabel: \"twitter.com\",\n    //   announcementLink: \"https://twitter.com/GMX_IO/status/1438124768033660938\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"Dopex\",\n    //   link: \"https://dopex.io\",\n    //   linkLabel: \"dopex.io\",\n    //   about: t`Decentralized Options Protocol`,\n    //   announcementLabel: \"twitter.com\",\n    //   announcementLink: \"https://twitter.com/GMX_IO/status/1482445801523716099\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"Rook\",\n    //   link: \"https://www.rook.fi/\",\n    //   linkLabel: \"rook.fi\",\n    //   about: t`MEV Optimizer`,\n    //   announcementLabel: \"twitter.com\",\n    //   announcementLink: \"https://twitter.com/Rook/status/1509613786600116251\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"Jones DAO\",\n    //   link: \"https://jonesdao.io\",\n    //   linkLabel: \"jonesdao.io\",\n    //   about: t`Decentralized Options Strategies`,\n    //   announcementLabel: \"twitter.com\",\n    //   announcementLink: \"https://twitter.com/GMX_IO/status/1482788805635678212\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"Yield Yak Optimizer\",\n    //   link: \"https://yieldyak.com/\",\n    //   linkLabel: \"yieldyak.com\",\n    //   about: t`Yield Optimizer on Polygon`,\n    //   announcementLabel: \"twitter.com\",\n    //   announcementLink: \"https://twitter.com/GMX_IO/status/1484601407378378754\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"Vovo Finance\",\n    //   link: \"https://vovo.finance/\",\n    //   linkLabel: \"vovo.finance\",\n    //   about: t`Structured Products`,\n    //   announcementLabel: \"twitter.com\",\n    //   announcementLink: \"https://twitter.com/VovoFinance/status/1531517177790345217\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"Stabilize Protocol\",\n    //   link: \"https://www.stabilize.finance/\",\n    //   linkLabel: \"stabilize.finance\",\n    //   about: t`Yield Vaults`,\n    //   announcementLabel: \"twitter.com\",\n    //   announcementLink: \"https://twitter.com/StabilizePro/status/1532348674986082306\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"DODO\",\n    //   link: \"https://dodoex.io/\",\n    //   linkLabel: \"dodoex.io\",\n    //   about: t`Decentralized Trading Protocol`,\n    //   announcementLabel: \"twitter.com\",\n    //   announcementLink: \"https://twitter.com/GMX_IO/status/1438899138549145605\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"Open Ocean\",\n    //   link: \"https://openocean.finance/\",\n    //   linkLabel: \"openocean.finance\",\n    //   about: t`DEX Aggregator`,\n    //   announcementLabel: \"twitter.com\",\n    //   announcementLink: \"https://twitter.com/GMX_IO/status/1495780826016989191\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"Paraswap\",\n    //   link: \"https://www.paraswap.io/\",\n    //   linkLabel: \"paraswap.io\",\n    //   about: t`DEX Aggregator`,\n    //   announcementLabel: \"twitter.com\",\n    //   announcementLink: \"https://twitter.com/paraswap/status/1546869879336222728\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"1inch\",\n    //   link: \"https://1inch.io/\",\n    //   linkLabel: \"1inch.io\",\n    //   about: t`DEX Aggregator`,\n    //   announcementLabel: \"twitter.com\",\n    //   announcementLink: \"https://twitter.com/GMX_IO/status/1522247451410845696\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"Firebird Finance\",\n    //   link: \"https://app.firebird.finance/swap\",\n    //   linkLabel: \"firebird.finance\",\n    //   about: t`DEX Aggregator`,\n    //   announcementLabel: \"twitter.com\",\n    //   announcementLink: \"https://twitter.com/financefirebird/status/1561767094064238595\",\n    //   chainIds: [POLYGON],\n    // },\n    // {\n    //   title: \"Yield Yak Swap\",\n    //   link: \"https://yieldyak.com/swap\",\n    //   linkLabel: \"yieldyak.com\",\n    //   about: t`DEX Aggregator`,\n    //   announcementLabel: \"twitter.com\",\n    //   announcementLink: \"https://twitter.com/yieldyak_/status/1484458884827947008\",\n    //   chainIds: [POLYGON],\n    // },\n  ];\n\n  const telegramGroups = [\n    {\n      title: \"$AMX\",\n      link: \"https://t.me/amxdex\",\n      linkLabel: \"t.me\",\n      about: t`Telegram Group`,\n    },\n    {\n      title: \"$AMX (Chinese)\",\n      link: \"https://t.me/amxdex\",\n      linkLabel: \"t.me\",\n      about: t`Telegram Group (Chinese)`,\n    },\n    {\n      title: \"$AMX (Portuguese)\",\n      link: \"https://t.me/amxdex\",\n      linkLabel: \"t.me\",\n      about: t`Telegram Group (Portuguese)`,\n    },\n    {\n      title: \"$AMX Trading Chat\",\n      link: \"https://t.me/amxdex\",\n      linkLabel: \"t.me\",\n      about: t`$AMX community discussion`,\n    },\n  ];\n\n  return (\n    <SEO title={getPageTitle(\"Ecosystem Projects\")}>\n      <div className=\"default-container page-layout\">\n        <div>\n          <div className=\"section-title-block\">\n            <div className=\"section-title-icon\" />\n            <div className=\"section-title-content\">\n              <div className=\"Page-title\">\n                <Trans>$AMX Pages</Trans>\n              </div>\n              <div className=\"Page-description\">\n                <Trans>$AMX ecosystem pages.</Trans>\n              </div>\n            </div>\n          </div>\n          <div className=\"DashboardV2-projects\">\n            {gmxPages.map((item) => {\n              const linkLabel = item.linkLabel ? item.linkLabel : item.link;\n              return (\n                <div className=\"App-card\" key={item.title}>\n                  <div className=\"App-card-title\">\n                    {item.title}\n                    <div className=\"App-card-title-icon\">\n                      {item.chainIds.map((network) => (\n                        <img key={network} src={NETWORK_ICONS[network]} alt={NETWORK_ICON_ALTS[network]} />\n                      ))}\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Link</Trans>\n                      </div>\n                      <div>\n                        <ExternalLink href={item.link}>{linkLabel}</ExternalLink>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>About</Trans>\n                      </div>\n                      <div>{item.about}</div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          <div className=\"Tab-title-section\">\n            <div className=\"Page-title\">\n              <Trans>Community Projects</Trans>\n            </div>\n            <div className=\"Page-description\">\n              <Trans>Projects developed by the $AMX community.</Trans>\n            </div>\n          </div>\n          <div className=\"DashboardV2-projects\">\n            {communityProjects.map((item) => {\n              const linkLabel = item.linkLabel ? item.linkLabel : item.link;\n              return (\n                <div className=\"App-card\" key={item.title}>\n                  <div className=\"App-card-title\">\n                    {item.title}\n                    <div className=\"App-card-title-icon\">\n                      {item.chainIds.map((network) => (\n                        <img key={network} src={NETWORK_ICONS[network]} alt={NETWORK_ICON_ALTS[network]} />\n                      ))}\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\" />\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Link</Trans>\n                      </div>\n                      <div>\n                        <ExternalLink href={item.link}>{linkLabel}</ExternalLink>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>About</Trans>\n                      </div>\n                      <div>{item.about}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Creator</Trans>\n                      </div>\n                      <div>\n                        <ExternalLink href={item.creatorLink}>{item.creatorLabel}</ExternalLink>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          <div className=\"Tab-title-section\">\n            <div className=\"Page-title\">\n              <Trans>Dashboards</Trans>\n            </div>\n            <div className=\"Page-description\">\n              <Trans>$AMX dashboards and analytics.</Trans>\n            </div>\n          </div>\n          <div className=\"DashboardV2-projects\">\n            {dashboardProjects.map((item) => {\n              const linkLabel = item.linkLabel ? item.linkLabel : item.link;\n              return (\n                <div className=\"App-card\" key={item.title}>\n                  <div className=\"App-card-title\">\n                    {item.title}\n                    <div className=\"App-card-title-icon\">\n                      {item.chainIds.map((network) => (\n                        <img key={network} src={NETWORK_ICONS[network]} alt={NETWORK_ICON_ALTS[network]} />\n                      ))}\n                    </div>\n                  </div>\n\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Link</Trans>\n                      </div>\n                      <div>\n                        <ExternalLink href={item.link}>{linkLabel}</ExternalLink>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>About</Trans>\n                      </div>\n                      <div>{item.about}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Creator</Trans>\n                      </div>\n                      <div>\n                        <ExternalLink href={item.creatorLink}>{item.creatorLabel}</ExternalLink>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          <div className=\"Tab-title-section\">\n            <div className=\"Page-title\">\n              <Trans>Partnerships and Integrations</Trans>\n            </div>\n            <div className=\"Page-description\">\n              <Trans>Projects integrated with $AMX.</Trans>\n            </div>\n          </div>\n          <div className=\"DashboardV2-projects\">\n            {integrations.map((item) => {\n              const linkLabel = item.linkLabel ? item.linkLabel : item.link;\n              return (\n                <div key={item.title} className=\"App-card\">\n                  <div className=\"App-card-title\">\n                    {item.title}\n                    <div className=\"App-card-title-icon\">\n                      {item.chainIds.map((network) => (\n                        <img key={network} src={NETWORK_ICONS[network]} alt={NETWORK_ICON_ALTS[network]} />\n                      ))}\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Link</Trans>\n                      </div>\n                      <div>\n                        <ExternalLink href={item.link}>{linkLabel}</ExternalLink>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>About</Trans>\n                      </div>\n                      <div>{item.about}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Announcement</Trans>\n                      </div>\n                      <div>\n                        <ExternalLink href={item.announcementLink}>{item.announcementLabel}</ExternalLink>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          <div className=\"Tab-title-section\">\n            <div className=\"Page-title\">\n              <Trans>Telegram Groups</Trans>\n            </div>\n            <div className=\"Page-description\">\n              <Trans>Community-led Telegram groups.</Trans>\n            </div>\n          </div>\n          <div className=\"DashboardV2-projects\">\n            {telegramGroups.map((item) => {\n              const linkLabel = item.linkLabel ? item.linkLabel : item.link;\n              return (\n                <div className=\"App-card\" key={item.title}>\n                  <div className=\"App-card-title\">{item.title}</div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Link</Trans>\n                      </div>\n                      <div>\n                        <ExternalLink href={item.link}>{linkLabel}</ExternalLink>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>About</Trans>\n                      </div>\n                      <div>{item.about}</div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n        <Footer />\n      </div>\n    </SEO>\n  );\n}\n","import { disableBodyScroll, enableBodyScroll, clearAllBodyScrollLocks } from \"body-scroll-lock\";\nimport { RefObject, useEffect } from \"react\";\n\nexport const TOUCH_MOVE_CONTAINER_CLASS_NAME = \"DiableScroll-touch-move-container\";\n\n// @see https://github.com/willmcpo/body-scroll-lock#allowtouchmove\nconst allowTouchMoveFn = (el: HTMLElement) => {\n  while (el && el !== document.body) {\n    if (el.className?.includes?.(TOUCH_MOVE_CONTAINER_CLASS_NAME)) return true;\n\n    el = el.parentElement as HTMLElement;\n  }\n};\n\nexport default function useLockBodyScroll(\n  ref: RefObject<HTMLElement>,\n  isVisible: boolean,\n  opts: {\n    disableLock?: boolean;\n    allowTouchMove?: boolean;\n  } = {}\n) {\n  useEffect(() => {\n    if (opts.disableLock) {\n      return;\n    }\n\n    if (ref.current) {\n      if (isVisible) {\n        disableBodyScroll(ref.current, {\n          allowTouchMove: opts.allowTouchMove ? allowTouchMoveFn : undefined,\n        });\n      } else {\n        enableBodyScroll(ref.current);\n      }\n    }\n\n    return () => clearAllBodyScrollLocks();\n\n    // needs ref.current in deps, not just ref\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [ref.current, opts.allowTouchMove, opts.disableLock, isVisible]);\n}\n","import React, { useRef, useEffect } from \"react\";\nimport cx from \"classnames\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\nimport { MdClose } from \"react-icons/md\";\n\nimport \"./Modal.css\";\nimport useLockBodyScroll, { TOUCH_MOVE_CONTAINER_CLASS_NAME } from \"lib/useLockBodyScroll\";\n\nexport default function Modal(props) {\n  const { isVisible, setIsVisible, className, zIndex, onAfterOpen, disableBodyScrollLock, allowContentTouchMove } =\n    props;\n\n  const modalRef = useRef(null);\n\n  useLockBodyScroll(modalRef, isVisible, {\n    disableLock: disableBodyScrollLock,\n    allowTouchMove: allowContentTouchMove,\n  });\n\n  useEffect(() => {\n    function close(e) {\n      if (e.keyCode === 27) {\n        setIsVisible(false);\n      }\n    }\n    window.addEventListener(\"keydown\", close);\n    return () => window.removeEventListener(\"keydown\", close);\n  }, [setIsVisible]);\n\n  useEffect(() => {\n    if (typeof onAfterOpen === \"function\") onAfterOpen();\n  }, [onAfterOpen]);\n\n  const fadeVariants = {\n    hidden: { opacity: 0 },\n    visible: { opacity: 1 },\n  };\n\n  return (\n    <AnimatePresence>\n      {isVisible && (\n        <motion.div\n          className={cx(\"Modal\", className)}\n          style={{ zIndex }}\n          initial=\"hidden\"\n          animate=\"visible\"\n          exit=\"hidden\"\n          variants={fadeVariants}\n          transition={{ duration: 0.2 }}\n        >\n          <div\n            className=\"Modal-backdrop\"\n            style={{\n              overflow: isVisible ? \"hidden\" : \"visible\",\n              position: \"fixed\",\n            }}\n            onClick={() => setIsVisible(false)}\n          ></div>\n          <div className=\"Modal-content\">\n            <div className=\"Modal-title-bar\">\n              <div className=\"Modal-title\">{props.label}</div>\n              <div className=\"Modal-close-button\" onClick={() => setIsVisible(false)}>\n                <MdClose fontSize={20} className=\"Modal-close-icon\" />\n              </div>\n            </div>\n            <div className=\"divider\" />\n            <div className={cx(\"Modal-body\", TOUCH_MOVE_CONTAINER_CLASS_NAME)} ref={modalRef}>\n              {props.children}\n            </div>\n          </div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\n\nimport { USD_DECIMALS, PRECISION } from \"lib/legacy\";\n\nimport { getContract, XGMT_EXCLUDED_ACCOUNTS } from \"config/contracts\";\n\nimport Reader from \"abis/Reader.json\";\nimport Token from \"abis/Token.json\";\nimport YieldToken from \"abis/YieldToken.json\";\nimport YieldFarm from \"abis/YieldFarm.json\";\n\nimport Modal from \"components/Modal/Modal\";\nimport Footer from \"components/Footer/Footer\";\n\nimport \"./Stake.css\";\nimport { t, Trans } from \"@lingui/macro\";\nimport { CHAIN_ID, getExplorerUrl } from \"config/chains\";\nimport { contractFetcher } from \"lib/contracts\";\nimport { approveTokens } from \"domain/tokens\";\nimport { helperToast } from \"lib/helperToast\";\nimport { getInjectedHandler } from \"lib/wallets\";\nimport { bigNumberify, expandDecimals, formatAmount, formatAmountFree, formatKeyAmount, parseValue } from \"lib/numbers\";\nimport { getTokenBySymbol } from \"config/tokens\";\nimport { useChainId } from \"lib/chains\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nconst BASIS_POINTS_DIVISOR = 10000;\nconst HOURS_PER_YEAR = 8760;\n\nconst { AddressZero } = ethers.constants;\n\nfunction getBalanceAndSupplyData(balances) {\n  if (!balances || balances.length === 0) {\n    return {};\n  }\n\n  const keys = [\n    \"usdg\",\n    \"gmt\",\n    \"xgmt\",\n    \"gmtUsdg\",\n    \"xgmtUsdg\",\n    \"gmtUsdgFarm\",\n    \"xgmtUsdgFarm\",\n    \"autoUsdg\",\n    \"autoUsdgFarm\",\n  ];\n  const balanceData = {};\n  const supplyData = {};\n  const propsLength = 2;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    balanceData[key] = balances[i * propsLength];\n    supplyData[key] = balances[i * propsLength + 1];\n  }\n\n  return { balanceData, supplyData };\n}\n\nfunction getStakingData(stakingInfo) {\n  if (!stakingInfo || stakingInfo.length === 0) {\n    return;\n  }\n\n  const keys = [\n    \"usdg\",\n    \"xgmt\",\n    \"gmtUsdgFarmXgmt\",\n    \"gmtUsdgFarmNative\",\n    \"xgmtUsdgFarmXgmt\",\n    \"xgmtUsdgFarmNative\",\n    \"autoUsdgFarmXgmt\",\n    \"autoUsdgFarmNative\",\n  ];\n  const data = {};\n  const propsLength = 2;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = {\n      claimable: stakingInfo[i * propsLength],\n      tokensPerInterval: stakingInfo[i * propsLength + 1],\n    };\n  }\n\n  return data;\n}\n\nfunction getTotalStakedData(totalStakedInfo) {\n  if (!totalStakedInfo || totalStakedInfo.length === 0) {\n    return;\n  }\n\n  const keys = [\"usdg\", \"xgmt\"];\n  const data = {};\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = totalStakedInfo[i];\n  }\n\n  return data;\n}\n\nfunction getPairData(pairInfo) {\n  const keys = [\"gmtUsdg\", \"xgmtUsdg\", \"bnbBusd\", \"autoUsdg\"];\n  if (!pairInfo || pairInfo.length === 0 || pairInfo.length !== keys.length * 2) {\n    return;\n  }\n\n  const data = {};\n  const propsLength = 2;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = {\n      balance0: pairInfo[i * propsLength],\n      balance1: pairInfo[i * propsLength + 1],\n    };\n  }\n\n  return data;\n}\n\nfunction getProcessedData(balanceData, supplyData, stakingData, totalStakedData, pairData, xgmtSupply) {\n  if (!balanceData || !supplyData || !stakingData || !totalStakedData || !pairData || !xgmtSupply) {\n    return {};\n  }\n\n  if (!supplyData.gmtUsdg || !supplyData.xgmtUsdg || !supplyData.autoUsdg) {\n    return {};\n  }\n\n  // const gmtPrice = pairData.gmtUsdg.balance1.mul(PRECISION).div(pairData.gmtUsdg.balance0)\n  const xgmtPrice = pairData.xgmtUsdg.balance0.eq(0)\n    ? bigNumberify(0)\n    : pairData.xgmtUsdg.balance1.mul(PRECISION).div(pairData.xgmtUsdg.balance0);\n  const gmtUsdgPrice = supplyData.gmtUsdg.eq(0)\n    ? bigNumberify(0)\n    : pairData.gmtUsdg.balance1.mul(PRECISION).mul(2).div(supplyData.gmtUsdg);\n  const xgmtUsdgPrice = supplyData.xgmtUsdg.eq(0)\n    ? bigNumberify(0)\n    : pairData.xgmtUsdg.balance1.mul(PRECISION).mul(2).div(supplyData.xgmtUsdg);\n  const bnbPrice = pairData.bnbBusd.balance1.mul(PRECISION).div(pairData.bnbBusd.balance0);\n  const autoUsdgPrice = supplyData.autoUsdg.eq(0)\n    ? bigNumberify(0)\n    : pairData.autoUsdg.balance1.mul(PRECISION).mul(2).div(supplyData.autoUsdg);\n\n  const usdgAnnualRewardsUsd = stakingData.usdg.tokensPerInterval\n    .mul(bnbPrice)\n    .mul(HOURS_PER_YEAR)\n    .div(expandDecimals(1, 18));\n  const xgmtAnnualRewardsUsd = stakingData.xgmt.tokensPerInterval\n    .mul(bnbPrice)\n    .mul(HOURS_PER_YEAR)\n    .div(expandDecimals(1, 18));\n\n  const gmtUsdgAnnualRewardsXmgtUsd = stakingData.gmtUsdgFarmXgmt.tokensPerInterval\n    .mul(xgmtPrice)\n    .mul(HOURS_PER_YEAR)\n    .div(expandDecimals(1, 18));\n  const gmtUsdgAnnualRewardsNativeUsd = stakingData.gmtUsdgFarmNative.tokensPerInterval\n    .mul(bnbPrice)\n    .mul(HOURS_PER_YEAR)\n    .div(expandDecimals(1, 18));\n  const gmtUsdgTotalAnnualRewardsUsd = gmtUsdgAnnualRewardsXmgtUsd.add(gmtUsdgAnnualRewardsNativeUsd);\n\n  const xgmtUsdgAnnualRewardsXmgtUsd = stakingData.xgmtUsdgFarmXgmt.tokensPerInterval\n    .mul(xgmtPrice)\n    .mul(HOURS_PER_YEAR)\n    .div(expandDecimals(1, 18));\n  const xgmtUsdgAnnualRewardsNativeUsd = stakingData.xgmtUsdgFarmNative.tokensPerInterval\n    .mul(bnbPrice)\n    .mul(HOURS_PER_YEAR)\n    .div(expandDecimals(1, 18));\n  const xgmtUsdgTotalAnnualRewardsUsd = xgmtUsdgAnnualRewardsXmgtUsd.add(xgmtUsdgAnnualRewardsNativeUsd);\n\n  const autoUsdgAnnualRewardsXgmtUsd = stakingData.autoUsdgFarmXgmt.tokensPerInterval\n    .mul(xgmtPrice)\n    .mul(HOURS_PER_YEAR)\n    .div(expandDecimals(1, 18));\n  const autoUsdgAnnualRewardsNativeUsd = stakingData.autoUsdgFarmNative.tokensPerInterval\n    .mul(bnbPrice)\n    .mul(HOURS_PER_YEAR)\n    .div(expandDecimals(1, 18));\n  const autoUsdgTotalAnnualRewardsUsd = autoUsdgAnnualRewardsXgmtUsd.add(autoUsdgAnnualRewardsNativeUsd);\n\n  const data = {};\n  data.usdgBalance = balanceData.usdg;\n  data.usdgSupply = supplyData.usdg;\n  data.usdgTotalStaked = totalStakedData.usdg;\n  data.usdgTotalStakedUsd = totalStakedData.usdg.mul(PRECISION).div(expandDecimals(1, 18));\n  data.usdgSupplyUsd = supplyData.usdg.mul(PRECISION).div(expandDecimals(1, 18));\n  data.usdgApr = data.usdgTotalStaked.eq(0)\n    ? undefined\n    : usdgAnnualRewardsUsd\n        .mul(BASIS_POINTS_DIVISOR)\n        .div(totalStakedData.usdg)\n        .mul(expandDecimals(1, 18))\n        .div(PRECISION);\n  data.usdgRewards = stakingData.usdg.claimable;\n\n  data.xgmtBalance = balanceData.xgmt;\n  data.xgmtBalanceUsd = balanceData.xgmt.mul(xgmtPrice).div(expandDecimals(1, 18));\n  data.xgmtSupply = xgmtSupply;\n  data.xgmtTotalStaked = totalStakedData.xgmt;\n  data.xgmtTotalStakedUsd = totalStakedData.xgmt.mul(xgmtPrice).div(expandDecimals(1, 18));\n  data.xgmtSupplyUsd = xgmtSupply.mul(xgmtPrice).div(expandDecimals(1, 18));\n  data.xgmtApr = data.xgmtSupplyUsd.eq(0)\n    ? bigNumberify(0)\n    : xgmtAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.xgmtTotalStakedUsd);\n  data.xgmtRewards = stakingData.xgmt.claimable;\n\n  data.gmtUsdgFarmBalance = balanceData.gmtUsdgFarm;\n\n  data.gmtUsdgBalance = balanceData.gmtUsdg;\n  data.gmtUsdgBalanceUsd = balanceData.gmtUsdg.mul(gmtUsdgPrice).div(expandDecimals(1, 18));\n  data.gmtUsdgSupply = supplyData.gmtUsdg;\n  data.gmtUsdgSupplyUsd = supplyData.gmtUsdg.mul(gmtUsdgPrice).div(expandDecimals(1, 18));\n  data.gmtUsdgStaked = balanceData.gmtUsdgFarm;\n  data.gmtUsdgStakedUsd = balanceData.gmtUsdgFarm.mul(gmtUsdgPrice).div(expandDecimals(1, 18));\n  data.gmtUsdgFarmSupplyUsd = supplyData.gmtUsdgFarm.mul(gmtUsdgPrice).div(expandDecimals(1, 18));\n  data.gmtUsdgApr = data.gmtUsdgSupplyUsd.eq(0)\n    ? bigNumberify(0)\n    : data.gmtUsdgFarmSupplyUsd.eq(0)\n    ? undefined\n    : gmtUsdgTotalAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.gmtUsdgSupplyUsd);\n  data.gmtUsdgXgmtRewards = stakingData.gmtUsdgFarmXgmt.claimable;\n  data.gmtUsdgNativeRewards = stakingData.gmtUsdgFarmNative.claimable;\n  data.gmtUsdgTotalRewards = data.gmtUsdgXgmtRewards.add(data.gmtUsdgNativeRewards);\n  data.gmtUsdgTotalStaked = supplyData.gmtUsdgFarm;\n  data.gmtUsdgTotalStakedUsd = supplyData.gmtUsdgFarm.mul(gmtUsdgPrice).div(expandDecimals(1, 18));\n\n  data.xgmtUsdgBalance = balanceData.xgmtUsdg;\n  data.xgmtUsdgFarmBalance = balanceData.xgmtUsdgFarm;\n  data.xgmtUsdgBalanceUsd = balanceData.xgmtUsdg.mul(xgmtUsdgPrice).div(expandDecimals(1, 18));\n  data.xgmtUsdgSupply = supplyData.xgmtUsdg;\n  data.xgmtUsdgSupplyUsd = supplyData.xgmtUsdg.mul(xgmtUsdgPrice).div(expandDecimals(1, 18));\n  data.xgmtUsdgStaked = balanceData.xgmtUsdgFarm;\n  data.xgmtUsdgStakedUsd = balanceData.xgmtUsdgFarm.mul(xgmtUsdgPrice).div(expandDecimals(1, 18));\n  data.xgmtUsdgFarmSupplyUsd = supplyData.xgmtUsdgFarm.mul(xgmtUsdgPrice).div(expandDecimals(1, 18));\n  data.xgmtUsdgApr = data.xgmtUsdgFarmSupplyUsd.eq(0)\n    ? undefined\n    : xgmtUsdgTotalAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.xgmtUsdgFarmSupplyUsd);\n  data.xgmtUsdgXgmtRewards = stakingData.xgmtUsdgFarmXgmt.claimable;\n  data.xgmtUsdgNativeRewards = stakingData.xgmtUsdgFarmNative.claimable;\n  data.xgmtUsdgTotalRewards = data.xgmtUsdgXgmtRewards.add(data.xgmtUsdgNativeRewards);\n  data.xgmtUsdgTotalStaked = supplyData.xgmtUsdgFarm;\n  data.xgmtUsdgTotalStakedUsd = supplyData.xgmtUsdgFarm.mul(xgmtUsdgPrice).div(expandDecimals(1, 18));\n\n  data.autoUsdgBalance = balanceData.autoUsdg;\n  data.autoUsdgFarmBalance = balanceData.autoUsdgFarm;\n  data.autoUsdgBalanceUsd = balanceData.autoUsdg.mul(autoUsdgPrice).div(expandDecimals(1, 18));\n  data.autoUsdgStaked = balanceData.autoUsdgFarm;\n  data.autoUsdgStakedUsd = balanceData.autoUsdgFarm.mul(autoUsdgPrice).div(expandDecimals(1, 18));\n  data.autoUsdgFarmSupplyUsd = supplyData.autoUsdgFarm.mul(autoUsdgPrice).div(expandDecimals(1, 18));\n  data.autoUsdgApr = data.autoUsdgFarmSupplyUsd.eq(0)\n    ? bigNumberify(0)\n    : autoUsdgTotalAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.autoUsdgFarmSupplyUsd);\n  data.autoUsdgXgmtRewards = stakingData.autoUsdgFarmXgmt.claimable;\n  data.autoUsdgNativeRewards = stakingData.autoUsdgFarmNative.claimable;\n  data.autoUsdgTotalRewards = data.autoUsdgXgmtRewards.add(data.autoUsdgNativeRewards);\n  data.autoUsdgTotalStaked = supplyData.autoUsdgFarm;\n  data.autoUsdgTotalStakedUsd = supplyData.autoUsdgFarm.mul(autoUsdgPrice).div(expandDecimals(1, 18));\n\n  data.totalStakedUsd = data.usdgTotalStakedUsd\n    .add(data.xgmtTotalStakedUsd)\n    .add(data.gmtUsdgTotalStakedUsd)\n    .add(data.xgmtUsdgTotalStakedUsd)\n    .add(data.autoUsdgTotalStakedUsd);\n\n  return data;\n}\n\nfunction StakeModal(props) {\n  const {\n    isVisible,\n    setIsVisible,\n    title,\n    maxAmount,\n    value,\n    setValue,\n    active,\n    account,\n    library,\n    stakingTokenSymbol,\n    stakingTokenAddress,\n    farmAddress,\n    chainId,\n  } = props;\n  const [isStaking, setIsStaking] = useState(false);\n  const [isApproving, setIsApproving] = useState(false);\n\n  const { data: tokenAllowance, mutate: updateTokenAllowance } = useSWR(\n    [active, chainId, stakingTokenAddress, \"allowance\", account, farmAddress],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  useEffect(() => {\n    if (active) {\n      library.on(\"block\", () => {\n        updateTokenAllowance(undefined, true);\n      });\n      return () => {\n        library.removeAllListeners(\"block\");\n      };\n    }\n  }, [active, library, updateTokenAllowance]);\n\n  let amount = parseValue(value, 18);\n  const needApproval = tokenAllowance && amount && amount.gt(tokenAllowance);\n\n  const getError = () => {\n    if (!amount || amount.eq(0)) {\n      return t`Enter an amount`;\n    }\n    if (maxAmount && amount.gt(maxAmount)) {\n      return t`Max amount exceeded`;\n    }\n  };\n\n  const onClickPrimary = () => {\n    if (needApproval) {\n      approveTokens({\n        setIsApproving,\n        library,\n        tokenAddress: stakingTokenAddress,\n        spender: farmAddress,\n        chainId: CHAIN_ID,\n      });\n      return;\n    }\n\n    setIsStaking(true);\n    const contract = new ethers.Contract(farmAddress, YieldFarm.abi, library.getSigner());\n    contract\n      .stake(amount)\n      .then(async (res) => {\n        const txUrl = getExplorerUrl(CHAIN_ID) + \"tx/\" + res.hash;\n        helperToast.success(\n          <div>\n            <Trans>\n              Stake submitted! <ExternalLink href={txUrl}>View status.</ExternalLink>\n            </Trans>\n            <br />\n          </div>\n        );\n        setIsVisible(false);\n      })\n      .catch((e) => {\n        console.error(e);\n        helperToast.error(t`Stake failed`);\n      })\n      .finally(() => {\n        setIsStaking(false);\n      });\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isApproving) {\n      return false;\n    }\n    if (isStaking) {\n      return false;\n    }\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n    if (isApproving) {\n      return t`Approving ${stakingTokenSymbol}...`;\n    }\n    if (needApproval) {\n      return t`Approve ${stakingTokenSymbol}`;\n    }\n    if (isStaking) {\n      return t`Staking...`;\n    }\n    return t`Stake`;\n  };\n\n  return (\n    <div className=\"StakeModal\">\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\n        <div className=\"Exchange-swap-section\">\n          <div className=\"Exchange-swap-section-top\">\n            <div className=\"muted\">\n              <div className=\"Exchange-swap-usd\">\n                <Trans>Stake</Trans>\n              </div>\n            </div>\n            <div className=\"muted align-right clickable\" onClick={() => setValue(formatAmountFree(maxAmount, 18, 18))}>\n              <Trans>Max: {formatAmount(maxAmount, 18, 4, true)}</Trans>\n            </div>\n          </div>\n          <div className=\"Exchange-swap-section-bottom\">\n            <div>\n              <input\n                type=\"number\"\n                placeholder=\"0.0\"\n                className=\"Exchange-swap-input\"\n                value={value}\n                onChange={(e) => setValue(e.target.value)}\n              />\n            </div>\n            <div className=\"PositionEditor-token-symbol\">{stakingTokenSymbol}</div>\n          </div>\n        </div>\n        <div className=\"Exchange-swap-button-container\">\n          <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nfunction UnstakeModal(props) {\n  const { isVisible, setIsVisible, title, maxAmount, value, setValue, library, stakingTokenSymbol, farmAddress } =\n    props;\n  const [isUnstaking, setIsUnstaking] = useState(false);\n\n  let amount = parseValue(value, 18);\n\n  const getError = () => {\n    if (!amount) {\n      return t`Enter an amount`;\n    }\n    if (amount.gt(maxAmount)) {\n      return t`Max amount exceeded`;\n    }\n  };\n\n  const onClickPrimary = () => {\n    setIsUnstaking(true);\n    const contract = new ethers.Contract(farmAddress, YieldFarm.abi, library.getSigner());\n    contract\n      .unstake(amount)\n      .then(async (res) => {\n        const txUrl = getExplorerUrl(CHAIN_ID) + \"tx/\" + res.hash;\n        helperToast.success(\n          <div>\n            <Trans>\n              Unstake submitted! <ExternalLink href={txUrl}>View status.</ExternalLink>\n            </Trans>\n            <br />\n          </div>\n        );\n        setIsVisible(false);\n      })\n      .catch((e) => {\n        console.error(e);\n        helperToast.error(t`Unstake failed`);\n      })\n      .finally(() => {\n        setIsUnstaking(false);\n      });\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isUnstaking) {\n      return false;\n    }\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n    if (isUnstaking) {\n      return t`Unstaking...`;\n    }\n    return t`Unstake`;\n  };\n\n  return (\n    <div className=\"StakeModal\">\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\n        <div className=\"Exchange-swap-section\">\n          <div className=\"Exchange-swap-section-top\">\n            <div className=\"muted\">\n              <div className=\"Exchange-swap-usd\">\n                <Trans>Unstake</Trans>\n              </div>\n            </div>\n            <div className=\"muted align-right clickable\" onClick={() => setValue(formatAmountFree(maxAmount, 18, 18))}>\n              <Trans>Max: {formatAmount(maxAmount, 18, 4, true)}</Trans>\n            </div>\n          </div>\n          <div className=\"Exchange-swap-section-bottom\">\n            <div>\n              <input\n                type=\"number\"\n                placeholder=\"0.0\"\n                className=\"Exchange-swap-input\"\n                value={value}\n                onChange={(e) => setValue(e.target.value)}\n              />\n            </div>\n            <div className=\"PositionEditor-token-symbol\">{stakingTokenSymbol}</div>\n          </div>\n        </div>\n        <div className=\"Exchange-swap-button-container\">\n          <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nexport default function StakeV1() {\n  const { chainId } = useChainId();\n  const [isStakeModalVisible, setIsStakeModalVisible] = useState(false);\n  const [stakeModalTitle, setStakeModalTitle] = useState(\"\");\n  const [stakeModalMaxAmount, setStakeModalMaxAmount] = useState(undefined);\n  const [stakeValue, setStakeValue] = useState(\"\");\n  const [stakingTokenAddress, setStakingTokenAddress] = useState(\"\");\n  const [stakingFarmAddress, setStakingFarmAddress] = useState(\"\");\n\n  const [isUnstakeModalVisible, setIsUnstakeModalVisible] = useState(false);\n  const [unstakeModalTitle, setUnstakeModalTitle] = useState(\"\");\n  const [unstakeModalMaxAmount, setUnstakeModalMaxAmount] = useState(undefined);\n  const [unstakeValue, setUnstakeValue] = useState(\"\");\n  const [unstakingFarmAddress, setUnstakingFarmAddress] = useState(\"\");\n\n  const { activate, active, account, library } = useWeb3React();\n  const connectWallet = getInjectedHandler(activate);\n\n  const readerAddress = getContract(CHAIN_ID, \"Reader\");\n  const ammFactoryAddressV2 = getContract(CHAIN_ID, \"AmmFactoryV2\");\n  const usdgAddress = getContract(CHAIN_ID, \"USDG\");\n  const gmtAddress = getContract(CHAIN_ID, \"GMT\");\n  const xgmtAddress = getContract(CHAIN_ID, \"XGMT\");\n  const autoAddress = getContract(CHAIN_ID, \"AUTO\");\n  const nativeTokenAddress = getContract(CHAIN_ID, \"NATIVE_TOKEN\");\n  const busdAddress = getTokenBySymbol(CHAIN_ID, \"BUSD\").address;\n\n  const gmtUsdgPairAddress = getContract(CHAIN_ID, \"GMT_USDG_PAIR\");\n  const xgmtUsdgPairAddress = getContract(CHAIN_ID, \"XGMT_USDG_PAIR\");\n  const autoUsdgPairAddress = getContract(CHAIN_ID, \"AUTO_USDG_PAIR\");\n  const gmtUsdgFarmAddress = getContract(CHAIN_ID, \"GMT_USDG_FARM\");\n  const xgmtUsdgFarmAddress = getContract(CHAIN_ID, \"XGMT_USDG_FARM\");\n  const autoUsdgFarmAddress = getContract(CHAIN_ID, \"AUTO_USDG_FARM\");\n\n  const usdgYieldTracker = getContract(CHAIN_ID, \"USDG_YIELD_TRACKER\");\n  const xgmtYieldTracker = getContract(CHAIN_ID, \"XGMT_YIELD_TRACKER\");\n  const gmtUsdgFarmTrackerXgmt = getContract(CHAIN_ID, \"GMT_USDG_FARM_TRACKER_XGMT\");\n  const gmtUsdgFarmTrackerNative = getContract(CHAIN_ID, \"GMT_USDG_FARM_TRACKER_NATIVE\");\n  const xgmtUsdgFarmTrackerXgmt = getContract(CHAIN_ID, \"XGMT_USDG_FARM_TRACKER_XGMT\");\n  const xgmtUsdgFarmTrackerNative = getContract(CHAIN_ID, \"XGMT_USDG_FARM_TRACKER_NATIVE\");\n  const autoUsdgFarmTrackerXgmt = getContract(CHAIN_ID, \"AUTO_USDG_FARM_TRACKER_XGMT\");\n  const autoUsdgFarmTrackerNative = getContract(CHAIN_ID, \"AUTO_USDG_FARM_TRACKER_NATIVE\");\n\n  const tokens = [\n    usdgAddress,\n    gmtAddress,\n    xgmtAddress,\n    gmtUsdgPairAddress,\n    xgmtUsdgPairAddress,\n    gmtUsdgFarmAddress,\n    xgmtUsdgFarmAddress,\n    autoUsdgPairAddress,\n    autoUsdgFarmAddress,\n  ];\n\n  const yieldTrackers = [\n    usdgYieldTracker,\n    xgmtYieldTracker,\n    gmtUsdgFarmTrackerXgmt,\n    gmtUsdgFarmTrackerNative,\n    xgmtUsdgFarmTrackerXgmt,\n    xgmtUsdgFarmTrackerNative,\n    autoUsdgFarmTrackerXgmt,\n    autoUsdgFarmTrackerNative,\n  ];\n\n  const pairTokens = [\n    gmtAddress,\n    usdgAddress,\n    xgmtAddress,\n    usdgAddress,\n    nativeTokenAddress,\n    busdAddress,\n    autoAddress,\n    usdgAddress,\n  ];\n\n  const yieldTokens = [usdgAddress, xgmtAddress];\n\n  const { data: xgmtSupply, mutate: updateXgmtSupply } = useSWR(\n    [active, chainId, readerAddress, \"getTokenSupply\", xgmtAddress],\n    {\n      fetcher: contractFetcher(library, Reader, [XGMT_EXCLUDED_ACCOUNTS]),\n    }\n  );\n\n  const { data: balances, mutate: updateBalances } = useSWR(\n    [\"Stake:balances\", chainId, readerAddress, \"getTokenBalancesWithSupplies\", account || AddressZero],\n    {\n      fetcher: contractFetcher(library, Reader, [tokens]),\n    }\n  );\n\n  const { data: stakingInfo, mutate: updateStakingInfo } = useSWR(\n    [active, chainId, readerAddress, \"getStakingInfo\", account || AddressZero],\n    {\n      fetcher: contractFetcher(library, Reader, [yieldTrackers]),\n    }\n  );\n\n  const { data: totalStakedInfo, mutate: updateTotalStakedInfo } = useSWR(\n    [active, chainId, readerAddress, \"getTotalStaked\"],\n    {\n      fetcher: contractFetcher(library, Reader, [yieldTokens]),\n    }\n  );\n\n  const { data: pairInfo, mutate: updatePairInfo } = useSWR(\n    [active, chainId, readerAddress, \"getPairInfo\", ammFactoryAddressV2],\n    {\n      fetcher: contractFetcher(library, Reader, [pairTokens]),\n    }\n  );\n\n  const { balanceData, supplyData } = getBalanceAndSupplyData(balances);\n  const stakingData = getStakingData(stakingInfo);\n  const pairData = getPairData(pairInfo);\n  const totalStakedData = getTotalStakedData(totalStakedInfo);\n\n  const processedData = getProcessedData(balanceData, supplyData, stakingData, totalStakedData, pairData, xgmtSupply);\n\n  const buyXgmtUrl = `https://exchange.pancakeswap.finance/#/swap?outputCurrency=${xgmtAddress}&inputCurrency=${usdgAddress}`;\n  const buyGmtUrl = `https://exchange.pancakeswap.finance/#/swap?outputCurrency=${gmtAddress}&inputCurrency=${usdgAddress}`;\n\n  const addGmtUsdgLpUrl = `https://exchange.pancakeswap.finance/#/add/${gmtAddress}/${usdgAddress}`;\n  const addXgmtUsdgLpUrl = `https://exchange.pancakeswap.finance/#/add/${xgmtAddress}/${usdgAddress}`;\n\n  const buyAutoUrl = `https://exchange.pancakeswap.finance/#/swap?outputCurrency=${autoAddress}&inputCurrency=${nativeTokenAddress}`;\n  const addAutoUsdgLpUrl = `https://exchange.pancakeswap.finance/#/add/${autoAddress}/${usdgAddress}`;\n\n  useEffect(() => {\n    if (active) {\n      library.on(\"block\", () => {\n        updateXgmtSupply(undefined, true);\n        updateBalances(undefined, true);\n        updateStakingInfo(undefined, true);\n        updateTotalStakedInfo(undefined, true);\n        updatePairInfo(undefined, true);\n      });\n      return () => {\n        library.removeAllListeners(\"block\");\n      };\n    }\n  }, [active, library, updateXgmtSupply, updateBalances, updateStakingInfo, updateTotalStakedInfo, updatePairInfo]);\n\n  const claim = (farmAddress, rewards) => {\n    if (!active || !account) {\n      helperToast.error(t`Wallet not yet connected`);\n      return;\n    }\n    if (chainId !== CHAIN_ID) {\n      helperToast.error(t`Incorrect Network`);\n      return;\n    }\n    if (!rewards || rewards.eq(0)) {\n      helperToast.error(t`No rewards to claim yet`);\n      return;\n    }\n\n    const contract = new ethers.Contract(farmAddress, YieldToken.abi, library.getSigner());\n    contract\n      .claim(account)\n      .then(async (res) => {\n        const txUrl = getExplorerUrl(CHAIN_ID) + \"tx/\" + res.hash;\n        helperToast.success(\n          <div>\n            <Trans>\n              Claim submitted! <ExternalLink href={txUrl}>View status.</ExternalLink>\n            </Trans>\n            <br />\n          </div>\n        );\n      })\n      .catch((e) => {\n        console.error(e);\n        helperToast.error(t`Claim failed`);\n      });\n  };\n\n  const showUnstakeGmtUsdgModal = () => {\n    setIsUnstakeModalVisible(true);\n    setUnstakeModalTitle(\"Unstake GMT-USDG\");\n    setUnstakeModalMaxAmount(processedData.gmtUsdgFarmBalance);\n    setUnstakeValue(\"\");\n    setUnstakingFarmAddress(gmtUsdgFarmAddress);\n  };\n\n  const showUnstakeXgmtUsdgModal = () => {\n    setIsUnstakeModalVisible(true);\n    setUnstakeModalTitle(\"Unstake xGMT-USDG\");\n    setUnstakeModalMaxAmount(processedData.xgmtUsdgFarmBalance);\n    setUnstakeValue(\"\");\n    setUnstakingFarmAddress(xgmtUsdgFarmAddress);\n  };\n\n  const showStakeAutoUsdgModal = () => {\n    setIsStakeModalVisible(true);\n    setStakeModalTitle(\"Stake AUTO-USDG\");\n    setStakeModalMaxAmount(processedData.autoUsdgBalance);\n    setStakeValue(\"\");\n    setStakingTokenAddress(autoUsdgPairAddress);\n    setStakingFarmAddress(autoUsdgFarmAddress);\n  };\n\n  const showUnstakeAutoUsdgModal = () => {\n    setIsUnstakeModalVisible(true);\n    setUnstakeModalTitle(\"Unstake AUTO-USDG\");\n    setUnstakeModalMaxAmount(processedData.autoUsdgFarmBalance);\n    setUnstakeValue(\"\");\n    setUnstakingFarmAddress(autoUsdgFarmAddress);\n  };\n\n  const hasFeeDistribution = true;\n\n  return (\n    <div className=\"Stake Page page-layout\">\n      <StakeModal\n        isVisible={isStakeModalVisible}\n        setIsVisible={setIsStakeModalVisible}\n        title={stakeModalTitle}\n        maxAmount={stakeModalMaxAmount}\n        value={stakeValue}\n        setValue={setStakeValue}\n        active={active}\n        account={account}\n        library={library}\n        stakingTokenAddress={stakingTokenAddress}\n        farmAddress={stakingFarmAddress}\n      />\n      <UnstakeModal\n        isVisible={isUnstakeModalVisible}\n        setIsVisible={setIsUnstakeModalVisible}\n        title={unstakeModalTitle}\n        maxAmount={unstakeModalMaxAmount}\n        value={unstakeValue}\n        setValue={setUnstakeValue}\n        active={active}\n        account={account}\n        library={library}\n        farmAddress={unstakingFarmAddress}\n      />\n      <div className=\"Stake-title App-hero\">\n        <div className=\"Stake-title-primary App-hero-primary\">\n          ${formatKeyAmount(processedData, \"totalStakedUsd\", 30, 0, true)}\n        </div>\n        <div className=\"Stake-title-secondary\">\n          <Trans>Total Assets Staked</Trans>\n        </div>\n      </div>\n      <div className=\"Stake-note\">\n        <Trans>\n          The Gambit protocol is in beta, please read the&nbsp;\n          <ExternalLink href=\"https://gambit.gitbook.io/gambit/staking\">staking details</ExternalLink>\n          &nbsp; before participating.\n        </Trans>\n      </div>\n      <div className=\"App-warning Stake-warning\">\n        <Trans>\n          The <Link to=\"/migrate\">$AMX migration</Link> is in progress, please migrate your GMT, xGMT, GMT-USDG and\n          xGMT-USDG tokens.\n          <br />\n          USDG tokens will continue to function as before and do not need to be migrated.\n        </Trans>\n      </div>\n      <div className=\"Stake-cards\">\n        <div className=\"App-card primary\">\n          <div className=\"Stake-card-title App-card-title\">USDG</div>\n          <div className=\"Stake-card-bottom App-card-content\">\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>APR</Trans>\n              </div>\n              <div>\n                {!hasFeeDistribution && \"TBC\"}\n                {hasFeeDistribution && `${formatKeyAmount(processedData, \"usdgApr\", 2, 2, true)}%`}\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"usdgBalance\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"usdgBalance\", 18, 2, true)})\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Wallet</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"usdgBalance\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"usdgBalance\", 18, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Rewards</Trans>\n              </div>\n              <div>\n                {!hasFeeDistribution && \"TBC\"}\n                {hasFeeDistribution && `${formatKeyAmount(processedData, \"usdgRewards\", 18, 8, true)} WBNB`}\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Total Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"usdgTotalStaked\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"usdgTotalStakedUsd\", 30, 2, true)})\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Total Supply</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"usdgSupply\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"usdgSupplyUsd\", 30, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-options\">\n              <Link className=\"App-button-option App-card-option\" to=\"/trade\">\n                Get USDG\n              </Link>\n              {active && (\n                <button\n                  className=\"App-button-option App-card-option\"\n                  onClick={() => claim(usdgAddress, processedData.usdgRewards)}\n                >\n                  <Trans>Claim</Trans>\n                </button>\n              )}\n              {!active && (\n                <button className=\"App-button-option App-card-option\" onClick={connectWallet}>\n                  <Trans>Connect Wallet</Trans>\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n        <div className=\"App-card\">\n          <div className=\"Stake-card-title App-card-title\">xGMT</div>\n          <div className=\"Stake-card-bottom App-card-content\">\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">APR</div>\n              <div>\n                0.00% (\n                <Link to=\"/migrate\">\n                  <Trans>Migrate</Trans>\n                </Link>\n                )\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"xgmtBalance\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"xgmtBalanceUsd\", USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Wallet</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"xgmtBalance\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"xgmtBalanceUsd\", USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Rewards</Trans>\n              </div>\n              <div>\n                {!hasFeeDistribution && \"TBC\"}\n                {hasFeeDistribution && `${formatKeyAmount(processedData, \"xgmtRewards\", 18, 8, true)} WBNB`}\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Total Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"xgmtTotalStaked\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"xgmtTotalStakedUsd\", USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Total Supply</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"xgmtSupply\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"xgmtSupplyUsd\", USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-options\">\n              <ExternalLink className=\"App-button-option App-card-option\" href={buyXgmtUrl}>\n                Get xGMT\n              </ExternalLink>\n              {active && (\n                <button\n                  className=\"App-button-option App-card-option\"\n                  onClick={() => claim(xgmtAddress, processedData.xgmtRewards)}\n                >\n                  <Trans>Claim</Trans>\n                </button>\n              )}\n              {!active && (\n                <button className=\"App-button-option App-card-option\" onClick={connectWallet}>\n                  <Trans>Connect Wallet</Trans>\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n        <div className=\"App-card\">\n          <div className=\"Stake-card-title App-card-title\">GMT-USDG LP</div>\n          <div className=\"Stake-card-bottom App-card-content\">\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>APR</Trans>\n              </div>\n              <div>\n                0.00% (\n                <Link to=\"/migrate\">\n                  <Trans>Migrate</Trans>\n                </Link>\n                )\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"gmtUsdgStaked\", 18, 4, true)} ($\n                {formatKeyAmount(processedData, \"gmtUsdgStakedUsd\", 30, 2, true)})\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Wallet</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"gmtUsdgBalance\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"gmtUsdgBalanceUsd\", USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Rewards</Trans>\n              </div>\n              <div>\n                {hasFeeDistribution &&\n                  processedData.gmtUsdgNativeRewards &&\n                  processedData.gmtUsdgNativeRewards.gt(0) &&\n                  `${formatKeyAmount(processedData, \"gmtUsdgNativeRewards\", 18, 8, true)} WBNB, `}\n                {formatKeyAmount(processedData, \"gmtUsdgXgmtRewards\", 18, 4, true)} xGMT\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Total Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"gmtUsdgTotalStaked\", 18, 4, true)} ($\n                {formatKeyAmount(processedData, \"gmtUsdgTotalStakedUsd\", 30, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-options\">\n              <ExternalLink className=\"App-button-option App-card-option\" href={buyGmtUrl}>\n                Get GMT\n              </ExternalLink>\n              <ExternalLink className=\"App-button-option App-card-option\" href={addGmtUsdgLpUrl}>\n                <Trans>Create</Trans>\n              </ExternalLink>\n              {active && (\n                <button className=\"App-button-option App-card-option\" onClick={() => showUnstakeGmtUsdgModal()}>\n                  <Trans>Unstake</Trans>\n                </button>\n              )}\n              {active && (\n                <button\n                  className=\"App-button-option App-card-option\"\n                  onClick={() => claim(gmtUsdgFarmAddress, processedData.gmtUsdgTotalRewards)}\n                >\n                  <Trans>Claim</Trans>\n                </button>\n              )}\n              {!active && (\n                <button className=\"App-button-option App-card-option\" onClick={connectWallet}>\n                  <Trans>Connect Wallet</Trans>\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n        <div className=\"App-card\">\n          <div className=\"Stake-card-title App-card-title\">xGMT-USDG LP</div>\n          <div className=\"Stake-card-bottom App-card-content\">\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>APR</Trans>\n              </div>\n              <div>\n                0.00% (\n                <Link to=\"/migrate\">\n                  <Trans>Migrate</Trans>\n                </Link>\n                )\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"xgmtUsdgStaked\", 18, 4, true)} ($\n                {formatKeyAmount(processedData, \"xgmtUsdgStakedUsd\", 30, 2, true)})\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Wallet</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"xgmtUsdgBalance\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"xgmtUsdgBalanceUsd\", USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Rewards</Trans>\n              </div>\n              <div>\n                {hasFeeDistribution &&\n                  processedData.xgmtUsdgNativeRewards &&\n                  processedData.xgmtUsdgNativeRewards.gt(0) &&\n                  `${formatKeyAmount(processedData, \"xgmtUsdgNativeRewards\", 18, 8, true)} WBNB, `}\n                {formatKeyAmount(processedData, \"xgmtUsdgXgmtRewards\", 18, 4, true)} xGMT\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Total Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"xgmtUsdgTotalStaked\", 18, 4, true)} ($\n                {formatKeyAmount(processedData, \"xgmtUsdgTotalStakedUsd\", 30, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-options\">\n              <ExternalLink className=\"App-button-option App-card-option\" href={buyXgmtUrl}>\n                Get xGMT\n              </ExternalLink>\n              <ExternalLink className=\"App-button-option App-card-option\" href={addXgmtUsdgLpUrl}>\n                <Trans>Create</Trans>\n              </ExternalLink>\n              {active && (\n                <button className=\"App-button-option App-card-option\" onClick={() => showUnstakeXgmtUsdgModal()}>\n                  <Trans>Unstake</Trans>\n                </button>\n              )}\n              {active && (\n                <button\n                  className=\"App-button-option App-card-option\"\n                  onClick={() => claim(xgmtUsdgFarmAddress, processedData.xgmtUsdgTotalRewards)}\n                >\n                  <Trans>Claim</Trans>\n                </button>\n              )}\n              {!active && (\n                <button className=\"App-button-option App-card-option\" onClick={connectWallet}>\n                  <Trans>Connect Wallet</Trans>\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n        <div className=\"App-card\">\n          <div className=\"Stake-card-title App-card-title\">AUTO-USDG LP</div>\n          <div className=\"Stake-card-bottom App-card-content\">\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>APR</Trans>\n              </div>\n              <div>{formatKeyAmount(processedData, \"autoUsdgApr\", 2, 2, true)}%</div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"autoUsdgStaked\", 18, 4, true)} ($\n                {formatKeyAmount(processedData, \"autoUsdgStakedUsd\", 30, 2, true)})\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Wallet</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"autoUsdgBalance\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"autoUsdgBalanceUsd\", USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Rewards</Trans>\n              </div>\n              <div>{formatKeyAmount(processedData, \"autoUsdgXgmtRewards\", 18, 4, true)} xGMT</div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Total Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"autoUsdgTotalStaked\", 18, 4, true)} ($\n                {formatKeyAmount(processedData, \"autoUsdgTotalStakedUsd\", 30, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-options\">\n              <ExternalLink className=\"App-button-option App-card-option\" href={buyAutoUrl}>\n                Get AUTO\n              </ExternalLink>\n              <ExternalLink className=\"App-button-option App-card-option\" href={addAutoUsdgLpUrl}>\n                <Trans>Create</Trans>\n              </ExternalLink>\n              {active && (\n                <button className=\"App-button-option App-card-option\" onClick={() => showStakeAutoUsdgModal()}>\n                  <Trans>Stake</Trans>\n                </button>\n              )}\n              {active && (\n                <button className=\"App-button-option App-card-option\" onClick={() => showUnstakeAutoUsdgModal()}>\n                  <Trans>Unstake</Trans>\n                </button>\n              )}\n              {active && (\n                <button\n                  className=\"App-button-option App-card-option\"\n                  onClick={() => claim(autoUsdgFarmAddress, processedData.autoUsdgTotalRewards)}\n                >\n                  <Trans>Claim</Trans>\n                </button>\n              )}\n              {!active && (\n                <button className=\"App-button-option App-card-option\" onClick={connectWallet}>\n                  <Trans>Connect Wallet</Trans>\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport cx from \"classnames\";\n\nimport \"./Checkbox.css\";\nimport { ImCheckboxUnchecked, ImCheckboxChecked } from \"react-icons/im\";\n\nexport default function Checkbox(props) {\n  const { isChecked, setIsChecked, disabled, className } = props;\n\n  return (\n    <div\n      className={cx(\"Checkbox\", { disabled, selected: isChecked }, className)}\n      onClick={() => setIsChecked(!isChecked)}\n    >\n      <span className=\"Checkbox-icon-wrapper\">\n        {isChecked && <ImCheckboxChecked className=\"App-icon Checkbox-icon active\" />}\n        {!isChecked && <ImCheckboxUnchecked className=\"App-icon Checkbox-icon inactive\" />}\n      </span>\n      <span className=\"Checkbox-label\">{props.children}</span>\n    </div>\n  );\n}\n","import { useLocalStorage } from \"react-use\";\nimport { useCallback } from \"react\";\n\nexport function useLocalStorageByChainId<T>(\n  chainId: number,\n  key: string,\n  defaultValue: T\n): [T | undefined, (value: T) => void] {\n  const [internalValue, setInternalValue] = useLocalStorage(key, {});\n\n  const setValue = useCallback(\n    (value) => {\n      setInternalValue((internalValue) => {\n        if (typeof value === \"function\") {\n          value = value(internalValue?.[chainId] || defaultValue);\n        }\n\n        const newInternalValue = {\n          ...internalValue,\n          [chainId]: value,\n        };\n        return newInternalValue;\n      });\n    },\n    [chainId, setInternalValue, defaultValue]\n  );\n\n  let value;\n\n  if (internalValue && chainId in internalValue) {\n    value = internalValue[chainId];\n  } else {\n    value = defaultValue;\n  }\n\n  return [value, setValue];\n}\n\nexport function useLocalStorageSerializeKey<T>(\n  key: string,\n  value: T,\n  opts?: {\n    raw: boolean;\n    serializer: (val: T) => string;\n    deserializer: (value: string) => T;\n  }\n) {\n  key = JSON.stringify(key);\n\n  return useLocalStorage<T>(key, value, opts);\n}\n","import React, { useState, useCallback } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\n\nimport Modal from \"components/Modal/Modal\";\nimport Checkbox from \"components/Checkbox/Checkbox\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport Footer from \"components/Footer/Footer\";\n\nimport Vault from \"abis/Vault.json\";\nimport ReaderV2 from \"abis/ReaderV2.json\";\nimport Vester from \"abis/Vester.json\";\nimport RewardRouter from \"abis/RewardRouter.json\";\nimport RewardReader from \"abis/RewardReader.json\";\nimport Token from \"abis/Token.json\";\nimport GlpManager from \"abis/GlpManager.json\";\n\nimport { ethers } from \"ethers\";\nimport {\n  GLP_DECIMALS,\n  USD_DECIMALS,\n  BASIS_POINTS_DIVISOR,\n  PLACEHOLDER_ACCOUNT,\n  getBalanceAndSupplyData,\n  getDepositBalanceData,\n  getVestingData,\n  getStakingData,\n  getProcessedData,\n  getPageTitle,\n} from \"lib/legacy\";\nimport { useGmxPrice, useTotalGmxStaked, useTotalGmxSupply } from \"domain/legacy\";\nimport { ARBITRUM, getChainName, getConstant } from \"config/chains\";\n\nimport useSWR from \"swr\";\n\nimport { getContract } from \"config/contracts\";\n\nimport \"./StakeV2.css\";\nimport SEO from \"components/Common/SEO\";\nimport StatsTooltip from \"components/StatsTooltip/StatsTooltip\";\nimport StatsTooltipRow from \"components/StatsTooltip/StatsTooltipRow\";\nimport { getServerUrl } from \"config/backend\";\nimport { callContract, contractFetcher } from \"lib/contracts\";\nimport { useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { helperToast } from \"lib/helperToast\";\nimport { approveTokens } from \"domain/tokens\";\nimport { bigNumberify, expandDecimals, formatAmount, formatAmountFree, formatKeyAmount, parseValue } from \"lib/numbers\";\nimport { useChainId } from \"lib/chains\";\n\nconst { AddressZero } = ethers.constants;\n\nfunction StakeModal(props) {\n  const {\n    isVisible,\n    setIsVisible,\n    chainId,\n    title,\n    maxAmount,\n    value,\n    setValue,\n    active,\n    account,\n    library,\n    stakingTokenSymbol,\n    stakingTokenAddress,\n    farmAddress,\n    rewardRouterAddress,\n    stakeMethodName,\n    setPendingTxns,\n  } = props;\n  const [isStaking, setIsStaking] = useState(false);\n  const [isApproving, setIsApproving] = useState(false);\n  console.log(\"---shark StakeModal\")\n  const { data: tokenAllowance } = useSWR(\n    active && stakingTokenAddress && [active, chainId, stakingTokenAddress, \"allowance\", account, farmAddress],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  let amount = parseValue(value, 18);\n  const needApproval = farmAddress !== AddressZero && tokenAllowance && amount && amount.gt(tokenAllowance);\n\n  const getError = () => {\n    if (!amount || amount.eq(0)) {\n      return t`Enter an amount`;\n    }\n    if (maxAmount && amount.gt(maxAmount)) {\n      return t`Max amount exceeded`;\n    }\n  };\n\n  const onClickPrimary = () => {\n    if (needApproval) {\n      approveTokens({\n        setIsApproving,\n        library,\n        tokenAddress: stakingTokenAddress,\n        spender: farmAddress,\n        chainId,\n      });\n      return;\n    }\n\n    setIsStaking(true);\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n    console.log(\"---shark onClickPrimary\")\n    callContract(chainId, contract, stakeMethodName, [amount], {\n      sentMsg: t`Stake submitted!`,\n      failMsg: t`Stake failed.`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setIsVisible(false);\n      })\n      .finally(() => {\n        setIsStaking(false);\n      });\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isApproving) {\n      return false;\n    }\n    if (isStaking) {\n      return false;\n    }\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n    if (isApproving) {\n      return t`Approving ${stakingTokenSymbol}...`;\n    }\n    if (needApproval) {\n      return t`Approve ${stakingTokenSymbol}`;\n    }\n    if (isStaking) {\n      return t`Staking...`;\n    }\n    return t`Stake`;\n  };\n\n  return (\n    <div className=\"StakeModal\">\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\n        <div className=\"Exchange-swap-section\">\n          <div className=\"Exchange-swap-section-top\">\n            <div className=\"muted\">\n              <div className=\"Exchange-swap-usd\">\n                <Trans>Stake</Trans>\n              </div>\n            </div>\n            <div className=\"muted align-right clickable\" onClick={() => setValue(formatAmountFree(maxAmount, 18, 18))}>\n              <Trans>Max: {formatAmount(maxAmount, 18, 4, true)}</Trans>\n            </div>\n          </div>\n          <div className=\"Exchange-swap-section-bottom\">\n            <div>\n              <input\n                type=\"number\"\n                placeholder=\"0.0\"\n                className=\"Exchange-swap-input\"\n                value={value}\n                onChange={(e) => setValue(e.target.value)}\n              />\n            </div>\n            <div className=\"PositionEditor-token-symbol\">{stakingTokenSymbol}</div>\n          </div>\n        </div>\n        <div className=\"Exchange-swap-button-container\">\n          <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nfunction UnstakeModal(props) {\n  const {\n    isVisible,\n    setIsVisible,\n    chainId,\n    title,\n    maxAmount,\n    value,\n    setValue,\n    library,\n    unstakingTokenSymbol,\n    rewardRouterAddress,\n    unstakeMethodName,\n    multiplierPointsAmount,\n    reservedAmount,\n    bonusGmxInFeeGmx,\n    setPendingTxns,\n  } = props;\n  const [isUnstaking, setIsUnstaking] = useState(false);\n\n  let amount = parseValue(value, 18);\n  let burnAmount;\n\n  if (\n    multiplierPointsAmount &&\n    multiplierPointsAmount.gt(0) &&\n    amount &&\n    amount.gt(0) &&\n    bonusGmxInFeeGmx &&\n    bonusGmxInFeeGmx.gt(0)\n  ) {\n    burnAmount = multiplierPointsAmount.mul(amount).div(bonusGmxInFeeGmx);\n  }\n\n  const shouldShowReductionAmount = true;\n  let rewardReductionBasisPoints;\n  if (burnAmount && bonusGmxInFeeGmx) {\n    rewardReductionBasisPoints = burnAmount.mul(BASIS_POINTS_DIVISOR).div(bonusGmxInFeeGmx);\n  }\n\n  const getError = () => {\n    if (!amount) {\n      return t`Enter an amount`;\n    }\n    if (amount.gt(maxAmount)) {\n      return t`Max amount exceeded`;\n    }\n  };\n\n  const onClickPrimary = () => {\n    setIsUnstaking(true);\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n    callContract(chainId, contract, unstakeMethodName, [amount], {\n      sentMsg: t`Unstake submitted!`,\n      failMsg: t`Unstake failed.`,\n      successMsg: t`Unstake completed!`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setIsVisible(false);\n      })\n      .finally(() => {\n        setIsUnstaking(false);\n      });\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isUnstaking) {\n      return false;\n    }\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n    if (isUnstaking) {\n      return t`Unstaking...`;\n    }\n    return t`Unstake`;\n  };\n\n  return (\n    <div className=\"StakeModal\">\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\n        <div className=\"Exchange-swap-section\">\n          <div className=\"Exchange-swap-section-top\">\n            <div className=\"muted\">\n              <div className=\"Exchange-swap-usd\">\n                <Trans>Unstake</Trans>\n              </div>\n            </div>\n            <div className=\"muted align-right clickable\" onClick={() => setValue(formatAmountFree(maxAmount, 18, 18))}>\n              <Trans>Max: {formatAmount(maxAmount, 18, 4, true)}</Trans>\n            </div>\n          </div>\n          <div className=\"Exchange-swap-section-bottom\">\n            <div>\n              <input\n                type=\"number\"\n                placeholder=\"0.0\"\n                className=\"Exchange-swap-input\"\n                value={value}\n                onChange={(e) => setValue(e.target.value)}\n              />\n            </div>\n            <div className=\"PositionEditor-token-symbol\">{unstakingTokenSymbol}</div>\n          </div>\n        </div>\n        {reservedAmount && reservedAmount.gt(0) && (\n          <div className=\"Modal-note\">\n            You have {formatAmount(reservedAmount, 18, 2, true)} tokens reserved for vesting.\n          </div>\n        )}\n        {burnAmount && burnAmount.gt(0) && rewardReductionBasisPoints && rewardReductionBasisPoints.gt(0) && (\n          <div className=\"Modal-note\">\n            Unstaking will burn&nbsp;\n            <a href=\"https://amxdex.gitbook.io/amxdex/rewards\" target=\"_blank\" rel=\"noopener noreferrer\">\n              {formatAmount(burnAmount, 18, 4, true)} Multiplier Points\n            </a>\n            .&nbsp;\n            {shouldShowReductionAmount && (\n              <span>Boost Percentage: -{formatAmount(rewardReductionBasisPoints, 2, 2)}%.</span>\n            )}\n          </div>\n        )}\n        <div className=\"Exchange-swap-button-container\">\n          <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nfunction VesterDepositModal(props) {\n  const {\n    isVisible,\n    setIsVisible,\n    chainId,\n    title,\n    maxAmount,\n    value,\n    setValue,\n    balance,\n    vestedAmount,\n    averageStakedAmount,\n    maxVestableAmount,\n    library,\n    stakeTokenLabel,\n    reserveAmount,\n    maxReserveAmount,\n    vesterAddress,\n    setPendingTxns,\n  } = props;\n  const [isDepositing, setIsDepositing] = useState(false);\n\n  let amount = parseValue(value, 18);\n\n  let nextReserveAmount = reserveAmount;\n\n  let nextDepositAmount = vestedAmount;\n  if (amount) {\n    nextDepositAmount = vestedAmount.add(amount);\n  }\n\n  let additionalReserveAmount = bigNumberify(0);\n  if (amount && averageStakedAmount && maxVestableAmount && maxVestableAmount.gt(0)) {\n    nextReserveAmount = nextDepositAmount.mul(averageStakedAmount).div(maxVestableAmount);\n    if (nextReserveAmount.gt(reserveAmount)) {\n      additionalReserveAmount = nextReserveAmount.sub(reserveAmount);\n    }\n  }\n\n  const getError = () => {\n    if (!amount || amount.eq(0)) {\n      return t`Enter an amount`;\n    }\n    if (maxAmount && amount.gt(maxAmount)) {\n      return t`Max amount exceeded`;\n    }\n    if (nextReserveAmount.gt(maxReserveAmount)) {\n      return t`Insufficient staked tokens`;\n    }\n  };\n\n  const onClickPrimary = () => {\n    setIsDepositing(true);\n    const contract = new ethers.Contract(vesterAddress, Vester.abi, library.getSigner());\n\n    callContract(chainId, contract, \"deposit\", [amount], {\n      sentMsg: t`Deposit submitted!`,\n      failMsg: t`Deposit failed!`,\n      successMsg: t`Deposited!`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setIsVisible(false);\n      })\n      .finally(() => {\n        setIsDepositing(false);\n      });\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isDepositing) {\n      return false;\n    }\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n    if (isDepositing) {\n      return t`Depositing...`;\n    }\n    return t`Deposit`;\n  };\n\n  return (\n    <SEO title={getPageTitle(\"Earn\")}>\n      <div className=\"StakeModal\">\n        <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title} className=\"non-scrollable\">\n          <div className=\"Exchange-swap-section\">\n            <div className=\"Exchange-swap-section-top\">\n              <div className=\"muted\">\n                <div className=\"Exchange-swap-usd\">\n                  <Trans>Deposit</Trans>\n                </div>\n              </div>\n              <div\n                className=\"muted align-right clickable\"\n                onClick={() => setValue(formatAmountFree(maxAmount, 18, 18))}\n              >\n                <Trans>Max: {formatAmount(maxAmount, 18, 4, true)}</Trans>\n              </div>\n            </div>\n            <div className=\"Exchange-swap-section-bottom\">\n              <div>\n                <input\n                  type=\"number\"\n                  placeholder=\"0.0\"\n                  className=\"Exchange-swap-input\"\n                  value={value}\n                  onChange={(e) => setValue(e.target.value)}\n                />\n              </div>\n              <div className=\"PositionEditor-token-symbol\">esAMX</div>\n            </div>\n          </div>\n          <div className=\"VesterDepositModal-info-rows\">\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Wallet</Trans>\n              </div>\n              <div className=\"align-right\">{formatAmount(balance, 18, 2, true)} esAMX</div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Vault Capacity</Trans>\n              </div>\n              <div className=\"align-right\">\n                <Tooltip\n                  handle={`${formatAmount(nextDepositAmount, 18, 2, true)} / ${formatAmount(\n                    maxVestableAmount,\n                    18,\n                    2,\n                    true\n                  )}`}\n                  position=\"right-bottom\"\n                  renderContent={() => {\n                    return (\n                      <div>\n                        <p className=\"text-white\">\n                          <Trans>Vault Capacity for your Account:</Trans>\n                        </p>\n                        <StatsTooltipRow\n                          showDollar={false}\n                          label={t`Deposited`}\n                          value={`${formatAmount(vestedAmount, 18, 2, true)} esAMX`}\n                        />\n                        <StatsTooltipRow\n                          showDollar={false}\n                          label={t`Max Capacity`}\n                          value={`${formatAmount(maxVestableAmount, 18, 2, true)} esAMX`}\n                        />\n                      </div>\n                    );\n                  }}\n                />\n              </div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Reserve Amount</Trans>\n              </div>\n              <div className=\"align-right\">\n                <Tooltip\n                  handle={`${formatAmount(\n                    reserveAmount && reserveAmount.gte(additionalReserveAmount)\n                      ? reserveAmount\n                      : additionalReserveAmount,\n                    18,\n                    2,\n                    true\n                  )} / ${formatAmount(maxReserveAmount, 18, 2, true)}`}\n                  position=\"right-bottom\"\n                  renderContent={() => {\n                    return (\n                      <>\n                        <StatsTooltipRow\n                          label={t`Current Reserved`}\n                          value={formatAmount(reserveAmount, 18, 2, true)}\n                          showDollar={false}\n                        />\n                        <StatsTooltipRow\n                          label={t`Additional reserve required`}\n                          value={formatAmount(additionalReserveAmount, 18, 2, true)}\n                          showDollar={false}\n                        />\n                        {amount && nextReserveAmount.gt(maxReserveAmount) && (\n                          <>\n                            <br />\n                            <Trans>\n                              You need a total of at least {formatAmount(nextReserveAmount, 18, 2, true)}{\" \"}\n                              {stakeTokenLabel} to vest {formatAmount(amount, 18, 2, true)} esAMX.\n                            </Trans>\n                          </>\n                        )}\n                      </>\n                    );\n                  }}\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"Exchange-swap-button-container\">\n            <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n              {getPrimaryText()}\n            </button>\n          </div>\n        </Modal>\n      </div>\n    </SEO>\n  );\n}\n\nfunction VesterWithdrawModal(props) {\n  const { isVisible, setIsVisible, chainId, title, library, vesterAddress, setPendingTxns } = props;\n  const [isWithdrawing, setIsWithdrawing] = useState(false);\n\n  const onClickPrimary = () => {\n    setIsWithdrawing(true);\n    const contract = new ethers.Contract(vesterAddress, Vester.abi, library.getSigner());\n\n    callContract(chainId, contract, \"withdraw\", [], {\n      sentMsg: t`Withdraw submitted.`,\n      failMsg: t`Withdraw failed.`,\n      successMsg: t`Withdrawn!`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setIsVisible(false);\n      })\n      .finally(() => {\n        setIsWithdrawing(false);\n      });\n  };\n\n  return (\n    <div className=\"StakeModal\">\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\n        <Trans>\n          <div>\n            This will withdraw and unreserve all tokens as well as pause vesting.\n            <br />\n            <br />\n            esAMX tokens that have been converted to $AMX will remain as $AMX tokens.\n            <br />\n            <br />\n            To claim $AMX tokens without withdrawing, use the \"Claim\" button under the Total Rewards section.\n            <br />\n            <br />\n          </div>\n        </Trans>\n        <div className=\"Exchange-swap-button-container\">\n          <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={isWithdrawing}>\n            {!isWithdrawing && \"Confirm Withdraw\"}\n            {isWithdrawing && \"Confirming...\"}\n          </button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nfunction CompoundModal(props) {\n  const {\n    isVisible,\n    setIsVisible,\n    rewardRouterAddress,\n    active,\n    account,\n    library,\n    chainId,\n    setPendingTxns,\n    totalVesterRewards,\n    nativeTokenSymbol,\n    wrappedTokenSymbol,\n  } = props;\n  const [isCompounding, setIsCompounding] = useState(false);\n  const [shouldClaimGmx, setShouldClaimGmx] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-compound-should-claim-gmx\"],\n    true\n  );\n  const [shouldStakeGmx, setShouldStakeGmx] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-compound-should-stake-gmx\"],\n    true\n  );\n  const [shouldClaimEsGmx, setShouldClaimEsGmx] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-compound-should-claim-es-gmx\"],\n    true\n  );\n  const [shouldStakeEsGmx, setShouldStakeEsGmx] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-compound-should-stake-es-gmx\"],\n    true\n  );\n  const [shouldStakeMultiplierPoints, setShouldStakeMultiplierPoints] = useState(true);\n  const [shouldClaimWeth, setShouldClaimWeth] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-compound-should-claim-weth\"],\n    true\n  );\n  const [shouldConvertWeth, setShouldConvertWeth] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-compound-should-convert-weth\"],\n    true\n  );\n\n  const gmxAddress = getContract(chainId, \"GMX\");\n  const stakedGmxTrackerAddress = getContract(chainId, \"StakedGmxTracker\");\n\n  const [isApproving, setIsApproving] = useState(false);\n\n  const { data: tokenAllowance } = useSWR(\n    active && [active, chainId, gmxAddress, \"allowance\", account, stakedGmxTrackerAddress],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  const needApproval = shouldStakeGmx && tokenAllowance && totalVesterRewards && totalVesterRewards.gt(tokenAllowance);\n\n  const isPrimaryEnabled = () => {\n    return !isCompounding && !isApproving && !isCompounding;\n  };\n\n  const getPrimaryText = () => {\n    if (isApproving) {\n      return t`Approving $AMX...`;\n    }\n    if (needApproval) {\n      return t`Approve $AMX`;\n    }\n    if (isCompounding) {\n      return t`Compounding...`;\n    }\n    return t`Compound`;\n  };\n\n  const onClickPrimary = () => {\n    if (needApproval) {\n      approveTokens({\n        setIsApproving,\n        library,\n        tokenAddress: gmxAddress,\n        spender: stakedGmxTrackerAddress,\n        chainId,\n      });\n      return;\n    }\n\n    setIsCompounding(true);\n\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n    callContract(\n      chainId,\n      contract,\n      \"handleRewards\",\n      [\n        shouldClaimGmx || shouldStakeGmx,\n        shouldStakeGmx,\n        shouldClaimEsGmx || shouldStakeEsGmx,\n        shouldStakeEsGmx,\n        shouldStakeMultiplierPoints,\n        shouldClaimWeth || shouldConvertWeth,\n        shouldConvertWeth,\n      ],\n      {\n        sentMsg: t`Compound submitted!`,\n        failMsg: t`Compound failed.`,\n        successMsg: t`Compound completed!`,\n        setPendingTxns,\n      }\n    )\n      .then(async (res) => {\n        setIsVisible(false);\n      })\n      .finally(() => {\n        setIsCompounding(false);\n      });\n  };\n\n  const toggleShouldStakeGmx = (value) => {\n    if (value) {\n      setShouldClaimGmx(true);\n    }\n    setShouldStakeGmx(value);\n  };\n\n  const toggleShouldStakeEsGmx = (value) => {\n    if (value) {\n      setShouldClaimEsGmx(true);\n    }\n    setShouldStakeEsGmx(value);\n  };\n\n  const toggleConvertWeth = (value) => {\n    if (value) {\n      setShouldClaimWeth(true);\n    }\n    setShouldConvertWeth(value);\n  };\n\n  return (\n    <div className=\"StakeModal\">\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={t`Compound Rewards`}>\n        <div className=\"CompoundModal-menu\">\n          <div>\n            <Checkbox\n              isChecked={shouldStakeMultiplierPoints}\n              setIsChecked={setShouldStakeMultiplierPoints}\n              disabled={true}\n            >\n              <Trans>Stake Multiplier Points</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldClaimGmx} setIsChecked={setShouldClaimGmx} disabled={shouldStakeGmx}>\n              <Trans>Claim $AMX Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldStakeGmx} setIsChecked={toggleShouldStakeGmx}>\n              <Trans>Stake $AMX Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldClaimEsGmx} setIsChecked={setShouldClaimEsGmx} disabled={shouldStakeEsGmx}>\n              <Trans>Claim esAMX Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldStakeEsGmx} setIsChecked={toggleShouldStakeEsGmx}>\n              <Trans>Stake esAMX Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldClaimWeth} setIsChecked={setShouldClaimWeth} disabled={shouldConvertWeth}>\n              <Trans>Claim {wrappedTokenSymbol} Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldConvertWeth} setIsChecked={toggleConvertWeth}>\n              <Trans>\n                Convert {wrappedTokenSymbol} to {nativeTokenSymbol}\n              </Trans>\n            </Checkbox>\n          </div>\n        </div>\n        <div className=\"Exchange-swap-button-container\">\n          <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nfunction ClaimModal(props) {\n  const {\n    isVisible,\n    setIsVisible,\n    rewardRouterAddress,\n    library,\n    chainId,\n    setPendingTxns,\n    nativeTokenSymbol,\n    wrappedTokenSymbol,\n  } = props;\n  const [isClaiming, setIsClaiming] = useState(false);\n  const [shouldClaimGmx, setShouldClaimGmx] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-claim-should-claim-gmx\"],\n    true\n  );\n  const [shouldClaimEsGmx, setShouldClaimEsGmx] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-claim-should-claim-es-gmx\"],\n    true\n  );\n  const [shouldClaimWeth, setShouldClaimWeth] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-claim-should-claim-weth\"],\n    true\n  );\n  const [shouldConvertWeth, setShouldConvertWeth] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-claim-should-convert-weth\"],\n    true\n  );\n\n  const isPrimaryEnabled = () => {\n    return !isClaiming;\n  };\n\n  const getPrimaryText = () => {\n    if (isClaiming) {\n      return t`Claiming...`;\n    }\n    return t`Claim`;\n  };\n\n  const onClickPrimary = () => {\n    setIsClaiming(true);\n\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n    callContract(\n      chainId,\n      contract,\n      \"handleRewards\",\n      [\n        shouldClaimGmx,\n        false, // shouldStakeGmx\n        shouldClaimEsGmx,\n        false, // shouldStakeEsGmx\n        false, // shouldStakeMultiplierPoints\n        shouldClaimWeth,\n        shouldConvertWeth,\n      ],\n      {\n        sentMsg: t`Claim submitted.`,\n        failMsg: t`Claim failed.`,\n        successMsg: t`Claim completed!`,\n        setPendingTxns,\n      }\n    )\n      .then(async (res) => {\n        setIsVisible(false);\n      })\n      .finally(() => {\n        setIsClaiming(false);\n      });\n  };\n\n  const toggleConvertWeth = (value) => {\n    if (value) {\n      setShouldClaimWeth(true);\n    }\n    setShouldConvertWeth(value);\n  };\n\n  return (\n    <div className=\"StakeModal\">\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={t`Claim Rewards`}>\n        <div className=\"CompoundModal-menu\">\n          <div>\n            <Checkbox isChecked={shouldClaimGmx} setIsChecked={setShouldClaimGmx}>\n              <Trans>Claim $AMX Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldClaimEsGmx} setIsChecked={setShouldClaimEsGmx}>\n              <Trans>Claim esAMX Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldClaimWeth} setIsChecked={setShouldClaimWeth} disabled={shouldConvertWeth}>\n              <Trans>Claim {wrappedTokenSymbol} Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldConvertWeth} setIsChecked={toggleConvertWeth}>\n              <Trans>\n                Convert {wrappedTokenSymbol} to {nativeTokenSymbol}\n              </Trans>\n            </Checkbox>\n          </div>\n        </div>\n        <div className=\"Exchange-swap-button-container\">\n          <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nexport default function StakeV2({ setPendingTxns, connectWallet }) {\n  const { active, library, account } = useWeb3React();\n  const { chainId } = useChainId();\n\n  const chainName = getChainName(chainId);\n\n  const hasInsurance = true;\n\n  const [isStakeModalVisible, setIsStakeModalVisible] = useState(false);\n  const [stakeModalTitle, setStakeModalTitle] = useState(\"\");\n  const [stakeModalMaxAmount, setStakeModalMaxAmount] = useState(undefined);\n  const [stakeValue, setStakeValue] = useState(\"\");\n  const [stakingTokenSymbol, setStakingTokenSymbol] = useState(\"\");\n  const [stakingTokenAddress, setStakingTokenAddress] = useState(\"\");\n  const [stakingFarmAddress, setStakingFarmAddress] = useState(\"\");\n  const [stakeMethodName, setStakeMethodName] = useState(\"\");\n\n  const [isUnstakeModalVisible, setIsUnstakeModalVisible] = useState(false);\n  const [unstakeModalTitle, setUnstakeModalTitle] = useState(\"\");\n  const [unstakeModalMaxAmount, setUnstakeModalMaxAmount] = useState(undefined);\n  const [unstakeModalReservedAmount, setUnstakeModalReservedAmount] = useState(undefined);\n  const [unstakeValue, setUnstakeValue] = useState(\"\");\n  const [unstakingTokenSymbol, setUnstakingTokenSymbol] = useState(\"\");\n  const [unstakeMethodName, setUnstakeMethodName] = useState(\"\");\n\n  const [isVesterDepositModalVisible, setIsVesterDepositModalVisible] = useState(false);\n  const [vesterDepositTitle, setVesterDepositTitle] = useState(\"\");\n  const [vesterDepositStakeTokenLabel, setVesterDepositStakeTokenLabel] = useState(\"\");\n  const [vesterDepositMaxAmount, setVesterDepositMaxAmount] = useState(\"\");\n  const [vesterDepositBalance, setVesterDepositBalance] = useState(\"\");\n  const [vesterDepositEscrowedBalance, setVesterDepositEscrowedBalance] = useState(\"\");\n  const [vesterDepositVestedAmount, setVesterDepositVestedAmount] = useState(\"\");\n  const [vesterDepositAverageStakedAmount, setVesterDepositAverageStakedAmount] = useState(\"\");\n  const [vesterDepositMaxVestableAmount, setVesterDepositMaxVestableAmount] = useState(\"\");\n  const [vesterDepositValue, setVesterDepositValue] = useState(\"\");\n  const [vesterDepositReserveAmount, setVesterDepositReserveAmount] = useState(\"\");\n  const [vesterDepositMaxReserveAmount, setVesterDepositMaxReserveAmount] = useState(\"\");\n  const [vesterDepositAddress, setVesterDepositAddress] = useState(\"\");\n\n  const [isVesterWithdrawModalVisible, setIsVesterWithdrawModalVisible] = useState(false);\n  const [vesterWithdrawTitle, setVesterWithdrawTitle] = useState(false);\n  const [vesterWithdrawAddress, setVesterWithdrawAddress] = useState(\"\");\n\n  const [isCompoundModalVisible, setIsCompoundModalVisible] = useState(false);\n  const [isClaimModalVisible, setIsClaimModalVisible] = useState(false);\n\n  const rewardRouterAddress = getContract(chainId, \"RewardRouter\");\n  const rewardReaderAddress = getContract(chainId, \"RewardReader\");\n  const readerAddress = getContract(chainId, \"Reader\");\n\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const gmxAddress = getContract(chainId, \"GMX\");\n  const esGmxAddress = getContract(chainId, \"ES_GMX\");\n  const bnGmxAddress = getContract(chainId, \"BN_GMX\");\n  const glpAddress = getContract(chainId, \"GLP\");\n\n  const stakedGmxTrackerAddress = getContract(chainId, \"StakedGmxTracker\");\n  const bonusGmxTrackerAddress = getContract(chainId, \"BonusGmxTracker\");\n  const feeGmxTrackerAddress = getContract(chainId, \"FeeGmxTracker\");\n\n  const stakedGlpTrackerAddress = getContract(chainId, \"StakedGlpTracker\");\n  const feeGlpTrackerAddress = getContract(chainId, \"FeeGlpTracker\");\n\n  const glpManagerAddress = getContract(chainId, \"GlpManager\");\n\n  const stakedGmxDistributorAddress = getContract(chainId, \"StakedGmxDistributor\");\n  const stakedGlpDistributorAddress = getContract(chainId, \"StakedGlpDistributor\");\n\n  const gmxVesterAddress = getContract(chainId, \"GmxVester\");\n  const glpVesterAddress = getContract(chainId, \"GlpVester\");\n\n  const vesterAddresses = [gmxVesterAddress, glpVesterAddress];\n\n  const excludedEsGmxAccounts = [stakedGmxDistributorAddress, stakedGlpDistributorAddress];\n\n  const nativeTokenSymbol = getConstant(chainId, \"nativeTokenSymbol\");\n  const wrappedTokenSymbol = getConstant(chainId, \"wrappedTokenSymbol\");\n\n  const walletTokens = [gmxAddress, esGmxAddress, glpAddress, stakedGmxTrackerAddress];\n  // console.log(\"---shark gmxAddress: \", gmxAddress);\n  // console.log(\"---shark esGmxAddress: \", esGmxAddress);\n  // console.log(\"---shark glpAddress: \", glpAddress);\n  // console.log(\"---shark stakedGmxTrackerAddress: \", stakedGmxTrackerAddress);\n\n  const depositTokens = [\n    gmxAddress,\n    esGmxAddress,\n    stakedGmxTrackerAddress,\n    bonusGmxTrackerAddress,\n    bnGmxAddress,\n    glpAddress,\n  ];\n  const rewardTrackersForDepositBalances = [\n    stakedGmxTrackerAddress,\n    stakedGmxTrackerAddress,\n    bonusGmxTrackerAddress,\n    feeGmxTrackerAddress,\n    feeGmxTrackerAddress,\n    feeGlpTrackerAddress,\n  ];\n  const rewardTrackersForStakingInfo = [\n    stakedGmxTrackerAddress,\n    bonusGmxTrackerAddress,\n    feeGmxTrackerAddress,\n    stakedGlpTrackerAddress,\n    feeGlpTrackerAddress,\n  ];\n  // console.log(\"---shark readerAddress: \", readerAddress);\n  const { data: walletBalances } = useSWR(\n    [\n      `StakeV2:walletBalances:${active}`,\n      chainId,\n      readerAddress,\n      \"getTokenBalancesWithSupplies\",\n      account || PLACEHOLDER_ACCOUNT,\n    ],\n    {\n      fetcher: contractFetcher(library, ReaderV2, [walletTokens]),\n    }\n  );\n  // console.log(\"---shark walletBalances: \", walletBalances);\n  const { data: depositBalances } = useSWR(\n    [\n      `StakeV2:depositBalances:${active}`,\n      chainId,\n      rewardReaderAddress,\n      \"getDepositBalances\",\n      account || PLACEHOLDER_ACCOUNT,\n    ],\n    {\n      fetcher: contractFetcher(library, RewardReader, [depositTokens, rewardTrackersForDepositBalances]),\n    }\n  );\n\n  const { data: stakingInfo } = useSWR(\n    [`StakeV2:stakingInfo:${active}`, chainId, rewardReaderAddress, \"getStakingInfo\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(library, RewardReader, [rewardTrackersForStakingInfo]),\n    }\n  );\n\n  const { data: stakedGmxSupply } = useSWR(\n    [`StakeV2:stakedGmxSupply:${active}`, chainId, gmxAddress, \"balanceOf\", stakedGmxTrackerAddress],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  const { data: aums } = useSWR([`StakeV2:getAums:${active}`, chainId, glpManagerAddress, \"getAums\"], {\n    fetcher: contractFetcher(library, GlpManager),\n  });\n\n  const { data: nativeTokenPrice } = useSWR(\n    [`StakeV2:nativeTokenPrice:${active}`, chainId, vaultAddress, \"getMinPrice\", nativeTokenAddress],\n    {\n      fetcher: contractFetcher(library, Vault),\n    }\n  );\n\n  const { data: esGmxSupply } = useSWR(\n    [`StakeV2:esGmxSupply:${active}`, chainId, readerAddress, \"getTokenSupply\", esGmxAddress],\n    {\n      fetcher: contractFetcher(library, ReaderV2, [excludedEsGmxAccounts]),\n    }\n  );\n  console.log(\"---shark getVestingInfo\");\n  const { data: vestingInfo } = useSWR(\n    [`StakeV2:vestingInfo:${active}`, chainId, readerAddress, \"getVestingInfo\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(library, ReaderV2, [vesterAddresses]),\n    }\n  );\n\n  const { gmxPrice, gmxPriceFromArbitrum, gmxPriceFromPolygon } = useGmxPrice(\n    chainId,\n    { arbitrum: chainId === ARBITRUM ? library : undefined },\n    active\n  );\n\n  let { total: totalGmxSupply } = useTotalGmxSupply();\n\n  let { matic: maticGmxStaked, arbitrum: arbitrumGmxStaked, total: totalGmxStaked } = useTotalGmxStaked();\n\n  // const gmxSupplyUrl = getServerUrl(chainId, \"/gmx_supply\");\n  // const { data: gmxSupply } = useSWR([gmxSupplyUrl], {\n  //   fetcher: (...args) => fetch(...args).then((res) => res.text()),\n  // });\n\n  const { data: gmxSupply } = useSWR(\n    [`StakeV2:gmxSupply:${active}`, chainId, gmxAddress, \"balanceOf\", account],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  const isGmxTransferEnabled = true;\n\n  let esGmxSupplyUsd;\n  if (esGmxSupply && gmxPrice) {\n    esGmxSupplyUsd = esGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n  }\n\n  let aum;\n  if (aums && aums.length > 0) {\n    aum = aums[0].add(aums[1]).div(2);\n  }\n\n  const { balanceData, supplyData } = getBalanceAndSupplyData(walletBalances);\n  const depositBalanceData = getDepositBalanceData(depositBalances);\n  const stakingData = getStakingData(stakingInfo);\n  const vestingData = getVestingData(vestingInfo);\n\n  const processedData = getProcessedData(\n    balanceData,\n    supplyData,\n    depositBalanceData,\n    stakingData,\n    vestingData,\n    aum,\n    nativeTokenPrice,\n    stakedGmxSupply,\n    gmxPrice,\n    gmxSupply\n  );\n\n  let hasMultiplierPoints = false;\n  let multiplierPointsAmount;\n  if (processedData && processedData.bonusGmxTrackerRewards && processedData.bnGmxInFeeGmx) {\n    multiplierPointsAmount = processedData.bonusGmxTrackerRewards.add(processedData.bnGmxInFeeGmx);\n    if (multiplierPointsAmount.gt(0)) {\n      hasMultiplierPoints = true;\n    }\n  }\n  let totalRewardTokens;\n  if (processedData && processedData.bnGmxInFeeGmx && processedData.bonusGmxInFeeGmx) {\n    totalRewardTokens = processedData.bnGmxInFeeGmx.add(processedData.bonusGmxInFeeGmx);\n  }\n\n  let totalRewardTokensAndGlp;\n  if (totalRewardTokens && processedData && processedData.glpBalance) {\n    totalRewardTokensAndGlp = totalRewardTokens.add(processedData.glpBalance);\n  }\n\n  const bonusGmxInFeeGmx = processedData ? processedData.bonusGmxInFeeGmx : undefined;\n\n  let stakedGmxSupplyUsd;\n  if (!totalGmxStaked.isZero() && gmxPrice) {\n    stakedGmxSupplyUsd = totalGmxStaked.mul(gmxPrice).div(expandDecimals(1, 18));\n  }\n\n  let totalSupplyUsd;\n  if (totalGmxSupply && !totalGmxSupply.isZero() && gmxPrice) {\n    totalSupplyUsd = totalGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n  }\n\n  let maxUnstakeableGmx = bigNumberify(0);\n  if (\n    totalRewardTokens &&\n    vestingData &&\n    vestingData.gmxVesterPairAmount &&\n    multiplierPointsAmount &&\n    processedData.bonusGmxInFeeGmx\n  ) {\n    const availableTokens = totalRewardTokens.sub(vestingData.gmxVesterPairAmount);\n    const stakedTokens = processedData.bonusGmxInFeeGmx;\n    const divisor = multiplierPointsAmount.add(stakedTokens);\n    if (divisor.gt(0)) {\n      maxUnstakeableGmx = availableTokens.mul(stakedTokens).div(divisor);\n    }\n  }\n\n  const showStakeGmxModal = () => {\n    if (!isGmxTransferEnabled) {\n      helperToast.error(t`$AMX transfers not yet enabled`);\n      return;\n    }\n\n    setIsStakeModalVisible(true);\n    setStakeModalTitle(t`Stake $AMX`);\n    setStakeModalMaxAmount(processedData.gmxBalance);\n    // console.log(\"---shark processedData.gmxBalance: \", processedData.gmxBalance);\n    setStakeValue(\"\");\n    setStakingTokenSymbol(\"$AMX\");\n    setStakingTokenAddress(gmxAddress);\n    setStakingFarmAddress(stakedGmxTrackerAddress);\n    setStakeMethodName(\"stakeGmx\");\n  };\n\n  const showStakeEsGmxModal = () => {\n    setIsStakeModalVisible(true);\n    setStakeModalTitle(t`Stake esAMX`);\n    setStakeModalMaxAmount(processedData.esGmxBalance);\n    setStakeValue(\"\");\n    setStakingTokenSymbol(\"esAMX\");\n    setStakingTokenAddress(esGmxAddress);\n    setStakingFarmAddress(AddressZero);\n    setStakeMethodName(\"stakeEsGmx\");\n  };\n\n  const showGmxVesterDepositModal = () => {\n    let remainingVestableAmount = vestingData.gmxVester.maxVestableAmount.sub(vestingData.gmxVester.vestedAmount);\n    if (processedData.esGmxBalance.lt(remainingVestableAmount)) {\n      remainingVestableAmount = processedData.esGmxBalance;\n    }\n\n    setIsVesterDepositModalVisible(true);\n    setVesterDepositTitle(t`$AMX Vault`);\n    setVesterDepositStakeTokenLabel(\"staked $AMX + esAMX + Multiplier Points\");\n    setVesterDepositMaxAmount(remainingVestableAmount);\n    setVesterDepositBalance(processedData.esGmxBalance);\n    setVesterDepositEscrowedBalance(vestingData.gmxVester.escrowedBalance);\n    setVesterDepositVestedAmount(vestingData.gmxVester.vestedAmount);\n    setVesterDepositMaxVestableAmount(vestingData.gmxVester.maxVestableAmount);\n    setVesterDepositAverageStakedAmount(vestingData.gmxVester.averageStakedAmount);\n    setVesterDepositReserveAmount(vestingData.gmxVester.pairAmount);\n    setVesterDepositMaxReserveAmount(totalRewardTokens);\n    setVesterDepositValue(\"\");\n    setVesterDepositAddress(gmxVesterAddress);\n  };\n\n  const showGlpVesterDepositModal = () => {\n    let remainingVestableAmount = vestingData.glpVester.maxVestableAmount.sub(vestingData.glpVester.vestedAmount);\n    if (processedData.esGmxBalance.lt(remainingVestableAmount)) {\n      remainingVestableAmount = processedData.esGmxBalance;\n    }\n\n    setIsVesterDepositModalVisible(true);\n    setVesterDepositTitle(t`$DLP Vault`);\n    setVesterDepositStakeTokenLabel(\"staked $DLP\");\n    setVesterDepositMaxAmount(remainingVestableAmount);\n    setVesterDepositBalance(processedData.esGmxBalance);\n    setVesterDepositEscrowedBalance(vestingData.glpVester.escrowedBalance);\n    setVesterDepositVestedAmount(vestingData.glpVester.vestedAmount);\n    setVesterDepositMaxVestableAmount(vestingData.glpVester.maxVestableAmount);\n    setVesterDepositAverageStakedAmount(vestingData.glpVester.averageStakedAmount);\n    setVesterDepositReserveAmount(vestingData.glpVester.pairAmount);\n    setVesterDepositMaxReserveAmount(processedData.glpBalance);\n    setVesterDepositValue(\"\");\n    setVesterDepositAddress(glpVesterAddress);\n    console.log(\"---shark showGlpVesterDepositModal\");\n  };\n\n  const showGmxVesterWithdrawModal = () => {\n    if (!vestingData || !vestingData.gmxVesterVestedAmount || vestingData.gmxVesterVestedAmount.eq(0)) {\n      helperToast.error(t`You have not deposited any tokens for vesting.`);\n      return;\n    }\n\n    setIsVesterWithdrawModalVisible(true);\n    setVesterWithdrawTitle(t`Withdraw from $AMX Vault`);\n    setVesterWithdrawAddress(gmxVesterAddress);\n  };\n\n  const showGlpVesterWithdrawModal = () => {\n    if (!vestingData || !vestingData.glpVesterVestedAmount || vestingData.glpVesterVestedAmount.eq(0)) {\n      helperToast.error(t`You have not deposited any tokens for vesting.`);\n      return;\n    }\n\n    setIsVesterWithdrawModalVisible(true);\n    setVesterWithdrawTitle(t`Withdraw from $DLP Vault`);\n    setVesterWithdrawAddress(glpVesterAddress);\n  };\n\n  const showUnstakeGmxModal = () => {\n    if (!isGmxTransferEnabled) {\n      helperToast.error(t`$AMX transfers not yet enabled`);\n      return;\n    }\n    setIsUnstakeModalVisible(true);\n    setUnstakeModalTitle(t`Unstake $AMX`);\n    let maxAmount = processedData.gmxInStakedGmx;\n    if (\n      processedData.gmxInStakedGmx &&\n      vestingData &&\n      vestingData.gmxVesterPairAmount.gt(0) &&\n      maxUnstakeableGmx &&\n      maxUnstakeableGmx.lt(processedData.gmxInStakedGmx)\n    ) {\n      maxAmount = maxUnstakeableGmx;\n    }\n    setUnstakeModalMaxAmount(maxAmount);\n    setUnstakeModalReservedAmount(vestingData.gmxVesterPairAmount);\n    setUnstakeValue(\"\");\n    setUnstakingTokenSymbol(\"$AMX\");\n    setUnstakeMethodName(\"unstakeGmx\");\n  };\n\n  const showUnstakeEsGmxModal = () => {\n    setIsUnstakeModalVisible(true);\n    setUnstakeModalTitle(t`Unstake esAMX`);\n    let maxAmount = processedData.esGmxInStakedGmx;\n    if (\n      processedData.esGmxInStakedGmx &&\n      vestingData &&\n      vestingData.gmxVesterPairAmount.gt(0) &&\n      maxUnstakeableGmx &&\n      maxUnstakeableGmx.lt(processedData.esGmxInStakedGmx)\n    ) {\n      maxAmount = maxUnstakeableGmx;\n    }\n    setUnstakeModalMaxAmount(maxAmount);\n    setUnstakeModalReservedAmount(vestingData.gmxVesterPairAmount);\n    setUnstakeValue(\"\");\n    setUnstakingTokenSymbol(\"esAMX\");\n    setUnstakeMethodName(\"unstakeEsGmx\");\n  };\n\n  const renderMultiplierPointsLabel = useCallback(() => {\n    return t`Multiplier Points APR`;\n  }, []);\n\n  const renderMultiplierPointsValue = useCallback(() => {\n    return (\n      <Tooltip\n        handle={`100.00%`}\n        position=\"right-bottom\"\n        renderContent={() => {\n          return (\n            <Trans>\n              Boost your rewards with Multiplier Points.&nbsp;\n              <a href=\"https://amxdex.gitbook.io/amxdex/rewards#multiplier-points\" rel=\"noreferrer\" target=\"_blank\">\n                More info\n              </a>\n              .\n            </Trans>\n          );\n        }}\n      />\n    );\n  }, []);\n\n  let earnMsg;\n  if (totalRewardTokensAndGlp && totalRewardTokensAndGlp.gt(0)) {\n    let gmxAmountStr;\n    if (processedData.gmxInStakedGmx && processedData.gmxInStakedGmx.gt(0)) {\n      gmxAmountStr = formatAmount(processedData.gmxInStakedGmx, 18, 2, true) + \" $AMX\";\n    }\n    let esGmxAmountStr;\n    if (processedData.esGmxInStakedGmx && processedData.esGmxInStakedGmx.gt(0)) {\n      esGmxAmountStr = formatAmount(processedData.esGmxInStakedGmx, 18, 2, true) + \" esAMX\";\n    }\n    let mpAmountStr;\n    if (processedData.bonusGmxInFeeGmx && processedData.bnGmxInFeeGmx.gt(0)) {\n      mpAmountStr = formatAmount(processedData.bnGmxInFeeGmx, 18, 2, true) + \" MP\";\n    }\n    let glpStr;\n    if (processedData.glpBalance && processedData.glpBalance.gt(0)) {\n      glpStr = formatAmount(processedData.glpBalance, 18, 2, true) + \" $DLP\";\n    }\n    const amountStr = [gmxAmountStr, esGmxAmountStr, mpAmountStr, glpStr].filter((s) => s).join(\", \");\n    earnMsg = (\n      <div>\n        <Trans>\n          You are earning {nativeTokenSymbol} rewards with {formatAmount(totalRewardTokensAndGlp, 18, 2, true)} tokens.\n          <br />\n          Tokens: {amountStr}.\n        </Trans>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"default-container page-layout\">\n      <StakeModal\n        isVisible={isStakeModalVisible}\n        setIsVisible={setIsStakeModalVisible}\n        chainId={chainId}\n        title={stakeModalTitle}\n        maxAmount={stakeModalMaxAmount}\n        value={stakeValue}\n        setValue={setStakeValue}\n        active={active}\n        account={account}\n        library={library}\n        stakingTokenSymbol={stakingTokenSymbol}\n        stakingTokenAddress={stakingTokenAddress}\n        farmAddress={stakingFarmAddress}\n        rewardRouterAddress={rewardRouterAddress}\n        stakeMethodName={stakeMethodName}\n        hasMultiplierPoints={hasMultiplierPoints}\n        setPendingTxns={setPendingTxns}\n        nativeTokenSymbol={nativeTokenSymbol}\n        wrappedTokenSymbol={wrappedTokenSymbol}\n      />\n      <UnstakeModal\n        setPendingTxns={setPendingTxns}\n        isVisible={isUnstakeModalVisible}\n        setIsVisible={setIsUnstakeModalVisible}\n        chainId={chainId}\n        title={unstakeModalTitle}\n        maxAmount={unstakeModalMaxAmount}\n        reservedAmount={unstakeModalReservedAmount}\n        value={unstakeValue}\n        setValue={setUnstakeValue}\n        library={library}\n        unstakingTokenSymbol={unstakingTokenSymbol}\n        rewardRouterAddress={rewardRouterAddress}\n        unstakeMethodName={unstakeMethodName}\n        multiplierPointsAmount={multiplierPointsAmount}\n        bonusGmxInFeeGmx={bonusGmxInFeeGmx}\n      />\n      <VesterDepositModal\n        isVisible={isVesterDepositModalVisible}\n        setIsVisible={setIsVesterDepositModalVisible}\n        chainId={chainId}\n        title={vesterDepositTitle}\n        stakeTokenLabel={vesterDepositStakeTokenLabel}\n        maxAmount={vesterDepositMaxAmount}\n        balance={vesterDepositBalance}\n        escrowedBalance={vesterDepositEscrowedBalance}\n        vestedAmount={vesterDepositVestedAmount}\n        averageStakedAmount={vesterDepositAverageStakedAmount}\n        maxVestableAmount={vesterDepositMaxVestableAmount}\n        reserveAmount={vesterDepositReserveAmount}\n        maxReserveAmount={vesterDepositMaxReserveAmount}\n        value={vesterDepositValue}\n        setValue={setVesterDepositValue}\n        library={library}\n        vesterAddress={vesterDepositAddress}\n        setPendingTxns={setPendingTxns}\n      />\n      <VesterWithdrawModal\n        isVisible={isVesterWithdrawModalVisible}\n        setIsVisible={setIsVesterWithdrawModalVisible}\n        vesterAddress={vesterWithdrawAddress}\n        chainId={chainId}\n        title={vesterWithdrawTitle}\n        library={library}\n        setPendingTxns={setPendingTxns}\n      />\n      <CompoundModal\n        active={active}\n        account={account}\n        setPendingTxns={setPendingTxns}\n        isVisible={isCompoundModalVisible}\n        setIsVisible={setIsCompoundModalVisible}\n        rewardRouterAddress={rewardRouterAddress}\n        totalVesterRewards={processedData.totalVesterRewards}\n        wrappedTokenSymbol={wrappedTokenSymbol}\n        nativeTokenSymbol={nativeTokenSymbol}\n        library={library}\n        chainId={chainId}\n      />\n      <ClaimModal\n        active={active}\n        account={account}\n        setPendingTxns={setPendingTxns}\n        isVisible={isClaimModalVisible}\n        setIsVisible={setIsClaimModalVisible}\n        rewardRouterAddress={rewardRouterAddress}\n        totalVesterRewards={processedData.totalVesterRewards}\n        wrappedTokenSymbol={wrappedTokenSymbol}\n        nativeTokenSymbol={nativeTokenSymbol}\n        library={library}\n        chainId={chainId}\n      />\n      <div className=\"section-title-block\">\n        <div className=\"section-title-icon\"></div>\n        <div className=\"section-title-content\">\n          <div className=\"Page-title\">\n            <Trans>Earn</Trans>\n          </div>\n          <div className=\"Page-description\">\n            <Trans>\n              Stake $AMX and $DLP to earn rewards.\n            </Trans>\n          </div>\n          {earnMsg && <div className=\"Page-description\">{earnMsg}</div>}\n        </div>\n      </div>\n      <div className=\"StakeV2-content\">\n        <div className=\"StakeV2-cards\">\n          <div className=\"App-card StakeV2-gmx-card\">\n            <div className=\"App-card-title\">$AMX</div>\n            <div className=\"App-card-divider\"></div>\n            <div className=\"App-card-content\">\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Price</Trans>\n                </div>\n                <div>\n                  {!gmxPrice && \"...\"}\n                  {gmxPrice && (\n                    <Tooltip\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      handle={\"$\" + formatAmount(gmxPrice, USD_DECIMALS, 2, true)}\n                      renderContent={() => (\n                        <>\n                          <StatsTooltipRow\n                            label={t`Price on Polygon`}\n                            value={formatAmount(gmxPriceFromPolygon, USD_DECIMALS, 2, true)}\n                          />\n                          {/* <StatsTooltipRow\n                            label={t`Price on Arbitrum`}\n                            value={formatAmount(gmxPriceFromArbitrum, USD_DECIMALS, 2, true)}\n                          /> */}\n                        </>\n                      )}\n                    />\n                  )}\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Wallet</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"gmxBalance\", 18, 2, true)} $AMX ($\n                  {formatKeyAmount(processedData, \"gmxBalanceUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Staked</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"gmxInStakedGmx\", 18, 2, true)} $AMX ($\n                  {formatKeyAmount(processedData, \"gmxInStakedGmxUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>APR</Trans>\n                </div>\n                <div>\n                  <Tooltip\n                    handle={`${formatKeyAmount(processedData, \"gmxAprTotalWithBoost\", 2, 2, true)}%`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <>\n                          <StatsTooltipRow\n                            label=\"Escrowed $AMX APR\"\n                            showDollar={false}\n                            value={`${formatKeyAmount(processedData, \"gmxAprForEsGmx\", 2, 2, true)}%`}\n                          />\n                          {(!processedData.gmxBoostAprForNativeToken ||\n                            processedData.gmxBoostAprForNativeToken.eq(0)) && (\n                            <StatsTooltipRow\n                              label={`${nativeTokenSymbol} APR`}\n                              showDollar={false}\n                              value={`${formatKeyAmount(processedData, \"gmxAprForNativeToken\", 2, 2, true)}%`}\n                            />\n                          )}\n                          {processedData.gmxBoostAprForNativeToken && processedData.gmxBoostAprForNativeToken.gt(0) && (\n                            <div>\n                              <br />\n\n                              <StatsTooltipRow\n                                label={`${nativeTokenSymbol} Base APR`}\n                                showDollar={false}\n                                value={`${formatKeyAmount(processedData, \"gmxAprForNativeToken\", 2, 2, true)}%`}\n                              />\n                              <StatsTooltipRow\n                                label={`${nativeTokenSymbol} Boosted APR`}\n                                showDollar={false}\n                                value={`${formatKeyAmount(processedData, \"gmxBoostAprForNativeToken\", 2, 2, true)}%`}\n                              />\n                              <div className=\"Tooltip-divider\" />\n                              <StatsTooltipRow\n                                label={`${nativeTokenSymbol} Total APR`}\n                                showDollar={false}\n                                value={`${formatKeyAmount(\n                                  processedData,\n                                  \"gmxAprForNativeTokenWithBoost\",\n                                  2,\n                                  2,\n                                  true\n                                )}%`}\n                              />\n\n                              <br />\n\n                              <Trans>The Boosted APR is from your staked Multiplier Points.</Trans>\n                            </div>\n                          )}\n                          <div>\n                            <br />\n                            <Trans>\n                              APRs are updated weekly on Wednesday and will depend on the fees collected for the week.\n                            </Trans>\n                          </div>\n                        </>\n                      );\n                    }}\n                  />\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Rewards</Trans>\n                </div>\n                <div>\n                  <Tooltip\n                    handle={`$${formatKeyAmount(processedData, \"totalGmxRewardsUsd\", USD_DECIMALS, 2, true)}`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <>\n                          <StatsTooltipRow\n                            label={`${nativeTokenSymbol} (${wrappedTokenSymbol})`}\n                            value={`${formatKeyAmount(\n                              processedData,\n                              \"feeGmxTrackerRewards\",\n                              18,\n                              4\n                            )} ($${formatKeyAmount(processedData, \"feeGmxTrackerRewardsUsd\", USD_DECIMALS, 2, true)})`}\n                            showDollar={false}\n                          />\n                          <StatsTooltipRow\n                            label=\"Escrowed $AMX\"\n                            value={`${formatKeyAmount(\n                              processedData,\n                              \"stakedGmxTrackerRewards\",\n                              18,\n                              4\n                            )} ($${formatKeyAmount(\n                              processedData,\n                              \"stakedGmxTrackerRewardsUsd\",\n                              USD_DECIMALS,\n                              2,\n                              true\n                            )})`}\n                            showDollar={false}\n                          />\n                        </>\n                      );\n                    }}\n                  />\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">{renderMultiplierPointsLabel()}</div>\n                <div>{renderMultiplierPointsValue()}</div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Boost Percentage</Trans>\n                </div>\n                <div>\n                  <Tooltip\n                    handle={`${formatAmount(processedData.boostBasisPoints, 2, 2, false)}%`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <div>\n                          <Trans>\n                            You are earning {formatAmount(processedData.boostBasisPoints, 2, 2, false)}% more{\" \"}\n                            {nativeTokenSymbol} rewards using{\" \"}\n                            {formatAmount(processedData.bnGmxInFeeGmx, 18, 4, 2, true)} Staked Multiplier Points.\n                          </Trans>\n                          <br />\n                          <br />\n                          <Trans>Use the \"Compound\" button to stake your Multiplier Points.</Trans>\n                        </div>\n                      );\n                    }}\n                  />\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total Staked</Trans>\n                </div>\n                <div>\n                  {!totalGmxStaked && \"...\"}\n                  \n                  {/* {totalGmxStaked && (\n                    <Tooltip\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      handle={\n                        formatAmount(totalGmxStaked, 18, 0, true) +\n                        \" $AMX\" +\n                        ` ($${formatAmount(stakedGmxSupplyUsd, USD_DECIMALS, 0, true)})`\n                      }\n                      renderContent={() => (\n                        <StatsTooltip\n                          showDollar={false}\n                          title={t`Staked`}\n                          maticValue={maticGmxStaked}\n                          arbitrumValue={arbitrumGmxStaked}\n                          total={totalGmxStaked}\n                          decimalsForConversion={18}\n                          symbol=\"$AMX\"\n                        />\n                      )}\n                    />\n                  )} */}\n                  { formatAmount(totalGmxStaked, 18, 0, true) +\n                        \" $AMX\" +\n                        ` ($${formatAmount(stakedGmxSupplyUsd, USD_DECIMALS, 0, true)})` }\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total Supply</Trans>\n                </div>\n                {!totalGmxSupply && \"...\"}\n                {totalGmxSupply && (\n                  <div>\n                    {formatAmount(totalGmxSupply, 18, 0, true)} $AMX ($\n                    {formatAmount(totalSupplyUsd, USD_DECIMALS, 0, true)})\n                  </div>\n                )}\n              </div>\n              <div className=\"App-card-divider\" />\n              <div className=\"App-card-options\">\n                <Link className=\"App-button-option App-card-option\" to=\"/buy_amx\">\n                  <Trans>Buy $AMX</Trans>\n                </Link>\n                {active && (\n                  <button className=\"App-button-option App-card-option\" onClick={() => showStakeGmxModal()}>\n                    <Trans>Stake</Trans>\n                  </button>\n                )}\n                {active && (\n                  <button className=\"App-button-option App-card-option\" onClick={() => showUnstakeGmxModal()}>\n                    <Trans>Unstake</Trans>\n                  </button>\n                )}\n                {active && (\n                  <Link className=\"App-button-option App-card-option\" to=\"/begin_account_transfer\">\n                    <Trans>Transfer Account</Trans>\n                  </Link>\n                )}\n              </div>\n            </div>\n          </div>\n          <div className=\"App-card primary StakeV2-total-rewards-card\">\n            <div className=\"App-card-title\">\n              <Trans>Total Rewards</Trans>\n            </div>\n            <div className=\"App-card-divider\"></div>\n            <div className=\"App-card-content\">\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  {nativeTokenSymbol} ({wrappedTokenSymbol})\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"totalNativeTokenRewards\", 18, 4, true)} ($\n                  {formatKeyAmount(processedData, \"totalNativeTokenRewardsUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">$AMX</div>\n                <div>\n                  {formatKeyAmount(processedData, \"totalVesterRewards\", 18, 4, true)} ($\n                  {formatKeyAmount(processedData, \"totalVesterRewardsUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Escrowed $AMX</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"totalEsGmxRewards\", 18, 4, true)} ($\n                  {formatKeyAmount(processedData, \"totalEsGmxRewardsUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Multiplier Points</Trans>\n                </div>\n                <div>{formatKeyAmount(processedData, \"bonusGmxTrackerRewards\", 18, 4, true)}</div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Staked Multiplier Points</Trans>\n                </div>\n                <div>{formatKeyAmount(processedData, \"bnGmxInFeeGmx\", 18, 4, true)}</div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total</Trans>\n                </div>\n                <div>${formatKeyAmount(processedData, \"totalRewardsUsd\", USD_DECIMALS, 2, true)}</div>\n              </div>\n              <div className=\"App-card-bottom-placeholder\">\n                <div className=\"App-card-divider\"></div>\n                <div className=\"App-card-options\">\n                  {active && (\n                    <button className=\"App-button-option App-card-option\">\n                      <Trans>Compound</Trans>\n                    </button>\n                  )}\n                  {active && (\n                    <button className=\"App-button-option App-card-option\">\n                      <Trans>Claim</Trans>\n                    </button>\n                  )}\n                  {!active && (\n                    <button className=\"App-button-option App-card-option\" onClick={() => connectWallet()}>\n                      Connect Wallet\n                    </button>\n                  )}\n                </div>\n              </div>\n              <div className=\"App-card-bottom\">\n                <div className=\"App-card-divider\"></div>\n                <div className=\"App-card-options\">\n                  {active && (\n                    <button\n                      className=\"App-button-option App-card-option\"\n                      onClick={() => setIsCompoundModalVisible(true)}\n                    >\n                      <Trans>Compound</Trans>\n                    </button>\n                  )}\n                  {active && (\n                    <button className=\"App-button-option App-card-option\" onClick={() => setIsClaimModalVisible(true)}>\n                      <Trans>Claim</Trans>\n                    </button>\n                  )}\n                  {!active && (\n                    <button className=\"App-button-option App-card-option\" onClick={() => connectWallet()}>\n                      <Trans>Connect Wallet</Trans>\n                    </button>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"App-card\">\n            <div className=\"App-card-title\">$DLP ({chainName})</div>\n            <div className=\"App-card-divider\"></div>\n            <div className=\"App-card-content\">\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Price</Trans>\n                </div>\n                <div>${formatKeyAmount(processedData, \"glpPrice\", USD_DECIMALS, 3, true)}</div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Wallet</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"glpBalance\", GLP_DECIMALS, 2, true)} $DLP ($\n                  {formatKeyAmount(processedData, \"glpBalanceUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Staked</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"glpBalance\", GLP_DECIMALS, 2, true)} $DLP ($\n                  {formatKeyAmount(processedData, \"glpBalanceUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>APR</Trans>\n                </div>\n                <div>\n                  <Tooltip\n                    handle={`${formatKeyAmount(processedData, \"glpAprTotal\", 2, 2, true)}%`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <>\n                          <StatsTooltipRow\n                            label={`${nativeTokenSymbol} (${wrappedTokenSymbol}) APR`}\n                            value={`${formatKeyAmount(processedData, \"glpAprForNativeToken\", 2, 2, true)}%`}\n                            showDollar={false}\n                          />\n                          <StatsTooltipRow\n                            label=\"Escrowed $AMX APR\"\n                            value={`${formatKeyAmount(processedData, \"glpAprForEsGmx\", 2, 2, true)}%`}\n                            showDollar={false}\n                          />\n                          <br />\n\n                          <Trans>\n                            APRs are updated weekly on Wednesday and will depend on the fees collected for the week.\n                          </Trans>\n                        </>\n                      );\n                    }}\n                  />\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Rewards</Trans>\n                </div>\n                <div>\n                  <Tooltip\n                    handle={`$${formatKeyAmount(processedData, \"totalGlpRewardsUsd\", USD_DECIMALS, 2, true)}`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <>\n                          <StatsTooltipRow\n                            label={`${nativeTokenSymbol} (${wrappedTokenSymbol})`}\n                            value={`${formatKeyAmount(\n                              processedData,\n                              \"feeGlpTrackerRewards\",\n                              18,\n                              4\n                            )} ($${formatKeyAmount(processedData, \"feeGlpTrackerRewardsUsd\", USD_DECIMALS, 2, true)})`}\n                            showDollar={false}\n                          />\n                          <StatsTooltipRow\n                            label=\"Escrowed $AMX\"\n                            value={`${formatKeyAmount(\n                              processedData,\n                              \"stakedGlpTrackerRewards\",\n                              18,\n                              4\n                            )} ($${formatKeyAmount(\n                              processedData,\n                              \"stakedGlpTrackerRewardsUsd\",\n                              USD_DECIMALS,\n                              2,\n                              true\n                            )})`}\n                            showDollar={false}\n                          />\n                        </>\n                      );\n                    }}\n                  />\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total Staked</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"glpSupply\", 18, 2, true)} $DLP ($\n                  {formatKeyAmount(processedData, \"glpSupplyUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total Supply</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"glpSupply\", 18, 2, true)} $DLP ($\n                  {formatKeyAmount(processedData, \"glpSupplyUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-options\">\n                <Link className=\"App-button-option App-card-option\" to=\"/buy_dlp\">\n                  <Trans>Buy $DLP</Trans>\n                </Link>\n                <Link className=\"App-button-option App-card-option\" to=\"/buy_dlp#redeem\">\n                  <Trans>Sell $DLP</Trans>\n                </Link>\n                {/* {hasInsurance && (\n                  <a\n                    className=\"App-button-option App-card-option\"\n                    href=\"https://app.insurace.io/Insurance/Cart?id=124&referrer=545066382753150189457177837072918687520318754040\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    <Trans>Purchase Insurance</Trans>\n                  </a>\n                )} */}\n              </div>\n            </div>\n          </div>\n          <div className=\"App-card\">\n            <div className=\"App-card-title\">\n              <Trans>Escrowed $AMX</Trans>\n            </div>\n            <div className=\"App-card-divider\"></div>\n            <div className=\"App-card-content\">\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Price</Trans>\n                </div>\n                <div>${formatAmount(gmxPrice, USD_DECIMALS, 2, true)}</div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Wallet</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"esGmxBalance\", 18, 2, true)} esAMX ($\n                  {formatKeyAmount(processedData, \"esGmxBalanceUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Staked</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"esGmxInStakedGmx\", 18, 2, true)} esAMX ($\n                  {formatKeyAmount(processedData, \"esGmxInStakedGmxUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>APR</Trans>\n                </div>\n                <div>\n                  <div>\n                    <Tooltip\n                      handle={`${formatKeyAmount(processedData, \"gmxAprTotalWithBoost\", 2, 2, true)}%`}\n                      position=\"right-bottom\"\n                      renderContent={() => {\n                        return (\n                          <>\n                            <StatsTooltipRow\n                              label={`${nativeTokenSymbol} (${wrappedTokenSymbol}) Base APR`}\n                              value={`${formatKeyAmount(processedData, \"gmxAprForNativeToken\", 2, 2, true)}%`}\n                              showDollar={false}\n                            />\n                            {processedData.bnGmxInFeeGmx && processedData.bnGmxInFeeGmx.gt(0) && (\n                              <StatsTooltipRow\n                                label={`${nativeTokenSymbol} (${wrappedTokenSymbol}) Boosted APR`}\n                                value={`${formatKeyAmount(processedData, \"gmxBoostAprForNativeToken\", 2, 2, true)}%`}\n                                showDollar={false}\n                              />\n                            )}\n                            <StatsTooltipRow\n                              label=\"Escrowed $AMX APR\"\n                              value={`${formatKeyAmount(processedData, \"gmxAprForEsGmx\", 2, 2, true)}%`}\n                              showDollar={false}\n                            />\n                          </>\n                        );\n                      }}\n                    />\n                  </div>\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">{renderMultiplierPointsLabel()}</div>\n                <div>{renderMultiplierPointsValue()}</div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total Staked</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"stakedEsGmxSupply\", 18, 0, true)} esAMX ($\n                  {formatKeyAmount(processedData, \"stakedEsGmxSupplyUsd\", USD_DECIMALS, 0, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total Supply</Trans>\n                </div>\n                <div>\n                  {formatAmount(esGmxSupply, 18, 0, true)} esAMX (${formatAmount(esGmxSupplyUsd, USD_DECIMALS, 0, true)}\n                  )\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-options\">\n                {active && (\n                  <button className=\"App-button-option App-card-option\" onClick={() => showStakeEsGmxModal()}>\n                    <Trans>Stake</Trans>\n                  </button>\n                )}\n                {active && (\n                  <button className=\"App-button-option App-card-option\" onClick={() => showUnstakeEsGmxModal()}>\n                    <Trans>Unstake</Trans>\n                  </button>\n                )}\n                {!active && (\n                  <button className=\"App-button-option App-card-option\" onClick={() => connectWallet()}>\n                    <Trans> Connect Wallet</Trans>\n                  </button>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div>\n        <div className=\"Tab-title-section\">\n          <div className=\"Page-title\">\n            <Trans>Vest</Trans>\n          </div>\n          <div className=\"Page-description\">\n            <Trans>\n              Convert esAMX tokens to $AMX tokens.\n              <br />\n              Please read the{\" \"}\n              <a href=\"https://amxdex.gitbook.io/amxdex/how-it-works/rewards\" target=\"_blank\" rel=\"noopener noreferrer\">\n                vesting details\n              </a>{\" \"}\n              before using the vaults.\n            </Trans>\n          </div>\n        </div>\n        <div>\n          <div className=\"StakeV2-cards\">\n            <div className=\"App-card StakeV2-gmx-card\">\n              <div className=\"App-card-title\">\n                <Trans>$AMX Vault</Trans>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-content\">\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Staked Tokens</Trans>\n                  </div>\n                  <div>\n                    <Tooltip\n                      handle={formatAmount(totalRewardTokens, 18, 2, true)}\n                      position=\"right-bottom\"\n                      renderContent={() => {\n                        return (\n                          <>\n                            <StatsTooltipRow\n                              showDollar={false}\n                              label=\"$AMX\"\n                              value={formatAmount(processedData.gmxInStakedGmx, 18, 2, true)}\n                            />\n\n                            <StatsTooltipRow\n                              showDollar={false}\n                              label=\"esAMX\"\n                              value={formatAmount(processedData.esGmxInStakedGmx, 18, 2, true)}\n                            />\n                            <StatsTooltipRow\n                              showDollar={false}\n                              label=\"Multiplier Points\"\n                              value={formatAmount(processedData.bnGmxInFeeGmx, 18, 2, true)}\n                            />\n                          </>\n                        );\n                      }}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Reserved for Vesting</Trans>\n                  </div>\n                  <div>\n                    {formatKeyAmount(vestingData, \"gmxVesterPairAmount\", 18, 2, true)} /{\" \"}\n                    {formatAmount(totalRewardTokens, 18, 2, true)}\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Vesting Status</Trans>\n                  </div>\n                  <div>\n                    <Tooltip\n                      handle={`${formatKeyAmount(vestingData, \"gmxVesterClaimSum\", 18, 4, true)} / ${formatKeyAmount(\n                        vestingData,\n                        \"gmxVesterVestedAmount\",\n                        18,\n                        4,\n                        true\n                      )}`}\n                      position=\"right-bottom\"\n                      renderContent={() => {\n                        return (\n                          <div>\n                            <Trans>\n                              {formatKeyAmount(vestingData, \"gmxVesterClaimSum\", 18, 4, true)} tokens have been\n                              converted to $AMX from the{\" \"}\n                              {formatKeyAmount(vestingData, \"gmxVesterVestedAmount\", 18, 4, true)} esAMX deposited for\n                              vesting.\n                            </Trans>\n                          </div>\n                        );\n                      }}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Claimable</Trans>\n                  </div>\n                  <div>\n                    <Tooltip\n                      handle={`${formatKeyAmount(vestingData, \"gmxVesterClaimable\", 18, 4, true)} $AMX`}\n                      position=\"right-bottom\"\n                      renderContent={() => (\n                        <Trans>\n                          {formatKeyAmount(vestingData, \"gmxVesterClaimable\", 18, 4, true)} $AMX tokens can be claimed,\n                          use the options under the Total Rewards section to claim them.\n                        </Trans>\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-divider\"></div>\n                <div className=\"App-card-options\">\n                  {!active && (\n                    <button className=\"App-button-option App-card-option\" onClick={() => connectWallet()}>\n                      <Trans>Connect Wallet</Trans>\n                    </button>\n                  )}\n                  {active && (\n                    <button className=\"App-button-option App-card-option\" onClick={() => showGmxVesterDepositModal()}>\n                      <Trans>Deposit</Trans>\n                    </button>\n                  )}\n                  {active && (\n                    <button className=\"App-button-option App-card-option\" onClick={() => showGmxVesterWithdrawModal()}>\n                      <Trans>Withdraw</Trans>\n                    </button>\n                  )}\n                </div>\n              </div>\n            </div>\n            <div className=\"App-card StakeV2-gmx-card\">\n              <div className=\"App-card-title\">\n                <Trans>$DLP Vault</Trans>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-content\">\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Staked Tokens</Trans>\n                  </div>\n                  <div>{formatAmount(processedData.glpBalance, 18, 2, true)} $DLP</div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Reserved for Vesting</Trans>\n                  </div>\n                  <div>\n                    {formatKeyAmount(vestingData, \"glpVesterPairAmount\", 18, 2, true)} /{\" \"}\n                    {formatAmount(processedData.glpBalance, 18, 2, true)}\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Vesting Status</Trans>\n                  </div>\n                  <div>\n                    <Tooltip\n                      handle={`${formatKeyAmount(vestingData, \"glpVesterClaimSum\", 18, 4, true)} / ${formatKeyAmount(\n                        vestingData,\n                        \"glpVesterVestedAmount\",\n                        18,\n                        4,\n                        true\n                      )}`}\n                      position=\"right-bottom\"\n                      renderContent={() => {\n                        return (\n                          <div>\n                            <Trans>\n                              {formatKeyAmount(vestingData, \"glpVesterClaimSum\", 18, 4, true)} tokens have been\n                              converted to $AMX from the{\" \"}\n                              {formatKeyAmount(vestingData, \"glpVesterVestedAmount\", 18, 4, true)} esAMX deposited for\n                              vesting.\n                            </Trans>\n                          </div>\n                        );\n                      }}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Claimable</Trans>\n                  </div>\n                  <div>\n                    <Tooltip\n                      handle={`${formatKeyAmount(vestingData, \"glpVesterClaimable\", 18, 4, true)} $AMX`}\n                      position=\"right-bottom\"\n                      renderContent={() => (\n                        <Trans>\n                          {formatKeyAmount(vestingData, \"glpVesterClaimable\", 18, 4, true)} $AMX tokens can be claimed,\n                          use the options under the Total Rewards section to claim them.\n                        </Trans>\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-divider\"></div>\n                <div className=\"App-card-options\">\n                  {!active && (\n                    <button className=\"App-button-option App-card-option\" onClick={() => connectWallet()}>\n                      <Trans>Connect Wallet</Trans>\n                    </button>\n                  )}\n                  {active && (\n                    <button className=\"App-button-option App-card-option\" onClick={() => showGlpVesterDepositModal()}>\n                      <Trans>Deposit</Trans>\n                    </button>\n                  )}\n                  {active && (\n                    <button className=\"App-button-option App-card-option\" onClick={() => showGlpVesterWithdrawModal()}>\n                      <Trans>Withdraw</Trans>\n                    </button>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport { POLYGON, getConstant } from \"config/chains\";\n\nimport StakeV1 from \"./StakeV1\";\nimport StakeV2 from \"./StakeV2\";\n\nexport default function Stake(props) {\n  const chainId = POLYGON;\n  const isV2 = getConstant(chainId, \"v2\");\n  return isV2 ? <StakeV2 {...props} /> : <StakeV1 {...props} />;\n}\n","import React from \"react\";\n\nimport cx from \"classnames\";\n\nimport \"./Tab.css\";\n\nexport default function Tab(props) {\n  const { options, option, setOption, onChange, type = \"block\", className, optionLabels, icons } = props;\n  const onClick = (opt) => {\n    if (setOption) {\n      setOption(opt);\n    }\n    if (onChange) {\n      onChange(opt);\n    }\n  };\n\n  return (\n    <div className={cx(\"Tab\", type, className)}>\n      {options.map((opt) => {\n        const label = optionLabels && optionLabels[opt] ? optionLabels[opt] : opt;\n        return (\n          <div className={cx(\"Tab-option\", \"muted\", { active: opt === option })} onClick={() => onClick(opt)} key={opt}>\n            {icons && icons[opt] && <img className=\"Tab-option-icon\" src={icons[opt]} alt={option} />}\n            {label}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import { useEffect, useMemo } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nexport default function Portal({ children }) {\n  const root = document.body;\n\n  const el = useMemo(() => document.createElement(\"div\"), []);\n\n  useEffect(() => {\n    root.appendChild(el);\n    return () => root.removeChild(el);\n  }, [root, el]);\n\n  return createPortal(children, el);\n}\n","import { useCallback, useRef, useState } from \"react\";\nimport cx from \"classnames\";\n\nimport \"./Tooltip.css\";\nimport { IS_TOUCH } from \"config/ui\";\nimport Portal from \"../Common/Portal\";\n\nconst OPEN_DELAY = 0;\nconst CLOSE_DELAY = 100;\n\nexport default function TooltipWithPortal(props) {\n  const [visible, setVisible] = useState(false);\n  const [coords, setCoords] = useState({});\n  const [tooltipWidth, setTooltipWidth] = useState();\n  const intervalCloseRef = useRef(null);\n  const intervalOpenRef = useRef(null);\n\n  const position = props.position ?? \"left-bottom\";\n  const trigger = props.trigger ?? \"hover\";\n  const handlerRef = useRef();\n\n  const updateTooltipCoords = useCallback(() => {\n    const rect = handlerRef.current.getBoundingClientRect();\n\n    setCoords({\n      height: rect.height,\n      width: rect.width,\n      left: rect.x,\n      top: rect.y + window.scrollY,\n    });\n\n    if (props.fitHandleWidth) {\n      setTooltipWidth(`${rect.width}px`);\n    }\n  }, [handlerRef, props.fitHandleWidth]);\n\n  const onMouseEnter = useCallback(() => {\n    if (trigger !== \"hover\" || IS_TOUCH) return;\n\n    if (intervalCloseRef.current) {\n      clearInterval(intervalCloseRef.current);\n      intervalCloseRef.current = null;\n    }\n    if (!intervalOpenRef.current) {\n      intervalOpenRef.current = setTimeout(() => {\n        setVisible(true);\n        intervalOpenRef.current = null;\n      }, OPEN_DELAY);\n    }\n    updateTooltipCoords();\n  }, [setVisible, intervalCloseRef, intervalOpenRef, trigger, updateTooltipCoords]);\n\n  const onMouseClick = useCallback(() => {\n    if (trigger !== \"click\" && !IS_TOUCH) return;\n    if (intervalCloseRef.current) {\n      clearInterval(intervalCloseRef.current);\n      intervalCloseRef.current = null;\n    }\n    if (intervalOpenRef.current) {\n      clearInterval(intervalOpenRef.current);\n      intervalOpenRef.current = null;\n    }\n    updateTooltipCoords();\n\n    if (props.closeOnDoubleClick) {\n      setVisible((old) => !old);\n    } else {\n      setVisible(true);\n    }\n  }, [setVisible, intervalCloseRef, trigger, updateTooltipCoords, props.closeOnDoubleClick]);\n\n  const onMouseLeave = useCallback(() => {\n    intervalCloseRef.current = setTimeout(() => {\n      setVisible(false);\n      intervalCloseRef.current = null;\n    }, CLOSE_DELAY);\n    if (intervalOpenRef.current) {\n      clearInterval(intervalOpenRef.current);\n      intervalOpenRef.current = null;\n    }\n    updateTooltipCoords();\n  }, [setVisible, intervalCloseRef, updateTooltipCoords]);\n\n  const className = cx(\"Tooltip\", props.className);\n\n  return (\n    <span className={className} onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave} onClick={onMouseClick}>\n      <span\n        className={cx({ \"Tooltip-handle\": !props.disableHandleStyle }, [props.handleClassName], { active: visible })}\n        ref={handlerRef}\n      >\n        {props.handle}\n      </span>\n      {visible && coords.left && (\n        <Portal>\n          <div style={{ ...coords, position: \"absolute\" }}>\n            <div className={cx([\"Tooltip-popup\", position])} style={{ width: tooltipWidth }}>\n              {props.renderContent()}\n            </div>\n          </div>\n        </Portal>\n      )}\n    </span>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport cx from \"classnames\";\n\nimport { BiChevronDown } from \"react-icons/bi\";\n\nimport Modal from \"../Modal/Modal\";\n\nimport dropDownIcon from \"img/DROP_DOWN.svg\";\nimport \"./TokenSelector.css\";\nimport TooltipWithPortal from \"../Tooltip/TooltipWithPortal\";\nimport { bigNumberify, expandDecimals, formatAmount } from \"lib/numbers\";\nimport { getToken } from \"config/tokens\";\nimport { importImage } from \"lib/legacy\";\nimport { t } from \"@lingui/macro\";\n\nexport default function TokenSelector(props) {\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const [searchKeyword, setSearchKeyword] = useState(\"\");\n  const tokenInfo = getToken(props.chainId, props.tokenAddress);\n  const {\n    tokens,\n    mintingCap,\n    infoTokens,\n    showMintingCap,\n    disabled,\n    selectedTokenLabel,\n    showBalances = true,\n    showTokenImgInDropdown = false,\n    showSymbolImage = false,\n    showNewCaret = false,\n    getTokenState = () => ({ disabled: false, message: null }),\n    disableBodyScrollLock,\n  } = props;\n\n  const visibleTokens = tokens.filter((t) => !t.isTempHidden);\n\n  const onSelectToken = (token) => {\n    setIsModalVisible(false);\n    props.onSelectToken(token);\n  };\n\n  useEffect(() => {\n    if (isModalVisible) {\n      setSearchKeyword(\"\");\n    }\n  }, [isModalVisible]);\n\n  if (!tokenInfo) {\n    return null;\n  }\n\n  const tokenImage = showSymbolImage && importImage(`ic_${tokenInfo.symbol.toLowerCase()}_24.svg`);\n\n  const onSearchKeywordChange = (e) => {\n    setSearchKeyword(e.target.value);\n  };\n\n  const filteredTokens = visibleTokens.filter((item) => {\n    return (\n      item.name.toLowerCase().indexOf(searchKeyword.toLowerCase()) > -1 ||\n      item.symbol.toLowerCase().indexOf(searchKeyword.toLowerCase()) > -1\n    );\n  });\n\n  const _handleKeyDown = (e) => {\n    if (e.key === \"Enter\" && filteredTokens.length > 0) {\n      onSelectToken(filteredTokens[0]);\n    }\n  };\n\n  return (\n    <div className={cx(\"TokenSelector\", { disabled }, props.className)}>\n      <Modal\n        disableBodyScrollLock={disableBodyScrollLock}\n        isVisible={isModalVisible}\n        setIsVisible={setIsModalVisible}\n        label={props.label}\n      >\n        <div className=\"TokenSelector-tokens\">\n          <div className=\"TokenSelector-token-row TokenSelector-token-input-row\">\n            <input\n              type=\"text\"\n              placeholder={t`Search Token`}\n              value={searchKeyword}\n              onChange={(e) => onSearchKeywordChange(e)}\n              onKeyDown={_handleKeyDown}\n              autoFocus\n            />\n          </div>\n          {filteredTokens.map((token, tokenIndex) => {\n            const tokenPopupImage = importImage(`ic_${token.symbol.toLowerCase()}_40.svg`);\n            let info = infoTokens ? infoTokens[token.address] : {};\n            let mintAmount;\n            let balance = info.balance;\n            if (showMintingCap && mintingCap && info.usdgAmount) {\n              mintAmount = mintingCap.sub(info.usdgAmount);\n            }\n            if (mintAmount && mintAmount.lt(0)) {\n              mintAmount = bigNumberify(0);\n            }\n            let balanceUsd;\n            if (balance && info.maxPrice) {\n              balanceUsd = balance.mul(info.maxPrice).div(expandDecimals(1, token.decimals));\n            }\n\n            const tokenState = getTokenState(info) || {};\n\n            return (\n              <div\n                key={token.address}\n                className={cx(\"TokenSelector-token-row\", { disabled: tokenState.disabled })}\n                onClick={() => !tokenState.disabled && onSelectToken(token)}\n              >\n                {tokenState.disabled && tokenState.message && (\n                  <TooltipWithPortal\n                    className=\"TokenSelector-tooltip\"\n                    portalClassName=\"TokenSelector-tooltip-portal\"\n                    handle={<div className=\"TokenSelector-tooltip-backing\" />}\n                    position={tokenIndex < filteredTokens.length / 2 ? \"center-bottom\" : \"center-top\"}\n                    disableHandleStyle\n                    closeOnDoubleClick\n                    fitHandleWidth\n                    renderContent={() => tokenState.message}\n                  />\n                )}\n                <div className=\"Token-info\">\n                  {showTokenImgInDropdown && <img src={tokenPopupImage} alt={token.name} className=\"token-logo\" />}\n                  <div className=\"Token-symbol\">\n                    <div className=\"Token-text\">{token.symbol}</div>\n                    <span className=\"text-accent\">{token.name}</span>\n                  </div>\n                </div>\n                <div className=\"Token-balance\">\n                  {showBalances && balance && (\n                    <div className=\"Token-text\">\n                      {balance.gt(0) && formatAmount(balance, token.decimals, 4, true)}\n                      {balance.eq(0) && \"-\"}\n                    </div>\n                  )}\n                  <span className=\"text-accent\">\n                    {mintAmount && <div>Mintable: {formatAmount(mintAmount, token.decimals, 2, true)} USDG</div>}\n                    {showMintingCap && !mintAmount && <div>-</div>}\n                    {!showMintingCap && showBalances && balanceUsd && balanceUsd.gt(0) && (\n                      <div>${formatAmount(balanceUsd, 30, 2, true)}</div>\n                    )}\n                  </span>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </Modal>\n      {selectedTokenLabel ? (\n        <div className=\"TokenSelector-box\" onClick={() => setIsModalVisible(true)}>\n          {selectedTokenLabel}\n          {!showNewCaret && <BiChevronDown className=\"TokenSelector-caret\" />}\n        </div>\n      ) : (\n        <div className=\"TokenSelector-box\" onClick={() => setIsModalVisible(true)}>\n          {tokenInfo.symbol}\n          {showSymbolImage && <img src={tokenImage} alt={tokenInfo.symbol} className=\"TokenSelector-box-symbol\" />}\n          {showNewCaret && <img src={dropDownIcon} alt=\"Dropdown Icon\" className=\"TokenSelector-box-caret\" />}\n          {!showNewCaret && <BiChevronDown className=\"TokenSelector-caret\" />}\n        </div>\n      )}\n    </div>\n  );\n}\n","import cx from \"classnames\";\n\nexport default function ExchangeInfoRow(props) {\n  const { label, children, value, isTop, isWarning } = props;\n\n  return (\n    <div className={cx(\"Exchange-info-row\", { \"top-line\": isTop })}>\n      <div className=\"Exchange-info-label\">{label}</div>\n      <div className={`align-right ${isWarning ? \"Exchange-info-value-warning\" : \"\"}`}>{children || value}</div>\n    </div>\n  );\n}\n","import React, { useCallback, useState, useMemo } from \"react\";\nimport \"./ConfirmationBox.css\";\nimport {\n  USD_DECIMALS,\n  PRECISION,\n  BASIS_POINTS_DIVISOR,\n  LIMIT,\n  MIN_PROFIT_TIME,\n  INCREASE,\n  getExchangeRate,\n  getExchangeRateDisplay,\n  DEFAULT_SLIPPAGE_AMOUNT,\n  DEFAULT_HIGHER_SLIPPAGE_AMOUNT,\n  calculatePositionDelta,\n  DECREASE,\n} from \"lib/legacy\";\nimport { getConstant } from \"config/chains\";\nimport { getContract } from \"config/contracts\";\n\nimport { BsArrowRight } from \"react-icons/bs\";\nimport Modal from \"../Modal/Modal\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport Checkbox from \"../Checkbox/Checkbox\";\nimport ExchangeInfoRow from \"./ExchangeInfoRow\";\nimport { cancelDecreaseOrder, handleCancelOrder } from \"domain/legacy\";\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\nimport { TRIGGER_PREFIX_ABOVE, TRIGGER_PREFIX_BELOW } from \"config/ui\";\nimport { useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { SLIPPAGE_BPS_KEY } from \"config/localStorage\";\nimport { expandDecimals, formatAmount, formatAmountFree } from \"lib/numbers\";\nimport { getNativeToken, getToken, getWrappedToken } from \"config/tokens\";\nimport { Plural, t, Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nconst HIGH_SPREAD_THRESHOLD = expandDecimals(1, USD_DECIMALS).div(100); // 1%;\n\nfunction getSpread(fromTokenInfo, toTokenInfo, isLong, nativeTokenAddress) {\n  if (fromTokenInfo && fromTokenInfo.maxPrice && toTokenInfo && toTokenInfo.minPrice) {\n    const fromDiff = fromTokenInfo.maxPrice.sub(fromTokenInfo.minPrice).div(2);\n    const fromSpread = fromDiff.mul(PRECISION).div(fromTokenInfo.maxPrice.add(fromTokenInfo.minPrice).div(2));\n    const toDiff = toTokenInfo.maxPrice.sub(toTokenInfo.minPrice).div(2);\n    const toSpread = toDiff.mul(PRECISION).div(toTokenInfo.maxPrice.add(toTokenInfo.minPrice).div(2));\n\n    let value = fromSpread.add(toSpread);\n\n    const fromTokenAddress = fromTokenInfo.isNative ? nativeTokenAddress : fromTokenInfo.address;\n    const toTokenAddress = toTokenInfo.isNative ? nativeTokenAddress : toTokenInfo.address;\n\n    if (isLong && fromTokenAddress === toTokenAddress) {\n      value = fromSpread;\n    }\n\n    return {\n      value,\n      isHigh: value.gt(HIGH_SPREAD_THRESHOLD),\n    };\n  }\n}\n\nexport default function ConfirmationBox(props) {\n  const {\n    fromToken,\n    fromTokenInfo,\n    toToken,\n    toTokenInfo,\n    isSwap,\n    isLong,\n    isMarketOrder,\n    orderOption,\n    isShort,\n    toAmount,\n    fromAmount,\n    isHigherSlippageAllowed,\n    setIsHigherSlippageAllowed,\n    onConfirmationClick,\n    setIsConfirming,\n    shortCollateralAddress,\n    hasExistingPosition,\n    leverage,\n    existingPosition,\n    existingLiquidationPrice,\n    displayLiquidationPrice,\n    shortCollateralToken,\n    isPendingConfirmation,\n    triggerPriceUsd,\n    triggerRatio,\n    fees,\n    feesUsd,\n    isSubmitting,\n    fromUsdMin,\n    toUsdMax,\n    nextAveragePrice,\n    collateralTokenAddress,\n    feeBps,\n    chainId,\n    orders,\n    library,\n    setPendingTxns,\n    pendingTxns,\n    minExecutionFee,\n    minExecutionFeeUSD,\n    minExecutionFeeErrorMessage,\n  } = props;\n\n  const nativeTokenSymbol = getConstant(chainId, \"nativeTokenSymbol\");\n\n  const [savedSlippageAmount] = useLocalStorageSerializeKey([chainId, SLIPPAGE_BPS_KEY], DEFAULT_SLIPPAGE_AMOUNT);\n  const [isProfitWarningAccepted, setIsProfitWarningAccepted] = useState(false);\n  const [isTriggerWarningAccepted, setIsTriggerWarningAccepted] = useState(false);\n  const [isLimitOrdersVisible, setIsLimitOrdersVisible] = useState(false);\n\n  const onCancelOrderClick = useCallback(\n    (order) => {\n      handleCancelOrder(chainId, library, order, { pendingTxns, setPendingTxns });\n    },\n    [library, pendingTxns, setPendingTxns, chainId]\n  );\n\n  let minOut;\n  let fromTokenUsd;\n  let toTokenUsd;\n\n  let collateralAfterFees = fromUsdMin;\n  if (feesUsd) {\n    collateralAfterFees = fromUsdMin.sub(feesUsd);\n  }\n\n  if (isSwap) {\n    minOut = toAmount.mul(BASIS_POINTS_DIVISOR - savedSlippageAmount).div(BASIS_POINTS_DIVISOR);\n\n    fromTokenUsd = fromTokenInfo ? formatAmount(fromTokenInfo.minPrice, USD_DECIMALS, 2, true) : 0;\n    toTokenUsd = toTokenInfo ? formatAmount(toTokenInfo.maxPrice, USD_DECIMALS, 2, true) : 0;\n  }\n\n  const getTitle = () => {\n    if (!isMarketOrder) {\n      return t`Confirm Limit Order`;\n    }\n    if (isSwap) {\n      return t`Confirm Swap`;\n    }\n    return isLong ? t`Confirm Long` : t`Confirm Short`;\n  };\n  const title = getTitle();\n\n  const existingOrder = useMemo(() => {\n    const wrappedToken = getWrappedToken(chainId);\n    for (const order of orders) {\n      if (order.type !== INCREASE) continue;\n      const sameToken =\n        order.indexToken === wrappedToken.address ? toToken.isNative : order.indexToken === toToken.address;\n      if (order.isLong === isLong && sameToken) {\n        return order;\n      }\n    }\n  }, [orders, chainId, isLong, toToken.address, toToken.isNative]);\n\n  const existingOrders = useMemo(() => {\n    const wrappedToken = getWrappedToken(chainId);\n    return orders.filter((order) => {\n      if (order.type !== INCREASE) return false;\n      const sameToken =\n        order.indexToken === wrappedToken.address ? toToken.isNative : order.indexToken === toToken.address;\n      return order.isLong === isLong && sameToken;\n    });\n  }, [orders, chainId, isLong, toToken.address, toToken.isNative]);\n\n  const existingTriggerOrders = useMemo(() => {\n    const wrappedToken = getWrappedToken(chainId);\n    return orders.filter((order) => {\n      if (order.type !== DECREASE) return false;\n      const sameToken =\n        order.indexToken === wrappedToken.address ? toToken.isNative : order.indexToken === toToken.address;\n      return order.isLong === isLong && sameToken;\n    });\n  }, [orders, chainId, isLong, toToken.address, toToken.isNative]);\n\n  const decreaseOrdersThatWillBeExecuted = useMemo(() => {\n    if (isSwap) return [];\n    return existingTriggerOrders.filter((order) => {\n      if (order.triggerAboveThreshold) {\n        return existingPosition?.markPrice.gte(order.triggerPrice);\n      } else {\n        return existingPosition?.markPrice.lte(order.triggerPrice);\n      }\n    });\n  }, [existingPosition, existingTriggerOrders, isSwap]);\n\n  const getError = () => {\n    if (!isSwap && hasExistingPosition && !isMarketOrder) {\n      const { delta, hasProfit } = calculatePositionDelta(triggerPriceUsd, existingPosition);\n      if (hasProfit && delta.eq(0)) {\n        return t`Invalid price, see warning`;\n      }\n    }\n    if (isMarketOrder && hasPendingProfit && !isProfitWarningAccepted) {\n      return t`Forfeit profit not checked`;\n    }\n    return false;\n  };\n\n  const getPrimaryText = () => {\n    if (decreaseOrdersThatWillBeExecuted.length > 0 && !isTriggerWarningAccepted) {\n      return t`Accept confirmation of trigger orders`;\n    }\n\n    if (!isPendingConfirmation) {\n      const error = getError();\n      if (error) {\n        return error;\n      }\n\n      if (isSwap) {\n        return title;\n      }\n      const action = isMarketOrder ? (isLong ? t`Long` : t`Short`) : t`Create Order`;\n\n      if (\n        isMarketOrder &&\n        MIN_PROFIT_TIME > 0 &&\n        hasExistingPosition &&\n        existingPosition.delta.eq(0) &&\n        existingPosition.pendingDelta.gt(0)\n      ) {\n        return isLong ? t`Forfeit profit and ${action}` : t`Forfeit profit and Short`;\n      }\n\n      return isMarketOrder && MIN_PROFIT_TIME > 0 ? t`Accept minimum and ${action}` : action;\n    }\n\n    if (!isMarketOrder) {\n      return t`Creating Order...`;\n    }\n    if (isSwap) {\n      return t`Swapping...`;\n    }\n    if (isLong) {\n      return t`Longing...`;\n    }\n    return t`Shorting...`;\n  };\n\n  const isPrimaryEnabled = () => {\n    if (getError()) {\n      return false;\n    }\n    if (decreaseOrdersThatWillBeExecuted.length > 0 && !isTriggerWarningAccepted) {\n      return false;\n    }\n    return !isPendingConfirmation && !isSubmitting;\n  };\n\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const spread = getSpread(fromTokenInfo, toTokenInfo, isLong, nativeTokenAddress);\n  // it's meaningless for limit/stop orders to show spread based on current prices\n  const showSpread = isMarketOrder && !!spread;\n\n  let allowedSlippage = savedSlippageAmount;\n  if (isHigherSlippageAllowed) {\n    allowedSlippage = DEFAULT_HIGHER_SLIPPAGE_AMOUNT;\n  }\n\n  const renderSpreadWarning = useCallback(() => {\n    if (!isMarketOrder) {\n      return null;\n    }\n\n    if (spread && spread.isHigh) {\n      return (\n        <div className=\"Confirmation-box-warning\">\n          <Trans>The spread is {`>`} 1%, please ensure the trade details are acceptable before comfirming</Trans>\n        </div>\n      );\n    }\n  }, [isMarketOrder, spread]);\n\n  const renderFeeWarning = useCallback(() => {\n    if (orderOption === LIMIT || !feeBps || feeBps <= 60) {\n      return null;\n    }\n\n    if (isSwap) {\n      return (\n        <div className=\"Confirmation-box-warning\">\n          <Trans>\n            Fees are high to swap from {fromToken.symbol} to {toToken.symbol}.\n          </Trans>\n        </div>\n      );\n    }\n\n    if (!collateralTokenAddress) {\n      return null;\n    }\n\n    const collateralToken = getToken(chainId, collateralTokenAddress);\n    return (\n      <div className=\"Confirmation-box-warning\">\n        <Trans>\n          Fees are high to swap from {fromToken.symbol} to {collateralToken.symbol}. <br />\n          {collateralToken.symbol} is needed for collateral.\n        </Trans>\n      </div>\n    );\n  }, [feeBps, isSwap, collateralTokenAddress, chainId, fromToken.symbol, toToken.symbol, orderOption]);\n\n  const hasPendingProfit =\n    MIN_PROFIT_TIME > 0 && existingPosition && existingPosition.delta.eq(0) && existingPosition.pendingDelta.gt(0);\n\n  const renderExistingOrderWarning = useCallback(() => {\n    if (isSwap || !existingOrder) {\n      return;\n    }\n    const indexToken = getToken(chainId, existingOrder.indexToken);\n    const sizeInToken = formatAmount(\n      existingOrder.sizeDelta.mul(PRECISION).div(existingOrder.triggerPrice),\n      USD_DECIMALS,\n      4,\n      true\n    );\n    const longOrShortText = existingOrder.isLong ? t`Long` : t`Short`;\n    if (existingOrders?.length > 1) {\n      return (\n        <div>\n          <div className=\"Confirmation-box-info\">\n            <span>\n              <Trans>\n                You have multiple existing Increase {longOrShortText} {indexToken.symbol} limit orders{\" \"}\n              </Trans>\n            </span>\n            <span onClick={() => setIsLimitOrdersVisible((p) => !p)} className=\"view-orders\">\n              ({isLimitOrdersVisible ? t`hide` : t`view`})\n            </span>\n          </div>\n          {isLimitOrdersVisible && (\n            <ul className=\"order-list\">\n              {existingOrders.map((order) => {\n                const { account, index, type, triggerAboveThreshold, triggerPrice } = order;\n                const id = `${account}-${index}`;\n                const triggerPricePrefix = triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n                const indexToken = getToken(chainId, order.indexToken);\n\n                return (\n                  <li key={id} className=\"font-sm\">\n                    <p>\n                      {type === INCREASE ? t`Increase` : t`Decrease`} {indexToken.symbol} {isLong ? t`Long` : t`Short`}{\" \"}\n                      &nbsp;{triggerPricePrefix} ${formatAmount(triggerPrice, USD_DECIMALS, 2, true)}\n                    </p>\n                    <button onClick={() => onCancelOrderClick(order)}>\n                      <Trans>Cancel</Trans>\n                    </button>\n                  </li>\n                );\n              })}\n            </ul>\n          )}\n        </div>\n      );\n    }\n    return (\n      <div className=\"Confirmation-box-info\">\n        <Trans>\n          You have an active Limit Order to Increase {longOrShortText} {sizeInToken} {indexToken.symbol} ($\n          {formatAmount(existingOrder.sizeDelta, USD_DECIMALS, 2, true)}) at price $\n          {formatAmount(existingOrder.triggerPrice, USD_DECIMALS, 2, true)}\n        </Trans>\n      </div>\n    );\n  }, [existingOrder, isSwap, chainId, existingOrders, isLong, isLimitOrdersVisible, onCancelOrderClick]);\n\n  const renderExistingTriggerErrors = useCallback(() => {\n    if (isSwap || decreaseOrdersThatWillBeExecuted?.length < 1) {\n      return;\n    }\n    const existingTriggerOrderLength = decreaseOrdersThatWillBeExecuted.length;\n    return (\n      <>\n        <div className=\"Confirmation-box-warning\">\n          <Plural\n            value={existingTriggerOrderLength}\n            one=\"You have an active trigger order that might execute immediately after you open this position. Please cancel the order or accept the confirmation to continue.\"\n            other=\"You have # active trigger orders that might execute immediately after you open this position. Please cancel the orders or accept the confirmation to continue.\"\n          />\n        </div>\n        <ul className=\"order-list\">\n          {decreaseOrdersThatWillBeExecuted.map((order) => {\n            const { account, index, type, triggerAboveThreshold, triggerPrice } = order;\n            const id = `${account}-${index}`;\n            const triggerPricePrefix = triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n            const indexToken = getToken(chainId, order.indexToken);\n            return (\n              <li key={id} className=\"font-sm\">\n                <p>\n                  {type === INCREASE ? t`Increase` : t`Decrease`} {indexToken.symbol} {isLong ? t`Long` : t`Short`}\n                  &nbsp;{triggerPricePrefix} ${formatAmount(triggerPrice, USD_DECIMALS, 2, true)}\n                </p>\n                <button\n                  onClick={() =>\n                    cancelDecreaseOrder(chainId, library, index, {\n                      successMsg: t`Order cancelled`,\n                      failMsg: t`Cancel failed`,\n                      sentMsg: t`Cancel submitted`,\n                      pendingTxns,\n                      setPendingTxns,\n                    })\n                  }\n                >\n                  <Trans>Cancel</Trans>\n                </button>\n              </li>\n            );\n          })}\n        </ul>\n      </>\n    );\n  }, [decreaseOrdersThatWillBeExecuted, isSwap, chainId, library, pendingTxns, setPendingTxns, isLong]);\n\n  const renderExistingTriggerWarning = useCallback(() => {\n    if (\n      isSwap ||\n      existingTriggerOrders.length < 1 ||\n      decreaseOrdersThatWillBeExecuted.length > 0 ||\n      renderExistingOrderWarning()\n    ) {\n      return;\n    }\n    const existingTriggerOrderLength = existingTriggerOrders.length;\n    return (\n      <div className=\"Confirmation-box-info\">\n        <Plural\n          value={existingTriggerOrderLength}\n          one=\"You have an active trigger order that could impact this position.\"\n          other=\"You have # active trigger orders that could impact this position.\"\n        />\n      </div>\n    );\n  }, [existingTriggerOrders, isSwap, decreaseOrdersThatWillBeExecuted, renderExistingOrderWarning]);\n\n  // TODO handle unaprproved order plugin (very unlikely case)\n  const renderMain = useCallback(() => {\n    if (isSwap) {\n      return (\n        <div className=\"Confirmation-box-main\">\n          <div>\n            <Trans>Pay</Trans>&nbsp;{formatAmount(fromAmount, fromToken.decimals, 4, true)} {fromToken.symbol} ($\n            {formatAmount(fromUsdMin, USD_DECIMALS, 2, true)})\n          </div>\n          <div className=\"Confirmation-box-main-icon\"></div>\n          <div>\n            <Trans>Receive</Trans>&nbsp;{formatAmount(toAmount, toToken.decimals, 4, true)} {toToken.symbol} ($\n            {formatAmount(toUsdMax, USD_DECIMALS, 2, true)})\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"Confirmation-box-main\">\n        <span>\n          <Trans>Pay</Trans>&nbsp;{formatAmount(fromAmount, fromToken.decimals, 4, true)} {fromToken.symbol} ($\n          {formatAmount(fromUsdMin, USD_DECIMALS, 2, true)})\n        </span>\n        <div className=\"Confirmation-box-main-icon\"></div>\n        <div>\n          {isLong ? t`Long` : t`Short`}&nbsp;\n          {formatAmount(toAmount, toToken.decimals, 4, true)} {toToken.symbol} ($\n          {formatAmount(toUsdMax, USD_DECIMALS, 2, true)})\n        </div>\n      </div>\n    );\n  }, [isSwap, fromAmount, fromToken, toToken, fromUsdMin, toUsdMax, isLong, toAmount]);\n\n  const SWAP_ORDER_EXECUTION_GAS_FEE = getConstant(chainId, \"SWAP_ORDER_EXECUTION_GAS_FEE\");\n  const INCREASE_ORDER_EXECUTION_GAS_FEE = getConstant(chainId, \"INCREASE_ORDER_EXECUTION_GAS_FEE\");\n  const executionFee = isSwap ? SWAP_ORDER_EXECUTION_GAS_FEE : INCREASE_ORDER_EXECUTION_GAS_FEE;\n  const renderExecutionFee = useCallback(() => {\n    if (isMarketOrder) {\n      return null;\n    }\n    return (\n      <ExchangeInfoRow label={t`Execution Fee`}>\n        {formatAmount(executionFee, 18, 4)} {getNativeToken(chainId).symbol}\n      </ExchangeInfoRow>\n    );\n  }, [isMarketOrder, executionFee, chainId]);\n\n  const renderAvailableLiquidity = useCallback(() => {\n    let availableLiquidity;\n    const riskThresholdBps = 5000;\n    let isLiquidityRisk;\n    const token = isSwap || isLong ? toTokenInfo : shortCollateralToken;\n\n    if (!token || !token.poolAmount || !token.availableAmount) {\n      return null;\n    }\n\n    if (isSwap) {\n      const poolWithoutBuffer = token.poolAmount.sub(token.bufferAmount);\n      availableLiquidity = token.availableAmount.gt(poolWithoutBuffer) ? poolWithoutBuffer : token.availableAmount;\n      isLiquidityRisk = availableLiquidity.mul(riskThresholdBps).div(BASIS_POINTS_DIVISOR).lt(toAmount);\n    } else {\n      if (isShort) {\n        availableLiquidity = token.availableAmount;\n\n        let adjustedMaxGlobalShortSize;\n\n        if (toTokenInfo.maxAvailableShort && toTokenInfo.maxAvailableShort.gt(0)) {\n          adjustedMaxGlobalShortSize = toTokenInfo.maxAvailableShort\n            .mul(expandDecimals(1, token.decimals))\n            .div(expandDecimals(1, USD_DECIMALS));\n        }\n\n        if (adjustedMaxGlobalShortSize && adjustedMaxGlobalShortSize.lt(token.availableAmount)) {\n          availableLiquidity = adjustedMaxGlobalShortSize;\n        }\n\n        const sizeTokens = toUsdMax.mul(expandDecimals(1, token.decimals)).div(token.minPrice);\n        isLiquidityRisk = availableLiquidity.mul(riskThresholdBps).div(BASIS_POINTS_DIVISOR).lt(sizeTokens);\n      } else {\n        availableLiquidity = token.availableAmount;\n        isLiquidityRisk = availableLiquidity.mul(riskThresholdBps).div(BASIS_POINTS_DIVISOR).lt(toAmount);\n      }\n    }\n\n    if (!availableLiquidity) {\n      return null;\n    }\n\n    return (\n      <ExchangeInfoRow label={t`Available Liquidity`}>\n        <Tooltip\n          position=\"right-bottom\"\n          handleClassName={isLiquidityRisk ? \"negative\" : null}\n          handle={\n            <>\n              {formatAmount(availableLiquidity, token.decimals, token.isStable ? 0 : 2, true)} {token.symbol}\n            </>\n          }\n          renderContent={() =>\n            isLiquidityRisk\n              ? t`There may not be sufficient liquidity to execute your order when the price conditions are met`\n              : t`The order will only execute if the price conditions are met and there is sufficient liquidity`\n          }\n        />\n      </ExchangeInfoRow>\n    );\n  }, [toTokenInfo, shortCollateralToken, isShort, isLong, isSwap, toAmount, toUsdMax]);\n\n  const renderMarginSection = useCallback(() => {\n    return (\n      <>\n        <div>\n          {renderMain()}\n          {renderFeeWarning()}\n          {renderExistingOrderWarning()}\n          {renderExistingTriggerErrors()}\n          {renderExistingTriggerWarning()}\n          {minExecutionFeeErrorMessage && <div className=\"Confirmation-box-warning\">{minExecutionFeeErrorMessage}</div>}\n          {hasPendingProfit && isMarketOrder && (\n            <div className=\"PositionEditor-accept-profit-warning\">\n              <Checkbox isChecked={isProfitWarningAccepted} setIsChecked={setIsProfitWarningAccepted}>\n                <span className=\"muted\">\n                  <Trans>Forfeit profit</Trans>\n                </span>\n              </Checkbox>\n            </div>\n          )}\n          {orderOption === LIMIT && renderAvailableLiquidity()}\n          {isShort && (\n            <ExchangeInfoRow label={t`Collateral In`}>\n              {getToken(chainId, shortCollateralAddress).symbol}\n            </ExchangeInfoRow>\n          )}\n          {isLong && <ExchangeInfoRow label={t`Collateral In`} value={toTokenInfo.symbol} />}\n          <ExchangeInfoRow label={t`Leverage`}>\n            {hasExistingPosition && toAmount && toAmount.gt(0) && (\n              <div className=\"inline-block muted\">\n                {formatAmount(existingPosition.leverage, 4, 2)}x\n                <BsArrowRight className=\"transition-arrow\" />\n              </div>\n            )}\n            {toAmount && leverage && leverage.gt(0) && `${formatAmount(leverage, 4, 2)}x`}\n            {!toAmount && leverage && leverage.gt(0) && `-`}\n            {leverage && leverage.eq(0) && `-`}\n          </ExchangeInfoRow>\n          <ExchangeInfoRow label={t`Liq. Price`}>\n            {hasExistingPosition && toAmount && toAmount.gt(0) && (\n              <div className=\"inline-block muted\">\n                ${formatAmount(existingLiquidationPrice, USD_DECIMALS, 2, true)}\n                <BsArrowRight className=\"transition-arrow\" />\n              </div>\n            )}\n            {toAmount && displayLiquidationPrice && `$${formatAmount(displayLiquidationPrice, USD_DECIMALS, 2, true)}`}\n            {!toAmount && displayLiquidationPrice && `-`}\n            {!displayLiquidationPrice && `-`}\n          </ExchangeInfoRow>\n          <ExchangeInfoRow label={t`Fees`}>${formatAmount(feesUsd, USD_DECIMALS, 2, true)}</ExchangeInfoRow>\n          <ExchangeInfoRow label={t`Collateral`}>\n            <Tooltip\n              handle={`$${formatAmount(collateralAfterFees, USD_DECIMALS, 2, true)}`}\n              position=\"right-bottom\"\n              renderContent={() => {\n                return (\n                  <>\n                    <Trans>Your position's collateral after deducting fees.</Trans>\n                    <br />\n                    <br />\n                    <StatsTooltipRow label={t`Pay Amount`} value={formatAmount(fromUsdMin, USD_DECIMALS, 2, true)} />\n                    <StatsTooltipRow label={t`Fees`} value={formatAmount(feesUsd, USD_DECIMALS, 2, true)} />\n                    <div className=\"Tooltip-divider\" />\n                    <StatsTooltipRow\n                      label={t`Collateral`}\n                      value={formatAmount(collateralAfterFees, USD_DECIMALS, 2, true)}\n                    />\n                  </>\n                );\n              }}\n            />\n          </ExchangeInfoRow>\n          {showSpread && (\n            <ExchangeInfoRow label={t`Spread`} isWarning={spread.isHigh} isTop={true}>\n              {formatAmount(spread.value.mul(100), USD_DECIMALS, 2, true)}%\n            </ExchangeInfoRow>\n          )}\n          {isMarketOrder && (\n            <ExchangeInfoRow label={t`Entry Price`}>\n              {hasExistingPosition && toAmount && toAmount.gt(0) && (\n                <div className=\"inline-block muted\">\n                  ${formatAmount(existingPosition.averagePrice, USD_DECIMALS, 2, true)}\n                  <BsArrowRight className=\"transition-arrow\" />\n                </div>\n              )}\n              {nextAveragePrice && `$${formatAmount(nextAveragePrice, USD_DECIMALS, 2, true)}`}\n              {!nextAveragePrice && `-`}\n            </ExchangeInfoRow>\n          )}\n          {!isMarketOrder && (\n            <ExchangeInfoRow label={t`Limit Price`} isTop={true}>\n              ${formatAmount(triggerPriceUsd, USD_DECIMALS, 2, true)}\n            </ExchangeInfoRow>\n          )}\n          <ExchangeInfoRow label={t`Borrow Fee`}>\n            {isLong && toTokenInfo && formatAmount(toTokenInfo.fundingRate, 4, 4)}\n            {isShort && shortCollateralToken && formatAmount(shortCollateralToken.fundingRate, 4, 4)}\n            {((isLong && toTokenInfo && toTokenInfo.fundingRate) ||\n              (isShort && shortCollateralToken && shortCollateralToken.fundingRate)) &&\n              \"% / 1h\"}\n          </ExchangeInfoRow>\n          {isMarketOrder && (\n            <div className=\"PositionEditor-allow-higher-slippage\">\n              <ExchangeInfoRow label={t`Execution Fee`}>\n                <Tooltip\n                  handle={`${formatAmountFree(minExecutionFee, 18, 5)} ${nativeTokenSymbol}`}\n                  position=\"right-top\"\n                  renderContent={() => {\n                    return (\n                      <>\n                        <StatsTooltipRow\n                          label={t`Network fee`}\n                          value={`${formatAmountFree(minExecutionFee, 18, 5)} ${nativeTokenSymbol} ($${formatAmount(\n                            minExecutionFeeUSD,\n                            USD_DECIMALS,\n                            2\n                          )})`}\n                        />\n                        <br />\n                        <Trans>\n                          This is the network cost required to execute the postion.{\" \"}\n                          <ExternalLink href=\"https://amxdex.gitbook.io/amxdex/trading#execution-fee\">\n                            More Info\n                          </ExternalLink>\n                        </Trans>\n                      </>\n                    );\n                  }}\n                />\n              </ExchangeInfoRow>\n            </div>\n          )}\n          <ExchangeInfoRow label={t`Allowed Slippage`}>\n            <Tooltip\n              handle={`${formatAmount(allowedSlippage, 2, 2)}%`}\n              position=\"right-top\"\n              renderContent={() => {\n                return (\n                  <Trans>\n                    You can change this in the settings menu on the top right of the page.\n                    <br />\n                    <br />\n                    Note that a low allowed slippage, e.g. less than 0.5%, may result in failed orders if prices are\n                    volatile.\n                  </Trans>\n                );\n              }}\n            />\n          </ExchangeInfoRow>\n          {isMarketOrder && (\n            <div className=\"PositionEditor-allow-higher-slippage\">\n              <Checkbox isChecked={isHigherSlippageAllowed} setIsChecked={setIsHigherSlippageAllowed}>\n                <span className=\"muted font-sm\">\n                  <Trans>Allow up to 1% slippage</Trans>\n                </span>\n              </Checkbox>\n            </div>\n          )}\n          {decreaseOrdersThatWillBeExecuted.length > 0 && (\n            <div className=\"PositionEditor-allow-higher-slippage\">\n              <Checkbox isChecked={isTriggerWarningAccepted} setIsChecked={setIsTriggerWarningAccepted}>\n                <span className=\"muted font-sm\">\n                  <Trans>I am aware of the trigger orders</Trans>\n                </span>\n              </Checkbox>\n            </div>\n          )}\n          {renderExecutionFee()}\n        </div>\n      </>\n    );\n  }, [\n    renderMain,\n    shortCollateralAddress,\n    isShort,\n    isLong,\n    toTokenInfo,\n    nextAveragePrice,\n    toAmount,\n    hasExistingPosition,\n    existingPosition,\n    isMarketOrder,\n    triggerPriceUsd,\n    showSpread,\n    spread,\n    displayLiquidationPrice,\n    existingLiquidationPrice,\n    feesUsd,\n    leverage,\n    renderExecutionFee,\n    shortCollateralToken,\n    chainId,\n    renderFeeWarning,\n    hasPendingProfit,\n    isProfitWarningAccepted,\n    renderAvailableLiquidity,\n    orderOption,\n    fromUsdMin,\n    collateralAfterFees,\n    renderExistingOrderWarning,\n    renderExistingTriggerWarning,\n    renderExistingTriggerErrors,\n    isHigherSlippageAllowed,\n    setIsHigherSlippageAllowed,\n    allowedSlippage,\n    isTriggerWarningAccepted,\n    decreaseOrdersThatWillBeExecuted,\n    minExecutionFee,\n    nativeTokenSymbol,\n    minExecutionFeeUSD,\n    minExecutionFeeErrorMessage,\n  ]);\n\n  const renderSwapSection = useCallback(() => {\n    return (\n      <>\n        <div>\n          {renderMain()}\n          {renderFeeWarning()}\n          {renderSpreadWarning()}\n          {orderOption === LIMIT && renderAvailableLiquidity()}\n          <ExchangeInfoRow label={t`Min. Receive`}>\n            {formatAmount(minOut, toTokenInfo.decimals, 4, true)} {toTokenInfo.symbol}\n          </ExchangeInfoRow>\n          <ExchangeInfoRow label={t`Price`}>\n            {getExchangeRateDisplay(getExchangeRate(fromTokenInfo, toTokenInfo), fromTokenInfo, toTokenInfo)}\n          </ExchangeInfoRow>\n          {!isMarketOrder && (\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Limit Price</Trans>\n              </div>\n              <div className=\"align-right\">{getExchangeRateDisplay(triggerRatio, fromTokenInfo, toTokenInfo)}</div>\n            </div>\n          )}\n          {showSpread && (\n            <ExchangeInfoRow label={t`Spread`} isWarning={spread.isHigh}>\n              {formatAmount(spread.value.mul(100), USD_DECIMALS, 2, true)}%\n            </ExchangeInfoRow>\n          )}\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>Fees</Trans>\n            </div>\n            <div className=\"align-right\">\n              {formatAmount(feeBps, 2, 2, true)}% ({formatAmount(fees, fromTokenInfo.decimals, 4, true)}{\" \"}\n              {fromTokenInfo.symbol}: ${formatAmount(feesUsd, USD_DECIMALS, 2, true)})\n            </div>\n          </div>\n          {renderExecutionFee()}\n          {fromTokenUsd && (\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>{fromTokenInfo.symbol} Price</Trans>\n              </div>\n              <div className=\"align-right\">{fromTokenUsd} USD</div>\n            </div>\n          )}\n          {toTokenUsd && (\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>{toTokenInfo.symbol} Price</Trans>\n              </div>\n              <div className=\"align-right\">{toTokenUsd} USD</div>\n            </div>\n          )}\n        </div>\n      </>\n    );\n  }, [\n    renderMain,\n    renderSpreadWarning,\n    fromTokenInfo,\n    toTokenInfo,\n    orderOption,\n    showSpread,\n    spread,\n    feesUsd,\n    feeBps,\n    renderExecutionFee,\n    fromTokenUsd,\n    toTokenUsd,\n    triggerRatio,\n    fees,\n    isMarketOrder,\n    minOut,\n    renderFeeWarning,\n    renderAvailableLiquidity,\n  ]);\n\n  return (\n    <div className=\"Confirmation-box\">\n      <Modal isVisible={true} setIsVisible={() => setIsConfirming(false)} label={title} allowContentTouchMove>\n        {isSwap && renderSwapSection()}\n        {!isSwap && renderMarginSection()}\n        <div className=\"Confirmation-box-row\">\n          <button\n            onClick={onConfirmationClick}\n            className=\"App-cta Confirmation-box-button\"\n            disabled={!isPrimaryEnabled()}\n          >\n            {getPrimaryText()}\n          </button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Trans, t } from \"@lingui/macro\";\nimport Modal from \"../Modal/Modal\";\nimport Checkbox from \"../Checkbox/Checkbox\";\n\nimport \"./OrdersToa.css\";\n\nexport default function OrdersToa(props) {\n  const { setIsVisible, isPluginApproving, approveOrderBook } = props;\n\n  const [isChecked, setIsChecked] = useState(false);\n\n  const onConfirmationClick = () => {\n    approveOrderBook().then(() => {\n      setIsVisible(false);\n    });\n  };\n\n  const getPrimaryText = () => {\n    if (isPluginApproving) {\n      return t`Enabling Orders...`;\n    }\n    if (!isChecked) {\n      return t`Accept terms to enable orders`;\n    }\n    return t`Enable Orders`;\n  };\n\n  const isPrimaryEnabled = () => {\n    if (isPluginApproving) {\n      return false;\n    }\n    return isChecked;\n  };\n\n  return (\n    <Modal\n      setIsVisible={setIsVisible}\n      isVisible={true}\n      label={t`Enable Orders`}\n      className=\"Orders-toa Modal-scrollable\"\n      zIndex=\"1000\"\n    >\n      <Trans>\n        Note that orders are not guaranteed to be executed.\n        <br />\n        <br />\n        This can occur in a few situations including but not exclusive to:\n      </Trans>\n      <br />\n      <ul>\n        <Trans>\n          <li>Insufficient liquidity to execute the order</li>\n          <li>The mark price which is an aggregate of exchange prices did not reach the specified price</li>\n          <li>The specified price was reached but not long enough for it to be executed</li>\n          <li>No keeper picked up the order for execution</li>\n        </Trans>\n      </ul>\n      <div>\n        <Trans>\n          Additionally, trigger orders are market orders and are not guaranteed to settle at the trigger price.\n        </Trans>\n      </div>\n      <br />\n      <div className=\"Orders-toa-accept-rules\">\n        <Checkbox isChecked={isChecked} setIsChecked={setIsChecked}>\n          <span className=\"muted\">\n            <Trans>\n              Accept that orders are not guaranteed to execute and trigger orders may not settle at the trigger price\n            </Trans>\n          </span>\n        </Checkbox>\n      </div>\n      <button disabled={!isPrimaryEnabled()} className=\"App-cta Confirmation-box-button\" onClick={onConfirmationClick}>\n        {getPrimaryText()}\n      </button>\n    </Modal>\n  );\n}\n","import {\n  isAddressZero,\n  USD_DECIMALS,\n  MAX_REFERRAL_CODE_LENGTH,\n  getTwitterIntentURL,\n  REFERRAL_CODE_QUERY_PARAM,\n} from \"lib/legacy\";\nimport { encodeReferralCode, getReferralCodeOwner } from \"domain/referrals\";\nimport { ARBITRUM, POLYGON } from \"config/chains\";\nimport { bigNumberify, formatAmount } from \"lib/numbers\";\nimport { t } from \"@lingui/macro\";\nimport { getRootUrl } from \"lib/url\";\n\nexport const REFERRAL_CODE_REGEX = /^\\w+$/; // only number, string and underscore is allowed\nexport const REGEX_VERIFY_BYTES32 = /^0x[0-9a-f]{64}$/;\n\nexport function isRecentReferralCodeNotExpired(referralCodeInfo) {\n  const REFERRAL_DATA_MAX_TIME = 60000 * 5; // 5 minutes\n  if (referralCodeInfo.time) {\n    return referralCodeInfo.time + REFERRAL_DATA_MAX_TIME > Date.now();\n  }\n}\n\nexport async function getReferralCodeTakenStatus(account, referralCode, chainId) {\n  const referralCodeBytes32 = encodeReferralCode(referralCode);\n  const [ownerArbitrum, ownerMatic] = await Promise.all([\n    getReferralCodeOwner(ARBITRUM, referralCodeBytes32),\n    getReferralCodeOwner(POLYGON, referralCodeBytes32),\n  ]);\n\n  const takenOnArb =\n    !isAddressZero(ownerArbitrum) && (ownerArbitrum !== account || (ownerArbitrum === account && chainId === ARBITRUM));\n  const takenOnMatic =\n    !isAddressZero(ownerMatic) && (ownerMatic !== account || (ownerMatic === account && chainId === POLYGON));\n\n  const referralCodeTakenInfo = {\n    [ARBITRUM]: takenOnArb,\n    [POLYGON]: takenOnMatic,\n    both: takenOnArb && takenOnMatic,\n    ownerArbitrum,\n    ownerMatic,\n  };\n\n  if (referralCodeTakenInfo.both) {\n    return { status: \"all\", info: referralCodeTakenInfo };\n  }\n  if (referralCodeTakenInfo[chainId]) {\n    return { status: \"current\", info: referralCodeTakenInfo };\n  }\n  if (chainId === POLYGON ? referralCodeTakenInfo[ARBITRUM] : referralCodeTakenInfo[POLYGON]) {\n    return { status: \"other\", info: referralCodeTakenInfo };\n  }\n  return { status: \"none\", info: referralCodeTakenInfo };\n}\n\nexport function getTierIdDisplay(tierId) {\n  return Number(tierId) + 1;\n}\n\nexport const tierRebateInfo = {\n  0: 5,\n  1: 10,\n  2: 15,\n};\n\nexport const tierDiscountInfo = {\n  0: 5,\n  1: 10,\n  2: 10,\n};\n\nfunction areObjectsWithSameKeys(obj1, obj2) {\n  return Object.keys(obj1).every((key) => key in obj2);\n}\n\nexport function deserializeSampleStats(input) {\n  const parsedData = JSON.parse(input);\n  if (!Array.isArray(parsedData)) return [];\n  return parsedData\n    .map((data) => {\n      if (!areObjectsWithSameKeys(getSampleReferrarStat(), data)) return null;\n      return Object.keys(data).reduce((acc, cv) => {\n        const currentValue = data[cv];\n        if (currentValue?.type === \"BigNumber\") {\n          acc[cv] = bigNumberify(currentValue.hex || 0);\n        } else {\n          acc[cv] = currentValue;\n        }\n        return acc;\n      }, {});\n    })\n    .filter(Boolean);\n}\n\nexport const getSampleReferrarStat = (code = \"\", ownerOnOtherNetwork = \"\", account = \"\") => {\n  return {\n    discountUsd: bigNumberify(0),\n    referralCode: code,\n    totalRebateUsd: bigNumberify(0),\n    tradedReferralsCount: 0,\n    registeredReferralsCount: 0,\n    trades: 0,\n    volume: bigNumberify(0),\n    time: Date.now(),\n    ownerOnOtherChain: {\n      code: encodeReferralCode(code),\n      codeString: code,\n      owner: undefined,\n      isTaken: !isAddressZero(ownerOnOtherNetwork),\n      isTakenByCurrentUser:\n        !isAddressZero(ownerOnOtherNetwork) && ownerOnOtherNetwork.toLowerCase() === account.toLowerCase(),\n    },\n  };\n};\n\nexport function getUSDValue(value, decimals = 2) {\n  return `$${formatAmount(value, USD_DECIMALS, decimals, true, \"0.00\")}`;\n}\n\nexport function getCodeError(value) {\n  const trimmedValue = value.trim();\n  if (!trimmedValue) return \"\";\n\n  if (trimmedValue.length > MAX_REFERRAL_CODE_LENGTH) {\n    return t`The referral code can't be more than ${MAX_REFERRAL_CODE_LENGTH} characters.`;\n  }\n\n  if (!REFERRAL_CODE_REGEX.test(trimmedValue)) {\n    return t`Only letters, numbers and underscores are allowed.`;\n  }\n  return \"\";\n}\n\nexport function getReferralCodeTradeUrl(referralCode) {\n  return `${getRootUrl()}/#/trade/?${REFERRAL_CODE_QUERY_PARAM}=${referralCode}`;\n}\n\nexport function getTwitterShareUrl(referralCode) {\n  const message = [\"Trying out trading on @amxdex, up to 30x leverage on $BTC, $ETH 📈\", \"For fee discounts use:\"];\n  const shareURL = getReferralCodeTradeUrl(referralCode);\n\n  return getTwitterIntentURL(message, shareURL);\n}\n","export function getRootUrl() {\n  const { origin, protocol, hostname, port } = window.location;\n  let url = origin;\n  if (!origin) {\n    const portString = port && `:${port}`;\n    url = `${protocol}//${hostname}${portString}`;\n  }\n  return url;\n}\n","import { ethers } from \"ethers\";\nimport { gql } from \"@apollo/client\";\nimport { useState, useEffect, useMemo } from \"react\";\nimport useSWR from \"swr\";\n\nimport ReferralStorage from \"abis/ReferralStorage.json\";\nimport { MAX_REFERRAL_CODE_LENGTH, isAddressZero, isHashZero } from \"lib/legacy\";\nimport { getContract } from \"config/contracts\";\nimport { REGEX_VERIFY_BYTES32 } from \"components/Referrals/referralsHelper\";\nimport { ARBITRUM, POLYGON } from \"config/chains\";\nimport { arbitrumReferralsGraphClient, polygonReferralsGraphClient } from \"lib/subgraph/clients\";\nimport { callContract, contractFetcher } from \"lib/contracts\";\nimport { helperToast } from \"lib/helperToast\";\nimport { REFERRAL_CODE_KEY } from \"config/localStorage\";\nimport { getProvider } from \"lib/rpc\";\nimport { bigNumberify } from \"lib/numbers\";\n\nconst ACTIVE_CHAINS = [ARBITRUM, POLYGON];\nconst DISTRIBUTION_TYPE_REBATES = \"1\";\nconst DISTRIBUTION_TYPE_DISCOUNT = \"2\";\n\nfunction getGraphClient(chainId) {\n  if (chainId === ARBITRUM) {\n    return arbitrumReferralsGraphClient;\n  } else if (chainId === POLYGON) {\n    return polygonReferralsGraphClient;\n  }\n  throw new Error(`Unsupported chain ${chainId}`);\n}\n\nexport function decodeReferralCode(hexCode) {\n  try {\n    return ethers.utils.parseBytes32String(hexCode);\n  } catch (ex) {\n    let code = \"\";\n    hexCode = hexCode.substring(2);\n    for (let i = 0; i < 32; i++) {\n      code += String.fromCharCode(parseInt(hexCode.substring(i * 2, i * 2 + 2), 16));\n    }\n    return code.trim();\n  }\n}\n\nexport function encodeReferralCode(code) {\n  let final = code.replace(/[^\\w_]/g, \"\"); // replace everything other than numbers, string  and underscor to ''\n  if (final.length > MAX_REFERRAL_CODE_LENGTH) {\n    return ethers.constants.HashZero;\n  }\n  return ethers.utils.formatBytes32String(final);\n}\n\nasync function getCodeOwnersData(network, account, codes = []) {\n  if (codes.length === 0 || !account || !network) {\n    return undefined;\n  }\n  const query = gql`\n    query allCodes($codes: [String!]!) {\n      referralCodes(where: { code_in: $codes }) {\n        owner\n        id\n      }\n    }\n  `;\n  return getGraphClient(network)\n    .query({ query, variables: { codes } })\n    .then(({ data }) => {\n      const { referralCodes } = data;\n      const codeOwners = referralCodes.reduce((acc, cv) => {\n        acc[cv.id] = cv.owner;\n        return acc;\n      }, {});\n      return codes.map((code) => {\n        const owner = codeOwners[code];\n        return {\n          code,\n          codeString: decodeReferralCode(code),\n          owner,\n          isTaken: Boolean(owner),\n          isTakenByCurrentUser: owner && owner.toLowerCase() === account.toLowerCase(),\n        };\n      });\n    });\n}\n\nexport function useUserCodesOnAllChain(account) {\n  const [data, setData] = useState(null);\n  const query = gql`\n    query referralCodesOnAllChain($account: String!) {\n      referralCodes(first: 1000, where: { owner: $account }) {\n        code\n      }\n    }\n  `;\n  useEffect(() => {\n    async function main() {\n      const [arbitrumCodes, polygonCodes] = await Promise.all(\n        ACTIVE_CHAINS.map((chainId) => {\n          return getGraphClient(chainId)\n            .query({ query, variables: { account: (account || \"\").toLowerCase() } })\n            .then(({ data }) => {\n              return data.referralCodes.map((c) => c.code);\n            });\n        })\n      );\n      const [codeOwnersOnMatic = [], codeOwnersOnArbitrum = []] = await Promise.all([\n        getCodeOwnersData(POLYGON, account, arbitrumCodes),\n        getCodeOwnersData(ARBITRUM, account, polygonCodes),\n      ]);\n\n      setData({\n        [ARBITRUM]: codeOwnersOnMatic.reduce((acc, cv) => {\n          acc[cv.code] = cv;\n          return acc;\n        }, {}),\n        [POLYGON]: codeOwnersOnArbitrum.reduce((acc, cv) => {\n          acc[cv.code] = cv;\n          return acc;\n        }, {}),\n      });\n    }\n\n    main();\n  }, [account, query]);\n  return data;\n}\n\nexport function useReferralsData(chainId, account) {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const ownerOnOtherChain = useUserCodesOnAllChain(account);\n  useEffect(() => {\n    if (!chainId || !account) {\n      setLoading(false);\n      return;\n    }\n    const startOfDayTimestamp = Math.floor(parseInt(Date.now() / 1000) / 86400) * 86400;\n    const query = gql`\n      query referralData($typeIds: [String!]!, $account: String!, $timestamp: Int!, $referralTotalStatsId: String!) {\n        distributions(\n          first: 1000\n          orderBy: timestamp\n          orderDirection: desc\n          where: { receiver: $account, typeId_in: $typeIds }\n        ) {\n          receiver\n          amount\n          typeId\n          token\n          transactionHash\n          timestamp\n        }\n        referrerTotalStats: referrerStats(\n          first: 1000\n          orderBy: volume\n          orderDirection: desc\n          where: { period: total, referrer: $account }\n        ) {\n          referralCode\n          volume\n          trades\n          tradedReferralsCount\n          registeredReferralsCount\n          totalRebateUsd\n          discountUsd\n        }\n        referrerLastDayStats: referrerStats(\n          first: 1000\n          where: { period: daily, referrer: $account, timestamp: $timestamp }\n        ) {\n          referralCode\n          volume\n          trades\n          tradedReferralsCount\n          registeredReferralsCount\n          totalRebateUsd\n          discountUsd\n        }\n        referralCodes(first: 1000, where: { owner: $account }) {\n          code\n        }\n        referralTotalStats: referralStat(id: $referralTotalStatsId) {\n          volume\n          discountUsd\n        }\n        referrerTierInfo: referrer(id: $account) {\n          tierId\n          id\n          discountShare\n        }\n      }\n    `;\n    setLoading(true);\n    console.log(\"---shark useReferralsData\");\n    let typeIds = [DISTRIBUTION_TYPE_REBATES, DISTRIBUTION_TYPE_DISCOUNT];\n    let account1 =  (account || \"\").toLowerCase();\n    let timestamp =  startOfDayTimestamp;\n    let referralTotalStatsId = account && `total:0:${account.toLowerCase()}`;\n\n    getGraphClient(chainId)\n      .query({\n        query,\n        variables: {\n          typeIds: [DISTRIBUTION_TYPE_REBATES, DISTRIBUTION_TYPE_DISCOUNT],\n          account: (account || \"\").toLowerCase(),\n          timestamp: startOfDayTimestamp,\n          referralTotalStatsId: account && `total:0:${account.toLowerCase()}`,\n        },\n      })\n      .then((res) => {\n        const rebateDistributions = [];\n        const discountDistributions = [];\n        res.data.distributions.forEach((d) => {\n          const item = {\n            timestamp: parseInt(d.timestamp),\n            transactionHash: d.transactionHash,\n            receiver: ethers.utils.getAddress(d.receiver),\n            amount: bigNumberify(d.amount),\n            typeId: d.typeId,\n            token: ethers.utils.getAddress(d.token),\n          };\n          if (d.typeId === DISTRIBUTION_TYPE_REBATES) {\n            rebateDistributions.push(item);\n          } else {\n            discountDistributions.push(item);\n          }\n        });\n\n        function prepareStatsItem(e) {\n          return {\n            volume: bigNumberify(e.volume),\n            trades: parseInt(e.trades),\n            tradedReferralsCount: parseInt(e.tradedReferralsCount),\n            registeredReferralsCount: parseInt(e.registeredReferralsCount),\n            totalRebateUsd: bigNumberify(e.totalRebateUsd),\n            discountUsd: bigNumberify(e.discountUsd),\n            referralCode: decodeReferralCode(e.referralCode),\n            ownerOnOtherChain: ownerOnOtherChain?.[chainId][e.referralCode],\n          };\n        }\n\n        function getCumulativeStats(data = []) {\n          return data.reduce(\n            (acc, cv) => {\n              acc.totalRebateUsd = acc.totalRebateUsd.add(cv.totalRebateUsd);\n              acc.volume = acc.volume.add(cv.volume);\n              acc.discountUsd = acc.discountUsd.add(cv.discountUsd);\n              acc.trades = acc.trades + cv.trades;\n              acc.tradedReferralsCount = acc.tradedReferralsCount + cv.tradedReferralsCount;\n              acc.registeredReferralsCount = acc.registeredReferralsCount + cv.registeredReferralsCount;\n              return acc;\n            },\n            {\n              totalRebateUsd: bigNumberify(0),\n              volume: bigNumberify(0),\n              discountUsd: bigNumberify(0),\n              trades: 0,\n              tradedReferralsCount: 0,\n              registeredReferralsCount: 0,\n            }\n          );\n        }\n\n        let referrerTotalStats = res.data.referrerTotalStats.map(prepareStatsItem);\n        setData({\n          rebateDistributions,\n          discountDistributions,\n          referrerTotalStats,\n          referrerTierInfo: res.data.referrerTierInfo,\n          referrerLastDayStats: res.data.referrerLastDayStats.map(prepareStatsItem),\n          cumulativeStats: getCumulativeStats(referrerTotalStats),\n          codes: res.data.referralCodes.map((e) => decodeReferralCode(e.code)),\n          referralTotalStats: res.data.referralTotalStats\n            ? {\n                volume: bigNumberify(res.data.referralTotalStats.volume),\n                discountUsd: bigNumberify(res.data.referralTotalStats.discountUsd),\n              }\n            : {\n                volume: bigNumberify(0),\n                discountUsd: bigNumberify(0),\n              },\n        });\n      })\n      .catch(console.warn)\n      .finally(() => {\n        setLoading(false);\n      });\n  }, [setData, chainId, account, ownerOnOtherChain]);\n\n  return {\n    data: data || null,\n    loading,\n  };\n}\n\nexport async function registerReferralCode(chainId, referralCode, library, opts) {\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\n  const referralCodeHex = encodeReferralCode(referralCode);\n  const contract = new ethers.Contract(referralStorageAddress, ReferralStorage.abi, library.getSigner());\n  return callContract(chainId, contract, \"registerCode\", [referralCodeHex], opts);\n}\n\nexport async function setTraderReferralCodeByUser(chainId, referralCode, library, opts) {\n  const referralCodeHex = encodeReferralCode(referralCode);\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\n  const contract = new ethers.Contract(referralStorageAddress, ReferralStorage.abi, library.getSigner());\n  const codeOwner = await contract.codeOwners(referralCodeHex);\n  if (isAddressZero(codeOwner)) {\n    const errorMsg = \"Referral code does not exist\";\n    helperToast.error(errorMsg);\n    return Promise.reject(errorMsg);\n  }\n  return callContract(chainId, contract, \"setTraderReferralCodeByUser\", [referralCodeHex], opts);\n}\n\nexport async function getReferralCodeOwner(chainId, referralCode) {\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\n  const provider = getProvider(null, chainId);\n  const contract = new ethers.Contract(referralStorageAddress, ReferralStorage.abi, provider);\n  const codeOwner = await contract.codeOwners(referralCode);\n  return codeOwner;\n}\n\nexport function useUserReferralCode(library, chainId, account) {\n  const localStorageCode = window.localStorage.getItem(REFERRAL_CODE_KEY);\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\n  const { data: onChainCode } = useSWR(\n    account && [\"ReferralStorage\", chainId, referralStorageAddress, \"traderReferralCodes\", account],\n    { fetcher: contractFetcher(library, ReferralStorage) }\n  );\n  const { data: localStorageCodeOwner } = useSWR(\n    localStorageCode &&\n      REGEX_VERIFY_BYTES32.test(localStorageCode) && [\n        \"ReferralStorage\",\n        chainId,\n        referralStorageAddress,\n        \"codeOwners\",\n        localStorageCode,\n      ],\n    { fetcher: contractFetcher(library, ReferralStorage) }\n  );\n  const [attachedOnChain, userReferralCode, userReferralCodeString] = useMemo(() => {\n    if (onChainCode && !isHashZero(onChainCode)) {\n      return [true, onChainCode, decodeReferralCode(onChainCode)];\n    } else if (localStorageCodeOwner && !isAddressZero(localStorageCodeOwner)) {\n      return [false, localStorageCode, decodeReferralCode(localStorageCode)];\n    }\n    return [false];\n  }, [localStorageCode, localStorageCodeOwner, onChainCode]);\n\n  return {\n    userReferralCode,\n    userReferralCodeString,\n    attachedOnChain,\n  };\n}\n\nexport function useReferrerTier(library, chainId, account) {\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\n  const { data: referrerTier, mutate: mutateReferrerTier } = useSWR(\n    account && [`ReferralStorage:referrerTiers`, chainId, referralStorageAddress, \"referrerTiers\", account],\n    {\n      fetcher: contractFetcher(library, ReferralStorage),\n    }\n  );\n  return {\n    referrerTier,\n    mutateReferrerTier,\n  };\n}\n\nexport function useCodeOwner(library, chainId, account, code) {\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\n  const { data: codeOwner, mutate: mutateCodeOwner } = useSWR(\n    account && code && [`ReferralStorage:codeOwners`, chainId, referralStorageAddress, \"codeOwners\", code],\n    {\n      fetcher: contractFetcher(library, ReferralStorage),\n    }\n  );\n  return {\n    codeOwner,\n    mutateCodeOwner,\n  };\n}\n\nexport async function validateReferralCodeExists(referralCode, chainId) {\n  const referralCodeBytes32 = encodeReferralCode(referralCode);\n  const referralCodeOwner = await getReferralCodeOwner(chainId, referralCodeBytes32);\n  return !isAddressZero(referralCodeOwner);\n}\n\nexport function useAffiliateCodes(chainId, account) {\n  const [affiliateCodes, setAffiliateCodes] = useState({ code: null, success: false });\n  const query = gql`\n    query userReferralCodes($account: String!) {\n      referrerTotalStats: referrerStats(\n        first: 1000\n        orderBy: volume\n        orderDirection: desc\n        where: { period: total, referrer: $account }\n      ) {\n        referralCode\n      }\n    }\n  `;\n  useEffect(() => {\n    if (!chainId) return;\n    getGraphClient(chainId)\n      .query({ query, variables: { account: account?.toLowerCase() } })\n      .then((res) => {\n        const parsedAffiliateCodes = res?.data?.referrerTotalStats.map((c) => decodeReferralCode(c?.referralCode));\n        setAffiliateCodes({ code: parsedAffiliateCodes[0], success: true });\n      });\n    return () => {\n      setAffiliateCodes({ code: null, success: false });\n    };\n  }, [chainId, query, account]);\n  return affiliateCodes;\n}\n","export function get1InchSwapUrl(chainId, from, to) {\n  const rootUrl = `https://app.1inch.io/#/${chainId}/unified/swap`;\n  if (!from && !to) return rootUrl;\n  return `${rootUrl}/${from}/${to}`;\n}\n","import { ethers } from \"ethers\";\nimport Modal from \"../Modal/Modal\";\nimport { get1InchSwapUrl } from \"domain/common\";\nimport { Token, TokenInfo } from \"domain/tokens\";\nimport { getNativeToken } from \"config/tokens\";\nimport { t, Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nconst { AddressZero } = ethers.constants;\n\ntype Props = {\n  chainId: number;\n  modalError: string;\n  isShort: boolean;\n  isLong: boolean;\n  fromToken: Token;\n  toToken: Token;\n  shortCollateralToken: TokenInfo;\n  setModalError: () => void;\n};\n\nexport default function NoLiquidityErrorModal({\n  chainId,\n  fromToken,\n  toToken,\n  shortCollateralToken,\n  isLong,\n  isShort,\n  modalError,\n  setModalError,\n}: Props) {\n  const nativeToken = getNativeToken(chainId);\n  const inputCurrency = fromToken.address === AddressZero ? nativeToken.symbol : fromToken.address;\n  let outputCurrency;\n  if (isLong) {\n    outputCurrency = toToken.address === AddressZero ? nativeToken.symbol : toToken.address;\n  } else {\n    outputCurrency = shortCollateralToken.address;\n  }\n  const swapTokenSymbol = isLong ? toToken.symbol : shortCollateralToken.symbol;\n  const oneInchSwapUrl = get1InchSwapUrl(chainId, inputCurrency, outputCurrency);\n  const label =\n    modalError === \"BUFFER\" ? t`${shortCollateralToken.symbol} Required` : t`${fromToken.symbol} Pool Capacity Reached`;\n\n  return (\n    <Modal isVisible={Boolean(modalError)} setIsVisible={setModalError} label={label} className=\"Error-modal font-base\">\n      <div>\n        <Trans>\n          You need to select {swapTokenSymbol} as the \"Pay\" token to use it for collateral to initiate this trade.\n        </Trans>\n      </div>\n      <br />\n      <div>\n        <Trans>\n          As there is not enough liquidity in $DLP to swap {fromToken.symbol} to {swapTokenSymbol}, you can use the\n          option below to do so:\n        </Trans>\n      </div>\n      <br />\n\n      <ExternalLink href={oneInchSwapUrl}>\n        <Trans>Buy {swapTokenSymbol} on 1inch</Trans>\n      </ExternalLink>\n\n      {isShort && (\n        <div>\n          <Trans>Alternatively, you can select a different \"Collateral In\" token.</Trans>\n          <br />\n        </div>\n      )}\n    </Modal>\n  );\n}\n","import { useEffect, useRef } from \"react\";\n\nexport function usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n","import React, { useEffect, useMemo, useState } from \"react\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport { select, t, Trans } from \"@lingui/macro\";\nimport Slider, { SliderTooltip } from \"rc-slider\";\nimport \"rc-slider/assets/index.css\";\nimport \"./SwapBox.css\";\n\nimport cx from \"classnames\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\n\nimport { IoMdSwap } from \"react-icons/io\";\nimport { BsArrowRight } from \"react-icons/bs\";\n\nimport {\n  adjustForDecimals,\n  BASIS_POINTS_DIVISOR,\n  calculatePositionDelta,\n  DEFAULT_HIGHER_SLIPPAGE_AMOUNT,\n  DUST_BNB,\n  getExchangeRate,\n  getExchangeRateDisplay,\n  getLeverage,\n  getLiquidationPrice,\n  getNextFromAmount,\n  getNextToAmount,\n  getPositionKey,\n  isTriggerRatioInverted,\n  LEVERAGE_ORDER_OPTIONS,\n  LIMIT,\n  LONG,\n  MARGIN_FEE_BASIS_POINTS,\n  MARKET,\n  PRECISION,\n  SHORT,\n  STOP,\n  SWAP,\n  SWAP_OPTIONS,\n  SWAP_ORDER_OPTIONS,\n  USD_DECIMALS,\n  USDG_ADDRESS,\n  USDG_DECIMALS,\n} from \"lib/legacy\";\nimport { ARBITRUM, POLYGON, getChainName, getConstant, IS_NETWORK_DISABLED, isSupportedChain } from \"config/chains\";\nimport * as Api from \"domain/legacy\";\nimport { getContract } from \"config/contracts\";\n\nimport Checkbox from \"../Checkbox/Checkbox\";\nimport Tab from \"../Tab/Tab\";\nimport TokenSelector from \"./TokenSelector\";\nimport ExchangeInfoRow from \"./ExchangeInfoRow\";\nimport ConfirmationBox from \"./ConfirmationBox\";\nimport OrdersToa from \"./OrdersToa\";\n\nimport PositionRouter from \"abis/PositionRouter.json\";\nimport Router from \"abis/Router.json\";\nimport Token from \"abis/Token.json\";\nimport WETH from \"abis/WETH.json\";\n\nimport longImg from \"img/long.svg\";\nimport shortImg from \"img/short.svg\";\nimport swapImg from \"img/swap.svg\";\n\nimport { useUserReferralCode } from \"domain/referrals\";\nimport NoLiquidityErrorModal from \"./NoLiquidityErrorModal\";\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\nimport { callContract, contractFetcher } from \"lib/contracts\";\nimport {\n  approveTokens,\n  getMostAbundantStableToken,\n  replaceNativeTokenAddress,\n  shouldRaiseGasError,\n} from \"domain/tokens\";\nimport { useLocalStorageByChainId, useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { helperToast } from \"lib/helperToast\";\nimport { getTokenInfo, getUsd } from \"domain/tokens/utils\";\nimport { usePrevious } from \"lib/usePrevious\";\nimport { bigNumberify, expandDecimals, formatAmount, formatAmountFree, parseValue } from \"lib/numbers\";\nimport { getToken, getTokenBySymbol, getTokens, getWhitelistedTokens } from \"config/tokens\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nconst SWAP_ICONS = {\n  [LONG]: longImg,\n  [SHORT]: shortImg,\n  [SWAP]: swapImg,\n};\n\nconst { AddressZero } = ethers.constants;\n\nconst leverageSliderHandle = (props) => {\n  const { value, dragging, index, ...restProps } = props;\n  return (\n    <SliderTooltip\n      prefixCls=\"rc-slider-tooltip\"\n      overlay={`${parseFloat(value).toFixed(2)}x`}\n      visible={dragging}\n      placement=\"top\"\n      key={index}\n    >\n      <Slider.Handle value={value} {...restProps} />\n    </SliderTooltip>\n  );\n};\n\nfunction getNextAveragePrice({ size, sizeDelta, hasProfit, delta, nextPrice, isLong }) {\n  if (!size || !sizeDelta || !delta || !nextPrice) {\n    return;\n  }\n  const nextSize = size.add(sizeDelta);\n  let divisor;\n  if (isLong) {\n    divisor = hasProfit ? nextSize.add(delta) : nextSize.sub(delta);\n  } else {\n    divisor = hasProfit ? nextSize.sub(delta) : nextSize.add(delta);\n  }\n  if (!divisor || divisor.eq(0)) {\n    return;\n  }\n  const nextAveragePrice = nextPrice.mul(nextSize).div(divisor);\n  return nextAveragePrice;\n}\n\nexport default function SwapBox(props) {\n  const {\n    pendingPositions,\n    setPendingPositions,\n    infoTokens,\n    active,\n    library,\n    account,\n    fromTokenAddress,\n    setFromTokenAddress,\n    toTokenAddress,\n    setToTokenAddress,\n    swapOption,\n    setSwapOption,\n    positionsMap,\n    pendingTxns,\n    setPendingTxns,\n    tokenSelection,\n    setTokenSelection,\n    setIsConfirming,\n    isConfirming,\n    isPendingConfirmation,\n    setIsPendingConfirmation,\n    flagOrdersEnabled,\n    chainId,\n    nativeTokenAddress,\n    savedSlippageAmount,\n    totalTokenWeights,\n    usdgSupply,\n    orders,\n    savedIsPnlInLeverage,\n    orderBookApproved,\n    positionRouterApproved,\n    isWaitingForPluginApproval,\n    approveOrderBook,\n    approvePositionRouter,\n    setIsWaitingForPluginApproval,\n    isWaitingForPositionRouterApproval,\n    setIsWaitingForPositionRouterApproval,\n    isPluginApproving,\n    isPositionRouterApproving,\n    savedShouldDisableValidationForTesting,\n    minExecutionFee,\n    minExecutionFeeUSD,\n    minExecutionFeeErrorMessage,\n  } = props;\n\n  const [fromValue, setFromValue] = useState(\"\");\n  const [toValue, setToValue] = useState(\"\");\n  const [anchorOnFromAmount, setAnchorOnFromAmount] = useState(true);\n  const [isApproving, setIsApproving] = useState(false);\n  const [isWaitingForApproval, setIsWaitingForApproval] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [modalError, setModalError] = useState(false);\n  const [isHigherSlippageAllowed, setIsHigherSlippageAllowed] = useState(false);\n  const { attachedOnChain, userReferralCode } = useUserReferralCode(library, chainId, account);\n\n  let allowedSlippage = savedSlippageAmount;\n  if (isHigherSlippageAllowed) {\n    allowedSlippage = DEFAULT_HIGHER_SLIPPAGE_AMOUNT;\n  }\n\n  const defaultCollateralSymbol = getConstant(chainId, \"defaultCollateralSymbol\");\n  // TODO hack with useLocalStorageSerializeKey\n  const [shortCollateralAddress, setShortCollateralAddress] = useLocalStorageByChainId(\n    chainId,\n    \"Short-Collateral-Address\",\n    getTokenBySymbol(chainId, defaultCollateralSymbol).address\n  );\n  const isLong = swapOption === LONG;\n  const isShort = swapOption === SHORT;\n  const isSwap = swapOption === SWAP;\n\n  const getLeaderboardLink = () => {\n    if (chainId === ARBITRUM) {\n      return \"https://www.gmx.house/arbitrum/leaderboard\";\n    }\n    if (chainId === POLYGON) {\n      return \"https://www.gmx.house/polygon/leaderboard\";\n    }\n    if (chainId === POLYGON) {\n      return \"https://www.gmx.house/polygon/leaderboard\";\n    }\n    return \"https://www.gmx.house\";\n  };\n\n  function getTokenLabel() {\n    switch (true) {\n      case isLong:\n        return t`Long`;\n      case isShort:\n        return t`Short`;\n      case isSwap:\n        return t`Receive`;\n      default:\n        return \"\";\n    }\n  }\n  const [leverageOption, setLeverageOption] = useLocalStorageSerializeKey(\n    [chainId, \"Exchange-swap-leverage-option\"],\n    \"2\"\n  );\n  const [isLeverageSliderEnabled, setIsLeverageSliderEnabled] = useLocalStorageSerializeKey(\n    [chainId, \"Exchange-swap-leverage-slider-enabled\"],\n    true\n  );\n\n  const hasLeverageOption = isLeverageSliderEnabled && !isNaN(parseFloat(leverageOption));\n\n  const [ordersToaOpen, setOrdersToaOpen] = useState(false);\n\n  let [orderOption, setOrderOption] = useLocalStorageSerializeKey([chainId, \"Order-option\"], MARKET);\n  if (!flagOrdersEnabled) {\n    orderOption = MARKET;\n  }\n\n  const onOrderOptionChange = (option) => {\n    setOrderOption(option);\n  };\n\n  const isMarketOrder = orderOption === MARKET;\n  const orderOptions = isSwap ? SWAP_ORDER_OPTIONS : LEVERAGE_ORDER_OPTIONS;\n  const orderOptionLabels = { [STOP]: t`Trigger`, [MARKET]: t`Market`, [LIMIT]: t`Limit` };\n\n  const [triggerPriceValue, setTriggerPriceValue] = useState(\"\");\n  const triggerPriceUsd = isMarketOrder ? 0 : parseValue(triggerPriceValue, USD_DECIMALS);\n\n  const onTriggerPriceChange = (evt) => {\n    setTriggerPriceValue(evt.target.value || \"\");\n  };\n\n  const onTriggerRatioChange = (evt) => {\n    setTriggerRatioValue(evt.target.value || \"\");\n  };\n\n  let positionKey;\n  if (isLong) {\n    positionKey = getPositionKey(account, toTokenAddress, toTokenAddress, true, nativeTokenAddress);\n  }\n  if (isShort) {\n    positionKey = getPositionKey(account, shortCollateralAddress, toTokenAddress, false, nativeTokenAddress);\n  }\n\n  const existingPosition = positionKey ? positionsMap[positionKey] : undefined;\n  const hasExistingPosition = existingPosition && existingPosition.size && existingPosition.size.gt(0);\n\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const tokens = getTokens(chainId);\n  const fromTokens = tokens;\n  const stableTokens = tokens.filter((token) => token.isStable);\n  const indexTokens = whitelistedTokens.filter((token) => !token.isStable && !token.isWrapped);\n  const shortableTokens = indexTokens.filter((token) => token.isShortable);\n\n  let toTokens = tokens;\n  if (isLong) {\n    toTokens = indexTokens;\n  }\n  if (isShort) {\n    toTokens = shortableTokens;\n  }\n\n  const needOrderBookApproval = !isMarketOrder && !orderBookApproved;\n  const prevNeedOrderBookApproval = usePrevious(needOrderBookApproval);\n\n  const needPositionRouterApproval = (isLong || isShort) && isMarketOrder && !positionRouterApproved;\n  const prevNeedPositionRouterApproval = usePrevious(needPositionRouterApproval);\n\n  useEffect(() => {\n    if (!needOrderBookApproval && prevNeedOrderBookApproval && isWaitingForPluginApproval) {\n      setIsWaitingForPluginApproval(false);\n      helperToast.success(<div>Orders enabled!</div>);\n    }\n  }, [needOrderBookApproval, prevNeedOrderBookApproval, setIsWaitingForPluginApproval, isWaitingForPluginApproval]);\n\n  useEffect(() => {\n    if (!needPositionRouterApproval && prevNeedPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      setIsWaitingForPositionRouterApproval(false);\n      helperToast.success(<div>Leverage enabled!</div>);\n    }\n  }, [\n    needPositionRouterApproval,\n    prevNeedPositionRouterApproval,\n    setIsWaitingForPositionRouterApproval,\n    isWaitingForPositionRouterApproval,\n  ]);\n\n  useEffect(() => {\n    if (!needOrderBookApproval && prevNeedOrderBookApproval && isWaitingForPluginApproval) {\n      setIsWaitingForPluginApproval(false);\n      helperToast.success(<div>Orders enabled!</div>);\n    }\n  }, [needOrderBookApproval, prevNeedOrderBookApproval, setIsWaitingForPluginApproval, isWaitingForPluginApproval]);\n\n  const routerAddress = getContract(chainId, \"Router\");\n  const tokenAllowanceAddress = fromTokenAddress === AddressZero ? nativeTokenAddress : fromTokenAddress;\n  const { data: tokenAllowance } = useSWR(\n    active && [active, chainId, tokenAllowanceAddress, \"allowance\", account, routerAddress],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  const { data: hasOutdatedUi } = Api.useHasOutdatedUi();\n\n  const fromToken = getToken(chainId, fromTokenAddress);\n  const toToken = getToken(chainId, toTokenAddress);\n  const shortCollateralToken = getTokenInfo(infoTokens, shortCollateralAddress);\n\n  const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\n  const toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n\n  const renderAvailableLongLiquidity = () => {\n    if (!isLong) {\n      return null;\n    }\n\n    return (\n      <div className=\"Exchange-info-row\">\n        <div className=\"Exchange-info-label\">\n          <Trans>Available Liquidity</Trans>\n        </div>\n        <div className=\"align-right\">\n          <Tooltip\n            handle={`$${formatAmount(toTokenInfo.maxAvailableLong, USD_DECIMALS, 2, true)}`}\n            position=\"right-bottom\"\n            renderContent={() => {\n              return (\n                <>\n                  <StatsTooltipRow\n                    label={t`Max ${toTokenInfo.symbol} long capacity`}\n                    value={formatAmount(toTokenInfo.maxLongCapacity, USD_DECIMALS, 0, true)}\n                  />\n                  <StatsTooltipRow\n                    label={t`Current ${toTokenInfo.symbol} long`}\n                    value={formatAmount(toTokenInfo.guaranteedUsd, USD_DECIMALS, 0, true)}\n                  />\n                </>\n              );\n            }}\n          ></Tooltip>\n        </div>\n      </div>\n    );\n  };\n\n  const fromBalance = fromTokenInfo ? fromTokenInfo.balance : bigNumberify(0);\n  const toBalance = toTokenInfo ? toTokenInfo.balance : bigNumberify(0);\n\n  const fromAmount = parseValue(fromValue, fromToken && fromToken.decimals);\n  const toAmount = parseValue(toValue, toToken && toToken.decimals);\n\n  const isPotentialWrap = (fromToken.isNative && toToken.isWrapped) || (fromToken.isWrapped && toToken.isNative);\n  const isWrapOrUnwrap = isSwap && isPotentialWrap;\n  const needApproval =\n    fromTokenAddress !== AddressZero &&\n    tokenAllowance &&\n    fromAmount &&\n    fromAmount.gt(tokenAllowance) &&\n    !isWrapOrUnwrap;\n  const prevFromTokenAddress = usePrevious(fromTokenAddress);\n  const prevNeedApproval = usePrevious(needApproval);\n  const prevToTokenAddress = usePrevious(toTokenAddress);\n\n  const fromUsdMin = getUsd(fromAmount, fromTokenAddress, false, infoTokens);\n  const toUsdMax = getUsd(toAmount, toTokenAddress, true, infoTokens, orderOption, triggerPriceUsd);\n\n  const indexTokenAddress = toTokenAddress === AddressZero ? nativeTokenAddress : toTokenAddress;\n  const collateralTokenAddress = isLong ? indexTokenAddress : shortCollateralAddress;\n  const collateralToken = getToken(chainId, collateralTokenAddress);\n\n  const [triggerRatioValue, setTriggerRatioValue] = useState(\"\");\n\n  const triggerRatioInverted = useMemo(() => {\n    return isTriggerRatioInverted(fromTokenInfo, toTokenInfo);\n  }, [toTokenInfo, fromTokenInfo]);\n\n  const maxToTokenOut = useMemo(() => {\n    const value = toTokenInfo.availableAmount?.gt(toTokenInfo.poolAmount?.sub(toTokenInfo.bufferAmount))\n      ? toTokenInfo.poolAmount?.sub(toTokenInfo.bufferAmount)\n      : toTokenInfo.availableAmount;\n\n    if (!value) {\n      return bigNumberify(0);\n    }\n\n    return value.gt(0) ? value : bigNumberify(0);\n  }, [toTokenInfo]);\n\n  const maxToTokenOutUSD = useMemo(() => {\n    return getUsd(maxToTokenOut, toTokenAddress, false, infoTokens);\n  }, [maxToTokenOut, toTokenAddress, infoTokens]);\n\n  const maxFromTokenInUSD = useMemo(() => {\n    const value = fromTokenInfo.maxUsdgAmount\n      ?.sub(fromTokenInfo.usdgAmount)\n      .mul(expandDecimals(1, USD_DECIMALS))\n      .div(expandDecimals(1, USDG_DECIMALS));\n\n    if (!value) {\n      return bigNumberify(0);\n    }\n\n    return value.gt(0) ? value : bigNumberify(0);\n  }, [fromTokenInfo]);\n\n  const maxFromTokenIn = useMemo(() => {\n    if (!fromTokenInfo.maxPrice) {\n      return bigNumberify(0);\n    }\n    return maxFromTokenInUSD?.mul(expandDecimals(1, fromTokenInfo.decimals)).div(fromTokenInfo.maxPrice).toString();\n  }, [maxFromTokenInUSD, fromTokenInfo]);\n\n  let maxSwapAmountUsd = bigNumberify(0);\n\n  if (maxToTokenOutUSD && maxFromTokenInUSD) {\n    maxSwapAmountUsd = maxToTokenOutUSD.lt(maxFromTokenInUSD) ? maxToTokenOutUSD : maxFromTokenInUSD;\n  }\n\n  const triggerRatio = useMemo(() => {\n    if (!triggerRatioValue) {\n      return bigNumberify(0);\n    }\n    let ratio = parseValue(triggerRatioValue, USD_DECIMALS);\n    if (ratio.eq(0)) {\n      return bigNumberify(0);\n    }\n    if (triggerRatioInverted) {\n      ratio = PRECISION.mul(PRECISION).div(ratio);\n    }\n    return ratio;\n  }, [triggerRatioValue, triggerRatioInverted]);\n\n  useEffect(() => {\n    if (\n      fromToken &&\n      fromTokenAddress === prevFromTokenAddress &&\n      !needApproval &&\n      prevNeedApproval &&\n      isWaitingForApproval\n    ) {\n      setIsWaitingForApproval(false);\n      helperToast.success(<div>{fromToken.symbol} approved!</div>);\n    }\n  }, [\n    fromTokenAddress,\n    prevFromTokenAddress,\n    needApproval,\n    prevNeedApproval,\n    setIsWaitingForApproval,\n    fromToken.symbol,\n    isWaitingForApproval,\n    fromToken,\n  ]);\n\n  useEffect(() => {\n    if (!toTokens.find((token) => token.address === toTokenAddress)) {\n      setToTokenAddress(swapOption, toTokens[0].address);\n    }\n  }, [swapOption, toTokens, toTokenAddress, setToTokenAddress]);\n\n  useEffect(() => {\n    if (swapOption !== SHORT) {\n      return;\n    }\n    if (toTokenAddress === prevToTokenAddress) {\n      return;\n    }\n    for (let i = 0; i < stableTokens.length; i++) {\n      const stableToken = stableTokens[i];\n      const key = getPositionKey(account, stableToken.address, toTokenAddress, false, nativeTokenAddress);\n      const position = positionsMap[key];\n      if (position && position.size && position.size.gt(0)) {\n        setShortCollateralAddress(position.collateralToken.address);\n        return;\n      }\n    }\n  }, [\n    account,\n    toTokenAddress,\n    prevToTokenAddress,\n    swapOption,\n    positionsMap,\n    stableTokens,\n    nativeTokenAddress,\n    shortCollateralAddress,\n    setShortCollateralAddress,\n  ]);\n\n  useEffect(() => {\n    const updateSwapAmounts = () => {\n      if (anchorOnFromAmount) {\n        if (!fromAmount) {\n          setToValue(\"\");\n          return;\n        }\n        if (toToken) {\n          const { amount: nextToAmount } = getNextToAmount(\n            chainId,\n            fromAmount,\n            fromTokenAddress,\n            toTokenAddress,\n            infoTokens,\n            undefined,\n            !isMarketOrder && triggerRatio,\n            usdgSupply,\n            totalTokenWeights,\n            isSwap\n          );\n\n          const nextToValue = formatAmountFree(nextToAmount, toToken.decimals, toToken.decimals);\n          setToValue(nextToValue);\n        }\n        return;\n      }\n\n      if (!toAmount) {\n        setFromValue(\"\");\n        return;\n      }\n      if (fromToken) {\n        const { amount: nextFromAmount } = getNextFromAmount(\n          chainId,\n          toAmount,\n          fromTokenAddress,\n          toTokenAddress,\n          infoTokens,\n          undefined,\n          !isMarketOrder && triggerRatio,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n        const nextFromValue = formatAmountFree(nextFromAmount, fromToken.decimals, fromToken.decimals);\n        setFromValue(nextFromValue);\n      }\n    };\n\n    const updateLeverageAmounts = () => {\n      if (!hasLeverageOption) {\n        return;\n      }\n      if (anchorOnFromAmount) {\n        if (!fromAmount) {\n          setToValue(\"\");\n          return;\n        }\n\n        const toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n        if (toTokenInfo && toTokenInfo.maxPrice && fromUsdMin && fromUsdMin.gt(0)) {\n          const leverageMultiplier = parseInt(leverageOption * BASIS_POINTS_DIVISOR);\n          const toTokenPriceUsd =\n            !isMarketOrder && triggerPriceUsd && triggerPriceUsd.gt(0) ? triggerPriceUsd : toTokenInfo.maxPrice;\n\n          const { feeBasisPoints } = getNextToAmount(\n            chainId,\n            fromAmount,\n            fromTokenAddress,\n            collateralTokenAddress,\n            infoTokens,\n            undefined,\n            undefined,\n            usdgSupply,\n            totalTokenWeights,\n            isSwap\n          );\n\n          let fromUsdMinAfterFee = fromUsdMin;\n          if (feeBasisPoints) {\n            fromUsdMinAfterFee = fromUsdMin.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n          }\n\n          const toNumerator = fromUsdMinAfterFee.mul(leverageMultiplier).mul(BASIS_POINTS_DIVISOR);\n          const toDenominator = bigNumberify(MARGIN_FEE_BASIS_POINTS)\n            .mul(leverageMultiplier)\n            .add(bigNumberify(BASIS_POINTS_DIVISOR).mul(BASIS_POINTS_DIVISOR));\n\n          const nextToUsd = toNumerator.div(toDenominator);\n\n          const nextToAmount = nextToUsd.mul(expandDecimals(1, toToken.decimals)).div(toTokenPriceUsd);\n\n          const nextToValue = formatAmountFree(nextToAmount, toToken.decimals, toToken.decimals);\n\n          setToValue(nextToValue);\n        }\n        return;\n      }\n\n      if (!toAmount) {\n        setFromValue(\"\");\n        return;\n      }\n\n      const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\n      if (fromTokenInfo && fromTokenInfo.minPrice && toUsdMax && toUsdMax.gt(0)) {\n        const leverageMultiplier = parseInt(leverageOption * BASIS_POINTS_DIVISOR);\n\n        const baseFromAmountUsd = toUsdMax.mul(BASIS_POINTS_DIVISOR).div(leverageMultiplier);\n\n        let fees = toUsdMax.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n\n        const { feeBasisPoints } = getNextToAmount(\n          chainId,\n          fromAmount,\n          fromTokenAddress,\n          collateralTokenAddress,\n          infoTokens,\n          undefined,\n          undefined,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n\n        if (feeBasisPoints) {\n          const swapFees = baseFromAmountUsd.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n          fees = fees.add(swapFees);\n        }\n\n        const nextFromUsd = baseFromAmountUsd.add(fees);\n\n        const nextFromAmount = nextFromUsd.mul(expandDecimals(1, fromToken.decimals)).div(fromTokenInfo.minPrice);\n\n        const nextFromValue = formatAmountFree(nextFromAmount, fromToken.decimals, fromToken.decimals);\n\n        setFromValue(nextFromValue);\n      }\n    };\n\n    if (isSwap) {\n      updateSwapAmounts();\n    }\n\n    if (isLong || isShort) {\n      updateLeverageAmounts();\n    }\n  }, [\n    anchorOnFromAmount,\n    fromAmount,\n    toAmount,\n    fromToken,\n    toToken,\n    fromTokenAddress,\n    toTokenAddress,\n    infoTokens,\n    isSwap,\n    isLong,\n    isShort,\n    leverageOption,\n    fromUsdMin,\n    toUsdMax,\n    isMarketOrder,\n    triggerPriceUsd,\n    triggerRatio,\n    hasLeverageOption,\n    usdgSupply,\n    totalTokenWeights,\n    chainId,\n    collateralTokenAddress,\n    indexTokenAddress,\n  ]);\n\n  let entryMarkPrice;\n  let exitMarkPrice;\n  if (toTokenInfo) {\n    entryMarkPrice = swapOption === LONG ? toTokenInfo.maxPrice : toTokenInfo.minPrice;\n    exitMarkPrice = swapOption === LONG ? toTokenInfo.minPrice : toTokenInfo.maxPrice;\n  }\n\n  let leverage = bigNumberify(0);\n  if (fromUsdMin && toUsdMax && fromUsdMin.gt(0)) {\n    const fees = toUsdMax.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n    if (fromUsdMin.sub(fees).gt(0)) {\n      leverage = toUsdMax.mul(BASIS_POINTS_DIVISOR).div(fromUsdMin.sub(fees));\n    }\n  }\n\n  let nextAveragePrice = isMarketOrder ? entryMarkPrice : triggerPriceUsd;\n  if (hasExistingPosition) {\n    let nextDelta, nextHasProfit;\n\n    if (isMarketOrder) {\n      nextDelta = existingPosition.delta;\n      nextHasProfit = existingPosition.hasProfit;\n    } else {\n      const data = calculatePositionDelta(triggerPriceUsd || bigNumberify(0), existingPosition);\n      nextDelta = data.delta;\n      nextHasProfit = data.hasProfit;\n    }\n\n    nextAveragePrice = getNextAveragePrice({\n      size: existingPosition.size,\n      sizeDelta: toUsdMax,\n      hasProfit: nextHasProfit,\n      delta: nextDelta,\n      nextPrice: isMarketOrder ? entryMarkPrice : triggerPriceUsd,\n      isLong,\n    });\n  }\n\n  const liquidationPrice = getLiquidationPrice({\n    isLong,\n    size: hasExistingPosition ? existingPosition.size : bigNumberify(0),\n    collateral: hasExistingPosition ? existingPosition.collateral : bigNumberify(0),\n    averagePrice: nextAveragePrice,\n    entryFundingRate: hasExistingPosition ? existingPosition.entryFundingRate : bigNumberify(0),\n    cumulativeFundingRate: hasExistingPosition ? existingPosition.cumulativeFundingRate : bigNumberify(0),\n    sizeDelta: toUsdMax,\n    collateralDelta: fromUsdMin,\n    increaseCollateral: true,\n    increaseSize: true,\n  });\n\n  const existingLiquidationPrice = existingPosition ? getLiquidationPrice(existingPosition) : undefined;\n  let displayLiquidationPrice = liquidationPrice ? liquidationPrice : existingLiquidationPrice;\n\n  if (hasExistingPosition) {\n    const collateralDelta = fromUsdMin ? fromUsdMin : bigNumberify(0);\n    const sizeDelta = toUsdMax ? toUsdMax : bigNumberify(0);\n    leverage = getLeverage({\n      size: existingPosition.size,\n      sizeDelta,\n      collateral: existingPosition.collateral,\n      collateralDelta,\n      increaseCollateral: true,\n      entryFundingRate: existingPosition.entryFundingRate,\n      cumulativeFundingRate: existingPosition.cumulativeFundingRate,\n      increaseSize: true,\n      hasProfit: existingPosition.hasProfit,\n      delta: existingPosition.delta,\n      includeDelta: savedIsPnlInLeverage,\n    });\n  } else if (hasLeverageOption) {\n    leverage = bigNumberify(parseInt(leverageOption * BASIS_POINTS_DIVISOR));\n  }\n\n  const getSwapError = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      return [t`Swaps disabled, pending ${getChainName(chainId)} upgrade`];\n    }\n\n    if (fromTokenAddress === toTokenAddress) {\n      return [t`Select different tokens`];\n    }\n\n    if (!isMarketOrder) {\n      if ((toToken.isStable || toToken.isUsdg) && (fromToken.isStable || fromToken.isUsdg)) {\n        return [t`Select different tokens`];\n      }\n\n      if (fromToken.isNative && toToken.isWrapped) {\n        return [t`Select different tokens`];\n      }\n\n      if (toToken.isNative && fromToken.isWrapped) {\n        return [t`Select different tokens`];\n      }\n    }\n\n    if (!fromAmount || fromAmount.eq(0)) {\n      return [t`Enter an amount`];\n    }\n    if (!toAmount || toAmount.eq(0)) {\n      return [t`Enter an amount`];\n    }\n\n    const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\n    if (!fromTokenInfo || !fromTokenInfo.minPrice) {\n      return [t`Incorrect network`];\n    }\n    if (\n      !savedShouldDisableValidationForTesting &&\n      fromTokenInfo &&\n      fromTokenInfo.balance &&\n      fromAmount &&\n      fromAmount.gt(fromTokenInfo.balance)\n    ) {\n      return [t`Insufficient ${fromTokenInfo.symbol} balance`];\n    }\n\n    const toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n\n    if (!isMarketOrder) {\n      if (!triggerRatioValue || triggerRatio.eq(0)) {\n        return [t`Enter a price`];\n      }\n\n      const currentRate = getExchangeRate(fromTokenInfo, toTokenInfo);\n      if (currentRate && currentRate.lt(triggerRatio)) {\n        return triggerRatioInverted ? [t`Price below Mark Price`] : [t`Price above Mark Price`];\n      }\n    }\n\n    if (\n      !isWrapOrUnwrap &&\n      toToken &&\n      toTokenAddress !== USDG_ADDRESS &&\n      toTokenInfo &&\n      toTokenInfo.availableAmount &&\n      toAmount.gt(toTokenInfo.availableAmount)\n    ) {\n      return [t`Insufficient liquidity`];\n    }\n    if (\n      !isWrapOrUnwrap &&\n      toAmount &&\n      toTokenInfo.bufferAmount &&\n      toTokenInfo.poolAmount &&\n      toTokenInfo.bufferAmount.gt(toTokenInfo.poolAmount.sub(toAmount))\n    ) {\n      return [t`Insufficient liquidity`];\n    }\n\n    if (\n      fromUsdMin &&\n      fromTokenInfo.maxUsdgAmount &&\n      fromTokenInfo.maxUsdgAmount.gt(0) &&\n      fromTokenInfo.usdgAmount &&\n      fromTokenInfo.maxPrice\n    ) {\n      const usdgFromAmount = adjustForDecimals(fromUsdMin, USD_DECIMALS, USDG_DECIMALS);\n      const nextUsdgAmount = fromTokenInfo.usdgAmount.add(usdgFromAmount);\n\n      if (nextUsdgAmount.gt(fromTokenInfo.maxUsdgAmount)) {\n        return [t`${fromTokenInfo.symbol} pool exceeded`];\n      }\n    }\n\n    return [false];\n  };\n\n  const getLeverageError = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      return [t`Leverage disabled, pending ${getChainName(chainId)} upgrade`];\n    }\n    if (hasOutdatedUi) {\n      return [t`Page outdated, please refresh`];\n    }\n\n    if (!toAmount || toAmount.eq(0)) {\n      return [t`Enter an amount`];\n    }\n\n    let toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n    if (toTokenInfo && toTokenInfo.isStable) {\n      return [t`${select(swapOption, { [LONG]: \"Longing\", [SHORT]: \"Shorting\" })} ${toTokenInfo.symbol} not supported`];\n    }\n\n    const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\n    if (\n      !savedShouldDisableValidationForTesting &&\n      fromTokenInfo &&\n      fromTokenInfo.balance &&\n      fromAmount &&\n      fromAmount.gt(fromTokenInfo.balance)\n    ) {\n      return [t`Insufficient ${fromTokenInfo.symbol} balance`];\n    }\n\n    if (leverage && leverage.eq(0)) {\n      return [t`Enter an amount`];\n    }\n    if (!isMarketOrder && (!triggerPriceValue || triggerPriceUsd.eq(0))) {\n      return [t`Enter a price`];\n    }\n\n    if (!hasExistingPosition && fromUsdMin && fromUsdMin.lt(expandDecimals(10, USD_DECIMALS))) {\n      return [t`Min order: 10 USD`];\n    }\n\n    if (leverage && leverage.lt(1.1 * BASIS_POINTS_DIVISOR)) {\n      return [t`Min leverage: 1.1x`];\n    }\n\n    if (leverage && leverage.gt(30.5 * BASIS_POINTS_DIVISOR)) {\n      return [t`Max leverage: 30.5x`];\n    }\n\n    if (!isMarketOrder && entryMarkPrice && triggerPriceUsd && !savedShouldDisableValidationForTesting) {\n      if (isLong && entryMarkPrice.lt(triggerPriceUsd)) {\n        return [t`Price above Mark Price`];\n      }\n      if (!isLong && entryMarkPrice.gt(triggerPriceUsd)) {\n        return [t`Price below Mark Price`];\n      }\n    }\n\n    if (isLong) {\n      let requiredAmount = toAmount;\n      if (fromTokenAddress !== toTokenAddress) {\n        const { amount: swapAmount } = getNextToAmount(\n          chainId,\n          fromAmount,\n          fromTokenAddress,\n          toTokenAddress,\n          infoTokens,\n          undefined,\n          undefined,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n        requiredAmount = requiredAmount.add(swapAmount);\n\n        if (toToken && toTokenAddress !== USDG_ADDRESS) {\n          if (!toTokenInfo.availableAmount) {\n            return [t`Liquidity data not loaded`];\n          }\n          if (toTokenInfo.availableAmount && requiredAmount.gt(toTokenInfo.availableAmount)) {\n            return [t`Insufficient liquidity`];\n          }\n        }\n\n        if (\n          toTokenInfo.poolAmount &&\n          toTokenInfo.bufferAmount &&\n          toTokenInfo.bufferAmount.gt(toTokenInfo.poolAmount.sub(swapAmount))\n        ) {\n          return [t`Insufficient liquidity`, true, \"BUFFER\"];\n        }\n\n        if (\n          fromUsdMin &&\n          fromTokenInfo.maxUsdgAmount &&\n          fromTokenInfo.maxUsdgAmount.gt(0) &&\n          fromTokenInfo.minPrice &&\n          fromTokenInfo.usdgAmount\n        ) {\n          const usdgFromAmount = adjustForDecimals(fromUsdMin, USD_DECIMALS, USDG_DECIMALS);\n          const nextUsdgAmount = fromTokenInfo.usdgAmount.add(usdgFromAmount);\n          if (nextUsdgAmount.gt(fromTokenInfo.maxUsdgAmount)) {\n            return [t`${fromTokenInfo.symbol} pool exceeded, try different token`, true, \"MAX_USDG\"];\n          }\n        }\n      }\n\n      if (toTokenInfo && toTokenInfo.maxPrice) {\n        const sizeUsd = toAmount.mul(toTokenInfo.maxPrice).div(expandDecimals(1, toTokenInfo.decimals));\n        if (\n          toTokenInfo.maxGlobalLongSize &&\n          toTokenInfo.maxGlobalLongSize.gt(0) &&\n          toTokenInfo.maxAvailableLong &&\n          sizeUsd.gt(toTokenInfo.maxAvailableLong)\n        ) {\n          return [t`Max ${toTokenInfo.symbol} long exceeded`];\n        }\n      }\n    }\n\n    if (isShort) {\n      let stableTokenAmount = bigNumberify(0);\n      if (fromTokenAddress !== shortCollateralAddress && fromAmount && fromAmount.gt(0)) {\n        const { amount: nextToAmount } = getNextToAmount(\n          chainId,\n          fromAmount,\n          fromTokenAddress,\n          shortCollateralAddress,\n          infoTokens,\n          undefined,\n          undefined,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n        stableTokenAmount = nextToAmount;\n        if (stableTokenAmount.gt(shortCollateralToken.availableAmount)) {\n          return [t`Insufficient liquidity, change \"Collateral In\"`];\n        }\n\n        if (\n          shortCollateralToken.bufferAmount &&\n          shortCollateralToken.poolAmount &&\n          shortCollateralToken.bufferAmount.gt(shortCollateralToken.poolAmount.sub(stableTokenAmount))\n        ) {\n          // suggest swapping to collateralToken\n          return [t`Insufficient liquidity, change \"Collateral In\"`, true, \"BUFFER\"];\n        }\n\n        if (\n          fromTokenInfo.maxUsdgAmount &&\n          fromTokenInfo.maxUsdgAmount.gt(0) &&\n          fromTokenInfo.minPrice &&\n          fromTokenInfo.usdgAmount\n        ) {\n          const usdgFromAmount = adjustForDecimals(fromUsdMin, USD_DECIMALS, USDG_DECIMALS);\n          const nextUsdgAmount = fromTokenInfo.usdgAmount.add(usdgFromAmount);\n          if (nextUsdgAmount.gt(fromTokenInfo.maxUsdgAmount)) {\n            return [t`${fromTokenInfo.symbol} pool exceeded, try different token`, true, \"MAX_USDG\"];\n          }\n        }\n      }\n      if (\n        !shortCollateralToken ||\n        !fromTokenInfo ||\n        !toTokenInfo ||\n        !toTokenInfo.maxPrice ||\n        !shortCollateralToken.availableAmount\n      ) {\n        return [t`Fetching token info...`];\n      }\n\n      const sizeUsd = toAmount.mul(toTokenInfo.maxPrice).div(expandDecimals(1, toTokenInfo.decimals));\n      const sizeTokens = sizeUsd\n        .mul(expandDecimals(1, shortCollateralToken.decimals))\n        .div(shortCollateralToken.minPrice);\n\n      if (!toTokenInfo.maxAvailableShort) {\n        return [t`Liquidity data not loaded`];\n      }\n\n      if (\n        toTokenInfo.maxGlobalShortSize &&\n        toTokenInfo.maxGlobalShortSize.gt(0) &&\n        toTokenInfo.maxAvailableShort &&\n        sizeUsd.gt(toTokenInfo.maxAvailableShort)\n      ) {\n        return [t`Max ${toTokenInfo.symbol} short exceeded`];\n      }\n\n      stableTokenAmount = stableTokenAmount.add(sizeTokens);\n      if (stableTokenAmount.gt(shortCollateralToken.availableAmount)) {\n        return [t`Insufficient liquidity, change \"Collateral In\"`];\n      }\n    }\n\n    return [false];\n  };\n\n  const getToLabel = () => {\n    if (isSwap) {\n      return t`Receive`;\n    }\n    if (isLong) {\n      return t`Long`;\n    }\n    return t`Short`;\n  };\n\n  const getError = () => {\n    if (isSwap) {\n      return getSwapError();\n    }\n    return getLeverageError();\n  };\n\n  const renderOrdersToa = () => {\n    if (!ordersToaOpen) {\n      return null;\n    }\n\n    return (\n      <OrdersToa\n        setIsVisible={setOrdersToaOpen}\n        approveOrderBook={approveOrderBook}\n        isPluginApproving={isPluginApproving}\n      />\n    );\n  };\n\n  const isPrimaryEnabled = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      return false;\n    }\n    if (isStopOrder) {\n      return true;\n    }\n    if (!active) {\n      return true;\n    }\n    const [error, modal] = getError();\n    if (error && !modal) {\n      return false;\n    }\n    if (needOrderBookApproval && isWaitingForPluginApproval) {\n      return false;\n    }\n    if ((needApproval && isWaitingForApproval) || isApproving) {\n      return false;\n    }\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return false;\n    }\n    if (isPositionRouterApproving) {\n      return false;\n    }\n    if (isApproving) {\n      return false;\n    }\n    if (isSubmitting) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    if (isStopOrder) {\n      return t`Open a position`;\n    }\n    if (!active) {\n      return t`Connect Wallet`;\n    }\n    if (!isSupportedChain(chainId)) {\n      return t`Incorrect Network`;\n    }\n    const [error, modal] = getError();\n    if (error && !modal) {\n      return error;\n    }\n\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return t`Enabling Leverage...`;\n    }\n    if (isPositionRouterApproving) {\n      return t`Enabling Leverage...`;\n    }\n    if (needPositionRouterApproval) {\n      return t`Enable Leverage`;\n    }\n\n    if (needApproval && isWaitingForApproval) {\n      return t`Waiting for Approval`;\n    }\n    if (isApproving) {\n      return t`Approving ${fromToken.symbol}...`;\n    }\n    if (needApproval) {\n      return t`Approve ${fromToken.symbol}`;\n    }\n\n    if (needOrderBookApproval && isWaitingForPluginApproval) {\n      return t`Enabling Orders...`;\n    }\n    if (isPluginApproving) {\n      return t`Enabling Orders...`;\n    }\n    if (needOrderBookApproval) {\n      return t`Enable Orders`;\n    }\n\n    if (!isMarketOrder) return t`Create ${orderOption.charAt(0) + orderOption.substring(1).toLowerCase()} Order`;\n\n    if (isSwap) {\n      if (toUsdMax && toUsdMax.lt(fromUsdMin.mul(95).div(100))) {\n        return t`High Slippage, Swap Anyway`;\n      }\n      return t`Swap`;\n    }\n\n    if (isLong) {\n      const indexTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n      if (indexTokenInfo && indexTokenInfo.minPrice) {\n        const { amount: nextToAmount } = getNextToAmount(\n          chainId,\n          fromAmount,\n          fromTokenAddress,\n          indexTokenAddress,\n          infoTokens,\n          undefined,\n          undefined,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n        const nextToAmountUsd = nextToAmount\n          .mul(indexTokenInfo.minPrice)\n          .div(expandDecimals(1, indexTokenInfo.decimals));\n        if (fromTokenAddress === USDG_ADDRESS && nextToAmountUsd.lt(fromUsdMin.mul(98).div(100))) {\n          return t`High USDG Slippage, Long Anyway`;\n        }\n      }\n      return t`Long ${toToken.symbol}`;\n    }\n\n    return t`Short ${toToken.symbol}`;\n  };\n\n  const onSelectFromToken = (token) => {\n    setFromTokenAddress(swapOption, token.address);\n    setIsWaitingForApproval(false);\n\n    if (isShort && token.isStable) {\n      setShortCollateralAddress(token.address);\n    }\n  };\n\n  const onSelectShortCollateralAddress = (token) => {\n    setShortCollateralAddress(token.address);\n  };\n\n  const onSelectToToken = (token) => {\n    setToTokenAddress(swapOption, token.address);\n  };\n\n  const onFromValueChange = (e) => {\n    setAnchorOnFromAmount(true);\n    setFromValue(e.target.value);\n  };\n\n  const onToValueChange = (e) => {\n    setAnchorOnFromAmount(false);\n    setToValue(e.target.value);\n  };\n\n  const switchTokens = () => {\n    console.log(\"---shark switchTokens\");\n    if (fromAmount && toAmount) {\n      if (anchorOnFromAmount) {\n        setToValue(formatAmountFree(fromAmount, fromToken.decimals, 8));\n      } else {\n        setFromValue(formatAmountFree(toAmount, toToken.decimals, 8));\n      }\n      setAnchorOnFromAmount(!anchorOnFromAmount);\n    }\n    setIsWaitingForApproval(false);\n\n    const updatedTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\n    updatedTokenSelection[swapOption] = {\n      from: toTokenAddress,\n      to: fromTokenAddress,\n    };\n    setTokenSelection(updatedTokenSelection);\n  };\n\n  const wrap = async () => {\n    setIsSubmitting(true);\n\n    const contract = new ethers.Contract(nativeTokenAddress, WETH.abi, library.getSigner());\n    callContract(chainId, contract, \"deposit\", {\n      value: fromAmount,\n      sentMsg: t`Swap submitted.`,\n      successMsg: t`Swapped ${formatAmount(fromAmount, fromToken.decimals, 4, true)} ${\n        fromToken.symbol\n      } for ${formatAmount(toAmount, toToken.decimals, 4, true)} ${toToken.symbol}!`,\n      failMsg: t`Swap failed.`,\n      setPendingTxns,\n    })\n      .then(async (res) => {})\n      .finally(() => {\n        setIsSubmitting(false);\n      });\n  };\n\n  const unwrap = async () => {\n    setIsSubmitting(true);\n\n    const contract = new ethers.Contract(nativeTokenAddress, WETH.abi, library.getSigner());\n    callContract(chainId, contract, \"withdraw\", [fromAmount], {\n      sentMsg: t`Swap submitted!`,\n      failMsg: t`Swap failed.`,\n      successMsg: t`Swapped ${formatAmount(fromAmount, fromToken.decimals, 4, true)} ${\n        fromToken.symbol\n      } for ${formatAmount(toAmount, toToken.decimals, 4, true)} ${toToken.symbol}!`,\n      setPendingTxns,\n    })\n      .then(async (res) => {})\n      .finally(() => {\n        setIsSubmitting(false);\n      });\n  };\n\n  const swap = async () => {\n    if (fromToken.isNative && toToken.isWrapped) {\n      wrap();\n      return;\n    }\n\n    if (fromTokenAddress.isWrapped && toToken.isNative) {\n      unwrap();\n      return;\n    }\n\n    setIsSubmitting(true);\n    let path = [fromTokenAddress, toTokenAddress];\n    if (anchorOnFromAmount) {\n      const { path: multiPath } = getNextToAmount(\n        chainId,\n        fromAmount,\n        fromTokenAddress,\n        toTokenAddress,\n        infoTokens,\n        undefined,\n        undefined,\n        usdgSupply,\n        totalTokenWeights,\n        isSwap\n      );\n      if (multiPath) {\n        path = multiPath;\n      }\n    } else {\n      const { path: multiPath } = getNextFromAmount(\n        chainId,\n        toAmount,\n        fromTokenAddress,\n        toTokenAddress,\n        infoTokens,\n        undefined,\n        undefined,\n        usdgSupply,\n        totalTokenWeights,\n        isSwap\n      );\n      if (multiPath) {\n        path = multiPath;\n      }\n    }\n\n    let method;\n    let contract;\n    let value;\n    let params;\n    let minOut;\n    if (shouldRaiseGasError(getTokenInfo(infoTokens, fromTokenAddress), fromAmount)) {\n      setIsSubmitting(false);\n      setIsPendingConfirmation(true);\n      helperToast.error(\n        t`Leave at least ${formatAmount(DUST_BNB, 18, 3)} ${getConstant(chainId, \"nativeTokenSymbol\")} for gas`\n      );\n      return;\n    }\n\n    if (!isMarketOrder) {\n      minOut = toAmount;\n      Api.createSwapOrder(chainId, library, path, fromAmount, minOut, triggerRatio, nativeTokenAddress, {\n        sentMsg: t`Swap Order submitted!`,\n        successMsg: t`Swap Order created!`,\n        failMsg: t`Swap Order creation failed.`,\n        pendingTxns,\n        setPendingTxns,\n      })\n        .then(() => {\n          setIsConfirming(false);\n        })\n        .finally(() => {\n          setIsSubmitting(false);\n          setIsPendingConfirmation(false);\n        });\n      return;\n    }\n\n    path = replaceNativeTokenAddress(path, nativeTokenAddress);\n    method = \"swap\";\n    value = bigNumberify(0);\n    if (toTokenAddress === AddressZero) {\n      method = \"swapTokensToETH\";\n    }\n\n    minOut = toAmount.mul(BASIS_POINTS_DIVISOR - allowedSlippage).div(BASIS_POINTS_DIVISOR);\n    params = [path, fromAmount, minOut, account];\n    if (fromTokenAddress === AddressZero) {\n      method = \"swapETHToTokens\";\n      value = fromAmount;\n      params = [path, minOut, account];\n    }\n    contract = new ethers.Contract(routerAddress, Router.abi, library.getSigner());\n\n    callContract(chainId, contract, method, params, {\n      value,\n      sentMsg: t`Swap ${!isMarketOrder ? \" order \" : \"\"} submitted!`,\n      successMsg: t`Swapped ${formatAmount(fromAmount, fromToken.decimals, 4, true)} ${\n        fromToken.symbol\n      } for ${formatAmount(toAmount, toToken.decimals, 4, true)} ${toToken.symbol}!`,\n      failMsg: t`Swap failed.`,\n      setPendingTxns,\n    })\n      .then(async () => {\n        setIsConfirming(false);\n      })\n      .finally(() => {\n        setIsSubmitting(false);\n        setIsPendingConfirmation(false);\n      });\n  };\n\n  const createIncreaseOrder = () => {\n    let path = [fromTokenAddress];\n\n    if (path[0] === USDG_ADDRESS) {\n      if (isLong) {\n        const stableToken = getMostAbundantStableToken(chainId, infoTokens);\n        path.push(stableToken.address);\n      } else {\n        path.push(shortCollateralAddress);\n      }\n    }\n\n    const minOut = 0;\n    const indexToken = getToken(chainId, indexTokenAddress);\n    const successMsg = t`\n      Created limit order for ${indexToken.symbol} ${isLong ? \"Long\" : \"Short\"}: ${formatAmount(\n      toUsdMax,\n      USD_DECIMALS,\n      2\n    )} USD!\n    `;\n    return Api.createIncreaseOrder(\n      chainId,\n      library,\n      nativeTokenAddress,\n      path,\n      fromAmount,\n      indexTokenAddress,\n      minOut,\n      toUsdMax,\n      collateralTokenAddress,\n      isLong,\n      triggerPriceUsd,\n      {\n        pendingTxns,\n        setPendingTxns,\n        sentMsg: t`Limit order submitted!`,\n        successMsg,\n        failMsg: t`Limit order creation failed.`,\n      }\n    )\n      .then(() => {\n        setIsConfirming(false);\n      })\n      .finally(() => {\n        setIsSubmitting(false);\n        setIsPendingConfirmation(false);\n      });\n  };\n\n  let referralCode = ethers.constants.HashZero;\n  if (!attachedOnChain && userReferralCode) {\n    referralCode = userReferralCode;\n  }\n\n  const increasePosition = async () => {\n    setIsSubmitting(true);\n    const tokenAddress0 = fromTokenAddress === AddressZero ? nativeTokenAddress : fromTokenAddress;\n    const indexTokenAddress = toTokenAddress === AddressZero ? nativeTokenAddress : toTokenAddress;\n    let path = [indexTokenAddress]; // assume long\n    if (toTokenAddress !== fromTokenAddress) {\n      path = [tokenAddress0, indexTokenAddress];\n    }\n\n    if (fromTokenAddress === AddressZero && toTokenAddress === nativeTokenAddress) {\n      path = [nativeTokenAddress];\n    }\n\n    if (fromTokenAddress === nativeTokenAddress && toTokenAddress === AddressZero) {\n      path = [nativeTokenAddress];\n    }\n\n    if (isShort) {\n      path = [shortCollateralAddress];\n      if (tokenAddress0 !== shortCollateralAddress) {\n        path = [tokenAddress0, shortCollateralAddress];\n      }\n    }\n\n    const refPrice = isLong ? toTokenInfo.maxPrice : toTokenInfo.minPrice;\n    const priceBasisPoints = isLong ? BASIS_POINTS_DIVISOR + allowedSlippage : BASIS_POINTS_DIVISOR - allowedSlippage;\n    const priceLimit = refPrice.mul(priceBasisPoints).div(BASIS_POINTS_DIVISOR);\n\n    const boundedFromAmount = fromAmount ? fromAmount : bigNumberify(0);\n\n    if (fromAmount && fromAmount.gt(0) && fromTokenAddress === USDG_ADDRESS && isLong) {\n      const { amount: nextToAmount, path: multiPath } = getNextToAmount(\n        chainId,\n        fromAmount,\n        fromTokenAddress,\n        indexTokenAddress,\n        infoTokens,\n        undefined,\n        undefined,\n        usdgSupply,\n        totalTokenWeights,\n        isSwap\n      );\n      if (nextToAmount.eq(0)) {\n        helperToast.error(t`Insufficient liquidity`);\n        return;\n      }\n      if (multiPath) {\n        path = replaceNativeTokenAddress(multiPath);\n      }\n    }\n\n    let params = [\n      path, // _path\n      indexTokenAddress, // _indexToken\n      boundedFromAmount, // _amountIn\n      0, // _minOut\n      toUsdMax, // _sizeDelta\n      isLong, // _isLong\n      priceLimit, // _acceptablePrice\n      minExecutionFee, // _executionFee\n      referralCode, // _referralCode\n      AddressZero, // _callbackTarget\n    ];\n\n    let method = \"createIncreasePosition\";\n    let value = minExecutionFee;\n    if (fromTokenAddress === AddressZero) {\n      method = \"createIncreasePositionETH\";\n      value = boundedFromAmount.add(minExecutionFee);\n      params = [\n        path, // _path\n        indexTokenAddress, // _indexToken\n        0, // _minOut\n        toUsdMax, // _sizeDelta\n        isLong, // _isLong\n        priceLimit, // _acceptablePrice\n        minExecutionFee, // _executionFee\n        referralCode, // _referralCode\n        AddressZero, // _callbackTarget\n      ];\n    }\n\n    if (shouldRaiseGasError(getTokenInfo(infoTokens, fromTokenAddress), fromAmount)) {\n      setIsSubmitting(false);\n      setIsPendingConfirmation(false);\n      helperToast.error(\n        t`Leave at least ${formatAmount(DUST_BNB, 18, 3)} ${getConstant(chainId, \"nativeTokenSymbol\")} for gas`\n      );\n      return;\n    }\n\n    const contractAddress = getContract(chainId, \"PositionRouter\");\n    const contract = new ethers.Contract(contractAddress, PositionRouter.abi, library.getSigner());\n    const indexToken = getTokenInfo(infoTokens, indexTokenAddress);\n    const tokenSymbol = indexToken.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexToken.symbol;\n    const longOrShortText = isLong ? t`Long` : t`Short`;\n    const successMsg = t`Requested increase of ${tokenSymbol} ${longOrShortText} by ${formatAmount(\n      toUsdMax,\n      USD_DECIMALS,\n      2\n    )} USD.`;\n\n    callContract(chainId, contract, method, params, {\n      value,\n      setPendingTxns,\n      sentMsg: `${longOrShortText} submitted.`,\n      failMsg: `${longOrShortText} failed.`,\n      successMsg,\n      // for Arbitrum, sometimes the successMsg shows after the position has already been executed\n      // hide the success message for Arbitrum as a workaround\n      hideSuccessMsg: chainId === ARBITRUM,\n    })\n      .then(async () => {\n        setIsConfirming(false);\n\n        const key = getPositionKey(account, path[path.length - 1], indexTokenAddress, isLong);\n        let nextSize = toUsdMax;\n        if (hasExistingPosition) {\n          nextSize = existingPosition.size.add(toUsdMax);\n        }\n\n        pendingPositions[key] = {\n          updatedAt: Date.now(),\n          pendingChanges: {\n            size: nextSize,\n          },\n        };\n\n        setPendingPositions({ ...pendingPositions });\n      })\n      .finally(() => {\n        setIsSubmitting(false);\n        setIsPendingConfirmation(false);\n      });\n  };\n\n  const onSwapOptionChange = (opt) => {\n    setSwapOption(opt);\n    if (orderOption === STOP) {\n      setOrderOption(MARKET);\n    }\n    setAnchorOnFromAmount(true);\n    setFromValue(\"\");\n    setToValue(\"\");\n    setTriggerPriceValue(\"\");\n    setTriggerRatioValue(\"\");\n\n    if (opt === SHORT && infoTokens) {\n      const fromToken = getToken(chainId, tokenSelection[opt].from);\n      if (fromToken && fromToken.isStable) {\n        setShortCollateralAddress(fromToken.address);\n      } else {\n        const stableToken = getMostAbundantStableToken(chainId, infoTokens);\n        setShortCollateralAddress(stableToken.address);\n      }\n    }\n  };\n\n  const onConfirmationClick = () => {\n    if (!active) {\n      props.connectWallet();\n      return;\n    }\n\n    if (needOrderBookApproval) {\n      approveOrderBook();\n      return;\n    }\n\n    setIsPendingConfirmation(true);\n\n    if (isSwap) {\n      swap();\n      return;\n    }\n\n    if (orderOption === LIMIT) {\n      createIncreaseOrder();\n      return;\n    }\n\n    increasePosition();\n  };\n\n  function approveFromToken() {\n    approveTokens({\n      setIsApproving,\n      library,\n      tokenAddress: fromToken.address,\n      spender: routerAddress,\n      chainId: chainId,\n      onApproveSubmitted: () => {\n        setIsWaitingForApproval(true);\n      },\n      infoTokens,\n      getTokenInfo,\n      pendingTxns,\n      setPendingTxns,\n    });\n  }\n\n  const onClickPrimary = () => {\n    if (isStopOrder) {\n      setOrderOption(MARKET);\n      return;\n    }\n\n    if (!active) {\n      props.connectWallet();\n      return;\n    }\n\n    if (needPositionRouterApproval) {\n      approvePositionRouter({\n        sentMsg: t`Enable leverage sent.`,\n        failMsg: t`Enable leverage failed.`,\n      });\n      return;\n    }\n\n    if (needApproval) {\n      approveFromToken();\n      return;\n    }\n\n    if (needOrderBookApproval) {\n      setOrdersToaOpen(true);\n      return;\n    }\n\n    const [, modal, errorCode] = getError();\n\n    if (modal) {\n      setModalError(errorCode);\n      return;\n    }\n\n    if (isSwap) {\n      if (fromTokenAddress === AddressZero && toTokenAddress === nativeTokenAddress) {\n        wrap();\n        return;\n      }\n\n      if (fromTokenAddress === nativeTokenAddress && toTokenAddress === AddressZero) {\n        unwrap();\n        return;\n      }\n    }\n\n    setIsConfirming(true);\n    setIsHigherSlippageAllowed(false);\n  };\n\n  const isStopOrder = orderOption === STOP;\n  const showFromAndToSection = !isStopOrder;\n  const showTriggerPriceSection = !isSwap && !isMarketOrder && !isStopOrder;\n  const showTriggerRatioSection = isSwap && !isMarketOrder && !isStopOrder;\n\n  let fees;\n  let feesUsd;\n  let feeBps;\n  let swapFees;\n  let positionFee;\n  if (isSwap) {\n    if (fromAmount) {\n      const { feeBasisPoints } = getNextToAmount(\n        chainId,\n        fromAmount,\n        fromTokenAddress,\n        toTokenAddress,\n        infoTokens,\n        undefined,\n        undefined,\n        usdgSupply,\n        totalTokenWeights,\n        isSwap\n      );\n      if (feeBasisPoints !== undefined) {\n        fees = fromAmount.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n        const feeTokenPrice =\n          fromTokenInfo.address === USDG_ADDRESS ? expandDecimals(1, USD_DECIMALS) : fromTokenInfo.maxPrice;\n        feesUsd = fees.mul(feeTokenPrice).div(expandDecimals(1, fromTokenInfo.decimals));\n      }\n      feeBps = feeBasisPoints;\n    }\n  } else if (toUsdMax) {\n    positionFee = toUsdMax.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n    feesUsd = positionFee;\n\n    const { feeBasisPoints } = getNextToAmount(\n      chainId,\n      fromAmount,\n      fromTokenAddress,\n      collateralTokenAddress,\n      infoTokens,\n      undefined,\n      undefined,\n      usdgSupply,\n      totalTokenWeights,\n      isSwap\n    );\n    if (feeBasisPoints) {\n      swapFees = fromUsdMin.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n      feesUsd = feesUsd.add(swapFees);\n    }\n    feeBps = feeBasisPoints;\n  }\n\n  const leverageMarks = {\n    2: \"2x\",\n    5: \"5x\",\n    10: \"10x\",\n    15: \"15x\",\n    20: \"20x\",\n    25: \"25x\",\n    30: \"30x\",\n  };\n\n  if (!fromToken || !toToken) {\n    return null;\n  }\n\n  let hasZeroBorrowFee = false;\n  let borrowFeeText;\n  if (isLong && toTokenInfo && toTokenInfo.fundingRate) {\n    borrowFeeText = formatAmount(toTokenInfo.fundingRate, 4, 4) + \"% / 1h\";\n    if (toTokenInfo.fundingRate.eq(0)) {\n      // hasZeroBorrowFee = true\n    }\n  }\n  if (isShort && shortCollateralToken && shortCollateralToken.fundingRate) {\n    borrowFeeText = formatAmount(shortCollateralToken.fundingRate, 4, 4) + \"% / 1h\";\n    if (shortCollateralToken.fundingRate.eq(0)) {\n      // hasZeroBorrowFee = true\n    }\n  }\n\n  function setFromValueToMaximumAvailable() {\n    if (!fromToken || !fromBalance) {\n      return;\n    }\n\n    const maxAvailableAmount = fromToken.isNative ? fromBalance.sub(bigNumberify(DUST_BNB).mul(2)) : fromBalance;\n    setFromValue(formatAmountFree(maxAvailableAmount, fromToken.decimals, fromToken.decimals));\n    setAnchorOnFromAmount(true);\n  }\n\n  function shouldShowMaxButton() {\n    if (!fromToken || !fromBalance) {\n      return false;\n    }\n    const maxAvailableAmount = fromToken.isNative ? fromBalance.sub(bigNumberify(DUST_BNB).mul(2)) : fromBalance;\n    return fromValue !== formatAmountFree(maxAvailableAmount, fromToken.decimals, fromToken.decimals);\n  }\n\n  const SWAP_LABELS = {\n    [LONG]: t`Long`,\n    [SHORT]: t`Short`,\n    [SWAP]: t`Swap`,\n  };\n\n  return (\n    <div className=\"Exchange-swap-box\">\n      {/* <div className=\"Exchange-swap-wallet-box App-box\">\n        {active && <div className=\"Exchange-swap-account\" >\n        </div>}\n      </div> */}\n      <div className=\"Exchange-swap-box-inner App-box-highlight\">\n        <div>\n          <Tab\n            icons={SWAP_ICONS}\n            options={SWAP_OPTIONS}\n            optionLabels={SWAP_LABELS}\n            option={swapOption}\n            onChange={onSwapOptionChange}\n            className=\"Exchange-swap-option-tabs\"\n          />\n          {flagOrdersEnabled && (\n            <Tab\n              options={orderOptions}\n              optionLabels={orderOptionLabels}\n              className=\"Exchange-swap-order-type-tabs\"\n              type=\"inline\"\n              option={orderOption}\n              onChange={onOrderOptionChange}\n            />\n          )}\n        </div>\n        {showFromAndToSection && (\n          <React.Fragment>\n            <div className=\"Exchange-swap-section\">\n              <div className=\"Exchange-swap-section-top\">\n                <div className=\"muted\">\n                  {fromUsdMin && (\n                    <div className=\"Exchange-swap-usd\">\n                      <Trans>Pay: {formatAmount(fromUsdMin, USD_DECIMALS, 2, true)} USD</Trans>\n                    </div>\n                  )}\n                  {!fromUsdMin && t`Pay`}\n                </div>\n                {fromBalance && (\n                  <div className=\"muted align-right clickable\" onClick={setFromValueToMaximumAvailable}>\n                    <Trans>Balance: {formatAmount(fromBalance, fromToken.decimals, 4, true)}</Trans>\n                  </div>\n                )}\n              </div>\n              <div className=\"Exchange-swap-section-bottom\">\n                <div className=\"Exchange-swap-input-container\">\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    placeholder=\"0.0\"\n                    className=\"Exchange-swap-input\"\n                    value={fromValue}\n                    onChange={onFromValueChange}\n                  />\n                  {shouldShowMaxButton() && (\n                    <div className=\"Exchange-swap-max\" onClick={setFromValueToMaximumAvailable}>\n                      <Trans>MAX</Trans>\n                    </div>\n                  )}\n                </div>\n                <div>\n                  <TokenSelector\n                    label={t`Pay`}\n                    chainId={chainId}\n                    tokenAddress={fromTokenAddress}\n                    onSelectToken={onSelectFromToken}\n                    tokens={fromTokens}\n                    infoTokens={infoTokens}\n                    showMintingCap={false}\n                    showTokenImgInDropdown={true}\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"Exchange-swap-ball-container\">\n              <div className=\"Exchange-swap-ball\" onClick={switchTokens}>\n                <IoMdSwap className=\"Exchange-swap-ball-icon\" />\n              </div>\n            </div>\n            <div className=\"Exchange-swap-section\">\n              <div className=\"Exchange-swap-section-top\">\n                <div className=\"muted\">\n                  {toUsdMax && (\n                    <div className=\"Exchange-swap-usd\">\n                      {getToLabel()}: {formatAmount(toUsdMax, USD_DECIMALS, 2, true)} USD\n                    </div>\n                  )}\n                  {!toUsdMax && getToLabel()}\n                </div>\n                {toBalance && isSwap && (\n                  <div className=\"muted align-right\">\n                    <Trans>Balance</Trans>: {formatAmount(toBalance, toToken.decimals, 4, true)}\n                  </div>\n                )}\n                {(isLong || isShort) && hasLeverageOption && (\n                  <div className=\"muted align-right\">\n                    <Trans>Leverage</Trans>: {parseFloat(leverageOption).toFixed(2)}x\n                  </div>\n                )}\n              </div>\n              <div className=\"Exchange-swap-section-bottom\">\n                <div>\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    placeholder=\"0.0\"\n                    className=\"Exchange-swap-input\"\n                    value={toValue}\n                    onChange={onToValueChange}\n                  />\n                </div>\n                <div>\n                  <TokenSelector\n                    label={getTokenLabel()}\n                    chainId={chainId}\n                    tokenAddress={toTokenAddress}\n                    onSelectToken={onSelectToToken}\n                    tokens={toTokens}\n                    infoTokens={infoTokens}\n                    showTokenImgInDropdown={true}\n                  />\n                </div>\n              </div>\n            </div>\n          </React.Fragment>\n        )}\n        {showTriggerRatioSection && (\n          <div className=\"Exchange-swap-section\">\n            <div className=\"Exchange-swap-section-top\">\n              <div className=\"muted\">\n                <Trans>Price</Trans>\n              </div>\n              {fromTokenInfo && toTokenInfo && (\n                <div\n                  className=\"muted align-right clickable\"\n                  onClick={() => {\n                    setTriggerRatioValue(\n                      formatAmountFree(\n                        getExchangeRate(fromTokenInfo, toTokenInfo, triggerRatioInverted),\n                        USD_DECIMALS,\n                        10\n                      )\n                    );\n                  }}\n                >\n                  {formatAmount(getExchangeRate(fromTokenInfo, toTokenInfo, triggerRatioInverted), USD_DECIMALS, 4)}\n                </div>\n              )}\n            </div>\n            <div className=\"Exchange-swap-section-bottom\">\n              <div className=\"Exchange-swap-input-container\">\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  placeholder=\"0.0\"\n                  className=\"Exchange-swap-input small\"\n                  value={triggerRatioValue}\n                  onChange={onTriggerRatioChange}\n                />\n              </div>\n              {(() => {\n                if (!toTokenInfo) return;\n                if (!fromTokenInfo) return;\n                const [tokenA, tokenB] = triggerRatioInverted\n                  ? [toTokenInfo, fromTokenInfo]\n                  : [fromTokenInfo, toTokenInfo];\n                return (\n                  <div className=\"PositionEditor-token-symbol\">\n                    {tokenA.symbol}&nbsp;per&nbsp;{tokenB.symbol}\n                  </div>\n                );\n              })()}\n            </div>\n          </div>\n        )}\n        {showTriggerPriceSection && (\n          <div className=\"Exchange-swap-section\">\n            <div className=\"Exchange-swap-section-top\">\n              <div className=\"muted\">\n                <Trans>Price</Trans>\n              </div>\n              <div\n                className=\"muted align-right clickable\"\n                onClick={() => {\n                  setTriggerPriceValue(formatAmountFree(entryMarkPrice, USD_DECIMALS, 2));\n                }}\n              >\n                <Trans>Mark: {formatAmount(entryMarkPrice, USD_DECIMALS, 2, true)}</Trans>\n              </div>\n            </div>\n            <div className=\"Exchange-swap-section-bottom\">\n              <div className=\"Exchange-swap-input-container\">\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  placeholder=\"0.0\"\n                  className=\"Exchange-swap-input\"\n                  value={triggerPriceValue}\n                  onChange={onTriggerPriceChange}\n                />\n              </div>\n              <div className=\"PositionEditor-token-symbol\">USD</div>\n            </div>\n          </div>\n        )}\n        {isSwap && (\n          <div className=\"Exchange-swap-box-info\">\n            <ExchangeInfoRow label={t`Fees`}>\n              <div>\n                {!fees && \"-\"}\n                {fees && (\n                  <div>\n                    {formatAmount(feeBps, 2, 2, false)}%&nbsp; ({formatAmount(fees, fromToken.decimals, 4, true)}{\" \"}\n                    {fromToken.symbol}: ${formatAmount(feesUsd, USD_DECIMALS, 2, true)})\n                  </div>\n                )}\n              </div>\n            </ExchangeInfoRow>\n          </div>\n        )}\n        {(isLong || isShort) && !isStopOrder && (\n          <div className=\"Exchange-leverage-box\">\n            <div className=\"Exchange-leverage-slider-settings\">\n              <Checkbox isChecked={isLeverageSliderEnabled} setIsChecked={setIsLeverageSliderEnabled}>\n                <span className=\"muted\">Leverage slider</span>\n              </Checkbox>\n            </div>\n            {isLeverageSliderEnabled && (\n              <div\n                className={cx(\"Exchange-leverage-slider\", \"App-slider\", {\n                  positive: isLong,\n                  negative: isShort,\n                })}\n              >\n                <Slider\n                  min={1.1}\n                  max={30.5}\n                  step={0.1}\n                  marks={leverageMarks}\n                  handle={leverageSliderHandle}\n                  onChange={(value) => setLeverageOption(value)}\n                  value={leverageOption}\n                  defaultValue={leverageOption}\n                />\n              </div>\n            )}\n            {isShort && (\n              <div className=\"Exchange-info-row\">\n                <div className=\"Exchange-info-label\">\n                  <Trans>Collateral In</Trans>\n                </div>\n\n                <div className=\"align-right\">\n                  <TokenSelector\n                    label={t`Collateral In`}\n                    chainId={chainId}\n                    tokenAddress={shortCollateralAddress}\n                    onSelectToken={onSelectShortCollateralAddress}\n                    tokens={stableTokens}\n                    showTokenImgInDropdown={true}\n                  />\n                </div>\n              </div>\n            )}\n            {isLong && (\n              <div className=\"Exchange-info-row\">\n                <div className=\"Exchange-info-label\">\n                  <Trans>Collateral In</Trans>\n                </div>\n                <div className=\"align-right\">\n                  <Tooltip\n                    position=\"right-bottom\"\n                    handle=\"USD\"\n                    renderContent={() => (\n                      <span className=\"SwapBox-collateral-tooltip-text\">\n                        <Trans>\n                          A snapshot of the USD value of your {existingPosition?.collateralToken?.symbol} collateral is\n                          taken when the position is opened.\n                        </Trans>\n                        <br />\n                        <br />\n                        <Trans>\n                          When closing the position, you can select which token you would like to receive the profits\n                          in.\n                        </Trans>\n                      </span>\n                    )}\n                  />\n                </div>\n              </div>\n            )}\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Leverage</Trans>\n              </div>\n              <div className=\"align-right\">\n                {hasExistingPosition && toAmount && toAmount.gt(0) && (\n                  <div className=\"inline-block muted\">\n                    {formatAmount(existingPosition.leverage, 4, 2)}x\n                    <BsArrowRight className=\"transition-arrow\" />\n                  </div>\n                )}\n                {toAmount && leverage && leverage.gt(0) && `${formatAmount(leverage, 4, 2)}x`}\n                {!toAmount && leverage && leverage.gt(0) && `-`}\n                {leverage && leverage.eq(0) && `-`}\n              </div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Entry Price</Trans>\n              </div>\n              <div className=\"align-right\">\n                {hasExistingPosition && toAmount && toAmount.gt(0) && (\n                  <div className=\"inline-block muted\">\n                    ${formatAmount(existingPosition.averagePrice, USD_DECIMALS, 2, true)}\n                    <BsArrowRight className=\"transition-arrow\" />\n                  </div>\n                )}\n                {nextAveragePrice && `$${formatAmount(nextAveragePrice, USD_DECIMALS, 2, true)}`}\n                {!nextAveragePrice && `-`}\n              </div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Liq. Price</Trans>\n              </div>\n              <div className=\"align-right\">\n                {hasExistingPosition && toAmount && toAmount.gt(0) && (\n                  <div className=\"inline-block muted\">\n                    ${formatAmount(existingLiquidationPrice, USD_DECIMALS, 2, true)}\n                    <BsArrowRight className=\"transition-arrow\" />\n                  </div>\n                )}\n                {toAmount &&\n                  displayLiquidationPrice &&\n                  `$${formatAmount(displayLiquidationPrice, USD_DECIMALS, 2, true)}`}\n                {!toAmount && displayLiquidationPrice && `-`}\n                {!displayLiquidationPrice && `-`}\n              </div>\n            </div>\n            <ExchangeInfoRow label={t`Fees`}>\n              <div>\n                {!feesUsd && \"-\"}\n                {feesUsd && (\n                  <Tooltip\n                    handle={`$${formatAmount(feesUsd, USD_DECIMALS, 2, true)}`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <div>\n                          {swapFees && (\n                            <div>\n                              <Trans>{collateralToken.symbol} is required for collateral.</Trans> <br />\n                              <br />\n                              <StatsTooltipRow\n                                label={t`Swap ${fromToken.symbol} to ${collateralToken.symbol} Fee`}\n                                value={formatAmount(swapFees, USD_DECIMALS, 2, true)}\n                              />\n                              <br />\n                            </div>\n                          )}\n                          <div>\n                            <StatsTooltipRow\n                              label={t`Position Fee (0.1% of position size)`}\n                              value={formatAmount(positionFee, USD_DECIMALS, 2, true)}\n                            />\n                          </div>\n                        </div>\n                      );\n                    }}\n                  />\n                )}\n              </div>\n            </ExchangeInfoRow>\n          </div>\n        )}\n        {isStopOrder && (\n          <div className=\"Exchange-swap-section Exchange-trigger-order-info\">\n            <Trans>\n              Take-profit and stop-loss orders can be set after opening a position. <br />\n              <br />\n              There will be a \"Close\" button on each position row, clicking this will display the option to set trigger\n              orders. <br />\n              <br />\n              For screenshots and more information, please see the{\" \"}\n              <ExternalLink href=\"https://amxdex.gitbook.io/amxdex/trading#stop-loss-take-profit-orders\">docs</ExternalLink>\n              .\n            </Trans>\n          </div>\n        )}\n        <div className=\"Exchange-swap-button-container\">\n          <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </button>\n        </div>\n      </div>\n      {isSwap && (\n        <div className=\"Exchange-swap-market-box App-box App-box-border\">\n          <div className=\"Exchange-swap-market-box-title\">\n            <Trans>Swap</Trans>\n          </div>\n          <div className=\"App-card-divider\"></div>\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>{fromToken.symbol} Price</Trans>\n            </div>\n            <div className=\"align-right\">\n              ${fromTokenInfo && formatAmount(fromTokenInfo.minPrice, USD_DECIMALS, 2, true)}\n            </div>\n          </div>\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>{toToken.symbol} Price</Trans>\n            </div>\n            <div className=\"align-right\">\n              ${toTokenInfo && formatAmount(toTokenInfo.maxPrice, USD_DECIMALS, 2, true)}\n            </div>\n          </div>\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>Available Liquidity</Trans>\n            </div>\n\n            <div className=\"align-right al-swap\">\n              <Tooltip\n                handle={`$${formatAmount(maxSwapAmountUsd, USD_DECIMALS, 2, true)}`}\n                position=\"right-bottom\"\n                renderContent={() => {\n                  return (\n                    <div>\n                      <StatsTooltipRow\n                        label={t`Max ${fromTokenInfo.symbol} in`}\n                        value={[\n                          `${formatAmount(maxFromTokenIn, fromTokenInfo.decimals, 0, true)} ${fromTokenInfo.symbol}`,\n                          `($${formatAmount(maxFromTokenInUSD, USD_DECIMALS, 0, true)})`,\n                        ]}\n                      />\n                      <StatsTooltipRow\n                        label={t`Max ${toTokenInfo.symbol} out`}\n                        value={[\n                          `${formatAmount(maxToTokenOut, toTokenInfo.decimals, 0, true)} ${toTokenInfo.symbol}`,\n                          `($${formatAmount(maxToTokenOutUSD, USD_DECIMALS, 0, true)})`,\n                        ]}\n                      />\n                    </div>\n                  );\n                }}\n              />\n            </div>\n          </div>\n          {!isMarketOrder && (\n            <ExchangeInfoRow label={t`Price`}>\n              {getExchangeRateDisplay(getExchangeRate(fromTokenInfo, toTokenInfo), fromToken, toToken)}\n            </ExchangeInfoRow>\n          )}\n        </div>\n      )}\n      {(isLong || isShort) && (\n        <div className=\"Exchange-swap-market-box App-box App-box-border\">\n          <div className=\"Exchange-swap-market-box-title\">\n            {isLong ? t`Long` : t`Short`}&nbsp;{toToken.symbol}\n          </div>\n          <div className=\"App-card-divider\" />\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>Entry Price</Trans>\n            </div>\n            <div className=\"align-right\">\n              <Tooltip\n                handle={`$${formatAmount(entryMarkPrice, USD_DECIMALS, 2, true)}`}\n                position=\"right-bottom\"\n                renderContent={() => {\n                  return (\n                    <div>\n                      <Trans>\n                        The position will be opened at {formatAmount(entryMarkPrice, USD_DECIMALS, 2, true)} USD with a\n                        max slippage of {parseFloat(savedSlippageAmount / 100.0).toFixed(2)}%.\n                        <br />\n                        <br />\n                        The slippage amount can be configured under Settings, found by clicking on your address at the\n                        top right of the page after connecting your wallet.\n                        <br />\n                        <br />\n                        <ExternalLink href=\"https://amxdex.gitbook.io/amxdex/trading#opening-a-position\">\n                          More Info\n                        </ExternalLink>\n                      </Trans>\n                    </div>\n                  );\n                }}\n              />\n            </div>\n          </div>\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>Exit Price</Trans>\n            </div>\n            <div className=\"align-right\">\n              <Tooltip\n                handle={`$${formatAmount(exitMarkPrice, USD_DECIMALS, 2, true)}`}\n                position=\"right-bottom\"\n                renderContent={() => {\n                  return (\n                    <div>\n                      <Trans>\n                        If you have an existing position, the position will be closed at{\" \"}\n                        {formatAmount(entryMarkPrice, USD_DECIMALS, 2, true)} USD.\n                        <br />\n                        <br />\n                        This exit price will change with the price of the asset.\n                        <br />\n                        <br />\n                        <ExternalLink href=\"https://amxdex.gitbook.io/amxdex/trading#opening-a-position\">\n                          More Info\n                        </ExternalLink>\n                      </Trans>\n                    </div>\n                  );\n                }}\n              />\n            </div>\n          </div>\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>Borrow Fee</Trans>\n            </div>\n            <div className=\"align-right\">\n              <Tooltip\n                handle={borrowFeeText}\n                position=\"right-bottom\"\n                renderContent={() => {\n                  return (\n                    <div>\n                      {hasZeroBorrowFee && (\n                        <div>\n                          {isLong && t`There are more shorts than longs, borrow fees for longing is currently zero`}\n                          {isShort && t`There are more longs than shorts, borrow fees for shorting is currently zero`}\n                        </div>\n                      )}\n                      {!hasZeroBorrowFee && (\n                        <div>\n                          <Trans>\n                            The borrow fee is calculated as (assets borrowed) / (total assets in pool) * 0.01% per hour.\n                          </Trans>\n                          <br />\n                          <br />\n                          {isShort && t`You can change the \"Collateral In\" token above to find lower fees`}\n                        </div>\n                      )}\n                      <br />\n                      <ExternalLink href=\"https://amxdex.gitbook.io/amxdex/trading#opening-a-position\">\n                        <Trans>More Info</Trans>\n                      </ExternalLink>\n                    </div>\n                  );\n                }}\n              >\n                {!hasZeroBorrowFee && null}\n              </Tooltip>\n            </div>\n          </div>\n          {renderAvailableLongLiquidity()}\n          {isShort && toTokenInfo.hasMaxAvailableShort && (\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Available Liquidity</Trans>\n              </div>\n              <div className=\"align-right\">\n                <Tooltip\n                  handle={`$${formatAmount(toTokenInfo.maxAvailableShort, USD_DECIMALS, 2, true)}`}\n                  position=\"right-bottom\"\n                  renderContent={() => {\n                    return (\n                      <>\n                        <StatsTooltipRow\n                          label={t`Max ${toTokenInfo.symbol} short capacity`}\n                          value={formatAmount(toTokenInfo.maxGlobalShortSize, USD_DECIMALS, 0, true)}\n                        />\n                        <StatsTooltipRow\n                          label={t`Current ${toTokenInfo.symbol} shorts`}\n                          value={formatAmount(toTokenInfo.globalShortSize, USD_DECIMALS, 0, true)}\n                        />\n                      </>\n                    );\n                  }}\n                ></Tooltip>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n      <div className=\"Exchange-swap-market-box App-box App-box-border\">\n        <div className=\"Exchange-swap-market-box-title\">\n          <Trans>Useful Links</Trans>\n        </div>\n        <div className=\"App-card-divider\"></div>\n        <div className=\"Exchange-info-row\">\n          <div className=\"Exchange-info-label-button\">\n            <ExternalLink href=\"https://amxdex.gitbook.io/amxdex/trading\">\n              <Trans>Trading guide</Trans>\n            </ExternalLink>\n          </div>\n        </div>\n        {/* <div className=\"Exchange-info-row\">\n          <div className=\"Exchange-info-label-button\">\n            <ExternalLink href={getLeaderboardLink()}>\n              <Trans>Leaderboard</Trans>\n            </ExternalLink>\n          </div>\n        </div> */}\n        <div className=\"Exchange-info-row\">\n          <div className=\"Exchange-info-label-button\">\n            <ExternalLink href=\"https://amxdex.gitbook.io/amxdex/trading#backup-rpc-urls\">\n              <Trans>Speed up page loading</Trans>\n            </ExternalLink>\n          </div>\n        </div>\n      </div>\n      <NoLiquidityErrorModal\n        chainId={chainId}\n        fromToken={fromToken}\n        toToken={toToken}\n        shortCollateralToken={shortCollateralToken}\n        isLong={isLong}\n        isShort={isShort}\n        modalError={modalError}\n        setModalError={setModalError}\n      />\n      {renderOrdersToa()}\n      {isConfirming && (\n        <ConfirmationBox\n          library={library}\n          isHigherSlippageAllowed={isHigherSlippageAllowed}\n          setIsHigherSlippageAllowed={setIsHigherSlippageAllowed}\n          orders={orders}\n          isSwap={isSwap}\n          isLong={isLong}\n          isMarketOrder={isMarketOrder}\n          orderOption={orderOption}\n          isShort={isShort}\n          fromToken={fromToken}\n          fromTokenInfo={fromTokenInfo}\n          toToken={toToken}\n          toTokenInfo={toTokenInfo}\n          toAmount={toAmount}\n          fromAmount={fromAmount}\n          feeBps={feeBps}\n          onConfirmationClick={onConfirmationClick}\n          setIsConfirming={setIsConfirming}\n          hasExistingPosition={hasExistingPosition}\n          shortCollateralAddress={shortCollateralAddress}\n          shortCollateralToken={shortCollateralToken}\n          leverage={leverage}\n          existingPosition={existingPosition}\n          existingLiquidationPrice={existingLiquidationPrice}\n          displayLiquidationPrice={displayLiquidationPrice}\n          nextAveragePrice={nextAveragePrice}\n          triggerPriceUsd={triggerPriceUsd}\n          triggerRatio={triggerRatio}\n          fees={fees}\n          feesUsd={feesUsd}\n          isSubmitting={isSubmitting}\n          isPendingConfirmation={isPendingConfirmation}\n          fromUsdMin={fromUsdMin}\n          toUsdMax={toUsdMax}\n          collateralTokenAddress={collateralTokenAddress}\n          infoTokens={infoTokens}\n          chainId={chainId}\n          setPendingTxns={setPendingTxns}\n          pendingTxns={pendingTxns}\n          minExecutionFee={minExecutionFee}\n          minExecutionFeeUSD={minExecutionFeeUSD}\n          minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\n        />\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Menu } from \"@headlessui/react\";\nimport { FaChevronDown } from \"react-icons/fa\";\nimport cx from \"classnames\";\nimport \"./ChartTokenSelector.css\";\nimport { LONG, SHORT, SWAP } from \"lib/legacy\";\nimport { getTokens, getWhitelistedTokens } from \"config/tokens\";\n\nexport default function ChartTokenSelector(props) {\n  const { chainId, selectedToken, onSelectToken, swapOption } = props;\n\n  const isLong = swapOption === LONG;\n  const isShort = swapOption === SHORT;\n  const isSwap = swapOption === SWAP;\n  console.log(\"---shark ChartTokenSelector\");\n  let options = getTokens(chainId);\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const indexTokens = whitelistedTokens.filter((token) => !token.isStable && !token.isWrapped);\n  const shortableTokens = indexTokens.filter((token) => token.isShortable);\n\n  if (isLong) {\n    options = indexTokens;\n  }\n  if (isShort) {\n    options = shortableTokens;\n  }\n\n  const onSelect = async (token) => {\n    onSelectToken(token);\n  };\n\n  var value = selectedToken;\n\n  return (\n    <Menu>\n      <Menu.Button as=\"div\" disabled={isSwap}>\n        <button className={cx(\"App-cta small transparent chart-token-selector\", { \"default-cursor\": isSwap })}>\n          <span className=\"chart-token-selector--current\">{value.symbol} / USD</span>\n          {!isSwap && <FaChevronDown />}\n        </button>\n      </Menu.Button>\n      <div className=\"chart-token-menu\">\n        <Menu.Items as=\"div\" className=\"menu-items chart-token-menu-items\">\n          {options.map((option, index) => (\n            <Menu.Item key={index}>\n              <div\n                className=\"menu-item\"\n                onClick={() => {\n                  onSelect(option);\n                }}\n              >\n                <span style={{ marginLeft: 5 }} className=\"token-label\">\n                  {option.symbol} / USD\n                </span>\n              </div>\n            </Menu.Item>\n          ))}\n        </Menu.Items>\n      </div>\n    </Menu>\n  );\n}\n","import React, { useEffect, useState, useRef, useCallback, useMemo } from \"react\";\nimport cx from \"classnames\";\n\nimport { createChart } from \"krasulya-lightweight-charts\";\n\nimport { USD_DECIMALS, SWAP, INCREASE, CHART_PERIODS, getLiquidationPrice } from \"lib/legacy\";\nimport { useChartPrices } from \"domain/legacy\";\nimport Tab from \"../Tab/Tab\";\n\nimport ChartTokenSelector from \"./ChartTokenSelector\";\nimport { useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { getTokenInfo } from \"domain/tokens/utils\";\nimport { usePrevious } from \"lib/usePrevious\";\nimport { formatAmount, numberWithCommas } from \"lib/numbers\";\nimport { getToken, getTokens } from \"config/tokens\";\nimport { formatDateTime } from \"lib/dates\";\nimport { t, Trans } from \"@lingui/macro\";\n\nconst PRICE_LINE_TEXT_WIDTH = 15;\n\nconst timezoneOffset = -new Date().getTimezoneOffset() * 60;\n\nexport function getChartToken(swapOption, fromToken, toToken, chainId) {\n  if (!fromToken || !toToken) {\n    return;\n  }\n\n  if (swapOption !== SWAP) {\n    return toToken;\n  }\n\n  if (fromToken.isUsdg && toToken.isUsdg) {\n    return getTokens(chainId).find((t) => t.isStable);\n  }\n  if (fromToken.isUsdg) {\n    return toToken;\n  }\n  if (toToken.isUsdg) {\n    return fromToken;\n  }\n\n  if (fromToken.isStable && toToken.isStable) {\n    return toToken;\n  }\n  if (fromToken.isStable) {\n    return toToken;\n  }\n  if (toToken.isStable) {\n    return fromToken;\n  }\n\n  return toToken;\n}\n\nconst DEFAULT_PERIOD = \"4h\";\n\nconst getSeriesOptions = () => ({\n  // https://github.com/tradingview/lightweight-charts/blob/master/docs/area-series.md\n  lineColor: \"#5472cc\",\n  topColor: \"rgba(49, 69, 131, 0.4)\",\n  bottomColor: \"rgba(42, 64, 103, 0.0)\",\n  lineWidth: 2,\n  priceLineColor: \"#3a3e5e\",\n  downColor: \"#fa3c58\",\n  wickDownColor: \"#fa3c58\",\n  upColor: \"#0ecc83\",\n  wickUpColor: \"#0ecc83\",\n  borderVisible: false,\n});\n\nconst getChartOptions = (width, height) => ({\n  width,\n  height,\n  layout: {\n    backgroundColor: \"rgba(255, 255, 255, 0)\",\n    textColor: \"#ccc\",\n    fontFamily: \"Relative\",\n  },\n  localization: {\n    // https://github.com/tradingview/lightweight-charts/blob/master/docs/customization.md#time-format\n    timeFormatter: (businessDayOrTimestamp) => {\n      return formatDateTime(businessDayOrTimestamp - timezoneOffset);\n    },\n  },\n  grid: {\n    vertLines: {\n      visible: true,\n      color: \"rgba(35, 38, 59, 1)\",\n      style: 2,\n    },\n    horzLines: {\n      visible: true,\n      color: \"rgba(35, 38, 59, 1)\",\n      style: 2,\n    },\n  },\n  // https://github.com/tradingview/lightweight-charts/blob/master/docs/time-scale.md#time-scale\n  timeScale: {\n    rightOffset: 5,\n    borderVisible: false,\n    barSpacing: 5,\n    timeVisible: true,\n    fixLeftEdge: true,\n  },\n  // https://github.com/tradingview/lightweight-charts/blob/master/docs/customization.md#price-axis\n  priceScale: {\n    borderVisible: false,\n  },\n  crosshair: {\n    horzLine: {\n      color: \"#aaa\",\n    },\n    vertLine: {\n      color: \"#aaa\",\n    },\n    mode: 0,\n  },\n});\n\nexport default function ExchangeTVChart(props) {\n  const {\n    swapOption,\n    fromTokenAddress,\n    toTokenAddress,\n    infoTokens,\n    chainId,\n    positions,\n    savedShouldShowPositionLines,\n    orders,\n    setToTokenAddress,\n  } = props;\n  const [currentChart, setCurrentChart] = useState();\n  const [currentSeries, setCurrentSeries] = useState();\n  console.log(\"---shark ExchangeTVChart\");\n  let [period, setPeriod] = useLocalStorageSerializeKey([chainId, \"Chart-period\"], DEFAULT_PERIOD);\n  if (!(period in CHART_PERIODS)) {\n    period = DEFAULT_PERIOD;\n  }\n\n  const [hoveredCandlestick, setHoveredCandlestick] = useState();\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  const toToken = getTokenInfo(infoTokens, toTokenAddress);\n\n  const [chartToken, setChartToken] = useState({\n    maxPrice: null,\n    minPrice: null,\n  });\n  useEffect(() => {\n    const tmp = getChartToken(swapOption, fromToken, toToken, chainId);\n    setChartToken(tmp);\n  }, [swapOption, fromToken, toToken, chainId]);\n\n  const symbol = chartToken ? (chartToken.isWrapped ? chartToken.baseSymbol : chartToken.symbol) : undefined;\n  const marketName = chartToken ? symbol + \"_USD\" : undefined;\n  const previousMarketName = usePrevious(marketName);\n\n  const currentOrders = useMemo(() => {\n    if (swapOption === SWAP || !chartToken) {\n      return [];\n    }\n\n    return orders.filter((order) => {\n      if (order.type === SWAP) {\n        // we can't show non-stable to non-stable swap orders with existing charts\n        // so to avoid users confusion we'll show only long/short orders\n        return false;\n      }\n\n      const indexToken = getToken(chainId, order.indexToken);\n      return order.indexToken === chartToken.address || (chartToken.isNative && indexToken.isWrapped);\n    });\n  }, [orders, chartToken, swapOption, chainId]);\n\n  const ref = useRef(null);\n  const chartRef = useRef(null);\n\n  const currentAveragePrice =\n    chartToken.maxPrice && chartToken.minPrice ? chartToken.maxPrice.add(chartToken.minPrice).div(2) : null;\n  const [priceData, updatePriceData] = useChartPrices(\n    chainId,\n    chartToken.symbol,\n    chartToken.isStable,\n    period,\n    currentAveragePrice\n  );\n\n  const [chartInited, setChartInited] = useState(false);\n  useEffect(() => {\n    if (marketName !== previousMarketName) {\n      setChartInited(false);\n    }\n  }, [marketName, previousMarketName]);\n\n  const scaleChart = useCallback(() => {\n    const from = Date.now() / 1000 - (7 * 24 * CHART_PERIODS[period]) / 2 + timezoneOffset;\n    const to = Date.now() / 1000 + timezoneOffset;\n    currentChart.timeScale().setVisibleRange({ from, to });\n  }, [currentChart, period]);\n\n  const onCrosshairMove = useCallback(\n    (evt) => {\n      if (!evt.time) {\n        setHoveredCandlestick(null);\n        return;\n      }\n\n      for (const point of evt.seriesPrices.values()) {\n        setHoveredCandlestick((hoveredCandlestick) => {\n          if (hoveredCandlestick && hoveredCandlestick.time === evt.time) {\n            // rerender optimisations\n            return hoveredCandlestick;\n          }\n          return {\n            time: evt.time,\n            ...point,\n          };\n        });\n        break;\n      }\n    },\n    [setHoveredCandlestick]\n  );\n\n  useEffect(() => {\n    if (!ref.current || !priceData || !priceData.length || currentChart) {\n      return;\n    }\n\n    const chart = createChart(\n      chartRef.current,\n      getChartOptions(chartRef.current.offsetWidth, chartRef.current.offsetHeight)\n    );\n\n    chart.subscribeCrosshairMove(onCrosshairMove);\n\n    const series = chart.addCandlestickSeries(getSeriesOptions());\n\n    setCurrentChart(chart);\n    setCurrentSeries(series);\n  }, [ref, priceData, currentChart, onCrosshairMove]);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      updatePriceData(undefined, true);\n    }, 60 * 1000);\n    return () => clearInterval(interval);\n  }, [updatePriceData]);\n\n  useEffect(() => {\n    if (!currentChart) {\n      return;\n    }\n    const resizeChart = () => {\n      currentChart.resize(chartRef.current.offsetWidth, chartRef.current.offsetHeight);\n    };\n    window.addEventListener(\"resize\", resizeChart);\n    return () => window.removeEventListener(\"resize\", resizeChart);\n  }, [currentChart]);\n\n  useEffect(() => {\n    if (currentSeries && priceData && priceData.length) {\n      currentSeries.setData(priceData);\n\n      if (!chartInited) {\n        scaleChart();\n        setChartInited(true);\n      }\n    }\n  }, [priceData, currentSeries, chartInited, scaleChart]);\n\n  useEffect(() => {\n    const lines = [];\n    if (currentSeries && savedShouldShowPositionLines) {\n      if (currentOrders && currentOrders.length > 0) {\n        currentOrders.forEach((order) => {\n          const indexToken = getToken(chainId, order.indexToken);\n          let tokenSymbol;\n          if (indexToken && indexToken.symbol) {\n            tokenSymbol = indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol;\n          }\n          const title = `${order.type === INCREASE ? t`Inc.` : t`Dec.`} ${tokenSymbol} ${\n            order.isLong ? t`Long` : t`Short`\n          }`;\n          const color = \"#3a3e5e\";\n          lines.push(\n            currentSeries.createPriceLine({\n              price: parseFloat(formatAmount(order.triggerPrice, USD_DECIMALS, 2)),\n              color,\n              title: title.padEnd(PRICE_LINE_TEXT_WIDTH, \" \"),\n            })\n          );\n        });\n      }\n      if (positions && positions.length > 0) {\n        const color = \"#3a3e5e\";\n        positions.forEach((position) => {\n          const longOrShortText = position.isLong ? t`Long` : t`Short`;\n          lines.push(\n            currentSeries.createPriceLine({\n              price: parseFloat(formatAmount(position.averagePrice, USD_DECIMALS, 2)),\n              color,\n              title: t`Open ${position.indexToken.symbol} ${longOrShortText}`.padEnd(PRICE_LINE_TEXT_WIDTH, \" \"),\n            })\n          );\n\n          const liquidationPrice = getLiquidationPrice(position);\n          lines.push(\n            currentSeries.createPriceLine({\n              price: parseFloat(formatAmount(liquidationPrice, USD_DECIMALS, 2)),\n              color,\n              title: t`Liq. ${position.indexToken.symbol} ${longOrShortText}`.padEnd(PRICE_LINE_TEXT_WIDTH, \" \"),\n            })\n          );\n        });\n      }\n    }\n    return () => {\n      lines.forEach((line) => currentSeries.removePriceLine(line));\n    };\n  }, [currentOrders, positions, currentSeries, chainId, savedShouldShowPositionLines]);\n\n  const candleStatsHtml = useMemo(() => {\n    if (!priceData) {\n      return null;\n    }\n    const candlestick = hoveredCandlestick || priceData[priceData.length - 1];\n    if (!candlestick) {\n      return null;\n    }\n\n    const className = cx({\n      \"ExchangeChart-bottom-stats\": true,\n      positive: candlestick.open <= candlestick.close,\n      negative: candlestick.open > candlestick.close,\n      [`length-${String(parseInt(candlestick.close)).length}`]: true,\n    });\n\n    const toFixedNumbers = 2;\n\n    return (\n      <div className={className}>\n        <span className=\"ExchangeChart-bottom-stats-label\">O</span>\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.open.toFixed(toFixedNumbers)}</span>\n        <span className=\"ExchangeChart-bottom-stats-label\">H</span>\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.high.toFixed(toFixedNumbers)}</span>\n        <span className=\"ExchangeChart-bottom-stats-label\">L</span>\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.low.toFixed(toFixedNumbers)}</span>\n        <span className=\"ExchangeChart-bottom-stats-label\">C</span>\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.close.toFixed(toFixedNumbers)}</span>\n      </div>\n    );\n  }, [hoveredCandlestick, priceData]);\n\n  let high;\n  let low;\n  let deltaPrice;\n  let delta;\n  let deltaPercentage;\n  let deltaPercentageStr;\n\n  const now = parseInt(Date.now() / 1000);\n  const timeThreshold = now - 24 * 60 * 60;\n\n  if (priceData) {\n    for (let i = priceData.length - 1; i > 0; i--) {\n      const price = priceData[i];\n      if (price.time < timeThreshold) {\n        break;\n      }\n      if (!low) {\n        low = price.low;\n      }\n      if (!high) {\n        high = price.high;\n      }\n\n      if (price.high > high) {\n        high = price.high;\n      }\n      if (price.low < low) {\n        low = price.low;\n      }\n\n      deltaPrice = price.open;\n    }\n  }\n\n  if (deltaPrice && currentAveragePrice) {\n    const average = parseFloat(formatAmount(currentAveragePrice, USD_DECIMALS, 2));\n    delta = average - deltaPrice;\n    deltaPercentage = (delta * 100) / average;\n    if (deltaPercentage > 0) {\n      deltaPercentageStr = `+${deltaPercentage.toFixed(2)}%`;\n    } else {\n      deltaPercentageStr = `${deltaPercentage.toFixed(2)}%`;\n    }\n    if (deltaPercentage === 0) {\n      deltaPercentageStr = \"0.00\";\n    }\n  }\n\n  if (!chartToken) {\n    return null;\n  }\n\n  const onSelectToken = (token) => {\n    const tmp = getTokenInfo(infoTokens, token.address);\n    setChartToken(tmp);\n    setToTokenAddress(swapOption, token.address);\n  };\n\n  return (\n    <div className=\"ExchangeChart tv\" ref={ref}>\n      <div className=\"ExchangeChart-top App-box App-box-border\">\n        <div className=\"ExchangeChart-top-inner\">\n          <div>\n            <div className=\"ExchangeChart-title\">\n              <ChartTokenSelector\n                chainId={chainId}\n                selectedToken={chartToken}\n                swapOption={swapOption}\n                infoTokens={infoTokens}\n                onSelectToken={onSelectToken}\n                className=\"chart-token-selector\"\n              />\n            </div>\n          </div>\n          <div>\n            <div className=\"ExchangeChart-main-price\">\n              {chartToken.maxPrice && formatAmount(chartToken.maxPrice, USD_DECIMALS, 2, true)}\n            </div>\n            <div className=\"ExchangeChart-info-label\">\n              ${chartToken.minPrice && formatAmount(chartToken.minPrice, USD_DECIMALS, 2, true)}\n            </div>\n          </div>\n          <div>\n            <div className=\"ExchangeChart-info-label\">\n              <Trans>24h Change</Trans>\n            </div>\n            <div className={cx({ positive: deltaPercentage > 0, negative: deltaPercentage < 0 })}>\n              {!deltaPercentageStr && \"-\"}\n              {deltaPercentageStr && deltaPercentageStr}\n            </div>\n          </div>\n          <div className=\"ExchangeChart-additional-info\">\n            <div className=\"ExchangeChart-info-label\">\n              <Trans>24h High</Trans>\n            </div>\n            <div>\n              {!high && \"-\"}\n              {high && numberWithCommas(high.toFixed(2))}\n            </div>\n          </div>\n          <div className=\"ExchangeChart-additional-info\">\n            <div className=\"ExchangeChart-info-label\">\n              <Trans>24h Low</Trans>\n            </div>\n            <div>\n              {!low && \"-\"}\n              {low && numberWithCommas(low.toFixed(2))}\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"ExchangeChart-bottom App-box App-box-border\">\n        <div className=\"ExchangeChart-bottom-header\">\n          <div className=\"ExchangeChart-bottom-controls\">\n            <Tab options={Object.keys(CHART_PERIODS)} option={period} setOption={setPeriod} />\n          </div>\n          {candleStatsHtml}\n        </div>\n        <div className=\"ExchangeChart-bottom-content\" ref={chartRef}></div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useCallback, useEffect, useMemo } from \"react\";\nimport { ethers } from \"ethers\";\nimport cx from \"classnames\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { BsArrowRight } from \"react-icons/bs\";\n\nimport {\n  DEFAULT_SLIPPAGE_AMOUNT,\n  DEFAULT_HIGHER_SLIPPAGE_AMOUNT,\n  USD_DECIMALS,\n  DUST_USD,\n  BASIS_POINTS_DIVISOR,\n  MIN_PROFIT_TIME,\n  getLiquidationPrice,\n  getLeverage,\n  getMarginFee,\n  PRECISION,\n  MARKET,\n  STOP,\n  DECREASE,\n  calculatePositionDelta,\n  getDeltaStr,\n  getProfitPrice,\n  getNextToAmount,\n  USDG_DECIMALS,\n  adjustForDecimals,\n} from \"lib/legacy\";\nimport { ARBITRUM, getChainName, getConstant, IS_NETWORK_DISABLED } from \"config/chains\";\nimport { createDecreaseOrder, useHasOutdatedUi } from \"domain/legacy\";\nimport { getContract } from \"config/contracts\";\nimport PositionRouter from \"abis/PositionRouter.json\";\nimport Checkbox from \"../Checkbox/Checkbox\";\nimport Tab from \"../Tab/Tab\";\nimport Modal from \"../Modal/Modal\";\nimport ExchangeInfoRow from \"./ExchangeInfoRow\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport TokenSelector from \"./TokenSelector\";\nimport \"./PositionSeller.css\";\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\nimport { callContract } from \"lib/contracts\";\nimport { getTokenAmountFromUsd } from \"domain/tokens\";\nimport { TRIGGER_PREFIX_ABOVE, TRIGGER_PREFIX_BELOW } from \"config/ui\";\nimport { useLocalStorageByChainId, useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { CLOSE_POSITION_RECEIVE_TOKEN_KEY, SLIPPAGE_BPS_KEY } from \"config/localStorage\";\nimport { getTokenInfo, getUsd } from \"domain/tokens/utils\";\nimport { usePrevious } from \"lib/usePrevious\";\nimport { bigNumberify, expandDecimals, formatAmount, formatAmountFree, parseValue } from \"lib/numbers\";\nimport { getTokens } from \"config/tokens\";\nimport { formatDateTime, getTimeRemaining } from \"lib/dates\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nconst { AddressZero } = ethers.constants;\nconst ORDER_SIZE_DUST_USD = expandDecimals(1, USD_DECIMALS - 1); // $0.10\n\nfunction shouldSwap(collateralToken, receiveToken) {\n  // If position collateral is WETH in contract, then position.collateralToken is { symbol: “ETH”, isNative: true, … }\n  // @see https://github.com/Amx-Dex/gmx-interface/blob/master/src/pages/Exchange/Exchange.js#L162\n  // meaning if collateralToken.isNative === true in reality position has WETH as a collateral\n  // and if collateralToken.isNative === true and receiveToken.isNative === true then position’s WETH will be unwrapped and user will receive native ETH\n  const isCollateralWrapped = collateralToken.isNative;\n\n  const isSameToken =\n    collateralToken.address === receiveToken.address || (isCollateralWrapped && receiveToken.isWrapped);\n\n  const isUnwrap = isCollateralWrapped && receiveToken.isNative;\n\n  return !isSameToken && !isUnwrap;\n}\n\nfunction getSwapLimits(infoTokens, fromTokenAddress, toTokenAddress) {\n  const fromInfo = getTokenInfo(infoTokens, fromTokenAddress);\n  const toInfo = getTokenInfo(infoTokens, toTokenAddress);\n\n  let maxInUsd;\n  let maxIn;\n  let maxOut;\n  let maxOutUsd;\n\n  if (!fromInfo?.maxUsdgAmount) {\n    maxInUsd = bigNumberify(0);\n    maxIn = bigNumberify(0);\n  } else {\n    maxInUsd = fromInfo.maxUsdgAmount\n      .sub(fromInfo.usdgAmount)\n      .mul(expandDecimals(1, USD_DECIMALS))\n      .div(expandDecimals(1, USDG_DECIMALS));\n\n    maxIn = maxInUsd.mul(expandDecimals(1, fromInfo.decimals)).div(fromInfo.maxPrice).toString();\n  }\n\n  if (!toInfo?.poolAmount || !toInfo?.bufferAmount) {\n    maxOut = bigNumberify(0);\n    maxOutUsd = bigNumberify(0);\n  } else {\n    maxOut = toInfo.availableAmount.gt(toInfo.poolAmount.sub(toInfo.bufferAmount))\n      ? toInfo.poolAmount.sub(toInfo.bufferAmount)\n      : toInfo.availableAmount;\n\n    maxOutUsd = getUsd(maxOut, toInfo.address, false, infoTokens);\n  }\n\n  return {\n    maxIn,\n    maxInUsd,\n    maxOut,\n    maxOutUsd,\n  };\n}\n\nexport default function PositionSeller(props) {\n  const {\n    pendingPositions,\n    setPendingPositions,\n    positionsMap,\n    positionKey,\n    isVisible,\n    setIsVisible,\n    account,\n    library,\n    infoTokens,\n    setPendingTxns,\n    flagOrdersEnabled,\n    savedIsPnlInLeverage,\n    chainId,\n    nativeTokenAddress,\n    orders,\n    isWaitingForPluginApproval,\n    isPluginApproving,\n    orderBookApproved,\n    setOrdersToaOpen,\n    positionRouterApproved,\n    isWaitingForPositionRouterApproval,\n    isPositionRouterApproving,\n    approvePositionRouter,\n    isHigherSlippageAllowed,\n    setIsHigherSlippageAllowed,\n    minExecutionFee,\n    minExecutionFeeErrorMessage,\n    usdgSupply,\n    totalTokenWeights,\n  } = props;\n  const [savedSlippageAmount] = useLocalStorageSerializeKey([chainId, SLIPPAGE_BPS_KEY], DEFAULT_SLIPPAGE_AMOUNT);\n  const [keepLeverage, setKeepLeverage] = useLocalStorageSerializeKey([chainId, \"Exchange-keep-leverage\"], true);\n  const position = positionsMap && positionKey ? positionsMap[positionKey] : undefined;\n  const [fromValue, setFromValue] = useState(\"\");\n  const [isProfitWarningAccepted, setIsProfitWarningAccepted] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const prevIsVisible = usePrevious(isVisible);\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n  const nativeTokenSymbol = getConstant(chainId, \"nativeTokenSymbol\");\n  const toTokens = getTokens(chainId);\n  const longOrShortText = position?.isLong ? t`Long` : t`Short`;\n\n  const [savedRecieveTokenAddress, setSavedRecieveTokenAddress] = useLocalStorageByChainId(\n    chainId,\n    `${CLOSE_POSITION_RECEIVE_TOKEN_KEY}-${position?.indexToken?.symbol}-${position.isLong ? \"long\" : \"short\"}`\n  );\n\n  const [swapToToken, setSwapToToken] = useState(() =>\n    savedRecieveTokenAddress ? toTokens.find((token) => token.address === savedRecieveTokenAddress) : undefined\n  );\n\n  let allowedSlippage = savedSlippageAmount;\n  if (isHigherSlippageAllowed) {\n    allowedSlippage = DEFAULT_HIGHER_SLIPPAGE_AMOUNT;\n  }\n\n  const ORDER_OPTIONS = [MARKET, STOP];\n  const ORDER_OPTION_LABELS = {\n    [MARKET]: t`Market`,\n    [STOP]: t`Trigger`,\n  };\n  let [orderOption, setOrderOption] = useState(MARKET);\n\n  if (!flagOrdersEnabled) {\n    orderOption = MARKET;\n  }\n\n  const needPositionRouterApproval = !positionRouterApproved && orderOption === MARKET;\n\n  const onOrderOptionChange = (option) => {\n    setOrderOption(option);\n  };\n\n  const onTriggerPriceChange = (evt) => {\n    setTriggerPriceValue(evt.target.value || \"\");\n  };\n\n  const [triggerPriceValue, setTriggerPriceValue] = useState(\"\");\n  const triggerPriceUsd = orderOption === MARKET ? 0 : parseValue(triggerPriceValue, USD_DECIMALS);\n\n  const [nextDelta, nextHasProfit = bigNumberify(0)] = useMemo(() => {\n    if (!position) {\n      return [bigNumberify(0), false];\n    }\n\n    if (orderOption !== STOP) {\n      return [position.delta, position.hasProfit, position.deltaPercentage];\n    }\n\n    if (!triggerPriceUsd) {\n      return [bigNumberify(0), false];\n    }\n\n    const { delta, hasProfit, deltaPercentage } = calculatePositionDelta(triggerPriceUsd, position);\n    return [delta, hasProfit, deltaPercentage];\n  }, [position, orderOption, triggerPriceUsd]);\n\n  const existingOrders = useMemo(() => {\n    if (orderOption === STOP && (!triggerPriceUsd || triggerPriceUsd.eq(0))) {\n      return [];\n    }\n    if (!orders || !position) {\n      return [];\n    }\n\n    const ret = [];\n    for (const order of orders) {\n      // only Stop orders can't be executed without corresponding opened position\n      if (order.type !== DECREASE) continue;\n\n      // if user creates Stop-Loss we need only Stop-Loss orders and vice versa\n      if (orderOption === STOP) {\n        const triggerAboveThreshold = triggerPriceUsd.gt(position.markPrice);\n        if (triggerAboveThreshold !== order.triggerAboveThreshold) continue;\n      }\n\n      const sameToken =\n        order.indexToken === nativeTokenAddress\n          ? position.indexToken.isNative\n          : order.indexToken === position.indexToken.address;\n      if (order.isLong === position.isLong && sameToken) {\n        ret.push(order);\n      }\n    }\n    return ret;\n  }, [position, orders, triggerPriceUsd, orderOption, nativeTokenAddress]);\n\n  const existingOrder = existingOrders[0];\n\n  const needOrderBookApproval = orderOption === STOP && !orderBookApproved;\n\n  const isSwapAllowed = orderOption === MARKET;\n\n  const { data: hasOutdatedUi } = useHasOutdatedUi();\n\n  let collateralToken;\n  let receiveToken;\n  let maxAmount;\n  let maxAmountFormatted;\n  let maxAmountFormattedFree;\n  let fromAmount;\n\n  let convertedAmount;\n  let convertedAmountFormatted;\n\n  let nextLeverage;\n  let liquidationPrice;\n  let nextLiquidationPrice;\n  let isClosing;\n  let sizeDelta;\n\n  let nextCollateral;\n  let collateralDelta = bigNumberify(0);\n  let receiveAmount = bigNumberify(0);\n  let convertedReceiveAmount = bigNumberify(0);\n  let adjustedDelta = bigNumberify(0);\n\n  let isNotEnoughReceiveTokenLiquidity;\n  let isCollateralPoolCapacityExceeded;\n\n  let title;\n  let fundingFee;\n  let positionFee;\n  let swapFeeToken;\n  let swapFee;\n  let totalFees = bigNumberify(0);\n\n  let executionFee = orderOption === STOP ? getConstant(chainId, \"DECREASE_ORDER_EXECUTION_GAS_FEE\") : minExecutionFee;\n\n  let executionFeeUsd = getUsd(executionFee, nativeTokenAddress, false, infoTokens) || bigNumberify(0);\n\n  if (position) {\n    fundingFee = position.fundingFee;\n    fromAmount = parseValue(fromValue, USD_DECIMALS);\n    sizeDelta = fromAmount;\n\n    title = t`Close ${longOrShortText} ${position.indexToken.symbol}`;\n    collateralToken = position.collateralToken;\n    liquidationPrice = getLiquidationPrice(position);\n\n    if (fromAmount) {\n      isClosing = position.size.sub(fromAmount).lt(DUST_USD);\n      positionFee = getMarginFee(fromAmount);\n    }\n\n    if (isClosing) {\n      sizeDelta = position.size;\n      receiveAmount = position.collateral;\n    } else if (orderOption === STOP && sizeDelta && existingOrders.length > 0) {\n      let residualSize = position.size;\n      for (const order of existingOrders) {\n        residualSize = residualSize.sub(order.sizeDelta);\n      }\n      if (residualSize.sub(sizeDelta).abs().lt(ORDER_SIZE_DUST_USD)) {\n        sizeDelta = residualSize;\n      }\n    }\n\n    if (sizeDelta) {\n      adjustedDelta = nextDelta.mul(sizeDelta).div(position.size);\n    }\n\n    if (nextHasProfit) {\n      receiveAmount = receiveAmount.add(adjustedDelta);\n    } else {\n      if (receiveAmount.gt(adjustedDelta)) {\n        receiveAmount = receiveAmount.sub(adjustedDelta);\n      } else {\n        receiveAmount = bigNumberify(0);\n      }\n    }\n\n    if (keepLeverage && sizeDelta && !isClosing) {\n      collateralDelta = sizeDelta.mul(position.collateral).div(position.size);\n      // if the position will be realising a loss then reduce collateralDelta by the realised loss\n      if (!nextHasProfit) {\n        const deductions = adjustedDelta.add(positionFee).add(fundingFee);\n        if (collateralDelta.gt(deductions)) {\n          collateralDelta = collateralDelta = collateralDelta.sub(deductions);\n        } else {\n          collateralDelta = bigNumberify(0);\n        }\n      }\n    }\n\n    maxAmount = position.size;\n    maxAmountFormatted = formatAmount(maxAmount, USD_DECIMALS, 2, true);\n    maxAmountFormattedFree = formatAmountFree(maxAmount, USD_DECIMALS, 2);\n\n    if (fromAmount && collateralToken.maxPrice) {\n      convertedAmount = fromAmount.mul(expandDecimals(1, collateralToken.decimals)).div(collateralToken.maxPrice);\n      convertedAmountFormatted = formatAmount(convertedAmount, collateralToken.decimals, 4, true);\n    }\n\n    totalFees = totalFees.add(positionFee || bigNumberify(0)).add(fundingFee || bigNumberify(0));\n\n    receiveAmount = receiveAmount.add(collateralDelta);\n\n    if (sizeDelta) {\n      if (receiveAmount.gt(totalFees)) {\n        receiveAmount = receiveAmount.sub(totalFees);\n      } else {\n        receiveAmount = bigNumberify(0);\n      }\n    }\n\n    receiveToken = isSwapAllowed && swapToToken ? swapToToken : collateralToken;\n\n    // Calculate swap fees\n    if (isSwapAllowed && swapToToken) {\n      const { feeBasisPoints } = getNextToAmount(\n        chainId,\n        convertedAmount,\n        collateralToken.address,\n        receiveToken.address,\n        infoTokens,\n        undefined,\n        undefined,\n        usdgSupply,\n        totalTokenWeights,\n        true\n      );\n\n      if (feeBasisPoints) {\n        swapFee = receiveAmount.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n        swapFeeToken = getTokenAmountFromUsd(infoTokens, collateralToken.address, swapFee);\n        totalFees = totalFees.add(swapFee || bigNumberify(0));\n        receiveAmount = receiveAmount.sub(swapFee);\n      }\n    }\n\n    if (orderOption === STOP) {\n      convertedReceiveAmount = getTokenAmountFromUsd(infoTokens, receiveToken.address, receiveAmount, {\n        overridePrice: triggerPriceUsd,\n      });\n    } else {\n      convertedReceiveAmount = getTokenAmountFromUsd(infoTokens, receiveToken.address, receiveAmount);\n    }\n\n    // Check swap limits (max in / max out)\n    if (isSwapAllowed && shouldSwap(collateralToken, receiveToken)) {\n      const collateralInfo = getTokenInfo(infoTokens, collateralToken.address);\n      const receiveTokenInfo = getTokenInfo(infoTokens, receiveToken.address);\n\n      isNotEnoughReceiveTokenLiquidity =\n        receiveTokenInfo.availableAmount.lt(convertedReceiveAmount) ||\n        receiveTokenInfo.bufferAmount.gt(receiveTokenInfo.poolAmount.sub(convertedReceiveAmount));\n\n      if (\n        collateralInfo.maxUsdgAmount &&\n        collateralInfo.maxUsdgAmount.gt(0) &&\n        collateralInfo.usdgAmount &&\n        collateralInfo.maxPrice\n      ) {\n        const usdgFromAmount = adjustForDecimals(receiveAmount, USD_DECIMALS, USDG_DECIMALS);\n        const nextUsdgAmount = collateralInfo.usdgAmount.add(usdgFromAmount);\n\n        if (nextUsdgAmount.gt(collateralInfo.maxUsdgAmount)) {\n          isCollateralPoolCapacityExceeded = true;\n        }\n      }\n    }\n\n    if (isClosing) {\n      nextCollateral = bigNumberify(0);\n    } else {\n      if (position.collateral) {\n        nextCollateral = position.collateral;\n        if (collateralDelta && collateralDelta.gt(0)) {\n          nextCollateral = position.collateral.sub(collateralDelta);\n        } else if (position.delta && position.delta.gt(0) && sizeDelta) {\n          if (!position.hasProfit) {\n            nextCollateral = nextCollateral.sub(adjustedDelta);\n          }\n        }\n      }\n    }\n\n    if (fromAmount) {\n      if (!isClosing && !keepLeverage) {\n        nextLeverage = getLeverage({\n          size: position.size,\n          sizeDelta,\n          collateral: position.collateral,\n          entryFundingRate: position.entryFundingRate,\n          cumulativeFundingRate: position.cumulativeFundingRate,\n          hasProfit: nextHasProfit,\n          delta: nextDelta,\n          includeDelta: savedIsPnlInLeverage,\n        });\n        nextLiquidationPrice = getLiquidationPrice({\n          isLong: position.isLong,\n          size: position.size,\n          sizeDelta,\n          collateral: position.collateral,\n          averagePrice: position.averagePrice,\n          entryFundingRate: position.entryFundingRate,\n          cumulativeFundingRate: position.cumulativeFundingRate,\n          delta: nextDelta,\n          hasProfit: nextHasProfit,\n          includeDelta: true,\n        });\n      }\n    }\n  }\n\n  const [deltaStr, deltaPercentageStr] = useMemo(() => {\n    if (!position || !position.markPrice) {\n      return [\"-\", \"-\"];\n    }\n    if (orderOption !== STOP) {\n      const { pendingDelta, pendingDeltaPercentage, hasProfit } = calculatePositionDelta(\n        position.markPrice,\n        position,\n        fromAmount\n      );\n      const { deltaStr, deltaPercentageStr } = getDeltaStr({\n        delta: pendingDelta,\n        deltaPercentage: pendingDeltaPercentage,\n        hasProfit,\n      });\n      return [deltaStr, deltaPercentageStr];\n    }\n    if (!triggerPriceUsd || triggerPriceUsd.eq(0)) {\n      return [\"-\", \"-\"];\n    }\n\n    const { pendingDelta, pendingDeltaPercentage, hasProfit } = calculatePositionDelta(\n      triggerPriceUsd,\n      position,\n      fromAmount\n    );\n\n    const { deltaStr, deltaPercentageStr } = getDeltaStr({\n      delta: pendingDelta,\n      deltaPercentage: pendingDeltaPercentage,\n      hasProfit,\n    });\n    return [deltaStr, deltaPercentageStr];\n  }, [position, triggerPriceUsd, orderOption, fromAmount]);\n\n  const getError = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      if (orderOption === STOP) return [t`Trigger order disabled, pending ${getChainName(chainId)} upgrade`];\n      return [t`Position close disabled, pending ${getChainName(chainId)} upgrade`];\n    }\n    if (hasOutdatedUi) {\n      return t`Page outdated, please refresh`;\n    }\n    if (!fromAmount) {\n      return t`Enter an amount`;\n    }\n    if (nextLeverage && nextLeverage.eq(0)) {\n      return t`Enter an amount`;\n    }\n    if (orderOption === STOP) {\n      if (!triggerPriceUsd || triggerPriceUsd.eq(0)) {\n        return t`Enter Price`;\n      }\n      if (position.isLong && triggerPriceUsd.lte(liquidationPrice)) {\n        return t`Price below Liq. Price`;\n      }\n      if (!position.isLong && triggerPriceUsd.gte(liquidationPrice)) {\n        return t`Price above Liq. Price`;\n      }\n\n      if (profitPrice && nextDelta.eq(0) && nextHasProfit) {\n        return t`Invalid price, see warning`;\n      }\n    }\n\n    if (isNotEnoughReceiveTokenLiquidity) {\n      return t`Insufficient receive token liquidity`;\n    }\n\n    if (isCollateralPoolCapacityExceeded) {\n      return t`${collateralToken.symbol} pool exceeded, can only Receive ${collateralToken.symbol}`;\n    }\n\n    if (!isClosing && position && position.size && fromAmount) {\n      if (position.size.sub(fromAmount).lt(expandDecimals(10, USD_DECIMALS))) {\n        return t`Leftover position below 10 USD`;\n      }\n      if (nextCollateral && nextCollateral.lt(expandDecimals(5, USD_DECIMALS))) {\n        return t`Leftover collateral below 5 USD`;\n      }\n    }\n\n    if (position && position.size && position.size.lt(fromAmount)) {\n      return t`Max close amount exceeded`;\n    }\n\n    if (nextLeverage && nextLeverage.lt(1.1 * BASIS_POINTS_DIVISOR)) {\n      return t`Min leverage: 1.1x`;\n    }\n\n    if (nextLeverage && nextLeverage.gt(30.5 * BASIS_POINTS_DIVISOR)) {\n      return t`Max leverage: 30.5xt`;\n    }\n\n    if (hasPendingProfit && orderOption !== STOP && !isProfitWarningAccepted) {\n      return t`Forfeit profit not checked`;\n    }\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isSubmitting) {\n      return false;\n    }\n    if (needOrderBookApproval && isWaitingForPluginApproval) {\n      return false;\n    }\n    if (isPluginApproving) {\n      return false;\n    }\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return false;\n    }\n    if (isPositionRouterApproving) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const hasPendingProfit = MIN_PROFIT_TIME > 0 && position.delta.eq(0) && position.pendingDelta.gt(0);\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n\n    if (orderOption === STOP) {\n      if (isSubmitting) return t`Creating Order...`;\n\n      if (needOrderBookApproval && isWaitingForPluginApproval) {\n        return t`Enabling Orders...`;\n      }\n      if (isPluginApproving) {\n        return t`Enabling Orders...`;\n      }\n      if (needOrderBookApproval) {\n        return t`Enable Orders`;\n      }\n\n      return t`Create Order`;\n    }\n\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return t`Enabling Leverage...`;\n    }\n\n    if (isPositionRouterApproving) {\n      return t`Enabling Leverage...`;\n    }\n\n    if (needPositionRouterApproval) {\n      return t`Enable Leverage`;\n    }\n\n    if (hasPendingProfit) {\n      return t`Close without profit`;\n    }\n    return isSubmitting ? t`Closing...` : t`Close`;\n  };\n\n  const resetForm = () => {\n    setFromValue(\"\");\n    setIsProfitWarningAccepted(false);\n  };\n\n  useEffect(() => {\n    if (prevIsVisible !== isVisible) {\n      resetForm();\n    }\n  }, [prevIsVisible, isVisible]);\n\n  const onClickPrimary = async () => {\n    if (needOrderBookApproval) {\n      setOrdersToaOpen(true);\n      return;\n    }\n\n    if (needPositionRouterApproval) {\n      approvePositionRouter({\n        sentMsg: t`Enable leverage sent.`,\n        failMsg: t`Enable leverage failed.`,\n      });\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    const collateralTokenAddress = position.collateralToken.isNative\n      ? nativeTokenAddress\n      : position.collateralToken.address;\n    const indexTokenAddress = position.indexToken.isNative ? nativeTokenAddress : position.indexToken.address;\n\n    if (orderOption === STOP) {\n      const triggerAboveThreshold = triggerPriceUsd.gt(position.markPrice);\n\n      createDecreaseOrder(\n        chainId,\n        library,\n        indexTokenAddress,\n        sizeDelta,\n        collateralTokenAddress,\n        collateralDelta,\n        position.isLong,\n        triggerPriceUsd,\n        triggerAboveThreshold,\n        {\n          sentMsg: t`Order submitted!`,\n          successMsg: t`Order created!`,\n          failMsg: t`Order creation failed.`,\n          setPendingTxns,\n        }\n      )\n        .then(() => {\n          setFromValue(\"\");\n          setIsVisible(false);\n        })\n        .finally(() => {\n          setIsSubmitting(false);\n        });\n      return;\n    }\n\n    const priceBasisPoints = position.isLong\n      ? BASIS_POINTS_DIVISOR - allowedSlippage\n      : BASIS_POINTS_DIVISOR + allowedSlippage;\n    const refPrice = position.isLong ? position.indexToken.minPrice : position.indexToken.maxPrice;\n    let priceLimit = refPrice.mul(priceBasisPoints).div(BASIS_POINTS_DIVISOR);\n    const minProfitExpiration = position.lastIncreasedTime + MIN_PROFIT_TIME;\n    const minProfitTimeExpired = parseInt(Date.now() / 1000) > minProfitExpiration;\n\n    if (nextHasProfit && !minProfitTimeExpired && !isProfitWarningAccepted) {\n      if ((position.isLong && priceLimit.lt(profitPrice)) || (!position.isLong && priceLimit.gt(profitPrice))) {\n        priceLimit = profitPrice;\n      }\n    }\n\n    const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\n\n    const path = [tokenAddress0];\n\n    const isUnwrap = receiveToken.address === AddressZero;\n    const isSwap = receiveToken.address !== tokenAddress0;\n\n    if (isSwap) {\n      if (isUnwrap && tokenAddress0 !== nativeTokenAddress) {\n        path.push(nativeTokenAddress);\n      } else if (!isUnwrap) {\n        path.push(receiveToken.address);\n      }\n    }\n\n    const withdrawETH = isUnwrap;\n\n    const params = [\n      path, // _path\n      indexTokenAddress, // _indexToken\n      collateralDelta, // _collateralDelta\n      sizeDelta, // _sizeDelta\n      position.isLong, // _isLong\n      account, // _receiver\n      priceLimit, // _acceptablePrice\n      0, // _minOut\n      minExecutionFee, // _executionFee\n      withdrawETH, // _withdrawETH\n      AddressZero, // _callbackTarget\n    ];\n    const sizeDeltaUsd = formatAmount(sizeDelta, USD_DECIMALS, 2);\n    const successMsg = t`Requested decrease of ${position.indexToken.symbol} ${longOrShortText} by ${sizeDeltaUsd} USD.`;\n\n    const contract = new ethers.Contract(positionRouterAddress, PositionRouter.abi, library.getSigner());\n\n    callContract(chainId, contract, \"createDecreasePosition\", params, {\n      value: minExecutionFee,\n      sentMsg: t`Close submitted!`,\n      successMsg,\n      failMsg: t`Close failed.`,\n      setPendingTxns,\n      // for Arbitrum, sometimes the successMsg shows after the position has already been executed\n      // hide the success message for Arbitrum as a workaround\n      hideSuccessMsg: chainId === ARBITRUM,\n    })\n      .then(async (res) => {\n        setFromValue(\"\");\n        setIsVisible(false);\n\n        let nextSize = position.size.sub(sizeDelta);\n\n        pendingPositions[position.key] = {\n          updatedAt: Date.now(),\n          pendingChanges: {\n            size: nextSize,\n          },\n        };\n\n        setPendingPositions({ ...pendingPositions });\n      })\n      .finally(() => {\n        setIsSubmitting(false);\n      });\n  };\n\n  const renderExistingOrderWarning = useCallback(() => {\n    if (!existingOrder) {\n      return;\n    }\n    const indexToken = getTokenInfo(infoTokens, existingOrder.indexToken);\n    const sizeInToken = formatAmount(\n      existingOrder.sizeDelta.mul(PRECISION).div(existingOrder.triggerPrice),\n      USD_DECIMALS,\n      4,\n      true\n    );\n    const prefix = existingOrder.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n    return (\n      <div className=\"Confirmation-box-warning\">\n        <Trans>\n          You have an active order to decrease {longOrShortText} {sizeInToken} {indexToken.symbol} ($\n          {formatAmount(existingOrder.sizeDelta, USD_DECIMALS, 2, true)}) at {prefix}{\" \"}\n          {formatAmount(existingOrder.triggerPrice, USD_DECIMALS, 2, true)}\n        </Trans>\n      </div>\n    );\n  }, [existingOrder, infoTokens, longOrShortText]);\n\n  function renderMinProfitWarning() {\n    if (MIN_PROFIT_TIME === 0) {\n      return null;\n    }\n\n    if (profitPrice && nextDelta.eq(0) && nextHasProfit) {\n      const minProfitExpiration = position.lastIncreasedTime + MIN_PROFIT_TIME;\n\n      if (orderOption === MARKET) {\n        return (\n          <div className=\"Confirmation-box-warning\">\n            <Trans>\n              Reducing the position at the current price will forfeit a&nbsp;\n              <ExternalLink href=\"https://amxdex.gitbook.io/amxdex/trading#minimum-price-change\">\n                pending profit\n              </ExternalLink>{\" \"}\n              of {deltaStr}. <br />\n            </Trans>\n            <Trans>\n              <br />\n              Profit price: {position.isLong ? \">\" : \"<\"} ${formatAmount(profitPrice, USD_DECIMALS, 2, true)}. This rule\n              applies for the next {getTimeRemaining(minProfitExpiration)}, until {formatDateTime(minProfitExpiration)}.\n            </Trans>\n          </div>\n        );\n      }\n      return (\n        <div className=\"Confirmation-box-warning\">\n          <Trans>\n            This order will forfeit a&nbsp;\n            <ExternalLink href=\"https://amxdex.gitbook.io/amxdex/trading#minimum-price-change\">profit</ExternalLink> of{\" \"}\n            {deltaStr}. <br />\n          </Trans>\n          <Trans>\n            Profit price: {position.isLong ? \">\" : \"<\"} ${formatAmount(profitPrice, USD_DECIMALS, 2, true)}. This rule\n            applies for the next {getTimeRemaining(minProfitExpiration)}, until {formatDateTime(minProfitExpiration)}.\n          </Trans>\n        </div>\n      );\n    }\n  }\n\n  const profitPrice = getProfitPrice(orderOption === MARKET ? position.markPrice : triggerPriceUsd, position);\n\n  let triggerPricePrefix;\n  if (triggerPriceUsd) {\n    triggerPricePrefix = triggerPriceUsd.gt(position.markPrice) ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n  }\n\n  const shouldShowExistingOrderWarning = false;\n\n  return (\n    <div className=\"PositionEditor\">\n      {position && (\n        <Modal\n          className=\"PositionSeller-modal\"\n          isVisible={isVisible}\n          setIsVisible={setIsVisible}\n          label={title}\n          allowContentTouchMove\n        >\n          {flagOrdersEnabled && (\n            <Tab\n              options={ORDER_OPTIONS}\n              option={orderOption}\n              optionLabels={ORDER_OPTION_LABELS}\n              onChange={onOrderOptionChange}\n            />\n          )}\n          <div className=\"Exchange-swap-section\">\n            <div className=\"Exchange-swap-section-top\">\n              <div className=\"muted\">\n                {convertedAmountFormatted && (\n                  <div className=\"Exchange-swap-usd\">\n                    <Trans>\n                      Close: {convertedAmountFormatted} {position.collateralToken.symbol}\n                    </Trans>\n                  </div>\n                )}\n                {!convertedAmountFormatted && t`Close`}\n              </div>\n              {maxAmount && (\n                <div className=\"muted align-right clickable\" onClick={() => setFromValue(maxAmountFormattedFree)}>\n                  <Trans>Max: {maxAmountFormatted}</Trans>\n                </div>\n              )}\n            </div>\n            <div className=\"Exchange-swap-section-bottom\">\n              <div className=\"Exchange-swap-input-container\">\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  placeholder=\"0.0\"\n                  className=\"Exchange-swap-input\"\n                  value={fromValue}\n                  onChange={(e) => setFromValue(e.target.value)}\n                />\n                {fromValue !== maxAmountFormattedFree && (\n                  <div\n                    className=\"Exchange-swap-max\"\n                    onClick={() => {\n                      setFromValue(maxAmountFormattedFree);\n                    }}\n                  >\n                    <Trans>MAX</Trans>\n                  </div>\n                )}\n              </div>\n              <div className=\"PositionEditor-token-symbol\">USD</div>\n            </div>\n          </div>\n          {orderOption === STOP && (\n            <div className=\"Exchange-swap-section\">\n              <div className=\"Exchange-swap-section-top\">\n                <div className=\"muted\">\n                  <Trans>Price</Trans>\n                </div>\n                <div\n                  className=\"muted align-right clickable\"\n                  onClick={() => {\n                    setTriggerPriceValue(formatAmountFree(position.markPrice, USD_DECIMALS, 2));\n                  }}\n                >\n                  <Trans>Mark: {formatAmount(position.markPrice, USD_DECIMALS, 2, true)}</Trans>\n                </div>\n              </div>\n              <div className=\"Exchange-swap-section-bottom\">\n                <div className=\"Exchange-swap-input-container\">\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    placeholder=\"0.0\"\n                    className=\"Exchange-swap-input\"\n                    value={triggerPriceValue}\n                    onChange={onTriggerPriceChange}\n                  />\n                </div>\n                <div className=\"PositionEditor-token-symbol\">USD</div>\n              </div>\n            </div>\n          )}\n          {renderMinProfitWarning()}\n          {shouldShowExistingOrderWarning && renderExistingOrderWarning()}\n          <div className=\"PositionEditor-info-box\">\n            {minExecutionFeeErrorMessage && (\n              <div className=\"Confirmation-box-warning\">{minExecutionFeeErrorMessage}</div>\n            )}\n            {hasPendingProfit && orderOption !== STOP && (\n              <div className=\"PositionEditor-accept-profit-warning\">\n                <Checkbox isChecked={isProfitWarningAccepted} setIsChecked={setIsProfitWarningAccepted}>\n                  <span className=\"muted\">Forfeit profit</span>\n                </Checkbox>\n              </div>\n            )}\n            <div className=\"PositionEditor-keep-leverage-settings\">\n              <Checkbox isChecked={keepLeverage} setIsChecked={setKeepLeverage}>\n                <span className=\"muted font-sm\">\n                  <Trans>Keep leverage at {formatAmount(position.leverage, 4, 2)}x</Trans>\n                </span>\n              </Checkbox>\n            </div>\n            {orderOption === MARKET && (\n              <div className=\"PositionEditor-allow-higher-slippage\">\n                <Checkbox isChecked={isHigherSlippageAllowed} setIsChecked={setIsHigherSlippageAllowed}>\n                  <span className=\"muted font-sm\">\n                    <Trans>Allow up to 1% slippage</Trans>\n                  </span>\n                </Checkbox>\n              </div>\n            )}\n            {orderOption === MARKET && (\n              <div>\n                <ExchangeInfoRow label={t`Allowed Slippage`}>\n                  <Tooltip\n                    handle={`${formatAmount(allowedSlippage, 2, 2)}%`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <Trans>\n                          You can change this in the settings menu on the top right of the page.\n                          <br />\n                          <br />\n                          Note that a low allowed slippage, e.g. less than 0.5%, may result in failed orders if prices\n                          are volatile.\n                        </Trans>\n                      );\n                    }}\n                  />\n                </ExchangeInfoRow>\n              </div>\n            )}\n            {orderOption === STOP && (\n              <div className=\"Exchange-info-row\">\n                <div className=\"Exchange-info-label\">\n                  <Trans>Trigger Price</Trans>\n                </div>\n                <div className=\"align-right\">\n                  {!triggerPriceUsd && \"-\"}\n                  {triggerPriceUsd && `${triggerPricePrefix} ${formatAmount(triggerPriceUsd, USD_DECIMALS, 2, true)}`}\n                </div>\n              </div>\n            )}\n            <div className=\"Exchange-info-row top-line\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Mark Price</Trans>\n              </div>\n              <div className=\"align-right\">${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}</div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Entry Price</Trans>\n              </div>\n              <div className=\"align-right\">${formatAmount(position.averagePrice, USD_DECIMALS, 2, true)}</div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Liq. Price</Trans>\n              </div>\n              <div className=\"align-right\">\n                {isClosing && orderOption !== STOP && \"-\"}\n                {(!isClosing || orderOption === STOP) && (\n                  <div>\n                    {(!nextLiquidationPrice || nextLiquidationPrice.eq(liquidationPrice)) && (\n                      <div>{`$${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}`}</div>\n                    )}\n                    {nextLiquidationPrice && !nextLiquidationPrice.eq(liquidationPrice) && (\n                      <div>\n                        <div className=\"inline-block muted\">\n                          ${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}\n                          <BsArrowRight className=\"transition-arrow\" />\n                        </div>\n                        ${formatAmount(nextLiquidationPrice, USD_DECIMALS, 2, true)}\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n            <div className=\"Exchange-info-row top-line\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Size</Trans>\n              </div>\n              <div className=\"align-right\">\n                {position && position.size && fromAmount && (\n                  <div>\n                    <div className=\"inline-block muted\">\n                      ${formatAmount(position.size, USD_DECIMALS, 2, true)}\n                      <BsArrowRight className=\"transition-arrow\" />\n                    </div>\n                    ${formatAmount(position.size.sub(fromAmount), USD_DECIMALS, 2, true)}\n                  </div>\n                )}\n                {position && position.size && !fromAmount && (\n                  <div>${formatAmount(position.size, USD_DECIMALS, 2, true)}</div>\n                )}\n              </div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Collateral ({collateralToken.symbol})</Trans>\n              </div>\n              <div className=\"align-right\">\n                {nextCollateral && !nextCollateral.eq(position.collateral) ? (\n                  <div>\n                    <div className=\"inline-block muted\">\n                      ${formatAmount(position.collateral, USD_DECIMALS, 2, true)}\n                      <BsArrowRight className=\"transition-arrow\" />\n                    </div>\n                    ${formatAmount(nextCollateral, USD_DECIMALS, 2, true)}\n                  </div>\n                ) : (\n                  `$${formatAmount(position.collateral, USD_DECIMALS, 4, true)}`\n                )}\n              </div>\n            </div>\n            {!keepLeverage && (\n              <div className=\"Exchange-info-row\">\n                <div className=\"Exchange-info-label\">\n                  <Trans>Leverage</Trans>\n                </div>\n                <div className=\"align-right\">\n                  {isClosing && \"-\"}\n                  {!isClosing && (\n                    <div>\n                      {!nextLeverage && <div>{formatAmount(position.leverage, 4, 2)}x</div>}\n                      {nextLeverage && (\n                        <div>\n                          <div className=\"inline-block muted\">\n                            {formatAmount(position.leverage, 4, 2)}x\n                            <BsArrowRight className=\"transition-arrow\" />\n                          </div>\n                          {formatAmount(nextLeverage, 4, 2)}x\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>PnL</Trans>\n              </div>\n              <div className=\"align-right\">\n                {deltaStr} ({deltaPercentageStr})\n              </div>\n            </div>\n\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Fees</Trans>\n              </div>\n              <div className=\"align-right\">\n                <Tooltip\n                  position=\"right-top\"\n                  className=\"PositionSeller-fees-tooltip\"\n                  handle={\n                    <div>\n                      {totalFees ? `$${formatAmount(totalFees.add(executionFeeUsd), USD_DECIMALS, 2, true)}` : \"-\"}\n                    </div>\n                  }\n                  renderContent={() => (\n                    <div>\n                      {fundingFee && (\n                        <StatsTooltipRow\n                          label={t`Borrow fee`}\n                          value={formatAmount(fundingFee, USD_DECIMALS, 2, true)}\n                        />\n                      )}\n\n                      {positionFee && (\n                        <StatsTooltipRow\n                          label={t`Closing fee`}\n                          value={formatAmount(positionFee, USD_DECIMALS, 2, true)}\n                        />\n                      )}\n\n                      {swapFee && (\n                        <StatsTooltipRow\n                          label={t`Swap fee`}\n                          showDollar={false}\n                          value={`${formatAmount(swapFeeToken, collateralToken.decimals, 5)} ${collateralToken.symbol}\n                           ($${formatAmount(swapFee, USD_DECIMALS, 2, true)})`}\n                        />\n                      )}\n\n                      <StatsTooltipRow\n                        label={t`Execution fee`}\n                        showDollar={false}\n                        value={`${formatAmount(executionFee, 18, 5, true)} ${nativeTokenSymbol} ($${formatAmount(\n                          executionFeeUsd,\n                          USD_DECIMALS,\n                          2\n                        )})`}\n                      />\n\n                      <br />\n\n                      <div className=\"PositionSeller-fee-item\">\n                        <Trans>\n                          <ExternalLink href=\"https://amxdex.gitbook.io/amxdex/trading#fees\">More Info</ExternalLink> about\n                          fees.\n                        </Trans>\n                      </div>\n                    </div>\n                  )}\n                />\n              </div>\n            </div>\n            <div className=\"Exchange-info-row PositionSeller-receive-row top-line\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Receive</Trans>\n              </div>\n\n              {!isSwapAllowed && receiveToken && (\n                <div className=\"align-right PositionSelector-selected-receive-token\">\n                  {formatAmount(convertedReceiveAmount, receiveToken.decimals, 4, true)}&nbsp;{receiveToken.symbol} ($\n                  {formatAmount(receiveAmount, USD_DECIMALS, 2, true)})\n                </div>\n              )}\n\n              {isSwapAllowed && receiveToken && (\n                <div className=\"align-right\">\n                  <TokenSelector\n                    // Scroll lock lead to side effects\n                    // if it applied on modal inside another modal\n                    disableBodyScrollLock={true}\n                    className={cx(\"PositionSeller-token-selector\", {\n                      warning: isNotEnoughReceiveTokenLiquidity || isCollateralPoolCapacityExceeded,\n                    })}\n                    label={t`Receive`}\n                    showBalances={false}\n                    chainId={chainId}\n                    tokenAddress={receiveToken.address}\n                    onSelectToken={(token) => {\n                      setSwapToToken(token);\n                      setSavedRecieveTokenAddress(token.address);\n                    }}\n                    tokens={toTokens}\n                    getTokenState={(tokenOptionInfo) => {\n                      if (!shouldSwap(collateralToken, tokenOptionInfo)) {\n                        return;\n                      }\n\n                      const convertedTokenAmount = getTokenAmountFromUsd(\n                        infoTokens,\n                        tokenOptionInfo.address,\n                        receiveAmount\n                      );\n\n                      const isNotEnoughLiquidity =\n                        tokenOptionInfo.availableAmount.lt(convertedTokenAmount) ||\n                        tokenOptionInfo.bufferAmount.gt(tokenOptionInfo.poolAmount.sub(convertedTokenAmount));\n\n                      if (isNotEnoughLiquidity) {\n                        const { maxIn, maxOut, maxInUsd, maxOutUsd } = getSwapLimits(\n                          infoTokens,\n                          collateralToken.address,\n                          tokenOptionInfo.address\n                        );\n\n                        const collateralInfo = getTokenInfo(infoTokens, collateralToken.address);\n\n                        return {\n                          disabled: true,\n                          message: (\n                            <div>\n                              <Trans>Insufficient Available Liquidity to swap to {tokenOptionInfo.symbol}:</Trans>\n                              <br />\n                              <br />\n                              <StatsTooltipRow\n                                label={t`Max ${collateralInfo.symbol} in`}\n                                value={[\n                                  `${formatAmount(maxIn, collateralInfo.decimals, 0, true)} ${collateralInfo.symbol}`,\n                                  `($${formatAmount(maxInUsd, USD_DECIMALS, 0, true)})`,\n                                ]}\n                              />\n                              <br />\n                              <StatsTooltipRow\n                                label={t`Max ${tokenOptionInfo.symbol} out`}\n                                value={[\n                                  `${formatAmount(maxOut, tokenOptionInfo.decimals, 2, true)} ${\n                                    tokenOptionInfo.symbol\n                                  }`,\n                                  `($${formatAmount(maxOutUsd, USD_DECIMALS, 2, true)})`,\n                                ]}\n                              />\n                            </div>\n                          ),\n                        };\n                      }\n                    }}\n                    infoTokens={infoTokens}\n                    showTokenImgInDropdown={true}\n                    selectedTokenLabel={\n                      <span className=\"PositionSelector-selected-receive-token\">\n                        {formatAmount(convertedReceiveAmount, receiveToken.decimals, 4, true)}&nbsp;\n                        {receiveToken.symbol} (${formatAmount(receiveAmount, USD_DECIMALS, 2, true)})\n                      </span>\n                    }\n                  />\n                </div>\n              )}\n            </div>\n          </div>\n          <div className=\"Exchange-swap-button-container\">\n            <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n              {getPrimaryText()}\n            </button>\n          </div>\n        </Modal>\n      )}\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport useSWR from \"swr\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { ethers } from \"ethers\";\nimport { BsArrowRight } from \"react-icons/bs\";\n\nimport { USD_DECIMALS, BASIS_POINTS_DIVISOR, DEPOSIT_FEE, DUST_BNB, getLiquidationPrice } from \"lib/legacy\";\nimport { getContract } from \"config/contracts\";\nimport Tab from \"../Tab/Tab\";\nimport Modal from \"../Modal/Modal\";\n\nimport PositionRouter from \"abis/PositionRouter.json\";\nimport Token from \"abis/Token.json\";\nimport Tooltip from \"../Tooltip/Tooltip\";\n\nimport { getChainName, getConstant, IS_NETWORK_DISABLED } from \"config/chains\";\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\nimport { callContract, contractFetcher } from \"lib/contracts\";\nimport { helperToast } from \"lib/helperToast\";\nimport { getTokenInfo } from \"domain/tokens/utils\";\nimport { approveTokens, shouldRaiseGasError } from \"domain/tokens\";\nimport { usePrevious } from \"lib/usePrevious\";\nimport { bigNumberify, expandDecimals, formatAmount, formatAmountFree, parseValue } from \"lib/numbers\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nconst DEPOSIT = \"Deposit\";\nconst WITHDRAW = \"Withdraw\";\nconst EDIT_OPTIONS = [DEPOSIT, WITHDRAW];\nconst { AddressZero } = ethers.constants;\n\nexport default function PositionEditor(props) {\n  const {\n    pendingPositions,\n    setPendingPositions,\n    positionsMap,\n    positionKey,\n    isVisible,\n    setIsVisible,\n    infoTokens,\n    active,\n    account,\n    library,\n    collateralTokenAddress,\n    pendingTxns,\n    setPendingTxns,\n    getUsd,\n    getLeverage,\n    savedIsPnlInLeverage,\n    positionRouterApproved,\n    isWaitingForPositionRouterApproval,\n    isPositionRouterApproving,\n    approvePositionRouter,\n    chainId,\n    minExecutionFee,\n    minExecutionFeeUSD,\n    minExecutionFeeErrorMessage,\n  } = props;\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const position = positionsMap && positionKey ? positionsMap[positionKey] : undefined;\n  const [option, setOption] = useState(DEPOSIT);\n  const [fromValue, setFromValue] = useState(\"\");\n  const [isApproving, setIsApproving] = useState(false);\n  const [isSwapping, setIsSwapping] = useState(false);\n  const prevIsVisible = usePrevious(isVisible);\n  const longOrShortText = position?.isLong ? t`Long` : t`Short`;\n\n  const routerAddress = getContract(chainId, \"Router\");\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n  console.log(\"---shark PositionEditor\");\n  const { data: tokenAllowance } = useSWR(\n    [active, chainId, collateralTokenAddress, \"allowance\", account, routerAddress],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  // const { data: minExecutionFee } = useSWR([active, chainId, positionRouterAddress, \"minExecutionFee\"], {\n  //   fetcher: fetcher(library, PositionRouter),\n  // });\n\n  const isDeposit = option === DEPOSIT;\n  const isWithdrawal = option === WITHDRAW;\n\n  const needPositionRouterApproval = !positionRouterApproved;\n\n  let collateralToken;\n  let maxAmount;\n  let maxAmountFormatted;\n  let maxAmountFormattedFree;\n  let fromAmount;\n  let needApproval;\n\n  let convertedAmount;\n  let convertedAmountFormatted;\n\n  let nextLeverage;\n  let nextLeverageExcludingPnl;\n  let liquidationPrice;\n  let nextLiquidationPrice;\n  let nextCollateral;\n\n  let title;\n  let collateralDelta;\n  if (position) {\n    title = t`Edit ${longOrShortText} ${position.indexToken.symbol}`;\n    collateralToken = position.collateralToken;\n    liquidationPrice = getLiquidationPrice(position);\n\n    if (isDeposit) {\n      fromAmount = parseValue(fromValue, collateralToken.decimals);\n      maxAmount = collateralToken ? collateralToken.balance : bigNumberify(0);\n      maxAmountFormatted = formatAmount(maxAmount, collateralToken.decimals, 4, true);\n      maxAmountFormattedFree = formatAmountFree(maxAmount, collateralToken.decimals, 8);\n      if (fromAmount) {\n        convertedAmount = getUsd(fromAmount, position.collateralToken.address, false, infoTokens);\n        convertedAmountFormatted = formatAmount(convertedAmount, USD_DECIMALS, 2);\n      }\n    } else {\n      fromAmount = parseValue(fromValue, USD_DECIMALS);\n      maxAmount = position.collateral;\n      maxAmountFormatted = formatAmount(maxAmount, USD_DECIMALS, 2, true);\n      maxAmountFormattedFree = formatAmountFree(maxAmount, USD_DECIMALS, 2);\n      if (fromAmount) {\n        convertedAmount = fromAmount.mul(expandDecimals(1, collateralToken.decimals)).div(collateralToken.maxPrice);\n        convertedAmountFormatted = formatAmount(convertedAmount, collateralToken.decimals, 4, true);\n      }\n    }\n    needApproval = isDeposit && tokenAllowance && fromAmount && fromAmount.gt(tokenAllowance);\n\n    if (fromAmount) {\n      collateralDelta = isDeposit ? convertedAmount : fromAmount;\n      if (position.isLong) {\n        collateralDelta = collateralDelta.mul(BASIS_POINTS_DIVISOR - DEPOSIT_FEE).div(BASIS_POINTS_DIVISOR);\n      }\n      nextLeverage = getLeverage({\n        size: position.size,\n        collateral: position.collateral,\n        collateralDelta,\n        increaseCollateral: isDeposit,\n        entryFundingRate: position.entryFundingRate,\n        cumulativeFundingRate: position.cumulativeFundingRate,\n        hasProfit: position.hasProfit,\n        delta: position.delta,\n        includeDelta: savedIsPnlInLeverage,\n      });\n      nextLeverageExcludingPnl = getLeverage({\n        size: position.size,\n        collateral: position.collateral,\n        collateralDelta,\n        increaseCollateral: isDeposit,\n        entryFundingRate: position.entryFundingRate,\n        cumulativeFundingRate: position.cumulativeFundingRate,\n        hasProfit: position.hasProfit,\n        delta: position.delta,\n        includeDelta: false,\n      });\n\n      nextLiquidationPrice = getLiquidationPrice({\n        isLong: position.isLong,\n        size: position.size,\n        collateral: position.collateral,\n        averagePrice: position.averagePrice,\n        entryFundingRate: position.entryFundingRate,\n        cumulativeFundingRate: position.cumulativeFundingRate,\n        collateralDelta,\n        increaseCollateral: isDeposit,\n      });\n\n      nextCollateral = isDeposit ? position.collateral.add(collateralDelta) : position.collateral.sub(collateralDelta);\n    }\n  }\n\n  const getError = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      if (isDeposit) return [t`Deposit disabled, pending ${getChainName(chainId)} upgrade`];\n      return [t`Withdraw disabled, pending ${getChainName(chainId)} upgrade`];\n    }\n    if (!fromAmount) {\n      return t`Enter an amount`;\n    }\n    if (nextLeverage && nextLeverage.eq(0)) {\n      return t`Enter an amount`;\n    }\n\n    if (!isDeposit && fromAmount) {\n      if (fromAmount.gte(position.collateral)) {\n        return t`Min order: 10 USD`;\n      }\n      if (position.collateral.sub(fromAmount).lt(expandDecimals(10, USD_DECIMALS))) {\n        return t`Min order: 10 USD`;\n      }\n    }\n\n    if (!isDeposit && fromAmount && nextLiquidationPrice) {\n      if (position.isLong && position.markPrice.lt(nextLiquidationPrice)) {\n        return t`Invalid liq. price`;\n      }\n      if (!position.isLong && position.markPrice.gt(nextLiquidationPrice)) {\n        return t`Invalid liq. price`;\n      }\n    }\n\n    if (nextLeverageExcludingPnl && nextLeverageExcludingPnl.lt(1.1 * BASIS_POINTS_DIVISOR)) {\n      return t`Min leverage: 1.1x`;\n    }\n\n    if (nextLeverageExcludingPnl && nextLeverageExcludingPnl.gt(30.5 * BASIS_POINTS_DIVISOR)) {\n      return t`Max leverage: 30x`;\n    }\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isSwapping) {\n      return false;\n    }\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return false;\n    }\n    if (isPositionRouterApproving) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n    if (isSwapping) {\n      if (isDeposit) {\n        return t`Depositing...`;\n      }\n      return t`Withdrawing...`;\n    }\n\n    if (isApproving) {\n      return t`Approving ${position.collateralToken.symbol}...`;\n    }\n    if (needApproval) {\n      return t`Approve ${position.collateralToken.symbol}`;\n    }\n\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return t`Enabling Leverage`;\n    }\n\n    if (isPositionRouterApproving) {\n      return t`Enabling Leverage...`;\n    }\n\n    if (needPositionRouterApproval) {\n      return t`Enable Leverage`;\n    }\n\n    if (isDeposit) {\n      return t`Deposit`;\n    }\n\n    return t`Withdraw`;\n  };\n\n  const resetForm = () => {\n    setFromValue(\"\");\n  };\n\n  useEffect(() => {\n    if (prevIsVisible !== isVisible) {\n      resetForm();\n    }\n  }, [prevIsVisible, isVisible]);\n\n  const depositCollateral = async () => {\n    setIsSwapping(true);\n    const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\n    const path = [tokenAddress0];\n    const indexTokenAddress =\n      position.indexToken.address === AddressZero ? nativeTokenAddress : position.indexToken.address;\n\n    const priceBasisPoints = position.isLong ? 11000 : 9000;\n    const priceLimit = position.indexToken.maxPrice.mul(priceBasisPoints).div(10000);\n\n    const referralCode = ethers.constants.HashZero;\n    let params = [\n      path, // _path\n      indexTokenAddress, // _indexToken\n      fromAmount, // _amountIn\n      0, // _minOut\n      0, // _sizeDelta\n      position.isLong, // _isLong\n      priceLimit, // _acceptablePrice\n      minExecutionFee, // _executionFee\n      referralCode, // _referralCode\n      AddressZero, // _callbackTarget\n    ];\n\n    let method = \"createIncreasePosition\";\n    let value = minExecutionFee;\n    if (collateralTokenAddress === AddressZero) {\n      method = \"createIncreasePositionETH\";\n      value = fromAmount.add(minExecutionFee);\n      params = [\n        path, // _path\n        indexTokenAddress, // _indexToken\n        0, // _minOut\n        0, // _sizeDelta\n        position.isLong, // _isLong\n        priceLimit, // _acceptablePrice\n        minExecutionFee, // _executionFee\n        referralCode, // _referralCode\n        AddressZero, // _callbackTarget\n      ];\n    }\n\n    if (shouldRaiseGasError(getTokenInfo(infoTokens, collateralTokenAddress), fromAmount)) {\n      setIsSwapping(false);\n      helperToast.error(t`Leave at least ${formatAmount(DUST_BNB, 18, 3)} ETH for gas`);\n      return;\n    }\n\n    const contract = new ethers.Contract(positionRouterAddress, PositionRouter.abi, library.getSigner());\n    callContract(chainId, contract, method, params, {\n      value,\n      sentMsg: t`Deposit submitted.`,\n      successMsg: t`Requested deposit of ${formatAmount(fromAmount, position.collateralToken.decimals, 4)} ${\n        position.collateralToken.symbol\n      } into ${position.indexToken.symbol} ${longOrShortText}.`,\n      failMsg: t`Deposit failed.`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setFromValue(\"\");\n        setIsVisible(false);\n\n        pendingPositions[position.key] = {\n          updatedAt: Date.now(),\n          pendingChanges: {\n            collateralSnapshot: position.collateral,\n            expectingCollateralChange: true,\n          },\n        };\n\n        setPendingPositions({ ...pendingPositions });\n      })\n      .finally(() => {\n        setIsSwapping(false);\n      });\n  };\n\n  const withdrawCollateral = async () => {\n    setIsSwapping(true);\n    const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\n    const indexTokenAddress =\n      position.indexToken.address === AddressZero ? nativeTokenAddress : position.indexToken.address;\n    const priceBasisPoints = position.isLong ? 9000 : 11000;\n    const priceLimit = position.indexToken.maxPrice.mul(priceBasisPoints).div(10000);\n\n    const withdrawETH = collateralTokenAddress === AddressZero || collateralTokenAddress === nativeTokenAddress;\n    const params = [\n      [tokenAddress0], // _path\n      indexTokenAddress, // _indexToken\n      fromAmount, // _collateralDelta\n      0, // _sizeDelta\n      position.isLong, // _isLong\n      account, // _receiver\n      priceLimit, // _acceptablePrice\n      0, // _minOut\n      minExecutionFee, // _executionFee\n      withdrawETH, // _withdrawETH\n      AddressZero, // _callbackTarget\n    ];\n\n    const method = \"createDecreasePosition\";\n\n    const contract = new ethers.Contract(positionRouterAddress, PositionRouter.abi, library.getSigner());\n    callContract(chainId, contract, method, params, {\n      value: minExecutionFee,\n      sentMsg: t`Withdrawal submitted.`,\n      successMsg: t`Requested withdrawal of ${formatAmount(fromAmount, USD_DECIMALS, 2)} USD from ${\n        position.indexToken.symbol\n      } ${longOrShortText}.`,\n      failMsg: t`Withdrawal failed.`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setFromValue(\"\");\n        setIsVisible(false);\n\n        pendingPositions[position.key] = {\n          updatedAt: Date.now(),\n          pendingChanges: {\n            collateralSnapshot: position.collateral,\n            expectingCollateralChange: true,\n          },\n        };\n      })\n      .finally(() => {\n        setIsSwapping(false);\n      });\n  };\n\n  const onClickPrimary = () => {\n    if (needApproval) {\n      approveTokens({\n        setIsApproving,\n        library,\n        tokenAddress: collateralTokenAddress,\n        spender: routerAddress,\n        chainId: chainId,\n        infoTokens,\n        getTokenInfo,\n        pendingTxns,\n        setPendingTxns,\n      });\n      return;\n    }\n\n    if (needPositionRouterApproval) {\n      approvePositionRouter({\n        sentMsg: isDeposit ? t`Enable deposit sent.` : t`Enable withdraw sent.`,\n        failMsg: isDeposit ? t`Enable deposit failed.` : t`Enable withdraw failed.`,\n      });\n      return;\n    }\n\n    if (isDeposit) {\n      depositCollateral();\n      return;\n    }\n\n    withdrawCollateral();\n  };\n  const nativeTokenSymbol = getConstant(chainId, \"nativeTokenSymbol\");\n  const EDIT_OPTIONS_LABELS = {\n    [DEPOSIT]: t`Deposit`,\n    [WITHDRAW]: t`Withdraw`,\n  };\n\n  return (\n    <div className=\"PositionEditor\">\n      {position && (\n        <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\n          <div>\n            <Tab\n              options={EDIT_OPTIONS}\n              optionLabels={EDIT_OPTIONS_LABELS}\n              option={option}\n              setOption={setOption}\n              onChange={resetForm}\n            />\n            {(isDeposit || isWithdrawal) && (\n              <div>\n                <div className=\"Exchange-swap-section\">\n                  <div className=\"Exchange-swap-section-top\">\n                    <div className=\"muted\">\n                      {convertedAmountFormatted && (\n                        <div className=\"Exchange-swap-usd\">\n                          {isDeposit ? t`Deposit` : t`Withdraw`}: {convertedAmountFormatted}{\" \"}\n                          {isDeposit ? \"USD\" : position.collateralToken.symbol}\n                        </div>\n                      )}\n                      {!convertedAmountFormatted && `${isDeposit ? t`Deposit` : t`Withdraw`}`}\n                    </div>\n                    {maxAmount && (\n                      <div className=\"muted align-right clickable\" onClick={() => setFromValue(maxAmountFormattedFree)}>\n                        <Trans>Max: {maxAmountFormatted}</Trans>\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"Exchange-swap-section-bottom\">\n                    <div className=\"Exchange-swap-input-container\">\n                      <input\n                        type=\"number\"\n                        min=\"0\"\n                        placeholder=\"0.0\"\n                        className=\"Exchange-swap-input\"\n                        value={fromValue}\n                        onChange={(e) => setFromValue(e.target.value)}\n                      />\n                      {fromValue !== maxAmountFormattedFree && (\n                        <div\n                          className=\"Exchange-swap-max\"\n                          onClick={() => {\n                            setFromValue(maxAmountFormattedFree);\n                          }}\n                        >\n                          <Trans>MAX</Trans>\n                        </div>\n                      )}\n                    </div>\n                    <div className=\"PositionEditor-token-symbol\">\n                      {isDeposit ? position.collateralToken.symbol : \"USD\"}\n                    </div>\n                  </div>\n                </div>\n                <div className=\"PositionEditor-info-box\">\n                  {minExecutionFeeErrorMessage && (\n                    <div className=\"Confirmation-box-warning\">{minExecutionFeeErrorMessage}</div>\n                  )}\n                  <div className=\"Exchange-info-row\">\n                    <div className=\"Exchange-info-label\">\n                      <Trans>Size</Trans>\n                    </div>\n                    <div className=\"align-right\">{formatAmount(position.size, USD_DECIMALS, 2, true)} USD</div>\n                  </div>\n                  <div className=\"Exchange-info-row\">\n                    <div className=\"Exchange-info-label\">\n                      <Trans>Collateral</Trans>\n                    </div>\n                    <div className=\"align-right\">\n                      {!nextCollateral && <div>${formatAmount(position.collateral, USD_DECIMALS, 2, true)}</div>}\n                      {nextCollateral && (\n                        <div>\n                          <div className=\"inline-block muted\">\n                            ${formatAmount(position.collateral, USD_DECIMALS, 2, true)}\n                            <BsArrowRight className=\"transition-arrow\" />\n                          </div>\n                          ${formatAmount(nextCollateral, USD_DECIMALS, 2, true)}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"Exchange-info-row\">\n                    <div className=\"Exchange-info-label\">\n                      <Trans>Leverage</Trans>\n                    </div>\n                    <div className=\"align-right\">\n                      {!nextLeverage && <div>{formatAmount(position.leverage, 4, 2, true)}x</div>}\n                      {nextLeverage && (\n                        <div>\n                          <div className=\"inline-block muted\">\n                            {formatAmount(position.leverage, 4, 2, true)}x\n                            <BsArrowRight className=\"transition-arrow\" />\n                          </div>\n                          {formatAmount(nextLeverage, 4, 2, true)}x\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"Exchange-info-row\">\n                    <div className=\"Exchange-info-label\">\n                      <Trans>Mark Price</Trans>\n                    </div>\n                    <div className=\"align-right\">${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}</div>\n                  </div>\n                  <div className=\"Exchange-info-row\">\n                    <div className=\"Exchange-info-label\">\n                      <Trans>Liq. Price</Trans>\n                    </div>\n                    <div className=\"align-right\">\n                      {!nextLiquidationPrice && (\n                        <div>\n                          {!fromAmount && `$${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}`}\n                          {fromAmount && \"-\"}\n                        </div>\n                      )}\n                      {nextLiquidationPrice && (\n                        <div>\n                          <div className=\"inline-block muted\">\n                            ${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}\n                            <BsArrowRight className=\"transition-arrow\" />\n                          </div>\n                          ${formatAmount(nextLiquidationPrice, USD_DECIMALS, 2, true)}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"Exchange-info-row\">\n                    <div className=\"Exchange-info-label\">\n                      <Trans>Execution Fee</Trans>\n                    </div>\n                    <div className=\"align-right\">\n                      <Tooltip\n                        handle={`${formatAmountFree(minExecutionFee, 18, 5)} ${nativeTokenSymbol}`}\n                        position=\"right-top\"\n                        renderContent={() => {\n                          const depositOrWithdrawalText = isDeposit ? t`deposit` : t`withdrawal`;\n                          return (\n                            <>\n                              <StatsTooltipRow\n                                label={t`Network fee`}\n                                showDollar={false}\n                                value={`${formatAmountFree(\n                                  minExecutionFee,\n                                  18,\n                                  5\n                                )} ${nativeTokenSymbol} ($${formatAmount(minExecutionFeeUSD, USD_DECIMALS, 2)})`}\n                              />\n                              <br />\n                              <Trans>\n                                This is the network cost required to execute the {depositOrWithdrawalText}.\n                                <br />\n                                <br />\n                                <ExternalLink href=\"https://amxdex.gitbook.io/amxdex/trading#execution-fee\">\n                                  More Info\n                                </ExternalLink>\n                              </Trans>\n                            </>\n                          );\n                        }}\n                      />\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"Exchange-swap-button-container\">\n                  <button\n                    className=\"App-cta Exchange-swap-button\"\n                    onClick={onClickPrimary}\n                    disabled={!isPrimaryEnabled()}\n                  >\n                    {getPrimaryText()}\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </Modal>\n      )}\n    </div>\n  );\n}\n","import \"./SpinningLoader.css\";\n\nimport { ImSpinner2 } from \"react-icons/im\";\n\nfunction SpinningLoader({ size = \"1.25rem\" }) {\n  return <ImSpinner2 className=\"spin spinning-loader\" style={{ fontSize: size }} />;\n}\n\nexport default SpinningLoader;\n","export default async function downloadImage(dataURI: string, filename: string) {\n  const blob = await (await fetch(dataURI)).blob();\n  if (typeof window.navigator.msSaveBlob !== \"undefined\") {\n    // IE doesn't allow using a blob object directly as link href.\n    // Workaround for \"HTML7007: One or more blob URLs were\n    // revoked by closing the blob for which they were created.\n    // These URLs will no longer resolve as the data backing\n    // the URL has been freed.\"\n    window.navigator.msSaveBlob(blob, filename);\n    return;\n  }\n  // Other browsers\n  // Create a link pointing to the ObjectURL containing the blob\n  const blobURL = window.URL.createObjectURL(blob);\n  const tempLink = document.createElement(\"a\");\n  tempLink.style.display = \"none\";\n  tempLink.href = blobURL;\n  tempLink.setAttribute(\"download\", filename);\n  // Safari thinks _blank anchor are pop ups. We only want to set _blank\n  // target if the browser does not support the HTML5 download attribute.\n  // This allows you to download files in desktop safari if pop up blocking\n  // is enabled.\n  if (typeof tempLink.download === \"undefined\") {\n    tempLink.setAttribute(\"target\", \"_blank\");\n  }\n  document.body.appendChild(tempLink);\n  tempLink.click();\n  document.body.removeChild(tempLink);\n  setTimeout(() => {\n    // For Firefox it is necessary to delay revoking the ObjectURL\n    window.URL.revokeObjectURL(blobURL);\n  }, 100);\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport { t, Trans } from \"@lingui/macro\";\nimport { toJpeg } from \"html-to-image\";\nimport cx from \"classnames\";\nimport { BiCopy } from \"react-icons/bi\";\nimport { RiFileDownloadLine } from \"react-icons/ri\";\nimport { FiTwitter } from \"react-icons/fi\";\nimport { useCopyToClipboard, useMedia } from \"react-use\";\nimport Modal from \"../Modal/Modal\";\nimport gmxLogo from \"img/gmx-logo-with-name.svg\";\nimport \"./PositionShare.css\";\nimport { QRCodeSVG } from \"qrcode.react\";\nimport { getHomeUrl, getRootShareApiUrl, getTwitterIntentURL, USD_DECIMALS } from \"lib/legacy\";\nimport { useAffiliateCodes } from \"domain/referrals\";\nimport SpinningLoader from \"../Common/SpinningLoader\";\nimport useLoadImage from \"lib/useLoadImage\";\nimport shareBgImg from \"img/position-share-bg.png\";\nimport { helperToast } from \"lib/helperToast\";\nimport { formatAmount } from \"lib/numbers\";\nimport downloadImage from \"lib/downloadImage\";\nconst ROOT_SHARE_URL = getRootShareApiUrl();\nconst UPLOAD_URL = ROOT_SHARE_URL + \"/api/upload\";\nconst UPLOAD_SHARE = ROOT_SHARE_URL + \"/api/s\";\nconst config = { quality: 0.95, canvasWidth: 518, canvasHeight: 292, type: \"image/jpeg\" };\n\nfunction getShareURL(imageInfo, ref) {\n  if (!imageInfo) return;\n  let url = `${UPLOAD_SHARE}?id=${imageInfo.id}`;\n  if (ref.success && ref.code) {\n    url = url + `&ref=${ref.code}`;\n  }\n  return url;\n}\n\nfunction PositionShare({ setIsPositionShareModalOpen, isPositionShareModalOpen, positionToShare, account, chainId }) {\n  const userAffiliateCode = useAffiliateCodes(chainId, account);\n  const [uploadedImageInfo, setUploadedImageInfo] = useState();\n  const [uploadedImageError, setUploadedImageError] = useState();\n  const [, copyToClipboard] = useCopyToClipboard();\n  const sharePositionBgImg = useLoadImage(shareBgImg);\n  const positionRef = useRef();\n  const tweetLink = getTwitterIntentURL(\n    `Latest $${positionToShare?.indexToken?.symbol} trade on @amxdex`,\n    getShareURL(uploadedImageInfo, userAffiliateCode)\n  );\n\n  useEffect(() => {\n    (async function () {\n      const element = positionRef.current;\n      if (element && userAffiliateCode.success && sharePositionBgImg && positionToShare) {\n        // We have to call the toJpeg function multiple times to make sure the canvas renders all the elements like background image\n        // @refer https://github.com/tsayen/dom-to-image/issues/343#issuecomment-652831863\n        const image = await toJpeg(element, config)\n          .then(() => toJpeg(element, config))\n          .then(() => toJpeg(element, config));\n        try {\n          const imageInfo = await fetch(UPLOAD_URL, { method: \"POST\", body: image }).then((res) => res.json());\n          setUploadedImageInfo(imageInfo);\n        } catch {\n          setUploadedImageInfo(null);\n          setUploadedImageError(t`Image generation error, please refresh and try again.`);\n        }\n      }\n    })();\n  }, [userAffiliateCode, sharePositionBgImg, positionToShare]);\n\n  async function handleDownload() {\n    const element = positionRef.current;\n    if (!element) return;\n    const imgBlob = await toJpeg(element, config)\n      .then(() => toJpeg(element, config))\n      .then(() => toJpeg(element, config));\n    downloadImage(imgBlob, \"share.jpeg\");\n  }\n\n  function handleCopy() {\n    if (!uploadedImageInfo) return;\n    const url = getShareURL(uploadedImageInfo, userAffiliateCode);\n    copyToClipboard(url);\n    helperToast.success(t`Link copied to clipboard.`);\n  }\n  return (\n    <Modal\n      className=\"position-share-modal\"\n      isVisible={isPositionShareModalOpen}\n      setIsVisible={setIsPositionShareModalOpen}\n      label={t`Share Position`}\n    >\n      <PositionShareCard\n        userAffiliateCode={userAffiliateCode}\n        positionRef={positionRef}\n        position={positionToShare}\n        chainId={chainId}\n        account={account}\n        uploadedImageInfo={uploadedImageInfo}\n        uploadedImageError={uploadedImageError}\n        sharePositionBgImg={sharePositionBgImg}\n      />\n      {uploadedImageError && <span className=\"error\">{uploadedImageError}</span>}\n\n      <div className=\"actions\">\n        <button disabled={!uploadedImageInfo} className=\"mr-base App-button-option\" onClick={handleCopy}>\n          <BiCopy className=\"icon\" />\n          <Trans>Copy</Trans>\n        </button>\n        <button disabled={!uploadedImageInfo} className=\"mr-base App-button-option\" onClick={handleDownload}>\n          <RiFileDownloadLine className=\"icon\" />\n          <Trans>Download</Trans>\n        </button>\n        <div className={cx(\"tweet-link-container\", { disabled: !uploadedImageInfo })}>\n          <a\n            target=\"_blank\"\n            className={cx(\"tweet-link App-button-option\", { disabled: !uploadedImageInfo })}\n            rel=\"noreferrer\"\n            href={tweetLink}\n          >\n            <FiTwitter className=\"icon\" />\n            <Trans>Tweet</Trans>\n          </a>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nfunction PositionShareCard({\n  positionRef,\n  position,\n  userAffiliateCode,\n  uploadedImageInfo,\n  uploadedImageError,\n  sharePositionBgImg,\n}) {\n  const isMobile = useMedia(\"(max-width: 400px)\");\n  const { code, success } = userAffiliateCode;\n  const { deltaAfterFeesPercentageStr, isLong, leverage, indexToken, averagePrice, markPrice } = position;\n\n  const homeURL = getHomeUrl();\n  return (\n    <div className=\"relative\">\n      <div ref={positionRef} className=\"position-share\" style={{ backgroundImage: `url(${sharePositionBgImg})` }}>\n        <img className=\"logo\" src={gmxLogo} alt=\"AMX Logo\" />\n        <ul className=\"info\">\n          <li className=\"side\">{isLong ? \"LONG\" : \"SHORT\"}</li>\n          <li>{formatAmount(leverage, 4, 2, true)}x&nbsp;</li>\n          <li>{indexToken.symbol} USD</li>\n        </ul>\n        <h3 className=\"pnl\">{deltaAfterFeesPercentageStr}</h3>\n        <div className=\"prices\">\n          <div>\n            <p>Entry Price</p>\n            <p className=\"price\">${formatAmount(averagePrice, USD_DECIMALS, 2, true)}</p>\n          </div>\n          <div>\n            <p>Index Price</p>\n            <p className=\"price\">${formatAmount(markPrice, USD_DECIMALS, 2, true)}</p>\n          </div>\n        </div>\n        <div className=\"referral-code\">\n          <div>\n            <QRCodeSVG size={isMobile ? 24 : 32} value={success && code ? `${homeURL}/#/?ref=${code}` : `${homeURL}`} />\n          </div>\n          <div className=\"referral-code-info\">\n            {success && code ? (\n              <>\n                <p className=\"label\">Referral Code:</p>\n                <p className=\"code\">{code}</p>\n              </>\n            ) : (\n              <p className=\"code\">https://amx.exchange</p>\n            )}\n          </div>\n        </div>\n      </div>\n      {!uploadedImageInfo && !uploadedImageError && (\n        <div className=\"image-overlay-wrapper\">\n          <div className=\"image-overlay\">\n            <SpinningLoader />\n            <p className=\"loading-text\">\n              <Trans>Generating shareable image...</Trans>\n            </p>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default PositionShare;\n","import { useEffect, useState } from \"react\";\n\nexport default function useLoadImage(src) {\n  const [sourceLoaded, setSourceLoaded] = useState(null);\n\n  useEffect(() => {\n    const img = new Image();\n    img.src = src;\n    img.onload = () => setSourceLoaded(src);\n  }, [src]);\n\n  return sourceLoaded;\n}\n","import { Menu } from \"@headlessui/react\";\nimport { Trans } from \"@lingui/macro\";\nimport { HiDotsVertical } from \"react-icons/hi\";\nimport { AiOutlineEdit } from \"react-icons/ai\";\nimport { BiSelectMultiple } from \"react-icons/bi\";\nimport { RiShareBoxFill } from \"react-icons/ri\";\nimport \"./PositionDropdown.css\";\n\nfunction PositionDropdown({ handleEditCollateral, handleShare, handleMarketSelect }) {\n  return (\n    <Menu>\n      <Menu.Button as=\"div\">\n        <button className=\"PositionDropdown-dots-icon\">\n          <HiDotsVertical fontSize={20} fontWeight={700} />\n        </button>\n      </Menu.Button>\n      <div className=\"PositionDropdown-extra-options\">\n        <Menu.Items as=\"div\" className=\"menu-items\">\n          <Menu.Item>\n            <div className=\"menu-item\" onClick={handleEditCollateral}>\n              <AiOutlineEdit fontSize={16} />\n              <p>\n                <Trans>Edit Collateral</Trans>\n              </p>\n            </div>\n          </Menu.Item>\n          <Menu.Item>\n            <div className=\"menu-item\" onClick={handleMarketSelect}>\n              <BiSelectMultiple fontSize={16} />\n              <p>\n                <Trans>Select Market</Trans>\n              </p>\n            </div>\n          </Menu.Item>\n          <Menu.Item>\n            <div className=\"menu-item\" onClick={handleShare}>\n              <RiShareBoxFill fontSize={16} />\n              <p>\n                <Trans>Share Position</Trans>\n              </p>\n            </div>\n          </Menu.Item>\n        </Menu.Items>\n      </div>\n    </Menu>\n  );\n}\n\nexport default PositionDropdown;\n","import React, { useState } from \"react\";\nimport cx from \"classnames\";\nimport { Trans, t, select } from \"@lingui/macro\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport PositionSeller from \"./PositionSeller\";\nimport PositionEditor from \"./PositionEditor\";\nimport OrdersToa from \"./OrdersToa\";\n\nimport { ImSpinner2 } from \"react-icons/im\";\n\nimport {\n  getLiquidationPrice,\n  getLeverage,\n  getOrderError,\n  USD_DECIMALS,\n  FUNDING_RATE_PRECISION,\n  SWAP,\n  LONG,\n  SHORT,\n  INCREASE,\n  DECREASE,\n} from \"lib/legacy\";\nimport PositionShare from \"./PositionShare\";\nimport PositionDropdown from \"./PositionDropdown\";\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\nimport { helperToast } from \"lib/helperToast\";\nimport { getUsd } from \"domain/tokens/utils\";\nimport { bigNumberify, formatAmount } from \"lib/numbers\";\nimport { AiOutlineEdit } from \"react-icons/ai\";\n\nconst getOrdersForPosition = (account, position, orders, nativeTokenAddress) => {\n  if (!orders || orders.length === 0) {\n    return [];\n  }\n  /* eslint-disable array-callback-return */\n  return orders\n    .filter((order) => {\n      if (order.type === SWAP) {\n        return false;\n      }\n      const hasMatchingIndexToken =\n        order.indexToken === nativeTokenAddress\n          ? position.indexToken.isNative\n          : order.indexToken === position.indexToken.address;\n      const hasMatchingCollateralToken =\n        order.collateralToken === nativeTokenAddress\n          ? position.collateralToken.isNative\n          : order.collateralToken === position.collateralToken.address;\n      if (order.isLong === position.isLong && hasMatchingIndexToken && hasMatchingCollateralToken) {\n        return true;\n      }\n    })\n    .map((order) => {\n      order.error = getOrderError(account, order, undefined, position);\n      if (order.type === DECREASE && order.sizeDelta.gt(position.size)) {\n        order.error = t`Order size is bigger than position, will only be executable if position increases`;\n      }\n      return order;\n    });\n};\n\nexport default function PositionsList(props) {\n  const {\n    pendingPositions,\n    setPendingPositions,\n    positions,\n    positionsDataIsLoading,\n    positionsMap,\n    infoTokens,\n    active,\n    account,\n    library,\n    pendingTxns,\n    setPendingTxns,\n    setListSection,\n    flagOrdersEnabled,\n    savedIsPnlInLeverage,\n    chainId,\n    nativeTokenAddress,\n    orders,\n    setIsWaitingForPluginApproval,\n    approveOrderBook,\n    isPluginApproving,\n    isWaitingForPluginApproval,\n    orderBookApproved,\n    positionRouterApproved,\n    isWaitingForPositionRouterApproval,\n    isPositionRouterApproving,\n    approvePositionRouter,\n    showPnlAfterFees,\n    setMarket,\n    minExecutionFee,\n    minExecutionFeeUSD,\n    minExecutionFeeErrorMessage,\n    usdgSupply,\n    totalTokenWeights,\n  } = props;\n\n  const [positionToEditKey, setPositionToEditKey] = useState(undefined);\n  const [positionToSellKey, setPositionToSellKey] = useState(undefined);\n  const [positionToShare, setPositionToShare] = useState(null);\n  const [isPositionEditorVisible, setIsPositionEditorVisible] = useState(undefined);\n  const [isPositionSellerVisible, setIsPositionSellerVisible] = useState(undefined);\n  const [collateralTokenAddress, setCollateralTokenAddress] = useState(undefined);\n  const [isPositionShareModalOpen, setIsPositionShareModalOpen] = useState(false);\n  const [ordersToaOpen, setOrdersToaOpen] = useState(false);\n  const [isHigherSlippageAllowed, setIsHigherSlippageAllowed] = useState(false);\n  console.log(\"---shark PositionsList\");\n  const editPosition = (position) => {\n    setCollateralTokenAddress(position.collateralToken.address);\n    setPositionToEditKey(position.key);\n    setIsPositionEditorVisible(true);\n  };\n\n  const sellPosition = (position) => {\n    setPositionToSellKey(position.key);\n    setIsPositionSellerVisible(true);\n    setIsHigherSlippageAllowed(false);\n  };\n\n  const onPositionClick = (position) => {\n    helperToast.success(\n      t`${select(position.isLong, { true: \"Long\", false: \"Short\" })} ${position.indexToken.symbol} market selected`\n    );\n    setMarket(position.isLong ? LONG : SHORT, position.indexToken.address);\n  };\n\n  return (\n    <div className=\"PositionsList\">\n      <PositionEditor\n        pendingPositions={pendingPositions}\n        setPendingPositions={setPendingPositions}\n        positionsMap={positionsMap}\n        positionKey={positionToEditKey}\n        isVisible={isPositionEditorVisible}\n        setIsVisible={setIsPositionEditorVisible}\n        infoTokens={infoTokens}\n        active={active}\n        account={account}\n        library={library}\n        collateralTokenAddress={collateralTokenAddress}\n        pendingTxns={pendingTxns}\n        setPendingTxns={setPendingTxns}\n        getUsd={getUsd}\n        getLeverage={getLeverage}\n        savedIsPnlInLeverage={savedIsPnlInLeverage}\n        positionRouterApproved={positionRouterApproved}\n        isPositionRouterApproving={isPositionRouterApproving}\n        isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\n        approvePositionRouter={approvePositionRouter}\n        chainId={chainId}\n        minExecutionFee={minExecutionFee}\n        minExecutionFeeUSD={minExecutionFeeUSD}\n        minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\n      />\n      {ordersToaOpen && (\n        <OrdersToa\n          setIsVisible={setOrdersToaOpen}\n          approveOrderBook={approveOrderBook}\n          isPluginApproving={isPluginApproving}\n        />\n      )}\n      {isPositionShareModalOpen && (\n        <PositionShare\n          setIsPositionShareModalOpen={setIsPositionShareModalOpen}\n          isPositionShareModalOpen={isPositionShareModalOpen}\n          positionToShare={positionToShare}\n          chainId={chainId}\n          account={account}\n        />\n      )}\n      {ordersToaOpen && (\n        <OrdersToa\n          setIsVisible={setOrdersToaOpen}\n          approveOrderBook={approveOrderBook}\n          isPluginApproving={isPluginApproving}\n        />\n      )}\n      {isPositionSellerVisible && (\n        <PositionSeller\n          pendingPositions={pendingPositions}\n          setPendingPositions={setPendingPositions}\n          setIsWaitingForPluginApproval={setIsWaitingForPluginApproval}\n          approveOrderBook={approveOrderBook}\n          isPluginApproving={isPluginApproving}\n          isWaitingForPluginApproval={isWaitingForPluginApproval}\n          orderBookApproved={orderBookApproved}\n          positionsMap={positionsMap}\n          positionKey={positionToSellKey}\n          isVisible={isPositionSellerVisible}\n          setIsVisible={setIsPositionSellerVisible}\n          infoTokens={infoTokens}\n          active={active}\n          account={account}\n          orders={orders}\n          library={library}\n          pendingTxns={pendingTxns}\n          setPendingTxns={setPendingTxns}\n          flagOrdersEnabled={flagOrdersEnabled}\n          savedIsPnlInLeverage={savedIsPnlInLeverage}\n          chainId={chainId}\n          nativeTokenAddress={nativeTokenAddress}\n          setOrdersToaOpen={setOrdersToaOpen}\n          positionRouterApproved={positionRouterApproved}\n          isPositionRouterApproving={isPositionRouterApproving}\n          isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\n          approvePositionRouter={approvePositionRouter}\n          isHigherSlippageAllowed={isHigherSlippageAllowed}\n          setIsHigherSlippageAllowed={setIsHigherSlippageAllowed}\n          minExecutionFee={minExecutionFee}\n          minExecutionFeeUSD={minExecutionFeeUSD}\n          minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\n          usdgSupply={usdgSupply}\n          totalTokenWeights={totalTokenWeights}\n        />\n      )}\n      {positions && (\n        <div className=\"Exchange-list small\">\n          <div>\n            {positions.length === 0 && positionsDataIsLoading && (\n              <div className=\"Exchange-empty-positions-list-note App-card\">\n                <Trans>Loading...</Trans>\n              </div>\n            )}\n            {positions.length === 0 && !positionsDataIsLoading && (\n              <div className=\"Exchange-empty-positions-list-note App-card\">\n                <Trans>No open positions</Trans>\n              </div>\n            )}\n            {positions.map((position) => {\n              const positionOrders = getOrdersForPosition(account, position, orders, nativeTokenAddress);\n              const liquidationPrice = getLiquidationPrice(position);\n              const hasPositionProfit = position[showPnlAfterFees ? \"hasProfitAfterFees\" : \"hasProfit\"];\n              const positionDelta =\n                position[showPnlAfterFees ? \"pendingDeltaAfterFees\" : \"pendingDelta\"] || bigNumberify(0);\n              let borrowFeeUSD;\n              if (position.collateralToken && position.collateralToken.fundingRate) {\n                const borrowFeeRate = position.collateralToken.fundingRate\n                  .mul(position.size)\n                  .mul(24)\n                  .div(FUNDING_RATE_PRECISION);\n                borrowFeeUSD = formatAmount(borrowFeeRate, USD_DECIMALS, 2);\n              }\n\n              return (\n                <div key={position.key} className=\"App-card\">\n                  <div className=\"App-card-title\">\n                    <span className=\"Exchange-list-title\">{position.indexToken.symbol}</span>\n                  </div>\n                  <div className=\"App-card-divider\" />\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Leverage</Trans>\n                      </div>\n                      <div>\n                        {formatAmount(position.leverage, 4, 2, true)}x&nbsp;\n                        <span\n                          className={cx(\"Exchange-list-side\", {\n                            positive: position.isLong,\n                            negative: !position.isLong,\n                          })}\n                        >\n                          {position.isLong ? t`Long` : t`Short`}\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Size</Trans>\n                      </div>\n                      <div>${formatAmount(position.size, USD_DECIMALS, 2, true)}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Collateral</Trans>\n                      </div>\n                      <div className=\"position-list-collateral\">\n                        <Tooltip\n                          handle={`$${formatAmount(position.collateralAfterFee, USD_DECIMALS, 2, true)}`}\n                          position=\"right-bottom\"\n                          handleClassName={cx(\"plain\", { negative: position.hasLowCollateral })}\n                          renderContent={() => {\n                            return (\n                              <>\n                                {position.hasLowCollateral && (\n                                  <div>\n                                    <Trans>\n                                      WARNING: This position has a low amount of collateral after deducting borrowing\n                                      fees, deposit more collateral to reduce the position's liquidation risk.\n                                    </Trans>\n                                    <br />\n                                    <br />\n                                  </div>\n                                )}\n                                <StatsTooltipRow\n                                  label={t`Initial Collateral`}\n                                  value={formatAmount(position.collateral, USD_DECIMALS, 2, true)}\n                                />\n                                <StatsTooltipRow\n                                  label={t`Borrow Fee`}\n                                  value={formatAmount(position.fundingFee, USD_DECIMALS, 2, true)}\n                                />\n                                <StatsTooltipRow label={t`Borrow Fee / Day`} value={borrowFeeUSD} />\n                                <span>\n                                  <Trans>Use the Edit Collateral icon to deposit or withdraw collateral.</Trans>\n                                </span>\n                              </>\n                            );\n                          }}\n                        />\n                        <span className=\"edit-icon\" onClick={() => editPosition(position)}>\n                          <AiOutlineEdit fontSize={16} />\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>PnL</Trans>\n                      </div>\n                      <div>\n                        <span\n                          className={cx(\"Exchange-list-info-label\", {\n                            positive: hasPositionProfit && positionDelta.gt(0),\n                            negative: !hasPositionProfit && positionDelta.gt(0),\n                            muted: positionDelta.eq(0),\n                          })}\n                        >\n                          {position.deltaStr} ({position.deltaPercentageStr})\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Net Value</Trans>\n                      </div>\n                      <div>\n                        <Tooltip\n                          handle={`$${formatAmount(position.netValue, USD_DECIMALS, 2, true)}`}\n                          position=\"right-bottom\"\n                          handleClassName=\"plain\"\n                          renderContent={() => {\n                            return (\n                              <>\n                                {showPnlAfterFees\n                                  ? t`Net Value: Initial Collateral - Fees + PnL`\n                                  : t`Net Value: Initial Collateral - Borrow Fee + PnL`}\n                                <br />\n                                <br />\n                                <StatsTooltipRow\n                                  label={t`Initial Collateral`}\n                                  value={formatAmount(position.collateral, USD_DECIMALS, 2, true)}\n                                />\n                                <StatsTooltipRow\n                                  label={t`PnL`}\n                                  value={position.deltaBeforeFeesStr}\n                                  showDollar={false}\n                                />\n                                <StatsTooltipRow\n                                  label={t`Borrow Fee`}\n                                  value={formatAmount(position.fundingFee, USD_DECIMALS, 2, true)}\n                                />\n                                <StatsTooltipRow\n                                  label={t`Open + Close fee`}\n                                  value={formatAmount(position.positionFee, USD_DECIMALS, 2, true)}\n                                />\n                                <StatsTooltipRow\n                                  label={t`PnL After Fees`}\n                                  value={`${position.deltaAfterFeesStr} (${position.deltaAfterFeesPercentageStr})`}\n                                  showDollar={false}\n                                />\n                              </>\n                            );\n                          }}\n                        />\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Orders</Trans>\n                      </div>\n                      <div>\n                        {positionOrders.length === 0 && \"None\"}\n                        {positionOrders.map((order) => {\n                          const orderText = () => (\n                            <>\n                              {order.triggerAboveThreshold ? \">\" : \"<\"} {formatAmount(order.triggerPrice, 30, 2, true)}:\n                              {order.type === INCREASE ? \" +\" : \" -\"}${formatAmount(order.sizeDelta, 30, 2, true)}\n                            </>\n                          );\n                          if (order.error) {\n                            return (\n                              <div key={`${order.isLong}-${order.type}-${order.index}`} className=\"Position-list-order\">\n                                <Tooltip\n                                  className=\"order-error\"\n                                  handle={orderText()}\n                                  position=\"right-bottom\"\n                                  handleClassName=\"plain\"\n                                  renderContent={() => <span className=\"negative\">{order.error}</span>}\n                                />\n                              </div>\n                            );\n                          } else {\n                            return (\n                              <div key={`${order.isLong}-${order.type}-${order.index}`} className=\"Position-list-order\">\n                                {orderText()}\n                              </div>\n                            );\n                          }\n                        })}\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\" />\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Mark Price</Trans>\n                      </div>\n                      <div>${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Entry Price</Trans>\n                      </div>\n                      <div>${formatAmount(position.averagePrice, USD_DECIMALS, 2, true)}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Liq. Price</Trans>\n                      </div>\n                      <div>${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}</div>\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-options\">\n                    <button\n                      className=\"App-button-option App-card-option\"\n                      disabled={position.size.eq(0)}\n                      onClick={() => sellPosition(position)}\n                    >\n                      <Trans>Close</Trans>\n                    </button>\n                    <button\n                      className=\"App-button-option App-card-option\"\n                      disabled={position.size.eq(0)}\n                      onClick={() => editPosition(position)}\n                    >\n                      <Trans>Edit Collateral</Trans>\n                    </button>\n                    <button\n                      className=\"Exchange-list-action App-button-option App-card-option\"\n                      onClick={() => {\n                        setPositionToShare(position);\n                        setIsPositionShareModalOpen(true);\n                      }}\n                      disabled={position.size.eq(0)}\n                    >\n                      <Trans>Share</Trans>\n                    </button>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      )}\n      <table className=\"Exchange-list large App-box\">\n        <tbody>\n          <tr className=\"Exchange-list-header\">\n            <th>\n              <Trans>Position</Trans>\n            </th>\n            <th>\n              <Trans>Net Value</Trans>\n            </th>\n            <th>\n              <Trans>Size</Trans>\n            </th>\n            <th>\n              <Trans>Collateral</Trans>\n            </th>\n            <th>\n              <Trans>Mark Price</Trans>\n            </th>\n            <th>\n              <Trans>Entry Price</Trans>\n            </th>\n            <th>\n              <Trans>Liq. Price</Trans>\n            </th>\n            <th></th>\n            <th></th>\n          </tr>\n          {positions.length === 0 && positionsDataIsLoading && (\n            <tr>\n              <td colSpan=\"15\">\n                <div className=\"Exchange-empty-positions-list-note\">Loading...</div>\n              </td>\n            </tr>\n          )}\n          {positions.length === 0 && !positionsDataIsLoading && (\n            <tr>\n              <td colSpan=\"15\">\n                <div className=\"Exchange-empty-positions-list-note\">\n                  <Trans>No open positions</Trans>\n                </div>\n              </td>\n            </tr>\n          )}\n          {positions.map((position) => {\n            const liquidationPrice = getLiquidationPrice(position) || bigNumberify(0);\n            const positionOrders = getOrdersForPosition(account, position, orders, nativeTokenAddress);\n            const hasOrderError = !!positionOrders.find((order) => order.error);\n            const hasPositionProfit = position[showPnlAfterFees ? \"hasProfitAfterFees\" : \"hasProfit\"];\n            const positionDelta =\n              position[showPnlAfterFees ? \"pendingDeltaAfterFees\" : \"pendingDelta\"] || bigNumberify(0);\n            let borrowFeeUSD;\n            if (position.collateralToken && position.collateralToken.fundingRate) {\n              const borrowFeeRate = position.collateralToken.fundingRate\n                .mul(position.size)\n                .mul(24)\n                .div(FUNDING_RATE_PRECISION);\n              borrowFeeUSD = formatAmount(borrowFeeRate, USD_DECIMALS, 2);\n            }\n\n            return (\n              <tr key={position.key}>\n                <td className=\"clickable\" onClick={() => onPositionClick(position)}>\n                  <div className=\"Exchange-list-title\">\n                    {position.indexToken.symbol}\n                    {position.hasPendingChanges && <ImSpinner2 className=\"spin position-loading-icon\" />}\n                  </div>\n                  <div className=\"Exchange-list-info-label\">\n                    {position.leverage && (\n                      <span className=\"muted\">{formatAmount(position.leverage, 4, 2, true)}x&nbsp;</span>\n                    )}\n                    <span className={cx({ positive: position.isLong, negative: !position.isLong })}>\n                      {position.isLong ? t`Long` : t`Short`}\n                    </span>\n                  </div>\n                </td>\n                <td>\n                  <div>\n                    {!position.netValue && t`Opening...`}\n                    {position.netValue && (\n                      <Tooltip\n                        handle={`$${formatAmount(position.netValue, USD_DECIMALS, 2, true)}`}\n                        position=\"left-bottom\"\n                        handleClassName=\"plain\"\n                        renderContent={() => {\n                          return (\n                            <>\n                              {showPnlAfterFees\n                                ? t`Net Value: Initial Collateral - Fees + PnL`\n                                : t`Net Value: Initial Collateral - Borrow Fee + PnL`}\n                              <br />\n                              <br />\n                              <StatsTooltipRow\n                                label={t`Initial Collateral`}\n                                value={formatAmount(position.collateral, USD_DECIMALS, 2, true)}\n                              />\n                              <StatsTooltipRow label={t`PnL`} value={position.deltaBeforeFeesStr} showDollar={false} />\n                              <StatsTooltipRow\n                                label={t`Borrow Fee`}\n                                showDollar={false}\n                                value={`-$${formatAmount(position.fundingFee, USD_DECIMALS, 2, true)}`}\n                              />\n                              <StatsTooltipRow\n                                label={t`Open + Close fee`}\n                                showDollar={false}\n                                value={`-$${formatAmount(position.positionFee, USD_DECIMALS, 2, true)}`}\n                              />\n                              <StatsTooltipRow\n                                label={t`PnL After Fees`}\n                                value={`${position.deltaAfterFeesStr} (${position.deltaAfterFeesPercentageStr})`}\n                                showDollar={false}\n                              />\n                            </>\n                          );\n                        }}\n                      />\n                    )}\n                  </div>\n                  {position.deltaStr && (\n                    <div\n                      className={cx(\"Exchange-list-info-label\", {\n                        positive: hasPositionProfit && positionDelta.gt(0),\n                        negative: !hasPositionProfit && positionDelta.gt(0),\n                        muted: positionDelta.eq(0),\n                      })}\n                    >\n                      {position.deltaStr} ({position.deltaPercentageStr})\n                    </div>\n                  )}\n                </td>\n                <td>\n                  <div>${formatAmount(position.size, USD_DECIMALS, 2, true)}</div>\n                  {positionOrders.length > 0 && (\n                    <div onClick={() => setListSection && setListSection(\"Orders\")}>\n                      <Tooltip\n                        handle={t`Orders (${positionOrders.length})`}\n                        position=\"left-bottom\"\n                        handleClassName={cx(\n                          [\"Exchange-list-info-label\", \"Exchange-position-list-orders\", \"plain\", \"clickable\"],\n                          { muted: !hasOrderError, negative: hasOrderError }\n                        )}\n                        renderContent={() => {\n                          return (\n                            <>\n                              <strong>\n                                <Trans>Active Orders</Trans>\n                              </strong>\n                              {positionOrders.map((order) => {\n                                return (\n                                  <div\n                                    key={`${order.isLong}-${order.type}-${order.index}`}\n                                    className=\"Position-list-order\"\n                                  >\n                                    {order.triggerAboveThreshold ? \">\" : \"<\"}{\" \"}\n                                    {formatAmount(order.triggerPrice, 30, 2, true)}:\n                                    {order.type === INCREASE ? \" +\" : \" -\"}${formatAmount(order.sizeDelta, 30, 2, true)}\n                                    {order.error && (\n                                      <>\n                                        , <span className=\"negative\">{order.error}</span>\n                                      </>\n                                    )}\n                                  </div>\n                                );\n                              })}\n                            </>\n                          );\n                        }}\n                      />\n                    </div>\n                  )}\n                </td>\n                <td>\n                  <div className=\"position-list-collateral\">\n                    <Tooltip\n                      handle={`$${formatAmount(position.collateralAfterFee, USD_DECIMALS, 2, true)}`}\n                      position=\"left-bottom\"\n                      handleClassName={cx(\"plain\", { negative: position.hasLowCollateral })}\n                      renderContent={() => {\n                        return (\n                          <>\n                            {position.hasLowCollateral && (\n                              <div>\n                                <Trans>\n                                  WARNING: This position has a low amount of collateral after deducting borrowing fees,\n                                  deposit more collateral to reduce the position's liquidation risk.\n                                </Trans>\n                                <br />\n                                <br />\n                              </div>\n                            )}\n\n                            <StatsTooltipRow\n                              label={t`Initial Collateral`}\n                              value={formatAmount(position.collateral, USD_DECIMALS, 2, true)}\n                            />\n                            <StatsTooltipRow\n                              label={t`Borrow Fee`}\n                              showDollar={false}\n                              value={`-$${formatAmount(position.fundingFee, USD_DECIMALS, 2, true)}`}\n                            />\n                            <StatsTooltipRow\n                              showDollar={false}\n                              label={t`Borrow Fee / Day`}\n                              value={`-$${borrowFeeUSD}`}\n                            />\n                            <br />\n                            <Trans>Use the Edit Collateral icon to deposit or withdraw collateral.</Trans>\n                          </>\n                        );\n                      }}\n                    />\n                    <span className=\"edit-icon\" onClick={() => editPosition(position)}>\n                      <AiOutlineEdit fontSize={16} />\n                    </span>\n                  </div>\n                </td>\n                <td className=\"clickable\" onClick={() => onPositionClick(position)}>\n                  <Tooltip\n                    handle={`$${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}`}\n                    position=\"left-bottom\"\n                    handleClassName=\"plain clickable\"\n                    renderContent={() => {\n                      return (\n                        <div>\n                          <Trans>\n                            Click on a row to select the position's market, then use the swap box to increase your\n                            position size if needed.\n                          </Trans>\n                          <br />\n                          <br />\n                          <Trans>\n                            Use the \"Close\" button to reduce your position size, or to set stop-loss / take-profit\n                            orders.\n                          </Trans>\n                        </div>\n                      );\n                    }}\n                  />\n                </td>\n                <td className=\"clickable\" onClick={() => onPositionClick(position)}>\n                  ${formatAmount(position.averagePrice, USD_DECIMALS, 2, true)}\n                </td>\n                <td className=\"clickable\" onClick={() => onPositionClick(position)}>\n                  ${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}\n                </td>\n\n                <td>\n                  <button\n                    className=\"Exchange-list-action\"\n                    onClick={() => sellPosition(position)}\n                    disabled={position.size.eq(0)}\n                  >\n                    <Trans>Close</Trans>\n                  </button>\n                </td>\n                <td>\n                  <PositionDropdown\n                    handleEditCollateral={() => {\n                      editPosition(position);\n                    }}\n                    handleShare={() => {\n                      setPositionToShare(position);\n                      setIsPositionShareModalOpen(true);\n                    }}\n                    handleMarketSelect={() => {\n                      onPositionClick(position);\n                    }}\n                  />\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","import React, { useState, useMemo } from \"react\";\nimport { BsArrowRight } from \"react-icons/bs\";\n\nimport {\n  PRECISION,\n  USD_DECIMALS,\n  SWAP,\n  DECREASE,\n  INCREASE,\n  isTriggerRatioInverted,\n  getNextToAmount,\n  getExchangeRate,\n  getExchangeRateDisplay,\n  calculatePositionDelta,\n  getLiquidationPrice,\n} from \"lib/legacy\";\nimport { updateSwapOrder, updateIncreaseOrder, updateDecreaseOrder } from \"domain/legacy\";\nimport Modal from \"../Modal/Modal\";\nimport ExchangeInfoRow from \"./ExchangeInfoRow\";\nimport { getContract } from \"config/contracts\";\nimport { TRIGGER_PREFIX_ABOVE, TRIGGER_PREFIX_BELOW } from \"config/ui\";\nimport { getTokenInfo } from \"domain/tokens/utils\";\nimport { bigNumberify, formatAmount, formatAmountFree, parseValue } from \"lib/numbers\";\nimport { useChainId } from \"lib/chains\";\nimport { t, Trans } from \"@lingui/macro\";\n\nexport default function OrderEditor(props) {\n  const {\n    account,\n    order,\n    setEditingOrder,\n    infoTokens,\n    pendingTxns,\n    setPendingTxns,\n    library,\n    totalTokenWeights,\n    usdgSupply,\n    getPositionForOrder,\n    positionsMap,\n    savedShouldDisableValidationForTesting,\n  } = props;\n\n  const { chainId } = useChainId();\n\n  const position = order.type !== SWAP ? getPositionForOrder(account, order, positionsMap) : null;\n  const liquidationPrice = order.type === DECREASE && position ? getLiquidationPrice(position) : null;\n\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const fromTokenInfo = order.type === SWAP ? getTokenInfo(infoTokens, order.path[0], true, nativeTokenAddress) : null;\n  const toTokenInfo =\n    order.type === SWAP\n      ? getTokenInfo(infoTokens, order.path[order.path.length - 1], order.shouldUnwrap, nativeTokenAddress)\n      : null;\n\n  const triggerRatioInverted = useMemo(() => {\n    if (order.type !== SWAP) {\n      return null;\n    }\n\n    return isTriggerRatioInverted(fromTokenInfo, toTokenInfo);\n  }, [toTokenInfo, fromTokenInfo, order.type]);\n\n  let initialRatio = 0;\n  if (order.triggerRatio) {\n    initialRatio = triggerRatioInverted ? PRECISION.mul(PRECISION).div(order.triggerRatio) : order.triggerRatio;\n  }\n  const [triggerRatioValue, setTriggerRatioValue] = useState(formatAmountFree(initialRatio, USD_DECIMALS, 6));\n\n  const [triggerPriceValue, setTriggerPriceValue] = useState(formatAmountFree(order.triggerPrice, USD_DECIMALS, 4));\n  const triggerPrice = useMemo(() => {\n    return triggerPriceValue ? parseValue(triggerPriceValue, USD_DECIMALS) : 0;\n  }, [triggerPriceValue]);\n\n  const triggerRatio = useMemo(() => {\n    if (!triggerRatioValue) {\n      return bigNumberify(0);\n    }\n    let ratio = parseValue(triggerRatioValue, USD_DECIMALS);\n    if (triggerRatioInverted) {\n      ratio = PRECISION.mul(PRECISION).div(ratio);\n    }\n    return ratio;\n  }, [triggerRatioValue, triggerRatioInverted]);\n\n  const indexTokenMarkPrice = useMemo(() => {\n    if (order.type === SWAP) {\n      return;\n    }\n    const toTokenInfo = getTokenInfo(infoTokens, order.indexToken);\n    return order.isLong ? toTokenInfo.maxPrice : toTokenInfo.minPrice;\n  }, [infoTokens, order]);\n\n  let toAmount;\n  if (order.type === SWAP) {\n    const { amount } = getNextToAmount(\n      chainId,\n      order.amountIn,\n      order.path[0],\n      order.path[order.path.length - 1],\n      infoTokens,\n      undefined,\n      triggerRatio,\n      usdgSupply,\n      totalTokenWeights\n    );\n    toAmount = amount;\n  }\n\n  const onClickPrimary = () => {\n    setIsSubmitting(true);\n\n    let func;\n    let params;\n\n    if (order.type === SWAP) {\n      func = updateSwapOrder;\n      params = [chainId, library, order.index, toAmount, triggerRatio, order.triggerAboveThreshold];\n    } else if (order.type === DECREASE) {\n      func = updateDecreaseOrder;\n      params = [\n        chainId,\n        library,\n        order.index,\n        order.collateralDelta,\n        order.sizeDelta,\n        triggerPrice,\n        order.triggerAboveThreshold,\n      ];\n    } else if (order.type === INCREASE) {\n      func = updateIncreaseOrder;\n      params = [chainId, library, order.index, order.sizeDelta, triggerPrice, order.triggerAboveThreshold];\n    }\n\n    params.push({\n      successMsg: t`Order updated!`,\n      failMsg: t`Order update failed.`,\n      sentMsg: t`Order update submitted!`,\n      pendingTxns,\n      setPendingTxns,\n    });\n\n    return func(...params)\n      .then(() => {\n        setEditingOrder(null);\n      })\n      .finally(() => {\n        setIsSubmitting(false);\n      });\n  };\n\n  const onTriggerRatioChange = (evt) => {\n    setTriggerRatioValue(evt.target.value || \"\");\n  };\n\n  const onTriggerPriceChange = (evt) => {\n    setTriggerPriceValue(evt.target.value || \"\");\n  };\n\n  const getError = () => {\n    if ((!triggerRatio || triggerRatio.eq(0)) && (!triggerPrice || triggerPrice.eq(0))) {\n      return t`Enter Price`;\n    }\n    if (order.type === SWAP && triggerRatio.eq(order.triggerRatio)) {\n      return t`Enter new Price`;\n    }\n    if (order.type !== SWAP && triggerPrice.eq(order.triggerPrice)) {\n      return t`Enter new Price`;\n    }\n    if (position) {\n      if (order.type === DECREASE) {\n        if (position.isLong && triggerPrice.lte(liquidationPrice)) {\n          return t`Price below Liq. Price`;\n        }\n        if (!position.isLong && triggerPrice.gte(liquidationPrice)) {\n          return t`Price above Liq. Price`;\n        }\n      }\n\n      const { delta, hasProfit } = calculatePositionDelta(triggerPrice, position);\n      if (hasProfit && delta.eq(0)) {\n        return t`Invalid price, see warning`;\n      }\n    }\n\n    if (order.type !== SWAP && indexTokenMarkPrice && !savedShouldDisableValidationForTesting) {\n      if (order.triggerAboveThreshold && indexTokenMarkPrice.gt(triggerPrice)) {\n        return t`Price below Mark Price`;\n      }\n      if (!order.triggerAboveThreshold && indexTokenMarkPrice.lt(triggerPrice)) {\n        return t`Price above Mark Price`;\n      }\n    }\n\n    if (order.type === SWAP) {\n      const currentRate = getExchangeRate(fromTokenInfo, toTokenInfo);\n      if (currentRate && !currentRate.gte(triggerRatio)) {\n        return triggerRatioInverted ? t`Price is below Mark Price` : t`Price is above Mark Price`;\n      }\n    }\n  };\n\n  const isPrimaryEnabled = () => {\n    if (isSubmitting) {\n      return false;\n    }\n    const error = getError();\n    if (error) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n\n    if (isSubmitting) {\n      return t`Updating Order...`;\n    }\n    return t`Update Order`;\n  };\n\n  if (order.type !== SWAP) {\n    const triggerPricePrefix = order.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n    return (\n      <Modal\n        isVisible={true}\n        className=\"Exchange-list-modal\"\n        setIsVisible={() => setEditingOrder(null)}\n        label={t`Edit order`}\n      >\n        <div className=\"Exchange-swap-section\">\n          <div className=\"Exchange-swap-section-top\">\n            <div className=\"muted\">\n              <Trans>Price</Trans>\n            </div>\n            <div\n              className=\"muted align-right clickable\"\n              onClick={() => {\n                setTriggerPriceValue(formatAmountFree(indexTokenMarkPrice, USD_DECIMALS, 2));\n              }}\n            >\n              <Trans>Mark: {formatAmount(indexTokenMarkPrice, USD_DECIMALS, 2)}</Trans>\n            </div>\n          </div>\n          <div className=\"Exchange-swap-section-bottom\">\n            <div className=\"Exchange-swap-input-container\">\n              <input\n                type=\"number\"\n                min=\"0\"\n                placeholder=\"0.0\"\n                className=\"Exchange-swap-input\"\n                value={triggerPriceValue}\n                onChange={onTriggerPriceChange}\n              />\n            </div>\n            <div className=\"PositionEditor-token-symbol\">USD</div>\n          </div>\n        </div>\n        <ExchangeInfoRow label={t`Price`}>\n          {triggerPrice && !triggerPrice.eq(order.triggerPrice) ? (\n            <>\n              <span className=\"muted\">\n                {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\n              </span>\n              &nbsp;\n              <BsArrowRight />\n              &nbsp;\n              {triggerPricePrefix} {formatAmount(triggerPrice, USD_DECIMALS, 2, true)}\n            </>\n          ) : (\n            <span>\n              {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\n            </span>\n          )}\n        </ExchangeInfoRow>\n        {liquidationPrice && (\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>Liq. Price</Trans>\n            </div>\n            <div className=\"align-right\">{`$${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}`}</div>\n          </div>\n        )}\n        <div className=\"Exchange-swap-button-container\">\n          <button\n            className=\"App-cta Exchange-swap-button Exchange-list-modal-button\"\n            onClick={onClickPrimary}\n            disabled={!isPrimaryEnabled()}\n          >\n            {getPrimaryText()}\n          </button>\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <Modal\n      isVisible={true}\n      className=\"Exchange-list-modal\"\n      setIsVisible={() => setEditingOrder(null)}\n      label={t`Edit order`}\n    >\n      <div className=\"Exchange-swap-section\">\n        <div className=\"Exchange-swap-section-top\">\n          <div className=\"muted\">\n            <Trans>Price</Trans>\n          </div>\n          {fromTokenInfo && toTokenInfo && (\n            <div\n              className=\"muted align-right clickable\"\n              onClick={() => {\n                setTriggerRatioValue(\n                  formatAmountFree(getExchangeRate(fromTokenInfo, toTokenInfo, triggerRatioInverted), USD_DECIMALS, 10)\n                );\n              }}\n            >\n              <Trans>Mark Price: </Trans>\n              {formatAmount(getExchangeRate(fromTokenInfo, toTokenInfo, triggerRatioInverted), USD_DECIMALS, 2)}\n            </div>\n          )}\n        </div>\n        <div className=\"Exchange-swap-section-bottom\">\n          <div className=\"Exchange-swap-input-container\">\n            <input\n              type=\"number\"\n              min=\"0\"\n              placeholder=\"0.0\"\n              className=\"Exchange-swap-input\"\n              value={triggerRatioValue}\n              onChange={onTriggerRatioChange}\n            />\n          </div>\n          {(() => {\n            if (!toTokenInfo) return;\n            if (!fromTokenInfo) return;\n            const [tokenA, tokenB] = triggerRatioInverted ? [toTokenInfo, fromTokenInfo] : [fromTokenInfo, toTokenInfo];\n            return (\n              <div className=\"PositionEditor-token-symbol\">\n                {tokenA.symbol}&nbsp;/&nbsp;{tokenB.symbol}\n              </div>\n            );\n          })()}\n        </div>\n      </div>\n      <ExchangeInfoRow label={t`Minimum received`}>\n        {triggerRatio && !triggerRatio.eq(order.triggerRatio) ? (\n          <>\n            <span className=\"muted\">{formatAmount(order.minOut, toTokenInfo.decimals, 4, true)}</span>\n            &nbsp;\n            <BsArrowRight />\n            &nbsp;\n            {formatAmount(toAmount, toTokenInfo.decimals, 4, true)}\n          </>\n        ) : (\n          formatAmount(order.minOut, toTokenInfo.decimals, 4, true)\n        )}\n        &nbsp;{toTokenInfo.symbol}\n      </ExchangeInfoRow>\n      <ExchangeInfoRow label={t`Price`}>\n        {triggerRatio && !triggerRatio.eq(0) && !triggerRatio.eq(order.triggerRatio) ? (\n          <>\n            <span className=\"muted\">\n              {getExchangeRateDisplay(order.triggerRatio, fromTokenInfo, toTokenInfo, {\n                omitSymbols: !triggerRatio || !triggerRatio.eq(order.triggerRatio),\n              })}\n            </span>\n            &nbsp;\n            <BsArrowRight />\n            &nbsp;\n            {getExchangeRateDisplay(triggerRatio, fromTokenInfo, toTokenInfo)}\n          </>\n        ) : (\n          getExchangeRateDisplay(order.triggerRatio, fromTokenInfo, toTokenInfo, {\n            omitSymbols: !triggerRatio || !triggerRatio.eq(order.triggerRatio),\n          })\n        )}\n      </ExchangeInfoRow>\n      {fromTokenInfo && (\n        <div className=\"Exchange-info-row\">\n          <div className=\"Exchange-info-label\">\n            <Trans>{fromTokenInfo.symbol} price</Trans>\n          </div>\n          <div className=\"align-right\">{formatAmount(fromTokenInfo.minPrice, USD_DECIMALS, 2, true)} USD</div>\n        </div>\n      )}\n      {toTokenInfo && (\n        <div className=\"Exchange-info-row\">\n          <div className=\"Exchange-info-label\">\n            <Trans>{toTokenInfo.symbol} price</Trans>\n          </div>\n          <div className=\"align-right\">{formatAmount(toTokenInfo.maxPrice, USD_DECIMALS, 2, true)} USD</div>\n        </div>\n      )}\n      <div className=\"Exchange-swap-button-container\">\n        <button\n          className=\"App-cta Exchange-swap-button Exchange-list-modal-button\"\n          onClick={onClickPrimary}\n          disabled={!isPrimaryEnabled()}\n        >\n          {getPrimaryText()}\n        </button>\n      </div>\n    </Modal>\n  );\n}\n","import React, { useState, useCallback } from \"react\";\nimport { t, Trans } from \"@lingui/macro\";\n\nimport {\n  SWAP,\n  INCREASE,\n  DECREASE,\n  USD_DECIMALS,\n  getOrderError,\n  getExchangeRateDisplay,\n  getExchangeRate,\n  getPositionForOrder,\n} from \"lib/legacy.js\";\nimport { handleCancelOrder } from \"domain/legacy\";\nimport { getContract } from \"config/contracts\";\n\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport OrderEditor from \"./OrderEditor\";\n\nimport \"./OrdersList.css\";\nimport Checkbox from \"../Checkbox/Checkbox\";\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\nimport { TRIGGER_PREFIX_ABOVE, TRIGGER_PREFIX_BELOW } from \"config/ui\";\nimport { getTokenInfo, getUsd } from \"domain/tokens/utils\";\nimport { formatAmount } from \"lib/numbers\";\n\nexport default function OrdersList(props) {\n  const {\n    account,\n    library,\n    setPendingTxns,\n    pendingTxns,\n    infoTokens,\n    positionsMap,\n    totalTokenWeights,\n    usdgSupply,\n    orders,\n    hideActions,\n    chainId,\n    savedShouldDisableValidationForTesting,\n    cancelOrderIdList,\n    setCancelOrderIdList,\n  } = props;\n\n  const [editingOrder, setEditingOrder] = useState(null);\n\n  const onCancelClick = useCallback(\n    (order) => {\n      handleCancelOrder(chainId, library, order, { pendingTxns, setPendingTxns });\n    },\n    [library, pendingTxns, setPendingTxns, chainId]\n  );\n\n  const onEditClick = useCallback(\n    (order) => {\n      setEditingOrder(order);\n    },\n    [setEditingOrder]\n  );\n\n  const renderHead = useCallback(() => {\n    const isAllOrdersSelected = cancelOrderIdList?.length > 0 && cancelOrderIdList?.length === orders.length;\n    return (\n      <tr className=\"Exchange-list-header\">\n        {orders.length > 0 && (\n          <th>\n            <div className=\"checkbox-inline \">\n              <Checkbox\n                isChecked={isAllOrdersSelected}\n                setIsChecked={() => {\n                  if (isAllOrdersSelected) {\n                    setCancelOrderIdList([]);\n                  } else {\n                    const allOrderIds = orders.map((o) => `${o.type}-${o.index}`);\n                    setCancelOrderIdList(allOrderIds);\n                  }\n                }}\n              />\n            </div>\n          </th>\n        )}\n\n        <th>\n          <div>\n            <Trans>Type</Trans>\n          </div>\n        </th>\n        <th>\n          <div>\n            <Trans>Order</Trans>\n          </div>\n        </th>\n        <th>\n          <div>\n            <Trans>Price</Trans>\n          </div>\n        </th>\n        <th>\n          <div>\n            <Trans>Mark Price</Trans>\n          </div>\n        </th>\n      </tr>\n    );\n  }, [cancelOrderIdList, orders, setCancelOrderIdList]);\n\n  const renderEmptyRow = useCallback(() => {\n    if (orders && orders.length) {\n      return null;\n    }\n\n    return (\n      <tr>\n        <td colSpan=\"5\">\n          <Trans>No open orders</Trans>\n        </td>\n      </tr>\n    );\n  }, [orders]);\n\n  const renderActions = useCallback(\n    (order) => {\n      return (\n        <>\n          <td>\n            <button className=\"Exchange-list-action\" onClick={() => onEditClick(order)}>\n              <Trans>Edit</Trans>\n            </button>\n          </td>\n          <td>\n            <button className=\"Exchange-list-action\" onClick={() => onCancelClick(order)}>\n              <Trans>Cancel</Trans>\n            </button>\n          </td>\n        </>\n      );\n    },\n    [onEditClick, onCancelClick]\n  );\n\n  const renderLargeList = useCallback(() => {\n    if (!orders || !orders.length) {\n      return null;\n    }\n    return orders.map((order) => {\n      if (order.type === SWAP) {\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n        const fromTokenInfo = getTokenInfo(infoTokens, order.path[0], true, nativeTokenAddress);\n        const toTokenInfo = getTokenInfo(\n          infoTokens,\n          order.path[order.path.length - 1],\n          order.shouldUnwrap,\n          nativeTokenAddress\n        );\n\n        const markExchangeRate = getExchangeRate(fromTokenInfo, toTokenInfo);\n        const orderId = `${order.type}-${order.index}`;\n\n        return (\n          <tr className=\"Exchange-list-item\" key={orderId}>\n            <td>\n              <div className=\"checkbox-inline \">\n                <Checkbox\n                  isChecked={cancelOrderIdList?.includes(orderId)}\n                  setIsChecked={() => {\n                    setCancelOrderIdList((prevState) => {\n                      if (prevState.includes(orderId)) {\n                        return prevState.filter((i) => i !== orderId);\n                      } else {\n                        return prevState.concat(orderId);\n                      }\n                    });\n                  }}\n                />\n              </div>\n            </td>\n            <td className=\"Exchange-list-item-type\">\n              <Trans>Limit</Trans>\n            </td>\n            <td>\n              <Trans>Swap</Trans>{\" \"}\n              {formatAmount(\n                order.amountIn,\n                fromTokenInfo.decimals,\n                fromTokenInfo.isStable || fromTokenInfo.isUsdg ? 2 : 4,\n                true\n              )}{\" \"}\n              {fromTokenInfo.symbol} for{\" \"}\n              {formatAmount(\n                order.minOut,\n                toTokenInfo.decimals,\n                toTokenInfo.isStable || toTokenInfo.isUsdg ? 2 : 4,\n                true\n              )}{\" \"}\n              {toTokenInfo.symbol}\n            </td>\n            <td>\n              <Tooltip\n                handle={getExchangeRateDisplay(order.triggerRatio, fromTokenInfo, toTokenInfo)}\n                renderContent={() => t`\n                  You will receive at least ${formatAmount(\n                    order.minOut,\n                    toTokenInfo.decimals,\n                    toTokenInfo.isStable || toTokenInfo.isUsdg ? 2 : 4,\n                    true\n                  )} ${\n                  toTokenInfo.symbol\n                } if this order is executed. The execution price may vary depending on swap fees at the time the order is executed.\n                `}\n              />\n            </td>\n            <td>{getExchangeRateDisplay(markExchangeRate, fromTokenInfo, toTokenInfo, true)}</td>\n            {!hideActions && renderActions(order)}\n          </tr>\n        );\n      }\n\n      const indexToken = getTokenInfo(infoTokens, order.indexToken);\n\n      // Longs Increase: max price\n      // Longs Decrease: min price\n      // Short Increase: min price\n      // Short Decrease: max price\n      const maximisePrice = (order.type === INCREASE && order.isLong) || (order.type === DECREASE && !order.isLong);\n\n      const markPrice = maximisePrice ? indexToken.contractMaxPrice : indexToken.contractMinPrice;\n      const triggerPricePrefix = order.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n      const indexTokenSymbol = indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol;\n\n      const error = getOrderError(account, order, positionsMap);\n      const orderId = `${order.type}-${order.index}`;\n      const orderText = (\n        <>\n          {order.type === INCREASE ? t`Increase` : t`Decrease`} {indexTokenSymbol} {order.isLong ? t`Long` : t`Short`}\n          &nbsp;by ${formatAmount(order.sizeDelta, USD_DECIMALS, 2, true)}\n          {error && <div className=\"Exchange-list-item-error\">{error}</div>}\n        </>\n      );\n\n      return (\n        <tr className=\"Exchange-list-item\" key={`${order.isLong}-${order.type}-${order.index}`}>\n          <td className=\"Exchange-list-item-type\">\n            <div>\n              <Checkbox\n                isChecked={cancelOrderIdList?.includes(orderId)}\n                setIsChecked={() => {\n                  setCancelOrderIdList((prevState) => {\n                    if (prevState.includes(orderId)) {\n                      return prevState.filter((i) => i !== orderId);\n                    } else {\n                      return prevState.concat(orderId);\n                    }\n                  });\n                }}\n              />\n            </div>\n          </td>\n          <td className=\"Exchange-list-item-type\">{order.type === INCREASE ? t`Limit` : t`Trigger`}</td>\n          <td>\n            {order.type === DECREASE ? (\n              orderText\n            ) : (\n              <Tooltip\n                handle={orderText}\n                position=\"right-bottom\"\n                renderContent={() => {\n                  const collateralTokenInfo = getTokenInfo(infoTokens, order.purchaseToken);\n                  const collateralUSD = getUsd(order.purchaseTokenAmount, order.purchaseToken, false, infoTokens);\n                  return (\n                    <StatsTooltipRow\n                      label={t`Collateral`}\n                      value={`${formatAmount(collateralUSD, USD_DECIMALS, 2, true)} (${formatAmount(\n                        order.purchaseTokenAmount,\n                        collateralTokenInfo.decimals,\n                        4,\n                        true\n                      )}\n                      ${collateralTokenInfo.baseSymbol || collateralTokenInfo.symbol})`}\n                    />\n                  );\n                }}\n              />\n            )}\n          </td>\n          <td>\n            {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\n          </td>\n          <td>\n            <Tooltip\n              handle={formatAmount(markPrice, USD_DECIMALS, 2, true)}\n              position=\"right-bottom\"\n              renderContent={() => {\n                return (\n                  <Trans>\n                    The price that orders can be executed at may differ slightly from the chart price, as market orders\n                    update oracle prices, while limit/trigger orders do not.\n                  </Trans>\n                );\n              }}\n            />\n          </td>\n          {!hideActions && renderActions(order)}\n        </tr>\n      );\n    });\n  }, [\n    orders,\n    renderActions,\n    infoTokens,\n    positionsMap,\n    hideActions,\n    chainId,\n    account,\n    cancelOrderIdList,\n    setCancelOrderIdList,\n  ]);\n\n  const renderSmallList = useCallback(() => {\n    if (!orders || !orders.length) {\n      return null;\n    }\n\n    return orders.map((order) => {\n      if (order.type === SWAP) {\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n        const fromTokenInfo = getTokenInfo(infoTokens, order.path[0], true, nativeTokenAddress);\n        const toTokenInfo = getTokenInfo(\n          infoTokens,\n          order.path[order.path.length - 1],\n          order.shouldUnwrap,\n          nativeTokenAddress\n        );\n        const markExchangeRate = getExchangeRate(fromTokenInfo, toTokenInfo);\n\n        return (\n          <div key={`${order.type}-${order.index}`} className=\"App-card\">\n            <div className=\"App-card-title-small\">\n              Swap {formatAmount(order.amountIn, fromTokenInfo.decimals, fromTokenInfo.isStable ? 2 : 4, true)}{\" \"}\n              {fromTokenInfo.symbol} for{\" \"}\n              {formatAmount(order.minOut, toTokenInfo.decimals, toTokenInfo.isStable ? 2 : 4, true)}{\" \"}\n              {toTokenInfo.symbol}\n            </div>\n            <div className=\"App-card-divider\"></div>\n            <div className=\"App-card-content\">\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Price</Trans>\n                </div>\n                <div>\n                  <Tooltip\n                    position=\"right-bottom\"\n                    handle={getExchangeRateDisplay(order.triggerRatio, fromTokenInfo, toTokenInfo)}\n                    renderContent={() => t`\n                    You will receive at least ${formatAmount(\n                      order.minOut,\n                      toTokenInfo.decimals,\n                      toTokenInfo.isStable || toTokenInfo.isUsdg ? 2 : 4,\n                      true\n                    )} ${\n                      toTokenInfo.symbol\n                    } if this order is executed. The exact execution price may vary depending on fees at the time the order is executed.\n                  `}\n                  />\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Mark Price</Trans>\n                </div>\n                <div>{getExchangeRateDisplay(markExchangeRate, fromTokenInfo, toTokenInfo)}</div>\n              </div>\n              {!hideActions && (\n                <>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-options\">\n                    <button className=\"App-button-option App-card-option\" onClick={() => onEditClick(order)}>\n                      <Trans>Edit</Trans>\n                    </button>\n                    <button className=\"App-button-option App-card-option\" onClick={() => onCancelClick(order)}>\n                      <Trans>Cancel</Trans>\n                    </button>\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n        );\n      }\n\n      const indexToken = getTokenInfo(infoTokens, order.indexToken);\n      const maximisePrice = (order.type === INCREASE && order.isLong) || (order.type === DECREASE && !order.isLong);\n      const markPrice = maximisePrice ? indexToken.contractMaxPrice : indexToken.contractMinPrice;\n      const triggerPricePrefix = order.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n      const indexTokenSymbol = indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol;\n\n      const collateralTokenInfo = getTokenInfo(infoTokens, order.purchaseToken);\n      const collateralUSD = getUsd(order.purchaseTokenAmount, order.purchaseToken, true, infoTokens);\n\n      const error = getOrderError(account, order, positionsMap);\n\n      return (\n        <div key={`${order.isLong}-${order.type}-${order.index}`} className=\"App-card\">\n          <div className=\"App-card-title-small\">\n            {order.type === INCREASE ? t`Increase` : t`Decrease`} {indexTokenSymbol} {order.isLong ? t`Long` : t`Short`}\n            &nbsp;by ${formatAmount(order.sizeDelta, USD_DECIMALS, 2, true)}\n            {error && <div className=\"Exchange-list-item-error\">{error}</div>}\n          </div>\n          <div className=\"App-card-divider\"></div>\n          <div className=\"App-card-content\">\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Price</Trans>\n              </div>\n              <div>\n                {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\n              </div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Mark Price</Trans>\n              </div>\n              <div>\n                <Tooltip\n                  handle={formatAmount(markPrice, USD_DECIMALS, 2, true)}\n                  position=\"right-bottom\"\n                  renderContent={() => {\n                    return (\n                      <Trans>\n                        The price that the order can be executed at may differ slightly from the chart price as market\n                        orders can change the price while limit / trigger orders cannot.\n                      </Trans>\n                    );\n                  }}\n                />\n              </div>\n            </div>\n            {order.type === INCREASE && (\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Collateral</Trans>\n                </div>\n                <div>\n                  ${formatAmount(collateralUSD, USD_DECIMALS, 2, true)} (\n                  {formatAmount(order.purchaseTokenAmount, collateralTokenInfo.decimals, 4, true)}{\" \"}\n                  {collateralTokenInfo.baseSymbol || collateralTokenInfo.symbol})\n                </div>\n              </div>\n            )}\n            {!hideActions && (\n              <>\n                <div className=\"App-card-divider\"></div>\n                <div className=\"App-card-options\">\n                  <button className=\"App-button-option App-card-option\" onClick={() => onEditClick(order)}>\n                    <Trans>Edit</Trans>\n                  </button>\n                  <button className=\"App-button-option App-card-option\" onClick={() => onCancelClick(order)}>\n                    <Trans>Cancel</Trans>\n                  </button>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      );\n    });\n  }, [orders, onEditClick, onCancelClick, infoTokens, positionsMap, hideActions, chainId, account]);\n\n  return (\n    <React.Fragment>\n      <table className=\"Exchange-list Orders App-box large\">\n        <tbody>\n          {renderHead()}\n          {renderEmptyRow()}\n          {renderLargeList()}\n        </tbody>\n      </table>\n      <div className=\"Exchange-list Orders small\">\n        {(!orders || orders.length === 0) && (\n          <div className=\"Exchange-empty-positions-list-note App-card\">\n            <Trans>No open orders</Trans>\n          </div>\n        )}\n        {renderSmallList()}\n      </div>\n      {editingOrder && (\n        <OrderEditor\n          account={account}\n          order={editingOrder}\n          setEditingOrder={setEditingOrder}\n          infoTokens={infoTokens}\n          pendingTxns={pendingTxns}\n          setPendingTxns={setPendingTxns}\n          getPositionForOrder={getPositionForOrder}\n          positionsMap={positionsMap}\n          library={library}\n          totalTokenWeights={totalTokenWeights}\n          usdgSupply={usdgSupply}\n          savedShouldDisableValidationForTesting={savedShouldDisableValidationForTesting}\n        />\n      )}\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect, useCallback, useMemo } from \"react\";\nimport { ethers } from \"ethers\";\nimport { Link } from \"react-router-dom\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\n\nimport {\n  USD_DECIMALS,\n  MAX_LEVERAGE,\n  BASIS_POINTS_DIVISOR,\n  LIQUIDATION_FEE,\n  TRADES_PAGE_SIZE,\n  deserialize,\n  getExchangeRateDisplay,\n} from \"lib/legacy\";\nimport { useTrades, useLiquidationsData, useAllTradesHistory } from \"domain/legacy\";\nimport { getContract } from \"config/contracts\";\n\nimport \"./TradeHistory.css\";\nimport { getExplorerUrl } from \"config/chains\";\nimport { bigNumberify, formatAmount } from \"lib/numbers\";\nimport { formatDateTime } from \"lib/dates\";\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\nimport { select, t, Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nconst { AddressZero } = ethers.constants;\n\nfunction getPositionDisplay(increase, indexToken, isLong, sizeDelta) {\n  const symbol = indexToken ? (indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol) : \"\";\n  return `\n    ${increase ? t`Increase` : t`Decrease`} ${symbol} ${isLong ? t`Long` : t`Short`}\n    ${increase ? \"+\" : \"-\"}${formatAmount(bigNumberify(sizeDelta), USD_DECIMALS, 2, true)} USD`;\n}\n\nfunction getOrderActionTitle(action) {\n  let actionDisplay;\n\n  if (action.startsWith(\"Create\")) {\n    actionDisplay = t`Create`;\n  } else if (action.startsWith(\"Cancel\")) {\n    actionDisplay = t`Cancel`;\n  } else {\n    actionDisplay = t`Update`;\n  }\n\n  return t`${actionDisplay} Order`;\n}\n\nfunction renderLiquidationTooltip(liquidationData, label) {\n  const minCollateral = liquidationData.size.mul(BASIS_POINTS_DIVISOR).div(MAX_LEVERAGE);\n  const text =\n    liquidationData.type === \"full\"\n      ? t`This position was liquidated as the max leverage of 100x was exceeded.`\n      : t`Max leverage of 100x was exceeded, the remaining collateral after deducting losses and fees have been sent back to your account`;\n  return (\n    <Tooltip\n      position=\"left-top\"\n      handle={label}\n      renderContent={() => (\n        <>\n          {text}\n          <br />\n          <br />\n          <StatsTooltipRow\n            label={t`Initial collateral`}\n            showDollar\n            value={formatAmount(liquidationData.collateral, USD_DECIMALS, 2, true)}\n          />\n          <StatsTooltipRow\n            label={t`Min required collateral`}\n            showDollar\n            value={formatAmount(minCollateral, USD_DECIMALS, 2, true)}\n          />\n          <StatsTooltipRow\n            label={t`Borrow fee`}\n            showDollar\n            value={formatAmount(liquidationData.borrowFee, USD_DECIMALS, 2, true)}\n          />\n          <StatsTooltipRow label={t`PnL`} value={`-$${formatAmount(liquidationData.loss, USD_DECIMALS, 2, true)}`} />\n          {liquidationData.type === \"full\" && (\n            <StatsTooltipRow label={t`Liquidation fee`} showDollar value={formatAmount(LIQUIDATION_FEE, 30, 2, true)} />\n          )}\n        </>\n      )}\n    />\n  );\n}\n\nfunction getLiquidationData(liquidationsDataMap, key, timestamp) {\n  return liquidationsDataMap && liquidationsDataMap[`${key}:${timestamp}`];\n}\n\nexport default function TradeHistory(props) {\n  const { account, infoTokens, getTokenInfo, chainId, nativeTokenAddress, shouldShowPaginationButtons } = props;\n  const [pageIds, setPageIds] = useState({});\n  const [pageIndex, setPageIndex] = useState(0);\n\n  const getAfterId = () => {\n    return pageIds[pageIndex];\n  };\n\n  // const { trades, updateTrades } = useTrades(chainId, account, props.forSingleAccount, getAfterId());\n  console.log(\"---shark useAllTradesHistory\");\n  const tradeHistoryData = useAllTradesHistory(chainId, account);\n  const liquidationsData = useLiquidationsData(chainId, account);\n  const liquidationsDataMap = useMemo(() => {\n    if (!liquidationsData) {\n      return null;\n    }\n    return liquidationsData.reduce((memo, item) => {\n      const liquidationKey = `${item.key}:${item.timestamp}`;\n      memo[liquidationKey] = item;\n      return memo;\n    }, {});\n  }, [liquidationsData]);\n\n  // useEffect(() => {\n  //   const interval = setInterval(() => {\n  //     updateTrades(undefined, true);\n  //   }, 10 * 1000);\n  //   return () => clearInterval(interval);\n  // }, [updateTrades]);\n\n  const loadNextPage = () => {\n    // if (!trades || trades.length === 0) {\n    //   return;\n    // }\n\n    // const lastTrade = trades[trades.length - 1];\n    // pageIds[pageIndex + 1] = lastTrade.id;\n    // setPageIds(pageIds);\n    // setPageIndex(pageIndex + 1);\n    \n    if (!tradeHistoryData || tradeHistoryData.length === 0) {\n      return;\n    }\n\n    const lastTrade = tradeHistoryData[tradeHistoryData.length - 1];\n    pageIds[pageIndex + 1] = lastTrade.id;\n    setPageIds(pageIds);\n    setPageIndex(pageIndex + 1);\n  };\n\n  const loadPrevPage = () => {\n    setPageIndex(pageIndex - 1);\n  };\n  \n  const getMsg = useCallback(\n    (trade) => {\n      const tradeData = trade.data;\n      // const params = JSON.parse(tradeData.params);\n      const params = trade.data.params;\n      const longOrShortText = params?.isLong ? t`Long` : t`Short`;\n      const defaultMsg = \"\";\n\n      if (tradeData.action === \"BuyUSDG\") {\n        const token = getTokenInfo(infoTokens, params.token, true, nativeTokenAddress);\n        if (!token) {\n          return defaultMsg;\n        }\n        return t`Swap ${formatAmount(params.tokenAmount, token.decimals, 4, true)} ${token.symbol} for ${formatAmount(\n          params.usdgAmount,\n          18,\n          4,\n          true\n        )} USDG`;\n      }\n\n      if (tradeData.action === \"SellUSDG\") {\n        const token = getTokenInfo(infoTokens, params.token, true, nativeTokenAddress);\n        if (!token) {\n          return defaultMsg;\n        }\n        return t`Swap ${formatAmount(params.usdgAmount, 18, 4, true)} USDG for ${formatAmount(\n          params.tokenAmount,\n          token.decimals,\n          4,\n          true\n        )} ${token.symbol}`;\n      }\n\n      if (tradeData.action === \"Swap\") {\n        const tokenIn = getTokenInfo(infoTokens, params.tokenIn, true, nativeTokenAddress);\n        const tokenOut = getTokenInfo(infoTokens, params.tokenOut, true, nativeTokenAddress);\n        if (!tokenIn || !tokenOut) {\n          return defaultMsg;\n        }\n        return t`Swap ${formatAmount(params.amountIn, tokenIn.decimals, 4, true)} ${tokenIn.symbol} for ${formatAmount(\n          params.amountOut,\n          tokenOut.decimals,\n          4,\n          true\n        )} ${tokenOut.symbol}`;\n      }\n\n      if (tradeData.action === \"CreateIncreasePosition\") {\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n\n        if (bigNumberify(params.sizeDelta).eq(0)) {\n          return t`Request deposit into ${indexToken.symbol} ${longOrShortText}`;\n        }\n\n        return t`Request increase ${indexToken.symbol} ${longOrShortText}, +${formatAmount(\n          params.sizeDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD, Acceptable Price: ${params.isLong ? \"<\" : \">\"} ${formatAmount(\n          params.acceptablePrice,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD`;\n      }\n\n      if (tradeData.action === \"CreateDecreasePosition\") {\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n\n        if (bigNumberify(params.sizeDelta).eq(0)) {\n          return t`Request withdrawal from ${indexToken.symbol} ${longOrShortText}`;\n        }\n\n        return t`Request decrease ${indexToken.symbol} ${longOrShortText}, -${formatAmount(\n          bigNumberify(params.sizeDelta),\n          USD_DECIMALS,\n          2,\n          true\n        )} USD, Acceptable Price: ${params.isLong ? \">\" : \"<\"} ${formatAmount(\n          params.acceptablePrice,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD`;\n      }\n\n      if (tradeData.action === \"CancelIncreasePosition\") {\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n\n        if (bigNumberify(params.sizeDelta).eq(0)) {\n          return (\n            <Trans>\n              Could not execute deposit into {indexToken.symbol} {longOrShortText}\n            </Trans>\n          );\n        }\n\n        return (\n          <>\n            <Trans>\n              Could not increase {indexToken.symbol} {longOrShortText},\n              {`+${formatAmount(bigNumberify(params.sizeDelta), USD_DECIMALS, 2, true)}`} USD, Acceptable Price:&nbsp;\n              {params.isLong ? \"<\" : \">\"}&nbsp;\n            </Trans>\n            <Tooltip\n              position=\"left-top\"\n              handle={`${formatAmount(params.acceptablePrice, USD_DECIMALS, 2, true)} USD`}\n              renderContent={() => (\n                <Trans>Try increasing the \"Allowed Slippage\", under the Settings menu on the top right.</Trans>\n              )}\n            />\n          </>\n        );\n      }\n\n      if (tradeData.action === \"CancelDecreasePosition\") {\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n\n        if (bigNumberify(params.sizeDelta).eq(0)) {\n          return t`Could not execute withdrawal from ${indexToken.symbol} ${longOrShortText}`;\n        }\n\n        return (\n          <>\n            <Trans>\n              Could not decrease {indexToken.symbol} {longOrShortText},\n              {`+${formatAmount(bigNumberify(params.sizeDelta), USD_DECIMALS, 2, true)}`} USD, Acceptable Price:&nbsp;\n              {params.isLong ? \">\" : \"<\"}&nbsp;\n            </Trans>\n            <Tooltip\n              position=\"left-top\"\n              handle={`${formatAmount(params.acceptablePrice, USD_DECIMALS, 2, true)} USD`}\n              renderContent={() => (\n                <Trans>Try increasing the \"Allowed Slippage\", under the Settings menu on the top right</Trans>\n              )}\n            />\n          </>\n        );\n      }\n\n      if (tradeData.action === \"IncreasePosition-Long\" || tradeData.action === \"IncreasePosition-Short\") {\n        if (params.flags?.isOrderExecution) {\n          return;\n        }\n\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n        if (bigNumberify(params.sizeDelta).eq(0)) {\n          return t`Deposit ${formatAmount(params.collateralDelta, USD_DECIMALS, 2, true)} USD into ${\n            indexToken.symbol\n          } ${longOrShortText}`;\n        }\n        return t`Increase ${indexToken.symbol} ${longOrShortText}, +${formatAmount(\n          bigNumberify(params.sizeDelta),\n          USD_DECIMALS,\n          2,\n          true\n        )} USD, ${indexToken.symbol} Price: ${formatAmount(params.price, USD_DECIMALS, 2, true)} USD`;\n      }\n\n      if (tradeData.action === \"DecreasePosition-Long\" || tradeData.action === \"DecreasePosition-Short\") {\n        if (params.flags?.isOrderExecution) {\n          return;\n        }\n\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n        if (bigNumberify(params.sizeDelta).eq(0)) {\n          return t`Withdraw ${formatAmount(params.collateralDelta, USD_DECIMALS, 2, true)} USD from ${\n            indexToken.symbol\n          } ${longOrShortText}`;\n        }\n        const isLiquidation = params.flags?.isLiquidation;\n        const liquidationData = getLiquidationData(liquidationsDataMap, params.key, tradeData.timestamp);\n\n        if (isLiquidation && liquidationData) {\n          return (\n            <>\n              {renderLiquidationTooltip(liquidationData, t`Partial Liquidation`)} {indexToken.symbol} {longOrShortText},\n              -{formatAmount(bigNumberify(params.sizeDelta), USD_DECIMALS, 2, true)} USD, {indexToken.symbol}&nbsp; Price: $\n              {formatAmount(params.price, USD_DECIMALS, 2, true)} USD\n            </>\n          );\n        }\n        const actionDisplay = isLiquidation ? t`Partially Liquidated` : t`Decreased`;\n        return t`\n        ${actionDisplay} ${indexToken.symbol} ${longOrShortText},\n        -${formatAmount(bigNumberify(params.sizeDelta), USD_DECIMALS, 2, true)} USD,\n        ${indexToken.symbol} Price: ${formatAmount(params.price, USD_DECIMALS, 2, true)} USD\n      `;\n      }\n\n      if (tradeData.action === \"LiquidatePosition-Long\" || tradeData.action === \"LiquidatePosition-Short\") {\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n        const liquidationData = getLiquidationData(liquidationsDataMap, params.key, tradeData.timestamp);\n        if (liquidationData) {\n          return (\n            <Trans>\n              {renderLiquidationTooltip(liquidationData, t`Liquidated`)} {indexToken.symbol} {longOrShortText}, -\n              {formatAmount(params.size, USD_DECIMALS, 2, true)} USD,&nbsp;\n              {indexToken.symbol} Price: ${formatAmount(params.markPrice, USD_DECIMALS, 2, true)} USD\n            </Trans>\n          );\n        }\n        return t`\n        Liquidated ${indexToken.symbol} ${longOrShortText},\n        -${formatAmount(params.size, USD_DECIMALS, 2, true)} USD,\n        ${indexToken.symbol} Price: ${formatAmount(params.markPrice, USD_DECIMALS, 2, true)} USD\n      `;\n      }\n\n      if ([\"ExecuteIncreaseOrder\", \"ExecuteDecreaseOrder\"].includes(tradeData.action)) {\n        const order = deserialize(params.order);\n        const indexToken = getTokenInfo(infoTokens, order.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n        const longShortDisplay = order.isLong ? t`Long` : t`Short`;\n        const executionPriceDisplay = formatAmount(order.executionPrice, USD_DECIMALS, 2, true);\n        const sizeDeltaDisplay = `${order.type === \"Increase\" ? \"+\" : \"-\"}${formatAmount(\n          bigNumberify(order.sizeDelta),\n          USD_DECIMALS,\n          2,\n          true\n        )}`;\n        return t`Execute Order: ${select(order.type, { Increase: \"Increase\", Decrease: \"Decrease\" })} ${\n          indexToken.symbol\n        } ${longShortDisplay} ${sizeDeltaDisplay} USD, Price: ${executionPriceDisplay} USD`;\n      }\n\n      if (\n        [\n          \"CreateIncreaseOrder\",\n          \"CancelIncreaseOrder\",\n          \"UpdateIncreaseOrder\",\n          \"CreateDecreaseOrder\",\n          \"CancelDecreaseOrder\",\n          \"UpdateDecreaseOrder\",\n        ].includes(tradeData.action)\n      ) {\n        // const order = deserialize(params.order);\n        const order = params.order;\n        const indexToken = getTokenInfo(infoTokens, order.indexToken);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n        const increase = tradeData.action.includes(\"Increase\");\n        const nBigNum =  bigNumberify(order.triggerPrice);\n        const priceDisplay = `${order.triggerAboveThreshold ? \">\" : \"<\"} ${formatAmount(\n          nBigNum,\n          USD_DECIMALS,\n          2,\n          true\n        )}`;\n        return t`\n        ${getOrderActionTitle(tradeData.action)}:\n        ${getPositionDisplay(increase, indexToken, order.isLong, bigNumberify(order.sizeDelta))},\n        Price: ${priceDisplay}\n      `;\n      }\n\n      if (tradeData.action === \"ExecuteSwapOrder\") {\n        const order = deserialize(params.order);\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n        const fromToken = getTokenInfo(infoTokens, order.path[0] === nativeTokenAddress ? AddressZero : order.path[0]);\n        const toToken = getTokenInfo(infoTokens, order.shouldUnwrap ? AddressZero : order.path[order.path.length - 1]);\n        if (!fromToken || !toToken) {\n          return defaultMsg;\n        }\n        const fromAmountDisplay = formatAmount(order.amountIn, fromToken.decimals, fromToken.isStable ? 2 : 4, true);\n        const toAmountDisplay = formatAmount(order.amountOut, toToken.decimals, toToken.isStable ? 2 : 4, true);\n        return t`\n        Execute Order: Swap ${fromAmountDisplay} ${fromToken.symbol} for ${toAmountDisplay} ${toToken.symbol}\n      `;\n      }\n\n      if ([\"CreateSwapOrder\", \"UpdateSwapOrder\", \"CancelSwapOrder\"].includes(tradeData.action)) {\n        const order = deserialize(params.order);\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n        const fromToken = getTokenInfo(infoTokens, order.path[0] === nativeTokenAddress ? AddressZero : order.path[0]);\n        const toToken = getTokenInfo(infoTokens, order.shouldUnwrap ? AddressZero : order.path[order.path.length - 1]);\n        if (!fromToken || !toToken) {\n          return defaultMsg;\n        }\n        const amountInDisplay = fromToken\n          ? formatAmount(order.amountIn, fromToken.decimals, fromToken.isStable ? 2 : 4, true)\n          : \"\";\n        const minOutDisplay = toToken\n          ? formatAmount(order.minOut, toToken.decimals, toToken.isStable ? 2 : 4, true)\n          : \"\";\n\n        return t`\n        ${getOrderActionTitle(tradeData.action)}:\n        Swap ${amountInDisplay} ${fromToken?.symbol || \"\"} for ${minOutDisplay} ${toToken?.symbol || \"\"},\n        Price: ${getExchangeRateDisplay(order.triggerRatio, fromToken, toToken)}`;\n      }\n    },\n    [getTokenInfo, infoTokens, nativeTokenAddress, chainId, liquidationsDataMap]\n  );\n  \n  const tradesWithMessages = useMemo(() => {\n    if (!tradeHistoryData) {\n      return [];\n    }\n\n    return tradeHistoryData\n      .map((trade) => ({\n        msg: getMsg(trade),\n        ...trade,\n      }))\n      .filter((trade) => trade.msg);\n  }, [tradeHistoryData, getMsg]);\n\n  return (\n    <div className=\"TradeHistory\">\n      {tradesWithMessages.length === 0 && (\n        <div className=\"TradeHistory-row App-box\">\n          <Trans>No trades yet</Trans>\n        </div>\n      )}\n      {tradesWithMessages.length > 0 &&\n        tradesWithMessages.map((trade, index) => {\n          const tradeData = trade.data;\n          const txUrl = getExplorerUrl(chainId) + \"tx/\" + tradeData.txhash;\n\n          let msg = getMsg(trade);\n\n          if (!msg) {\n            return null;\n          }\n\n          return (\n            <div className=\"TradeHistory-row App-box App-box-border\" key={index}>\n              <div>\n                <div className=\"muted TradeHistory-time\">\n                  {formatDateTime(tradeData.timestamp)}\n                  {(!account || account.length === 0) && (\n                    <span>\n                      {\" \"}\n                      (<Link to={`/actions/${tradeData.account}`}>{tradeData.account}</Link>)\n                    </span>\n                  )}\n                </div>\n                <ExternalLink className=\"plain\" href={txUrl}>\n                  {msg}\n                </ExternalLink>\n              </div>\n            </div>\n          );\n        })}\n      {shouldShowPaginationButtons && (\n        <div>\n          {pageIndex > 0 && (\n            <button className=\"App-button-option App-card-option\" onClick={loadPrevPage}>\n              <Trans>Prev</Trans>\n            </button>\n          )}\n          {tradeHistoryData && tradeHistoryData.length >= TRADES_PAGE_SIZE && (\n            <button className=\"App-button-option App-card-option\" onClick={loadNextPage}>\n              <Trans>Next</Trans>\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport \"./ExchangeWalletTokens.css\";\nimport { bigNumberify, expandDecimals, formatAmount } from \"lib/numbers\";\n\nexport default function ExchangeWalletTokens(props) {\n  const { tokens, mintingCap, infoTokens, onSelectToken } = props;\n\n  return (\n    <div className=\"ExchangeWalletTokens App-box\">\n      {tokens.map((token) => {\n        let info = infoTokens ? infoTokens[token.address] : {};\n        let mintAmount;\n        let balance = info.balance;\n        if (mintingCap && info.usdgAmount) {\n          mintAmount = mintingCap.sub(info.usdgAmount);\n        }\n        if (mintAmount && mintAmount.lt(0)) {\n          mintAmount = bigNumberify(0);\n        }\n        let balanceUsd;\n        if (balance && info.maxPrice) {\n          balanceUsd = balance.mul(info.maxPrice).div(expandDecimals(1, token.decimals));\n        }\n        return (\n          <div className=\"ExchangeWalletTokens-token-row\" onClick={() => onSelectToken(token)} key={token.address}>\n            <div className=\"ExchangeWalletTokens-top-row\">\n              <div>{token.symbol}</div>\n              {balance && (\n                <div className=\"align-right\">\n                  {balance.gt(0) && formatAmount(balance, token.decimals, 4, true)}\n                  {balance.eq(0) && \"-\"}\n                </div>\n              )}\n            </div>\n            <div className=\"ExchangeWalletTokens-content-row\">\n              <div className=\"ExchangeWalletTokens-token-name\">{token.name}</div>\n              {balanceUsd && balanceUsd.gt(0) && (\n                <div className=\"align-right\">${formatAmount(balanceUsd, 30, 2, true)}</div>\n              )}\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nimport \"./ExchangeBanner.css\";\n\nexport default function ExchangeBanner(props) {\n  const { hideBanner } = props;\n\n  return (\n    <div className=\"ExchangeBanner\">\n      <p className=\"ExchangeBanner-text\">\n        <Trans>\n          Trade on $AMX and win <span className=\"ExchangeBanner-price\">$250.000</span> in prizes! Live until November\n          30th,{\" \"}\n          <ExternalLink\n            href=\"https://amxdex.medium.com//gmx-trading-competition-win-250-000-usd-in-prizes-1346504b96f6\"\n            className=\"ExchangeBanner-link\"\n          >\n            click here\n          </ExternalLink>{\" \"}\n          to learn more.\n        </Trans>\n      </p>\n      <span\n        className=\"ExchangeBanner-close\"\n        onClick={(e) => {\n          hideBanner();\n        }}\n      >\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"11.25\" height=\"11.25\" viewBox=\"0 0 11.25 11.25\">\n          <path\n            id=\"ic_close\"\n            d=\"M11-2.565,6.818-6.75,11-10.935a.844.844,0,0,0,0-1.193.844.844,0,0,0-1.193,0L5.625-7.943,1.44-12.128a.844.844,0,0,0-1.193,0,.844.844,0,0,0,0,1.193L4.432-6.75.247-2.565a.844.844,0,0,0,0,1.193.844.844,0,0,0,1.193,0L5.625-5.557,9.81-1.372a.844.844,0,0,0,1.193,0A.844.844,0,0,0,11-2.565Z\"\n            transform=\"translate(0 12.375)\"\n            fill=\"#fff\"\n          />\n        </svg>\n      </span>\n    </div>\n  );\n}\n","import React, { useEffect, useState, useMemo, useCallback, forwardRef, useImperativeHandle } from \"react\";\nimport { Trans, t, Plural } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\nimport cx from \"classnames\";\n\nimport {\n  FUNDING_RATE_PRECISION,\n  BASIS_POINTS_DIVISOR,\n  MARGIN_FEE_BASIS_POINTS,\n  SWAP,\n  LONG,\n  SHORT,\n  USD_DECIMALS,\n  getPositionKey,\n  getPositionContractKey,\n  getLeverage,\n  getDeltaStr,\n  useAccountOrders,\n  getPageTitle,\n} from \"lib/legacy\";\nimport { getConstant, getExplorerUrl } from \"config/chains\";\nimport { approvePlugin, useMinExecutionFee, cancelMultipleOrders } from \"domain/legacy\";\n\nimport { getContract } from \"config/contracts\";\n\nimport Reader from \"abis/ReaderV2.json\";\nimport VaultV2 from \"abis/VaultV2.json\";\nimport Router from \"abis/Router.json\";\nimport Token from \"abis/Token.json\";\n\nimport Checkbox from \"components/Checkbox/Checkbox\";\nimport SwapBox from \"components/Exchange/SwapBox\";\nimport ExchangeTVChart, { getChartToken } from \"components/Exchange/ExchangeTVChart\";\nimport PositionsList from \"components/Exchange/PositionsList\";\nimport OrdersList from \"components/Exchange/OrdersList\";\nimport TradeHistory from \"components/Exchange/TradeHistory\";\nimport ExchangeWalletTokens from \"components/Exchange/ExchangeWalletTokens\";\nimport ExchangeBanner from \"components/Exchange/ExchangeBanner\";\nimport Tab from \"components/Tab/Tab\";\nimport Footer from \"components/Footer/Footer\";\n\nimport \"./Exchange.css\";\nimport { contractFetcher } from \"lib/contracts\";\nimport { useInfoTokens } from \"domain/tokens\";\nimport { useLocalStorageByChainId, useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { helperToast } from \"lib/helperToast\";\nimport { getTokenInfo } from \"domain/tokens/utils\";\nimport { bigNumberify, formatAmount } from \"lib/numbers\";\nimport { getToken, getTokenBySymbol, getTokens, getWhitelistedTokens } from \"config/tokens\";\nimport { useChainId } from \"lib/chains\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nconst { AddressZero } = ethers.constants;\n\nconst PENDING_POSITION_VALID_DURATION = 600 * 1000;\nconst UPDATED_POSITION_VALID_DURATION = 60 * 1000;\n\nconst notifications = {};\n\nfunction pushSuccessNotification(chainId, message, e) {\n  const { transactionHash } = e;\n  const id = ethers.utils.id(message + transactionHash);\n  if (notifications[id]) {\n    return;\n  }\n\n  notifications[id] = true;\n\n  const txUrl = getExplorerUrl(chainId) + \"tx/\" + transactionHash;\n  helperToast.success(\n    <div>\n      {message}{\" \"}\n      <ExternalLink href={txUrl}>\n        <Trans>View</Trans>\n      </ExternalLink>\n    </div>\n  );\n}\n\nfunction pushErrorNotification(chainId, message, e) {\n  const { transactionHash } = e;\n  const id = ethers.utils.id(message + transactionHash);\n  if (notifications[id]) {\n    return;\n  }\n\n  notifications[id] = true;\n\n  const txUrl = getExplorerUrl(chainId) + \"tx/\" + transactionHash;\n  helperToast.error(\n    <div>\n      {message}{\" \"}\n      <ExternalLink href={txUrl}>\n        <Trans>View</Trans>\n      </ExternalLink>\n    </div>\n  );\n}\n\nfunction getFundingFee(data) {\n  let { entryFundingRate, cumulativeFundingRate, size } = data;\n  if (entryFundingRate && cumulativeFundingRate) {\n    return size.mul(cumulativeFundingRate.sub(entryFundingRate)).div(FUNDING_RATE_PRECISION);\n  }\n  return;\n}\n\nconst getTokenAddress = (token, nativeTokenAddress) => {\n  if (token.address === AddressZero) {\n    return nativeTokenAddress;\n  }\n  return token.address;\n};\n\nfunction applyPendingChanges(position, pendingPositions) {\n  if (!pendingPositions) {\n    return;\n  }\n  const { key } = position;\n\n  if (\n    pendingPositions[key] &&\n    pendingPositions[key].updatedAt &&\n    pendingPositions[key].pendingChanges &&\n    pendingPositions[key].updatedAt + PENDING_POSITION_VALID_DURATION > Date.now()\n  ) {\n    const { pendingChanges } = pendingPositions[key];\n    if (pendingChanges.size && position.size.eq(pendingChanges.size)) {\n      return;\n    }\n\n    if (pendingChanges.expectingCollateralChange && !position.collateral.eq(pendingChanges.collateralSnapshot)) {\n      return;\n    }\n\n    position.hasPendingChanges = true;\n    position.pendingChanges = pendingChanges;\n  }\n}\n\nexport function getPositions(\n  chainId,\n  positionQuery,\n  positionData,\n  infoTokens,\n  includeDelta,\n  showPnlAfterFees,\n  account,\n  pendingPositions,\n  updatedPositions\n) {\n  const propsLength = getConstant(chainId, \"positionReaderPropsLength\");\n  const positions = [];\n  const positionsMap = {};\n  if (!positionData) {\n    return { positions, positionsMap };\n  }\n  const { collateralTokens, indexTokens, isLong } = positionQuery;\n  for (let i = 0; i < collateralTokens.length; i++) {\n    const collateralToken = getTokenInfo(infoTokens, collateralTokens[i], true, getContract(chainId, \"NATIVE_TOKEN\"));\n    const indexToken = getTokenInfo(infoTokens, indexTokens[i], true, getContract(chainId, \"NATIVE_TOKEN\"));\n    const key = getPositionKey(account, collateralTokens[i], indexTokens[i], isLong[i]);\n    let contractKey;\n    if (account) {\n      contractKey = getPositionContractKey(account, collateralTokens[i], indexTokens[i], isLong[i]);\n    }\n\n    const position = {\n      key,\n      contractKey,\n      collateralToken,\n      indexToken,\n      isLong: isLong[i],\n      size: positionData[i * propsLength],\n      collateral: positionData[i * propsLength + 1],\n      averagePrice: positionData[i * propsLength + 2],\n      entryFundingRate: positionData[i * propsLength + 3],\n      cumulativeFundingRate: collateralToken.cumulativeFundingRate,\n      hasRealisedProfit: positionData[i * propsLength + 4].eq(1),\n      realisedPnl: positionData[i * propsLength + 5],\n      lastIncreasedTime: positionData[i * propsLength + 6].toNumber(),\n      hasProfit: positionData[i * propsLength + 7].eq(1),\n      delta: positionData[i * propsLength + 8],\n      markPrice: isLong[i] ? indexToken.minPrice : indexToken.maxPrice,\n    };\n\n    if (\n      updatedPositions &&\n      updatedPositions[key] &&\n      updatedPositions[key].updatedAt &&\n      updatedPositions[key].updatedAt + UPDATED_POSITION_VALID_DURATION > Date.now()\n    ) {\n      const updatedPosition = updatedPositions[key];\n      position.size = updatedPosition.size;\n      position.collateral = updatedPosition.collateral;\n      position.averagePrice = updatedPosition.averagePrice;\n      position.entryFundingRate = updatedPosition.entryFundingRate;\n    }\n\n    let fundingFee = getFundingFee(position);\n    position.fundingFee = fundingFee ? fundingFee : bigNumberify(0);\n    position.collateralAfterFee = position.collateral.sub(position.fundingFee);\n\n    position.closingFee = position.size.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n    position.positionFee = position.size.mul(MARGIN_FEE_BASIS_POINTS).mul(2).div(BASIS_POINTS_DIVISOR);\n    position.totalFees = position.positionFee.add(position.fundingFee);\n\n    position.pendingDelta = position.delta;\n\n    if (position.collateral.gt(0)) {\n      position.hasLowCollateral =\n        position.collateralAfterFee.lt(0) || position.size.div(position.collateralAfterFee.abs()).gt(50);\n\n      if (position.averagePrice && position.markPrice) {\n        const priceDelta = position.averagePrice.gt(position.markPrice)\n          ? position.averagePrice.sub(position.markPrice)\n          : position.markPrice.sub(position.averagePrice);\n        position.pendingDelta = position.size.mul(priceDelta).div(position.averagePrice);\n\n        position.delta = position.pendingDelta;\n\n        if (position.isLong) {\n          position.hasProfit = position.markPrice.gte(position.averagePrice);\n        } else {\n          position.hasProfit = position.markPrice.lte(position.averagePrice);\n        }\n      }\n\n      position.deltaPercentage = position.pendingDelta.mul(BASIS_POINTS_DIVISOR).div(position.collateral);\n\n      const { deltaStr, deltaPercentageStr } = getDeltaStr({\n        delta: position.pendingDelta,\n        deltaPercentage: position.deltaPercentage,\n        hasProfit: position.hasProfit,\n      });\n\n      position.deltaStr = deltaStr;\n      position.deltaPercentageStr = deltaPercentageStr;\n      position.deltaBeforeFeesStr = deltaStr;\n\n      let hasProfitAfterFees;\n      let pendingDeltaAfterFees;\n\n      if (position.hasProfit) {\n        if (position.pendingDelta.gt(position.totalFees)) {\n          hasProfitAfterFees = true;\n          pendingDeltaAfterFees = position.pendingDelta.sub(position.totalFees);\n        } else {\n          hasProfitAfterFees = false;\n          pendingDeltaAfterFees = position.totalFees.sub(position.pendingDelta);\n        }\n      } else {\n        hasProfitAfterFees = false;\n        pendingDeltaAfterFees = position.pendingDelta.add(position.totalFees);\n      }\n\n      position.hasProfitAfterFees = hasProfitAfterFees;\n      position.pendingDeltaAfterFees = pendingDeltaAfterFees;\n      position.deltaPercentageAfterFees = position.pendingDeltaAfterFees\n        .mul(BASIS_POINTS_DIVISOR)\n        .div(position.collateral);\n\n      const { deltaStr: deltaAfterFeesStr, deltaPercentageStr: deltaAfterFeesPercentageStr } = getDeltaStr({\n        delta: position.pendingDeltaAfterFees,\n        deltaPercentage: position.deltaPercentageAfterFees,\n        hasProfit: hasProfitAfterFees,\n      });\n\n      position.deltaAfterFeesStr = deltaAfterFeesStr;\n      position.deltaAfterFeesPercentageStr = deltaAfterFeesPercentageStr;\n\n      if (showPnlAfterFees) {\n        position.deltaStr = position.deltaAfterFeesStr;\n        position.deltaPercentageStr = position.deltaAfterFeesPercentageStr;\n      }\n\n      let netValue = position.hasProfit\n        ? position.collateral.add(position.pendingDelta)\n        : position.collateral.sub(position.pendingDelta);\n\n      netValue = netValue.sub(position.fundingFee);\n\n      if (showPnlAfterFees) {\n        netValue = netValue.sub(position.closingFee);\n      }\n\n      position.netValue = netValue;\n    }\n\n    position.leverage = getLeverage({\n      size: position.size,\n      collateral: position.collateral,\n      entryFundingRate: position.entryFundingRate,\n      cumulativeFundingRate: position.cumulativeFundingRate,\n      hasProfit: position.hasProfit,\n      delta: position.delta,\n      includeDelta,\n    });\n\n    positionsMap[key] = position;\n\n    applyPendingChanges(position, pendingPositions);\n\n    if (position.size.gt(0) || position.hasPendingChanges) {\n      positions.push(position);\n    }\n  }\n\n  return { positions, positionsMap };\n}\n\nexport function getPositionQuery(tokens, nativeTokenAddress) {\n  const collateralTokens = [];\n  const indexTokens = [];\n  const isLong = [];\n\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n    if (token.isStable) {\n      continue;\n    }\n    if (token.isWrapped) {\n      continue;\n    }\n    collateralTokens.push(getTokenAddress(token, nativeTokenAddress));\n    indexTokens.push(getTokenAddress(token, nativeTokenAddress));\n    isLong.push(true);\n  }\n\n  for (let i = 0; i < tokens.length; i++) {\n    const stableToken = tokens[i];\n    if (!stableToken.isStable) {\n      continue;\n    }\n\n    for (let j = 0; j < tokens.length; j++) {\n      const token = tokens[j];\n      if (token.isStable) {\n        continue;\n      }\n      if (token.isWrapped) {\n        continue;\n      }\n      collateralTokens.push(stableToken.address);\n      indexTokens.push(getTokenAddress(token, nativeTokenAddress));\n      isLong.push(false);\n    }\n  }\n\n  return { collateralTokens, indexTokens, isLong };\n}\n\nexport const Exchange = forwardRef((props, ref) => {\n  const {\n    savedIsPnlInLeverage,\n    setSavedIsPnlInLeverage,\n    savedShowPnlAfterFees,\n    savedSlippageAmount,\n    pendingTxns,\n    setPendingTxns,\n    savedShouldShowPositionLines,\n    setSavedShouldShowPositionLines,\n    connectWallet,\n    savedShouldDisableValidationForTesting,\n  } = props;\n  const [showBanner, setShowBanner] = useLocalStorageSerializeKey(\"showBanner\", true);\n  const [bannerHidden, setBannerHidden] = useLocalStorageSerializeKey(\"bannerHidden\", null);\n\n  const [pendingPositions, setPendingPositions] = useState({});\n  const [updatedPositions, setUpdatedPositions] = useState({});\n\n  const hideBanner = () => {\n    const hiddenLimit = new Date(new Date().getTime() + 2 * 24 * 60 * 60 * 1000);\n    setBannerHidden(hiddenLimit);\n    setShowBanner(false);\n  };\n\n  useEffect(() => {\n    if (new Date() > new Date(\"2021-11-30\")) {\n      setShowBanner(false);\n    } else {\n      if (bannerHidden && new Date(bannerHidden) > new Date()) {\n        setShowBanner(false);\n      } else {\n        setBannerHidden(null);\n        setShowBanner(true);\n      }\n    }\n  }, [showBanner, bannerHidden, setBannerHidden, setShowBanner]);\n\n  const { active, account, library } = useWeb3React();\n  const { chainId } = useChainId();\n  const currentAccount = account;\n\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n  const readerAddress = getContract(chainId, \"Reader\");\n  const usdgAddress = getContract(chainId, \"USDG\");\n\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const whitelistedTokenAddresses = whitelistedTokens.map((token) => token.address);\n\n  const positionQuery = getPositionQuery(whitelistedTokens, nativeTokenAddress);\n\n  const defaultCollateralSymbol = getConstant(chainId, \"defaultCollateralSymbol\");\n  const defaultTokenSelection = useMemo(\n    () => ({\n      [SWAP]: {\n        from: AddressZero,\n        to: getTokenBySymbol(chainId, defaultCollateralSymbol).address,\n      },\n      [LONG]: {\n        from: AddressZero,\n        to: AddressZero,\n      },\n      [SHORT]: {\n        from: getTokenBySymbol(chainId, defaultCollateralSymbol).address,\n        to: AddressZero,\n      },\n    }),\n    [chainId, defaultCollateralSymbol]\n  );\n\n  const [tokenSelection, setTokenSelection] = useLocalStorageByChainId(\n    chainId,\n    \"Exchange-token-selection-v2\",\n    defaultTokenSelection\n  );\n  const [swapOption, setSwapOption] = useLocalStorageByChainId(chainId, \"Swap-option-v2\", LONG);\n\n  const fromTokenAddress = tokenSelection[swapOption].from;\n  const toTokenAddress = tokenSelection[swapOption].to;\n\n  const setFromTokenAddress = useCallback(\n    (selectedSwapOption, address) => {\n      const newTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\n      newTokenSelection[selectedSwapOption].from = address;\n      setTokenSelection(newTokenSelection);\n    },\n    [tokenSelection, setTokenSelection]\n  );\n\n  const setToTokenAddress = useCallback(\n    (selectedSwapOption, address) => {\n      const newTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\n      newTokenSelection[selectedSwapOption].to = address;\n      if (selectedSwapOption === LONG || selectedSwapOption === SHORT) {\n        newTokenSelection[LONG].to = address;\n        newTokenSelection[SHORT].to = address;\n      }\n      setTokenSelection(newTokenSelection);\n    },\n    [tokenSelection, setTokenSelection]\n  );\n\n  const setMarket = (selectedSwapOption, toTokenAddress) => {\n    setSwapOption(selectedSwapOption);\n    const newTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\n    newTokenSelection[selectedSwapOption].to = toTokenAddress;\n    if (selectedSwapOption === LONG || selectedSwapOption === SHORT) {\n      newTokenSelection[LONG].to = toTokenAddress;\n      newTokenSelection[SHORT].to = toTokenAddress;\n    }\n    setTokenSelection(newTokenSelection);\n  };\n\n  const [isConfirming, setIsConfirming] = useState(false);\n  const [isPendingConfirmation, setIsPendingConfirmation] = useState(false);\n\n  const tokens = getTokens(chainId);\n  console.log(\"---shark Exchange.js\");\n  const tokenAddresses = tokens.map((token) => token.address);\n  const { data: tokenBalances } = useSWR(active && [active, chainId, readerAddress, \"getTokenBalances\", account], {\n    fetcher: contractFetcher(library, Reader, [tokenAddresses]),\n  });\n  \n  const { data: positionData, error: positionDataError } = useSWR(\n    active && [active, chainId, readerAddress, \"getPositions\", vaultAddress, account],\n    {\n      fetcher: contractFetcher(library, Reader, [\n        positionQuery.collateralTokens,\n        positionQuery.indexTokens,\n        positionQuery.isLong,\n      ]),\n    }\n  );\n\n  const positionsDataIsLoading = active && !positionData && !positionDataError;\n\n  const { data: fundingRateInfo } = useSWR([active, chainId, readerAddress, \"getFundingRates\"], {\n    fetcher: contractFetcher(library, Reader, [vaultAddress, nativeTokenAddress, whitelistedTokenAddresses]),\n  });\n\n  const { data: totalTokenWeights } = useSWR(\n    [`Exchange:totalTokenWeights:${active}`, chainId, vaultAddress, \"totalTokenWeights\"],\n    {\n      fetcher: contractFetcher(library, VaultV2),\n    }\n  );\n\n  const { data: usdgSupply } = useSWR([`Exchange:usdgSupply:${active}`, chainId, usdgAddress, \"totalSupply\"], {\n    fetcher: contractFetcher(library, Token),\n  });\n\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const routerAddress = getContract(chainId, \"Router\");\n  const { data: orderBookApproved } = useSWR(\n    active && [active, chainId, routerAddress, \"approvedPlugins\", account, orderBookAddress],\n    {\n      fetcher: contractFetcher(library, Router),\n    }\n  );\n\n  const { data: positionRouterApproved } = useSWR(\n    active && [active, chainId, routerAddress, \"approvedPlugins\", account, positionRouterAddress],\n    {\n      fetcher: contractFetcher(library, Router),\n    }\n  );\n\n  const { infoTokens } = useInfoTokens(library, chainId, active, tokenBalances, fundingRateInfo);\n  const { minExecutionFee, minExecutionFeeUSD, minExecutionFeeErrorMessage } = useMinExecutionFee(\n    library,\n    active,\n    chainId,\n    infoTokens\n  );\n\n  useEffect(() => {\n    const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n    const toToken = getTokenInfo(infoTokens, toTokenAddress);\n    let selectedToken = getChartToken(swapOption, fromToken, toToken, chainId);\n    let currentTokenPriceStr = formatAmount(selectedToken.maxPrice, USD_DECIMALS, 2, true);\n    let title = getPageTitle(currentTokenPriceStr + ` | ${selectedToken.symbol}${selectedToken.isStable ? \"\" : \"USD\"}`);\n    document.title = title;\n  }, [tokenSelection, swapOption, infoTokens, chainId, fromTokenAddress, toTokenAddress]);\n\n  const { positions, positionsMap } = getPositions(\n    chainId,\n    positionQuery,\n    positionData,\n    infoTokens,\n    savedIsPnlInLeverage,\n    savedShowPnlAfterFees,\n    account,\n    pendingPositions,\n    updatedPositions\n  );\n\n  useImperativeHandle(ref, () => ({\n    onUpdatePosition(key, size, collateral, averagePrice, entryFundingRate, reserveAmount, realisedPnl) {\n      for (let i = 0; i < positions.length; i++) {\n        const position = positions[i];\n        if (position.contractKey === key) {\n          updatedPositions[position.key] = {\n            size,\n            collateral,\n            averagePrice,\n            entryFundingRate,\n            reserveAmount,\n            realisedPnl,\n            updatedAt: Date.now(),\n          };\n          setUpdatedPositions({ ...updatedPositions });\n          break;\n        }\n      }\n    },\n    onClosePosition(key, size, collateral, averagePrice, entryFundingRate, reserveAmount, realisedPnl, e) {\n      for (let i = 0; i < positions.length; i++) {\n        const position = positions[i];\n        if (position.contractKey === key) {\n          updatedPositions[position.key] = {\n            size: bigNumberify(0),\n            collateral: bigNumberify(0),\n            averagePrice,\n            entryFundingRate,\n            reserveAmount,\n            realisedPnl,\n            updatedAt: Date.now(),\n          };\n          setUpdatedPositions({ ...updatedPositions });\n          break;\n        }\n      }\n    },\n\n    onIncreasePosition(key, account, collateralToken, indexToken, collateralDelta, sizeDelta, isLong, price, fee, e) {\n      if (account !== currentAccount) {\n        return;\n      }\n\n      const indexTokenItem = getToken(chainId, indexToken);\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\n      const longOrShortText = isLong ? t`Long` : t`Short`;\n      let message;\n      if (sizeDelta.eq(0)) {\n        message = t`Deposited ${formatAmount(\n          collateralDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD into ${tokenSymbol} ${longOrShortText}`;\n      } else {\n        message = t`Increased ${tokenSymbol} ${longOrShortText}, +${formatAmount(\n          sizeDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD.`;\n      }\n\n      pushSuccessNotification(chainId, message, e);\n    },\n\n    onDecreasePosition(key, account, collateralToken, indexToken, collateralDelta, sizeDelta, isLong, price, fee, e) {\n      if (account !== currentAccount) {\n        return;\n      }\n\n      const indexTokenItem = getToken(chainId, indexToken);\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\n      const longOrShortText = isLong ? t`Long` : t`Short`;\n\n      let message;\n      if (sizeDelta.eq(0)) {\n        message = t`Withdrew ${formatAmount(\n          collateralDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD from ${tokenSymbol} ${longOrShortText}.`;\n      } else {\n        message = t`Decreased ${tokenSymbol} ${longOrShortText}, -${formatAmount(\n          sizeDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD.`;\n      }\n\n      pushSuccessNotification(chainId, message, e);\n    },\n\n    onCancelIncreasePosition(\n      account,\n      path,\n      indexToken,\n      amountIn,\n      minOut,\n      sizeDelta,\n      isLong,\n      acceptablePrice,\n      executionFee,\n      blockGap,\n      timeGap,\n      e\n    ) {\n      if (account !== currentAccount) {\n        return;\n      }\n      const indexTokenItem = getToken(chainId, indexToken);\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\n      const longOrShortText = isLong ? t`Long` : t`Short`;\n\n      const message = t`Could not increase ${tokenSymbol} ${longOrShortText} within the allowed slippage, you can adjust the allowed slippage in the settings on the top right of the page.`;\n      pushErrorNotification(chainId, message, e);\n\n      const key = getPositionKey(account, path[path.length - 1], indexToken, isLong);\n      pendingPositions[key] = {};\n      setPendingPositions({ ...pendingPositions });\n    },\n\n    onCancelDecreasePosition(\n      account,\n      path,\n      indexToken,\n      collateralDelta,\n      sizeDelta,\n      isLong,\n      receiver,\n      acceptablePrice,\n      minOut,\n      executionFee,\n      blockGap,\n      timeGap,\n      e\n    ) {\n      if (account !== currentAccount) {\n        return;\n      }\n      const indexTokenItem = getToken(chainId, indexToken);\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\n      const longOrShortText = isLong ? t`Long` : t`Short`;\n\n      const message = t`Could not decrease ${tokenSymbol} ${longOrShortText} within the allowed slippage, you can adjust the allowed slippage in the settings on the top right of the page.`;\n\n      pushErrorNotification(chainId, message, e);\n\n      const key = getPositionKey(account, path[path.length - 1], indexToken, isLong);\n      pendingPositions[key] = {};\n      setPendingPositions({ ...pendingPositions });\n    },\n  }));\n\n  const flagOrdersEnabled = true;\n  const [orders] = useAccountOrders(flagOrdersEnabled);\n\n  const [isWaitingForPluginApproval, setIsWaitingForPluginApproval] = useState(false);\n  const [isWaitingForPositionRouterApproval, setIsWaitingForPositionRouterApproval] = useState(false);\n  const [isPluginApproving, setIsPluginApproving] = useState(false);\n  const [isPositionRouterApproving, setIsPositionRouterApproving] = useState(false);\n  const [isCancelMultipleOrderProcessing, setIsCancelMultipleOrderProcessing] = useState(false);\n  const [cancelOrderIdList, setCancelOrderIdList] = useState([]);\n\n  const onMultipleCancelClick = useCallback(\n    async function () {\n      setIsCancelMultipleOrderProcessing(true);\n      try {\n        const tx = await cancelMultipleOrders(chainId, library, cancelOrderIdList, {\n          successMsg: t`Orders cancelled.`,\n          failMsg: t`Cancel failed.`,\n          sentMsg: t`Cancel submitted.`,\n          pendingTxns,\n          setPendingTxns,\n        });\n        const receipt = await tx.wait();\n        if (receipt.status === 1) {\n          setCancelOrderIdList([]);\n        }\n      } catch (error) {\n        console.error(error);\n      } finally {\n        setIsCancelMultipleOrderProcessing(false);\n      }\n    },\n    [\n      chainId,\n      library,\n      pendingTxns,\n      setPendingTxns,\n      setCancelOrderIdList,\n      cancelOrderIdList,\n      setIsCancelMultipleOrderProcessing,\n    ]\n  );\n\n  const approveOrderBook = () => {\n    setIsPluginApproving(true);\n    return approvePlugin(chainId, orderBookAddress, {\n      library,\n      pendingTxns,\n      setPendingTxns,\n      sentMsg: t`Enable orders sent.`,\n      failMsg: t`Enable orders failed.`,\n    })\n      .then(() => {\n        setIsWaitingForPluginApproval(true);\n      })\n      .finally(() => {\n        setIsPluginApproving(false);\n      });\n  };\n\n  const approvePositionRouter = ({ sentMsg, failMsg }) => {\n    setIsPositionRouterApproving(true);\n    return approvePlugin(chainId, positionRouterAddress, {\n      library,\n      pendingTxns,\n      setPendingTxns,\n      sentMsg,\n      failMsg,\n    })\n      .then(() => {\n        setIsWaitingForPositionRouterApproval(true);\n      })\n      .finally(() => {\n        setIsPositionRouterApproving(false);\n      });\n  };\n  const POSITIONS = \"Positions\";\n  const ORDERS = \"Orders\";\n  const TRADES = \"Trades\";\n\n  const LIST_SECTIONS = [POSITIONS, flagOrdersEnabled && ORDERS, TRADES].filter(Boolean);\n  let [listSection, setListSection] = useLocalStorageByChainId(chainId, \"List-section-v2\", LIST_SECTIONS[0]);\n  const LIST_SECTIONS_LABELS = {\n    [ORDERS]: orders.length ? t`Orders (${orders.length})` : t`Orders`,\n    [POSITIONS]: positions.length ? t`Positions (${positions.length})` : t`Positions`,\n    [TRADES]: t`Trades`,\n  };\n  if (!LIST_SECTIONS.includes(listSection)) {\n    listSection = LIST_SECTIONS[0];\n  }\n\n  if (!getToken(chainId, toTokenAddress)) {\n    return null;\n  }\n\n  const renderCancelOrderButton = () => {\n    if (cancelOrderIdList.length === 0) return;\n    return (\n      <button\n        className=\"muted font-base cancel-order-btn\"\n        disabled={isCancelMultipleOrderProcessing}\n        type=\"button\"\n        onClick={onMultipleCancelClick}\n      >\n        <Plural value={cancelOrderIdList.length} one=\"Cancel order\" other=\"Cancel # orders\" />\n      </button>\n    );\n  };\n\n  const getListSection = () => {\n    return (\n      <div>\n        <div className=\"Exchange-list-tab-container\">\n          <Tab\n            options={LIST_SECTIONS}\n            optionLabels={LIST_SECTIONS_LABELS}\n            option={listSection}\n            onChange={(section) => setListSection(section)}\n            type=\"inline\"\n            className=\"Exchange-list-tabs\"\n          />\n          <div className=\"align-right Exchange-should-show-position-lines\">\n            {renderCancelOrderButton()}\n            <Checkbox\n              isChecked={savedShouldShowPositionLines}\n              setIsChecked={setSavedShouldShowPositionLines}\n              className={cx(\"muted chart-positions\", { active: savedShouldShowPositionLines })}\n            >\n              <span>\n                <Trans>Chart positions</Trans>\n              </span>\n            </Checkbox>\n          </div>\n        </div>\n        {listSection === POSITIONS && (\n          <PositionsList\n            positionsDataIsLoading={positionsDataIsLoading}\n            pendingPositions={pendingPositions}\n            setPendingPositions={setPendingPositions}\n            setListSection={setListSection}\n            setIsWaitingForPluginApproval={setIsWaitingForPluginApproval}\n            setIsWaitingForPositionRouterApproval={setIsWaitingForPositionRouterApproval}\n            approveOrderBook={approveOrderBook}\n            approvePositionRouter={approvePositionRouter}\n            isPluginApproving={isPluginApproving}\n            isPositionRouterApproving={isPositionRouterApproving}\n            isWaitingForPluginApproval={isWaitingForPluginApproval}\n            isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\n            orderBookApproved={orderBookApproved}\n            positionRouterApproved={positionRouterApproved}\n            positions={positions}\n            positionsMap={positionsMap}\n            infoTokens={infoTokens}\n            active={active}\n            account={account}\n            library={library}\n            pendingTxns={pendingTxns}\n            setPendingTxns={setPendingTxns}\n            flagOrdersEnabled={flagOrdersEnabled}\n            savedIsPnlInLeverage={savedIsPnlInLeverage}\n            chainId={chainId}\n            nativeTokenAddress={nativeTokenAddress}\n            setMarket={setMarket}\n            orders={orders}\n            showPnlAfterFees={savedShowPnlAfterFees}\n            minExecutionFee={minExecutionFee}\n            minExecutionFeeUSD={minExecutionFeeUSD}\n            minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\n            usdgSupply={usdgSupply}\n            totalTokenWeights={totalTokenWeights}\n          />\n        )}\n        {listSection === ORDERS && (\n          <OrdersList\n            account={account}\n            active={active}\n            library={library}\n            pendingTxns={pendingTxns}\n            setPendingTxns={setPendingTxns}\n            infoTokens={infoTokens}\n            positionsMap={positionsMap}\n            chainId={chainId}\n            orders={orders}\n            totalTokenWeights={totalTokenWeights}\n            usdgSupply={usdgSupply}\n            savedShouldDisableValidationForTesting={savedShouldDisableValidationForTesting}\n            cancelOrderIdList={cancelOrderIdList}\n            setCancelOrderIdList={setCancelOrderIdList}\n          />\n        )}\n        {listSection === TRADES && (\n          <TradeHistory\n            account={account}\n            forSingleAccount={true}\n            infoTokens={infoTokens}\n            getTokenInfo={getTokenInfo}\n            chainId={chainId}\n            nativeTokenAddress={nativeTokenAddress}\n            shouldShowPaginationButtons={true}\n          />\n        )}\n      </div>\n    );\n  };\n\n  const onSelectWalletToken = (token) => {\n    setFromTokenAddress(swapOption, token.address);\n  };\n\n  const renderChart = () => {\n    return (\n      <ExchangeTVChart\n        fromTokenAddress={fromTokenAddress}\n        toTokenAddress={toTokenAddress}\n        infoTokens={infoTokens}\n        swapOption={swapOption}\n        chainId={chainId}\n        positions={positions}\n        savedShouldShowPositionLines={savedShouldShowPositionLines}\n        orders={orders}\n        setToTokenAddress={setToTokenAddress}\n      />\n    );\n  };\n\n  return (\n    <div className=\"Exchange page-layout\">\n      {showBanner && <ExchangeBanner hideBanner={hideBanner} />}\n      <div className=\"Exchange-content\">\n        <div className=\"Exchange-left\">\n          {renderChart()}\n          <div className=\"Exchange-lists large\">{getListSection()}</div>\n        </div>\n        <div className=\"Exchange-right\">\n          <SwapBox\n            pendingPositions={pendingPositions}\n            setPendingPositions={setPendingPositions}\n            setIsWaitingForPluginApproval={setIsWaitingForPluginApproval}\n            setIsWaitingForPositionRouterApproval={setIsWaitingForPositionRouterApproval}\n            approveOrderBook={approveOrderBook}\n            approvePositionRouter={approvePositionRouter}\n            isPluginApproving={isPluginApproving}\n            isPositionRouterApproving={isPositionRouterApproving}\n            isWaitingForPluginApproval={isWaitingForPluginApproval}\n            isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\n            orderBookApproved={orderBookApproved}\n            positionRouterApproved={positionRouterApproved}\n            orders={orders}\n            flagOrdersEnabled={flagOrdersEnabled}\n            chainId={chainId}\n            infoTokens={infoTokens}\n            active={active}\n            connectWallet={connectWallet}\n            library={library}\n            account={account}\n            positionsMap={positionsMap}\n            fromTokenAddress={fromTokenAddress}\n            setFromTokenAddress={setFromTokenAddress}\n            toTokenAddress={toTokenAddress}\n            setToTokenAddress={setToTokenAddress}\n            swapOption={swapOption}\n            setSwapOption={setSwapOption}\n            pendingTxns={pendingTxns}\n            setPendingTxns={setPendingTxns}\n            tokenSelection={tokenSelection}\n            setTokenSelection={setTokenSelection}\n            isConfirming={isConfirming}\n            setIsConfirming={setIsConfirming}\n            isPendingConfirmation={isPendingConfirmation}\n            setIsPendingConfirmation={setIsPendingConfirmation}\n            savedIsPnlInLeverage={savedIsPnlInLeverage}\n            setSavedIsPnlInLeverage={setSavedIsPnlInLeverage}\n            nativeTokenAddress={nativeTokenAddress}\n            savedSlippageAmount={savedSlippageAmount}\n            totalTokenWeights={totalTokenWeights}\n            usdgSupply={usdgSupply}\n            savedShouldDisableValidationForTesting={savedShouldDisableValidationForTesting}\n            minExecutionFee={minExecutionFee}\n            minExecutionFeeUSD={minExecutionFeeUSD}\n            minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\n          />\n          <div className=\"Exchange-wallet-tokens\">\n            <div className=\"Exchange-wallet-tokens-content\">\n              <ExchangeWalletTokens tokens={tokens} infoTokens={infoTokens} onSelectToken={onSelectWalletToken} />\n            </div>\n          </div>\n        </div>\n        <div className=\"Exchange-lists small\">{getListSection()}</div>\n      </div>\n      <Footer />\n    </div>\n  );\n});\n","import React from \"react\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { useParams } from \"react-router-dom\";\n\nimport \"./Actions.css\";\n\nimport { getContract } from \"config/contracts\";\nimport { useAccountOrders } from \"lib/legacy\";\n\nimport { getPositions, getPositionQuery } from \"../Exchange/Exchange\";\n\nimport PositionsList from \"components/Exchange/PositionsList\";\nimport OrdersList from \"components/Exchange/OrdersList\";\n\nimport TradeHistory from \"components/Exchange/TradeHistory\";\nimport Reader from \"abis/Reader.json\";\n\nimport { Trans, t } from \"@lingui/macro\";\nimport { getServerBaseUrl } from \"config/backend\";\nimport { contractFetcher } from \"lib/contracts\";\nimport { useInfoTokens } from \"domain/tokens\";\nimport { getTokenInfo } from \"domain/tokens/utils\";\nimport { formatAmount } from \"lib/numbers\";\nimport { getToken, getTokens, getWhitelistedTokens } from \"config/tokens\";\nimport { useChainId } from \"lib/chains\";\n\nconst USD_DECIMALS = 30;\n\nexport default function Actions() {\n  const { account } = useParams();\n  const { active, library } = useWeb3React();\n  console.log(\"---shark positionData\");\n  const { chainId } = useChainId();\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const readerAddress = getContract(chainId, \"Reader\");\n\n  const shouldShowPnl = false;\n\n  let checkSummedAccount = \"\";\n  if (ethers.utils.isAddress(account)) {\n    checkSummedAccount = ethers.utils.getAddress(account);\n  }\n  const pnlUrl = `${getServerBaseUrl(chainId)}/pnl?account=${checkSummedAccount}`;\n  // const { data: pnlData } = useSWR([pnlUrl], {\n  //   fetcher: (...args) => fetch(...args).then((res) => res.json()),\n  // });\n  const pnlData = undefined;\n\n  const tokens = getTokens(chainId);\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const positionQuery = getPositionQuery(whitelistedTokens, nativeTokenAddress);\n\n  const whitelistedTokenAddresses = whitelistedTokens.map((token) => token.address);\n  const tokenAddresses = tokens.map((token) => token.address);\n  const { data: tokenBalances } = useSWR([active, chainId, readerAddress, \"getTokenBalances\", account], {\n    fetcher: contractFetcher(library, Reader, [tokenAddresses]),\n  });\n  console.log(\"---shark positionData\");\n  const { data: positionData } = useSWR([active, chainId, readerAddress, \"getPositions\", vaultAddress, account], {\n    fetcher: contractFetcher(library, Reader, [\n      positionQuery.collateralTokens,\n      positionQuery.indexTokens,\n      positionQuery.isLong,\n    ]),\n  });\n\n  const { data: fundingRateInfo } = useSWR([active, chainId, readerAddress, \"getFundingRates\"], {\n    fetcher: contractFetcher(library, Reader, [vaultAddress, nativeTokenAddress, whitelistedTokenAddresses]),\n  });\n\n  const { infoTokens } = useInfoTokens(library, chainId, active, tokenBalances, fundingRateInfo);\n  const { positions, positionsMap } = getPositions(\n    chainId,\n    positionQuery,\n    positionData,\n    infoTokens,\n    false,\n    false,\n    checkSummedAccount,\n    undefined,\n    undefined\n  );\n\n  const flagOrdersEnabled = true;\n  const [orders, updateOrders] = useAccountOrders(flagOrdersEnabled, checkSummedAccount);\n\n  return (\n    <div className=\"Actions\">\n      {checkSummedAccount.length > 0 && (\n        <div className=\"Actions-section\">\n          <Trans>Account</Trans>: {checkSummedAccount}\n        </div>\n      )}\n      {shouldShowPnl && (\n        <div className=\"Actions-section\">\n          <div className=\"Actions-title\">\n            <Trans>PnL</Trans>\n          </div>\n          {(!pnlData || pnlData.length === 0) && (\n            <div>\n              <Trans>No PnLs found</Trans>\n            </div>\n          )}\n          {pnlData &&\n            pnlData.length > 0 &&\n            pnlData.map((pnlRow, index) => {\n              const token = getToken(chainId, pnlRow.data.indexToken);\n              return (\n                <div className=\"TradeHistory-row App-box App-box-border\" key={index}>\n                  <div>\n                    {token.symbol} {pnlRow.data.isLong ? t`Long` : t`Short`} <Trans>Profit</Trans>:{\" \"}\n                    {formatAmount(pnlRow.data.profit, USD_DECIMALS, 2, true)} USD\n                  </div>\n                  <div>\n                    {token.symbol} {pnlRow.data.isLong ? t`Long` : t`Short`} <Trans>Loss</Trans>:{\" \"}\n                    {formatAmount(pnlRow.data.loss, USD_DECIMALS, 2, true)} USD\n                  </div>\n                </div>\n              );\n            })}\n        </div>\n      )}\n      {checkSummedAccount.length > 0 && (\n        <div className=\"Actions-section\">\n          <div className=\"Actions-title\">\n            <Trans>Positions</Trans>\n          </div>\n          <PositionsList\n            positions={positions}\n            positionsMap={positionsMap}\n            infoTokens={infoTokens}\n            active={active}\n            orders={orders}\n            account={checkSummedAccount}\n            library={library}\n            flagOrdersEnabled={false}\n            savedIsPnlInLeverage={false}\n            chainId={chainId}\n            nativeTokenAddress={nativeTokenAddress}\n            showPnlAfterFees={false}\n          />\n        </div>\n      )}\n      {flagOrdersEnabled && checkSummedAccount.length > 0 && (\n        <div className=\"Actions-section\">\n          <div className=\"Actions-title\">\n            <Trans>Orders</Trans>\n          </div>\n          <OrdersList\n            account={checkSummedAccount}\n            infoTokens={infoTokens}\n            positionsMap={positionsMap}\n            chainId={chainId}\n            orders={orders}\n            updateOrders={updateOrders}\n            hideActions\n          />\n        </div>\n      )}\n      <div className=\"Actions-section\">\n        <div className=\"Actions-title\">\n          <Trans>Actions</Trans>\n        </div>\n        <TradeHistory\n          account={checkSummedAccount}\n          infoTokens={infoTokens}\n          getTokenInfo={getTokenInfo}\n          chainId={chainId}\n          nativeTokenAddress={nativeTokenAddress}\n          shouldShowPaginationButtons={true}\n        />\n      </div>\n    </div>\n  );\n}\n","import { useWeb3React } from \"@web3-react/core\";\nimport cx from \"classnames\";\n\nimport { NavLink } from \"react-router-dom\";\n\nimport { getContract } from \"config/contracts\";\nimport * as Api from \"domain/legacy\";\nimport { useAllOrders, useAllOrdersStats, usePositionsForOrders } from \"domain/legacy\";\nimport {\n  DECREASE,\n  getExchangeRate,\n  getExchangeRateDisplay,\n  getOrderKey,\n  INCREASE,\n  shortenAddress,\n  shouldInvertTriggerRatio,\n  SWAP,\n  USD_DECIMALS,\n} from \"lib/legacy\";\n\nimport \"./OrdersOverview.css\";\nimport { t, Trans } from \"@lingui/macro\";\nimport { getTokenInfo } from \"domain/tokens/utils\";\nimport { useInfoTokens } from \"domain/tokens\";\nimport { formatAmount } from \"lib/numbers\";\nimport { useChainId } from \"lib/chains\";\nimport { formatDateTime } from \"lib/dates\";\n\nexport default function OrdersOverview() {\n  const { chainId } = useChainId();\n  const { library, account, active } = useWeb3React();\n\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n\n  const { infoTokens } = useInfoTokens(library, chainId, active, undefined, undefined);\n\n  const orders = useAllOrders(chainId, library);\n  const stats = useAllOrdersStats(chainId);\n\n  const positionsForOrders = usePositionsForOrders(\n    chainId,\n    library,\n    orders.filter((order) => order.type === DECREASE)\n  );\n\n  let openTotal;\n  let executedTotal;\n  let cancelledTotal;\n\n  if (stats) {\n    openTotal = stats.openDecrease + stats.openIncrease + stats.openSwap;\n    executedTotal = stats.executedDecrease + stats.executedIncrease + stats.executedSwap;\n    cancelledTotal = stats.cancelledDecrease + stats.cancelledIncrease + stats.cancelledSwap;\n  }\n\n  const NEAR_TRESHOLD = 98;\n\n  const executeOrder = (evt, order) => {\n    evt.preventDefault();\n\n    const params = [chainId, library, order.account, order.index, account];\n    let method;\n    if (order.type === \"Swap\") {\n      method = \"executeSwapOrder\";\n    } else if (order.type === \"Increase\") {\n      method = \"executeIncreaseOrder\";\n    } else {\n      method = \"executeDecreaseOrder\";\n    }\n    return Api[method](...params);\n  };\n\n  return (\n    <div className=\"Orders-overview\">\n      {stats && (\n        <p className=\"Orders-overview-stats\">\n          <Trans>\n            Total active: {openTotal}, executed: {executedTotal}, cancelled: {cancelledTotal}\n          </Trans>\n          <br />\n          <Trans>\n            Increase active: {stats.openIncrease}, executed: {stats.executedIncrease}, cancelled:{\" \"}\n            {stats.cancelledIncrease}\n          </Trans>\n          <br />\n          <Trans>\n            Decrease active: {stats.openDecrease}, executed: {stats.executedDecrease}, cancelled:{\" \"}\n            {stats.cancelledDecrease}\n          </Trans>\n          <br />\n          <Trans>\n            Swap active: {stats.openSwap}, executed: {stats.executedSwap}, cancelled: {stats.cancelledSwap}\n          </Trans>\n          <br />\n        </p>\n      )}\n      <p>\n        <span className=\"positive\">\n          <Trans>Price conditions are met</Trans>\n        </span>\n        <br />\n        <span style={{ color: \"orange\" }}>\n          <Trans>Close to execution price</Trans>\n        </span>\n        <br />\n        <span className=\"negative\">\n          <Trans>Can't execute because of an error</Trans>\n        </span>\n      </p>\n      <table className=\"Orders-overview-table\">\n        <thead>\n          <tr>\n            <th>\n              <Trans>Type</Trans>\n            </th>\n            <th colSpan=\"2\">\n              <Trans>Order</Trans>\n            </th>\n            <th>\n              <Trans>Price</Trans>\n            </th>\n            <th>\n              <Trans>Mark</Trans> Price\n            </th>\n            <th>\n              <Trans>Diff</Trans>\n            </th>\n            <th>\n              <Trans>Account</Trans>\n            </th>\n            <th>\n              <Trans>Created</Trans> At\n            </th>\n            <th>\n              <Trans>Index</Trans>\n            </th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          {orders.map((order) => {\n            const { type } = order;\n            const key = getOrderKey(order);\n            if (type === SWAP) {\n              const fromToken = getTokenInfo(infoTokens, order.path[0], true, nativeTokenAddress);\n              const toTokenAddress = order.path[order.path.length - 1];\n              const toToken = getTokenInfo(infoTokens, toTokenAddress, order.shoudUnwrap, nativeTokenAddress);\n\n              let markExchangeRate;\n              let prefix;\n              let shouldExecute;\n              let nearExecute;\n              let diffPercent;\n              let invalidToken = false;\n              let error;\n              if (fromToken && toToken) {\n                const invert = shouldInvertTriggerRatio(fromToken, toToken);\n                markExchangeRate = getExchangeRate(fromToken, toToken);\n                prefix =\n                  (order.triggerAboveThreshold && !invert) || (!order.triggerAboveThreshold && invert) ? \"> \" : \"< \";\n                shouldExecute = markExchangeRate && markExchangeRate.lt(order.triggerRatio);\n                nearExecute = markExchangeRate && markExchangeRate.lt(order.triggerRatio.mul(100).div(NEAR_TRESHOLD));\n\n                if (markExchangeRate) {\n                  const diff = order.triggerRatio.gt(markExchangeRate)\n                    ? order.triggerRatio.sub(markExchangeRate)\n                    : markExchangeRate.sub(order.triggerRatio);\n                  diffPercent = diff.mul(10000).div(markExchangeRate);\n                }\n              } else {\n                invalidToken = true;\n                error = t`Invalid token fromToken: \"${order.path0}\" toToken: \"${toTokenAddress}\"`;\n              }\n\n              return (\n                <tr key={key}>\n                  <td>\n                    <Trans>Swap</Trans>\n                  </td>\n                  <td colSpan=\"2\">\n                    {!invalidToken && (\n                      <>\n                        {formatAmount(order.amountIn, fromToken.decimals, 4, true)} {fromToken.symbol}\n                        &nbsp;for&nbsp;\n                        {formatAmount(order.minOut, toToken.decimals, 4, true)} {toToken.symbol}\n                      </>\n                    )}\n                  </td>\n                  <td className={cx({ positive: shouldExecute, near: !shouldExecute && nearExecute })}>\n                    {!invalidToken && prefix}\n                    {getExchangeRateDisplay(order.triggerRatio, fromToken, toToken)}\n                  </td>\n                  <td className={cx({ positive: shouldExecute, near: !shouldExecute && nearExecute })}>\n                    {getExchangeRateDisplay(markExchangeRate, fromToken, toToken)}\n                  </td>\n                  <td className={cx({ positive: shouldExecute, near: !shouldExecute && nearExecute })}>\n                    {formatAmount(diffPercent, 2, 2)}%\n                  </td>\n                  <td>\n                    <NavLink to={`/actions/${order.account}`}>{shortenAddress(order.account)}</NavLink>\n                  </td>\n                  <td>{formatDateTime(order.createdTimestamp)}</td>\n                  <td>{order.index}</td>\n                  <td className=\"negative\">{error}</td>\n                  <td>\n                    <button className=\"Orders-overview-action\" onClick={(evt) => executeOrder(evt, order)}>\n                      Execute\n                    </button>\n                  </td>\n                </tr>\n              );\n            } else {\n              const indexToken = getTokenInfo(infoTokens, order.indexToken, true, nativeTokenAddress);\n              const collateralToken = getTokenInfo(infoTokens, order.collateralToken, true, nativeTokenAddress);\n              const purchaseToken = getTokenInfo(infoTokens, order.purchaseToken);\n\n              let markPrice;\n              let error;\n              if (indexToken && collateralToken && (order.type === DECREASE || purchaseToken)) {\n                markPrice = order.triggerAboveThreshold ? indexToken.minPrice : indexToken.maxPrice;\n              } else {\n                error = t`Invalid token indexToken: \"${order.indexToken}\" collateralToken: \"${order.collateralToken}\"`;\n                if (order.type === \"increase\") {\n                  error += ` purchaseToken: ${order.purchaseToken}`;\n                }\n              }\n\n              let shouldExecute;\n              let nearExecute;\n              let diffPercent;\n              if (markPrice) {\n                shouldExecute = order.triggerAboveThreshold\n                  ? markPrice.gt(order.triggerPrice)\n                  : markPrice.lt(order.triggerPrice);\n\n                nearExecute = order.triggerAboveThreshold\n                  ? markPrice.gt(order.triggerPrice.mul(NEAR_TRESHOLD).div(100))\n                  : markPrice.lt(order.triggerPrice.mul(100).div(NEAR_TRESHOLD));\n\n                const diff = markPrice.gt(order.triggerPrice)\n                  ? markPrice.sub(order.triggerPrice)\n                  : order.triggerPrice.sub(markPrice);\n                diffPercent = diff.mul(10000).div(markPrice);\n              }\n\n              if (!error && type === DECREASE) {\n                if (positionsForOrders && key in positionsForOrders) {\n                  const position = positionsForOrders[key];\n                  if (!position) {\n                    error = t`No position`;\n                  } else if (order.sizeDelta.gt(position[0])) {\n                    error = t`Order size exceeds position`;\n                  } else if (order.sizeDelta.eq(0)) {\n                    error = t`Order size is 0`;\n                  }\n                }\n              }\n\n              return (\n                <tr key={key}>\n                  <td>{order.type}</td>\n                  <td>\n                    {order.isLong ? t`Long` : t`Short`} {indexToken && indexToken.symbol}\n                  </td>\n                  <td>\n                    {type === INCREASE ? \"+\" : \"-\"}${formatAmount(order.sizeDelta, USD_DECIMALS, 2, true)}\n                  </td>\n                  <td className={cx({ positive: shouldExecute, near: !shouldExecute && nearExecute })}>\n                    {order.triggerAboveThreshold ? \"> \" : \"< \"}\n                    {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\n                  </td>\n                  <td className={cx({ positive: shouldExecute, near: !shouldExecute && nearExecute })}>\n                    ${formatAmount(markPrice, USD_DECIMALS, 2, true)}\n                  </td>\n                  <td className={cx({ positive: shouldExecute, near: !shouldExecute && nearExecute })}>\n                    {formatAmount(diffPercent, 2, 2)}%\n                  </td>\n                  <td>\n                    <NavLink to={`/actions/${order.account}`}>{shortenAddress(order.account, 12)}</NavLink>\n                  </td>\n                  <td>{formatDateTime(order.createdTimestamp)}</td>\n                  <td>{order.index}</td>\n                  <td className=\"negative\">{error}</td>\n                  <td>\n                    <button className=\"Orders-overview-action\" onClick={(evt) => executeOrder(evt, order)}>\n                      <Trans>Execute</Trans>\n                    </button>\n                  </td>\n                </tr>\n              );\n            }\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","import { Trans } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport cx from \"classnames\";\n\nimport { useAllPositions } from \"domain/legacy\";\nimport { USD_DECIMALS } from \"lib/legacy\";\n\nimport \"./PositionsOverview.css\";\nimport { formatAmount } from \"lib/numbers\";\nimport { useChainId } from \"lib/chains\";\nimport { getTimeRemaining } from \"lib/dates\";\n\nexport default function PositionsOverview() {\n  const { chainId } = useChainId();\n  const { library } = useWeb3React();\n\n  const positions = useAllPositions(chainId, library);\n\n  return (\n    <div className=\"Positions-overview\">\n      <p>\n        <Trans>\n          Open positions: {positions.length}\n          <br />\n          Under risk: {positions.filter((p) => p.danger).length}\n        </Trans>\n      </p>\n      <table className=\"Positions-overview-table\">\n        <thead>\n          <tr>\n            <th>\n              <Trans>account</Trans>\n            </th>\n            <th>\n              <Trans>size</Trans>\n            </th>\n            <th>\n              <Trans>collateral</Trans>\n            </th>\n            <th>\n              <Trans>fee</Trans>\n            </th>\n            <th>\n              <Trans>time to liq</Trans>\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          {positions &&\n            positions\n              .filter((p) => p.danger)\n              .map((position) => {\n                const { size, account, collateral, fee, danger } = position;\n\n                const diffToLiq = position.collateral.sub(position.fee);\n                const fundingFee = 80;\n                const feesPerHour = position.size.mul(fundingFee).div(1000000);\n                const hoursToLiq = diffToLiq.div(feesPerHour);\n                const liqTime = hoursToLiq.toNumber() * 60 * 60 + Date.now() / 1000;\n                return (\n                  <tr>\n                    <td>{account}</td>\n                    <td>${formatAmount(size, USD_DECIMALS, 2, true)}</td>\n                    <td>${formatAmount(collateral, USD_DECIMALS, 2, true)}</td>\n                    <td className={cx({ negative: danger })}>${formatAmount(fee, USD_DECIMALS, 2, true)}</td>\n                    <td>\n                      {getTimeRemaining(liqTime)} (${formatAmount(feesPerHour, USD_DECIMALS, 2, true)}/h)\n                    </td>\n                  </tr>\n                );\n              })}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","import \"./Loader.css\";\n\nexport default function Loader() {\n  return (\n    <div className=\"bouncing-loader\">\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n  );\n}\n","import { useEffect, useState } from \"react\";\n\nexport function useDebounce(value, delay) {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(\n    () => {\n      // Update debounced value after delay\n      const handler = setTimeout(() => {\n        setDebouncedValue(value);\n      }, delay);\n      // Cancel the timeout if value changes (also on delay change or unmount)\n      // This is how we prevent debounced value from updating if value is changed ...\n      // .. within the delay period. Timeout gets cleared and restarted.\n      return () => {\n        clearTimeout(handler);\n      };\n    },\n    [value, delay] // Only re-call effect if value or delay changes\n  );\n\n  return debouncedValue;\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { setTraderReferralCodeByUser, validateReferralCodeExists } from \"domain/referrals\";\nimport { REFERRAL_CODE_REGEX } from \"./referralsHelper\";\nimport { useDebounce } from \"lib/useDebounce\";\n\nfunction JoinReferralCode({ setPendingTxns, pendingTxns, active, connectWallet }) {\n  return (\n    <div className=\"referral-card section-center mt-medium\">\n      <h2 className=\"title\">\n        <Trans>Enter Referral Code</Trans>\n      </h2>\n      <p className=\"sub-title\">\n        <Trans>Please input a referral code to benefit from fee discounts.</Trans>\n      </p>\n      <div className=\"card-action\">\n        {active ? (\n          <ReferralCodeForm setPendingTxns={setPendingTxns} pendingTxns={pendingTxns} />\n        ) : (\n          <button className=\"App-cta Exchange-swap-button\" type=\"submit\" onClick={connectWallet}>\n            <Trans>Connect Wallet</Trans>\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport function ReferralCodeForm({\n  setPendingTxns,\n  pendingTxns,\n  callAfterSuccess,\n  userReferralCodeString = \"\",\n  type = \"join\",\n}) {\n  const { account, library, chainId } = useWeb3React();\n  const [referralCode, setReferralCode] = useState(\"\");\n  const inputRef = useRef(\"\");\n  const [isValidating, setIsValidating] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [referralCodeExists, setReferralCodeExists] = useState(true);\n  const debouncedReferralCode = useDebounce(referralCode, 300);\n\n  function getPrimaryText() {\n    const isEdit = type === \"edit\";\n    if (isEdit && debouncedReferralCode === userReferralCodeString) {\n      return t`Same as current active code`;\n    }\n    if (isEdit && isSubmitting) {\n      return t`Updating...`;\n    }\n\n    if (isSubmitting) {\n      return t`Adding...`;\n    }\n    if (debouncedReferralCode === \"\") {\n      return t`Enter Referral Code`;\n    }\n    if (isValidating) {\n      return t`Checking code...`;\n    }\n    if (!referralCodeExists) {\n      return t`Referral Code does not exist`;\n    }\n\n    return isEdit ? t`Update` : t`Submit`;\n  }\n  function isPrimaryEnabled() {\n    if (\n      debouncedReferralCode === \"\" ||\n      isSubmitting ||\n      isValidating ||\n      !referralCodeExists ||\n      debouncedReferralCode === userReferralCodeString\n    ) {\n      return false;\n    }\n    return true;\n  }\n\n  async function handleSubmit(event) {\n    const isEdit = type === \"edit\";\n    event.preventDefault();\n    setIsSubmitting(true);\n\n    try {\n      const tx = await setTraderReferralCodeByUser(chainId, referralCode, library, {\n        account,\n        successMsg: isEdit ? t`Referral code updated!` : t`Referral code added!`,\n        failMsg: isEdit ? t`Referral code updated failed.` : t`Adding referral code failed.`,\n        setPendingTxns,\n        pendingTxns,\n      });\n      if (callAfterSuccess) {\n        callAfterSuccess();\n      }\n      const receipt = await tx.wait();\n      if (receipt.status === 1) {\n        setReferralCode(\"\");\n      }\n    } catch (error) {\n      console.error(error);\n    } finally {\n      setIsSubmitting(false);\n      setIsValidating(false);\n    }\n  }\n\n  useEffect(() => {\n    let cancelled = false;\n    async function checkReferralCode() {\n      if (debouncedReferralCode === \"\" || !REFERRAL_CODE_REGEX.test(debouncedReferralCode)) {\n        setIsValidating(false);\n        setReferralCodeExists(false);\n        return;\n      }\n\n      setIsValidating(true);\n      const codeExists = await validateReferralCodeExists(debouncedReferralCode, chainId);\n      if (!cancelled) {\n        setReferralCodeExists(codeExists);\n        setIsValidating(false);\n      }\n    }\n    checkReferralCode();\n    return () => {\n      cancelled = true;\n    };\n  }, [debouncedReferralCode, chainId]);\n\n  useEffect(() => {\n    inputRef.current.focus();\n  }, []);\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input\n        ref={inputRef}\n        disabled={isSubmitting}\n        type=\"text\"\n        placeholder=\"Enter referral code\"\n        className=\"text-input mb-sm\"\n        value={referralCode}\n        onChange={({ target }) => {\n          const { value } = target;\n          setReferralCode(value);\n        }}\n      />\n      <button type=\"submit\" className=\"App-cta Exchange-swap-button\" disabled={!isPrimaryEnabled()}>\n        {getPrimaryText()}\n      </button>\n    </form>\n  );\n}\nexport default JoinReferralCode;\n","import Tooltip from \"../Tooltip/Tooltip\";\nimport \"./Card.css\";\nimport { ReactNode } from \"react\";\n\ntype Props = {\n  title: string;\n  children: ReactNode;\n  className?: string;\n  tooltipText?: string;\n};\n\nfunction Card({ title, children, className, tooltipText }: Props) {\n  return (\n    <div className={`card ${className ? className : \"\"}`}>\n      {tooltipText ? (\n        <Tooltip\n          handle={<div className=\"card-header\">{title}</div>}\n          position=\"left-bottom\"\n          renderContent={() => tooltipText}\n        />\n      ) : (\n        <div className=\"card-header\">{title}</div>\n      )}\n      <div className=\"card-divider\"></div>\n      <div className=\"card-body\">{children}</div>\n    </div>\n  );\n}\n\nexport default Card;\n","import Tooltip from \"../Tooltip/Tooltip\";\n\nfunction EmptyMessage({ message = \"\", tooltipText }) {\n  return (\n    <div className=\"empty-message\">\n      {tooltipText ? (\n        <Tooltip handle={<p>{message}</p>} position=\"center-bottom\" renderContent={() => tooltipText} />\n      ) : (\n        <p>{message}</p>\n      )}\n    </div>\n  );\n}\n\nexport default EmptyMessage;\n","import Tooltip from \"../Tooltip/Tooltip\";\n\nfunction InfoCard({ label, data, tooltipText, toolTipPosition = \"left-bottom\" }) {\n  return (\n    <div className=\"info-card\">\n      <div className=\"card-details\">\n        <h3 className=\"label\">\n          {tooltipText ? (\n            <Tooltip handle={label} position={toolTipPosition} renderContent={() => tooltipText} />\n          ) : (\n            label\n          )}\n        </h3>\n        <div className=\"data\">{data}</div>\n      </div>\n    </div>\n  );\n}\n\nexport default InfoCard;\n","import { useEffect, useRef, useState } from \"react\";\nimport { Trans, t } from \"@lingui/macro\";\nimport cx from \"classnames\";\nimport { getCodeError, getReferralCodeTakenStatus, getSampleReferrarStat } from \"./referralsHelper\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { ARBITRUM } from \"config/chains\";\nimport { helperToast } from \"lib/helperToast\";\nimport { useDebounce } from \"lib/useDebounce\";\n\nfunction AddAffiliateCode({\n  handleCreateReferralCode,\n  active,\n  connectWallet,\n  setRecentlyAddedCodes,\n  recentlyAddedCodes,\n}) {\n  return (\n    <div className=\"referral-card section-center mt-medium\">\n      <h2 className=\"title\">\n        <Trans>Generate Referral Code</Trans>\n      </h2>\n      <p className=\"sub-title\">\n        <Trans>\n          Looks like you don't have a referral code to share. <br /> Create one now and start earning rebates!\n        </Trans>\n      </p>\n      <div className=\"card-action\">\n        {active ? (\n          <AffiliateCodeForm\n            handleCreateReferralCode={handleCreateReferralCode}\n            recentlyAddedCodes={recentlyAddedCodes}\n            setRecentlyAddedCodes={setRecentlyAddedCodes}\n          />\n        ) : (\n          <button className=\"App-cta Exchange-swap-button\" type=\"submit\" onClick={connectWallet}>\n            <Trans>Connect Wallet</Trans>\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport function AffiliateCodeForm({\n  handleCreateReferralCode,\n  recentlyAddedCodes,\n  setRecentlyAddedCodes,\n  callAfterSuccess,\n}) {\n  const [referralCode, setReferralCode] = useState(\"\");\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [error, setError] = useState(\"\");\n  const inputRef = useRef(\"\");\n  const [referralCodeCheckStatus, setReferralCodeCheckStatus] = useState(\"ok\");\n  const debouncedReferralCode = useDebounce(referralCode, 300);\n  const { account, chainId } = useWeb3React();\n  useEffect(() => {\n    inputRef.current.focus();\n  }, []);\n\n  useEffect(() => {\n    let cancelled = false;\n    const checkCodeTakenStatus = async () => {\n      if (error) {\n        setReferralCodeCheckStatus(\"ok\");\n        return;\n      }\n      const { status: takenStatus } = await getReferralCodeTakenStatus(account, debouncedReferralCode, chainId);\n      // ignore the result if the referral code to check has changed\n      if (cancelled) {\n        return;\n      }\n      if (takenStatus === \"none\") {\n        setReferralCodeCheckStatus(\"ok\");\n      } else {\n        setReferralCodeCheckStatus(\"taken\");\n      }\n    };\n    setReferralCodeCheckStatus(\"checking\");\n    checkCodeTakenStatus();\n    return () => {\n      cancelled = true;\n    };\n  }, [account, debouncedReferralCode, error, chainId]);\n\n  function getButtonError() {\n    if (!debouncedReferralCode) {\n      return t`Enter a code`;\n    }\n    if (referralCodeCheckStatus === \"taken\") {\n      return t`Code already taken`;\n    }\n    if (referralCodeCheckStatus === \"checking\") {\n      return t`Checking code...`;\n    }\n\n    return false;\n  }\n\n  const buttonError = getButtonError();\n\n  function getPrimaryText() {\n    if (buttonError) {\n      return buttonError;\n    }\n\n    if (isProcessing) {\n      return t`Creating...`;\n    }\n\n    return t`Create`;\n  }\n  function isPrimaryEnabled() {\n    if (buttonError) {\n      return false;\n    }\n    if (error || isProcessing) {\n      return false;\n    }\n    return true;\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    setIsProcessing(true);\n    const { status: takenStatus, info: takenInfo } = await getReferralCodeTakenStatus(account, referralCode, chainId);\n    if ([\"all\", \"current\", \"other\"].includes(takenStatus)) {\n      setIsProcessing(false);\n    }\n\n    if (takenStatus === \"none\" || takenStatus === \"other\") {\n      const ownerOnOtherNetwork = takenInfo[chainId === ARBITRUM ? \"ownerMatic\" : \"ownerArbitrum\"];\n      try {\n        const tx = await handleCreateReferralCode(referralCode);\n        if (callAfterSuccess) {\n          callAfterSuccess();\n        }\n        const receipt = await tx.wait();\n        if (receipt.status === 1) {\n          recentlyAddedCodes.push(getSampleReferrarStat(referralCode, ownerOnOtherNetwork, account));\n\n          helperToast.success(t`Referral code created!`);\n          setRecentlyAddedCodes(recentlyAddedCodes);\n          setReferralCode(\"\");\n        }\n      } catch (err) {\n        console.error(err);\n      } finally {\n        setIsProcessing(false);\n      }\n    }\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input\n        type=\"text\"\n        ref={inputRef}\n        value={referralCode}\n        disabled={isProcessing}\n        className={cx(\"text-input\", { \"mb-sm\": !error })}\n        placeholder={t`Enter a code`}\n        onChange={({ target }) => {\n          const { value } = target;\n          setReferralCode(value);\n          setError(getCodeError(value));\n        }}\n      />\n      {error && <p className=\"error\">{error}</p>}\n      <button className=\"App-cta Exchange-swap-button\" type=\"submit\" disabled={!isPrimaryEnabled()}>\n        {getPrimaryText()}\n      </button>\n    </form>\n  );\n}\n\nexport default AddAffiliateCode;\n","import { useMemo, useRef, useState } from \"react\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { FiPlus, FiTwitter } from \"react-icons/fi\";\nimport { useCopyToClipboard } from \"react-use\";\nimport { IoWarningOutline } from \"react-icons/io5\";\nimport { BiCopy, BiErrorCircle } from \"react-icons/bi\";\nimport Card from \"../Common/Card\";\nimport Modal from \"../Modal/Modal\";\nimport { shortenAddress } from \"lib/legacy\";\nimport EmptyMessage from \"./EmptyMessage\";\nimport InfoCard from \"./InfoCard\";\nimport {\n  getReferralCodeTradeUrl,\n  getTierIdDisplay,\n  getTwitterShareUrl,\n  getUSDValue,\n  isRecentReferralCodeNotExpired,\n  tierRebateInfo,\n} from \"./referralsHelper\";\nimport { AffiliateCodeForm } from \"./AddAffiliateCode\";\nimport TooltipWithPortal from \"../Tooltip/TooltipWithPortal\";\nimport { POLYGON, getExplorerUrl } from \"config/chains\";\nimport { helperToast } from \"lib/helperToast\";\nimport { bigNumberify, formatAmount } from \"lib/numbers\";\nimport { getNativeToken, getToken } from \"config/tokens\";\nimport { formatDate } from \"lib/dates\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nfunction AffiliatesStats({\n  referralsData,\n  handleCreateReferralCode,\n  chainId,\n  setRecentlyAddedCodes,\n  recentlyAddedCodes,\n}) {\n  const [isAddReferralCodeModalOpen, setIsAddReferralCodeModalOpen] = useState(false);\n  const addNewModalRef = useRef(null);\n\n  const [, copyToClipboard] = useCopyToClipboard();\n  const open = () => setIsAddReferralCodeModalOpen(true);\n  const close = () => setIsAddReferralCodeModalOpen(false);\n\n  const { cumulativeStats, referrerTotalStats, rebateDistributions, referrerTierInfo } = referralsData;\n  const allReferralCodes = referrerTotalStats.map((c) => c.referralCode.trim());\n  const finalAffiliatesTotalStats = useMemo(\n    () =>\n      recentlyAddedCodes.filter(isRecentReferralCodeNotExpired).reduce((acc, cv) => {\n        if (!allReferralCodes.includes(cv.referralCode)) {\n          acc = acc.concat(cv);\n        }\n        return acc;\n      }, referrerTotalStats),\n    [allReferralCodes, referrerTotalStats, recentlyAddedCodes]\n  );\n\n  const tierId = referrerTierInfo?.tierId;\n  let referrerRebates = bigNumberify(0);\n  if (cumulativeStats && cumulativeStats.totalRebateUsd && cumulativeStats.discountUsd) {\n    referrerRebates = cumulativeStats.totalRebateUsd.sub(cumulativeStats.discountUsd);\n  }\n  return (\n    <div className=\"referral-body-container\">\n      <div className=\"referral-stats\">\n        <InfoCard\n          label={t`Total Traders Referred`}\n          tooltipText={t`Amount of traders you referred.`}\n          data={cumulativeStats?.registeredReferralsCount || \"0\"}\n        />\n        <InfoCard\n          label={t`Total Trading Volume`}\n          tooltipText={t`Volume traded by your referred traders.`}\n          data={getUSDValue(cumulativeStats?.volume)}\n        />\n        <InfoCard\n          label={t`Total Rebates`}\n          tooltipText={t`Rebates earned by this account as an affiliate.`}\n          data={getUSDValue(referrerRebates, 4)}\n        />\n      </div>\n      <div className=\"list\">\n        <Modal\n          className=\"Connect-wallet-modal\"\n          isVisible={isAddReferralCodeModalOpen}\n          setIsVisible={close}\n          label={t`Create Referral Code`}\n          onAfterOpen={() => addNewModalRef.current?.focus()}\n        >\n          <div className=\"edit-referral-modal\">\n            <AffiliateCodeForm\n              handleCreateReferralCode={handleCreateReferralCode}\n              recentlyAddedCodes={recentlyAddedCodes}\n              setRecentlyAddedCodes={setRecentlyAddedCodes}\n              callAfterSuccess={close}\n            />\n          </div>\n        </Modal>\n        <Card\n          title={\n            <div className=\"referral-table-header\">\n              <p className=\"title\">\n                <Trans>Referral Codes</Trans>{\" \"}\n                <span className=\"sub-title\">\n                  {referrerTierInfo && t`Tier ${getTierIdDisplay(tierId)} (${tierRebateInfo[tierId]}% rebate)`}\n                </span>\n              </p>\n              <button className=\"transparent-btn\" onClick={open}>\n                <FiPlus />{\" \"}\n                <span className=\"ml-small\">\n                  <Trans>Create</Trans>\n                </span>\n              </button>\n            </div>\n          }\n        >\n          <div className=\"table-wrapper\">\n            <table className=\"referral-table\">\n              <thead>\n                <tr>\n                  <th className=\"table-head\" scope=\"col\">\n                    <Trans>Referral Code</Trans>\n                  </th>\n                  <th className=\"table-head\" scope=\"col\">\n                    <Trans>Total Volume</Trans>\n                  </th>\n                  <th className=\"table-head\" scope=\"col\">\n                    <Trans>Traders Referred</Trans>\n                  </th>\n                  <th className=\"table-head\" scope=\"col\">\n                    <Trans>Total Rebates</Trans>\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                {finalAffiliatesTotalStats.map((stat, index) => {\n                  const ownerOnOtherChain = stat?.ownerOnOtherChain;\n                  let referrerRebate = bigNumberify(0);\n                  if (stat && stat.totalRebateUsd && stat.discountUsd) {\n                    referrerRebate = stat.totalRebateUsd.sub(stat.discountUsd);\n                  }\n                  return (\n                    <tr key={index}>\n                      <td data-label=\"Referral Code\">\n                        <div className=\"table-referral-code\">\n                          <span className=\"referral-text \">{stat.referralCode}</span>\n                          <div\n                            onClick={() => {\n                              copyToClipboard(getReferralCodeTradeUrl(stat.referralCode));\n                              helperToast.success(\"Referral link copied to your clipboard\");\n                            }}\n                            className=\"referral-code-icon\"\n                          >\n                            <BiCopy />\n                          </div>\n                          <a\n                            href={getTwitterShareUrl(stat.referralCode)}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            className=\"referral-code-icon\"\n                          >\n                            <FiTwitter />\n                          </a>\n                          {/* {ownerOnOtherChain && !ownerOnOtherChain?.isTaken && (\n                            <div className=\"info\">\n                              <TooltipWithPortal\n                                position=\"right\"\n                                handle={<IoWarningOutline color=\"#ffba0e\" size={16} />}\n                                renderContent={() => (\n                                  <div>\n                                    <Trans>\n                                      This code is not yet registered on{\" \"}\n                                      {chainId === POLYGON ? \"Arbitrum\" : \"Polygon\"}, you will not receive rebates\n                                      there.\n                                      <br />\n                                      <br />\n                                      Switch your network to create this code on{\" \"}\n                                      {chainId === POLYGON ? \"Arbitrum\" : \"Polygon\"}.\n                                    </Trans>\n                                  </div>\n                                )}\n                              />\n                            </div>\n                          )}\n                          {ownerOnOtherChain && ownerOnOtherChain?.isTaken && !ownerOnOtherChain?.isTakenByCurrentUser && (\n                            <div className=\"info\">\n                              <TooltipWithPortal\n                                position=\"right\"\n                                handle={<BiErrorCircle color=\"#e82e56\" size={16} />}\n                                renderContent={() => (\n                                  <div>\n                                    <Trans>\n                                      This code has been taken by someone else on{\" \"}\n                                      {chainId === POLYGON ? \"Arbitrum\" : \"Polygon\"}, you will not receive rebates\n                                      from traders using this code on {chainId === POLYGON ? \"Arbitrum\" : \"Polygon\"}\n                                      .\n                                    </Trans>\n                                  </div>\n                                )}\n                              />\n                            </div>\n                          )} */}\n                        </div>\n                      </td>\n                      <td data-label=\"Total Volume\">{getUSDValue(stat.volume)}</td>\n                      <td data-label=\"Traders Referred\">{stat.registeredReferralsCount}</td>\n                      <td data-label=\"Total Rebates\">{getUSDValue(referrerRebate, 4)}</td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n        </Card>\n      </div>\n      {rebateDistributions?.length > 0 ? (\n        <div className=\"reward-history\">\n          <Card title={t`Rewards Distribution History`} tooltipText={t`Rewards are airdropped weekly.`}>\n            <div className=\"table-wrapper\">\n              <table className=\"referral-table\">\n                <thead>\n                  <tr>\n                    <th className=\"table-head\" scope=\"col\">\n                      <Trans>Date</Trans>\n                    </th>\n                    <th className=\"table-head\" scope=\"col\">\n                      <Trans>Amount</Trans>\n                    </th>\n                    <th className=\"table-head\" scope=\"col\">\n                      <Trans>Transaction</Trans>\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {rebateDistributions.map((rebate, index) => {\n                    let tokenInfo;\n                    try {\n                      tokenInfo = getToken(chainId, rebate.token);\n                    } catch {\n                      tokenInfo = getNativeToken(chainId);\n                    }\n                    const explorerURL = getExplorerUrl(chainId);\n                    return (\n                      <tr key={index}>\n                        <td className=\"table-head\" data-label=\"Date\">\n                          {formatDate(rebate.timestamp)}\n                        </td>\n                        <td className=\"table-head\" data-label=\"Amount\">\n                          {formatAmount(rebate.amount, tokenInfo.decimals, 6, true)} {tokenInfo.symbol}\n                        </td>\n                        <td className=\"table-head\" data-label=\"Transaction\">\n                          <ExternalLink href={explorerURL + `tx/${rebate.transactionHash}`}>\n                            {shortenAddress(rebate.transactionHash, 13)}\n                          </ExternalLink>\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          </Card>\n        </div>\n      ) : (\n        <EmptyMessage\n          tooltipText={t`Rebates are airdropped weekly.`}\n          message={t`No rebates distribution history yet.`}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default AffiliatesStats;\n","import { useRef, useState } from \"react\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { BiEditAlt } from \"react-icons/bi\";\nimport Card from \"../Common/Card\";\nimport Modal from \"../Modal/Modal\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport { shortenAddress } from \"lib/legacy\";\nimport EmptyMessage from \"./EmptyMessage\";\nimport InfoCard from \"./InfoCard\";\nimport { getTierIdDisplay, getUSDValue, tierDiscountInfo } from \"./referralsHelper\";\nimport { ReferralCodeForm } from \"./JoinReferralCode\";\nimport { getExplorerUrl } from \"config/chains\";\nimport { formatAmount } from \"lib/numbers\";\nimport { getNativeToken, getToken } from \"config/tokens\";\nimport { formatDate } from \"lib/dates\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nfunction TradersStats({ referralsData, traderTier, chainId, userReferralCodeString, setPendingTxns, pendingTxns }) {\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n  const editModalRef = useRef(null);\n\n  const open = () => setIsEditModalOpen(true);\n  const close = () => setIsEditModalOpen(false);\n  return (\n    <div className=\"rebate-container\">\n      <div className=\"referral-stats\">\n        <InfoCard\n          label={t`Total Trading Volume`}\n          tooltipText={t`Volume traded by this account with an active referral code.`}\n          data={getUSDValue(referralsData?.referralTotalStats?.volume)}\n        />\n        <InfoCard\n          label={t`Total Rebates`}\n          tooltipText={t`Rebates earned by this account as a trader.`}\n          data={getUSDValue(referralsData?.referralTotalStats?.discountUsd, 4)}\n        />\n        <InfoCard\n          label={t`Active Referral Code`}\n          data={\n            <div className=\"active-referral-code\">\n              <div className=\"edit\">\n                <span>{userReferralCodeString}</span>\n                <BiEditAlt onClick={open} />\n              </div>\n              {traderTier && (\n                <div className=\"tier\">\n                  <Tooltip\n                    handle={t`Tier ${getTierIdDisplay(traderTier)} (${tierDiscountInfo[traderTier]}% discount)`}\n                    position=\"right-bottom\"\n                    renderContent={() => (\n                      <p className=\"text-white\">\n                        <Trans>\n                          You will receive a {tierDiscountInfo[traderTier]}% discount on your opening and closing fees,\n                          this discount will be airdropped to your account every Wednesday\n                        </Trans>\n                      </p>\n                    )}\n                  />\n                </div>\n              )}\n            </div>\n          }\n        />\n        <Modal\n          className=\"Connect-wallet-modal\"\n          isVisible={isEditModalOpen}\n          setIsVisible={close}\n          label={t`Edit Referral Code`}\n          onAfterOpen={() => editModalRef.current?.focus()}\n        >\n          <div className=\"edit-referral-modal\">\n            <ReferralCodeForm\n              userReferralCodeString={userReferralCodeString}\n              setPendingTxns={setPendingTxns}\n              pendingTxns={pendingTxns}\n              type=\"edit\"\n              callAfterSuccess={() => setIsEditModalOpen(false)}\n            />\n          </div>\n        </Modal>\n      </div>\n      {referralsData?.discountDistributions.length > 0 ? (\n        <div className=\"reward-history\">\n          <Card title={t`Rebates Distribution History`} tooltipText={t`Rebates are airdropped weekly.`}>\n            <div className=\"table-wrapper\">\n              <table className=\"referral-table\">\n                <thead>\n                  <tr>\n                    <th className=\"table-head\" scope=\"col\">\n                      <Trans>Date</Trans>\n                    </th>\n                    <th className=\"table-head\" scope=\"col\">\n                      <Trans>Amount</Trans>\n                    </th>\n                    <th className=\"table-head\" scope=\"col\">\n                      <Trans>Transaction</Trans>\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {referralsData?.discountDistributions.map((rebate, index) => {\n                    let tokenInfo;\n                    try {\n                      tokenInfo = getToken(chainId, rebate.token);\n                    } catch {\n                      tokenInfo = getNativeToken(chainId);\n                    }\n                    const explorerURL = getExplorerUrl(chainId);\n                    return (\n                      <tr key={index}>\n                        <td data-label=\"Date\">{formatDate(rebate.timestamp)}</td>\n                        <td data-label=\"Amount\">\n                          {formatAmount(rebate.amount, tokenInfo.decimals, 6, true)} {tokenInfo.symbol}\n                        </td>\n                        <td data-label=\"Transaction\">\n                          <ExternalLink href={explorerURL + `tx/${rebate.transactionHash}`}>\n                            {shortenAddress(rebate.transactionHash, 20)}\n                          </ExternalLink>\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          </Card>\n        </div>\n      ) : (\n        <EmptyMessage\n          message={t`No rebates distribution history yet.`}\n          tooltipText={t`Rebates are airdropped weekly.`}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default TradersStats;\n","import \"./Referrals.css\";\nimport React from \"react\";\nimport { useLocalStorage } from \"react-use\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { useParams } from \"react-router-dom\";\nimport SEO from \"components/Common/SEO\";\nimport Tab from \"components/Tab/Tab\";\nimport Loader from \"components/Common/Loader\";\nimport Footer from \"components/Footer/Footer\";\nimport { getPageTitle, isHashZero } from \"lib/legacy\";\nimport {\n  useReferralsData,\n  registerReferralCode,\n  useCodeOwner,\n  useReferrerTier,\n  useUserReferralCode,\n} from \"domain/referrals\";\nimport JoinReferralCode from \"components/Referrals/JoinReferralCode\";\nimport AffiliatesStats from \"components/Referrals/AffiliatesStats\";\nimport TradersStats from \"components/Referrals/TradersStats\";\nimport AddAffiliateCode from \"components/Referrals/AddAffiliateCode\";\nimport { deserializeSampleStats, isRecentReferralCodeNotExpired } from \"components/Referrals/referralsHelper\";\nimport { ethers } from \"ethers\";\nimport { useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { REFERRALS_SELECTED_TAB_KEY } from \"config/localStorage\";\nimport { useChainId } from \"lib/chains\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nconst TRADERS = \"Traders\";\nconst AFFILIATES = \"Affiliates\";\nconst TAB_OPTIONS = [TRADERS, AFFILIATES];\n\nfunction Referrals({ connectWallet, setPendingTxns, pendingTxns }) {\n  const { active, account: walletAccount, library } = useWeb3React();\n  const { account: queryAccount } = useParams();\n  let account;\n  if (queryAccount && ethers.utils.isAddress(queryAccount)) {\n    account = ethers.utils.getAddress(queryAccount);\n  } else {\n    account = walletAccount;\n  }\n  const { chainId } = useChainId();\n  const [activeTab, setActiveTab] = useLocalStorage(REFERRALS_SELECTED_TAB_KEY, TRADERS);\n  const { data: referralsData, loading } = useReferralsData(chainId, account);\n  const [recentlyAddedCodes, setRecentlyAddedCodes] = useLocalStorageSerializeKey([chainId, \"REFERRAL\", account], [], {\n    deserializer: deserializeSampleStats,\n  });\n  const { userReferralCode, userReferralCodeString } = useUserReferralCode(library, chainId, account);\n  const { codeOwner } = useCodeOwner(library, chainId, account, userReferralCode);\n  const { referrerTier: traderTier } = useReferrerTier(library, chainId, codeOwner);\n\n  function handleCreateReferralCode(referralCode) {\n    return registerReferralCode(chainId, referralCode, library, {\n      sentMsg: t`Referral code submitted!`,\n      failMsg: t`Referral code creation failed.`,\n      pendingTxns,\n    });\n  }\n\n  function renderAffiliatesTab() {\n    const isReferralCodeAvailable =\n      referralsData?.codes?.length > 0 || recentlyAddedCodes?.filter(isRecentReferralCodeNotExpired).length > 0;\n    if (loading) return <Loader />;\n    if (isReferralCodeAvailable) {\n      return (\n        <AffiliatesStats\n          referralsData={referralsData}\n          handleCreateReferralCode={handleCreateReferralCode}\n          setRecentlyAddedCodes={setRecentlyAddedCodes}\n          recentlyAddedCodes={recentlyAddedCodes}\n          chainId={chainId}\n        />\n      );\n    } else {\n      return (\n        <AddAffiliateCode\n          handleCreateReferralCode={handleCreateReferralCode}\n          active={active}\n          connectWallet={connectWallet}\n          recentlyAddedCodes={recentlyAddedCodes}\n          setRecentlyAddedCodes={setRecentlyAddedCodes}\n        />\n      );\n    }\n  }\n\n  function renderTradersTab() {\n    if (loading) return <Loader />;\n    if (isHashZero(userReferralCode) || !account || !userReferralCode) {\n      return (\n        <JoinReferralCode\n          connectWallet={connectWallet}\n          active={active}\n          setPendingTxns={setPendingTxns}\n          pendingTxns={pendingTxns}\n        />\n      );\n    }\n    return (\n      <TradersStats\n        userReferralCodeString={userReferralCodeString}\n        chainId={chainId}\n        referralsData={referralsData}\n        setPendingTxns={setPendingTxns}\n        pendingTxns={pendingTxns}\n        traderTier={traderTier}\n      />\n    );\n  }\n  const TAB_OPTION_LABELS = { [TRADERS]: t`Traders`, [AFFILIATES]: t`Affiliates` };\n\n  return (\n    <SEO title={getPageTitle(\"Referrals\")}>\n      <div className=\"default-container page-layout Referrals\">\n        <div className=\"section-title-block\">\n          <div className=\"section-title-icon\" />\n          <div className=\"section-title-content\">\n            <div className=\"Page-title\">\n              <Trans>Referrals</Trans>\n            </div>\n            <div className=\"Page-description\">\n              <Trans>\n                Get fee discounts and earn rebates through the $AMX referral program. For more information, please read the{\" \"}\n                <ExternalLink href=\"https://amxdex.gitbook.io/amxdex/how-it-works/referrals\">referral program details</ExternalLink>.\n              </Trans>\n            </div>\n          </div>\n        </div>\n        <div className=\"referral-tab-container\">\n          <Tab\n            options={TAB_OPTIONS}\n            optionLabels={TAB_OPTION_LABELS}\n            option={activeTab}\n            setOption={setActiveTab}\n            onChange={setActiveTab}\n          />\n        </div>\n        {activeTab === AFFILIATES ? renderAffiliatesTab() : renderTradersTab()}\n        {/* <div className=\"Home-token-card-options\">\n            {renderTradersTab()}\n            {renderAffiliatesTab()}\n        </div> */}\n      </div>\n      <Footer />\n    </SEO>\n  );\n}\n\nexport default Referrals;\n","import React from \"react\";\nimport cx from \"classnames\";\nimport \"./BuyInputSection.css\";\nimport { Trans } from \"@lingui/macro\";\n\nexport default function BuyInputSection(props) {\n  const {\n    topLeftLabel,\n    topRightLabel,\n    onClickTopRightLabel,\n    inputValue,\n    onInputValueChange,\n    onClickMax,\n    showMaxButton,\n    staticInput,\n    balance,\n    tokenBalance,\n  } = props;\n\n  return (\n    <div className=\"Exchange-swap-section buy-input\">\n      <div className=\"Exchange-swap-section-top\">\n        <div className=\"muted\">\n          {topLeftLabel}: {balance}\n        </div>\n        <div className={cx(\"align-right\", { clickable: onClickTopRightLabel })} onClick={onClickTopRightLabel}>\n          <span className=\"Exchange-swap-label muted\">{topRightLabel}</span>&nbsp;\n          <span className=\"Exchange-swap-balance\">\n            {tokenBalance} {/*(selectedToken && selectedToken.symbol) || defaultTokenName*/}\n          </span>\n        </div>\n      </div>\n      <div className=\"Exchange-swap-section-bottom\">\n        <div className=\"Exchange-swap-input-container\">\n          {!staticInput && (\n            <input\n              type=\"number\"\n              min=\"0\"\n              placeholder=\"0.0\"\n              className=\"Exchange-swap-input\"\n              value={inputValue}\n              onChange={onInputValueChange}\n            />\n          )}\n          {staticInput && <div className=\"InputSection-static-input\">{inputValue}</div>}\n          {showMaxButton && (\n            <div className=\"Exchange-swap-max\" onClick={onClickMax}>\n              <Trans>MAX</Trans>\n            </div>\n          )}\n        </div>\n        <div className=\"PositionEditor-token-symbol\">{props.children}</div>\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { BigNumber } from \"ethers\";\nimport { ethers } from \"ethers\";\nimport Modal from \"../Modal/Modal\";\nimport { get1InchSwapUrl } from \"domain/common\";\nimport { getLowestFeeTokenForBuyGlp, InfoTokens, Token } from \"domain/tokens\";\nimport { getNativeToken } from \"config/tokens\";\nimport { t, Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nconst { AddressZero } = ethers.constants;\n\ntype Props = {\n  swapToken: Token;\n  isVisible: boolean;\n  setIsVisible: () => void;\n  chainId: number;\n  glpAmount: BigNumber;\n  usdgSupply: BigNumber;\n  totalTokenWeights: BigNumber;\n  glpPrice: BigNumber;\n  swapUsdMin: BigNumber;\n  infoTokens: InfoTokens;\n};\n\nexport default function SwapErrorModal({\n  swapToken,\n  isVisible,\n  setIsVisible,\n  chainId,\n  glpAmount,\n  usdgSupply,\n  totalTokenWeights,\n  glpPrice,\n  infoTokens,\n  swapUsdMin,\n}: Props) {\n  const [lowestFeeToken, setLowestFeeToken] = useState<\n    { token: Token; fees: number; amountLeftToDeposit: BigNumber } | undefined\n  >();\n  useEffect(() => {\n    const lowestFeeTokenInfo = getLowestFeeTokenForBuyGlp(\n      chainId,\n      glpAmount,\n      glpPrice,\n      usdgSupply,\n      totalTokenWeights,\n      infoTokens,\n      swapToken.address,\n      swapUsdMin\n    );\n    setLowestFeeToken(lowestFeeTokenInfo);\n  }, [chainId, glpAmount, glpPrice, usdgSupply, totalTokenWeights, infoTokens, swapUsdMin, swapToken.address]);\n\n  const label = t`${swapToken?.symbol} Capacity Reached`;\n\n  if (lowestFeeToken && swapUsdMin && swapUsdMin.gt(lowestFeeToken.amountLeftToDeposit)) {\n    return (\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={label} className=\"Error-modal\">\n        <p>\n          <Trans>\n            There is not enough liquidity in a single token for your size. Please check the Save on Fees section and\n            consider splitting your order into several different ones\n          </Trans>\n        </p>\n        <p>\n          <ExternalLink href={get1InchSwapUrl(chainId)}>\n            <Trans>Swap on 1inch</Trans>\n          </ExternalLink>\n        </p>\n      </Modal>\n    );\n  }\n\n  const nativeToken = getNativeToken(chainId);\n  const inputCurrency = swapToken.address === AddressZero ? nativeToken.symbol : swapToken.address;\n  const outputCurrency =\n    lowestFeeToken?.token.address === AddressZero ? nativeToken.symbol : lowestFeeToken?.token.address;\n  const oneInchUrl = get1InchSwapUrl(chainId, inputCurrency, outputCurrency);\n\n  return (\n    <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={label} className=\"Error-modal\">\n      <Trans>\n        <p>The pool's capacity has been reached for {swapToken.symbol}. Please use another token to buy $DLP.</p>\n        <p>Check the \"Save on Fees\" section for tokens with the lowest fees.</p>\n      </Trans>\n      <p>\n        <ExternalLink href={oneInchUrl}>\n          <Trans>\n            Swap {swapToken.symbol} to {lowestFeeToken?.token.symbol} on 1inch\n          </Trans>\n        </ExternalLink>\n      </p>\n    </Modal>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\nimport Tab from \"../Tab/Tab\";\nimport cx from \"classnames\";\nimport { getContract } from \"config/contracts\";\nimport {\n  getBuyGlpToAmount,\n  getBuyGlpFromAmount,\n  getSellGlpFromAmount,\n  getSellGlpToAmount,\n  adjustForDecimals,\n  GLP_DECIMALS,\n  USD_DECIMALS,\n  BASIS_POINTS_DIVISOR,\n  GLP_COOLDOWN_DURATION,\n  SECONDS_PER_YEAR,\n  USDG_DECIMALS,\n  PLACEHOLDER_ACCOUNT,\n  importImage,\n} from \"lib/legacy\";\n\nimport { useGmxPrice } from \"domain/legacy\";\n\nimport TokenSelector from \"../Exchange/TokenSelector\";\nimport BuyInputSection from \"../BuyInputSection/BuyInputSection\";\nimport Tooltip from \"../Tooltip/Tooltip\";\n\nimport ReaderV2 from \"abis/ReaderV2.json\";\nimport RewardReader from \"abis/RewardReader.json\";\nimport VaultV2 from \"abis/VaultV2.json\";\nimport GlpManager from \"abis/GlpManager.json\";\nimport RewardTracker from \"abis/RewardTracker.json\";\nimport Vester from \"abis/Vester.json\";\nimport RewardRouter from \"abis/RewardRouter.json\";\nimport Token from \"abis/Token.json\";\n\nimport glp24Icon from \"img/ic_glp_24.svg\";\nimport glp40Icon from \"img/ic_glp_40.svg\";\nimport arrowIcon from \"img/ic_convert_down.svg\";\n\nimport polygon16Icon from \"img/ic_polygon_16.svg\";\nimport arbitrum16Icon from \"img/ic_arbitrum_16.svg\";\n\nimport \"./GlpSwap.css\";\nimport AssetDropdown from \"pages/Dashboard/AssetDropdown\";\nimport SwapErrorModal from \"./SwapErrorModal\";\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\nimport { ARBITRUM, getChainName, IS_NETWORK_DISABLED } from \"config/chains\";\nimport { callContract, contractFetcher } from \"lib/contracts\";\nimport { approveTokens, useInfoTokens } from \"domain/tokens\";\nimport { useLocalStorageByChainId } from \"lib/localStorage\";\nimport { helperToast } from \"lib/helperToast\";\nimport { getTokenInfo, getUsd } from \"domain/tokens/utils\";\nimport { bigNumberify, expandDecimals, formatAmount, formatAmountFree, formatKeyAmount, parseValue } from \"lib/numbers\";\nimport { getNativeToken, getToken, getTokens, getWhitelistedTokens, getWrappedToken } from \"config/tokens\";\nimport { useChainId } from \"lib/chains\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nconst { AddressZero } = ethers.constants;\n\nfunction getStakingData(stakingInfo) {\n  if (!stakingInfo || stakingInfo.length === 0) {\n    return;\n  }\n\n  const keys = [\"stakedGlpTracker\", \"feeGlpTracker\"];\n  const data = {};\n  const propsLength = 5;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = {\n      claimable: stakingInfo[i * propsLength],\n      tokensPerInterval: stakingInfo[i * propsLength + 1],\n      averageStakedAmounts: stakingInfo[i * propsLength + 2],\n      cumulativeRewards: stakingInfo[i * propsLength + 3],\n      totalSupply: stakingInfo[i * propsLength + 4],\n    };\n  }\n\n  return data;\n}\n\nfunction getTooltipContent(managedUsd, tokenInfo, token) {\n  return (\n    <>\n      <StatsTooltipRow\n        label={t`Current Pool Amount`}\n        value={[\n          `$${formatAmount(managedUsd, USD_DECIMALS, 0, true)}`,\n          `(${formatKeyAmount(tokenInfo, \"poolAmount\", token.decimals, 0, true)} ${token.symbol})`,\n        ]}\n      />\n      <StatsTooltipRow label={t`Max Pool Capacity`} value={formatAmount(tokenInfo.maxUsdgAmount, 18, 0, true)} />\n    </>\n  );\n}\n\nexport default function GlpSwap(props) {\n  const {\n    savedSlippageAmount,\n    isBuying,\n    setPendingTxns,\n    connectWallet,\n    setIsBuying,\n    savedShouldDisableValidationForTesting,\n  } = props;\n  const history = useHistory();\n  const swapLabel = isBuying ? \"BuyGlp\" : \"SellGlp\";\n  const tabLabel = isBuying ? t`Buy $DLP` : t`Sell $DLP`;\n  const { active, library, account } = useWeb3React();\n  const { chainId } = useChainId();\n  // const chainName = getChainName(chainId)\n  const tokens = getTokens(chainId);\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const tokenList = whitelistedTokens.filter((t) => !t.isWrapped);\n  const visibleTokens = tokenList.filter((t) => !t.isTempHidden);\n  const [swapValue, setSwapValue] = useState(\"\");\n  const [glpValue, setGlpValue] = useState(\"\");\n  const [swapTokenAddress, setSwapTokenAddress] = useLocalStorageByChainId(\n    chainId,\n    `${swapLabel}-swap-token-address`,\n    AddressZero\n  );\n  const [isApproving, setIsApproving] = useState(false);\n  const [isWaitingForApproval, setIsWaitingForApproval] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [anchorOnSwapAmount, setAnchorOnSwapAmount] = useState(true);\n  const [feeBasisPoints, setFeeBasisPoints] = useState(\"\");\n  const [modalError, setModalError] = useState(false);\n\n  const readerAddress = getContract(chainId, \"Reader\");\n  const rewardReaderAddress = getContract(chainId, \"RewardReader\");\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const stakedGlpTrackerAddress = getContract(chainId, \"StakedGlpTracker\");\n  const feeGlpTrackerAddress = getContract(chainId, \"FeeGlpTracker\");\n  const usdgAddress = getContract(chainId, \"USDG\");\n  const glpManagerAddress = getContract(chainId, \"GlpManager\");\n  const rewardRouterAddress = getContract(chainId, \"RewardRouter\");\n  const tokensForBalanceAndSupplyQuery = [stakedGlpTrackerAddress, usdgAddress];\n  console.log(\"---shark tokensForBalanceAndSupplyQuery: \", tokensForBalanceAndSupplyQuery);\n\n  const tokenAddresses = tokens.map((token) => token.address);\n  const { data: tokenBalances } = useSWR(\n    [`GlpSwap:getTokenBalances:${active}`, chainId, readerAddress, \"getTokenBalances\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(library, ReaderV2, [tokenAddresses]),\n    }\n  );\n\n  const { data: balancesAndSupplies } = useSWR(\n    [\n      `GlpSwap:getTokenBalancesWithSupplies:${active}`,\n      chainId,\n      readerAddress,\n      \"getTokenBalancesWithSupplies\",\n      account || PLACEHOLDER_ACCOUNT,\n    ],\n    {\n      fetcher: contractFetcher(library, ReaderV2, [tokensForBalanceAndSupplyQuery]),\n    }\n  );\n\n  console.log(\"---shark balancesAndSupplies: \", balancesAndSupplies);\n\n  const { data: aums } = useSWR([`GlpSwap:getAums:${active}`, chainId, glpManagerAddress, \"getAums\"], {\n    fetcher: contractFetcher(library, GlpManager),\n  });\n\n  const { data: totalTokenWeights } = useSWR(\n    [`GlpSwap:totalTokenWeights:${active}`, chainId, vaultAddress, \"totalTokenWeights\"],\n    {\n      fetcher: contractFetcher(library, VaultV2),\n    }\n  );\n\n  const tokenAllowanceAddress = swapTokenAddress === AddressZero ? nativeTokenAddress : swapTokenAddress;\n  const { data: tokenAllowance } = useSWR(\n    [active, chainId, tokenAllowanceAddress, \"allowance\", account || PLACEHOLDER_ACCOUNT, glpManagerAddress],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  const { data: lastPurchaseTime } = useSWR(\n    [`GlpSwap:lastPurchaseTime:${active}`, chainId, glpManagerAddress, \"lastAddedAt\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(library, GlpManager),\n    }\n  );\n\n  const { data: glpBalance } = useSWR(\n    [`GlpSwap:glpBalance:${active}`, chainId, feeGlpTrackerAddress, \"stakedAmounts\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(library, RewardTracker),\n    }\n  );\n\n  const glpVesterAddress = getContract(chainId, \"GlpVester\");\n  const { data: reservedAmount } = useSWR(\n    [`GlpSwap:reservedAmount:${active}`, chainId, glpVesterAddress, \"pairAmounts\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(library, Vester),\n    }\n  );\n\n  const { gmxPrice } = useGmxPrice(chainId, { arbitrum: chainId === ARBITRUM ? library : undefined }, active);\n\n  const rewardTrackersForStakingInfo = [stakedGlpTrackerAddress, feeGlpTrackerAddress];\n  const { data: stakingInfo } = useSWR(\n    [`GlpSwap:stakingInfo:${active}`, chainId, rewardReaderAddress, \"getStakingInfo\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(library, RewardReader, [rewardTrackersForStakingInfo]),\n    }\n  );\n\n  const stakingData = getStakingData(stakingInfo);\n\n  const redemptionTime = lastPurchaseTime ? lastPurchaseTime.add(GLP_COOLDOWN_DURATION) : undefined;\n  console.log(\"---shark redemptionTime:\", redemptionTime);\n  const inCooldownWindow = redemptionTime && parseInt(Date.now() / 1000) < redemptionTime;\n\n  const glpSupply = balancesAndSupplies ? balancesAndSupplies[1] : bigNumberify(0);\n  const usdgSupply = balancesAndSupplies ? balancesAndSupplies[3] : bigNumberify(0);\n  let aum;\n  if (aums && aums.length > 0) {\n    aum = isBuying ? aums[0] : aums[1];\n  }\n  const glpPrice =\n    aum && aum.gt(0) && glpSupply.gt(0)\n      ? aum.mul(expandDecimals(1, GLP_DECIMALS)).div(glpSupply)\n      : expandDecimals(1, USD_DECIMALS);\n  let glpBalanceUsd;\n  if (glpBalance) {\n    glpBalanceUsd = glpBalance.mul(glpPrice).div(expandDecimals(1, GLP_DECIMALS));\n  }\n  const glpSupplyUsd = glpSupply.mul(glpPrice).div(expandDecimals(1, GLP_DECIMALS));\n\n  let reserveAmountUsd;\n  if (reservedAmount) {\n    reserveAmountUsd = reservedAmount.mul(glpPrice).div(expandDecimals(1, GLP_DECIMALS));\n  }\n\n  let maxSellAmount = glpBalance;\n  if (glpBalance && reservedAmount) {\n    maxSellAmount = glpBalance.sub(reservedAmount);\n  }\n\n  const { infoTokens } = useInfoTokens(library, chainId, active, tokenBalances, undefined);\n  const swapToken = getToken(chainId, swapTokenAddress);\n  const swapTokenInfo = getTokenInfo(infoTokens, swapTokenAddress);\n\n  const swapTokenBalance = swapTokenInfo && swapTokenInfo.balance ? swapTokenInfo.balance : bigNumberify(0);\n\n  const swapAmount = parseValue(swapValue, swapToken && swapToken.decimals);\n  const glpAmount = parseValue(glpValue, GLP_DECIMALS);\n\n  const needApproval =\n    isBuying && swapTokenAddress !== AddressZero && tokenAllowance && swapAmount && swapAmount.gt(tokenAllowance);\n\n  const swapUsdMin = getUsd(swapAmount, swapTokenAddress, false, infoTokens);\n  const glpUsdMax = glpAmount && glpPrice ? glpAmount.mul(glpPrice).div(expandDecimals(1, GLP_DECIMALS)) : undefined;\n\n  let isSwapTokenCapReached;\n  if (swapTokenInfo.managedUsd && swapTokenInfo.maxUsdgAmount) {\n    isSwapTokenCapReached = swapTokenInfo.managedUsd.gt(\n      adjustForDecimals(swapTokenInfo.maxUsdgAmount, USDG_DECIMALS, USD_DECIMALS)\n    );\n  }\n\n  const onSwapValueChange = (e) => {\n    setAnchorOnSwapAmount(true);\n    setSwapValue(e.target.value);\n  };\n\n  const onGlpValueChange = (e) => {\n    setAnchorOnSwapAmount(false);\n    setGlpValue(e.target.value);\n  };\n\n  const onSelectSwapToken = (token) => {\n    setSwapTokenAddress(token.address);\n    setIsWaitingForApproval(false);\n  };\n\n  const nativeToken = getTokenInfo(infoTokens, AddressZero);\n\n  let totalApr = bigNumberify(0);\n\n  let feeGlpTrackerAnnualRewardsUsd;\n  let feeGlpTrackerApr;\n  if (\n    stakingData &&\n    stakingData.feeGlpTracker &&\n    stakingData.feeGlpTracker.tokensPerInterval &&\n    nativeToken &&\n    nativeToken.minPrice &&\n    glpSupplyUsd &&\n    glpSupplyUsd.gt(0)\n  ) {\n    feeGlpTrackerAnnualRewardsUsd = stakingData.feeGlpTracker.tokensPerInterval\n      .mul(SECONDS_PER_YEAR)\n      .mul(nativeToken.minPrice)\n      .div(expandDecimals(1, 18));\n    feeGlpTrackerApr = feeGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(glpSupplyUsd);\n    totalApr = totalApr.add(feeGlpTrackerApr);\n  }\n\n  let stakedGlpTrackerAnnualRewardsUsd;\n  let stakedGlpTrackerApr;\n\n  if (\n    gmxPrice &&\n    stakingData &&\n    stakingData.stakedGlpTracker &&\n    stakingData.stakedGlpTracker.tokensPerInterval &&\n    glpSupplyUsd &&\n    glpSupplyUsd.gt(0)\n  ) {\n    stakedGlpTrackerAnnualRewardsUsd = stakingData.stakedGlpTracker.tokensPerInterval\n      .mul(SECONDS_PER_YEAR)\n      .mul(gmxPrice)\n      .div(expandDecimals(1, 18));\n    stakedGlpTrackerApr = stakedGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(glpSupplyUsd);\n    totalApr = totalApr.add(stakedGlpTrackerApr);\n  }\n\n  useEffect(() => {\n    const updateSwapAmounts = () => {\n      if (anchorOnSwapAmount) {\n        if (!swapAmount) {\n          setGlpValue(\"\");\n          setFeeBasisPoints(\"\");\n          return;\n        }\n        console.log(\"---shark swapAmount, swapTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights\", swapAmount, swapTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights);\n        if (isBuying) {\n          const { amount: nextAmount, feeBasisPoints: feeBps } = getBuyGlpToAmount(\n            swapAmount,\n            swapTokenAddress,\n            infoTokens,\n            glpPrice,\n            usdgSupply,\n            totalTokenWeights\n          );\n          const nextValue = formatAmountFree(nextAmount, GLP_DECIMALS, GLP_DECIMALS);\n          setGlpValue(nextValue);\n          setFeeBasisPoints(feeBps);\n        } else {\n          const { amount: nextAmount, feeBasisPoints: feeBps } = getSellGlpFromAmount(\n            swapAmount,\n            swapTokenAddress,\n            infoTokens,\n            glpPrice,\n            usdgSupply,\n            totalTokenWeights\n          );\n          const nextValue = formatAmountFree(nextAmount, GLP_DECIMALS, GLP_DECIMALS);\n          setGlpValue(nextValue);\n          setFeeBasisPoints(feeBps);\n        }\n\n        return;\n      }\n\n      if (!glpAmount) {\n        setSwapValue(\"\");\n        setFeeBasisPoints(\"\");\n        return;\n      }\n\n      if (swapToken) {\n        if (isBuying) {\n          const { amount: nextAmount, feeBasisPoints: feeBps } = getBuyGlpFromAmount(\n            glpAmount,\n            swapTokenAddress,\n            infoTokens,\n            glpPrice,\n            usdgSupply,\n            totalTokenWeights\n          );\n          const nextValue = formatAmountFree(nextAmount, swapToken.decimals, swapToken.decimals);\n          setSwapValue(nextValue);\n          setFeeBasisPoints(feeBps);\n        } else {\n          const { amount: nextAmount, feeBasisPoints: feeBps } = getSellGlpToAmount(\n            glpAmount,\n            swapTokenAddress,\n            infoTokens,\n            glpPrice,\n            usdgSupply,\n            totalTokenWeights,\n            true\n          );\n\n          const nextValue = formatAmountFree(nextAmount, swapToken.decimals, swapToken.decimals);\n          setSwapValue(nextValue);\n          setFeeBasisPoints(feeBps);\n        }\n      }\n    };\n\n    updateSwapAmounts();\n  }, [\n    isBuying,\n    anchorOnSwapAmount,\n    swapAmount,\n    glpAmount,\n    swapToken,\n    swapTokenAddress,\n    infoTokens,\n    glpPrice,\n    usdgSupply,\n    totalTokenWeights,\n  ]);\n\n  const switchSwapOption = (hash = \"\") => {\n    history.push(`${history.location.pathname}#${hash}`);\n    props.setIsBuying(hash === \"redeem\" ? false : true);\n  };\n\n  const fillMaxAmount = () => {\n    if (isBuying) {\n      setAnchorOnSwapAmount(true);\n      setSwapValue(formatAmountFree(swapTokenBalance, swapToken.decimals, swapToken.decimals));\n      return;\n    }\n\n    setAnchorOnSwapAmount(false);\n    setGlpValue(formatAmountFree(maxSellAmount, GLP_DECIMALS, GLP_DECIMALS));\n  };\n\n  const getError = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      if (isBuying) return [t`$DLP buy disabled, pending ${getChainName(chainId)} upgrade`];\n      return [t`$DLP sell disabled, pending ${getChainName(chainId)} upgrade`];\n    }\n\n    if (!isBuying && inCooldownWindow) {\n      return [t`Redemption time not yet reached`];\n    }\n\n    if (!swapAmount || swapAmount.eq(0)) {\n      return [t`Enter an amount`];\n    }\n    if (!glpAmount || glpAmount.eq(0)) {\n      return [t`Enter an amount`];\n    }\n\n    if (isBuying) {\n      const swapTokenInfo = getTokenInfo(infoTokens, swapTokenAddress);\n      if (\n        !savedShouldDisableValidationForTesting &&\n        swapTokenInfo &&\n        swapTokenInfo.balance &&\n        swapAmount &&\n        swapAmount.gt(swapTokenInfo.balance)\n      ) {\n        return [t`Insufficient ${swapTokenInfo.symbol} balance`];\n      }\n\n      if (swapTokenInfo.maxUsdgAmount && swapTokenInfo.usdgAmount && swapUsdMin) {\n        const usdgFromAmount = adjustForDecimals(swapUsdMin, USD_DECIMALS, USDG_DECIMALS);\n        const nextUsdgAmount = swapTokenInfo.usdgAmount.add(usdgFromAmount);\n        if (swapTokenInfo.maxUsdgAmount.gt(0) && nextUsdgAmount.gt(swapTokenInfo.maxUsdgAmount)) {\n          return [t`${swapTokenInfo.symbol} pool exceeded, try different token`, true];\n        }\n      }\n    }\n\n    if (!isBuying) {\n      if (maxSellAmount && glpAmount && glpAmount.gt(maxSellAmount)) {\n        return [t`Insufficient $DLP balance`];\n      }\n\n      const swapTokenInfo = getTokenInfo(infoTokens, swapTokenAddress);\n      if (\n        swapTokenInfo &&\n        swapTokenInfo.availableAmount &&\n        swapAmount &&\n        swapAmount.gt(swapTokenInfo.availableAmount)\n      ) {\n        return [t`Insufficient liquidity`];\n      }\n    }\n\n    return [false];\n  };\n\n  const isPrimaryEnabled = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      return false;\n    }\n    if (!active) {\n      return true;\n    }\n    const [error, modal] = getError();\n    if (error && !modal) {\n      return false;\n    }\n    if ((needApproval && isWaitingForApproval) || isApproving) {\n      return false;\n    }\n    if (isApproving) {\n      return false;\n    }\n    if (isSubmitting) {\n      return false;\n    }\n    if (isBuying && isSwapTokenCapReached) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    if (!active) {\n      return t`Connect Wallet`;\n    }\n    const [error, modal] = getError();\n    if (error && !modal) {\n      return error;\n    }\n    if (isBuying && isSwapTokenCapReached) {\n      return t`Max Capacity for ${swapToken.symbol} Reached`;\n    }\n\n    if (needApproval && isWaitingForApproval) {\n      return t`Waiting for Approval`;\n    }\n    if (isApproving) {\n      return t`Approving ${swapToken.symbol}...`;\n    }\n    if (needApproval) {\n      return t`Approve ${swapToken.symbol}`;\n    }\n\n    if (isSubmitting) {\n      return isBuying ? t`Buying...` : t`Selling...`;\n    }\n\n    return isBuying ? t`Buy $DLP` : t`Sell $DLP`;\n  };\n\n  const approveFromToken = () => {\n    approveTokens({\n      setIsApproving,\n      library,\n      tokenAddress: swapToken.address,\n      spender: glpManagerAddress,\n      chainId: chainId,\n      onApproveSubmitted: () => {\n        setIsWaitingForApproval(true);\n      },\n      infoTokens,\n      getTokenInfo,\n    });\n  };\n\n  const buyGlp = () => {\n    setIsSubmitting(true);\n\n    const minGlp = glpAmount.mul(BASIS_POINTS_DIVISOR - savedSlippageAmount).div(BASIS_POINTS_DIVISOR);\n\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n    const method = swapTokenAddress === AddressZero ? \"mintAndStakeGlpETH\" : \"mintAndStakeGlp\";\n    const params = swapTokenAddress === AddressZero ? [0, minGlp] : [swapTokenAddress, swapAmount, 0, minGlp];\n    const value = swapTokenAddress === AddressZero ? swapAmount : 0;\n\n    callContract(chainId, contract, method, params, {\n      value,\n      sentMsg: t`Buy submitted.`,\n      failMsg: t`Buy failed.`,\n      successMsg: t`${formatAmount(glpAmount, 18, 4, true)} $DLP bought with ${formatAmount(\n        swapAmount,\n        swapTokenInfo.decimals,\n        4,\n        true\n      )} ${swapTokenInfo.symbol}!`,\n      setPendingTxns,\n    })\n      .then(async () => {})\n      .finally(() => {\n        setIsSubmitting(false);\n      });\n  };\n\n  const sellGlp = () => {\n    setIsSubmitting(true);\n    console.log(\"--shark sellGlp\");\n    const minOut = swapAmount.mul(BASIS_POINTS_DIVISOR - savedSlippageAmount).div(BASIS_POINTS_DIVISOR);\n\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n    const method = swapTokenAddress === AddressZero ? \"unstakeAndRedeemGlpETH\" : \"unstakeAndRedeemGlp\";\n    const params =\n      swapTokenAddress === AddressZero ? [glpAmount, minOut, account] : [swapTokenAddress, glpAmount, minOut, account];\n\n    callContract(chainId, contract, method, params, {\n      sentMsg: t`Sell submitted!`,\n      failMsg: t`Sell failed.`,\n      successMsg: t`${formatAmount(glpAmount, 18, 4, true)} $DLP sold for ${formatAmount(\n        swapAmount,\n        swapTokenInfo.decimals,\n        4,\n        true\n      )} ${swapTokenInfo.symbol}!`,\n      setPendingTxns,\n    })\n      .then(async () => {})\n      .finally(() => {\n        setIsSubmitting(false);\n      });\n  };\n\n  const onClickPrimary = () => {\n    if (!active) {\n      connectWallet();\n      return;\n    }\n\n    if (needApproval) {\n      approveFromToken();\n      return;\n    }\n\n    const [, modal] = getError();\n\n    if (modal) {\n      setModalError(true);\n      return;\n    }\n\n    if (isBuying) {\n      buyGlp();\n    } else {\n      sellGlp();\n    }\n  };\n\n  let payLabel = t`Pay`;\n  let receiveLabel = t`Receive`;\n  let payBalance = \"$0.00\";\n  let receiveBalance = \"$0.00\";\n  if (isBuying) {\n    if (swapUsdMin) {\n      payBalance = `$${formatAmount(swapUsdMin, USD_DECIMALS, 2, true)}`;\n    }\n    if (glpUsdMax) {\n      receiveBalance = `$${formatAmount(glpUsdMax, USD_DECIMALS, 2, true)}`;\n    }\n  } else {\n    if (glpUsdMax) {\n      payBalance = `$${formatAmount(glpUsdMax, USD_DECIMALS, 2, true)}`;\n    }\n    if (swapUsdMin) {\n      receiveBalance = `$${formatAmount(swapUsdMin, USD_DECIMALS, 2, true)}`;\n    }\n  }\n\n  const selectToken = (token) => {\n    setAnchorOnSwapAmount(false);\n    setSwapTokenAddress(token.address);\n    helperToast.success(t`${token.symbol} selected in order form`);\n  };\n\n  let feePercentageText = formatAmount(feeBasisPoints, 2, 2, true, \"-\");\n  if (feeBasisPoints !== undefined && feeBasisPoints.toString().length > 0) {\n    feePercentageText += \"%\";\n  }\n\n  const wrappedTokenSymbol = getWrappedToken(chainId).symbol;\n  const nativeTokenSymbol = getNativeToken(chainId).symbol;\n\n  const onSwapOptionChange = (opt) => {\n    if (opt === t`Sell $DLP`) {\n      switchSwapOption(\"redeem\");\n    } else {\n      switchSwapOption();\n    }\n  };\n\n  return (\n    <div className=\"GlpSwap\">\n      <SwapErrorModal\n        isVisible={Boolean(modalError)}\n        setIsVisible={setModalError}\n        swapToken={swapToken}\n        chainId={chainId}\n        glpAmount={glpAmount}\n        usdgSupply={usdgSupply}\n        totalTokenWeights={totalTokenWeights}\n        glpPrice={glpPrice}\n        infoTokens={infoTokens}\n        swapUsdMin={swapUsdMin}\n      />\n      {/* <div className=\"Page-title-section\">\n        <div className=\"Page-title\">{isBuying ? \"Buy $DLP\" : \"Sell $DLP\"}</div>\n        {isBuying && <div className=\"Page-description\">\n          Purchase <a href=\"https://amxdex.gitbook.io/amxdex/\" target=\"_blank\" rel=\"noopener noreferrer\">GLP tokens</a> to earn {nativeTokenSymbol} fees from swaps and leverage trading.<br/>\n          Note that there is a minimum holding time of 15 minutes after a purchase.<br/>\n          <div>View <Link to=\"/earn\">staking</Link> page.</div>\n        </div>}\n        {!isBuying && <div className=\"Page-description\">\n          Redeem your $DLP tokens for any supported asset.\n          {inCooldownWindow && <div>\n            $DLP tokens can only be redeemed 15 minutes after your most recent purchase.<br/>\n            Your last purchase was at {formatDateTime(lastPurchaseTime)}, you can redeem $DLP tokens after {formatDateTime(redemptionTime)}.<br/>\n          </div>}\n          <div>View <Link to=\"/earn\">staking</Link> page.</div>\n        </div>}\n      </div> */}\n      <div className=\"GlpSwap-content\">\n        <div className=\"App-card GlpSwap-stats-card\">\n          <div className=\"App-card-title\">\n            <div className=\"App-card-title-mark\">\n              <div className=\"App-card-title-mark-icon\">\n                <img src={glp40Icon} alt=\"glp40Icon\" />\n                {chainId === ARBITRUM ? (\n                  <img src={arbitrum16Icon} alt=\"arbitrum16Icon\" className=\"selected-network-symbol\" />\n                ) : (\n                  <img src={polygon16Icon} alt=\"polygon16Icon\" className=\"selected-network-symbol\" />\n                )}\n              </div>\n              <div className=\"App-card-title-mark-info\">\n                <div className=\"App-card-title-mark-title\">$DLP</div>\n                <div className=\"App-card-title-mark-subtitle\">$DLP</div>\n              </div>\n              <div>\n                <AssetDropdown assetSymbol=\"GLP\" />\n              </div>\n            </div>\n          </div>\n          <div className=\"App-card-divider\" />\n          <div className=\"App-card-content\">\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Price</Trans>\n              </div>\n              <div className=\"value\">${formatAmount(glpPrice, USD_DECIMALS, 3, true)}</div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Wallet</Trans>\n              </div>\n              <div className=\"value\">\n                {formatAmount(glpBalance, GLP_DECIMALS, 4, true)} $DLP ($\n                {formatAmount(glpBalanceUsd, USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Staked</Trans>\n              </div>\n              <div className=\"value\">\n                {formatAmount(glpBalance, GLP_DECIMALS, 4, true)} $DLP ($\n                {formatAmount(glpBalanceUsd, USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n          </div>\n          <div className=\"App-card-divider\" />\n          <div className=\"App-card-content\">\n            {!isBuying && (\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Reserved</Trans>\n                </div>\n                <div className=\"value\">\n                  <Tooltip\n                    handle={`${formatAmount(reservedAmount, 18, 4, true)} $DLP ($${formatAmount(\n                      reserveAmountUsd,\n                      USD_DECIMALS,\n                      2,\n                      true\n                    )})`}\n                    position=\"right-bottom\"\n                    renderContent={() =>\n                      t`${formatAmount(reservedAmount, 18, 4, true)} $DLP have been reserved for vesting.`\n                    }\n                  />\n                </div>\n              </div>\n            )}\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>APR</Trans>\n              </div>\n              <div className=\"value\">\n                <Tooltip\n                  handle={`${formatAmount(totalApr, 2, 2, true)}%`}\n                  position=\"right-bottom\"\n                  renderContent={() => {\n                    return (\n                      <>\n                        <StatsTooltipRow\n                          label={t`${nativeTokenSymbol} (${wrappedTokenSymbol}) APR`}\n                          value={`${formatAmount(feeGlpTrackerApr, 2, 2, false)}%`}\n                          showDollar={false}\n                        />\n                        <StatsTooltipRow\n                          label={t`Escrowed $AMX APR`}\n                          value={`${formatAmount(stakedGlpTrackerApr, 2, 2, false)}%`}\n                          showDollar={false}\n                        />\n                      </>\n                    );\n                  }}\n                />\n              </div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Total Supply</Trans>\n              </div>\n              <div className=\"value\">\n                <Trans>\n                  {formatAmount(glpSupply, GLP_DECIMALS, 4, true)} $DLP ($\n                  {formatAmount(glpSupplyUsd, USD_DECIMALS, 2, true)})\n                </Trans>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"GlpSwap-box App-box\">\n          <Tab\n            options={[t`Buy $DLP`, t`Sell $DLP`]}\n            option={tabLabel}\n            onChange={onSwapOptionChange}\n            className=\"Exchange-swap-option-tabs\"\n          />\n          {isBuying && (\n            <BuyInputSection\n              topLeftLabel={payLabel}\n              topRightLabel={t`Balance:`}\n              tokenBalance={`${formatAmount(swapTokenBalance, swapToken.decimals, 4, true)}`}\n              inputValue={swapValue}\n              onInputValueChange={onSwapValueChange}\n              showMaxButton={swapValue !== formatAmountFree(swapTokenBalance, swapToken.decimals, swapToken.decimals)}\n              onClickTopRightLabel={fillMaxAmount}\n              onClickMax={fillMaxAmount}\n              selectedToken={swapToken}\n              balance={payBalance}\n            >\n              <TokenSelector\n                label={t`Pay`}\n                chainId={chainId}\n                tokenAddress={swapTokenAddress}\n                onSelectToken={onSelectSwapToken}\n                tokens={whitelistedTokens}\n                infoTokens={infoTokens}\n                className=\"GlpSwap-from-token\"\n                showSymbolImage={true}\n                showTokenImgInDropdown={true}\n              />\n            </BuyInputSection>\n          )}\n\n          {!isBuying && (\n            <BuyInputSection\n              topLeftLabel={payLabel}\n              topRightLabel={t`Available:`}\n              tokenBalance={`${formatAmount(maxSellAmount, GLP_DECIMALS, 4, true)}`}\n              inputValue={glpValue}\n              onInputValueChange={onGlpValueChange}\n              showMaxButton={glpValue !== formatAmountFree(maxSellAmount, GLP_DECIMALS, GLP_DECIMALS)}\n              onClickTopRightLabel={fillMaxAmount}\n              onClickMax={fillMaxAmount}\n              balance={payBalance}\n              defaultTokenName={\"GLP\"}\n            >\n              <div className=\"selected-token\">\n                $DLP <img src={glp24Icon} alt=\"glp24Icon\" />\n              </div>\n            </BuyInputSection>\n          )}\n\n          <div className=\"AppOrder-ball-container\">\n            <div className=\"AppOrder-ball\">\n              <img\n                src={arrowIcon}\n                alt=\"arrowIcon\"\n                onClick={() => {\n                  setIsBuying(!isBuying);\n                  switchSwapOption(isBuying ? \"redeem\" : \"\");\n                }}\n              />\n            </div>\n          </div>\n\n          {isBuying && (\n            <BuyInputSection\n              topLeftLabel={receiveLabel}\n              topRightLabel={t`Balance:`}\n              tokenBalance={`${formatAmount(glpBalance, GLP_DECIMALS, 4, true)}`}\n              inputValue={glpValue}\n              onInputValueChange={onGlpValueChange}\n              balance={receiveBalance}\n              defaultTokenName={\"GLP\"}\n            >\n              <div className=\"selected-token\">\n              $DLP <img src={glp24Icon} alt=\"glp24Icon\" />\n              </div>\n            </BuyInputSection>\n          )}\n\n          {!isBuying && (\n            <BuyInputSection\n              topLeftLabel={receiveLabel}\n              topRightLabel={t`Balance:`}\n              tokenBalance={`${formatAmount(swapTokenBalance, swapToken.decimals, 4, true)}`}\n              inputValue={swapValue}\n              onInputValueChange={onSwapValueChange}\n              balance={receiveBalance}\n              selectedToken={swapToken}\n            >\n              <TokenSelector\n                label={t`Receive`}\n                chainId={chainId}\n                tokenAddress={swapTokenAddress}\n                onSelectToken={onSelectSwapToken}\n                tokens={whitelistedTokens}\n                infoTokens={infoTokens}\n                className=\"GlpSwap-from-token\"\n                showSymbolImage={true}\n                showTokenImgInDropdown={true}\n              />\n            </BuyInputSection>\n          )}\n\n          <div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">{feeBasisPoints > 50 ? t`WARNING: High Fees` : t`Fees`}</div>\n              <div className=\"align-right fee-block\">\n                {isBuying && (\n                  <Tooltip\n                    handle={isBuying && isSwapTokenCapReached ? \"NA\" : feePercentageText}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      if (!feeBasisPoints) {\n                        return (\n                          <div className=\"text-white\">\n                            <Trans>Fees will be shown once you have entered an amount in the order form.</Trans>\n                          </div>\n                        );\n                      }\n                      return (\n                        <div className=\"text-white\">\n                          {feeBasisPoints > 50 && <Trans>To reduce fees, select a different asset to pay with.</Trans>}\n                          <Trans>Check the \"Save on Fees\" section below to get the lowest fee percentages.</Trans>\n                        </div>\n                      );\n                    }}\n                  />\n                )}\n                {!isBuying && (\n                  <Tooltip\n                    handle={feePercentageText}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      if (!feeBasisPoints) {\n                        return (\n                          <div className=\"text-white\">\n                            <Trans>Fees will be shown once you have entered an amount in the order form.</Trans>\n                          </div>\n                        );\n                      }\n                      return (\n                        <div className=\"text-white\">\n                          {feeBasisPoints > 50 && <Trans>To reduce fees, select a different asset to receive.</Trans>}\n                          <Trans>Check the \"Save on Fees\" section below to get the lowest fee percentages.</Trans>\n                        </div>\n                      );\n                    }}\n                  />\n                )}\n              </div>\n            </div>\n          </div>\n          <div className=\"GlpSwap-cta Exchange-swap-button-container\">\n            <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n              {getPrimaryText()}\n            </button>\n          </div>\n        </div>\n      </div>\n      <div className=\"Tab-title-section\">\n        <div className=\"Page-title\">\n          <Trans>Save on Fees</Trans>\n        </div>\n        {isBuying && (\n          <div className=\"Page-description\">\n            <Trans>\n              Fees may vary depending on which asset you use to buy $DLP. <br />\n              Enter the amount of $DLP you want to purchase in the order form, then check here to compare fees.\n            </Trans>\n          </div>\n        )}\n        {!isBuying && (\n          <div className=\"Page-description\">\n            <Trans>\n              Fees may vary depending on which asset you sell $DLP for. <br />\n              Enter the amount of $DLP you want to redeem in the order form, then check here to compare fees.\n            </Trans>\n          </div>\n        )}\n      </div>\n      <div className=\"GlpSwap-token-list\">\n        {/* <div className=\"GlpSwap-token-list-content\"> */}\n        <table className=\"token-table\">\n          <thead>\n            <tr>\n              <th>\n                <Trans>TOKEN</Trans>\n              </th>\n              <th>\n                <Trans>PRICE</Trans>\n              </th>\n              <th>\n                {isBuying ? (\n                  <Tooltip\n                    handle={t`AVAILABLE`}\n                    tooltipIconPosition=\"right\"\n                    position=\"right-bottom text-none\"\n                    renderContent={() => (\n                      <p className=\"text-white\">\n                        <Trans>Available amount to deposit into $DLP.</Trans>\n                      </p>\n                    )}\n                  />\n                ) : (\n                  <Tooltip\n                    handle={t`AVAILABLE`}\n                    tooltipIconPosition=\"right\"\n                    position=\"center-bottom text-none\"\n                    renderContent={() => {\n                      return (\n                        <p className=\"text-white\">\n                          <Trans>\n                            Available amount to withdraw from $DLP. Funds not utilized by current open positions.\n                          </Trans>\n                        </p>\n                      );\n                    }}\n                  />\n                )}\n              </th>\n              <th>\n                <Trans>WALLET</Trans>\n              </th>\n              <th>\n                <Tooltip\n                  handle={t`FEES`}\n                  tooltipIconPosition=\"right\"\n                  position=\"right-bottom text-none\"\n                  renderContent={() => {\n                    return (\n                      <div className=\"text-white\">\n                        <Trans>Fees will be shown once you have entered an amount in the order form.</Trans>\n                      </div>\n                    );\n                  }}\n                />\n              </th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            {visibleTokens.map((token) => {\n              let tokenFeeBps;\n              if (isBuying) {\n                const { feeBasisPoints: feeBps } = getBuyGlpFromAmount(\n                  glpAmount,\n                  token.address,\n                  infoTokens,\n                  glpPrice,\n                  usdgSupply,\n                  totalTokenWeights\n                );\n                tokenFeeBps = feeBps;\n              } else {\n                const { feeBasisPoints: feeBps } = getSellGlpToAmount(\n                  glpAmount,\n                  token.address,\n                  infoTokens,\n                  glpPrice,\n                  usdgSupply,\n                  totalTokenWeights\n                );\n                tokenFeeBps = feeBps;\n              }\n              const tokenInfo = getTokenInfo(infoTokens, token.address);\n              let managedUsd;\n              if (tokenInfo && tokenInfo.managedUsd) {\n                managedUsd = tokenInfo.managedUsd;\n              }\n              let availableAmountUsd;\n              if (tokenInfo && tokenInfo.minPrice && tokenInfo.availableAmount) {\n                availableAmountUsd = tokenInfo.availableAmount\n                  .mul(tokenInfo.minPrice)\n                  .div(expandDecimals(1, token.decimals));\n              }\n              let balanceUsd;\n              if (tokenInfo && tokenInfo.minPrice && tokenInfo.balance) {\n                balanceUsd = tokenInfo.balance.mul(tokenInfo.minPrice).div(expandDecimals(1, token.decimals));\n              }\n              const tokenImage = importImage(\"ic_\" + token.symbol.toLowerCase() + \"_40.svg\");\n              let isCapReached = tokenInfo.managedAmount?.gt(tokenInfo.maxUsdgAmount);\n\n              let amountLeftToDeposit = bigNumberify(0);\n              if (tokenInfo.maxUsdgAmount && tokenInfo.maxUsdgAmount.gt(0)) {\n                amountLeftToDeposit = tokenInfo.maxUsdgAmount\n                  .sub(tokenInfo.usdgAmount)\n                  .mul(expandDecimals(1, USD_DECIMALS))\n                  .div(expandDecimals(1, USDG_DECIMALS));\n              }\n              if (amountLeftToDeposit.lt(0)) {\n                amountLeftToDeposit = bigNumberify(0);\n              }\n              function renderFees() {\n                const swapUrl = `https://app.1inch.io/#/${chainId}/swap/`;\n                switch (true) {\n                  case (isBuying && isCapReached) || (!isBuying && managedUsd?.lt(1)):\n                    return (\n                      <Tooltip\n                        handle=\"NA\"\n                        position=\"right-bottom\"\n                        renderContent={() => (\n                          <div className=\"text-white\">\n                            <Trans>\n                              Max pool capacity reached for {tokenInfo.symbol}\n                              <br />\n                              <br />\n                              Please mint $DLP using another token\n                            </Trans>\n                            <br />\n                            <p>\n                              <ExternalLink href={swapUrl}>\n                                <Trans> Swap {tokenInfo.symbol} on 1inch</Trans>\n                              </ExternalLink>\n                            </p>\n                          </div>\n                        )}\n                      />\n                    );\n                  case (isBuying && !isCapReached) || (!isBuying && managedUsd?.gt(0)):\n                    return `${formatAmount(tokenFeeBps, 2, 2, true, \"-\")}${\n                      tokenFeeBps !== undefined && tokenFeeBps.toString().length > 0 ? \"%\" : \"\"\n                    }`;\n                  default:\n                    return \"\";\n                }\n              }\n\n              return (\n                <tr key={token.symbol}>\n                  <td>\n                    <div className=\"App-card-title-info\">\n                      <div className=\"App-card-title-info-icon\">\n                        <img src={tokenImage} alt={token.symbol} width=\"40px\" />\n                      </div>\n                      <div className=\"App-card-title-info-text\">\n                        <div className=\"App-card-info-title\">{token.name}</div>\n                        <div className=\"App-card-info-subtitle\">{token.symbol}</div>\n                      </div>\n                      <div>\n                        <AssetDropdown assetSymbol={token.symbol} assetInfo={token} />\n                      </div>\n                    </div>\n                  </td>\n                  <td>${formatKeyAmount(tokenInfo, \"minPrice\", USD_DECIMALS, 2, true)}</td>\n                  <td>\n                    {isBuying && (\n                      <div>\n                        <Tooltip\n                          handle={\n                            amountLeftToDeposit && amountLeftToDeposit.lt(0)\n                              ? \"$0.00\"\n                              : `$${formatAmount(amountLeftToDeposit, USD_DECIMALS, 2, true)}`\n                          }\n                          position=\"right-bottom\"\n                          tooltipIconPosition=\"right\"\n                          renderContent={() => getTooltipContent(managedUsd, tokenInfo, token)}\n                        />\n                      </div>\n                    )}\n                    {!isBuying && (\n                      <div>\n                        <Tooltip\n                          handle={\n                            availableAmountUsd && availableAmountUsd.lt(0)\n                              ? \"$0.00\"\n                              : `$${formatAmount(availableAmountUsd, USD_DECIMALS, 2, true)}`\n                          }\n                          position=\"right-bottom\"\n                          tooltipIconPosition=\"right\"\n                          renderContent={() => getTooltipContent(managedUsd, tokenInfo, token)}\n                        />\n                      </div>\n                    )}\n                  </td>\n                  <td>\n                    {formatKeyAmount(tokenInfo, \"balance\", tokenInfo.decimals, 2, true)} {tokenInfo.symbol} ($\n                    {formatAmount(balanceUsd, USD_DECIMALS, 2, true)})\n                  </td>\n                  <td>{renderFees()}</td>\n                  <td>\n                    <button\n                      className={cx(\"App-button-option action-btn\", isBuying ? \"buying\" : \"selling\")}\n                      onClick={() => selectToken(token)}\n                    >\n                      {isBuying ? t`Buy with ${token.symbol}` : t`Sell for ${token.symbol}`}\n                    </button>\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n        <div className=\"token-grid\">\n          {visibleTokens.map((token) => {\n            let tokenFeeBps;\n            if (isBuying) {\n              const { feeBasisPoints: feeBps } = getBuyGlpFromAmount(\n                glpAmount,\n                token.address,\n                infoTokens,\n                glpPrice,\n                usdgSupply,\n                totalTokenWeights\n              );\n              tokenFeeBps = feeBps;\n            } else {\n              const { feeBasisPoints: feeBps } = getSellGlpToAmount(\n                glpAmount,\n                token.address,\n                infoTokens,\n                glpPrice,\n                usdgSupply,\n                totalTokenWeights\n              );\n              tokenFeeBps = feeBps;\n            }\n            const tokenInfo = getTokenInfo(infoTokens, token.address);\n            let managedUsd;\n            if (tokenInfo && tokenInfo.managedUsd) {\n              managedUsd = tokenInfo.managedUsd;\n            }\n            let availableAmountUsd;\n            if (tokenInfo && tokenInfo.minPrice && tokenInfo.availableAmount) {\n              availableAmountUsd = tokenInfo.availableAmount\n                .mul(tokenInfo.minPrice)\n                .div(expandDecimals(1, token.decimals));\n            }\n            let balanceUsd;\n            if (tokenInfo && tokenInfo.minPrice && tokenInfo.balance) {\n              balanceUsd = tokenInfo.balance.mul(tokenInfo.minPrice).div(expandDecimals(1, token.decimals));\n            }\n\n            let amountLeftToDeposit = bigNumberify(0);\n            if (tokenInfo.maxUsdgAmount && tokenInfo.maxUsdgAmount.gt(0)) {\n              amountLeftToDeposit = tokenInfo.maxUsdgAmount\n                .sub(tokenInfo.usdgAmount)\n                .mul(expandDecimals(1, USD_DECIMALS))\n                .div(expandDecimals(1, USDG_DECIMALS));\n            }\n            if (amountLeftToDeposit.lt(0)) {\n              amountLeftToDeposit = bigNumberify(0);\n            }\n            let isCapReached = tokenInfo.managedAmount?.gt(tokenInfo.maxUsdgAmount);\n\n            function renderFees() {\n              switch (true) {\n                case (isBuying && isCapReached) || (!isBuying && managedUsd?.lt(1)):\n                  return (\n                    <Tooltip\n                      handle=\"NA\"\n                      position=\"right-bottom\"\n                      renderContent={() => (\n                        <Trans>\n                          Max pool capacity reached for {tokenInfo.symbol}. Please mint $DLP using another token\n                        </Trans>\n                      )}\n                    />\n                  );\n                case (isBuying && !isCapReached) || (!isBuying && managedUsd?.gt(0)):\n                  return `${formatAmount(tokenFeeBps, 2, 2, true, \"-\")}${\n                    tokenFeeBps !== undefined && tokenFeeBps.toString().length > 0 ? \"%\" : \"\"\n                  }`;\n                default:\n                  return \"\";\n              }\n            }\n            const tokenImage = importImage(\"ic_\" + token.symbol.toLowerCase() + \"_24.svg\");\n            return (\n              <div className=\"App-card\" key={token.symbol}>\n                <div className=\"mobile-token-card\">\n                  <img src={tokenImage} alt={token.symbol} width=\"20px\" />\n                  <div className=\"token-symbol-text\">{token.symbol}</div>\n                  <div>\n                    <AssetDropdown assetSymbol={token.symbol} assetInfo={token} />\n                  </div>\n                </div>\n                <div className=\"App-card-divider\" />\n                <div className=\"App-card-content\">\n                  <div className=\"App-card-row\">\n                    <div className=\"label\">\n                      <Trans>Price</Trans>\n                    </div>\n                    <div>${formatKeyAmount(tokenInfo, \"minPrice\", USD_DECIMALS, 2, true)}</div>\n                  </div>\n                  {isBuying && (\n                    <div className=\"App-card-row\">\n                      <Tooltip\n                        handle=\"Available\"\n                        position=\"left-bottom\"\n                        renderContent={() => (\n                          <p className=\"text-white\">\n                            <Trans>Available amount to deposit into $DLP.</Trans>\n                          </p>\n                        )}\n                      />\n                      <div>\n                        <Tooltip\n                          handle={amountLeftToDeposit && `$${formatAmount(amountLeftToDeposit, USD_DECIMALS, 2, true)}`}\n                          position=\"right-bottom\"\n                          tooltipIconPosition=\"right\"\n                          renderContent={() => getTooltipContent(managedUsd, tokenInfo, token)}\n                        />\n                      </div>\n                    </div>\n                  )}\n                  {!isBuying && (\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Tooltip\n                          handle={t`Available`}\n                          position=\"left-bottom\"\n                          renderContent={() => {\n                            return (\n                              <p className=\"text-white\">\n                                <Trans>\n                                  Available amount to withdraw from $DLP. Funds not utilized by current open positions.\n                                </Trans>\n                              </p>\n                            );\n                          }}\n                        />\n                      </div>\n\n                      <div>\n                        <Tooltip\n                          handle={\n                            availableAmountUsd && availableAmountUsd.lt(0)\n                              ? \"$0.00\"\n                              : `$${formatAmount(availableAmountUsd, USD_DECIMALS, 2, true)}`\n                          }\n                          position=\"right-bottom\"\n                          tooltipIconPosition=\"right\"\n                          renderContent={() => getTooltipContent(managedUsd, tokenInfo, token)}\n                        />\n                      </div>\n                    </div>\n                  )}\n\n                  <div className=\"App-card-row\">\n                    <div className=\"label\">\n                      <Trans>Wallet</Trans>\n                    </div>\n                    <div>\n                      {formatKeyAmount(tokenInfo, \"balance\", tokenInfo.decimals, 2, true)} {tokenInfo.symbol} ($\n                      {formatAmount(balanceUsd, USD_DECIMALS, 2, true)})\n                    </div>\n                  </div>\n                  <div className=\"App-card-row\">\n                    <div>\n                      {tokenFeeBps ? (\n                        t`Fees`\n                      ) : (\n                        <Tooltip\n                          handle=\"Fees\"\n                          renderContent={() => (\n                            <p className=\"text-white\">\n                              <Trans>Fees will be shown once you have entered an amount in the order form.</Trans>\n                            </p>\n                          )}\n                        />\n                      )}\n                    </div>\n                    <div>{renderFees()}</div>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-options\">\n                    {isBuying && (\n                      <button className=\"App-button-option App-card-option\" onClick={() => selectToken(token)}>\n                        <Trans>Buy with {token.symbol}</Trans>\n                      </button>\n                    )}\n                    {!isBuying && (\n                      <button className=\"App-button-option App-card-option\" onClick={() => selectToken(token)}>\n                        <Trans>Sell for {token.symbol}</Trans>\n                      </button>\n                    )}\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\n\nimport GlpSwap from \"components/Glp/GlpSwap\";\nimport buyGLPIcon from \"img/ic_buy_glp.svg\";\nimport Footer from \"components/Footer/Footer\";\nimport \"./BuyGlp.css\";\n\nimport { Trans } from \"@lingui/macro\";\nimport { getNativeToken } from \"config/tokens\";\nimport { useChainId } from \"lib/chains\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { t } from \"@lingui/macro\";\n\nexport default function BuyGlp(props) {\n  const { chainId } = useChainId();\n  const history = useHistory();\n  const [isBuying, setIsBuying] = useState(true);\n  const nativeTokenSymbol = getNativeToken(chainId).symbol;\n\n  useEffect(() => {\n    const hash = history.location.hash.replace(\"#\", \"\");\n    const buying = hash === \"redeem\" ? false : true;\n    setIsBuying(buying);\n  }, [history.location.hash]);\n\n  return (\n    <div className=\"default-container page-layout\">\n      <div className=\"section-title-block\">\n        <div className=\"section-title-icon\">\n          <img src={buyGLPIcon} alt={t`Buy $DLP Icon`} />\n        </div>\n        <div className=\"section-title-content\">\n          <div className=\"Page-title\">\n            <Trans>Buy / Sell $DLP</Trans>\n          </div>\n          <div className=\"Page-description\">\n            {/* <Trans> */}\n              Purchase <ExternalLink href=\"https://amxdex.gitbook.io/amxdex/tokenomics/dlp\">$DLP tokens</ExternalLink> to earn{\" \"}\n              {nativeTokenSymbol} fees from swaps and leverages trading.\n            {/* </Trans> */}\n            <br />\n            <Trans>\n              Note that there is a minimum holding time of 15 minutes after a purchase.\n              <br />\n              View <Link to=\"/earn\">staking</Link> page.\n            </Trans>\n          </div>\n        </div>\n      </div>\n      <GlpSwap {...props} isBuying={isBuying} setIsBuying={setIsBuying} />\n      <Footer />\n    </div>\n  );\n}\n","import { ReactNode } from \"react\";\nimport cx from \"classnames\";\nimport \"./Button.css\";\n\ntype Props = {\n  imgSrc: string;\n  children: ReactNode;\n  imgName?: string;\n  href?: string;\n  className?: string;\n  size?: string;\n  onClick?: () => void;\n};\n\nexport default function Button({ href, imgSrc, children, className, imgName, onClick, size = \"lg\" }: Props) {\n  let classNames = cx(\"btn btn-primary btn-left\", `btn-${size}`, className);\n  if (onClick) {\n    return (\n      <button className={classNames} onClick={onClick}>\n        {imgSrc && <img className=\"btn-image\" src={imgSrc} alt={imgName} />}\n        <span className=\"btn-label\">{children}</span>\n      </button>\n    );\n  }\n  return (\n    <a className={classNames} href={href} target=\"_blank\" rel=\"noopener noreferrer\">\n      {imgSrc && <img className=\"btn-image\" src={imgSrc} alt={imgName} />}\n      <span className=\"btn-label\">{children}</span>\n    </a>\n  );\n}\n","import { ARBITRUM, POLYGON } from \"config/chains\";\nimport { getContract } from \"config/contracts\";\n\nconst ARBITRUM_GMX = getContract(ARBITRUM, \"GMX\");\nconst POLYGON_GMX = getContract(POLYGON, \"GMX\");\n\ntype Exchange = {\n  name: string;\n  icon: string;\n  networks: number[];\n  link?: string;\n  links?: { [ARBITRUM]: string; [POLYGON]: string };\n};\n\nexport const EXTERNAL_LINKS = {\n  [ARBITRUM]: {\n    bungee: `https://multitx.bungee.exchange/?toChainId=42161&toTokenAddress=${ARBITRUM_GMX}`,\n    banxa: \"https://gmx.banxa.com/?coinType=ETH&fiatType=USD&fiatAmount=500&blockchain=arbitrum\",\n    o3: \"https://o3swap.com/\",\n    networkWebsite: \"https://arbitrum.io/\",\n    buyGmx: {\n      banxa: \"https://gmx.banxa.com/?coinType=GMX&fiatType=USD&fiatAmount=500&blockchain=arbitrum\",\n      uniswap: `https://app.uniswap.org/#/swap?inputCurrency=ETH&outputCurrency=${ARBITRUM_GMX}`,\n    },\n  },\n  [POLYGON]: {\n    bungee: `https://multitx.bungee.exchange/?toChainId=43114&toTokenAddress=${POLYGON_GMX}`,\n    banxa: \"https://gmx.banxa.com/?coinType=MATIC&fiatType=USD&fiatAmount=500&blockchain=polygon\",\n    networkWebsite: \"https://www.matic.network/\",\n    buyGmx: {\n      banxa: \"https://gmx.banxa.com/?coinType=GMX&fiatType=USD&fiatAmount=500&blockchain=polygon\",\n      traderjoe: `https://quickswap.exchange/#/swap?swapIndex=1&currency0=ETH&currency1=${POLYGON_GMX}`,\n    },\n  },\n};\n\nexport const TRANSFER_EXCHANGES: Exchange[] = [\n  {\n    name: \"Binance\",\n    icon: \"ic_binance.svg\",\n    networks: [ARBITRUM, POLYGON],\n    link: \"https://www.binance.com/en/trade/\",\n  },\n  {\n    name: \"Synapse\",\n    icon: \"ic_synapse.svg\",\n    networks: [ARBITRUM, POLYGON],\n    link: \"https://synapseprotocol.com/\",\n  },\n  {\n    name: \"Arbitrum\",\n    icon: \"ic_arbitrum_24.svg\",\n    networks: [ARBITRUM],\n    link: \"https://bridge.arbitrum.io/\",\n  },\n  {\n    name: \"Polygon\",\n    icon: \"ic_matic_30.svg\",\n    networks: [POLYGON],\n    link: \"https://bridge.matic.network/\",\n  },\n  {\n    name: \"Hop\",\n    icon: \"ic_hop.svg\",\n    networks: [ARBITRUM],\n    link: \"https://app.hop.exchange/send?token=ETH&sourceNetwork=ethereum&destNetwork=arbitrum\",\n  },\n  {\n    name: \"Bungee\",\n    icon: \"ic_bungee.png\",\n    networks: [ARBITRUM, POLYGON],\n    link: \"https://multitx.bungee.exchange\",\n  },\n  {\n    name: \"Multiswap\",\n    icon: \"ic_multiswap.svg\",\n    networks: [ARBITRUM, POLYGON],\n    link: \"https://app.multichain.org/#/router\",\n  },\n  {\n    name: \"O3\",\n    icon: \"ic_o3.png\",\n    networks: [ARBITRUM, POLYGON],\n    link: \"https://o3swap.com/\",\n  },\n  {\n    name: \"Across\",\n    icon: \"ic_across.svg\",\n    networks: [ARBITRUM],\n    link: \"https://across.to/\",\n  },\n];\n\nexport const CENTRALISED_EXCHANGES: Exchange[] = [\n  {\n    name: \"Binance\",\n    icon: \"ic_binance.svg\",\n    link: \"https://www.binance.com/en/trade/GMX_USDT?_from=markets\",\n    networks: [ARBITRUM, POLYGON],\n  },\n  {\n    name: \"Bybit\",\n    icon: \"ic_bybit.svg\",\n    link: \"https://www.bybit.com/en-US/trade/spot/GMX/USDT\",\n    networks: [ARBITRUM, POLYGON],\n  },\n  {\n    name: \"Kucoin\",\n    icon: \"ic_kucoin.svg\",\n    link: \"https://www.kucoin.com/trade/GMX-USDT\",\n    networks: [ARBITRUM, POLYGON],\n  },\n  {\n    name: \"Huobi\",\n    icon: \"ic_huobi.svg\",\n    link: \"https://www.huobi.com/en-us/exchange/gmx_usdt/\",\n    networks: [ARBITRUM, POLYGON],\n  },\n];\n\nexport const DECENTRALISED_AGGRIGATORS: Exchange[] = [\n  {\n    name: \"1inch\",\n    icon: \"ic_1inch.svg\",\n    links: {\n      [ARBITRUM]: \"https://app.1inch.io/#/42161/unified/swap/ETH/GMX\",\n      [POLYGON]: \"https://app.1inch.io/#/43114/unified/swap/MATIC/GMX\",\n    },\n    networks: [ARBITRUM, POLYGON],\n  },\n  {\n    name: \"Matcha\",\n    icon: \"ic_matcha.png\",\n    links: {\n      [ARBITRUM]: `https://www.matcha.xyz/markets/42161/${ARBITRUM_GMX}`,\n      [POLYGON]: `https://www.matcha.xyz/markets/43114/${POLYGON_GMX}`,\n    },\n    networks: [ARBITRUM, POLYGON],\n  },\n  {\n    name: \"Paraswap\",\n    icon: \"ic_paraswap.svg\",\n    links: {\n      [ARBITRUM]: \"https://app.paraswap.io/#/?network=arbitrum\",\n      [POLYGON]: \"https://app.paraswap.io/#/?network=polygon\",\n    },\n    networks: [ARBITRUM, POLYGON],\n  },\n  {\n    name: \"Firebird\",\n    icon: \"ic_firebird.png\",\n    link: \"https://app.firebird.finance/swap\",\n    networks: [ARBITRUM, POLYGON],\n  },\n  {\n    name: \"OpenOcean\",\n    icon: \"ic_openocean.svg\",\n    links: {\n      [ARBITRUM]: \"https://app.openocean.finance/CLASSIC#/ARBITRUM/ETH/GMX\",\n      [POLYGON]: \"https://app.openocean.finance/CLASSIC#/MATIC/MATIC/GMX\",\n    },\n    networks: [ARBITRUM, POLYGON],\n  },\n  {\n    name: \"DODO\",\n    icon: \"ic_dodo.svg\",\n    links: {\n      [ARBITRUM]: `https://app.dodoex.io/?from=ETH&to=${ARBITRUM_GMX}&network=arbitrum`,\n      [POLYGON]: `https://app.dodoex.io/?from=MATIC&to=${POLYGON_GMX}&network=polygon`,\n    },\n    networks: [ARBITRUM, POLYGON],\n  },\n  {\n    name: \"Odos\",\n    icon: \"ic_odos.png\",\n    link: \"https://app.odos.xyz/\",\n    networks: [ARBITRUM],\n  },\n  {\n    name: \"Slingshot\",\n    icon: \"ic_slingshot.svg\",\n    link: \"https://app.slingshot.finance/swap/ETH\",\n    networks: [ARBITRUM],\n  },\n  {\n    name: \"Yieldyak\",\n    icon: \"ic_yield_yak.png\",\n    link: \"https://yieldyak.com/swap\",\n    networks: [POLYGON],\n  },\n];\n","import React, { useCallback } from \"react\";\nimport Footer from \"components/Footer/Footer\";\nimport \"./BuyGMX.css\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { Trans, t } from \"@lingui/macro\";\nimport Button from \"components/Common/Button\";\nimport { ARBITRUM, POLYGON, getChainName, getConstant } from \"config/chains\";\nimport { switchNetwork } from \"lib/wallets\";\nimport { useChainId } from \"lib/chains\";\nimport Card from \"components/Common/Card\";\nimport { importImage } from \"lib/legacy\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nimport Banxa from \"img/ic_banxa.svg\";\nimport Uniswap from \"img/ic_uni_arbitrum.svg\";\nimport Traderjoe from \"img/ic_traderjoe.svg\";\nimport Bungee from \"img/ic_bungee.png\";\nimport O3 from \"img/ic_o3.png\";\nimport Binance from \"img/ic_binance.svg\";\nimport ohmArbitrum from \"img/ic_olympus_arbitrum.svg\";\nimport { CENTRALISED_EXCHANGES, DECENTRALISED_AGGRIGATORS, EXTERNAL_LINKS, TRANSFER_EXCHANGES } from \"./constants\";\n\nexport default function BuyGMX() {\n  const { chainId } = useChainId();\n  const isArbitrum = chainId === ARBITRUM;\n  const { active } = useWeb3React();\n  const nativeTokenSymbol = getConstant(chainId, \"nativeTokenSymbol\");\n  const externalLinks = EXTERNAL_LINKS[chainId];\n\n  const onNetworkSelect = useCallback(\n    (value) => {\n      if (value === chainId) {\n        return;\n      }\n      return switchNetwork(value, active);\n    },\n    [chainId, active]\n  );\n\n  return (\n    <div className=\"BuyGMXGLP default-container page-layout\">\n      <div className=\"BuyGMXGLP-container\">\n        <div className=\"section-title-block\">\n          <div className=\"section-title-content\">\n            <div className=\"Page-title\">\n              <Trans>Buy $AMX on {getChainName(chainId)}</Trans>\n            </div>\n            <div className=\"Page-description\">\n              <Trans>Choose to buy from decentralized or centralized exchanges.</Trans>\n              <br />\n              {/* <Trans>\n                To purchase GMX on the {isArbitrum ? \"Polygon\" : \"Arbitrum\"} blockchain, please{\" \"}\n                <span onClick={() => onNetworkSelect(isArbitrum ? POLYGON : ARBITRUM)}>change your network</span>.\n              </Trans> */}\n            </div>\n          </div>\n        </div>\n        <div className=\"cards-row\">\n          <DecentralisedExchanges chainId={chainId} externalLinks={externalLinks} />\n          <CentralisedExchanges chainId={chainId} externalLinks={externalLinks} />\n        </div>\n\n        {isArbitrum ? (\n          <div className=\"section-title-block mt-top\">\n            <div className=\"section-title-content\">\n              <div className=\"Page-title\">\n                <Trans>Buy or Transfer ETH to Arbitrum</Trans>\n              </div>\n              <div className=\"Page-description\">\n                <Trans>Buy ETH directly to Arbitrum or transfer it there.</Trans>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <div className=\"section-title-block mt-top\">\n            <div className=\"section-title-content\">\n              <div className=\"Page-title\">\n                <Trans>Buy or Transfer MATIC to Polygon</Trans>\n              </div>\n              <div className=\"Page-description\">\n                <Trans>Buy MATIC directly to Polygon or transfer it there.</Trans>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div className=\"cards-row\">\n          <Card title={t`Buy ${nativeTokenSymbol}`}>\n            <div className=\"App-card-content\">\n              <div className=\"BuyGMXGLP-description\">\n                {isArbitrum ? (\n                  <Trans>\n                    You can buy ETH directly on{\" \"}\n                    <ExternalLink href={externalLinks.networkWebsite}>Arbitrum</ExternalLink> using these options:\n                  </Trans>\n                ) : (\n                  <Trans>\n                    You can buy MATIC directly on{\" \"}\n                    <ExternalLink href={externalLinks.networkWebsite}>Polygon</ExternalLink> using these options:\n                  </Trans>\n                )}\n              </div>\n              <div className=\"buttons-group\">\n                <Button href={externalLinks.bungee} imgSrc={Bungee}>\n                  Bungee\n                </Button>\n                <Button href={externalLinks.o3} imgSrc={O3}>\n                  O3\n                </Button>\n                <Button href={externalLinks.banxa} imgSrc={Banxa}>\n                  Banxa\n                </Button>\n              </div>\n            </div>\n          </Card>\n          <Card title={t`Transfer ${nativeTokenSymbol}`}>\n            <div className=\"App-card-content\">\n              {isArbitrum ? (\n                <div className=\"BuyGMXGLP-description\">\n                  <Trans>You can transfer ETH from other networks to Arbitrum using any of the below options:</Trans>\n                </div>\n              ) : (\n                <div className=\"BuyGMXGLP-description\">\n                  <Trans>You can transfer MATIC from other networks to Polygon using any of the below options:</Trans>\n                </div>\n              )}\n              <div className=\"buttons-group\">\n                {TRANSFER_EXCHANGES.filter((e) => e.networks.includes(chainId)).map((exchange) => {\n                  const icon = importImage(exchange.icon) || \"\";\n                  return (\n                    <Button key={exchange.name} href={exchange.link} imgSrc={icon}>\n                      {exchange.name}\n                    </Button>\n                  );\n                })}\n              </div>\n            </div>\n          </Card>\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n\nfunction DecentralisedExchanges({ chainId, externalLinks }) {\n  const isArbitrum = chainId === ARBITRUM;\n  return (\n    <Card title={t`Buy $AMX from a Decentralized Exchange`}>\n      <div className=\"App-card-content\">\n        {isArbitrum ? (\n          <div className=\"exchange-info-group\">\n            <div className=\"BuyGMXGLP-description\">\n              <Trans>Buy GMX from Uniswap (make sure to select Arbitrum):</Trans>\n            </div>\n            <div className=\"buttons-group col-1\">\n              <Button imgSrc={Uniswap} href={externalLinks.buyGmx.uniswap}>\n                <Trans>Uniswap</Trans>\n              </Button>\n            </div>\n          </div>\n        ) : (\n          <div className=\"exchange-info-group\">\n            <div className=\"BuyGMXGLP-description\">\n              <Trans>Buy $AMX from Quickswap:</Trans>\n            </div>\n            <div className=\"buttons-group col-1\">\n              <Button imgSrc={Traderjoe} href={externalLinks.buyGmx.traderjoe}>\n                <Trans>QuickSwap</Trans>\n              </Button>\n            </div>\n          </div>\n        )}\n        <div className=\"exchange-info-group\">\n          <div className=\"BuyGMXGLP-description\">\n            {/* <Trans>Buy $AMX using Decentralized Exchange Aggregators:</Trans> */}\n          </div>\n          <div className=\"buttons-group\">\n            {/* {DECENTRALISED_AGGRIGATORS.filter((e) => e.networks.includes(chainId)).map((exchange) => {\n              const icon = importImage(exchange.icon) || \"\";\n              const link = exchange.links ? exchange.links[chainId] : exchange.link;\n              return (\n                <Button key={exchange.name} imgSrc={icon} href={link}>\n                  <Trans>{exchange.name}</Trans>\n                </Button>\n              );\n            })} */}\n          </div>\n        </div>\n        {/* <div className=\"exchange-info-group\">\n          <div className=\"BuyGMXGLP-description\">\n            <Trans>Buy $AMX using any token from any network:</Trans>\n          </div>\n          <div className=\"buttons-group\">\n            <Button href={externalLinks.bungee} imgSrc={Bungee}>\n              Bungee\n            </Button>\n            <Button href={externalLinks.o3} imgSrc={O3}>\n              O3\n            </Button>\n          </div>\n        </div> */}\n        {isArbitrum && (\n          <div className=\"exchange-info-group\">\n            <div className=\"BuyGMXGLP-description\">\n              <Trans>GMX bonds can be bought on Olympus Pro with a discount and a small vesting period:</Trans>\n            </div>\n            <div className=\"buttons-group col-1\">\n              <Button imgSrc={ohmArbitrum} href=\"https://pro.olympusdao.finance/#/partners/GMX\">\n                Olympus Pro\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n    </Card>\n  );\n}\n\nfunction CentralisedExchanges({ chainId, externalLinks }) {\n  return (\n    <Card title={t`Buy $AMX from centralized services`}>\n      <div className=\"App-card-content\">\n        <div className=\"exchange-info-group\">\n          <div className=\"BuyGMXGLP-description\">\n            {/* <Trans>Buy $AMX from centralized exchanges:</Trans> */}\n          </div>\n          <div className=\"buttons-group\">\n            {/* {CENTRALISED_EXCHANGES.filter((e) => e.networks.includes(chainId)).map((exchange) => {\n              const icon = importImage(exchange.icon) || \"\";\n              return (\n                <Button key={exchange.name} href={exchange.link} imgSrc={icon}>\n                  {exchange.name}\n                </Button>\n              );\n            })} */}\n          </div>\n        </div>\n\n        <div className=\"exchange-info-group\">\n          <div className=\"BuyGMXGLP-description\">\n            {/* <Trans>Buy $AMX using FIAT gateways:</Trans> */}\n          </div>\n          <div className=\"buttons-group col-2\">\n            {/* <Button href=\"https://www.binancecnt.com/en/buy-sell-crypto\" imgSrc={Binance}>\n              Binance Connect\n            </Button>\n            <Button href={externalLinks.buyGmx.banxa} imgSrc={Banxa}>\n              Banxa\n            </Button> */}\n          </div>\n        </div>\n      </div>\n    </Card>\n  );\n}\n","import React from \"react\";\nimport { Trans } from \"@lingui/macro\";\nimport Footer from \"components/Footer/Footer\";\nimport \"./Buy.css\";\nimport TokenCard from \"components/TokenCard/TokenCard\";\nimport buyGMXIcon from \"img/buy_gmx.svg\";\nimport SEO from \"components/Common/SEO\";\nimport { getPageTitle } from \"lib/legacy\";\n\nexport default function BuyGMXGLP() {\n  return (\n    <SEO title={getPageTitle(\"Buy $DLP or $AMX\")}>\n      <div className=\"BuyGMXGLP page-layout\">\n        <div className=\"BuyGMXGLP-container default-container\">\n          <div className=\"section-title-block\">\n            <div className=\"section-title-icon\">\n              <img src={buyGMXIcon} alt=\"buyGMXIcon\" />\n            </div>\n            <div className=\"section-title-content\">\n              <div className=\"Page-title\">\n                <Trans>Buy $AMX or $DLP</Trans>\n              </div>\n            </div>\n          </div>\n          <TokenCard />\n        </div>\n        <Footer />\n      </div>\n    </SEO>\n  );\n}\n","import React, { useState } from \"react\";\nimport { ethers } from \"ethers\";\nimport { useWeb3React } from \"@web3-react/core\";\n\nimport ERC721 from \"abis/ERC721.json\";\n\nimport \"./NftWallet.css\";\nimport { t, Trans } from \"@lingui/macro\";\nimport { callContract } from \"lib/contracts\";\nimport { useChainId } from \"lib/chains\";\n\nexport default function NftWallet() {\n  const [nftAddress, setNftAddress] = useState(\"\");\n  const [nftId, setNftId] = useState(\"\");\n  const [receiver, setReceiver] = useState(\"\");\n  const [isSubmitting, setIsSubmitting] = useState(\"\");\n\n  const { active, account, library } = useWeb3React();\n  const { chainId } = useChainId();\n\n  function getTransferError() {\n    if (!active) {\n      return t`Wallet not connected`;\n    }\n    if (!receiver || receiver.length === 0) {\n      return t`Enter Receiver Address`;\n    }\n    if (!ethers.utils.isAddress(receiver)) {\n      return t`Invalid Receiver Address`;\n    }\n    if (!nftAddress || nftAddress.length === 0) {\n      return t`Enter NFT Address`;\n    }\n    if (!ethers.utils.isAddress(nftAddress)) {\n      return t`Invalid NFT Address`;\n    }\n    if (!nftId || nftId.toString().length === 0) {\n      return t`Enter NFT ID`;\n    }\n  }\n\n  function getPrimaryText() {\n    const transferError = getTransferError();\n    if (transferError) {\n      return transferError;\n    }\n    if (isSubmitting) {\n      return t`Tranferring...`;\n    }\n    return t`Transfer NFT`;\n  }\n\n  function isPrimaryEnabled() {\n    return !getTransferError();\n  }\n\n  function transferNft() {\n    setIsSubmitting(true);\n    const contract = new ethers.Contract(nftAddress, ERC721.abi, library.getSigner());\n    callContract(chainId, contract, \"transferFrom\", [account, receiver, nftId], {\n      sentMsg: t`Transfer submitted!`,\n      failMsg: t`Transfer failed.`,\n    }).finally(() => {\n      setIsSubmitting(false);\n    });\n  }\n\n  return (\n    <div className=\"NftWallet Page page-layout\">\n      <div className=\"Page-title-section\">\n        <div className=\"Page-title\">\n          <Trans>NFT Wallet</Trans>\n        </div>\n      </div>\n      <div className=\"NftWallet-content\">\n        <div className=\"NftWallet-row\">\n          <label>\n            <Trans>Receiver Address</Trans>\n          </label>\n          <div>\n            <input type=\"text\" value={receiver} onChange={(e) => setReceiver(e.target.value)} />\n          </div>\n        </div>\n        <div className=\"NftWallet-row\">\n          <label>\n            <Trans>NFT Address</Trans>\n          </label>\n          <div>\n            <input type=\"text\" value={nftAddress} onChange={(e) => setNftAddress(e.target.value)} />\n          </div>\n        </div>\n        <div className=\"NftWallet-row\">\n          <label>\n            <Trans>NFT ID</Trans>\n          </label>\n          <div>\n            <input type=\"number\" value={nftId} onChange={(e) => setNftId(e.target.value)} />\n          </div>\n        </div>\n        <div className=\"NftWallet-row\">\n          <button className=\"App-cta Exchange-swap-button\" disabled={!isPrimaryEnabled()} onClick={() => transferNft()}>\n            {getPrimaryText()}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { PLACEHOLDER_ACCOUNT } from \"lib/legacy\";\n\nimport { getContract } from \"config/contracts\";\n\nimport Token from \"abis/Token.json\";\nimport RewardReader from \"abis/RewardReader.json\";\n\nimport Checkbox from \"components/Checkbox/Checkbox\";\n\nimport \"./ClaimEsGmx.css\";\n\nimport arbitrumIcon from \"img/ic_arbitrum_96.svg\";\nimport avaIcon from \"img/ic_polygon_96.svg\";\n\nimport { Trans, t } from \"@lingui/macro\";\nimport { ARBITRUM, POLYGON } from \"config/chains\";\nimport { callContract, contractFetcher } from \"lib/contracts\";\nimport { bigNumberify, formatAmount, formatAmountFree, parseValue } from \"lib/numbers\";\nimport { useChainId } from \"lib/chains\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nconst VEST_WITH_GMX_ARB = \"VEST_WITH_GMX_ARB\";\nconst VEST_WITH_GLP_ARB = \"VEST_WITH_GLP_ARB\";\nconst VEST_WITH_GMX_MATIC = \"VEST_WITH_GMX_MATIC\";\nconst VEST_WITH_GLP_MATIC = \"VEST_WITH_GLP_MATIC\";\n\nexport function getVestingDataV2(vestingInfo) {\n  if (!vestingInfo || vestingInfo.length === 0) {\n    return;\n  }\n\n  const keys = [\"gmxVester\", \"glpVester\"];\n  const data = {};\n  const propsLength = 12;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = {\n      pairAmount: vestingInfo[i * propsLength],\n      vestedAmount: vestingInfo[i * propsLength + 1],\n      escrowedBalance: vestingInfo[i * propsLength + 2],\n      claimedAmounts: vestingInfo[i * propsLength + 3],\n      claimable: vestingInfo[i * propsLength + 4],\n      maxVestableAmount: vestingInfo[i * propsLength + 5],\n      combinedAverageStakedAmount: vestingInfo[i * propsLength + 6],\n      cumulativeReward: vestingInfo[i * propsLength + 7],\n      transferredCumulativeReward: vestingInfo[i * propsLength + 8],\n      bonusReward: vestingInfo[i * propsLength + 9],\n      averageStakedAmount: vestingInfo[i * propsLength + 10],\n      transferredAverageStakedAmount: vestingInfo[i * propsLength + 11],\n    };\n\n    data[key + \"PairAmount\"] = data[key].pairAmount;\n    data[key + \"VestedAmount\"] = data[key].vestedAmount;\n    data[key + \"EscrowedBalance\"] = data[key].escrowedBalance;\n    data[key + \"ClaimSum\"] = data[key].claimedAmounts.add(data[key].claimable);\n    data[key + \"Claimable\"] = data[key].claimable;\n    data[key + \"MaxVestableAmount\"] = data[key].maxVestableAmount;\n    data[key + \"CombinedAverageStakedAmount\"] = data[key].combinedAverageStakedAmount;\n    data[key + \"CumulativeReward\"] = data[key].cumulativeReward;\n    data[key + \"TransferredCumulativeReward\"] = data[key].transferredCumulativeReward;\n    data[key + \"BonusReward\"] = data[key].bonusReward;\n    data[key + \"AverageStakedAmount\"] = data[key].averageStakedAmount;\n    data[key + \"TransferredAverageStakedAmount\"] = data[key].transferredAverageStakedAmount;\n  }\n\n  return data;\n}\n\nfunction getVestingValues({ minRatio, amount, vestingDataItem }) {\n  if (!vestingDataItem || !amount || amount.eq(0)) {\n    return;\n  }\n\n  let currentRatio = bigNumberify(0);\n\n  const ratioMultiplier = 10000;\n  const maxVestableAmount = vestingDataItem.maxVestableAmount;\n  const nextMaxVestableEsGmx = maxVestableAmount.add(amount);\n\n  const combinedAverageStakedAmount = vestingDataItem.combinedAverageStakedAmount;\n  if (maxVestableAmount.gt(0)) {\n    currentRatio = combinedAverageStakedAmount.mul(ratioMultiplier).div(maxVestableAmount);\n  }\n\n  const transferredCumulativeReward = vestingDataItem.transferredCumulativeReward;\n  const nextTransferredCumulativeReward = transferredCumulativeReward.add(amount);\n  const cumulativeReward = vestingDataItem.cumulativeReward;\n  const totalCumulativeReward = cumulativeReward.add(nextTransferredCumulativeReward);\n\n  let nextCombinedAverageStakedAmount = combinedAverageStakedAmount;\n\n  if (combinedAverageStakedAmount.lt(totalCumulativeReward.mul(minRatio))) {\n    const averageStakedAmount = vestingDataItem.averageStakedAmount;\n    let nextTransferredAverageStakedAmount = totalCumulativeReward.mul(minRatio);\n    nextTransferredAverageStakedAmount = nextTransferredAverageStakedAmount.sub(\n      averageStakedAmount.mul(cumulativeReward).div(totalCumulativeReward)\n    );\n    nextTransferredAverageStakedAmount = nextTransferredAverageStakedAmount\n      .mul(totalCumulativeReward)\n      .div(nextTransferredCumulativeReward);\n\n    nextCombinedAverageStakedAmount = averageStakedAmount\n      .mul(cumulativeReward)\n      .div(totalCumulativeReward)\n      .add(nextTransferredAverageStakedAmount.mul(nextTransferredCumulativeReward).div(totalCumulativeReward));\n  }\n\n  const nextRatio = nextCombinedAverageStakedAmount.mul(ratioMultiplier).div(nextMaxVestableEsGmx);\n\n  const initialStakingAmount = currentRatio.mul(maxVestableAmount);\n  const nextStakingAmount = nextRatio.mul(nextMaxVestableEsGmx);\n\n  return {\n    maxVestableAmount,\n    currentRatio,\n    nextMaxVestableEsGmx,\n    nextRatio,\n    initialStakingAmount,\n    nextStakingAmount,\n  };\n}\n\nexport default function ClaimEsGmx({ setPendingTxns }) {\n  const { active, account, library } = useWeb3React();\n  const { chainId } = useChainId();\n  const [selectedOption, setSelectedOption] = useState(\"\");\n  const [isClaiming, setIsClaiming] = useState(false);\n  const [value, setValue] = useState(\"\");\n\n  const isArbitrum = chainId === ARBITRUM;\n\n  const esGmxIouAddress = getContract(chainId, \"ES_GMX_IOU\");\n\n  const { data: esGmxIouBalance } = useSWR(\n    isArbitrum && [\n      `ClaimEsGmx:esGmxIouBalance:${active}`,\n      chainId,\n      esGmxIouAddress,\n      \"balanceOf\",\n      account || PLACEHOLDER_ACCOUNT,\n    ],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  const arbRewardReaderAddress = getContract(ARBITRUM, \"RewardReader\");\n  const maticRewardReaderAddress = getContract(POLYGON, \"RewardReader\");\n\n  const arbVesterAdddresses = [getContract(ARBITRUM, \"GmxVester\"), getContract(ARBITRUM, \"GlpVester\")];\n  const maticVesterAdddresses = [getContract(POLYGON, \"GmxVester\"), getContract(POLYGON, \"GlpVester\")];\n\n  const { data: arbVestingInfo } = useSWR(\n    [\n      `StakeV2:vestingInfo:${active}`,\n      ARBITRUM,\n      arbRewardReaderAddress,\n      \"getVestingInfoV2\",\n      account || PLACEHOLDER_ACCOUNT,\n    ],\n    {\n      fetcher: contractFetcher(undefined, RewardReader, [arbVesterAdddresses]),\n    }\n  );\n\n  const { data: maticVestingInfo } = useSWR(\n    [\n      `StakeV2:vestingInfo:${active}`,\n      POLYGON,\n      maticRewardReaderAddress,\n      \"getVestingInfoV2\",\n      account || PLACEHOLDER_ACCOUNT,\n    ],\n    {\n      fetcher: contractFetcher(undefined, RewardReader, [maticVesterAdddresses]),\n    }\n  );\n\n  const arbVestingData = getVestingDataV2(arbVestingInfo);\n  const maticVestingData = getVestingDataV2(maticVestingInfo);\n\n  let amount = parseValue(value, 18);\n\n  let maxVestableAmount;\n  let currentRatio;\n\n  let nextMaxVestableEsGmx;\n  let nextRatio;\n\n  let initialStakingAmount;\n  let nextStakingAmount;\n\n  let stakingToken = \"staked AMX\";\n\n  const shouldShowStakingAmounts = false;\n\n  if (selectedOption === VEST_WITH_GMX_ARB && arbVestingData) {\n    const result = getVestingValues({\n      minRatio: bigNumberify(4),\n      amount,\n      vestingDataItem: arbVestingData.gmxVester,\n    });\n\n    if (result) {\n      ({ maxVestableAmount, currentRatio, nextMaxVestableEsGmx, nextRatio, initialStakingAmount, nextStakingAmount } =\n        result);\n    }\n  }\n\n  if (selectedOption === VEST_WITH_GLP_ARB && arbVestingData) {\n    const result = getVestingValues({\n      minRatio: bigNumberify(320),\n      amount,\n      vestingDataItem: arbVestingData.glpVester,\n    });\n\n    if (result) {\n      ({ maxVestableAmount, currentRatio, nextMaxVestableEsGmx, nextRatio, initialStakingAmount, nextStakingAmount } =\n        result);\n    }\n\n    stakingToken = \"$DLP\";\n  }\n\n  if (selectedOption === VEST_WITH_GMX_MATIC && maticVestingData) {\n    const result = getVestingValues({\n      minRatio: bigNumberify(4),\n      amount,\n      vestingDataItem: maticVestingData.gmxVester,\n    });\n\n    if (result) {\n      ({ maxVestableAmount, currentRatio, nextMaxVestableEsGmx, nextRatio, initialStakingAmount, nextStakingAmount } =\n        result);\n    }\n  }\n\n  if (selectedOption === VEST_WITH_GLP_MATIC && maticVestingData) {\n    const result = getVestingValues({\n      minRatio: bigNumberify(320),\n      amount,\n      vestingDataItem: maticVestingData.glpVester,\n    });\n\n    if (result) {\n      ({ maxVestableAmount, currentRatio, nextMaxVestableEsGmx, nextRatio, initialStakingAmount, nextStakingAmount } =\n        result);\n    }\n\n    stakingToken = \"$DLP\";\n  }\n\n  const getError = () => {\n    if (!active) {\n      return t`Wallet not connected`;\n    }\n\n    if (esGmxIouBalance && esGmxIouBalance.eq(0)) {\n      return t`No esAMX to claim`;\n    }\n\n    if (!amount || amount.eq(0)) {\n      return t`Enter an amount`;\n    }\n\n    if (selectedOption === \"\") {\n      return t`Select an option`;\n    }\n\n    return false;\n  };\n\n  const error = getError();\n\n  const getPrimaryText = () => {\n    if (error) {\n      return error;\n    }\n\n    if (isClaiming) {\n      return t`Claiming...`;\n    }\n\n    return t`Claim`;\n  };\n\n  const isPrimaryEnabled = () => {\n    return !error && !isClaiming;\n  };\n\n  const claim = () => {\n    setIsClaiming(true);\n\n    let receiver;\n\n    if (selectedOption === VEST_WITH_GMX_ARB) {\n      receiver = \"0x544a6ec142Aa9A7F75235fE111F61eF2EbdC250a\";\n    }\n\n    if (selectedOption === VEST_WITH_GLP_ARB) {\n      receiver = \"0x9d8f6f6eE45275A5Ca3C6f6269c5622b1F9ED515\";\n    }\n\n    if (selectedOption === VEST_WITH_GMX_MATIC) {\n      receiver = \"0x171a321A78dAE0CDC0Ba3409194df955DEEcA746\";\n    }\n\n    if (selectedOption === VEST_WITH_GLP_MATIC) {\n      receiver = \"0x28863Dd19fb52DF38A9f2C6dfed40eeB996e3818\";\n    }\n\n    const contract = new ethers.Contract(esGmxIouAddress, Token.abi, library.getSigner());\n    callContract(chainId, contract, \"transfer\", [receiver, amount], {\n      sentMsg: t`Claim submitted!`,\n      failMsg: t`Claim failed.`,\n      successMsg: t`Claim completed!`,\n      setPendingTxns,\n    })\n      .then(async (res) => {})\n      .finally(() => {\n        setIsClaiming(false);\n      });\n  };\n\n  return (\n    <div className=\"ClaimEsGmx Page page-layout\">\n      <div className=\"Page-title-section mt-0\">\n        <div className=\"Page-title\">\n          <Trans>Claim esAMX</Trans>\n        </div>\n        {!isArbitrum && (\n          <div className=\"Page-description\">\n            <br />\n            <Trans>Please switch your network to Arbitrum.</Trans>\n          </div>\n        )}\n        {isArbitrum && (\n          <div>\n            <div className=\"Page-description\">\n              <br />\n              <Trans>You have {formatAmount(esGmxIouBalance, 18, 2, true)} esAMX (IOU) tokens.</Trans>\n              <br />\n              <br />\n              <Trans>The address of the esAMX (IOU) token is {esGmxIouAddress}.</Trans>\n              <br />\n              <Trans>\n                The esAMX (IOU) token is transferrable. You can add the token to your wallet and send it to another\n                address to claim if you'd like.\n              </Trans>\n              <br />\n              <br />\n              <Trans>Select your vesting option below then click \"Claim\".</Trans>\n              <br />\n              <Trans>\n                After claiming, the esAMX tokens will be airdropped to your account on the selected network within 7\n                days.\n              </Trans>\n              <br />\n              <Trans>The esAMX tokens can be staked or vested at any time.</Trans>\n              <br />\n              <Trans>\n                Your esAMX (IOU) balance will decrease by your claim amount after claiming, this is expected behaviour.\n              </Trans>\n              <br />\n              <Trans>\n                You can check your claim history{\" \"}\n                <ExternalLink href={`https://arbiscan.io/token/${esGmxIouAddress}?a=${account}`}>here</ExternalLink>.\n              </Trans>\n            </div>\n            <br />\n            <div className=\"ClaimEsGmx-vesting-options\">\n              <Checkbox\n                className=\"arbitrum btn btn-primary btn-left btn-lg\"\n                isChecked={selectedOption === VEST_WITH_GMX_ARB}\n                setIsChecked={() => setSelectedOption(VEST_WITH_GMX_ARB)}\n              >\n                <div className=\"ClaimEsGmx-option-label\">\n                  <Trans>Vest with $AMX on Arbitrum</Trans>\n                </div>\n                <img src={arbitrumIcon} alt=\"Arbitrum\" />\n              </Checkbox>\n              <Checkbox\n                className=\"arbitrum btn btn-primary btn-left btn-lg\"\n                isChecked={selectedOption === VEST_WITH_GLP_ARB}\n                setIsChecked={() => setSelectedOption(VEST_WITH_GLP_ARB)}\n              >\n                <div className=\"ClaimEsGmx-option-label\">\n                  <Trans>Vest with $DLP on Arbitrum</Trans>\n                </div>\n                <img src={arbitrumIcon} alt=\"Arbitrum\" />\n              </Checkbox>\n              <Checkbox\n                className=\"polygon btn btn-primary btn-left btn-lg\"\n                isChecked={selectedOption === VEST_WITH_GMX_MATIC}\n                setIsChecked={() => setSelectedOption(VEST_WITH_GMX_MATIC)}\n              >\n                <div className=\"ClaimEsGmx-option-label\">\n                  <Trans>Vest with $AMX on Polygon</Trans>\n                </div>\n                <img src={avaIcon} alt=\"Polygon\" />\n              </Checkbox>\n              <Checkbox\n                className=\"polygon btn btn-primary btn-left btn-lg\"\n                isChecked={selectedOption === VEST_WITH_GLP_MATIC}\n                setIsChecked={() => setSelectedOption(VEST_WITH_GLP_MATIC)}\n              >\n                <div className=\"ClaimEsGmx-option-label polygon\">\n                  <Trans>Vest with $DLP on Polygon</Trans>\n                </div>\n                <img src={avaIcon} alt=\"Polygon\" />\n              </Checkbox>\n            </div>\n            <br />\n            {!error && (\n              <div className=\"muted\">\n                <Trans>\n                  You can currently vest a maximum of {formatAmount(maxVestableAmount, 18, 2, true)} esAMX tokens at a\n                  ratio of {formatAmount(currentRatio, 4, 2, true)} {stakingToken} to 1 esAMX.\n                </Trans>\n                {shouldShowStakingAmounts && `${formatAmount(initialStakingAmount, 18, 2, true)}.`}\n                <br />\n                <Trans>\n                  After claiming you will be able to vest a maximum of {formatAmount(nextMaxVestableEsGmx, 18, 2, true)}{\" \"}\n                  esAMX at a ratio of {formatAmount(nextRatio, 4, 2, true)} {stakingToken} to 1 esAMX.\n                </Trans>\n                {shouldShowStakingAmounts && `${formatAmount(nextStakingAmount, 18, 2, true)}.`}\n                <br />\n                <br />\n              </div>\n            )}\n            <div>\n              <div className=\"ClaimEsGmx-input-label muted\">\n                <Trans>Amount to claim</Trans>\n              </div>\n              <div className=\"ClaimEsGmx-input-container\">\n                <input type=\"number\" placeholder=\"0.0\" value={value} onChange={(e) => setValue(e.target.value)} />\n                {value !== formatAmountFree(esGmxIouBalance, 18, 18) && (\n                  <div\n                    className=\"ClaimEsGmx-max-button\"\n                    onClick={() => setValue(formatAmountFree(esGmxIouBalance, 18, 18))}\n                  >\n                    <Trans>MAX</Trans>\n                  </div>\n                )}\n              </div>\n            </div>\n            <br />\n            <div>\n              <button className=\"App-cta Exchange-swap-button\" disabled={!isPrimaryEnabled()} onClick={() => claim()}>\n                {getPrimaryText()}\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\nimport { useWeb3React } from \"@web3-react/core\";\n\nimport { getContract } from \"config/contracts\";\n\nimport Modal from \"components/Modal/Modal\";\nimport Footer from \"components/Footer/Footer\";\n\nimport Token from \"abis/Token.json\";\nimport Vester from \"abis/Vester.json\";\nimport RewardTracker from \"abis/RewardTracker.json\";\nimport RewardRouter from \"abis/RewardRouter.json\";\n\nimport { FaCheck, FaTimes } from \"react-icons/fa\";\n\nimport { Trans, t } from \"@lingui/macro\";\n\nimport \"./BeginAccountTransfer.css\";\nimport { callContract, contractFetcher } from \"lib/contracts\";\nimport { approveTokens } from \"domain/tokens\";\nimport { useChainId } from \"lib/chains\";\n\nfunction ValidationRow({ isValid, children }) {\n  return (\n    <div className=\"ValidationRow\">\n      <div className=\"ValidationRow-icon-container\">\n        {isValid && <FaCheck className=\"ValidationRow-icon\" />}\n        {!isValid && <FaTimes className=\"ValidationRow-icon\" />}\n      </div>\n      <div>{children}</div>\n    </div>\n  );\n}\n\nexport default function BeginAccountTransfer(props) {\n  const { setPendingTxns } = props;\n  const { active, library, account } = useWeb3React();\n  const { chainId } = useChainId();\n\n  const [receiver, setReceiver] = useState(\"\");\n  const [isTransferring, setIsTransferring] = useState(false);\n  const [isApproving, setIsApproving] = useState(false);\n  const [isTransferSubmittedModalVisible, setIsTransferSubmittedModalVisible] = useState(false);\n  let parsedReceiver = ethers.constants.AddressZero;\n  if (ethers.utils.isAddress(receiver)) {\n    parsedReceiver = receiver;\n  }\n\n  const gmxAddress = getContract(chainId, \"GMX\");\n  const gmxVesterAddress = getContract(chainId, \"GmxVester\");\n  const glpVesterAddress = getContract(chainId, \"GlpVester\");\n\n  const rewardRouterAddress = getContract(chainId, \"RewardRouter\");\n\n  const { data: gmxVesterBalance } = useSWR([active, chainId, gmxVesterAddress, \"balanceOf\", account], {\n    fetcher: contractFetcher(library, Token),\n  });\n\n  const { data: glpVesterBalance } = useSWR([active, chainId, glpVesterAddress, \"balanceOf\", account], {\n    fetcher: contractFetcher(library, Token),\n  });\n\n  const stakedGmxTrackerAddress = getContract(chainId, \"StakedGmxTracker\");\n  const { data: cumulativeGmxRewards } = useSWR(\n    [active, chainId, stakedGmxTrackerAddress, \"cumulativeRewards\", parsedReceiver],\n    {\n      fetcher: contractFetcher(library, RewardTracker),\n    }\n  );\n\n  const stakedGlpTrackerAddress = getContract(chainId, \"StakedGlpTracker\");\n  const { data: cumulativeGlpRewards } = useSWR(\n    [active, chainId, stakedGlpTrackerAddress, \"cumulativeRewards\", parsedReceiver],\n    {\n      fetcher: contractFetcher(library, RewardTracker),\n    }\n  );\n\n  const { data: transferredCumulativeGmxRewards } = useSWR(\n    [active, chainId, gmxVesterAddress, \"transferredCumulativeRewards\", parsedReceiver],\n    {\n      fetcher: contractFetcher(library, Vester),\n    }\n  );\n\n  const { data: transferredCumulativeGlpRewards } = useSWR(\n    [active, chainId, glpVesterAddress, \"transferredCumulativeRewards\", parsedReceiver],\n    {\n      fetcher: contractFetcher(library, Vester),\n    }\n  );\n\n  const { data: pendingReceiver } = useSWR([active, chainId, rewardRouterAddress, \"pendingReceivers\", account], {\n    fetcher: contractFetcher(library, RewardRouter),\n  });\n\n  const { data: gmxAllowance } = useSWR([active, chainId, gmxAddress, \"allowance\", account, stakedGmxTrackerAddress], {\n    fetcher: contractFetcher(library, Token),\n  });\n\n  const { data: gmxStaked } = useSWR(\n    [active, chainId, stakedGmxTrackerAddress, \"depositBalances\", account, gmxAddress],\n    {\n      fetcher: contractFetcher(library, RewardTracker),\n    }\n  );\n\n  const needApproval = gmxAllowance && gmxStaked && gmxStaked.gt(gmxAllowance);\n\n  const hasVestedGmx = gmxVesterBalance && gmxVesterBalance.gt(0);\n  const hasVestedGlp = glpVesterBalance && glpVesterBalance.gt(0);\n  const hasStakedGmx =\n    (cumulativeGmxRewards && cumulativeGmxRewards.gt(0)) ||\n    (transferredCumulativeGmxRewards && transferredCumulativeGmxRewards.gt(0));\n  const hasStakedGlp =\n    (cumulativeGlpRewards && cumulativeGlpRewards.gt(0)) ||\n    (transferredCumulativeGlpRewards && transferredCumulativeGlpRewards.gt(0));\n  const hasPendingReceiver = pendingReceiver && pendingReceiver !== ethers.constants.AddressZero;\n\n  const getError = () => {\n    if (!account) {\n      return t`Wallet is not connected`;\n    }\n    if (hasVestedGmx) {\n      return t`Vested $AMX not withdrawn`;\n    }\n    if (hasVestedGlp) {\n      return t`Vested $DLP not withdrawn`;\n    }\n    if (!receiver || receiver.length === 0) {\n      return t`Enter Receiver Address`;\n    }\n    if (!ethers.utils.isAddress(receiver)) {\n      return t`Invalid Receiver Address`;\n    }\n    if (hasStakedGmx || hasStakedGlp) {\n      return t`Invalid Receiver`;\n    }\n    if ((parsedReceiver || \"\").toString().toLowerCase() === (account || \"\").toString().toLowerCase()) {\n      return t`Self-transfer not supported`;\n    }\n\n    if (\n      (parsedReceiver || \"\").length > 0 &&\n      (parsedReceiver || \"\").toString().toLowerCase() === (pendingReceiver || \"\").toString().toLowerCase()\n    ) {\n      return t`Transfer already initiated`;\n    }\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isApproving) {\n      return false;\n    }\n    if (isTransferring) {\n      return false;\n    }\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n    if (needApproval) {\n      return t`Approve $AMX`;\n    }\n    if (isApproving) {\n      return t`Approving...`;\n    }\n    if (isTransferring) {\n      return t`Transferring`;\n    }\n\n    return t`Begin Transfer`;\n  };\n\n  const onClickPrimary = () => {\n    if (needApproval) {\n      approveTokens({\n        setIsApproving,\n        library,\n        tokenAddress: gmxAddress,\n        spender: stakedGmxTrackerAddress,\n        chainId,\n      });\n      return;\n    }\n\n    setIsTransferring(true);\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n\n    callContract(chainId, contract, \"signalTransfer\", [parsedReceiver], {\n      sentMsg: t`Transfer submitted!`,\n      failMsg: t`Transfer failed.`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setIsTransferSubmittedModalVisible(true);\n      })\n      .finally(() => {\n        setIsTransferring(false);\n      });\n  };\n\n  const completeTransferLink = `/complete_account_transfer/${account}/${parsedReceiver}`;\n  const pendingTransferLink = `/complete_account_transfer/${account}/${pendingReceiver}`;\n\n  return (\n    <div className=\"BeginAccountTransfer Page page-layout\">\n      <Modal\n        isVisible={isTransferSubmittedModalVisible}\n        setIsVisible={setIsTransferSubmittedModalVisible}\n        label={t`Transfer Submitted`}\n      >\n        <Trans>Your transfer has been initiated.</Trans>\n        <br />\n        <br />\n        <Link className=\"App-cta\" to={completeTransferLink}>\n          <Trans>Continue</Trans>\n        </Link>\n      </Modal>\n      <div className=\"Page-title-section\">\n        <div className=\"Page-title\">\n          <Trans>Transfer Account</Trans>\n        </div>\n        <div className=\"Page-description\">\n          <Trans>\n            Please only use this for full account transfers.\n            <br />\n            This will transfer all your $AMX, esAMX, $DLP and Multiplier Points to your new account.\n            <br />\n            Transfers are only supported if the receiving account has not staked $AMX or $DLP tokens before.\n            <br />\n            Transfers are one-way, you will not be able to transfer staked tokens back to the sending account.\n          </Trans>\n        </div>\n        {hasPendingReceiver && (\n          <div className=\"Page-description\">\n            <Trans>\n              You have a <Link to={pendingTransferLink}>pending transfer</Link> to {pendingReceiver}.\n            </Trans>\n          </div>\n        )}\n      </div>\n      <div className=\"Page-content\">\n        <div className=\"input-form\">\n          <div className=\"input-row\">\n            <label className=\"input-label\">\n              <Trans>Receiver Address</Trans>\n            </label>\n            <div>\n              <input\n                type=\"text\"\n                value={receiver}\n                onChange={(e) => setReceiver(e.target.value)}\n                className=\"text-input\"\n              />\n            </div>\n          </div>\n          <div className=\"BeginAccountTransfer-validations\">\n            <ValidationRow isValid={!hasVestedGmx}>\n              <Trans>Sender has withdrawn all tokens from $AMX Vesting Vault</Trans>\n            </ValidationRow>\n            <ValidationRow isValid={!hasVestedGlp}>\n              <Trans>Sender has withdrawn all tokens from $DLP Vesting Vault</Trans>\n            </ValidationRow>\n            <ValidationRow isValid={!hasStakedGmx}>\n              <Trans>Receiver has not staked $AMX tokens before</Trans>\n            </ValidationRow>\n            <ValidationRow isValid={!hasStakedGlp}>\n              <Trans>Receiver has not staked $DLP tokens before</Trans>\n            </ValidationRow>\n          </div>\n          <div className=\"input-row\">\n            <button\n              className=\"App-cta Exchange-swap-button\"\n              disabled={!isPrimaryEnabled()}\n              onClick={() => onClickPrimary()}\n            >\n              {getPrimaryText()}\n            </button>\n          </div>\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { ethers } from \"ethers\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { useCopyToClipboard } from \"react-use\";\n\nimport { getContract } from \"config/contracts\";\n\nimport Modal from \"components/Modal/Modal\";\nimport Footer from \"components/Footer/Footer\";\n\nimport RewardRouter from \"abis/RewardRouter.json\";\n\nimport \"./CompleteAccountTransfer.css\";\n\nimport { Trans, t } from \"@lingui/macro\";\nimport { callContract } from \"lib/contracts\";\nimport { helperToast } from \"lib/helperToast\";\nimport { useChainId } from \"lib/chains\";\n\nexport default function CompleteAccountTransfer(props) {\n  const [, copyToClipboard] = useCopyToClipboard();\n  const { sender, receiver } = useParams();\n  const { setPendingTxns } = props;\n  const { library, account } = useWeb3React();\n  const [isTransferSubmittedModalVisible, setIsTransferSubmittedModalVisible] = useState(false);\n\n  const { chainId } = useChainId();\n\n  const [isConfirming, setIsConfirming] = useState(false);\n  const isCorrectAccount = (account || \"\").toString().toLowerCase() === (receiver || \"\").toString().toLowerCase();\n\n  const rewardRouterAddress = getContract(chainId, \"RewardRouter\");\n\n  const getError = () => {\n    if (!account) {\n      return t`Wallet is not connected`;\n    }\n    if (!isCorrectAccount) {\n      return t`Incorrect Account`;\n    }\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isConfirming) {\n      return false;\n    }\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n    return t`Complete Transfer`;\n  };\n\n  const onClickPrimary = () => {\n    setIsConfirming(true);\n\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n\n    callContract(chainId, contract, \"acceptTransfer\", [sender], {\n      sentMsg: t`Transfer submitted!`,\n      failMsg: t`Transfer failed.`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setIsTransferSubmittedModalVisible(true);\n      })\n      .finally(() => {\n        setIsConfirming(false);\n      });\n  };\n\n  return (\n    <div className=\"CompleteAccountTransfer Page page-layout\">\n      <Modal\n        isVisible={isTransferSubmittedModalVisible}\n        setIsVisible={setIsTransferSubmittedModalVisible}\n        label=\"Transfer Completed\"\n      >\n        <Trans>Your transfer has been completed.</Trans>\n        <br />\n        <br />\n        <Link className=\"App-cta\" to=\"/earn\">\n          <Trans>Continue</Trans>\n        </Link>\n      </Modal>\n      <div className=\"Page-title-section\">\n        <div className=\"Page-title\">\n          <Trans>Complete Account Transfer</Trans>\n        </div>\n        {!isCorrectAccount && (\n          <div className=\"Page-description\">\n            <Trans>To complete the transfer, you must switch your connected account to {receiver}.</Trans>\n            <br />\n            <br />\n            <Trans>\n              You will need to be on this page to accept the transfer,{\" \"}\n              <span\n                onClick={() => {\n                  copyToClipboard(window.location.href);\n                  helperToast.success(\"Link copied to your clipboard\");\n                }}\n              >\n                click here\n              </span>{\" \"}\n              to copy the link to this page if needed.\n            </Trans>\n            <br />\n            <br />\n          </div>\n        )}\n        {isCorrectAccount && (\n          <div className=\"Page-description\">\n            <Trans>You have a pending transfer from {sender}.</Trans>\n            <br />\n          </div>\n        )}\n      </div>\n      {isCorrectAccount && (\n        <div className=\"Page-content\">\n          <div className=\"input-form\">\n            <div className=\"input-row\">\n              <button className=\"App-cta Exchange-swap-button\" disabled={!isPrimaryEnabled()} onClick={onClickPrimary}>\n                {getPrimaryText()}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n      <Footer />\n    </div>\n  );\n}\n","// date format: d MMM yyyy, H:mm, time should be specifed based on UTC time\n\nexport type EventData = {\n  id: string;\n  title: string;\n  isActive?: boolean;\n  validTill: string;\n  bodyText: string;\n  buttons: {\n    text: string;\n    link: string;\n    newTab: boolean;\n  }[];\n};\n\nexport const homeEventsData: EventData[] = [\n  // {\n  //   id: \"app-gmx-io-launch\",\n  //   title: \"Frontend Updates\",\n  //   isActive: true,\n  //   validTill: \"10 Jul 2022, 12:00\",\n  //   bodyText:\n  //     \"Updates have been applied to the $AMX frontend to inform users of the separation between gmx.io and app.gmx.io\",\n  //   buttons: [\n  //     {\n  //       text: \"Read More\",\n  //       link: \"https://amxdex.medium.com//gmx-frontend-updates-8d13f2346e1e\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"arbitrum-nitro-upgrade\",\n  //   title: \"Arbitrum Nitro Upgrade\",\n  //   isActive: true,\n  //   validTill: \"31 Aug 2022, 20:00\",\n  //   bodyText: \"The Arbitrum Nitro upgrade has been completed.\",\n  //   buttons: [\n  //     {\n  //       text: \"Read More\",\n  //       link: \"https://amxdex.medium.com//arbitrum-nitro-5f88c03a46fe\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n];\n\nexport const appEventsData: EventData[] = [\n  // {\n  //   id: \"removal-of-min-profit-rule\",\n  //   title: \"Trading improvements\",\n  //   isActive: true,\n  //   validTill: \"1 Apr 2022, 12:00\",\n  //   bodyText: \"The 1.5% minimum profit rule has been removed\",\n  //   buttons: [\n  //     {\n  //       text: \"Read more\",\n  //       link: \"https://amxdex.gitbook.io/amxdex/roadmap#30-march-2022\",\n  //       newTab: true,\n  //     },\n  //     {\n  //       text: \"Trade Now\",\n  //       link: \"https://gmx.io/trade\",\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"shorting-of-link-uni-re-enabled\",\n  //   title: \"Shorting of LINK and UNI\",\n  //   isActive: true,\n  //   validTill: \"20 Apr 2022, 12:00\",\n  //   bodyText: \"Shorting has been re-enabled for LINK and UNI.\",\n  //   buttons: [\n  //     {\n  //       text: \"Trade Now\",\n  //       link: \"https://gmx.io/trade\",\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"speed-up-page-loading\",\n  //   title: \"Speed Up Page Loading\",\n  //   isActive: true,\n  //   validTill: \"4 May 2022, 12:00\",\n  //   bodyText: \"If you experience data loading issues, please use a free RPC URL from Alchemy.\",\n  //   buttons: [\n  //     {\n  //       text: \"Learn More\",\n  //       link: \"https://amxdex.gitbook.io/amxdex/trading#backup-rpc-urls\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"referral-program-launch\",\n  //   title: \"Referral Program Launch\",\n  //   isActive: true,\n  //   validTill: \"4 May 2022, 12:00\",\n  //   bodyText: \"The $AMX referral program is now live! Get fee discounts and refer traders to earn rewards.\",\n  //   buttons: [\n  //     {\n  //       text: \"Read More\",\n  //       link: \"https://gmx.io/referrals\",\n  //     },\n  //     {\n  //       text: \"Join Now\",\n  //       link: \"https://gmx.io/referrals\",\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"gmx-arbitrum-odyssey\",\n  //   title: \"GMX Arbitrum Odyssey\",\n  //   isActive: true,\n  //   validTill: \"3 Jul 2022, 12:00\",\n  //   bodyText:\n  //     \"The $AMX Arbitrum Odyssey is taking place this week, all participants will receive prizes. Read on to find out more.\",\n  //   buttons: [\n  //     {\n  //       text: \"Read More\",\n  //       link: \"https://amxdex.medium.com//gmx-arbitrum-odyssey-fc12cba2d10d\",\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"fix-arbitrum-transaction-issues\",\n  //   title: \"Fix Arbitrum Transactions\",\n  //   isActive: true,\n  //   validTill: \"30 Jun 2022, 12:00\",\n  //   bodyText:\n  //     \"If you experience transaction errors on Arbitrum or data loading issues, please use a free RPC URL from Alchemy.\",\n  //   buttons: [\n  //     {\n  //       text: \"Learn More\",\n  //       link: \"https://amxdex.gitbook.io/amxdex/trading#backup-rpc-urls\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"gmx-arbitrum-odyssey-paused\",\n  //   title: \"GMX Arbitrum Odyssey Paused\",\n  //   isActive: true,\n  //   validTill: \"3 Jul 2022, 12:00\",\n  //   bodyText: \"The $AMX Arbitrum Odyssey has been paused. Please read the linked post for more information.\",\n  //   buttons: [\n  //     {\n  //       text: \"Read More\",\n  //       link: \"https://twitter.com/GMX_IO/status/1542163585111150592\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"app-gmx-io\",\n  //   title: \"Frontend Updates\",\n  //   isActive: true,\n  //   validTill: \"6 Jul 2022, 12:00\",\n  //   bodyText:\n  //     \"On 6 Jul 2022, updates will be applied to the $AMX frontend to inform users of the separation between gmx.io and app.gmx.io\",\n  //   buttons: [\n  //     {\n  //       text: \"Read More\",\n  //       link: \"https://amxdex.medium.com//gmx-frontend-updates-8d13f2346e1e\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"degraded-alchemy-performance\",\n  //   title: \"Alchemy RPC\",\n  //   isActive: true,\n  //   validTill: \"3 Jul 2022, 12:00\",\n  //   bodyText:\n  //     \"There are ongoing syncing issues on Alchemy for Arbitrum at the moment, please check their status page and use the public Arbitrum RPC in the meantime\",\n  //   buttons: [\n  //     {\n  //       text: \"Check Status\",\n  //       link: \"https://status.alchemy.com/\",\n  //       newTab: true,\n  //     },\n  //     {\n  //       text: \"Public RPC URL\",\n  //       link: \"https://metamask.zendesk.com/hc/en-us/articles/4415758358299-Network-profile-Arbitrum\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"app-gmx-io-settings\",\n  //   title: \"Frontend Updates\",\n  //   isActive: true,\n  //   validTill: \"10 Jul 2022, 12:00\",\n  //   bodyText:\n  //     \"You are currently using app.gmx.io. Customized settings have been reset, you may need to adjust your settings by clicking on the menu in the top right after connecting your wallet.\",\n  //   buttons: [\n  //     {\n  //       text: \"Read More\",\n  //       link: \"https://amxdex.medium.com//gmx-frontend-updates-8d13f2346e1e\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"use-alchemy-rpc-url\",\n  //   title: \"Use Alchemy RPC URL\",\n  //   isActive: true,\n  //   validTill: \"10 Jul 2022, 12:00\",\n  //   bodyText:\n  //     \"If you experience data loading or transaction issues on Arbitrum, please use a free RPC URL from Alchemy.\",\n  //   buttons: [\n  //     {\n  //       text: \"Learn More\",\n  //       link: \"https://amxdex.gitbook.io/amxdex/trading#backup-rpc-urls\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"arbitrum-nitro-upgrade\",\n  //   title: \"Arbitrum Nitro Upgrade\",\n  //   isActive: true,\n  //   validTill: \"31 Aug 2022, 20:00\",\n  //   bodyText: \"The Arbitrum Nitro upgrade has been completed.\",\n  //   buttons: [\n  //     {\n  //       text: \"Read More\",\n  //       link: \"https://amxdex.medium.com//arbitrum-nitro-5f88c03a46fe\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  {\n    id: \"position-router-updates\",\n    title: \"Position Router Updates\",\n    isActive: true,\n    validTill: \"19 Oct 2022, 20:00\",\n    bodyText: \"Position routers have been updated, existing users may have to re-enable leverage.\",\n    buttons: [\n      {\n        text: \"Read More\",\n        link: \"https://amxdex.medium.com//gmx-deployment-updates-a6a470df445f\",\n        newTab: true,\n      },\n    ],\n  },\n];\n","function Icon({ className }) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      aria-hidden=\"true\"\n      className={className}\n      viewBox=\"0 0 24 24\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z\"\n      ></path>\n    </svg>\n  );\n}\n\nexport default Icon;\n","import \"./EventToast.css\";\nimport Icon from \"./AnnouncementIcon\";\nimport { MdOutlineClose } from \"react-icons/md\";\n\nexport default function EventToast({ event, id, onClick, t }) {\n  return (\n    <div className={`single-toast ${t.visible ? \"zoomIn\" : \"zoomOut\"}`} key={id}>\n      <header>\n        <div className=\"toast-title\">\n          <Icon className=\"announcement-icon\" />\n          <p>{event.title}</p>\n        </div>\n        <MdOutlineClose onClick={onClick} className=\"cross-icon\" color=\"white\" />\n      </header>\n      <p className=\"toast-body\">{event.bodyText}</p>\n      <div className=\"toast-links\">\n        {event.buttons.map((button) => {\n          if (button.newTab) {\n            return (\n              <a key={event.id + button.text} target=\"_blank\" rel=\"noreferrer noopener\" href={button.link}>\n                {button.text}\n              </a>\n            );\n          } else {\n            return (\n              <a key={event.id + button.text} href={button.link}>\n                {button.text}\n              </a>\n            );\n          }\n        })}\n      </div>\n    </div>\n  );\n}\n","import { useLocalStorage } from \"react-use\";\nimport toast from \"react-hot-toast\";\nimport { homeEventsData, appEventsData } from \"config/events\";\nimport { useEffect } from \"react\";\nimport EventToast from \"./EventToast\";\nimport { isFuture, parse } from \"date-fns\";\nimport { isHomeSite } from \"lib/legacy\";\n\nfunction useEventToast() {\n  const isHome = isHomeSite();\n  const [visited, setVisited] = useLocalStorage(\"visited-announcements\", []);\n\n  useEffect(() => {\n    const eventsData = isHome ? homeEventsData : appEventsData;\n\n    eventsData\n      .filter((event) => event.isActive)\n      .filter((event) => isFuture(parse(event.validTill + \", +00\", \"d MMM yyyy, H:mm, x\", new Date())))\n      .filter((event) => Array.isArray(visited) && !visited.includes(event.id))\n      .forEach((event) => {\n        toast.custom(\n          (t) => (\n            <EventToast\n              event={event}\n              id={event.id}\n              t={t}\n              onClick={() => {\n                toast.dismiss(event.id);\n                visited.push(event.id);\n                setVisited(visited);\n              }}\n            />\n          ),\n          {\n            id: event.id,\n            style: {},\n          }\n        );\n      });\n  }, [visited, setVisited, isHome]);\n}\n\nexport default useEventToast;\n","import { Toaster } from \"react-hot-toast\";\nimport { useWindowScroll, createBreakpoint } from \"react-use\";\n\nfunction EventToastContainer() {\n  let { y: scrollY } = useWindowScroll();\n  const useBreakpoint = createBreakpoint({ XL: 1033, L: 768, S: 350 });\n  const breakpoint = useBreakpoint();\n  return (\n    <Toaster\n      position=\"top-right\"\n      reverseOrder={true}\n      gutter={30}\n      containerClassName=\"event-toast-container\"\n      containerStyle={{\n        zIndex: 2,\n        transition: \"all 200ms\",\n        top: scrollY > 60 ? \"30px\" : `${93 - scrollY}px`,\n        right: breakpoint === \"XL\" ? \"30px\" : \"1rem\",\n      }}\n      toastOptions={{\n        duration: Infinity,\n      }}\n    />\n  );\n}\nexport default EventToastContainer;\n","import SEO from \"components/Common/SEO\";\nimport Footer from \"components/Footer/Footer\";\nimport { getPageTitle } from \"lib/legacy\";\nimport \"./PageNotFound.css\";\nimport { Trans } from \"@lingui/macro\";\nimport { getHomeUrl, getTradePageUrl } from \"lib/legacy\";\n\nfunction PageNotFound() {\n  const homeUrl = getHomeUrl();\n  const tradePageUrl = getTradePageUrl();\n\n  return (\n    <SEO title={getPageTitle(\"Page not found\")}>\n      <div className=\"page-layout\">\n        <div className=\"page-not-found-container\">\n          <div className=\"page-not-found\">\n            <h2>\n              <Trans>Page not found</Trans>\n            </h2>\n            <p className=\"go-back\">\n              <Trans>\n                <span>Return to </span>\n                <a href={homeUrl}>Homepage</a> <span>or </span> <a href={tradePageUrl}>Trade</a>\n              </Trans>\n            </p>\n          </div>\n        </div>\n        <Footer />\n      </div>\n    </SEO>\n  );\n}\n\nexport default PageNotFound;\n","import React from \"react\";\nimport Footer from \"components/Footer/Footer\";\nimport SEO from \"components/Common/SEO\";\nimport { getPageTitle } from \"lib/legacy\";\nimport \"./ReferralTerms.css\";\n\nexport default function ReferralTerms() {\n  return (\n    <SEO title={getPageTitle(\"Referral Terms\")}>\n      <div className=\"default-container Page page-layout\">\n        <div>\n          <div className=\"Page-title-section center\">\n            <div className=\"Page-title\">$AMX Referral Program</div>\n            <div className=\"Page-subtitle\">Terms and Conditions</div>\n            <div className=\"Page-description\">Last modified: November 1st, 2022</div>\n          </div>\n          <div className=\"content\">\n            <div className=\"section\">\n              <p className=\"body-text\">\n                Welcome to Amx.exchange (\"we,\" \"us,\" or \"our\"), the informational resource for $AMX Protocol, as defined below.\n              </p>\n              <p className=\"body-text\">\n              Amx.exchange provides information and resources about the fundamentals of the decentralized non-custodial\n                protocol called the $AMX Protocol (the \"$AMX Protocol,\" \"Protocol,\" or \"$AMX DApp\"). Amx.exchange is not an\n                available access point to the $AMX Protocol.\n              </p>\n              <p className=\"body-text\">\n                These Terms and Conditions and any other documents incorporated herein by reference (collectively, these\n                \"Terms\") to you or the company or other legal entity you represent (\"you,\" \"your,\" \"the Referrer,\" \"the\n                Affiliate\"), explains the terms and conditions by which you may use the $AMX Referral Program (\"Referral\n                Program\") as defined below.\n              </p>\n              <p className=\"body-text\">\n                Please do not use the Referral Program if you disagree with any of these Terms.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">1. USE OF THE REFERRAL PROGRAM</h3>\n              <p className=\"body-text\">All this content is for informational purposes only.</p>\n              <p className=\"body-text\">\n                The Referral Program allows you to advertise the $AMX DApp, thereby driving traffic to it, whereby you\n                may earn a portion of the fees generated (\"Rebates\") if a person that is not you (\"Trader,\" \"Referred\n                User\") trades in the $AMX DApp after being referred to it from a hyperlink (\"Link\") or manually input\n                code (\"Referral Code\"). The Trader will benefit from a fee discount (\"Discount\") associated with the\n                Referrer's tier.\n              </p>\n              <p className=\"body-text\">\n                After being referred to the $AMX DApp from a Link, the Trader's browser will save your Referral Code,\n                which will be assigned to the Trader on his first trade.\n              </p>\n              <p className=\"body-text\">\n                A Trader can also manually enter your Referral Code in the Traders section and change it at any time.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">2. OBLIGATIONS</h3>\n              <p className=\"body-text\">\n                2.1 As an Affiliate, $AMX DApp provides you with the Links and Referral Codes necessary to promote the\n                $AMX Protocol. You acknowledge and agree it is your sole responsibility to indicate your correct Referral\n                Code. You may promote the $AMX Protocol offers in any manner you choose unless it misleads someone about\n                the $AMX Protocol.\n              </p>\n              <p className=\"body-text\">\n                2.2 Amx.exchange is not responsible for (i) lost sales or lost opportunity to earn Rebates due to any cause,\n                such as technical difficulties or over-capacity, including system overload in the Arbitrum or Polygon\n                blockchains; (ii) tracking Rebates, Discounts, or any other data, as this is handled by independent,\n                smart contracts.\n              </p>\n              <p className=\"body-text\">\n                2.3 You will be excluded from the Referral Program, following the directives of the $AMX tokenholders:\n                (i) if you use any language libelous, defamatory, profane, obscene, pornographic, sexually explicit,\n                indecent, lewd, vulgar, suggestive, harassing, stalking, hateful, threatening, offensive,\n                discriminatory, bigoted, abusive, inflammatory, fraudulent, deceptive, or otherwise objectionable or\n                likely or intended to incite, threaten, facilitate, promote, or encourage hate, racial intolerance, or\n                violent acts against others; (ii) if you try any form of gaming through self-referrals.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">3. REBATES AND DISCOUNTS</h3>\n              <p className=\"body-text\">\n                Referrers will receive rebates based on a sliding percentage of fees paid by Referred Users. Rebates\n                will never be retroactive.\n              </p>\n              <p className=\"body-text\">\n              Amx.exchange is under no obligation for Rebates or Discounts to any Referrer or Trader. Rebates and Discounts\n                are handled following the directives of the $AMX tokenholders.\n              </p>\n              <p className=\"body-text\">\n                The Rebates and Discounts percentages for the default tier Tier 1, and instructions to upgrade to Tier 2\n                and Tier 3, are contained in{\" \"}\n                <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://amxdex.gitbook.io/amxdex/how-it-works/referrals\">\n                  https://amxdex.gitbook.io/amxdex/how-it-works/referrals.\n                </a>\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">4. LIMITATION OF LIABILITY</h3>\n              <p className=\"body-text\">\n                Under no circumstances shall Amx.exchange be liable for any direct, indirect, incidental, punitive, special,\n                consequential damages, or similar damages or liabilities whatsoever for any reason whatsoever related to\n                these Terms, your use or inability to use our web site(s), or the materials and content of the web\n                site(s) or any other web sites linked to such web site(s) or your provision of any personally\n                identifiable information to a backend service provider or any third party. This limitation applies\n                regardless of whether the alleged liability is based on contract, tort, warranty, negligence, strict\n                liability, or any other basis, even if we have been advised of the possibility of such damages or such\n                damages were reasonably foreseeable.\n              </p>\n              <p className=\"body-text\">\n                In no event shall Amx.exchange's aggregate liability arising out of or in connection with the Site exceed five\n                hundred Singapore Dollars (500 SGD).\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">5. INDEMNIFICATION</h3>\n              <p className=\"body-text\">\n                You will defend, indemnify, and hold harmless Amx.exchange, its affiliates, members, member, managers,\n                employees, attorneys, representatives, suppliers, and contractors from any claim, demand, lawsuit,\n                action, proceeding, investigation, liability, damage, loss, cost or expense, including without\n                limitation reasonable attorneys' fees, arising out of or relating to arising under these Terms, the\n                service(s) provided by Amx.exchange, or your use of the service(s) provided by Amx.exchange, including, without\n                limitation, an infringement by you, or by anyone else using such service(s) we provide to you, of any\n                intellectual property or other proprietary rights of any person or entity, or from the violation of any\n                of our operating rules or policies relating to the service(s) provided. When we may be involved in a\n                suit involving a third party and which is related to our service(s) to you under these Terms, we may\n                seek written assurances from you in which you promise to defend, indemnify and hold us harmless from the\n                costs and liabilities described in this paragraph. Such written assurances may include, in our sole\n                discretion, the posting of a performance bond(s) or other guarantees reasonably calculated to guarantee\n                payment. We may consider your failure to provide such assurances a breach of these Terms by you. The\n                terms of this paragraph will survive any termination or cancellation of the Terms.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">6. MODIFICATION, SUSPENSION, AND TERMINATION</h3>\n              <p className=\"body-text\">\n                The Referral Program runs independently from Amx.exchange, which the token holders of $AMX determine. Due to\n                this, from time to time and with or without prior notice to you, the Referral Program could be subject\n                to modifications, suspensions, or disabilities, in whole or in part, for any reason whatsoever.\n              </p>\n              <p className=\"body-text\">\n              Amx.exchange will not be liable for any losses suffered by you resulting from any modification to the Referral\n                Program or from any modification, suspension, or termination, for any reason, of your access to all or\n                any portion of the Interface or the Protocol.\n              </p>\n              <p className=\"body-text\">\n              Amx.exchange may revise these Terms from time to time. We will notify you by updating the date at the top of\n                the Terms and maintaining a current version. The most current version of the Terms will always be at\n                https://app.amx.exchange/#/referral-terms. All modifications will be effective when they are posted. By using the\n                Referral Program after those revisions become effective, you agree to be bound by the revised Terms.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">7. GOVERNING LAW</h3>\n              <p className=\"body-text\">\n                The interpretation and enforcement of these Terms, and any dispute related to these Terms, the Site, or\n                the Interface, will be governed by and construed and enforced under the laws of the Bahamas, as\n                applicable.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">8. GENERAL</h3>\n              <p className=\"body-text\">\n                8.1 These Terms, including other policies or agreements incorporated herein, constitute the entire and\n                only agreement between you and Amx.exchange concerning the subject matter of these Terms and supersede all\n                prior or contemporaneous agreements, representations, warranties, and understandings, written or oral,\n                concerning the subject matter of these Terms. Any failure by us to exercise or enforce any right or\n                provision of the Terms shall not constitute a waiver of such right or provision.\n              </p>\n              <p className=\"body-text\">\n                8.2 You must legally be able to enter into the Terms. Using the Referral Program, you represent and\n                warrant that you meet the eligibility requirement. If you do not meet the requirement, you must not\n                access the Referral Program.\n              </p>\n              <p className=\"body-text\">\n                8.3 Nothing contained herein will be construed to create the relationship of principal and agent,\n                employer and employee, partners or joint venturers. Each party shall ensure that the foregoing persons\n                shall not represent to the contrary, either expressly, implicitly, by appearance, or otherwise.\n              </p>\n              <p className=\"body-text\">\n                8.4 If any provision of these Terms shall be unenforceable or invalid under any applicable law or be\n                held by any applicable court decision, such unenforceability or invalidity shall not render these Terms\n                unenforceable or invalid as a whole. Amx.exchange will amend or replace such provision with one that is valid\n                and enforceable and which achieves, to the extent possible, our original objectives and intent as\n                reflected in the original provision.\n              </p>\n              <p className=\"body-text\">\n                8.5 You may not assign or transfer any right to use the Referral Program, or any of your rights or\n                obligations under these Terms, without our express prior written consent, including by operation of law\n                or in connection with any change of control. Amx.exchange may assign or transfer any or all of our rights or\n                obligations under these Terms, in whole or part, without notice or obtaining your consent or approval.\n              </p>\n              <p className=\"body-text\">\n                8.6 Amx.exchange will have no responsibility or liability for any failure or delay in performance of the Site,\n                or any loss or damage that you may incur, due to any circumstance or event beyond our control, including\n                without limitation any flood, extraordinary weather conditions, earthquake, or other act of God, fire,\n                war, insurrection, riot, labor dispute, accident, any law, order regulation, direction, action or\n                request of the government, communications, power failure, or equipment or software malfunction.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">9. CONTACT INFORMATION</h3>\n              <p className=\"body-text\">\n                If you have any questions about these Terms, the Site, or the Interface, please get in touch with Amx.exchange\n                on any of our official channels.\n              </p>\n            </div>\n          </div>\n        </div>\n        <Footer />\n      </div>\n    </SEO>\n  );\n}\n","import React from \"react\";\nimport Footer from \"components/Footer/Footer\";\nimport SEO from \"components/Common/SEO\";\nimport { getPageTitle } from \"lib/legacy\";\nimport \"./TermsAndConditions.css\";\n\nexport default function TermsAndConditions() {\n  return (\n    <SEO title={getPageTitle(\"Terms and Conditions\")}>\n      <div className=\"default-container Page page-layout\">\n        <div>\n          <div className=\"Page-title-section center\">\n            <div className=\"Page-title\">$AMX</div>\n            <div className=\"Page-subtitle\">Terms and Conditions</div>\n            <div className=\"Page-description\">Last modified: November 1st, 2022</div>\n          </div>\n          <div className=\"content\">\n            <div className=\"section\">\n              <p className=\"body-text\">\n                Welcome to Amx.exchange (\"we,\" \"us,\" or \"our\"), the informational resource for $AMX Protocol, as defined below.\n              </p>\n              <p className=\"body-text\">\n                Amx.exchange provides information and resources about the fundamentals of the decentralized non-custodial\n                protocol called the $AMX Protocol (the \"$AMX Protocol,\" \"Protocol,\" or \"$AMX DApp\"). Amx.exchange is not an\n                available access point to the $AMX Protocol.\n              </p>\n              <p className=\"body-text\">\n                These Terms and Conditions and any other documents incorporated herein by reference (collectively, these\n                \"Terms\") to you or the company or other legal entity you represent (\"you\" or \"your\") explains the terms\n                and conditions by which you may access Amx.exchange (\"the Site\") and app.Amx.exchange (\"the Interface\"). Please do\n                not use the Site or Interface if you disagree with any of these Terms.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">1. USE OF THE SITE AND THE INTERFACE</h3>\n              <p className=\"body-text\">The Amx.exchange site is for informational purposes only.</p>\n              <p className=\"body-text\">\n                Amx.exchange is not part of any transaction on the blockchain networks underlying the $AMX Protocol; we do not\n                have possession, custody, or control over any crypto assets appearing on the Interface; and we do not\n                have possession, custody, or control over any user's funds. Further, we do not store, send, or receive\n                any crypto assets. You understand that when you interact with any $AMX Protocol smart contracts, you\n                always retain control over your crypto assets. We do not have access to your private keys.\n              </p>\n              <ul className=\"list-style-none\">\n                <li>\n                  <p className=\"body-text\">\n                    1.1. As a condition to accessing or using the Site or Interface, you represent and warrant to Amx.exchange\n                    the following:\n                  </p>\n                  <ul className=\"list-style-none\">\n                    <li>\n                      <p className=\"body-text\">\n                        1.1.1. If you are an individual person, then you are of legal age in the jurisdiction in which\n                        you reside, and you have the legal capacity to enter into these Terms and be bound by them;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.1.2. If you are an entity, then you must have the legal authority to accept these Terms on\n                        that entity's behalf, in which case \"you\" (except as used in this paragraph) will mean that\n                        entity;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">1.1.3. You are not a U.S. Person;</p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.1.4. You are not a resident, national, or agent of any country to which the United States, the\n                        United Kingdom, or the European Union embargoes goods or imposes similar sanctions\n                        (collectively, \"Restricted Territories\");\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.1.5. You are not subject to economic or trade sanctions administered or enforced by any\n                        governmental authority; or otherwise, you are not a member of any sanctions list or equivalent\n                        maintained by the United States government, the United Kingdom government, the European Union,\n                        or the United Nations, including without limitation the U.S. Office of Foreign Asset Control\n                        Specifically Designated Nationals and Blocked Person List (collectively, \"Sanctions Lists\n                        Persons\");\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.1.6. You do intend to transact with any Restricted Person or Sanctions List Person;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.1.7. You do not, and will not, use VPN software or any other privacy or anonymization tools or\n                        techniques, or other means, to circumvent, or attempt to circumvent, any restrictions that\n                        apply; and\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.1.8. Your access is not (a) prohibited by and does not otherwise violate or assist you in\n                        violating any domestic or foreign law, rule, statute, regulation, by-law, order, protocol, code,\n                        decree, letter, or another directive, requirement, guidance, or guideline, published or in force\n                        that applies to or is otherwise intended to govern or regulate any person, property,\n                        transaction, activity, event or other matter, including any rule, letter, order, judgment,\n                        directive or other requirements, guidance, or guideline issued by any domestic or foreign\n                        federal, provincial or state, municipal, local or other governmental, regulatory, judicial or\n                        administrative authority having jurisdiction over Amx.exchange or you as otherwise duly enacted,\n                        enforceable by law, the common law or equity (collectively, \"Applicable Laws\"); or (b)\n                        contribute to or facilitate any illegal activity.\n                      </p>\n                    </li>\n                  </ul>\n                </li>\n              </ul>\n              <ul className=\"list-style-none\">\n                <li>\n                  <p className=\"body-text\">\n                    1.2. As a condition to accessing or using the Site or the Interface, you acknowledge, understand,\n                    and agree to the following:\n                  </p>\n                  <ul className=\"list-style-none\">\n                    <li>\n                      <p className=\"body-text\">\n                        1.2.1. From time to time, the Site or the Interface may be inaccessible or inoperable for any\n                        reason, including, but not limited to: (a) equipment malfunctions; (b) periodic maintenance\n                        procedures or repairs that Amx.exchange or any of its suppliers or contractors may undertake from time\n                        to time; (c) causes beyond Amx.exchange's control or that Amx.exchange could not reasonably foresee; (d)\n                        disruptions and temporary or permanent unavailability of underlying blockchain infrastructure;\n                        or (e) unavailability of third-party service providers or external partners for any reason;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.2.2. We reserve the right to disable or modify access to the Site at any time in the event of\n                        any breach of these Terms, including, without limitation, if we reasonably believe any of your\n                        representations and warranties may be untrue or inaccurate, and we will not be liable to you for\n                        any losses or damages you may suffer as a result of or in connection with the Site or the\n                        Interface being inaccessible to you at any time or for any reason;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.2.3. The Interface may evolve, which means third parties may apply changes, replace, or\n                        discontinue (temporarily or permanently) the access at any time in their sole discretion;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.2.4. The pricing information provided on the Site or the Interface does not represent an\n                        offer, a solicitation of an offer, or any advice regarding, or recommendation to enter into, a\n                        transaction with Amx.exchange;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">1.2.5. Amx.exchange does not act as a broker or advisor for you;</p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.2.6. You are solely responsible for your use of the Site or the Interface, including all of\n                        your transfers of digital assets;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.2.7. To the fullest not prohibited by Applicable Law, we owe no fiduciary duties or\n                        liabilities to you or any other party, and that to the extent any such duties or liabilities may\n                        exist at law or in equity, you hereby irrevocably disclaim, waive, and eliminate those duties\n                        and liabilities;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.2.8. You are solely responsible for reporting and paying any taxes applicable to your use of\n                        the Interface; and\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.2.9. We have no control over, or liability for, the delivery, quality, safety, legality, or\n                        any other aspect of any digital assets that you may transfer to or from a third party, and we\n                        are not responsible for ensuring that an entity with whom you transact completes the transaction\n                        or is authorized to do so. If you experience a problem with any transactions in digital assets\n                        using the Site or the Interface, you bear the entire risk.\n                      </p>\n                    </li>\n                  </ul>\n                </li>\n              </ul>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">2. FEES</h3>\n              <p className=\"body-text\">\n                You are required to pay all fees for transactions involving certain blockchain networks. These fees may\n                include gas costs and all other fees reflected on the Interface at your use, including trading-related\n                fees. Amx.exchange does not receive fees for any blockchain transactions or using the Site or the Interface.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">3. NO PROFESSIONAL ADVICE OR FIDUCIARY DUTIES</h3>\n              <p className=\"body-text\">\n                Nothing herein constitutes legal, financial, business, or tax advice, and you are strongly advised to\n                consult an advisor(s) before engaging in any activity in connection herewith. All information provided\n                by the Site is for informational purposes only and should not be construed as professional advice. You\n                should not take, or refrain from taking, any action based on any information contained on the Site or\n                any other information that we make available at any time, including, without limitation, blog posts,\n                articles, links to third-party content, discord content, news feeds, tutorials, tweets, and videos. The\n                Terms are not intended to, and do not, create or impose any fiduciary duties on us.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">4. PROPRIETARY RIGHT</h3>\n              <ul className=\"list-style-none\">\n                <li>\n                  <p className=\"body-text\">\n                    4.1. Amx.exchange own all rights, names, logos, and other marks used on the Site and the Interface,\n                    including, without limitation, any copyrights in and to any content, code, data, or other materials\n                    that you may access or use on or through the Site or the Interface; however, the code for the $AMX\n                    Protocol and the Interface (amx.exchange) deployed on IPFS is open-sourced. Except as expressly set\n                    forth herein, your use of or access to the Site or the Interface does not grant you any ownership or\n                    other rights therein.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    4.2. Amx.exchange may use and share your comments, bug reports, ideas, or other feedback that you may\n                    provide, including suggestions about how we might improve. You agree that Amx.exchange is free to use or\n                    not use any feedback we receive from you as we see fit, including copying and sharing such feedback\n                    with third parties, without any obligation to you.\n                  </p>\n                </li>\n              </ul>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">5. MODIFICATION, SUSPENSION, AND TERMINATION</h3>\n              <ul className=\"list-style-none\">\n                <li>\n                  <p className=\"body-text\">\n                    5.1. Amx.exchange reserve the right, at our sole discretion, from time to time and with or without prior\n                    notice to you, to modify, suspend or disable (temporarily or permanently) the Site or our subdomain\n                    to the Interface, in whole or in part, for any reason whatsoever, including, without limitation.\n                    Upon termination of your access, your right to use the Site or the Interface from our subdomain will\n                    immediately cease. However, it would still be accessible via a third party since we do not host or\n                    own its code. Amx.exchange will not be liable for any losses suffered by you resulting from any\n                    modification to the Site or the Interface or from any modification, suspension, or termination, for\n                    any reason, of your access to all or any portion of the Site or the Interface.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    5.2. Amx.exchange may revise these Terms from time to time. We will notify you by updating the date at the\n                    top of the Terms and maintaining a current version. The most current version of the Terms will\n                    always be at https://app.amx.exchange/#/terms-and-conditions. All modifications will be effective when they\n                    are posted. By continuing to access or use the Site or the Interface after those revisions become\n                    effective, you agree to be bound by the revised Terms.\n                  </p>\n                </li>\n              </ul>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">6. RISKS</h3>\n              <ul className=\"list-style-none\">\n                <li>\n                  <p className=\"body-text\">\n                    6.1. The use of technology related to blockchain, smart contracts, and cryptocurrencies, among\n                    others, entails a risk that by accessing transactions, you are assuming. Amx.exchange does not own or\n                    control any underlying software through which blockchain networks are formed. The software\n                    underlying blockchain networks are open-source so anyone can use, copy, modify, and distribute it.\n                    By using the Interface, you acknowledge and agree:\n                  </p>\n                  <ul className=\"list-style-none\">\n                    <li>\n                      <p className=\"body-text\">\n                        6.1.1. That Amx.exchange is not responsible for the operation of the open-source software and networks\n                        underlying the Interface;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        6.1.2. That there exists no guarantee of the functionality, security, or availability of that\n                        software and networks; and\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        6.1.3. That the underlying networks are subject to sudden changes in operating rules, such as\n                        those commonly referred to as \"forks,\" which may materially affect the Interface. You are\n                        responsible for securing your private key(s). We do not have access to your private key(s);\n                        losing control of your private key(s) will permanently and irreversibly deny you access to any\n                        blockchain-based network. Neither Amx.exchange nor any other person or entity will be able to retrieve\n                        or protect your digital assets. If your private key(s) are lost, you will not be able to\n                        transfer your digital assets to any blockchain address or wallet. If this occurs, you will not\n                        be able to realize any value or utility from the digital assets you may hold.\n                      </p>\n                    </li>\n                  </ul>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    6.2. Amx.exchange is not responsible for the content of any third party, including, but not limited to,\n                    information, materials, products, or services that Amx.exchange does not own or control. In addition,\n                    third parties may offer promotions related to your access and use of the Interface. Amx.exchange does not\n                    endorse or assume any responsibility for such resources or promotions. Suppose you access any such\n                    resources or participate in any such promotions. In that case, you do so at your own risk and\n                    understand that these Terms do not apply to your dealings or relationships with any third parties.\n                    You expressly relieve Amx.exchange of all liability arising from using such resources or participating in\n                    such promotions.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    6.3. You understand that the Arbitrum and Polygon blockchain remains under development, which\n                    creates technological and security risks when using the Interface, in addition to uncertainty\n                    relating to digital assets and transactions therein. You acknowledge that the cost of transacting on\n                    the Arbitrum and Polygon blockchain is variable and may increase at any time, causing an impact on\n                    any activities taking place on these blockchains, which may result in price fluctuations or\n                    increased costs when using the Interface.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    6.4. Transactions entered into in connection with the Interface are irreversible and final, and\n                    there are no refunds. You acknowledge and agree that you will access and use the Interface at your\n                    own risk.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    6.5. We must comply with Applicable Law, which may require us to, upon request by government\n                    agencies, take certain actions or provide information that may not be in your best interests.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    6.6. You hereby assume and agree that Amx.exchange will have no responsibility or liability for the risks\n                    in Section 9. You hereby irrevocably waive, release and discharge all claims, whether known or\n                    unknown to you, against Amx.exchange, its affiliates, and their respective shareholders, members,\n                    directors, officers, employees, agents, representatives, suppliers, and contractors related to any\n                    of the risks set forth in this Section 6.\n                  </p>\n                </li>\n              </ul>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">7. PROHIBITED USES</h3>\n              <ul className=\"list-style-none\">\n                <li>\n                  <p className=\"body-text\">\n                    7.1 You agree not to engage in the prohibited uses set forth below. The specific activities set\n                    forth below are representative but not exhaustive. By using the Site or the Interface, you confirm\n                    that you will not do any of the following:\n                  </p>\n                  <ul className=\"list-style-none\">\n                    <li>\n                      <p className=\"body-text\">\n                        7.1.1. Promote or facilitate illegal activities, including but not limited to money laundering,\n                        terrorist financing, tax evasion, buying or selling illegal drugs, contraband, counterfeit\n                        goods, or illegal weapons;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        7.1.2. Engage in transactions involving items that infringe or violate any copyright, trademark,\n                        right of publicity, privacy, or any other proprietary right of Amx.exchange;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        7.1.3. Engage in improper or abusive trading practices, including but not limited to (a) any\n                        fraudulent act or scheme to defraud, deceive, trick, or mislead; (b) trading ahead of another\n                        user of the Site or the Interface or front-running; (c) fraudulent trading; (d) accommodation\n                        trading; (e) fictitious transactions; (f) pre-arranged or non-competitive transactions; or (g)\n                        cornering;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        7.1.4. Uploading or transmitting viruses, worms, Trojan horses, time bombs, cancelbots, spiders,\n                        malware, or any other type of malicious code that will or may be used in any way that will\n                        affect the functionality or operation of the Site or the Interface;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        7.1.5. Use the Site or Interface in any way that is, in our sole discretion, libelous,\n                        defamatory, profane, obscene, pornographic, sexually explicit, indecent, lewd, vulgar,\n                        suggestive, harassing, stalking, hateful, threatening, offensive, discriminatory, bigoted,\n                        abusive, inflammatory, fraudulent, deceptive, or otherwise objectionable or likely or intended\n                        to incite, threaten, facilitate, promote, or encourage hate, racial intolerance, or violent acts\n                        against others;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        7.1.6. Harass, abuse, or harm another person or entity, including Amx.exchange's collaborator and\n                        service providers;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        7.1.7. Impersonate another user of the Site or the Interface or otherwise misrepresent yourself;\n                        or\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        7.1.8. Engage or attempt to engage or encourage, induce or assist any third party, or yourself\n                        attempt, to engage in any of the activities prohibited under this Section 4 or any other\n                        provision of these Terms.\n                      </p>\n                    </li>\n                  </ul>\n                </li>\n              </ul>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">8. DISCLOSURES; DISCLAIMERS</h3>\n              <p className=\"body-text\">\n                Amx.exchange is an informational site for the $AMX Protocol. Amx.exchange does not operate an exchange platform or\n                offer trade execution or clearing services and has no oversight, involvement, or control concerning your\n                transactions using the Interface. All transactions between users of the Interface are executed\n                peer-to-peer directly between the users' blockchain addresses through a third-party developed\n                open-source smart contract.\n              </p>\n              <p className=\"body-text\">\n                You are responsible for complying with all Applicable Laws that govern your Perpetual Contracts. As a\n                result of restrictions under the Commodity Exchange Act and the regulations promulgated thereunder by\n                the U.S. Commodity Futures Trading Commission (\"CFTC\"), no U.S. Person may enter into Perpetual\n                Contracts using the Interface.\n              </p>\n              <p className=\"body-text\">\n                You understand that Amx.exchange is not registered or licensed by any regulatory agency or authority. No such\n                agency or authority has reviewed or approved the use of the Site or the Interface.\n              </p>\n              <p className=\"body-text\">\n                You agree that the Site and the Interface are provided on an \"AS IS\" and \"AS AVAILABLE\" basis. Amx.exchange\n                makes no guarantees of any kind or connection with the Site or the Interface.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">9. LIMITATION OF LIABILITY</h3>\n              <p className=\"body-text\">\n                In no event shall Amx.exchange, its affiliates, its suppliers and contractors, and its affiliates', suppliers'\n                and contractors' respective stockholders, members, directors, officers, managers, employees, attorneys,\n                agents, representatives, suppliers, and contractors shall be liable for any direct, indirect,\n                incidental, special, punitive, consequential or similar damages or liabilities whatsoever (including,\n                without limitation, damages for loss of fiat, assets, data, information, revenue, opportunities, use,\n                goodwill, profits or other business or financial benefit) arising out of or in connection with the Site\n                or the Interface, or other item provided by or on behalf of Amx.exchange, whether under contract, tort\n                (including negligence), civil liability, statute, strict liability, breach of warranties, or under any\n                other theory of liability, and whether or not we have been advised of, knew of or should have known of\n                the possibility of such damages and notwithstanding any failure of the essential purpose of these Terms\n                or any limited remedy hereunder nor is Amx.exchange in any way responsible for the execution or settlement of\n                transactions between users of the Interface.\n              </p>\n              <p className=\"body-text\">\n                In no event shall Amx.exchange's aggregate liability arising out of or in connection with the Site or\n                Interface exceed one thousand Singapore Dollars (1,000.00 SGD).\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">10. INDEMNIFICATION</h3>\n              <p className=\"body-text\">\n                You will defend, indemnify, and hold harmless Amx.exchange, its affiliates, members, member, managers,\n                employees, attorneys, representatives, suppliers, and contractors from any claim, demand, lawsuit,\n                action, proceeding, investigation, liability, damage, loss, cost or expense, including without\n                limitation reasonable attorneys' fees, arising out of or relating to (a) your use of or conduct in\n                connection with the Site or the Interface (b) your violation of these Terms; or (c) your misuse of the\n                Site or the Interface, or any smart contract and/or script related thereto; (d) your violation of any\n                laws, rules, regulations, codes, statutes, ordinances, or orders of any governmental or\n                quasi-governmental authorities; (e) your violation of the rights of any third party, including any\n                intellectual property right, publicity, confidentiality, property, or privacy right; (f) your use of a\n                third-party product, service, and/or website; or (g) any misrepresentation made by you. We reserve the\n                right to assume, at your expense, the exclusive defense, and control of any matter subject to\n                indemnification by you. You agree to cooperate with our defense of any claim. You will not, in any\n                event, settle any claim without.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">11. DISPUTE RESOLUTION & ARBITRATION</h3>\n              <p className=\"body-text\">\n                Amx.exchange will use its best efforts to resolve potential disputes through informal, good faith\n                negotiations. If a potential dispute arises, you must contact us by sending a written notice of your\n                claim (\"Notice\") to Amx.exchange on any of our official channels. The notice must (a) describe the nature and\n                basis of the claim and (b) set forth the specific relief sought. Our notice to you will be similar in\n                form to that described above. If you and Amx.exchange cannot reach an agreement to resolve the claim within\n                sixty (60) days of your email, then you and Amx.exchange agree to resolve the potential dispute according to\n                the process set forth below.\n              </p>\n              <p className=\"body-text\">\n                Any claim or controversy arising out of or relating to the Site, the Interface, or these Terms, or any\n                other acts or omissions for which you may contend that we are liable, including (but not limited to) any\n                claim or controversy as to arbitrability (\"Dispute\"), shall be finally and exclusively settled by\n                arbitration under the Corte Civil y Mercantil de Arbitraje (CIMA). You understand that you are required\n                to resolve all Disputes by binding arbitration. The arbitration shall be confidential before a single\n                arbitrator, who shall be selected pursuant to the CIMA rules. The arbitration will be held in Madrid,\n                Spain, unless you and we both agree to hold it elsewhere. Unless we agree otherwise, the arbitrator may\n                not consolidate your claims with those of any other party. Any judgment on the award rendered by the\n                arbitrator may be entered in any court of competent jurisdiction.\n              </p>\n              <p className=\"body-text\">\n                Any claim arising out of or related to these Terms or the Site or the Interface must be filed within one\n                year after such claim arose; otherwise, the claim is permanently barred, which means that you and Amx.exchange\n                will not have the right to assert the claim.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">12. GOVERNING LAW</h3>\n              <p className=\"body-text\">\n                The interpretation and enforcement of these Terms, and any dispute related to these Terms, the Site, or\n                the Interface, will be governed by and construed and enforced under the laws of the Bahamas, as\n                applicable.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">13. GENERAL INFORMATION</h3>\n              <ul className=\"list-style-none\">\n                <li>\n                  <p className=\"body-text\">\n                    13.1. Any right or remedy of Amx.exchange set forth in these Terms is in addition to, and not in lieu of,\n                    any other right or remedy whether described in these Terms, under Applicable Law, at law, or in\n                    equity. The failure or delay of Amx.exchange in exercising any right, power, or privilege under these\n                    Terms shall not operate as a waiver thereof.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    13.2. The following sections of these Terms will survive any termination of your access to the Site\n                    or the Interface, regardless of the reasons for its expiration or termination, in addition to any\n                    other provision which by law or by its nature should survive: Sections 3 through 12.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    13.3. The invalidity or unenforceability of any of these Terms shall not affect the validity or\n                    enforceability of any other of these Terms, all of which shall remain in full force and effect.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    13.4. Amx.exchange will have no responsibility or liability for any failure or delay in performance of the\n                    Site or the Interface, or any loss or damage that you may incur, due to any circumstance or event\n                    beyond our control, including without limitation any flood, extraordinary weather conditions,\n                    earthquake, or other act of God, fire, war, insurrection, riot, labor dispute, accident, any law,\n                    order regulation, direction, action or request of the government, communications, power failure, or\n                    equipment or software malfunction.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    13.5. You may not assign or transfer any right to use the Site, the Interface, or any of your rights\n                    or obligations under these Terms, without our express prior written consent, including by operation\n                    of law or in connection with any change of control. We may assign or transfer any or all of our\n                    rights or obligations under these Terms, in whole or part, without notice or obtaining your consent\n                    or approval.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    13.6. These Terms contain the entire agreement between you and Amx.exchange and supersede all prior and\n                    contemporaneous understandings between the parties regarding the Interface and the Site or the\n                    Interface.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    13.7. In the event of any conflict between these Terms and any other agreement you may have with us,\n                    these Terms will control unless the other agreement specifically identifies these Terms and declares\n                    that the other agreement supersedes these Terms.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    13.8. You agree that, except as otherwise expressly provided in these Terms, there shall be no\n                    third-party beneficiaries to the Terms other than the Indemnified Parties.\n                  </p>\n                </li>\n              </ul>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">CONTACT INFORMATION</h3>\n              <p className=\"body-text\">\n                If you have any questions about these Terms, the Site, or the Interface, please get in touch with Amx.exchange\n                on any of our official channels.\n              </p>\n            </div>\n          </div>\n        </div>\n        <Footer />\n      </div>\n    </SEO>\n  );\n}\n","import \"./RedirectModal.css\";\nimport Modal from \"../Modal/Modal\";\nimport Checkbox from \"../Checkbox/Checkbox\";\nimport { t, Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nexport function RedirectPopupModal({\n  redirectModalVisible,\n  setRedirectModalVisible,\n  appRedirectUrl,\n  setRedirectPopupTimestamp,\n  setShouldHideRedirectModal,\n  shouldHideRedirectModal,\n  removeRedirectPopupTimestamp,\n}) {\n  const onClickAgree = () => {\n    if (shouldHideRedirectModal) {\n      setRedirectPopupTimestamp(Date.now());\n    }\n  };\n\n  return (\n    <Modal\n      className=\"RedirectModal\"\n      isVisible={redirectModalVisible}\n      setIsVisible={setRedirectModalVisible}\n      label={t`Launch App`}\n    >\n      <Trans>You are leaving $AMX.io and will be redirected to a third party, independent website.</Trans>\n      <br />\n      <br />\n      <Trans>\n        The website is a community deployed and maintained instance of the open source{\" \"}\n        <ExternalLink href=\"https://github.com/Amx-Dex/amx-interface\">$AMX front end</ExternalLink>, hosted and served on\n        the distributed, peer-to-peer <ExternalLink href=\"https://ipfs.io/\">IPFS network</ExternalLink>.\n      </Trans>\n      <br />\n      <br />\n      <Trans>\n        Alternative links can be found in the{\" \"}\n        <ExternalLink href=\"https://amxdex.gitbook.io/amxdex/app-links\">docs</ExternalLink>.\n        <br />\n        <br />\n        By clicking Agree you accept the <ExternalLink href=\"https://app.amx.exchange/#/terms-and-conditions\">\n          T&Cs\n        </ExternalLink>{\" \"}\n        and <ExternalLink href=\"https://app.amx.exchange/#/referral-terms\">Referral T&Cs</ExternalLink>.\n        <br />\n        <br />\n      </Trans>\n      <div className=\"mb-sm\">\n        <Checkbox isChecked={shouldHideRedirectModal} setIsChecked={setShouldHideRedirectModal}>\n          <Trans>Don't show this message again for 30 days.</Trans>\n        </Checkbox>\n      </div>\n      <ExternalLink href={appRedirectUrl} className=\"App-cta Exchange-swap-button\" onClick={() => onClickAgree()}>\n        <Trans>Agree</Trans>\n      </ExternalLink>\n    </Modal>\n  );\n}\n","import React from \"react\";\nimport \"./Jobs.css\";\nimport SEO from \"components/Common/SEO\";\nimport Footer from \"components/Footer/Footer\";\nimport { getPageTitle } from \"lib/legacy\";\nimport Card from \"components/Common/Card\";\nimport { t, Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nfunction Jobs() {\n  return (\n    <SEO title={getPageTitle(\"Job Openings\")}>\n      <div className=\"default-container page-layout Referrals\">\n        <div className=\"section-title-block\">\n          <div className=\"section-title-icon\" />\n          <div className=\"section-title-content\">\n            <div className=\"Page-title\">\n              <Trans>Jobs</Trans>\n            </div>\n            <div className=\"Page-description\">\n              <Trans>Job openings at $AMX.</Trans>\n            </div>\n          </div>\n        </div>\n        <div className=\"jobs-page-body\">\n          <NoJob />\n        </div>\n      </div>\n      <Footer />\n    </SEO>\n  );\n}\n\nfunction NoJob() {\n  return (\n    <Card title={t`No open positions at $AMX currently`}>\n      <div className=\"body-para\">\n        <p className=\"subheading\">\n          <Trans>\n          $AMX is not actively looking for new hires at the moment. However, if you think you can contribute to the\n            project, please email <ExternalLink href=\"mailto:jobs@gmx.io\">jobs@gmx.io</ExternalLink>.\n          </Trans>\n        </p>\n      </div>\n    </Card>\n  );\n}\n\n// function JobCard() {\n//   return (\n//     <Card title=\"Senior front-end developer (Full-time position)\">\n//       <div className=\"body-para\">\n//         <p className=\"subheading\">What you will do:</p>\n//         <ul>\n//           <li>Work closely with the $AMX team on the $AMX front-end website.</li>\n//           <li>Collaborate and discuss features to be worked on.</li>\n//           <li>Remote full-time position, flexible working hours.</li>\n//         </ul>\n//         <div className=\"mt-lg\">\n//           <p className=\"subheading\">What we are looking for:</p>\n//           <ul>\n//             <li>Required skills: HTML5, CSS3, React, Ethers, Web3 JS.</li>\n//             <li>Bonus skills: Node JS.</li>\n//             <li>5+ years of experience.</li>\n//             <li>Previous DeFi experience and knowledge.</li>\n//             <li>Must speak fluent English and available to start right away.</li>\n//             <li>Comfortable making changes to the interface following our current design guidelines.</li>\n//           </ul>\n//           <p>The salary is 60,000 to 120,000 USD + 1,000 to 3,000 $AMX a year.</p>\n//           <p className=\"jobs-contact\">\n//             If the job suits you, please get in touch with{\" \"}\n//             <a target=\"_blank\" href=\"mailto:jobs@gmx.io\" rel=\"noopener noreferrer\">\n//               jobs@gmx.io\n//             </a>{\" \"}\n//             using the following email subject: Application for Senior front-end developer: [Your name]\n//           </p>\n//         </div>\n//       </div>\n//     </Card>\n//   );\n// }\n\nexport default Jobs;\n","import { i18n } from \"@lingui/core\";\nimport { en, es, zh, ko, ru, ja, fr, de } from \"make-plural/plurals\";\nimport { LANGUAGE_LOCALSTORAGE_KEY } from \"config/localStorage\";\nimport { isDevelopment } from \"./legacy\";\n\n// uses BCP-47 codes from https://unicode-org.github.io/cldr-staging/charts/latest/supplemental/language_plural_rules.html\nexport const locales = {\n  en: \"English\",\n  es: \"Spanish\",\n  zh: \"Chinese\",\n  ko: \"Korean\",\n  // ru: \"Russian\",\n  ja: \"Japanese\",\n  // fr: \"French\",\n  // de: \"German\",\n  ...(isDevelopment() && { pseudo: \"Test\" }),\n};\n\nexport const defaultLocale = \"en\";\n\ni18n.loadLocaleData({\n  en: { plurals: en },\n  es: { plurals: es },\n  zh: { plurals: zh },\n  ko: { plurals: ko },\n  ru: { plurals: ru },\n  ja: { plurals: ja },\n  fr: { plurals: fr },\n  de: { plurals: de },\n  ...(isDevelopment() && { pseudo: { plurals: en } }),\n});\n\nexport function isTestLanguage(locale) {\n  return locale === \"pseudo\";\n}\n\nexport async function dynamicActivate(locale) {\n  const { messages } = await import(`@lingui/loader!locales/${locale}/messages.po`);\n  if (!isTestLanguage(locale)) {\n    localStorage.setItem(LANGUAGE_LOCALSTORAGE_KEY, locale);\n  }\n  i18n.load(locale, messages);\n  i18n.activate(locale);\n}\n","import \"./AddressDropdown.css\";\nimport { Menu } from \"@headlessui/react\";\nimport { Trans } from \"@lingui/macro\";\nimport { shortenAddress, useENS } from \"lib/legacy\";\nimport { useCopyToClipboard, createBreakpoint } from \"react-use\";\nimport externalLink from \"img/ic_new_link_16.svg\";\nimport copy from \"img/ic_copy_16.svg\";\nimport disconnect from \"img/ic_sign_out_16.svg\";\nimport { FaChevronDown } from \"react-icons/fa\";\nimport Davatar from \"@davatar/react\";\nimport { helperToast } from \"lib/helperToast\";\n\nfunction AddressDropdown({ account, accountUrl, disconnectAccountAndCloseSettings }) {\n  const useBreakpoint = createBreakpoint({ L: 600, M: 550, S: 400 });\n  const breakpoint = useBreakpoint();\n  const [, copyToClipboard] = useCopyToClipboard();\n  const { ensName } = useENS(account);\n\n  return (\n    <Menu>\n      <Menu.Button as=\"div\">\n        <button className=\"App-cta small transparent address-btn\">\n          <div className=\"user-avatar\">\n            <Davatar size={20} address={account} />\n          </div>\n          <span className=\"user-address\">{ensName || shortenAddress(account, breakpoint === \"S\" ? 9 : 13)}</span>\n          <FaChevronDown />\n        </button>\n      </Menu.Button>\n      <div>\n        <Menu.Items as=\"div\" className=\"menu-items\">\n          <Menu.Item>\n            <div\n              className=\"menu-item\"\n              onClick={() => {\n                copyToClipboard(account);\n                helperToast.success(\"Address copied to your clipboard\");\n              }}\n            >\n              <img src={copy} alt=\"Copy user address\" />\n              <p>\n                <Trans>Copy Address</Trans>\n              </p>\n            </div>\n          </Menu.Item>\n          <Menu.Item>\n            <a href={accountUrl} target=\"_blank\" rel=\"noopener noreferrer\" className=\"menu-item\">\n              <img src={externalLink} alt=\"Open address in explorer\" />\n              <p>\n                <Trans>View in Explorer</Trans>\n              </p>\n            </a>\n          </Menu.Item>\n          <Menu.Item>\n            <div className=\"menu-item\" onClick={disconnectAccountAndCloseSettings}>\n              <img src={disconnect} alt=\"Disconnect the wallet\" />\n              <p>\n                <Trans>Disconnect</Trans>\n              </p>\n            </div>\n          </Menu.Item>\n        </Menu.Items>\n      </div>\n    </Menu>\n  );\n}\n\nexport default AddressDropdown;\n","import { ReactNode } from \"react\";\nimport cx from \"classnames\";\nimport \"./Button.css\";\n\ntype Props = {\n  imgSrc: string;\n  children: ReactNode;\n  onClick: () => void;\n  className?: string;\n};\n\nexport default function ConnectWalletButton({ imgSrc, children, onClick, className }: Props) {\n  let classNames = cx(\"btn btn-primary btn-sm connect-wallet\", className);\n  return (\n    <button className={classNames} onClick={onClick}>\n      {imgSrc && <img className=\"btn-image\" src={imgSrc} alt=\"Connect Wallet\" />}\n      <span className=\"btn-label\">{children}</span>\n    </button>\n  );\n}\n","import Portal from \"../Common/Portal\";\nimport Modal from \"./Modal\";\n\nexport default function ModalWithPortal(props) {\n  return (\n    <Portal>\n      <Modal {...props} />\n    </Portal>\n  );\n}\n","import React, { useRef, useState } from \"react\";\nimport { Menu } from \"@headlessui/react\";\nimport ModalWithPortal from \"../Modal/ModalWithPortal\";\nimport { t, Trans } from \"@lingui/macro\";\nimport cx from \"classnames\";\nimport { HiDotsVertical } from \"react-icons/hi\";\nimport \"./NetworkDropdown.css\";\nimport language24Icon from \"img/ic_language24.svg\";\nimport settingsIcon from \"img/ic_settings_16.svg\";\nimport arbitrumIcon from \"img/ic_arbitrum_24.svg\";\nimport maticIcon from \"img/ic_polygon_24.svg\";\nimport checkedIcon from \"img/ic_checked.svg\";\nimport { importImage } from \"lib/legacy\";\nimport { defaultLocale, dynamicActivate, isTestLanguage, locales } from \"lib/i18n\";\nimport { LANGUAGE_LOCALSTORAGE_KEY } from \"config/localStorage\";\n\nconst LANGUAGE_MODAL_KEY = \"LANGUAGE\";\nconst NETWORK_MODAL_KEY = \"NETWORK\";\n\nexport default function NetworkDropdown(props) {\n  const currentLanguage = useRef(localStorage.getItem(LANGUAGE_LOCALSTORAGE_KEY) || defaultLocale);\n  const [activeModal, setActiveModal] = useState(null);\n\n  function getModalContent(modalName) {\n    switch (modalName) {\n      case LANGUAGE_MODAL_KEY:\n        return <LanguageModalContent currentLanguage={currentLanguage} />;\n      case NETWORK_MODAL_KEY:\n        return (\n          <NetworkModalContent\n            setActiveModal={setActiveModal}\n            networkOptions={props.networkOptions}\n            onNetworkSelect={props.onNetworkSelect}\n            selectorLabel={props.selectorLabel}\n            openSettings={props.openSettings}\n          />\n        );\n      default:\n        return;\n    }\n  }\n\n  function getModalProps(modalName) {\n    switch (modalName) {\n      case LANGUAGE_MODAL_KEY:\n        return {\n          className: \"language-popup\",\n          isVisible: activeModal === LANGUAGE_MODAL_KEY,\n          setIsVisible: () => setActiveModal(null),\n          label: t`Select Language`,\n        };\n      case NETWORK_MODAL_KEY:\n        return {\n          className: \"network-popup\",\n          isVisible: activeModal === NETWORK_MODAL_KEY,\n          setIsVisible: () => setActiveModal(null),\n          label: t`Networks and Settings`,\n        };\n      default:\n        return {};\n    }\n  }\n\n  return (\n    <>\n      {props.small ? (\n        <div className=\"App-header-network\" onClick={() => setActiveModal(NETWORK_MODAL_KEY)}>\n          <div className=\"network-dropdown\">\n            <NavIcons selectorLabel={props.selectorLabel} />\n          </div>\n        </div>\n      ) : (\n        <DesktopDropdown\n          currentLanguage={currentLanguage}\n          activeModal={activeModal}\n          setActiveModal={setActiveModal}\n          {...props}\n        />\n      )}\n      <ModalWithPortal {...getModalProps(activeModal)}>{getModalContent(activeModal)}</ModalWithPortal>\n    </>\n  );\n}\nfunction NavIcons({ selectorLabel }) {\n  return (\n    <>\n      <button className={cx(\"btn-primary small transparent\")}>\n        <img\n          className=\"network-dropdown-icon\"\n          src={selectorLabel === \"Arbitrum\" ? arbitrumIcon : maticIcon}\n          alt={selectorLabel}\n        />\n      </button>\n      <div className=\"network-dropdown-seperator\" />\n      <button className={cx(\"btn-primary small transparent\")}>\n        <HiDotsVertical color=\"white\" size={20} />\n      </button>\n    </>\n  );\n}\n\nfunction DesktopDropdown({ setActiveModal, selectorLabel, networkOptions, onNetworkSelect, openSettings }) {\n  return (\n    <div className=\"App-header-network\">\n      <Menu>\n        <Menu.Button as=\"div\" className=\"network-dropdown\">\n          <NavIcons selectorLabel={selectorLabel} />\n        </Menu.Button>\n        <Menu.Items as=\"div\" className=\"menu-items network-dropdown-items\">\n          <div className=\"dropdown-label\">\n            <Trans>Networks</Trans>\n          </div>\n          <div className=\"network-dropdown-list\">\n            <NetworkMenuItems\n              networkOptions={networkOptions}\n              selectorLabel={selectorLabel}\n              onNetworkSelect={onNetworkSelect}\n            />\n          </div>\n          <div className=\"network-dropdown-divider\" />\n          <Menu.Item>\n            <div className=\"network-dropdown-menu-item menu-item\" onClick={openSettings}>\n              <div className=\"menu-item-group\">\n                <div className=\"menu-item-icon\">\n                  <img className=\"network-dropdown-icon\" src={settingsIcon} alt=\"\" />\n                </div>\n                <span className=\"network-dropdown-item-label\">\n                  <Trans>Settings</Trans>\n                </span>\n              </div>\n            </div>\n          </Menu.Item>\n          <Menu.Item>\n            <div\n              className=\"network-dropdown-menu-item menu-item last-dropdown-menu\"\n              onClick={() => setActiveModal(LANGUAGE_MODAL_KEY)}\n            >\n              <div className=\"menu-item-group\">\n                <div className=\"menu-item-icon\">\n                  <img className=\"network-dropdown-icon\" src={language24Icon} alt=\"\" />\n                </div>\n                <span className=\"network-dropdown-item-label\">\n                  <Trans>Language</Trans>\n                </span>\n              </div>\n            </div>\n          </Menu.Item>\n        </Menu.Items>\n      </Menu>\n    </div>\n  );\n}\n\nfunction NetworkMenuItems({ networkOptions, selectorLabel, onNetworkSelect }) {\n  async function handleNetworkSelect(option) {\n    await onNetworkSelect(option);\n  }\n  return networkOptions.map((network) => {\n    const networkIcon = importImage(network.icon);\n    return (\n      <Menu.Item key={network.value}>\n        <div\n          className=\"network-dropdown-menu-item menu-item\"\n          onClick={() => handleNetworkSelect({ value: network.value })}\n        >\n          <div className=\"menu-item-group\">\n            <div className=\"menu-item-icon\">\n              <img className=\"network-dropdown-icon\" src={networkIcon} alt={network.label} />\n            </div>\n            <span className=\"network-dropdown-item-label\">{network.label}</span>\n          </div>\n          <div className=\"network-dropdown-menu-item-img\">\n            <div className={cx(\"active-dot\", { [selectorLabel]: selectorLabel === network.label })} />\n          </div>\n        </div>\n      </Menu.Item>\n    );\n  });\n}\n\nfunction LanguageModalContent({ currentLanguage }) {\n  return Object.keys(locales).map((item) => {\n    const image = !isTestLanguage(item) && importImage(`flag_${item}.svg`);\n    return (\n      <div\n        key={item}\n        className={cx(\"network-dropdown-menu-item  menu-item language-modal-item\", {\n          active: currentLanguage.current === item,\n        })}\n        onClick={() => {\n          if (!isTestLanguage(item)) {\n            localStorage.setItem(LANGUAGE_LOCALSTORAGE_KEY, item);\n          }\n          dynamicActivate(item);\n        }}\n      >\n        <div className=\"menu-item-group\">\n          <div className=\"menu-item-icon\">\n            {isTestLanguage(item) ? \"🫐\" : <img className=\"network-dropdown-icon\" src={image} alt={locales[item]} />}\n          </div>\n          <span className=\"network-dropdown-item-label menu-item-label\">{locales[item]}</span>\n        </div>\n        <div className=\"network-dropdown-menu-item-img\">\n          {currentLanguage.current === item && <img src={checkedIcon} alt={locales[item]} />}\n        </div>\n      </div>\n    );\n  });\n}\nfunction NetworkModalContent({ networkOptions, onNetworkSelect, selectorLabel, setActiveModal, openSettings }) {\n  async function handleNetworkSelect(option) {\n    await onNetworkSelect(option);\n  }\n  return (\n    <div className=\"network-dropdown-items\">\n      <div className=\"network-dropdown-list\">\n        <span className=\"network-dropdown-label\">\n          <Trans>Networks</Trans>\n        </span>\n\n        {networkOptions.map((network) => {\n          const networkIcon = importImage(network.icon);\n          return (\n            <div\n              className=\"network-option\"\n              onClick={() => handleNetworkSelect({ value: network.value })}\n              key={network.value}\n            >\n              <div className=\"menu-item-group\">\n                <img src={networkIcon} alt={network.label} />\n                <span>{network.label}</span>\n              </div>\n              <div className={cx(\"active-dot\", { [selectorLabel]: selectorLabel === network.label })} />\n            </div>\n          );\n        })}\n        <span className=\"network-dropdown-label more-options\">\n          <Trans>More Options</Trans>\n        </span>\n        <div\n          className=\"network-option\"\n          onClick={() => {\n            setActiveModal(LANGUAGE_MODAL_KEY);\n          }}\n        >\n          <div className=\"menu-item-group\">\n            <img className=\"network-option-img\" src={language24Icon} alt=\"Select Language\" />\n            <span className=\"network-option-img-label\">Language</span>\n          </div>\n        </div>\n        <div\n          className=\"network-option\"\n          onClick={() => {\n            openSettings();\n            setActiveModal(null);\n          }}\n        >\n          <div className=\"menu-item-group\">\n            <img className=\"network-option-img\" src={settingsIcon} alt=\"\" />\n            <span className=\"network-option-img-label\">\n              <Trans>Settings</Trans>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useRef, useState } from \"react\";\nimport ModalWithPortal from \"../Modal/ModalWithPortal\";\nimport { t } from \"@lingui/macro\";\nimport cx from \"classnames\";\nimport \"./NetworkDropdown.css\";\nimport language24Icon from \"img/ic_language24.svg\";\nimport checkedIcon from \"img/ic_checked.svg\";\nimport { importImage, isHomeSite } from \"lib/legacy\";\nimport { defaultLocale, dynamicActivate, locales } from \"lib/i18n\";\nimport { LANGUAGE_LOCALSTORAGE_KEY } from \"config/localStorage\";\n\nexport default function LanguagePopupHome() {\n  const currentLanguage = useRef(localStorage.getItem(LANGUAGE_LOCALSTORAGE_KEY) || defaultLocale);\n  const [isLanguageModalOpen, setIsLanguageModalOpen] = useState(false);\n\n  return (\n    <>\n      <div className=\"App-header-network App-header-language\" onClick={() => setIsLanguageModalOpen(true)}>\n        <div className={cx(\"network-dropdown\", { \"homepage-header\": isHomeSite() })}>\n          <button className={cx(\"btn-primary small transparent\")}>\n            <img className=\"network-dropdown-icon\" src={language24Icon} alt=\"Select Language\" />\n          </button>\n        </div>\n      </div>\n\n      <ModalWithPortal\n        className=\"language-popup\"\n        isVisible={isLanguageModalOpen}\n        setIsVisible={setIsLanguageModalOpen}\n        label={t`Select Language`}\n      >\n        {Object.keys(locales).map((item) => {\n          const image = importImage(`flag_${item}.svg`);\n          return (\n            <div\n              key={item}\n              className={cx(\"network-dropdown-menu-item  menu-item language-modal-item\", {\n                active: currentLanguage.current === item,\n              })}\n              onClick={() => {\n                localStorage.setItem(LANGUAGE_LOCALSTORAGE_KEY, item);\n                dynamicActivate(item);\n              }}\n            >\n              <div className=\"menu-item-group\">\n                <div className=\"menu-item-icon\">\n                  <img className=\"network-dropdown-icon\" src={image} alt=\"language-menu-open-icon\" />\n                </div>\n                <span className=\"network-dropdown-item-label menu-item-label\">{locales[item]}</span>\n              </div>\n              <div className=\"network-dropdown-menu-item-img\">\n                {currentLanguage.current === item && <img src={checkedIcon} alt={locales[item]} />}\n              </div>\n            </div>\n          );\n        })}\n      </ModalWithPortal>\n    </>\n  );\n}\n","import { useWeb3React } from \"@web3-react/core\";\nimport AddressDropdown from \"../AddressDropdown/AddressDropdown\";\nimport ConnectWalletButton from \"../Common/ConnectWalletButton\";\nimport React, { useCallback, useEffect } from \"react\";\nimport { HeaderLink } from \"./HeaderLink\";\nimport connectWalletImg from \"img/ic_wallet_24.svg\";\n\nimport \"./Header.css\";\nimport { isHomeSite, getAccountUrl } from \"lib/legacy\";\nimport { isDevelopment } from \"lib/legacy\";\nimport cx from \"classnames\";\nimport { Trans } from \"@lingui/macro\";\nimport NetworkDropdown from \"../NetworkDropdown/NetworkDropdown\";\nimport LanguagePopupHome from \"../NetworkDropdown/LanguagePopupHome\";\nimport { ARBITRUM, ARBITRUM_TESTNET, POLYGON, getChainName } from \"config/chains\";\nimport { switchNetwork } from \"lib/wallets\";\nimport { useChainId } from \"lib/chains\";\n\ntype Props = {\n  openSettings: () => void;\n  small?: boolean;\n  setWalletModalVisible: (visible: boolean) => void;\n  disconnectAccountAndCloseSettings: () => void;\n  redirectPopupTimestamp: number;\n  showRedirectModal: (to: string) => void;\n};\n\nexport function AppHeaderUser({\n  openSettings,\n  small,\n  setWalletModalVisible,\n  disconnectAccountAndCloseSettings,\n  redirectPopupTimestamp,\n  showRedirectModal,\n}: Props) {\n  const { chainId } = useChainId();\n  const { active, account } = useWeb3React();\n  const showConnectionOptions = !isHomeSite();\n\n  const networkOptions = [\n    // {\n    //   label: getChainName(ARBITRUM),\n    //   value: ARBITRUM,\n    //   icon: \"ic_arbitrum_24.svg\",\n    //   color: \"#264f79\",\n    // },\n    {\n      label: getChainName(POLYGON),\n      value: POLYGON,\n      icon: \"ic_polygon_24.svg\",\n      color: \"#E841424D\",\n    },\n  ];\n  // if (isDevelopment()) {\n  //   networkOptions.push({\n  //     label: getChainName(ARBITRUM_TESTNET),\n  //     value: ARBITRUM_TESTNET,\n  //     icon: \"ic_arbitrum_24.svg\",\n  //     color: \"#264f79\",\n  //   });\n  // }\n\n  useEffect(() => {\n    if (active) {\n      setWalletModalVisible(false);\n    }\n  }, [active, setWalletModalVisible]);\n\n  const onNetworkSelect = useCallback(\n    (option) => {\n      if (option.value === chainId) {\n        return;\n      }\n      return switchNetwork(option.value, active);\n    },\n    [chainId, active]\n  );\n\n  const selectorLabel = getChainName(chainId);\n\n  if (!active) {\n    return (\n      <div className=\"App-header-user\">\n        <div className={cx(\"App-header-trade-link\", { \"homepage-header\": isHomeSite() })}>\n          <HeaderLink\n            className=\"default-btn\"\n            to=\"/trade\"\n            redirectPopupTimestamp={redirectPopupTimestamp}\n            showRedirectModal={showRedirectModal}\n          >\n            <Trans>Trade</Trans>\n          </HeaderLink>\n        </div>\n\n        {showConnectionOptions ? (\n          <>\n            <ConnectWalletButton onClick={() => setWalletModalVisible(true)} imgSrc={connectWalletImg}>\n              {small ? <Trans>Connect</Trans> : <Trans>Connect Wallet</Trans>}\n            </ConnectWalletButton>\n            <NetworkDropdown\n              small={small}\n              networkOptions={networkOptions}\n              selectorLabel={selectorLabel}\n              onNetworkSelect={onNetworkSelect}\n              openSettings={openSettings}\n            />\n          </>\n        ) : (\n          <LanguagePopupHome />\n        )}\n      </div>\n    );\n  }\n\n  const accountUrl = getAccountUrl(chainId, account);\n\n  return (\n    <div className=\"App-header-user\">\n      <div className=\"App-header-trade-link\">\n        <HeaderLink\n          className=\"default-btn\"\n          to=\"/trade\"\n          redirectPopupTimestamp={redirectPopupTimestamp}\n          showRedirectModal={showRedirectModal}\n        >\n          <Trans>Trade</Trans>\n        </HeaderLink>\n      </div>\n\n      {showConnectionOptions ? (\n        <>\n          <div className=\"App-header-user-address\">\n            <AddressDropdown\n              account={account}\n              accountUrl={accountUrl}\n              disconnectAccountAndCloseSettings={disconnectAccountAndCloseSettings}\n            />\n          </div>\n          <NetworkDropdown\n            small={small}\n            networkOptions={networkOptions}\n            selectorLabel={selectorLabel}\n            onNetworkSelect={onNetworkSelect}\n            openSettings={openSettings}\n          />\n        </>\n      ) : (\n        <LanguagePopupHome />\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { FiX } from \"react-icons/fi\";\nimport { Trans } from \"@lingui/macro\";\nimport { Link } from \"react-router-dom\";\n\nimport { HeaderLink } from \"./HeaderLink\";\nimport \"./Header.css\";\nimport { isHomeSite } from \"lib/legacy\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport logoImg from \"img/logo_GMX.svg\";\n\ntype Props = {\n  small?: boolean;\n  clickCloseIcon?: () => void;\n  openSettings?: () => void;\n  redirectPopupTimestamp: number;\n  showRedirectModal: (to: string) => void;\n};\n\nexport function AppHeaderLinks({\n  small,\n  openSettings,\n  clickCloseIcon,\n  redirectPopupTimestamp,\n  showRedirectModal,\n}: Props) {\n  return (\n    <div className=\"App-header-links\">\n      {small && (\n        <div className=\"App-header-links-header\">\n          <Link className=\"App-header-link-main\" to=\"/\">\n            <img src={logoImg} alt=\"AMX Logo\" />\n          </Link>\n          <div\n            className=\"App-header-menu-icon-block mobile-cross-menu\"\n            onClick={() => clickCloseIcon && clickCloseIcon()}\n          >\n            <FiX className=\"App-header-menu-icon\" />\n          </div>\n        </div>\n      )}\n      <div className=\"App-header-link-container\">\n        <HeaderLink\n          to=\"/dashboard\"\n          redirectPopupTimestamp={redirectPopupTimestamp}\n          showRedirectModal={showRedirectModal}\n        >\n          <Trans>Dashboard</Trans>\n        </HeaderLink>\n      </div>\n      <div className=\"App-header-link-container\">\n        <HeaderLink to=\"/earn\" redirectPopupTimestamp={redirectPopupTimestamp} showRedirectModal={showRedirectModal}>\n          <Trans>Earn</Trans>\n        </HeaderLink>\n      </div>\n      <div className=\"App-header-link-container\">\n        <HeaderLink to=\"/buy\" redirectPopupTimestamp={redirectPopupTimestamp} showRedirectModal={showRedirectModal}>\n          <Trans>Buy</Trans>\n        </HeaderLink>\n      </div>\n      <div className=\"App-header-link-container\">\n        <HeaderLink\n          to=\"/referrals\"\n          redirectPopupTimestamp={redirectPopupTimestamp}\n          showRedirectModal={showRedirectModal}\n        >\n          <Trans>Referrals</Trans>\n        </HeaderLink>\n      </div>\n      <div className=\"App-header-link-container\">\n        <HeaderLink\n          to=\"/ecosystem\"\n          redirectPopupTimestamp={redirectPopupTimestamp}\n          showRedirectModal={showRedirectModal}\n        >\n          <Trans>Ecosystem</Trans>\n        </HeaderLink>\n      </div>\n      <div className=\"App-header-link-container\">\n        <ExternalLink href=\"https://amxdex.gitbook.io/amxdex/\">\n          <Trans>About</Trans>\n        </ExternalLink>\n      </div>\n      {small && !isHomeSite() && (\n        <div className=\"App-header-link-container\">\n          {/* eslint-disable-next-line */}\n          <a href=\"#\" onClick={openSettings}>\n            <Trans>Settings</Trans>\n          </a>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { ReactNode, useEffect, useState } from \"react\";\nimport cx from \"classnames\";\n\nimport { AppHeaderUser } from \"./AppHeaderUser\";\nimport { AppHeaderLinks } from \"./AppHeaderLinks\";\n\nimport logoImg from \"img/logo_GMX.svg\";\nimport logoSmallImg from \"img/logo_GMX_small.svg\";\nimport { RiMenuLine } from \"react-icons/ri\";\nimport { FaTimes } from \"react-icons/fa\";\nimport { AnimatePresence as FramerAnimatePresence, motion } from \"framer-motion\";\n\nimport \"./Header.css\";\nimport { Link } from \"react-router-dom\";\n\n// Fix framer-motion old React FC type (solved in react 18)\nconst AnimatePresence = (props: React.ComponentProps<typeof FramerAnimatePresence> & { children: ReactNode }) => (\n  <FramerAnimatePresence {...props} />\n);\n\nconst fadeVariants = {\n  hidden: { opacity: 0 },\n  visible: { opacity: 1 },\n};\n\nconst slideVariants = {\n  hidden: { x: \"-100%\" },\n  visible: { x: 0 },\n};\n\ntype Props = {\n  disconnectAccountAndCloseSettings: () => void;\n  openSettings: () => void;\n  setWalletModalVisible: (visible: boolean) => void;\n  redirectPopupTimestamp: number;\n  showRedirectModal: (to: string) => void;\n};\n\nexport function Header({\n  disconnectAccountAndCloseSettings,\n  openSettings,\n  setWalletModalVisible,\n  redirectPopupTimestamp,\n  showRedirectModal,\n}: Props) {\n  const [isDrawerVisible, setIsDrawerVisible] = useState(false);\n  const [isNativeSelectorModalVisible, setIsNativeSelectorModalVisible] = useState(false);\n\n  useEffect(() => {\n    if (isDrawerVisible) {\n      document.body.style.overflow = \"hidden\";\n    } else {\n      document.body.style.overflow = \"unset\";\n    }\n\n    return () => {\n      document.body.style.overflow = \"unset\";\n    };\n  }, [isDrawerVisible]);\n\n  return (\n    <>\n      {isDrawerVisible && (\n        <AnimatePresence>\n          {isDrawerVisible && (\n            <motion.div\n              className=\"App-header-backdrop\"\n              initial=\"hidden\"\n              animate=\"visible\"\n              exit=\"hidden\"\n              variants={fadeVariants}\n              transition={{ duration: 0.2 }}\n              onClick={() => setIsDrawerVisible(!isDrawerVisible)}\n            ></motion.div>\n          )}\n        </AnimatePresence>\n      )}\n      {isNativeSelectorModalVisible && (\n        <AnimatePresence>\n          {isNativeSelectorModalVisible && (\n            <motion.div\n              className=\"selector-backdrop\"\n              initial=\"hidden\"\n              animate=\"visible\"\n              exit=\"hidden\"\n              variants={fadeVariants}\n              transition={{ duration: 0.2 }}\n              onClick={() => setIsNativeSelectorModalVisible(!isNativeSelectorModalVisible)}\n            ></motion.div>\n          )}\n        </AnimatePresence>\n      )}\n      <header>\n        <div className=\"App-header large\">\n          <div className=\"App-header-container-left\">\n            <Link className=\"App-header-link-main\" to=\"/\">\n              <img src={logoImg} className=\"big\" alt=\"AMX Logo\" />\n              <img src={logoSmallImg} className=\"small\" alt=\"AMX Logo\" />\n            </Link>\n            \n          </div>\n          <div className=\"App-header-container-left\">\n            <AppHeaderLinks redirectPopupTimestamp={redirectPopupTimestamp} showRedirectModal={showRedirectModal} />\n          </div>\n          <div className=\"App-header-container-right\">\n            <AppHeaderUser\n              disconnectAccountAndCloseSettings={disconnectAccountAndCloseSettings}\n              openSettings={openSettings}\n              setWalletModalVisible={setWalletModalVisible}\n              redirectPopupTimestamp={redirectPopupTimestamp}\n              showRedirectModal={showRedirectModal}\n            />\n          </div>\n        </div>\n        <div className={cx(\"App-header\", \"small\", { active: isDrawerVisible })}>\n          <div\n            className={cx(\"App-header-link-container\", \"App-header-top\", {\n              active: isDrawerVisible,\n            })}\n          >\n            <div className=\"App-header-container-left\">\n              <div className=\"App-header-menu-icon-block\" onClick={() => setIsDrawerVisible(!isDrawerVisible)}>\n                {!isDrawerVisible && <RiMenuLine className=\"App-header-menu-icon\" />}\n                {isDrawerVisible && <FaTimes className=\"App-header-menu-icon\" />}\n              </div>\n              <div className=\"App-header-link-main clickable\" onClick={() => setIsDrawerVisible(!isDrawerVisible)}>\n                <img src={logoImg} className=\"big\" alt=\"AMX Logo\" />\n                <img src={logoSmallImg} className=\"small\" alt=\"AMX Logo\" />\n              </div>\n            </div>\n            <div className=\"App-header-container-right\">\n              <AppHeaderUser\n                disconnectAccountAndCloseSettings={disconnectAccountAndCloseSettings}\n                openSettings={openSettings}\n                small\n                setWalletModalVisible={setWalletModalVisible}\n                redirectPopupTimestamp={redirectPopupTimestamp}\n                showRedirectModal={showRedirectModal}\n              />\n            </div>\n          </div>\n        </div>\n      </header>\n      <AnimatePresence>\n        {isDrawerVisible && (\n          <motion.div\n            onClick={() => setIsDrawerVisible(false)}\n            className=\"App-header-links-container App-header-drawer\"\n            initial=\"hidden\"\n            animate=\"visible\"\n            exit=\"hidden\"\n            variants={slideVariants}\n            transition={{ duration: 0.2 }}\n          >\n            <AppHeaderLinks\n              small\n              openSettings={openSettings}\n              clickCloseIcon={() => setIsDrawerVisible(false)}\n              redirectPopupTimestamp={redirectPopupTimestamp}\n              showRedirectModal={showRedirectModal}\n            />\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n","import React, { useState, useEffect, useCallback, useRef } from \"react\";\nimport { SWRConfig } from \"swr\";\nimport { ethers } from \"ethers\";\nimport { Web3ReactProvider, useWeb3React } from \"@web3-react/core\";\nimport { Web3Provider } from \"@ethersproject/providers\";\nimport useScrollToTop from \"lib/useScrollToTop\";\n\nimport { Switch, Route, HashRouter as Router, Redirect, useLocation, useHistory } from \"react-router-dom\";\n\nimport {\n  DEFAULT_SLIPPAGE_AMOUNT,\n  BASIS_POINTS_DIVISOR,\n  getAppBaseUrl,\n  isHomeSite,\n  isMobileDevice,\n  REFERRAL_CODE_QUERY_PARAM,\n  isDevelopment,\n} from \"lib/legacy\";\n\nimport Home from \"pages/Home/Home\";\nimport Dashboard from \"pages/Dashboard/Dashboard\";\nimport Ecosystem from \"pages/Ecosystem/Ecosystem\";\nimport Stake from \"pages/Stake/Stake\";\nimport { Exchange } from \"pages/Exchange/Exchange\";\nimport Actions from \"pages/Actions/Actions\";\nimport OrdersOverview from \"pages/OrdersOverview/OrdersOverview\";\nimport PositionsOverview from \"pages/PositionsOverview/PositionsOverview\";\nimport Referrals from \"pages/Referrals/Referrals\";\nimport BuyGlp from \"pages/BuyGlp/BuyGlp\";\nimport BuyGMX from \"pages/BuyGMX/BuyGMX\";\nimport Buy from \"pages/Buy/Buy\";\nimport NftWallet from \"pages/NftWallet/NftWallet\";\nimport ClaimEsGmx from \"pages/ClaimEsGmx/ClaimEsGmx\";\nimport BeginAccountTransfer from \"pages/BeginAccountTransfer/BeginAccountTransfer\";\nimport CompleteAccountTransfer from \"pages/CompleteAccountTransfer/CompleteAccountTransfer\";\n\nimport { cssTransition, ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport Modal from \"components/Modal/Modal\";\nimport Checkbox from \"components/Checkbox/Checkbox\";\n\nimport \"styles/Shared.css\";\nimport \"styles/Font.css\";\nimport \"./App.scss\";\nimport \"styles/Input.css\";\n\nimport metamaskImg from \"img/metamask.png\";\nimport coinbaseImg from \"img/coinbaseWallet.png\";\nimport walletConnectImg from \"img/walletconnect-circle-blue.svg\";\nimport useEventToast from \"components/EventToast/useEventToast\";\nimport EventToastContainer from \"components/EventToast/EventToastContainer\";\nimport SEO from \"components/Common/SEO\";\nimport useRouteQuery from \"lib/useRouteQuery\";\nimport { encodeReferralCode, decodeReferralCode } from \"domain/referrals\";\n\nimport { getContract } from \"config/contracts\";\nimport VaultV2 from \"abis/VaultV2.json\";\nimport VaultV2b from \"abis/VaultV2b.json\";\nimport PositionRouter from \"abis/PositionRouter.json\";\nimport PageNotFound from \"pages/PageNotFound/PageNotFound\";\nimport ReferralTerms from \"pages/ReferralTerms/ReferralTerms\";\nimport TermsAndConditions from \"pages/TermsAndConditions/TermsAndConditions\";\nimport { useLocalStorage } from \"react-use\";\nimport { RedirectPopupModal } from \"components/ModalViews/RedirectModal\";\nimport { REDIRECT_POPUP_TIMESTAMP_KEY } from \"config/ui\";\nimport Jobs from \"pages/Jobs/Jobs\";\n\nimport { i18n } from \"@lingui/core\";\nimport { I18nProvider } from \"@lingui/react\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { defaultLocale, dynamicActivate } from \"lib/i18n\";\nimport { Header } from \"components/Header/Header\";\nimport { ARBITRUM, POLYGON, getAlchemyWsUrl, getExplorerUrl } from \"config/chains\";\nimport { useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { helperToast } from \"lib/helperToast\";\nimport {\n  CURRENT_PROVIDER_LOCALSTORAGE_KEY,\n  DISABLE_ORDER_VALIDATION_KEY,\n  IS_PNL_IN_LEVERAGE_KEY,\n  LANGUAGE_LOCALSTORAGE_KEY,\n  REFERRAL_CODE_KEY,\n  SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY,\n  SHOULD_SHOW_POSITION_LINES_KEY,\n  SHOW_PNL_AFTER_FEES_KEY,\n  SLIPPAGE_BPS_KEY,\n} from \"config/localStorage\";\nimport {\n  activateInjectedProvider,\n  clearWalletConnectData,\n  clearWalletLinkData,\n  getInjectedHandler,\n  getWalletConnectHandler,\n  hasCoinBaseWalletExtension,\n  hasMetaMaskWalletExtension,\n  useEagerConnect,\n  useInactiveListener,\n} from \"lib/wallets\";\nimport { useChainId } from \"lib/chains\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nif (\"ethereum\" in window) {\n  window.ethereum.autoRefreshOnNetworkChange = false;\n}\n\nfunction getLibrary(provider) {\n  const library = new Web3Provider(provider);\n  return library;\n}\n\nconst Zoom = cssTransition({\n  enter: \"zoomIn\",\n  exit: \"zoomOut\",\n  appendPosition: false,\n  collapse: true,\n  collapseDuration: 200,\n  duration: 200,\n});\n\nconst arbWsProvider = new ethers.providers.WebSocketProvider(getAlchemyWsUrl());\n\nconst maticWsProvider = new ethers.providers.JsonRpcProvider(\"https://rpc-mainnet.maticvigil.com/v1/dc3b0e3e09e78528c801d1e74556f0e74412ff13\");\n\nfunction getWsProvider(active, chainId) {\n  if (!active) {\n    return;\n  }\n  if (chainId === ARBITRUM) {\n    return arbWsProvider;\n  }\n\n  if (chainId === POLYGON) {\n    return maticWsProvider;\n  }\n}\n\nfunction FullApp() {\n  const isHome = isHomeSite();\n  const exchangeRef = useRef();\n  const { connector, library, deactivate, activate, active } = useWeb3React();\n  const { chainId } = useChainId();\n  const location = useLocation();\n  const history = useHistory();\n  useEventToast();\n  const [activatingConnector, setActivatingConnector] = useState();\n  useEffect(() => {\n    if (activatingConnector && activatingConnector === connector) {\n      setActivatingConnector(undefined);\n    }\n  }, [activatingConnector, connector, chainId]);\n  const triedEager = useEagerConnect(setActivatingConnector);\n  useInactiveListener(!triedEager || !!activatingConnector);\n\n  const query = useRouteQuery();\n\n  useEffect(() => {\n    let referralCode = query.get(REFERRAL_CODE_QUERY_PARAM);\n    if (!referralCode || referralCode.length === 0) {\n      const params = new URLSearchParams(window.location.search);\n      referralCode = params.get(REFERRAL_CODE_QUERY_PARAM);\n    }\n\n    if (referralCode && referralCode.length <= 20) {\n      const encodedReferralCode = encodeReferralCode(referralCode);\n      if (encodeReferralCode !== ethers.constants.HashZero) {\n        localStorage.setItem(REFERRAL_CODE_KEY, encodedReferralCode);\n        const queryParams = new URLSearchParams(location.search);\n        if (queryParams.has(REFERRAL_CODE_QUERY_PARAM)) {\n          queryParams.delete(REFERRAL_CODE_QUERY_PARAM);\n          history.replace({\n            search: queryParams.toString(),\n          });\n        }\n      }\n    }\n  }, [query, history, location]);\n\n  const disconnectAccount = useCallback(() => {\n    // only works with WalletConnect\n    clearWalletConnectData();\n    // force clear localStorage connection for MM/CB Wallet (Brave legacy)\n    clearWalletLinkData();\n    deactivate();\n  }, [deactivate]);\n\n  const disconnectAccountAndCloseSettings = () => {\n    disconnectAccount();\n    localStorage.removeItem(SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY);\n    localStorage.removeItem(CURRENT_PROVIDER_LOCALSTORAGE_KEY);\n    setIsSettingsVisible(false);\n  };\n\n  const connectInjectedWallet = getInjectedHandler(activate);\n  const activateWalletConnect = () => {\n    getWalletConnectHandler(activate, deactivate, setActivatingConnector)();\n  };\n\n  const userOnMobileDevice = \"navigator\" in window && isMobileDevice(window.navigator);\n\n  const activateMetaMask = () => {\n    if (!hasMetaMaskWalletExtension()) {\n      helperToast.error(\n        <div>\n          <Trans>MetaMask not detected.</Trans>\n          <br />\n          <br />\n          {userOnMobileDevice ? (\n            <Trans>\n              <ExternalLink href=\"https://metamask.io\">Install MetaMask</ExternalLink>, and use $AMX with its built-in\n              browser\n            </Trans>\n          ) : (\n            <Trans>\n              <ExternalLink href=\"https://metamask.io\">Install MetaMask</ExternalLink> to start using $AMX\n            </Trans>\n          )}\n        </div>\n      );\n      return false;\n    }\n    attemptActivateWallet(\"MetaMask\");\n  };\n  const activateCoinBase = () => {\n    if (!hasCoinBaseWalletExtension()) {\n      helperToast.error(\n        <div>\n          <Trans>Coinbase Wallet not detected.</Trans>\n          <br />\n          <br />\n          {userOnMobileDevice ? (\n            <Trans>\n              <ExternalLink href=\"https://www.coinbase.com/wallet\">Install Coinbase Wallet</ExternalLink>, and use AMX\n              with its built-in browser\n            </Trans>\n          ) : (\n            <Trans>\n              <ExternalLink href=\"https://www.coinbase.com/wallet\">Install Coinbase Wallet</ExternalLink> to start using\n              AMX\n            </Trans>\n          )}\n        </div>\n      );\n      return false;\n    }\n    attemptActivateWallet(\"CoinBase\");\n  };\n\n  const attemptActivateWallet = (providerName) => {\n    localStorage.setItem(SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY, true);\n    localStorage.setItem(CURRENT_PROVIDER_LOCALSTORAGE_KEY, providerName);\n    activateInjectedProvider(providerName);\n    connectInjectedWallet();\n  };\n\n  const [walletModalVisible, setWalletModalVisible] = useState(false);\n  const [redirectModalVisible, setRedirectModalVisible] = useState(false);\n  const [shouldHideRedirectModal, setShouldHideRedirectModal] = useState(false);\n  const [redirectPopupTimestamp, setRedirectPopupTimestamp, removeRedirectPopupTimestamp] =\n    useLocalStorage(REDIRECT_POPUP_TIMESTAMP_KEY);\n  const [selectedToPage, setSelectedToPage] = useState(\"\");\n  const connectWallet = () => setWalletModalVisible(true);\n\n  const [isSettingsVisible, setIsSettingsVisible] = useState(false);\n  const [savedSlippageAmount, setSavedSlippageAmount] = useLocalStorageSerializeKey(\n    [chainId, SLIPPAGE_BPS_KEY],\n    DEFAULT_SLIPPAGE_AMOUNT\n  );\n  const [slippageAmount, setSlippageAmount] = useState(0);\n  const [isPnlInLeverage, setIsPnlInLeverage] = useState(false);\n  const [shouldDisableValidationForTesting, setShouldDisableValidationForTesting] = useState(false);\n  const [showPnlAfterFees, setShowPnlAfterFees] = useState(false);\n\n  const [savedIsPnlInLeverage, setSavedIsPnlInLeverage] = useLocalStorageSerializeKey(\n    [chainId, IS_PNL_IN_LEVERAGE_KEY],\n    false\n  );\n\n  const [savedShowPnlAfterFees, setSavedShowPnlAfterFees] = useLocalStorageSerializeKey(\n    [chainId, SHOW_PNL_AFTER_FEES_KEY],\n    false\n  );\n  const [savedShouldDisableValidationForTesting, setSavedShouldDisableValidationForTesting] =\n    useLocalStorageSerializeKey([chainId, DISABLE_ORDER_VALIDATION_KEY], false);\n\n  const [savedShouldShowPositionLines, setSavedShouldShowPositionLines] = useLocalStorageSerializeKey(\n    [chainId, SHOULD_SHOW_POSITION_LINES_KEY],\n    false\n  );\n\n  const openSettings = () => {\n    const slippage = parseInt(savedSlippageAmount);\n    setSlippageAmount((slippage / BASIS_POINTS_DIVISOR) * 100);\n    setIsPnlInLeverage(savedIsPnlInLeverage);\n    setShowPnlAfterFees(savedShowPnlAfterFees);\n    setShouldDisableValidationForTesting(savedShouldDisableValidationForTesting);\n    setIsSettingsVisible(true);\n  };\n\n  const saveAndCloseSettings = () => {\n    const slippage = parseFloat(slippageAmount);\n    if (isNaN(slippage)) {\n      helperToast.error(t`Invalid slippage value`);\n      return;\n    }\n    if (slippage > 5) {\n      helperToast.error(t`Slippage should be less than 5%`);\n      return;\n    }\n\n    const basisPoints = (slippage * BASIS_POINTS_DIVISOR) / 100;\n    if (parseInt(basisPoints) !== parseFloat(basisPoints)) {\n      helperToast.error(t`Max slippage precision is 0.01%`);\n      return;\n    }\n\n    setSavedIsPnlInLeverage(isPnlInLeverage);\n    setSavedShowPnlAfterFees(showPnlAfterFees);\n    setSavedShouldDisableValidationForTesting(shouldDisableValidationForTesting);\n    setSavedSlippageAmount(basisPoints);\n    setIsSettingsVisible(false);\n  };\n\n  const localStorageCode = window.localStorage.getItem(REFERRAL_CODE_KEY);\n  const baseUrl = getAppBaseUrl();\n  let appRedirectUrl = baseUrl + selectedToPage;\n  if (localStorageCode && localStorageCode.length > 0 && localStorageCode !== ethers.constants.HashZero) {\n    const decodedRefCode = decodeReferralCode(localStorageCode);\n    if (decodedRefCode) {\n      appRedirectUrl = `${appRedirectUrl}?ref=${decodedRefCode}`;\n    }\n  }\n\n  const [pendingTxns, setPendingTxns] = useState([]);\n\n  const showRedirectModal = (to) => {\n    setRedirectModalVisible(true);\n    setSelectedToPage(to);\n  };\n\n  useEffect(() => {\n    const checkPendingTxns = async () => {\n      const updatedPendingTxns = [];\n      for (let i = 0; i < pendingTxns.length; i++) {\n        const pendingTxn = pendingTxns[i];\n        const receipt = await library.getTransactionReceipt(pendingTxn.hash);\n        if (receipt) {\n          if (receipt.status === 0) {\n            const txUrl = getExplorerUrl(chainId) + \"tx/\" + pendingTxn.hash;\n            helperToast.error(\n              <div>\n                <Trans>\n                  Txn failed. <ExternalLink href={txUrl}>View</ExternalLink>\n                </Trans>\n                <br />\n              </div>\n            );\n          }\n          if (receipt.status === 1 && pendingTxn.message) {\n            const txUrl = getExplorerUrl(chainId) + \"tx/\" + pendingTxn.hash;\n            helperToast.success(\n              <div>\n                {pendingTxn.message}{\" \"}\n                <ExternalLink href={txUrl}>\n                  <Trans>View</Trans>\n                </ExternalLink>\n                <br />\n              </div>\n            );\n          }\n          continue;\n        }\n        updatedPendingTxns.push(pendingTxn);\n      }\n\n      if (updatedPendingTxns.length !== pendingTxns.length) {\n        setPendingTxns(updatedPendingTxns);\n      }\n    };\n\n    const interval = setInterval(() => {\n      checkPendingTxns();\n    }, 2 * 1000);\n    return () => clearInterval(interval);\n  }, [library, pendingTxns, chainId]);\n\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n\n  useEffect(() => {\n    const wsVaultAbi = chainId === ARBITRUM ? VaultV2.abi : VaultV2b.abi;\n    const wsProvider = getWsProvider(active, chainId);\n    if (!wsProvider) {\n      return;\n    }\n\n    const wsVault = new ethers.Contract(vaultAddress, wsVaultAbi, wsProvider);\n    const wsPositionRouter = new ethers.Contract(positionRouterAddress, PositionRouter.abi, wsProvider);\n\n    const callExchangeRef = (method, ...args) => {\n      if (!exchangeRef || !exchangeRef.current) {\n        return;\n      }\n\n      exchangeRef.current[method](...args);\n    };\n\n    // handle the subscriptions here instead of within the Exchange component to avoid unsubscribing and re-subscribing\n    // each time the Exchange components re-renders, which happens on every data update\n    const onUpdatePosition = (...args) => callExchangeRef(\"onUpdatePosition\", ...args);\n    const onClosePosition = (...args) => callExchangeRef(\"onClosePosition\", ...args);\n    const onIncreasePosition = (...args) => callExchangeRef(\"onIncreasePosition\", ...args);\n    const onDecreasePosition = (...args) => callExchangeRef(\"onDecreasePosition\", ...args);\n    const onCancelIncreasePosition = (...args) => callExchangeRef(\"onCancelIncreasePosition\", ...args);\n    const onCancelDecreasePosition = (...args) => callExchangeRef(\"onCancelDecreasePosition\", ...args);\n\n    wsVault.on(\"UpdatePosition\", onUpdatePosition);\n    wsVault.on(\"ClosePosition\", onClosePosition);\n    wsVault.on(\"IncreasePosition\", onIncreasePosition);\n    wsVault.on(\"DecreasePosition\", onDecreasePosition);\n    wsPositionRouter.on(\"CancelIncreasePosition\", onCancelIncreasePosition);\n    wsPositionRouter.on(\"CancelDecreasePosition\", onCancelDecreasePosition);\n\n    return function cleanup() {\n      wsVault.off(\"UpdatePosition\", onUpdatePosition);\n      wsVault.off(\"ClosePosition\", onClosePosition);\n      wsVault.off(\"IncreasePosition\", onIncreasePosition);\n      wsVault.off(\"DecreasePosition\", onDecreasePosition);\n      wsPositionRouter.off(\"CancelIncreasePosition\", onCancelIncreasePosition);\n      wsPositionRouter.off(\"CancelDecreasePosition\", onCancelDecreasePosition);\n    };\n  }, [active, chainId, vaultAddress, positionRouterAddress]);\n\n  return (\n    <>\n      <div className=\"App\">\n        <div className=\"App-content\">\n          <Header\n            disconnectAccountAndCloseSettings={disconnectAccountAndCloseSettings}\n            openSettings={openSettings}\n            setWalletModalVisible={setWalletModalVisible}\n            redirectPopupTimestamp={redirectPopupTimestamp}\n            showRedirectModal={showRedirectModal}\n          />\n          {isHome && (\n            <Switch>\n              <Route exact path=\"/\">\n                <Home showRedirectModal={showRedirectModal} redirectPopupTimestamp={redirectPopupTimestamp} />\n              </Route>\n              <Route exact path=\"/referral-terms\">\n                <ReferralTerms />\n              </Route>\n              <Route exact path=\"/terms-and-conditions\">\n                <TermsAndConditions />\n              </Route>\n              <Route path=\"*\">\n                <PageNotFound />\n              </Route>\n            </Switch>\n          )}\n          {!isHome && (\n            <Switch>\n              <Route exact path=\"/\">\n                <Redirect to=\"/dashboard\" />\n              </Route>\n              <Route exact path=\"/trade\">\n                <Exchange\n                  ref={exchangeRef}\n                  savedShowPnlAfterFees={savedShowPnlAfterFees}\n                  savedIsPnlInLeverage={savedIsPnlInLeverage}\n                  setSavedIsPnlInLeverage={setSavedIsPnlInLeverage}\n                  savedSlippageAmount={savedSlippageAmount}\n                  setPendingTxns={setPendingTxns}\n                  pendingTxns={pendingTxns}\n                  savedShouldShowPositionLines={savedShouldShowPositionLines}\n                  setSavedShouldShowPositionLines={setSavedShouldShowPositionLines}\n                  connectWallet={connectWallet}\n                  savedShouldDisableValidationForTesting={savedShouldDisableValidationForTesting}\n                />\n              </Route>\n              <Route exact path=\"/dashboard\">\n                <Dashboard />\n              </Route>\n              <Route exact path=\"/earn\">\n                <Stake setPendingTxns={setPendingTxns} connectWallet={connectWallet} />\n              </Route>\n              <Route exact path=\"/buy\">\n                <Buy\n                  savedSlippageAmount={savedSlippageAmount}\n                  setPendingTxns={setPendingTxns}\n                  connectWallet={connectWallet}\n                />\n              </Route>\n              <Route exact path=\"/buy_dlp\">\n                <BuyGlp\n                  savedSlippageAmount={savedSlippageAmount}\n                  setPendingTxns={setPendingTxns}\n                  connectWallet={connectWallet}\n                  savedShouldDisableValidationForTesting={savedShouldDisableValidationForTesting}\n                />\n              </Route>\n              <Route exact path=\"/jobs\">\n                <Jobs />\n              </Route>\n              <Route exact path=\"/buy_amx\">\n                <BuyGMX />\n              </Route>\n              <Route exact path=\"/ecosystem\">\n                <Ecosystem />\n              </Route>\n              <Route exact path=\"/referrals\">\n                <Referrals pendingTxns={pendingTxns} connectWallet={connectWallet} setPendingTxns={setPendingTxns} />\n              </Route>\n              <Route exact path=\"/referrals/:account\">\n                <Referrals pendingTxns={pendingTxns} connectWallet={connectWallet} setPendingTxns={setPendingTxns} />\n              </Route>\n              <Route exact path=\"/nft_wallet\">\n                <NftWallet />\n              </Route>\n              <Route exact path=\"/claim_es_gmx\">\n                <ClaimEsGmx setPendingTxns={setPendingTxns} />\n              </Route>\n              <Route exact path=\"/actions\">\n                <Actions />\n              </Route>\n              <Route exact path=\"/actions/:account\">\n                <Actions />\n              </Route>\n              <Route exact path=\"/orders_overview\">\n                <OrdersOverview />\n              </Route>\n              <Route exact path=\"/positions_overview\">\n                <PositionsOverview />\n              </Route>\n              <Route exact path=\"/begin_account_transfer\">\n                <BeginAccountTransfer setPendingTxns={setPendingTxns} />\n              </Route>\n              <Route exact path=\"/complete_account_transfer/:sender/:receiver\">\n                <CompleteAccountTransfer setPendingTxns={setPendingTxns} />\n              </Route>\n              <Route exact path=\"/referral-terms\">\n                <ReferralTerms />\n              </Route>\n              <Route exact path=\"/terms-and-conditions\">\n                <TermsAndConditions />\n              </Route>\n              <Route path=\"*\">\n                <PageNotFound />\n              </Route>\n            </Switch>\n          )}\n        </div>\n      </div>\n      <ToastContainer\n        limit={1}\n        transition={Zoom}\n        position=\"bottom-right\"\n        autoClose={7000}\n        hideProgressBar={true}\n        newestOnTop={false}\n        closeOnClick={false}\n        draggable={false}\n        pauseOnHover\n      />\n      <EventToastContainer />\n      <RedirectPopupModal\n        redirectModalVisible={redirectModalVisible}\n        setRedirectModalVisible={setRedirectModalVisible}\n        appRedirectUrl={appRedirectUrl}\n        setRedirectPopupTimestamp={setRedirectPopupTimestamp}\n        setShouldHideRedirectModal={setShouldHideRedirectModal}\n        shouldHideRedirectModal={shouldHideRedirectModal}\n        removeRedirectPopupTimestamp={removeRedirectPopupTimestamp}\n      />\n      <Modal\n        className=\"Connect-wallet-modal\"\n        isVisible={walletModalVisible}\n        setIsVisible={setWalletModalVisible}\n        label={t`Connect Wallet`}\n      >\n        <button className=\"Wallet-btn MetaMask-btn\" onClick={activateMetaMask}>\n          <img src={metamaskImg} alt=\"MetaMask\" />\n          <div>\n            <Trans>MetaMask</Trans>\n          </div>\n        </button>\n        <button className=\"Wallet-btn CoinbaseWallet-btn\" onClick={activateCoinBase}>\n          <img src={coinbaseImg} alt=\"Coinbase Wallet\" />\n          <div>\n            <Trans>Coinbase Wallet</Trans>\n          </div>\n        </button>\n        <button className=\"Wallet-btn WalletConnect-btn\" onClick={activateWalletConnect}>\n          <img src={walletConnectImg} alt=\"WalletConnect\" />\n          <div>\n            <Trans>WalletConnect</Trans>\n          </div>\n        </button>\n      </Modal>\n      <Modal\n        className=\"App-settings\"\n        isVisible={isSettingsVisible}\n        setIsVisible={setIsSettingsVisible}\n        label={t`Settings`}\n      >\n        <div className=\"App-settings-row\">\n          <div>\n            <Trans>Allowed Slippage</Trans>\n          </div>\n          <div className=\"App-slippage-tolerance-input-container\">\n            <input\n              type=\"number\"\n              className=\"App-slippage-tolerance-input\"\n              min=\"0\"\n              value={slippageAmount}\n              onChange={(e) => setSlippageAmount(e.target.value)}\n            />\n            <div className=\"App-slippage-tolerance-input-percent\">%</div>\n          </div>\n        </div>\n        <div className=\"Exchange-settings-row\">\n          <Checkbox isChecked={showPnlAfterFees} setIsChecked={setShowPnlAfterFees}>\n            <Trans>Display PnL after fees</Trans>\n          </Checkbox>\n        </div>\n        <div className=\"Exchange-settings-row\">\n          <Checkbox isChecked={isPnlInLeverage} setIsChecked={setIsPnlInLeverage}>\n            <Trans>Include PnL in leverage display</Trans>\n          </Checkbox>\n        </div>\n        {isDevelopment() && (\n          <div className=\"Exchange-settings-row\">\n            <Checkbox isChecked={shouldDisableValidationForTesting} setIsChecked={setShouldDisableValidationForTesting}>\n              <Trans>Disable order validations</Trans>\n            </Checkbox>\n          </div>\n        )}\n\n        <button className=\"App-cta Exchange-swap-button\" onClick={saveAndCloseSettings}>\n          <Trans>Save</Trans>\n        </button>\n      </Modal>\n    </>\n  );\n}\n\nfunction App() {\n  useScrollToTop();\n  useEffect(() => {\n    const defaultLanguage = localStorage.getItem(LANGUAGE_LOCALSTORAGE_KEY) || defaultLocale;\n    dynamicActivate(defaultLanguage);\n  }, []);\n  return (\n    <SWRConfig value={{ refreshInterval: 5000 }}>\n      <Web3ReactProvider getLibrary={getLibrary}>\n        <SEO>\n          <Router>\n            <I18nProvider i18n={i18n}>\n              <FullApp />\n            </I18nProvider>\n          </Router>\n        </SEO>\n      </Web3ReactProvider>\n    </SWRConfig>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function useRouteQuery() {\n  const { search } = useLocation();\n  return React.useMemo(() => new URLSearchParams(search), [search]);\n}\n","import { useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nexport default function useScrollToTop() {\n  const history = useHistory();\n  useEffect(() => {\n    const unlisten = history.listen(() => {\n      window.scrollTo(0, 0);\n    });\n    return () => {\n      unlisten();\n    };\n  }, [history]);\n}\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"regenerator-runtime/runtime\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport App from \"./App/App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.info))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}